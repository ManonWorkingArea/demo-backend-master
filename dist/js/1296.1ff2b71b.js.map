{"version":3,"file":"js/1296.1ff2b71b.js","mappings":"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","sources":["webpack://node-backend/./src/extensions/modules/elearning/lesson/view/course/Streaming.vue","webpack://node-backend/./src/extensions/modules/elearning/lesson/component/course/Streaming.vue","webpack://node-backend/./node_modules/@antmedia/webrtc_adaptor/dist/es/loglevel.min.js","webpack://node-backend/./node_modules/@antmedia/webrtc_adaptor/dist/es/soundmeter.js","webpack://node-backend/./node_modules/@antmedia/webrtc_adaptor/dist/es/fetch.stream.js","webpack://node-backend/./node_modules/@antmedia/webrtc_adaptor/dist/es/utility.js","webpack://node-backend/./node_modules/@antmedia/webrtc_adaptor/dist/es/media_manager.js","webpack://node-backend/./node_modules/@antmedia/webrtc_adaptor/dist/es/webrtc_adaptor-65f8db53.js","webpack://node-backend/./node_modules/@antmedia/webrtc_adaptor/dist/es/video-effect.js","webpack://node-backend/./src/extensions/modules/elearning/lesson/component/course/Streaming.vue?570d","webpack://node-backend/./src/extensions/modules/elearning/lesson/view/course/Streaming.vue?a970"],"sourcesContent":["<script>\nimport {useTitle} \tfrom 'vue-page-title';\nimport {useRoute} \tfrom 'vue-router'\n\nimport Edit \t\tfrom '../../component/course/Streaming';\nimport storageManager from '@/plugins/storage';\n\nexport default {\n\tname: 'Lesson Streaming',\n\tcomponents: {\n\t\t\n\t\tEdit\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tlogin: storageManager.get('session','login'),\n\t\t}\n\t},\n\tmethods: {\n\t},\n\tsetup() {\n        const route     = useRoute();\n        const routeName = route.meta.title;\n        useTitle(routeName);\n    },\n};\n</script>\n\n<template>\n\n<Edit v-if=\"this.login\"/>\n</template>","<template>\n    <div>\n      <h1>Streaming Desk</h1>\n      <div class=\"video-container\">\n        <div class=\"block\">\n          <h2>Webcam</h2>\n          <video ref=\"webcamVideo\" autoplay muted></video>\n          <button @click=\"startWebcam\">Open Webcam</button>\n        </div>\n        <div class=\"block\">\n          <h2>Screen Capture</h2>\n          <video ref=\"screenVideo\" autoplay muted></video>\n          <button @click=\"startScreenCapture\">Share Screen</button>\n        </div>\n      </div>\n      <button @click=\"startStreamingWithAdaptor\" :disabled=\"!webcamStream\">Start Streaming</button>\n      <button @click=\"stopStreamingWithAdaptor\" :disabled=\"!webRTCAdaptor\">Stop Streaming</button>\n      <div id=\"status_info\">Status: {{ streamingStatus }}</div>\n    </div>\n  </template>\n  \n  <script>\n  import { ref, onMounted } from 'vue';\n  import { WebRTCAdaptor } from \"@antmedia/webrtc_adaptor\";\n  \n  export default {\n    setup() {\n      const webcamVideo = ref(null);\n      const screenVideo = ref(null);\n      const webcamStream = ref(null);\n      const screenCaptureStream = ref(null);\n      const webRTCAdaptor = ref(null);\n      const streamingStatus = ref(\"Offline\");\n      const streamId = ref(null);\n  \n      const startWebcam = async () => {\n        try {\n          const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n          webcamVideo.value.srcObject = stream;\n          webcamStream.value = stream;\n        } catch (error) {\n          console.error('Error starting webcam:', error);\n        }\n      };\n  \n      const startScreenCapture = async () => {\n        try {\n          const stream = await navigator.mediaDevices.getDisplayMedia({ video: true });\n          screenVideo.value.srcObject = stream;\n          screenCaptureStream.value = stream;\n        } catch (error) {\n          console.error('Error starting screen capture:', error);\n        }\n      };\n  \n      const startStreamingWithAdaptor = () => {\n        try {\n          streamId.value = \"stream\" + parseInt(Math.random() * 999999);\n          streamingStatus.value = \"Connecting...\";\n          \n          // Publish the stream\n          webRTCAdaptor.value.publish(streamId.value);\n        } catch (error) {\n          console.error('Error starting streaming with WebRTC Adaptor:', error);\n        }\n      };\n  \n      const stopStreamingWithAdaptor = () => {\n        if (webRTCAdaptor.value) {\n          // Stop the streaming session\n          webRTCAdaptor.value.stop(streamId.value);\n          streamingStatus.value = \"Stopping...\";\n        }\n      };\n  \n      onMounted(() => {\n        // Initialize the WebRTCAdaptor\n        webRTCAdaptor.value = new WebRTCAdaptor({\n          websocket_url: \"wss://ams-22851.antmedia.cloud:5443/RTCLIVE/websocket\",\n          localVideoElement: screenVideo.value,\n          callback: (info) => {\n            console.log(\"callback info: \" + info);\n            if (info === \"publish_started\") {\n              console.log(\"publish started\");\n              streamingStatus.value = \"Broadcasting - Stream Id: \" + streamId.value;\n            } else if (info === \"publish_finished\") {\n              console.log(\"publish finished\");\n              streamingStatus.value = \"Offline\";\n            }\n          },\n        });\n      });\n  \n      return {\n        webcamVideo,\n        screenVideo,\n        webcamStream,\n        screenCaptureStream,\n        webRTCAdaptor,\n        streamingStatus,\n        streamId,\n        startWebcam,\n        startScreenCapture,\n        startStreamingWithAdaptor,\n        stopStreamingWithAdaptor,\n      };\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .video-container {\n    display: flex;\n    justify-content: space-between;\n  }\n  \n  .block {\n    flex: 1;\n    margin: 0 10px;\n    padding: 10px;\n    border: 1px solid #ccc;\n    text-align: center;\n  }\n  \n  video {\n    max-width: 100%;\n  }\n  </style>\n  ","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n\n  window.log = definition();\n})(undefined, function () {\n\n  // Slightly dubious tricks to cut down minimized file size\n  var noop = function noop() {};\n  var undefinedType = \"undefined\";\n  var isIE = typeof window !== undefinedType && typeof window.navigator !== undefinedType && /Trident\\/|MSIE /.test(window.navigator.userAgent);\n  var logMethods = [\"trace\", \"debug\", \"info\", \"warn\", \"error\"];\n\n  // Cross-browser bind equivalent that works at least back to IE6\n  function bindMethod(obj, methodName) {\n    var method = obj[methodName];\n    if (typeof method.bind === 'function') {\n      return method.bind(obj);\n    } else {\n      try {\n        return Function.prototype.bind.call(method, obj);\n      } catch (e) {\n        // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n        return function () {\n          return Function.prototype.apply.apply(method, [obj, arguments]);\n        };\n      }\n    }\n  }\n\n  // Trace() doesn't print the message in IE, so for that case we need to wrap it\n  function traceForIE() {\n    if (console.log) {\n      if (console.log.apply) {\n        console.log.apply(console, arguments);\n      } else {\n        // In old IE, native console methods themselves don't have apply().\n        Function.prototype.apply.apply(console.log, [console, arguments]);\n      }\n    }\n    if (console.trace) console.trace();\n  }\n\n  // Build the best logging method possible for this env\n  // Wherever possible we want to bind, not wrap, to preserve stack traces\n  function realMethod(methodName) {\n    if (methodName === 'debug') {\n      methodName = 'log';\n    }\n    if (typeof console === undefinedType) {\n      return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n    } else if (methodName === 'trace' && isIE) {\n      return traceForIE;\n    } else if (console[methodName] !== undefined) {\n      return bindMethod(console, methodName);\n    } else if (console.log !== undefined) {\n      return bindMethod(console, 'log');\n    } else {\n      return noop;\n    }\n  }\n\n  // These private functions always need `this` to be set properly\n\n  function replaceLoggingMethods(level, loggerName) {\n    /*jshint validthis:true */\n    for (var i = 0; i < logMethods.length; i++) {\n      var methodName = logMethods[i];\n      this[methodName] = i < level ? noop : this.methodFactory(methodName, level, loggerName);\n    }\n\n    // Define log.log as an alias for log.debug\n    this.log = this.debug;\n  }\n\n  // In old IE versions, the console isn't present until you first open it.\n  // We build realMethod() replacements here that regenerate logging methods\n  function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n    return function () {\n      if (typeof console !== undefinedType) {\n        replaceLoggingMethods.call(this, level, loggerName);\n        this[methodName].apply(this, arguments);\n      }\n    };\n  }\n\n  // By default, we use closely bound real methods wherever possible, and\n  // otherwise we wait for a console to appear, and then try again.\n  function defaultMethodFactory(methodName, level, loggerName) {\n    /*jshint validthis:true */\n    return realMethod(methodName) || enableLoggingWhenConsoleArrives.apply(this, arguments);\n  }\n  function Logger(name, defaultLevel, factory) {\n    var self = this;\n    var currentLevel;\n    defaultLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n    var storageKey = \"loglevel\";\n    if (typeof name === \"string\") {\n      storageKey += \":\" + name;\n    } else if (typeof name === \"symbol\") {\n      storageKey = undefined;\n    }\n    function persistLevelIfPossible(levelNum) {\n      var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n      if (typeof window === undefinedType || !storageKey) return;\n\n      // Use localStorage if available\n      try {\n        window.localStorage[storageKey] = levelName;\n        return;\n      } catch (ignore) {}\n\n      // Use session cookie as fallback\n      try {\n        window.document.cookie = encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n      } catch (ignore) {}\n    }\n    function getPersistedLevel() {\n      var storedLevel;\n      if (typeof window === undefinedType || !storageKey) return;\n      try {\n        storedLevel = window.localStorage[storageKey];\n      } catch (ignore) {}\n\n      // Fallback to cookies if local storage gives us nothing\n      if (typeof storedLevel === undefinedType) {\n        try {\n          var cookie = window.document.cookie;\n          var location = cookie.indexOf(encodeURIComponent(storageKey) + \"=\");\n          if (location !== -1) {\n            storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n          }\n        } catch (ignore) {}\n      }\n\n      // If the stored level is not valid, treat it as if nothing was stored.\n      if (self.levels[storedLevel] === undefined) {\n        storedLevel = undefined;\n      }\n      return storedLevel;\n    }\n    function clearPersistedLevel() {\n      if (typeof window === undefinedType || !storageKey) return;\n\n      // Use localStorage if available\n      try {\n        window.localStorage.removeItem(storageKey);\n        return;\n      } catch (ignore) {}\n\n      // Use session cookie as fallback\n      try {\n        window.document.cookie = encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n      } catch (ignore) {}\n    }\n\n    /*\n     *\n     * Public logger API - see https://github.com/pimterry/loglevel for details\n     *\n     */\n\n    self.name = name;\n    self.levels = {\n      \"TRACE\": 0,\n      \"DEBUG\": 1,\n      \"INFO\": 2,\n      \"WARN\": 3,\n      \"ERROR\": 4,\n      \"SILENT\": 5\n    };\n    self.methodFactory = factory || defaultMethodFactory;\n    self.getLevel = function () {\n      return currentLevel;\n    };\n    self.setLevel = function (level, persist) {\n      if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n        level = self.levels[level.toUpperCase()];\n      }\n      if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n        currentLevel = level;\n        if (persist !== false) {\n          // defaults to true\n          persistLevelIfPossible(level);\n        }\n        replaceLoggingMethods.call(self, level, name);\n        if (typeof console === undefinedType && level < self.levels.SILENT) {\n          return \"No console available for logging\";\n        }\n      } else {\n        throw \"log.setLevel() called with invalid level: \" + level;\n      }\n    };\n    self.setDefaultLevel = function (level) {\n      defaultLevel = level;\n      if (!getPersistedLevel()) {\n        self.setLevel(level, false);\n      }\n    };\n    self.resetLevel = function () {\n      self.setLevel(defaultLevel, false);\n      clearPersistedLevel();\n    };\n    self.enableAll = function (persist) {\n      self.setLevel(self.levels.TRACE, persist);\n    };\n    self.disableAll = function (persist) {\n      self.setLevel(self.levels.SILENT, persist);\n    };\n\n    // Initialize with the right level\n    var initialLevel = getPersistedLevel();\n    if (initialLevel == null) {\n      initialLevel = defaultLevel;\n    }\n    self.setLevel(initialLevel, false);\n  }\n\n  /*\n   *\n   * Top-level API\n   *\n   */\n\n  var defaultLogger = new Logger();\n  var _loggersByName = {};\n  defaultLogger.getLogger = function getLogger(name) {\n    if (typeof name !== \"symbol\" && typeof name !== \"string\" || name === \"\") {\n      throw new TypeError(\"You must supply a name when creating a logger.\");\n    }\n    var logger = _loggersByName[name];\n    if (!logger) {\n      logger = _loggersByName[name] = new Logger(name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n    }\n    return logger;\n  };\n\n  // Grab the current global log variable in case of overwrite\n  var _log = typeof window !== undefinedType ? window.log : undefined;\n  defaultLogger.noConflict = function () {\n    if (typeof window !== undefinedType && window.log === defaultLogger) {\n      window.log = _log;\n    }\n    return defaultLogger;\n  };\n  defaultLogger.getLoggers = function getLoggers() {\n    return _loggersByName;\n  };\n\n  // ES6 default export, for compatibility\n  defaultLogger['default'] = defaultLogger;\n  return defaultLogger;\n});\nvar Logger = window.log;\n\nexport { Logger };\n","import './loglevel.min.js';\n\nvar Logger = window.log;\nclass SoundMeter {\n  /**\n   * \n   * @param {AudioContext} context \n   */\n  constructor(context, volumeMeterUrl) {\n    this.context = context;\n    this.instant = 0.0;\n    this.mic = null;\n    this.volumeMeterNode = null;\n    this.url = volumeMeterUrl;\n  }\n  /**\n   * \n   * @param {MediaStream} stream \n   * @param {Function} levelCallback \n   * @param {Function} errorCallback \n   * @returns \n   */\n  connectToSource(stream, levelCallback, errorCallback) {\n    return this.context.audioWorklet.addModule(this.url).then(() => {\n      this.mic = this.context.createMediaStreamSource(stream);\n      this.volumeMeterNode = new AudioWorkletNode(this.context, 'volume-meter');\n      this.volumeMeterNode.port.onmessage = event => {\n        if (event.data.type == 'debug') {\n          Logger.debug(event.data.message);\n        } else {\n          this.instant = event.data;\n          levelCallback(this.instant.toFixed(2));\n          Logger.debug(\"Audio level: \" + this.instant.toFixed(2));\n        }\n      };\n      this.mic.connect(this.volumeMeterNode);\n    }).catch(err => {\n      if (errorCallback !== undefined) {\n        errorCallback(err);\n      }\n      Logger.error(\"Error in soundmeter: \" + err);\n      Logger.error(\"You may need to define the url of the volume-meter-processor.js\");\n      throw err;\n    });\n  }\n  stop() {\n    if (this.volumeMeterNode != null) {\n      this.volumeMeterNode.port.postMessage('stop');\n      this.volumeMeterNode.disconnect();\n      this.volumeMeterNode.port.close();\n      this.volumeMeterNode = null;\n    }\n    if (this.mic != null) {\n      this.mic.disconnect();\n      this.mic = null;\n    }\n  }\n}\n\nexport { SoundMeter };\n","import './loglevel.min.js';\n\nvar Logger = window.log;\n\n//ask if adaptive m3u8 file\n\nif (!String.prototype.endsWith) {\n  String.prototype.endsWith = function (searchString, position) {\n    var subjectString = this.toString();\n    if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n      position = subjectString.length;\n    }\n    position -= searchString.length;\n    var lastIndex = subjectString.lastIndexOf(searchString, position);\n    return lastIndex !== -1 && lastIndex === position;\n  };\n}\nfunction tryToPlay(name, token, type, subscriberId, subscriberCode, noStreamCallback) {\n  fetch(\"streams/\" + name + \"_adaptive.\" + type + \"?token=\" + token + \"&subscriberId=\" + subscriberId + \"&subscriberCode=\" + subscriberCode, {\n    method: 'HEAD'\n  }).then(function (response) {\n    if (response.status == 200) {\n      // adaptive m3u8 & mpd exists,play it\n      initializePlayer(name + \"_adaptive\", type, token, subscriberId, subscriberCode);\n    } else {\n      //adaptive not exists, try mpd or m3u8 exists.\n      fetch(\"streams/\" + name + \".\" + type + \"?token=\" + token + \"&subscriberId=\" + subscriberId + \"&subscriberCode=\" + subscriberCode, {\n        method: 'HEAD'\n      }).then(function (response) {\n        if (response.status == 200) {\n          initializePlayer(name, type, token, subscriberId, subscriberCode);\n        } else {\n          Logger.warn(\"No stream found\");\n          if (typeof noStreamCallback != \"undefined\") {\n            noStreamCallback();\n          }\n        }\n      }).catch(function (err) {\n        Logger.warn(\"Error: \" + err);\n        if (typeof noStreamCallback != \"undefined\") {\n          noStreamCallback();\n        }\n      });\n    }\n  }).catch(function (err) {\n    Logger.warn(\"Error: \" + err);\n    if (typeof noStreamCallback != \"undefined\") {\n      noStreamCallback();\n    }\n  });\n}\n/**\n *\n * @param {*} name\n * @param {*} playType\n * @param {*} token\n * @param {*} subscriberId\n * @param {*} subscriberCode\n * @returns\n */\nfunction getURL(name, playType, token, subscriberId, subscriberCode) {\n  var url = \"streams/\" + name;\n  if (typeof playType != \"undefined\" && playType != null) {\n    url += \".\" + playType;\n  }\n  url += \"?\";\n  if (typeof token != \"undefined\") {\n    url += \"&token=\" + token;\n  }\n  if (typeof subscriberId != \"undefined\") {\n    url += \"&subscriberId=\" + subscriberId;\n  }\n  if (typeof subscriberCode != \"undefined\") {\n    url += \"&subscriberCode=\" + subscriberCode;\n  }\n  return url;\n}\n/**\n *\n * @param {*} name\n * @param {*} token\n * @param {*} subscriberId\n * @param {*} subscriberCode\n * @param {*} noStreamCallback\n * @param {*} playType\n * @returns\n */\nfunction tryToVODPlay(name, token, subscriberId, subscriberCode, noStreamCallback, playType) {\n  if (typeof playType == \"undefined\" || playType == null || playType.length == 0) {\n    Logger.error(\"playType is not defined\");\n    return;\n  }\n  var firstPlayType = playType[0];\n  var secondPlayType = null;\n  if (playType.length >= 2) {\n    secondPlayType = playType[1];\n  }\n\n  //check if the direct file name is provided so the playtype parameter is free\n\n  fetch(getURL(name, null, token, subscriberId, subscriberCode), {\n    method: 'HEAD'\n  }).then(function (response) {\n    if (response.status == 200 || response.status == 304) {\n      var dotIndex = name.lastIndexOf(\".\");\n      var filename = name.substring(0, dotIndex);\n      var type = name.substring(dotIndex + 1);\n      initializePlayer(filename, type, token, subscriberId, subscriberCode);\n    } else {\n      fetch(getURL(name, firstPlayType, token, subscriberId, subscriberCode), {\n        method: 'HEAD'\n      }).then(function (response) {\n        if (response.status == 200 || response.status == 304) {\n          //firstPlayType exists, play it\n          initializePlayer(name, firstPlayType, token, subscriberId, subscriberCode);\n        } else if (secondPlayType != null) {\n          fetch(getURL(name, secondPlayType, token, subscriberId, subscriberCode), {\n            method: 'HEAD'\n          }).then(function (response) {\n            if (response.status == 200) {\n              //secondPlayType exists, play it\n              initializePlayer(name, secondPlayType, token, subscriberId, subscriberCode);\n            } else {\n              Logger.warn(\"No stream found\");\n              if (typeof noStreamCallback != \"undefined\") {\n                noStreamCallback();\n              }\n            }\n          }).catch(function (err) {\n            Logger.warn(\"Error: \" + err);\n            if (typeof noStreamCallback != \"undefined\") {\n              noStreamCallback();\n            }\n          });\n        } else {\n          Logger.warn(\"No stream found\");\n          if (typeof noStreamCallback != \"undefined\") {\n            noStreamCallback();\n          }\n        }\n      }).catch(function (err) {\n        Logger.warn(\"Error: \" + err);\n        if (typeof noStreamCallback != \"undefined\") {\n          noStreamCallback();\n        }\n      });\n    }\n  }).catch(function (err) {\n    Logger.warn(\"Error: \" + err);\n    if (typeof noStreamCallback != \"undefined\") {\n      noStreamCallback();\n    }\n  });\n}\nfunction isMobile() {\n  if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i)) {\n    return true;\n  } else {\n    return false;\n  }\n}\n/**\n *\n * @param {string} sParam\n * @param {string=} search\n * @returns\n */\nfunction getUrlParameter(sParam, search) {\n  if (typeof search === undefined || search == null) {\n    search = window.location.search;\n  }\n  var sPageURL = decodeURIComponent(search.substring(1)),\n    sURLVariables = sPageURL.split('&'),\n    sParameterName,\n    i;\n  for (i = 0; i < sURLVariables.length; i++) {\n    sParameterName = sURLVariables[i].split('=');\n    if (sParameterName[0] === sParam) {\n      return sParameterName[1] === undefined ? true : sParameterName[1];\n    }\n  }\n}\n\nexport { getURL, getUrlParameter, isMobile, tryToPlay, tryToVODPlay };\n","import { getUrlParameter } from './fetch.stream.js';\nimport './loglevel.min.js';\n\nvar Logger = window.log;\n/**\n *\n * @param {number} n\n * @returns\n */\nfunction generateRandomString(n) {\n  var randomString = '';\n  var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  for (var i = 0; i < n; i++) {\n    randomString += characters.charAt(Math.floor(Math.random() * characters.length));\n  }\n  return randomString;\n}\n/**\n *\n * @param {Location} location\n * @param {string} rtmpForward\n * @returns\n */\nfunction getWebSocketURL(location, rtmpForward) {\n  var appName = location.pathname.substring(1, location.pathname.indexOf(\"/\", 1) + 1);\n  var path = location.hostname + \":\" + location.port + \"/\" + appName + \"websocket\";\n  if (typeof rtmpForward != \"undefined\") {\n    path += \"?rtmpForward=\" + rtmpForward;\n  }\n  var websocketURL = \"ws://\" + path;\n  if (location.protocol.startsWith(\"https\")) {\n    websocketURL = \"wss://\" + path;\n  }\n  return websocketURL;\n}\n/**\n *\n * @param {Location} location\n * @param {string} id\n * @param {number} port\n * @returns\n */\nfunction getSrtURL(location, id, port) {\n  var appName = location.pathname.substring(1, location.pathname.indexOf(\"/\", 1) + 1);\n  return \"srt://\" + location.hostname + \":\" + port + \"?streamid=\" + appName + id;\n}\n/**\n *\n * @param {Location} location\n * @param {string} id\n * @returns\n */\nfunction getRtmpUrl(location, id) {\n  var appName = location.pathname.substring(1, location.pathname.indexOf(\"/\", 1) + 1);\n  return \"rtmp://\" + location.hostname + \"/\" + appName + id;\n}\n/**\n *\n * @param {string} paramName\n * @returns\n */\nfunction getQueryParameter(paramName) {\n  var value = getUrlParameter(paramName);\n  if (typeof value != \"undefined\") {\n    return \"&\" + paramName + \"=\" + value;\n  }\n  return \"\";\n  //if it does not match, it returns \"undefined\"\n}\n/**\n *\n * @param {string} streamId\n * @param {string} linkUrl\n */\nfunction updateBroadcastStatusInfo(streamId, linkUrl) {\n  $(\"#offlineInfo\").hide();\n  $(\"#broadcastingInfo\").show();\n  if (linkUrl === undefined) {\n    linkUrl = \"../play.html?id=\" + streamId;\n  }\n  $(\"#playlink\").attr(\"href\", linkUrl);\n  $(\"#playlink\").show();\n  setTimeout(function () {\n    var state = window.webRTCAdaptor.signallingState(streamId);\n    if (state != null && state != \"closed\") {\n      var iceState = window.webRTCAdaptor.iceConnectionState(streamId);\n      if (iceState != null && iceState != \"failed\" && iceState != \"disconnected\") {\n        updateBroadcastStatusInfo(streamId, linkUrl);\n      } else {\n        $(\"#playlink\").hide();\n        $(\"#broadcastingInfo\").hide();\n        $(\"#offlineInfo\").show();\n      }\n    } else {\n      $(\"#playlink\").hide();\n      $(\"#broadcastingInfo\").hide();\n      $(\"#offlineInfo\").show();\n    }\n  }, 200);\n}\n\n/**\n * @returns {boolean}\n */\nfunction isAndroid() {\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  return /android/i.test(userAgent);\n}\n\n/**\n *\n * @param {*} error\n * @param {string} message\n * @returns\n */\nfunction errorHandler(error, message) {\n  Logger.warn(\"error callback: \" + JSON.stringify(error));\n  var errorMessage = JSON.stringify(error);\n  if (typeof message != \"undefined\") {\n    errorMessage = message;\n  } else {\n    errorMessage = JSON.stringify(error);\n  }\n  if (error.indexOf(\"WebSocketNotConnected\") != -1) {\n    errorMessage = \"WebSocket is disconnected.\";\n  } else if (error.indexOf(\"not_initialized_yet\") != -1) {\n    errorMessage = \"Server is getting initialized.\";\n  } else if (error.indexOf(\"data_store_not_available\") != -1) {\n    errorMessage = \"Data store is not available. It's likely that server is initialized or getting closed\";\n  } else {\n    if (error.indexOf(\"NotFoundError\") != -1) {\n      errorMessage = \"Camera or Mic are not found or not allowed in your device\";\n    } else if (error.indexOf(\"NotReadableError\") != -1 || error.indexOf(\"TrackStartError\") != -1) {\n      errorMessage = \"Camera or Mic are already in use and they cannot be opened. Choose another video/audio source if you have on the page below \";\n    } else if (error.indexOf(\"OverconstrainedError\") != -1 || error.indexOf(\"ConstraintNotSatisfiedError\") != -1) {\n      errorMessage = \"There is no device found that fits your video and audio constraints. You may change video and audio constraints\";\n    } else if (error.indexOf(\"NotAllowedError\") != -1 || error.indexOf(\"PermissionDeniedError\") != -1) {\n      errorMessage = \"You are not allowed to access camera and mic.\";\n    } else if (error.indexOf(\"TypeError\") != -1) {\n      errorMessage = \"Video/Audio is required\";\n    } else if (error.indexOf(\"getUserMediaIsNotAllowed\") != -1) {\n      errorMessage = \"You are not allowed to reach devices from an insecure origin, please enable ssl\";\n    } else if (error.indexOf(\"ScreenSharePermissionDenied\") != -1) {\n      errorMessage = \"You are not allowed to access screen share\";\n      $(\".video-source\").first().prop(\"checked\", true);\n    } else if (error.indexOf(\"UnsecureContext\") != -1) {\n      errorMessage = \"Please Install SSL(https). Camera and mic cannot be opened because of unsecure context. \";\n    } else if (error.indexOf('no_stream_exist') != -1) {\n      errorMessage = 'There is no active live stream with this id to play';\n    } else {\n      errorMessage = error;\n    }\n  }\n  Logger.error(errorMessage);\n  if (message !== undefined) {\n    Logger.error(message);\n  }\n  return errorMessage;\n}\n\nexport { errorHandler, generateRandomString, getQueryParameter, getRtmpUrl, getSrtURL, getWebSocketURL, isAndroid, updateBroadcastStatusInfo };\n","import { SoundMeter } from './soundmeter.js';\nimport './loglevel.min.js';\nimport { isAndroid } from './utility.js';\nimport './fetch.stream.js';\n\nvar Logger = window.log;\n/**\n * Media management class is responsible to manage audio and video\n * sources and tracks management for the local stream.\n * Also audio and video properties (like bitrate) are managed by this class .\n */\nclass MediaManager {\n  /**\n   *\n   * @param {object} initialValues\n   */\n  constructor(initialValues) {\n    /**\n     * the maximum bandwith value that browser can send a stream\n     * keep in mind that browser may send video less than this value\n     */\n    this.bandwidth = 1200; //kbps\n\n    /**\n     * This flags enables/disables debug logging\n     */\n    this.debug = false;\n\n    /**\n     * The cam_location below is effective when camera and screen is send at the same time.\n     * possible values are top and bottom. It's on right all the time\n     */\n    this.camera_location = \"top\";\n\n    /**\n     * The cam_margin below is effective when camera and screen is send at the same time.\n     * This is the margin value in px from the edges\n     */\n    this.camera_margin = 15;\n\n    /**\n     * this camera_percent is how large the camera view appear on the screen. It's %15 by default.\n     */\n    this.camera_percent = 15;\n\n    /**\n     * initial media constraints provided by the user\n    * @type {MediaStreamConstraints}\n     */\n    this.mediaConstraints = {\n      /** @type {MediaTrackConstraints} */\n      video: true,\n      /** @type {MediaTrackConstraints} */\n      audio: true\n    };\n\n    /**\n     * this is the callback function to get video/audio sender from WebRTCAdaptor\n     */\n    this.getSender = initialValues.getSender;\n\n    /**\n     * This is the Stream Id for the publisher.\n     */\n    this.publishStreamId = null;\n\n    /**\n     * this is the object of the local stream to publish\n     * it is initiated in initLocalStream method\n     */\n    this.localStream = null;\n\n    /**\n     * publish mode is determined by the user and set by @mediaConstraints.video\n     * It may be camera, screen, screen+camera\n     */\n    this.publishMode = \"camera\"; //screen, screen+camera\n\n    /**\n     * Default callback. It's overriden below if it exists\n     */\n    this.callback = (info, obj) => {\n      Logger.debug(\"Callback info: \" + info + \" object: \" + typeof obj !== undefined ? JSON.stringify(obj) : \"\");\n    };\n\n    /**\n     * Default callback error implementation. It's overriden below if it exists\n     */\n    this.callbackError = err => {\n      Logger.error(err);\n    };\n\n    /**\n           * volume-meter-process.js file to find directly. You can locate the file to your assets\n     */\n    this.volumeMeterUrl = 'volume-meter-processor.js';\n\n    /**\n     * The values of the above fields are provided as user parameters by the constructor.\n     * TODO: Also some other hidden parameters may be passed here\n     */\n    for (var key in initialValues.userParameters) {\n      if (initialValues.userParameters.hasOwnProperty(key)) {\n        this[key] = initialValues.userParameters[key];\n      }\n    }\n\n    //set the callback if it's defined\n    if (initialValues.callback) {\n      this.callback = initialValues.callback;\n    }\n\n    //set the callbackError if it's defined\n    if (initialValues.callbackError) {\n      this.callbackError = initialValues.callbackError;\n    }\n\n    /**\n     * current volume value which is set by the user\n     */\n    this.currentVolume = null;\n\n    /**\n     * Keeps the audio track to be closed in case of audio track change\n     */\n    this.previousAudioTrack = null;\n\n    /**\n    * silent audio track for switching between dummy track to real tracks on the fly\n    */\n    this.silentAudioTrack = null;\n\n    /**\n     * The screen video track in screen+camera mode\n     */\n    this.desktopStream = null;\n\n    /**\n     * The camera (overlay) video track in screen+camera mode\n     */\n    this.smallVideoTrack = null;\n\n    /**\n    * black video track for switching between dummy video track to real tracks on the fly\n    */\n    this.blackVideoTrack = null;\n\n    /**\n     * Audio context to use for meter, mix, gain\n     */\n    this.audioContext = new AudioContext();\n\n    /**\n    * osciallator to generate silent audio\n    */\n    this.oscillator = null;\n\n    /**\n     * the main audio in single audio case\n     * the primary audio in mixed audio case\n     *\n     * its volume can be controled\n     */\n    this.primaryAudioTrackGainNode = null;\n\n    /**\n     * the secondary audio in mixed audio case\n     *\n     * its volume can be controled\n     */\n    this.secondaryAudioTrackGainNode = null;\n\n    /**\n     * this is the sound meter object for the local stream\n     */\n    this.localStreamSoundMeter = null;\n\n    /**\n     * this is the level callback for sound meter object\n     */\n    this.levelCallback = null;\n\n    /**\n     * Timer to create black frame to publish when video is muted\n     */\n    this.blackFrameTimer = null;\n\n    /**\n     * Timer to draw camera and desktop to canvas\n     */\n    this.desktopCameraCanvasDrawerTimer = null;\n\n    /**\n     * For audio check when the user is muted itself.\n     * Check enableAudioLevelWhenMuted\n     */\n    this.mutedAudioStream = null;\n\n    /**\n     * This flag is the status of audio stream\n     * Checking when the audio stream is updated\n     */\n    this.isMuted = false;\n\n    /**\n     * meter refresh period for \"are you talking?\" check\n     */\n    this.meterRefresh = null;\n\n    /**\n     * For keeping track of whether user turned off the camera\n     */\n    this.cameraEnabled = true;\n\n    /**\n     * Replacement stream for video track when the camera is turn off\n    */\n    this.replacementStream = null;\n\n    /**\n     * html video element that presents local stream\n     */\n    this.localVideo = this.localVideoElement || document.getElementById(this.localVideoId);\n\n    //A dummy stream created to replace the tracks when camera is turned off.\n    this.dummyCanvas = document.createElement(\"canvas\");\n\n    // It should be compatible with previous version\n    if (this.mediaConstraints) {\n      if (this.mediaConstraints.video == \"camera\") {\n        this.publishMode = \"camera\";\n      } else if (this.mediaConstraints.video == \"screen\") {\n        this.publishMode = \"screen\";\n      } else if (this.mediaConstraints.video == \"screen+camera\") {\n        this.publishMode = \"screen+camera\";\n      }\n    } else {\n      //just define default values\n      this.mediaConstraints = {\n        video: true,\n        audio: true\n      };\n    }\n\n    //Check browser support for screen share function\n    this.checkBrowserScreenShareSupported();\n  }\n\n  /**\n   * Called by the WebRTCAdaptor at the start if it isn't play mode\n   */\n  initLocalStream() {\n    this.checkWebRTCPermissions();\n    if (typeof this.mediaConstraints.video != \"undefined\" && this.mediaConstraints.video != false) {\n      return this.openStream(this.mediaConstraints);\n    } else if (typeof this.mediaConstraints.audio != \"undefined\" && this.mediaConstraints.audio != false) {\n      // get only audio\n      var media_audio_constraint = {\n        audio: this.mediaConstraints.audio\n      };\n      return this.navigatorUserMedia(media_audio_constraint, stream => {\n        return this.gotStream(stream);\n      }, true);\n    } else {\n      //neither video nor audio is requested\n      //just return null stream\n      Logger.debug(\"no media requested, just return an empty stream\");\n      return Promise.resolve(null);\n    }\n  }\n\n  /*\n  * Called to checks if Websocket and media usage are allowed\n  */\n  checkWebRTCPermissions() {\n    if (!(\"WebSocket\" in window)) {\n      Logger.debug(\"WebSocket not supported.\");\n      this.callbackError(\"WebSocketNotSupported\");\n      return;\n    }\n    if (typeof navigator.mediaDevices == \"undefined\") {\n      Logger.debug(\"Cannot open camera and mic because of unsecure context. Please Install SSL(https)\");\n      this.callbackError(\"UnsecureContext\");\n      return;\n    }\n    if (typeof navigator.mediaDevices == \"undefined\" || navigator.mediaDevices == undefined || navigator.mediaDevices == null) {\n      this.callbackError(\"getUserMediaIsNotAllowed\");\n    }\n  }\n\n  /*\n   * Called to get the available video and audio devices on the system\n   */\n  getDevices() {\n    return navigator.mediaDevices.enumerateDevices().then(devices => {\n      var deviceArray = new Array();\n      var checkAudio = false;\n      var checkVideo = false;\n      devices.forEach(device => {\n        if (device.kind == \"audioinput\" || device.kind == \"videoinput\") {\n          deviceArray.push(device);\n          if (device.kind == \"audioinput\") {\n            checkAudio = true;\n          }\n          if (device.kind == \"videoinput\") {\n            checkVideo = true;\n          }\n        }\n      });\n      this.callback(\"available_devices\", deviceArray);\n\n      //TODO: is the following part necessary. why?\n      if (checkAudio == false && this.localStream == null) {\n        Logger.debug(\"Audio input not found\");\n        Logger.debug(\"Retrying to get user media without audio\");\n        if (this.inputDeviceNotFoundLimit < 2) {\n          if (checkVideo != false) {\n            this.openStream({\n              video: true,\n              audio: false\n            });\n            this.inputDeviceNotFoundLimit++;\n          } else {\n            Logger.debug(\"Video input not found\");\n            alert(\"There is no video or audio input\");\n          }\n        } else {\n          alert(\"No input device found, publish is not possible\");\n        }\n      }\n      return deviceArray;\n    }).catch(err => {\n      Logger.error(\"Cannot get devices -> error name: \" + err.name + \": \" + err.message);\n      throw err;\n    });\n  }\n\n  /*\n   * Called to add a device change listener\n   */\n  trackDeviceChange() {\n    navigator.mediaDevices.ondevicechange = () => {\n      this.getDevices();\n    };\n  }\n\n  /**\n   * This function create a canvas which combines screen video and camera video as an overlay\n   *\n   * @param {*} stream : screen share stream\n   * @param {*} streamId\n   * @param {*} onEndedCallback : callback when called on screen share stop\n   */\n  setDesktopwithCameraSource(stream, streamId, onEndedCallback) {\n    this.desktopStream = stream;\n    return this.navigatorUserMedia({\n      video: true,\n      audio: false\n    }, cameraStream => {\n      this.smallVideoTrack = cameraStream.getVideoTracks()[0];\n\n      //create a canvas element\n      var canvas = document.createElement(\"canvas\");\n      var canvasContext = canvas.getContext(\"2d\");\n\n      //create video element for screen\n      //var screenVideo = document.getElementById('sourceVideo');\n      var screenVideo = document.createElement('video');\n      screenVideo.srcObject = stream;\n      screenVideo.play();\n      //create video element for camera\n      var cameraVideo = document.createElement('video');\n      cameraVideo.srcObject = cameraStream;\n      cameraVideo.play();\n      var canvasStream = canvas.captureStream(15);\n      if (onEndedCallback != null) {\n        stream.getVideoTracks()[0].onended = function (event) {\n          onEndedCallback(event);\n        };\n      }\n      var promise;\n      if (this.localStream == null) {\n        promise = this.gotStream(canvasStream);\n      } else {\n        promise = this.updateVideoTrack(canvasStream, streamId, onended, null);\n      }\n      promise.then(() => {\n        //update the canvas\n        this.desktopCameraCanvasDrawerTimer = setInterval(() => {\n          //draw screen to canvas\n          canvas.width = screenVideo.videoWidth;\n          canvas.height = screenVideo.videoHeight;\n          canvasContext.drawImage(screenVideo, 0, 0, canvas.width, canvas.height);\n          var cameraWidth = screenVideo.videoWidth * (this.camera_percent / 100);\n          var cameraHeight = cameraVideo.videoHeight / cameraVideo.videoWidth * cameraWidth;\n          var positionX = canvas.width - cameraWidth - this.camera_margin;\n          var positionY;\n          if (this.camera_location == \"top\") {\n            positionY = this.camera_margin;\n          } else {\n            //if not top, make it bottom\n            //draw camera on right bottom corner\n            positionY = canvas.height - cameraHeight - this.camera_margin;\n          }\n          canvasContext.drawImage(cameraVideo, positionX, positionY, cameraWidth, cameraHeight);\n        }, 66);\n      });\n    }, true);\n  }\n\n  /**\n   * This function does these:\n   *    1. Remove the audio track from the stream provided if it is camera. Other case\n   *       is screen video + system audio track. In this case audio is kept in stream.\n   *    2. Open audio track again if audio constaint isn't false\n   *    3. Make audio track Gain Node to be able to volume adjustable\n   *  4. If screen is shared and system audio is available then the system audio and\n   *     opened audio track are mixed\n   *\n   * @param {*} mediaConstraints\n   * @param {*} audioConstraint\n   * @param {*} stream\n   * @param {*} streamId\n   */\n  prepareStreamTracks(mediaConstraints, audioConstraint, stream, streamId) {\n    //this trick, getting audio and video separately, make us add or remove tracks on the fly\n    var audioTracks = stream.getAudioTracks();\n    if (audioTracks.length > 0 && this.publishMode == \"camera\") {\n      audioTracks[0].stop();\n      stream.removeTrack(audioTracks[0]);\n    }\n    //now get only audio to add this stream\n    if (audioConstraint != \"undefined\" && audioConstraint != false) {\n      var media_audio_constraint = {\n        audio: audioConstraint\n      };\n      return this.navigatorUserMedia(media_audio_constraint).then(audioStream => {\n        //here audioStream has onr audio track only\n        audioStream = this.setGainNodeStream(audioStream);\n        // now audio stream has two audio strams.\n        // 1. Gain Node : this will be added to local stream to publish\n        // 2. Original audio track : keep its reference to stop later\n\n        //add callback if desktop is sharing\n        var onended = event => {\n          this.callback(\"screen_share_stopped\");\n          this.setVideoCameraSource(streamId, mediaConstraints, null, true);\n        };\n        if (this.publishMode == \"screen\") {\n          return this.updateVideoTrack(stream, streamId, onended, true).then(() => {\n            if (audioTracks.length > 0) {\n              //system audio share case, then mix it with device audio\n              audioStream = this.mixAudioStreams(stream, audioStream);\n            }\n            return this.updateAudioTrack(audioStream, streamId, null);\n          });\n        } else if (this.publishMode == \"screen+camera\") {\n          if (audioTracks.length > 0) {\n            //system audio share case, then mix it with device audio\n            audioStream = this.mixAudioStreams(stream, audioStream);\n          }\n          return this.updateAudioTrack(audioStream, streamId, null).then(() => {\n            return this.setDesktopwithCameraSource(stream, streamId, onended);\n          });\n        } else {\n          if (audioConstraint != false && audioConstraint != undefined) {\n            stream.addTrack(audioStream.getAudioTracks()[0]);\n          }\n          if (stream.getVideoTracks().length > 0) {\n            return this.updateVideoTrack(stream, streamId, null, null).then(() => {\n              return this.updateAudioTrack(stream, streamId, null).then(() => {\n                return this.gotStream(stream);\n              });\n            });\n          } else if (stream.getAudioTracks().length > 0) {\n            return this.updateAudioTrack(stream, streamId, null).then(() => {\n              return this.gotStream(stream);\n            });\n          } else {\n            return this.gotStream(stream);\n          }\n        }\n      }).catch(error => {\n        if (error.name == \"NotFoundError\") {\n          this.getDevices();\n        } else {\n          this.callbackError(error.name, error.message);\n        }\n        //throw error for promise\n        throw error;\n      });\n    } else {\n      return this.gotStream(stream);\n    }\n  }\n\n  /**\n   * Called to get user media (camera and/or mic)\n   *\n   * @param {*} mediaConstraints : media constaint\n   * @param {*} func : callback on success. The stream which is got, is passed as parameter to this function\n   * @param {*} catch_error : error is checked if catch_error is true\n   */\n  navigatorUserMedia(mediaConstraints, func, catch_error) {\n    if (mediaConstraints.video == \"dummy\" || mediaConstraints.audio == \"dummy\") {\n      var stream = new MediaStream();\n      if (mediaConstraints.audio == \"dummy\") {\n        stream.addTrack(this.getSilentAudioTrack());\n      }\n      if (mediaConstraints.video == \"dummy\") {\n        stream.addTrack(this.getBlackVideoTrack());\n      }\n      return new Promise((resolve, reject) => {\n        resolve(stream);\n      });\n    } else {\n      return navigator.mediaDevices.getUserMedia(mediaConstraints).then(stream => {\n        if (typeof func != \"undefined\" || func != null) {\n          func(stream);\n        }\n        return stream;\n      }).catch(error => {\n        if (catch_error == true) {\n          if (error.name == \"NotFoundError\") {\n            this.getDevices();\n          } else {\n            this.callbackError(error.name, error.message);\n          }\n        } else {\n          Logger.warn(error);\n        }\n        //throw error if there is a promise\n        throw error;\n      });\n    }\n  }\n\n  /**\n   * Called to get display media (screen share)\n   *\n   * @param {*} mediaConstraints : media constaint\n   * @param {*} func : callback on success. The stream which is got, is passed as parameter to this function\n   */\n  navigatorDisplayMedia(mediaConstraints, func) {\n    return navigator.mediaDevices.getDisplayMedia(mediaConstraints).then(stream => {\n      if (typeof func != \"undefined\") {\n        func(stream);\n      }\n      return stream;\n    }).catch(error => {\n      if (error.name === \"NotAllowedError\") {\n        Logger.debug(\"Permission denied error\");\n        this.callbackError(\"ScreenSharePermissionDenied\");\n\n        // If error catched then redirect Default Stream Camera\n        if (this.localStream == null) {\n          var mediaConstraints = {\n            video: true,\n            audio: true\n          };\n          this.openStream(mediaConstraints);\n        } else {\n          this.switchVideoCameraCapture(streamId);\n        }\n      }\n    });\n  }\n\n  /**\n   * Called to get the media (User Media or Display Media)\n   * @param {*} mediaConstraints, media constraints\n   * @param {*} streamId, streamId to be used to replace track if there is an active peer connection\n   */\n  getMedia(mediaConstraints, streamId) {\n    var audioConstraint = false;\n    if (typeof mediaConstraints.audio != \"undefined\" && mediaConstraints.audio != false) {\n      audioConstraint = mediaConstraints.audio;\n    }\n    if (this.desktopCameraCanvasDrawerTimer != null) {\n      clearInterval(this.desktopCameraCanvasDrawerTimer);\n      this.desktopCameraCanvasDrawerTimer = null;\n    }\n\n    // Check Media Constraint video value screen or screen + camera\n    if (this.publishMode == \"screen+camera\" || this.publishMode == \"screen\") {\n      return this.navigatorDisplayMedia(mediaConstraints).then(stream => {\n        if (this.smallVideoTrack) this.smallVideoTrack.stop();\n        return this.prepareStreamTracks(mediaConstraints, audioConstraint, stream, streamId);\n      });\n    } else {\n      return this.navigatorUserMedia(mediaConstraints).then(stream => {\n        if (this.smallVideoTrack) this.smallVideoTrack.stop();\n        return this.prepareStreamTracks(mediaConstraints, audioConstraint, stream, streamId);\n      }).catch(error => {\n        if (error.name == \"NotFoundError\") {\n          this.getDevices();\n        } else {\n          this.callbackError(error.name, error.message);\n        }\n      });\n    }\n  }\n\n  /**\n   * Open media stream, it may be screen, camera or audio\n   */\n  openStream(mediaConstraints, streamId) {\n    this.mediaConstraints = mediaConstraints;\n    return this.getMedia(mediaConstraints, streamId).then(() => {\n      if (this.mediaConstraints.video != \"dummy\" && this.mediaConstraints.video != undefined) {\n        this.stopBlackVideoTrack();\n        this.clearBlackVideoTrackTimer();\n      }\n      if (this.mediaConstraints.audio != \"dummy\" && this.mediaConstraints.audio != undefined) {\n        this.stopSilentAudioTrack();\n      }\n    });\n  }\n\n  /**\n   * Closes stream, if you want to stoppeer connection, call stop(streamId)\n   */\n  closeStream() {\n    if (this.localStream) {\n      this.localStream.getVideoTracks().forEach(function (track) {\n        track.onended = null;\n        track.stop();\n      });\n      this.localStream.getAudioTracks().forEach(function (track) {\n        track.onended = null;\n        track.stop();\n      });\n    }\n    if (this.videoTrack) {\n      this.videoTrack.stop();\n    }\n    if (this.audioTrack) {\n      this.audioTrack.stop();\n    }\n    if (this.smallVideoTrack) {\n      this.smallVideoTrack.stop();\n    }\n    if (this.previousAudioTrack) {\n      this.previousAudioTrack.stop();\n    }\n  }\n\n  /**\n   * Checks browser supports screen share feature\n   * if exist it calls callback with \"browser_screen_share_supported\"\n   */\n  checkBrowserScreenShareSupported() {\n    if (typeof navigator.mediaDevices != \"undefined\" && navigator.mediaDevices.getDisplayMedia || navigator.getDisplayMedia) {\n      this.callback(\"browser_screen_share_supported\");\n    }\n  }\n  /**\n   * Changes the secondary stream gain in mixed audio mode\n   *\n   * @param {*} enable\n   */\n  enableSecondStreamInMixedAudio(enable) {\n    if (this.secondaryAudioTrackGainNode != null) {\n      if (enable) {\n        this.secondaryAudioTrackGainNode.gain.value = 1;\n      } else {\n        this.secondaryAudioTrackGainNode.gain.value = 0;\n      }\n    }\n  }\n\n  /**\n   * Changes local stream when new stream is prepared\n   *\n   * @param {*} stream\n   */\n  gotStream(stream) {\n    this.localStream = stream;\n    if (this.localVideo) {\n      this.localVideo.srcObject = stream;\n    }\n    this.getDevices();\n    this.trackDeviceChange();\n    return new Promise((resolve, reject) => {\n      resolve();\n    });\n  }\n\n  /**\n   * Changes local video and sets localStream as source\n   *\n   * @param {*} videoEl\n   */\n  changeLocalVideo(videoEl) {\n    this.localVideo = videoEl;\n    if (this.localStream) {\n      this.localVideo.srcObject = this.localStream;\n    }\n  }\n\n  /**\n   * These methods are initialized when the user is muted himself in a publish scenario\n   * It will keep track if the user is trying to speak without sending any data to server\n   * Please don't forget to disable this function with disableAudioLevelWhenMuted if you use it.\n   */\n  enableAudioLevelWhenMuted() {\n    return new Promise((resolve, reject) => {\n      navigator.mediaDevices.getUserMedia({\n        video: false,\n        audio: true\n      }).then(stream => {\n        this.mutedAudioStream = stream;\n        this.mutedSoundMeter = new SoundMeter(this.audioContext, this.volumeMeterUrl);\n        this.mutedSoundMeter.connectToSource(this.mutedAudioStream, value => {\n          if (value > 0.1) {\n            this.callback(\"speaking_but_muted\");\n          }\n        }, e => {\n          if (e) {\n            reject(e);\n          }\n          this.meterRefresh = setInterval(() => {\n            if (this.mutedSoundMeter.instant.toFixed(2) > 0.1) {\n              this.callback(\"speaking_but_muted\");\n            }\n          }, 200);\n          resolve(null);\n        });\n      }).catch(function (err) {\n        Logger.debug(\"Can't get the soundlevel on mute\");\n        reject(err);\n      });\n    });\n  }\n  disableAudioLevelWhenMuted() {\n    if (this.meterRefresh != null) {\n      clearInterval(this.meterRefresh);\n      this.meterRefresh = null;\n    }\n    if (this.mutedSoundMeter != null) {\n      this.mutedSoundMeter.stop();\n      this.mutedSoundMeter = null;\n    }\n    if (this.mutedAudioStream != null) {\n      this.mutedAudioStream.getTracks().forEach(function (track) {\n        track.stop();\n      });\n    }\n  }\n\n  /**\n  * @Deprecated. It's not the job of SDK to make these things. It increases the complexity of the code.\n   * We provide samples for having these function\n   *\n   * This method mixed the first stream audio to the second stream audio and\n   * @param {*} stream  : Primary stream that contain video and audio (system audio)\n   * @param {*} secondStream :stream has device audio\n   * @returns mixed stream.\n   */\n  mixAudioStreams(stream, secondStream) {\n    //Logger.debug(\"audio stream track count: \" + audioStream.getAudioTracks().length);\n    var composedStream = new MediaStream();\n    //added the video stream from the screen\n    stream.getVideoTracks().forEach(function (videoTrack) {\n      composedStream.addTrack(videoTrack);\n    });\n    var audioDestionation = this.audioContext.createMediaStreamDestination();\n    if (stream.getAudioTracks().length > 0) {\n      this.primaryAudioTrackGainNode = this.audioContext.createGain();\n\n      //Adjust the gain for screen sound\n      this.primaryAudioTrackGainNode.gain.value = 1;\n      var audioSource = this.audioContext.createMediaStreamSource(stream);\n      audioSource.connect(this.primaryAudioTrackGainNode).connect(audioDestionation);\n    } else {\n      Logger.debug(\"Origin stream does not have audio track\");\n    }\n    if (secondStream.getAudioTracks().length > 0) {\n      this.secondaryAudioTrackGainNode = this.audioContext.createGain();\n\n      //Adjust the gain for second sound\n      this.secondaryAudioTrackGainNode.gain.value = 1;\n      var audioSource2 = this.audioContext.createMediaStreamSource(secondStream);\n      audioSource2.connect(this.secondaryAudioTrackGainNode).connect(audioDestionation);\n    } else {\n      Logger.debug(\"Second stream does not have audio track\");\n    }\n    audioDestionation.stream.getAudioTracks().forEach(function (track) {\n      composedStream.addTrack(track);\n      Logger.debug(\"audio destination add track\");\n    });\n    return composedStream;\n  }\n\n  /**\n   * This method creates a Gain Node stream to make the audio track adjustable\n   *\n   * @param {*} stream\n   * @returns\n   */\n  setGainNodeStream(stream) {\n    if (this.mediaConstraints.audio != false && typeof this.mediaConstraints.audio != \"undefined\") {\n      // Get the videoTracks from the stream.\n      var videoTracks = stream.getVideoTracks();\n\n      // Get the audioTracks from the stream.\n      var audioTracks = stream.getAudioTracks();\n\n      /**\n       * Create a new audio context and build a stream source,\n       * stream destination and a gain node. Pass the stream into\n       * the mediaStreamSource so we can use it in the Web Audio API.\n       */\n      this.audioContext = new AudioContext();\n      var mediaStreamSource = this.audioContext.createMediaStreamSource(stream);\n      var mediaStreamDestination = this.audioContext.createMediaStreamDestination();\n      this.primaryAudioTrackGainNode = this.audioContext.createGain();\n\n      /**\n       * Connect the stream to the gainNode so that all audio\n       * passes through the gain and can be controlled by it.\n       * Then pass the stream from the gain to the mediaStreamDestination\n       * which can pass it back to the RTC client.\n       */\n      mediaStreamSource.connect(this.primaryAudioTrackGainNode);\n      this.primaryAudioTrackGainNode.connect(mediaStreamDestination);\n      if (this.currentVolume == null) {\n        this.primaryAudioTrackGainNode.gain.value = 1;\n      } else {\n        this.primaryAudioTrackGainNode.gain.value = this.currentVolume;\n      }\n\n      /**\n       * The mediaStreamDestination.stream outputs a MediaStream object\n       * containing a single AudioMediaStreamTrack. Add the video track\n       * to the new stream to rejoin the video with the controlled audio.\n       */\n      var controlledStream = mediaStreamDestination.stream;\n      for (var videoTrack of videoTracks) {\n        controlledStream.addTrack(videoTrack);\n      }\n      for (var audioTrack of audioTracks) {\n        controlledStream.addTrack(audioTrack);\n      }\n      if (this.previousAudioTrack !== null) {\n        this.previousAudioTrack.stop();\n      }\n      this.previousAudioTrack = controlledStream.getAudioTracks()[1];\n\n      /**\n       * Use the stream that went through the gainNode. This\n       * is the same stream but with altered input volume levels.\n       */\n      return controlledStream;\n    }\n    return stream;\n  }\n\n  /**\n   * Called by User\n   * to switch the Screen Share mode\n   *\n   * @param {*} streamId\n   */\n  switchDesktopCapture(streamId) {\n    this.publishMode = \"screen\";\n    if (typeof this.mediaConstraints.video != \"undefined\" && this.mediaConstraints.video != false) {\n      this.mediaConstraints.video = true;\n    }\n    //TODO: I don't think we need to get audio again. We just need to switch the video stream\n    return this.getMedia(this.mediaConstraints, streamId);\n  }\n\n  /**\n   * Called by User\n   * to switch the Screen Share with Camera mode\n   *\n   * @param {*} streamId\n   */\n  switchDesktopCaptureWithCamera(streamId) {\n    if (typeof this.mediaConstraints.video != \"undefined\" && this.mediaConstraints.video != false) {\n      this.mediaConstraints.video = true;\n    }\n    this.publishMode = \"screen+camera\";\n\n    //TODO: I don't think we need to get audio again. We just need to switch the video stream\n    return this.getMedia(this.mediaConstraints, streamId);\n  }\n\n  /**\n   * This method updates the local stream. It removes existant audio track from the local stream\n   * and add the audio track in `stream` parameter to the local stream\n   */\n  updateLocalAudioStream(stream, onEndedCallback) {\n    var newAudioTrack = stream.getAudioTracks()[0];\n    if (this.localStream != null && this.localStream.getAudioTracks()[0] != null) {\n      var audioTrack = this.localStream.getAudioTracks()[0];\n      if (audioTrack != newAudioTrack) {\n        this.localStream.removeTrack(audioTrack);\n        audioTrack.stop();\n        this.localStream.addTrack(newAudioTrack);\n      }\n    } else if (this.localStream != null) {\n      this.localStream.addTrack(newAudioTrack);\n    } else {\n      this.localStream = stream;\n    }\n    if (this.localVideo != null) {\n      //it can be null\n      this.localVideo.srcObject = this.localStream;\n    }\n    if (onEndedCallback != null) {\n      stream.getAudioTracks()[0].onended = function (event) {\n        onEndedCallback(event);\n      };\n    }\n    if (this.isMuted) {\n      this.muteLocalMic();\n    } else {\n      this.unmuteLocalMic();\n    }\n    if (this.localStreamSoundMeter != null) {\n      this.enableAudioLevelForLocalStream(this.levelCallback);\n    }\n  }\n\n  /**\n   * This method updates the local stream. It removes existant video track from the local stream\n   * and add the video track in `stream` parameter to the local stream\n   */\n  updateLocalVideoStream(stream, onEndedCallback, stopDesktop) {\n    if (stopDesktop && this.desktopStream != null) {\n      this.desktopStream.getVideoTracks()[0].stop();\n    }\n    var newVideoTrack = stream.getVideoTracks()[0];\n    if (this.localStream != null && this.localStream.getVideoTracks()[0] != null) {\n      var videoTrack = this.localStream.getVideoTracks()[0];\n      if (videoTrack != newVideoTrack) {\n        this.localStream.removeTrack(videoTrack);\n        videoTrack.stop();\n        this.localStream.addTrack(newVideoTrack);\n      }\n    } else if (this.localStream != null) {\n      this.localStream.addTrack(newVideoTrack);\n    } else {\n      this.localStream = stream;\n    }\n    if (this.localVideo) {\n      this.localVideo.srcObject = this.localStream;\n    }\n    if (onEndedCallback != null) {\n      stream.getVideoTracks()[0].onended = function (event) {\n        onEndedCallback(event);\n      };\n    }\n  }\n\n  /**\n   * Called by User\n   * to change video source\n   *\n   * @param {*} streamId\n   * @param {*} deviceId\n   */\n  switchAudioInputSource(streamId, deviceId) {\n    //stop the track because in some android devices need to close the current camera stream\n    var audioTrack = this.localStream.getAudioTracks()[0];\n    if (audioTrack && isAndroid()) {\n      audioTrack.stop();\n    }\n    if (typeof audioTrack == \"undefined\") {\n      Logger.warn(\"There is no audio track in local stream\");\n    }\n    if (typeof deviceId != \"undefined\") {\n      //Update the media constraints\n      if (this.mediaConstraints.audio !== true) this.mediaConstraints.audio.deviceId = deviceId;else this.mediaConstraints.audio = {\n        \"deviceId\": deviceId\n      };\n\n      //to change only audio track set video false otherwise issue #3826 occurs on Android\n      var tempMediaConstraints = {\n        \"video\": false,\n        \"audio\": {\n          \"deviceId\": deviceId\n        }\n      };\n      return this.setAudioInputSource(streamId, tempMediaConstraints, null, deviceId);\n    } else {\n      return new Promise((resolve, reject) => {\n        reject(\"There is no device id for audio input source\");\n      });\n    }\n  }\n\n  /**\n   * This method sets Audio Input Source and called when you change audio device\n   * It calls updateAudioTrack function to update local audio stream.\n   */\n  setAudioInputSource(streamId, mediaConstraints, onEndedCallback) {\n    return this.navigatorUserMedia(mediaConstraints, stream => {\n      stream = this.setGainNodeStream(stream);\n      return this.updateAudioTrack(stream, streamId, mediaConstraints, onEndedCallback);\n    }, true);\n  }\n  checkAndStopLocalVideoTrackOnAndroid() {\n    //stop the track because in some android devices need to close the current camera stream\n    if (this.localStream && this.localStream.getVideoTracks().length > 0 && isAndroid()) {\n      var videoTrack = this.localStream.getVideoTracks()[0];\n      videoTrack.stop();\n    }\n    if (this.localStream === null || this.localStream.getVideoTracks().length === 0) {\n      Logger.warn(\"There is no video track in local stream\");\n    }\n  }\n\n  /**\n   * Called by User\n   * to change video camera capture\n   *\n   * @param {*} streamId Id of the stream to be changed.\n   * @param {*} deviceId Id of the device which will use as a media device\n   * @param {*} onEndedCallback callback for when the switching video state is completed, can be used to understand if it is loading or not\n   *\n   * This method is used to switch to video capture.\n   */\n  switchVideoCameraCapture(streamId, deviceId, onEndedCallback) {\n    this.checkAndStopLocalVideoTrackOnAndroid();\n    this.publishMode = \"camera\";\n    return navigator.mediaDevices.enumerateDevices().then(devices => {\n      for (var i = 0; i < devices.length; i++) {\n        if (devices[i].kind == \"videoinput\") {\n          //Adjust video source only if there is a matching device id with the given one.\n          //It creates problems if we don't check that since video can be just true to select default cam and it is like that in many cases.\n          if (devices[i].deviceId == deviceId) {\n            if (this.mediaConstraints.video !== true) this.mediaConstraints.video.deviceId = {\n              exact: deviceId\n            };else this.mediaConstraints.video = {\n              deviceId: {\n                exact: deviceId\n              }\n            };\n            break;\n          }\n        }\n      }\n      //If no matching device found don't adjust the media constraints let it be true instead of a device ID\n      Logger.debug(\"Given deviceId = \" + deviceId + \" - Media constraints video property = \" + this.mediaConstraints.video);\n      return this.setVideoCameraSource(streamId, this.mediaConstraints, onEndedCallback, true, deviceId);\n    });\n  }\n\n  /**\n   * This method sets Video Input Source and called when you change video device\n   * It calls updateVideoTrack function to update local video stream.\n   */\n  setVideoCameraSource(streamId, mediaConstraints, onEndedCallback, stopDesktop) {\n    return this.navigatorUserMedia(mediaConstraints, stream => {\n      if (stopDesktop && this.secondaryAudioTrackGainNode && stream.getAudioTracks().length > 0) {\n        //This audio track update is necessary for such a case:\n        //If you enable screen share with browser audio and then\n        //return back to the camera, the audio should be only from mic.\n        //If, we don't update audio with the following lines,\n        //the mixed (mic+browser) audio would be streamed in the camera mode.\n        this.secondaryAudioTrackGainNode = null;\n        stream = this.setGainNodeStream(stream);\n        this.updateAudioTrack(stream, streamId, mediaConstraints, onEndedCallback);\n      }\n      if (this.cameraEnabled) {\n        return this.updateVideoTrack(stream, streamId, onEndedCallback, stopDesktop);\n      } else {\n        return this.turnOffLocalCamera();\n      }\n    }, true);\n  }\n\n  /**\n   * Called by User\n   * to switch between front and back camera on mobile devices\n   *\n   * @param {*} streamId Id of the stream to be changed.\n   * @param {*} facingMode it can be \"user\" or \"environment\"\n   *\n   * This method is used to switch front and back camera.\n   */\n  switchVideoCameraFacingMode(streamId, facingMode) {\n    this.checkAndStopLocalVideoTrackOnAndroid();\n\n    // When device id set, facing mode is not working\n    // so, remove device id\n    if (this.mediaConstraints.video !== undefined && this.mediaConstraints.video.deviceId !== undefined) {\n      delete this.mediaConstraints.video.deviceId;\n    }\n    var videoConstraint = {\n      'facingMode': facingMode\n    };\n    this.mediaConstraints.video = Object.assign({}, this.mediaConstraints.video, videoConstraint);\n    this.publishMode = \"camera\";\n    Logger.debug(\"Media constraints video property = \" + this.mediaConstraints.video);\n    return this.setVideoCameraSource(streamId, {\n      video: this.mediaConstraints.video\n    }, null, true);\n  }\n\n  /**\n   * Updates the audio track in the audio sender\n   * getSender method is set on MediaManagercreation by WebRTCAdaptor\n   *\n   * @param {*} stream\n   * @param {*} streamId\n   * @param {*} onEndedCallback\n   */\n  updateAudioTrack(stream, streamId, onEndedCallback) {\n    var audioTrackSender = this.getSender(streamId, \"audio\");\n    if (audioTrackSender) {\n      return audioTrackSender.replaceTrack(stream.getAudioTracks()[0]).then(result => {\n        this.updateLocalAudioStream(stream, onEndedCallback);\n      }).catch(function (error) {\n        Logger.debug(error.name);\n        throw error;\n      });\n    } else {\n      this.updateLocalAudioStream(stream, onEndedCallback);\n      return new Promise((resolve, reject) => {\n        resolve();\n      });\n    }\n  }\n\n  /**\n   * Updates the video track in the video sender\n   * getSender method is set on MediaManagercreation by WebRTCAdaptor\n   *\n   * @param {*} stream\n   * @param {*} streamId\n   * @param {*} onEndedCallback\n   */\n  updateVideoTrack(stream, streamId, onEndedCallback, stopDesktop) {\n    var videoTrackSender = this.getSender(streamId, \"video\");\n    if (videoTrackSender) {\n      return videoTrackSender.replaceTrack(stream.getVideoTracks()[0]).then(result => {\n        this.updateLocalVideoStream(stream, onEndedCallback, stopDesktop);\n      }).catch(error => {\n        Logger.debug(error.name);\n      });\n    } else {\n      this.updateLocalVideoStream(stream, onEndedCallback, stopDesktop);\n      return new Promise((resolve, reject) => {\n        resolve();\n      });\n    }\n  }\n\n  /**\n   * If you mute turn off the camera still some data should be sent\n   * Tihs method create a black frame to reduce data transfer\n   */\n  getBlackVideoTrack() {\n    this.dummyCanvas.getContext('2d').fillRect(0, 0, 320, 240);\n\n    //REFACTOR: it's not good to set to a replacement stream\n    this.replacementStream = this.dummyCanvas.captureStream();\n    //We need to send black frames within a time interval, because when the user turn off the camera,\n    //player can't connect to the sender since there is no data flowing. Sending a black frame in each 3 seconds resolves it.\n    if (this.blackFrameTimer == null) {\n      this.blackFrameTimer = setInterval(() => {\n        this.getBlackVideoTrack();\n      }, 3000);\n    }\n    this.blackVideoTrack = this.replacementStream.getVideoTracks()[0];\n    return this.blackVideoTrack;\n  }\n\n  /**\n   * Silent audio track\n  */\n  getSilentAudioTrack() {\n    this.stopSilentAudioTrack();\n    this.oscillator = this.audioContext.createOscillator();\n    var dst = this.oscillator.connect(this.audioContext.createMediaStreamDestination());\n    this.oscillator.start();\n    this.silentAudioTrack = dst.stream.getAudioTracks()[0];\n    return this.silentAudioTrack;\n  }\n  stopSilentAudioTrack() {\n    if (this.oscillator != null) {\n      this.oscillator.stop();\n      this.oscillator.disconnect();\n      this.oscillator = null;\n    }\n    if (this.silentAudioTrack != null) {\n      this.silentAudioTrack.stop();\n      this.silentAudioTrack = null;\n    }\n  }\n\n  /**\n   * Called by User\n   * turns of the camera stream and starts streaming black dummy frame\n   */\n  turnOffLocalCamera(streamId) {\n    //Initialize the first dummy frame for switching.\n    this.getBlackVideoTrack();\n    if (this.localStream != null) {\n      var choosenId;\n      if (streamId != null || typeof streamId != \"undefined\") {\n        choosenId = streamId;\n      } else {\n        choosenId = this.publishStreamId;\n      }\n      this.cameraEnabled = false;\n      return this.updateVideoTrack(this.replacementStream, choosenId, null, true);\n    } else {\n      return new Promise((resolve, reject) => {\n        this.callbackError(\"NoActiveConnection\");\n        reject(\"NoActiveStream\");\n      });\n    }\n  }\n  clearBlackVideoTrackTimer() {\n    if (this.blackFrameTimer != null) {\n      clearInterval(this.blackFrameTimer);\n      this.blackFrameTimer = null;\n    }\n  }\n  stopBlackVideoTrack() {\n    if (this.blackVideoTrack != null) {\n      this.blackVideoTrack.stop();\n      this.blackVideoTrack = null;\n    }\n  }\n\n  /**\n   * Called by User\n   * turns of the camera stream and starts streaming camera again instead of black dummy frame\n   */\n  turnOnLocalCamera(streamId) {\n    this.clearBlackVideoTrackTimer();\n    this.stopBlackVideoTrack();\n    if (this.localStream == null) {\n      return this.navigatorUserMedia(this.mediaConstraints, stream => {\n        this.gotStream(stream);\n      }, false);\n    }\n    //This method will get the camera track and replace it with dummy track\n    else {\n      return this.navigatorUserMedia(this.mediaConstraints, stream => {\n        var choosenId;\n        if (streamId != null || typeof streamId != \"undefined\") {\n          choosenId = streamId;\n        } else {\n          choosenId = this.publishStreamId;\n        }\n        this.cameraEnabled = true;\n        this.updateVideoTrack(stream, choosenId, null, true);\n      }, false);\n    }\n  }\n\n  /**\n   * Called by User\n   * to mute local audio streaming\n   */\n  muteLocalMic() {\n    this.isMuted = true;\n    if (this.localStream != null) {\n      this.localStream.getAudioTracks().forEach(track => track.enabled = false);\n    } else {\n      this.callbackError(\"NoActiveConnection\");\n    }\n  }\n\n  /**\n   * Called by User\n   * to unmute local audio streaming\n   *\n   * if there is audio it calls callbackError with \"AudioAlreadyActive\" parameter\n   */\n  unmuteLocalMic() {\n    this.isMuted = false;\n    if (this.localStream != null) {\n      this.localStream.getAudioTracks().forEach(track => track.enabled = true);\n    } else {\n      this.callbackError(\"NoActiveConnection\");\n    }\n  }\n\n  /**\n   * If we have multiple videotracks in coming versions, this method may cause some issues\n   */\n  getVideoSender(streamId) {\n    var videoSender = null;\n    if (typeof adapter !== \"undefined\" && adapter !== null && (adapter.browserDetails.browser === 'chrome' || adapter.browserDetails.browser === 'firefox' || adapter.browserDetails.browser === 'safari' && adapter.browserDetails.version >= 64) && 'RTCRtpSender' in window && 'setParameters' in window.RTCRtpSender.prototype) {\n      videoSender = this.getSender(streamId, \"video\");\n    }\n    return videoSender;\n  }\n\n  /**\n   * Called by User\n   * to set maximum video bandwidth is in kbps\n   */\n  changeBandwidth(bandwidth, streamId) {\n    var errorDefinition = \"\";\n    var videoSender = this.getVideoSender(streamId);\n    if (videoSender != null) {\n      var parameters = videoSender.getParameters();\n      if (!parameters.encodings) {\n        parameters.encodings = [{}];\n      }\n      if (bandwidth === 'unlimited') {\n        delete parameters.encodings[0].maxBitrate;\n      } else {\n        parameters.encodings[0].maxBitrate = bandwidth * 1000;\n      }\n      return videoSender.setParameters(parameters);\n    } else {\n      errorDefinition = \"Video sender not found to change bandwidth. Streaming may not be active\";\n    }\n    return Promise.reject(errorDefinition);\n  }\n  /**\n   * Called by user\n   * sets the volume level\n   *\n   * @param {*} volumeLevel : Any number between 0 and 1.\n   */\n  setVolumeLevel(volumeLevel) {\n    this.currentVolume = volumeLevel;\n    if (this.primaryAudioTrackGainNode != null) {\n      this.primaryAudioTrackGainNode.gain.value = volumeLevel;\n    }\n    if (this.secondaryAudioTrackGainNode != null) {\n      this.secondaryAudioTrackGainNode.gain.value = volumeLevel;\n    }\n  }\n\n  /**\n   * Called by user\n   * To create a sound meter for the local stream\n   *\n   * @param {Function} levelCallback : callback to provide the audio level to user\n   * @param {*} period : measurement period\n   */\n  enableAudioLevelForLocalStream(levelCallback) {\n    this.levelCallback = levelCallback;\n    this.disableAudioLevelForLocalStream();\n    this.localStreamSoundMeter = new SoundMeter(this.audioContext, this.volumeMeterUrl);\n    if (this.audioContext.state !== 'running') {\n      return this.audioContext.resume().then(() => {\n        return this.localStreamSoundMeter.connectToSource(this.localStream, levelCallback);\n      });\n    } else {\n      return this.localStreamSoundMeter.connectToSource(this.localStream, levelCallback);\n    }\n  }\n  disableAudioLevelForLocalStream() {\n    if (this.localStreamSoundMeter != null) {\n      this.localStreamSoundMeter.stop();\n      this.localStreamSoundMeter = null;\n    }\n  }\n\n  /**\n   * Called by user\n   * To change audio/video constraints on the fly\n   *\n   */\n  applyConstraints(newConstraints) {\n    var constraints = {};\n    if (newConstraints.audio === undefined && newConstraints.video === undefined) {\n      //if audio or video field is not defined, assume that it's a video constraint\n      constraints.video = newConstraints;\n      this.mediaConstraints.video = Object.assign({}, this.mediaConstraints.video, constraints.video);\n    } else if (newConstraints.video !== undefined) {\n      constraints.video = newConstraints.video;\n      this.mediaConstraints.video = Object.assign({}, this.mediaConstraints.video, constraints.video);\n    }\n    if (newConstraints.audio !== undefined) {\n      constraints.audio = newConstraints.audio;\n      this.mediaConstraints.audio = Object.assign({}, this.mediaConstraints.audio, constraints.audio);\n    }\n    var promise = null;\n    if (constraints.video !== undefined) {\n      if (this.localStream && this.localStream.getVideoTracks().length > 0) {\n        var videoTrack = this.localStream.getVideoTracks()[0];\n        promise = videoTrack.applyConstraints(this.mediaConstraints.video);\n      } else {\n        promise = new Promise((resolve, reject) => {\n          reject(\"There is no video track to apply constraints\");\n        });\n      }\n    }\n    if (constraints.audio !== undefined) {\n      //just give the audio constraints not to get video stream\n      //we dont call applyContrains for audio because it does not work. I think this is due to gainStream things. This is why we call getUserMedia again\n\n      //use the publishStreamId because we don't have streamId in the parameter anymore\n      promise = this.setAudioInputSource(this.publishStreamId, {\n        audio: this.mediaConstraints.audio\n      }, null);\n    }\n    if (this.localStreamSoundMeter != null) {\n      this.enableAudioLevelForLocalStream(this.levelCallback);\n    }\n    return promise;\n  }\n}\n\nexport { MediaManager };\n","import './loglevel.min.js';\nimport { MediaManager } from './media_manager.js';\nimport { SoundMeter } from './soundmeter.js';\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\nfunction _classPrivateFieldGet(receiver, privateMap) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"get\");\n  return _classApplyDescriptorGet(receiver, descriptor);\n}\nfunction _classPrivateFieldSet(receiver, privateMap, value) {\n  var descriptor = _classExtractFieldDescriptor(receiver, privateMap, \"set\");\n  _classApplyDescriptorSet(receiver, descriptor, value);\n  return value;\n}\nfunction _classExtractFieldDescriptor(receiver, privateMap, action) {\n  if (!privateMap.has(receiver)) {\n    throw new TypeError(\"attempted to \" + action + \" private field on non-instance\");\n  }\n  return privateMap.get(receiver);\n}\nfunction _classApplyDescriptorGet(receiver, descriptor) {\n  if (descriptor.get) {\n    return descriptor.get.call(receiver);\n  }\n  return descriptor.value;\n}\nfunction _classApplyDescriptorSet(receiver, descriptor, value) {\n  if (descriptor.set) {\n    descriptor.set.call(receiver, value);\n  } else {\n    if (!descriptor.writable) {\n      throw new TypeError(\"attempted to set read only private field\");\n    }\n    descriptor.value = value;\n  }\n}\nfunction _classPrivateMethodGet(receiver, privateSet, fn) {\n  if (!privateSet.has(receiver)) {\n    throw new TypeError(\"attempted to get private field on non-instance\");\n  }\n  return fn;\n}\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n  if (privateCollection.has(obj)) {\n    throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n  }\n}\nfunction _classPrivateFieldInitSpec(obj, privateMap, value) {\n  _checkPrivateRedeclaration(obj, privateMap);\n  privateMap.set(obj, value);\n}\nfunction _classPrivateMethodInitSpec(obj, privateSet) {\n  _checkPrivateRedeclaration(obj, privateSet);\n  privateSet.add(obj);\n}\n\nclass PeerStats {\n  /**\n   * Creates an instance of the class.\n   * @param {string} streamId - The stream ID.\n   * @constructor\n   */\n  constructor(streamId) {\n    /**\n     * The stream ID.\n     * @type {string}\n     */\n    this.streamId = streamId;\n\n    /**\n     * The total number of bytes received.\n     * @type {number}\n     */\n    this.totalBytesReceivedCount = 0;\n\n    /**\n     * The total number of bytes sent.\n     * @type {number}\n     */\n    this.totalBytesSent = 0;\n\n    /**\n     * The number of video packets lost.\n     * @type {number}\n     */\n    this.videoPacketsLost = 0;\n\n    /**\n     * The fraction of lost video packets.\n     * @type {number}\n     */\n    this.fractionLost = 0;\n\n    /**\n     * The start time.\n     * @type {number}\n     */\n    this.startTime = 0;\n\n    /**\n     * The last number of frames encoded.\n     * @type {number}\n     */\n    this.lastFramesEncoded = 0;\n\n    /**\n     * The total number of frames encoded.\n     * @type {number}\n     */\n    this.totalFramesEncodedCount = 0;\n\n    /**\n     * The last number of bytes received.\n     * @type {number}\n     */\n    this.lastBytesReceived = 0;\n\n    /**\n     * The last number of bytes sent.\n     * @type {number}\n     */\n    this.lastBytesSent = 0;\n\n    /**\n    * @deprecated use videoPacketsSent\n     * The total number of video packets sent.\n     * @type {number}\n     */\n    this.totalVideoPacketsSent = 0;\n    /**\n        * The total number of video packets sent.\n        * @type {number}\n           */\n    this.videoPacketsSent = 0;\n    /**\n        * The total number of video packets received.\n        * @type {number}\n           */\n    this.videoPacketsReceived = 0;\n\n    /**\n     * @deprecated use audioPacketsSent\n    *  The total number of audio packets sent.\n     * @type {number}\n     */\n    this.totalAudioPacketsSent = 0;\n\n    /**\n     * \n     * The total number of audio packets sent.\n        * @type {number}\n     */\n    this.audioPacketsSent = 0;\n    /* \n     * The total number of audio packets received.\n        * @type {number}\n     * \t\t\t \n     * */\n    this.audioPacketsReceived = 0;\n\n    /**\n           * The current timestamp.\n           * @type {number}\n           */\n    this.currentTimestamp = 0;\n\n    /**\n     * The last recorded timestamp.\n     * @type {number}\n     */\n    this.lastTime = 0;\n\n    /**\n     * The timer ID.\n     * @type {number}\n     */\n    this.timerId = 0;\n\n    /**\n     * The first byte sent count.\n     * @type {number}\n     */\n    this.firstByteSentCount = 0;\n\n    /**\n     * The first bytes received count.\n     * @type {number}\n     */\n    this.firstBytesReceivedCount = 0;\n\n    /**\n     * The audio level.\n     * @type {number}\n     */\n    this.audioLevel = -1;\n\n    /**\n     * The quality limitation reason.\n     * @type {string}\n     */\n    this.qualityLimitationReason = \"\";\n\n    /**\n     * The source resolution width.\n     * @type {number}\n     */\n    this.resWidth = 0;\n\n    /**\n     * The source resolution height.\n     * @type {number}\n     */\n    this.resHeight = 0;\n\n    /**\n     * The source frames per second.\n     * @type {number}\n     */\n    this.srcFps = 0;\n\n    /**\n     * The frame width of the sent video.\n     * @type {number}\n     */\n    this.frameWidth = 0;\n\n    /**\n     * The frame height of the sent video.\n     * @type {number}\n     */\n    this.frameHeight = 0;\n\n    /**\n     * The video round-trip time.\n     * @type {number}\n     */\n    this.videoRoundTripTime = 0;\n\n    /**\n     * The video jitter.\n     * @type {number}\n     */\n    this.videoJitter = 0;\n\n    /**\n     * The audio round-trip time.\n     * @type {number}\n     */\n    this.audioRoundTripTime = 0;\n\n    /**\n     * The audio jitter.\n     * @type {number}\n     */\n    this.audioJitter = 0;\n\n    /**\n     * The number of audio packets lost.\n     * @type {number}\n     */\n    this.audioPacketsLost = 0;\n\n    /**\n     * The number of frames received.\n     * @type {number}\n     */\n    this.framesReceived = 0;\n\n    /**\n     * The number of frames dropped.\n     * @type {number}\n     */\n    this.framesDropped = 0;\n\n    /**\n     * The number of frames decoded.\n     * @type {number}\n     */\n    this.framesDecoded = 0;\n\n    /**\n     * The average audio jitter delay.\n     * @type {number}\n     */\n    this.audioJitterAverageDelay = 0;\n\n    /**\n     * The average video jitter delay.\n     * @type {number}\n     */\n    this.videoJitterAverageDelay = 0;\n    this.availableOutgoingBitrate = Infinity;\n\n    /**\n     * The list of inbound RTP list.\n     * It can be used to view the inbound RTP statistics per track in the multi-track conference or the multi-track playback scenarios.\n     * @type {*[]}\n     */\n    this.inboundRtpList = [];\n\n    /**\n     * The current round trip time for the candidate pair\n     */\n    this.currentRoundTripTime = 0;\n  }\n  //kbits/sec\n  get averageOutgoingBitrate() {\n    return Math.floor(8 * (this.totalBytesSentCount - this.firstByteSentCount) / (this.currentTimestamp - this.startTime));\n  }\n\n  //frames per second\n  get currentFPS() {\n    return ((this.totalFramesEncodedCount - this.lastFramesEncoded) / (this.currentTimestamp - this.lastTime) * 1000).toFixed(1);\n  }\n\n  //kbits/sec\n  get averageIncomingBitrate() {\n    return Math.floor(8 * (this.totalBytesReceivedCount - this.firstBytesReceivedCount) / (this.currentTimestamp - this.startTime));\n  }\n\n  //kbits/sec\n  get currentOutgoingBitrate() {\n    return Math.floor(8 * (this.totalBytesSentCount - this.lastBytesSent) / (this.currentTimestamp - this.lastTime));\n  }\n\n  //kbits/sec\n  get currentIncomingBitrate() {\n    return Math.floor(8 * (this.totalBytesReceivedCount - this.lastBytesReceived) / (this.currentTimestamp - this.lastTime));\n  }\n  /**\n   * @param {number} timestamp\n   * @returns {void}\n   */\n  set currentTime(timestamp) {\n    this.lastTime = this.currentTimestamp;\n    this.currentTimestamp = timestamp;\n    if (this.startTime == 0) {\n      this.startTime = timestamp - 1; // do not have zero division error\n    }\n  }\n  /**\n   * @param {number} bytesReceived\n   * @returns {void}\n   */\n  set totalBytesReceived(bytesReceived) {\n    this.lastBytesReceived = this.totalBytesReceivedCount;\n    this.totalBytesReceivedCount = bytesReceived;\n    if (this.firstBytesReceivedCount == 0) {\n      this.firstBytesReceivedCount = bytesReceived;\n    }\n  }\n  /**\n   * @param {number} bytesSent\n   * @returns {void}\n   */\n  set totalBytesSent(bytesSent) {\n    this.lastBytesSent = this.totalBytesSentCount;\n    this.totalBytesSentCount = bytesSent;\n    if (this.firstByteSentCount == 0) {\n      this.firstByteSentCount = bytesSent;\n    }\n  }\n  /**\n   * @param {number} framesEncoded\n   * @returns {void}\n   */\n  set totalFramesEncoded(framesEncoded) {\n    this.lastFramesEncoded = this.totalFramesEncodedCount;\n    this.totalFramesEncodedCount = framesEncoded;\n    if (this.lastFramesEncoded == 0) {\n      this.lastFramesEncoded = framesEncoded;\n    }\n  }\n}\n\nvar Logger$1 = window.log;\nclass WebSocketAdaptor {\n  /**\n   * \n   * @param {object} initialValues \n   */\n  constructor(initialValues) {\n    /**\n     * @type {boolean}\n     */\n    this.debug = false;\n    for (var key in initialValues) {\n      if (initialValues.hasOwnProperty(key)) {\n        this[key] = initialValues[key];\n      }\n    }\n    this.initWebSocketConnection();\n    addEventListener(\"offline\", event => {\n      this.connected = false;\n      this.connecting = false;\n      Logger$1.info(\"Network status has changed to offline. Resetting flags to reconnect faster\");\n    });\n  }\n  /**\n   * Initializes the WebSocket connection.\n   * @param {Function} callbackConnected - Optional callback function to be called when the connection is established.\n   * @returns {void}\n   */\n  initWebSocketConnection(callbackConnected) {\n    this.connecting = true;\n    this.connected = false;\n    this.pingTimerId = -1;\n\n    /*\n    * It's not mandatory if you don't use the new Load Balancer mechanism\n    * It uses one of the nodes on Cluster mode\n    * Example parameters: \"origin\" or \"edge\"\n    */\n    var url = new URL(this.websocket_url);\n    if (!['origin', 'edge'].includes(url.searchParams.get('target'))) {\n      url.searchParams.set('target', this.webrtcadaptor.isPlayMode ? 'edge' : 'origin');\n      this.websocket_url = url.toString();\n    }\n    this.wsConn = new WebSocket(this.websocket_url);\n    this.wsConn.onopen = () => {\n      Logger$1.debug(\"websocket connected\");\n      this.pingTimerId = setInterval(() => {\n        this.sendPing();\n      }, 3000);\n      this.connected = true;\n      this.connecting = false;\n      this.callback(\"initialized\");\n      if (typeof callbackConnected != \"undefined\") {\n        callbackConnected();\n      }\n    };\n    this.wsConn.onmessage = event => {\n      var obj = JSON.parse(event.data);\n      if (obj.command == \"start\") {\n        //this command is received first, when publishing so playmode is false\n\n        if (this.debug) {\n          Logger$1.debug(\"received start command\");\n        }\n        this.webrtcadaptor.startPublishing(obj.streamId);\n      } else if (obj.command == \"takeCandidate\") {\n        if (this.debug) {\n          Logger$1.debug(\"received ice candidate for stream id \" + obj.streamId);\n          Logger$1.debug(obj.candidate);\n        }\n        this.webrtcadaptor.takeCandidate(obj.streamId, obj.label, obj.candidate);\n      } else if (obj.command == \"takeConfiguration\") {\n        if (this.debug) {\n          Logger$1.debug(\"received remote description type for stream id: \" + obj.streamId + \" type: \" + obj.type);\n        }\n        this.webrtcadaptor.takeConfiguration(obj.streamId, obj.sdp, obj.type, obj.idMapping);\n      } else if (obj.command == \"stop\") {\n        if (this.debug) {\n          Logger$1.debug(\"Stop command received\");\n        }\n        //server sends stop command when the peers are connected to each other in peer-to-peer.\n        //It is not being sent in publish,play modes\n        this.webrtcadaptor.closePeerConnection(obj.streamId);\n      } else if (obj.command == \"error\") {\n        this.callbackError(obj.definition, obj);\n      } else if (obj.command == \"notification\") {\n        this.callback(obj.definition, obj);\n      } else if (obj.command == \"streamInformation\") {\n        this.callback(obj.command, obj);\n      } else if (obj.command == \"roomInformation\") {\n        this.callback(obj.command, obj);\n      } else if (obj.command == \"pong\") {\n        this.callback(obj.command);\n      } else if (obj.command == \"trackList\") {\n        this.callback(obj.command, obj);\n      } else if (obj.command == \"connectWithNewId\") {\n        this.multiPeerStreamId = obj.streamId;\n        this.join(obj.streamId);\n      } else if (obj.command == \"peerMessageCommand\") {\n        this.callback(obj.command, obj);\n      }\n    };\n    this.wsConn.onerror = error => {\n      this.connecting = false;\n      this.connected = false;\n      Logger$1.info(\" error occured: \" + JSON.stringify(error));\n      this.clearPingTimer();\n      this.callbackError(\"WebSocketNotConnected\", error);\n    };\n    this.wsConn.onclose = event => {\n      this.connecting = false;\n      this.connected = false;\n      if (this.debug) {\n        Logger$1.debug(\"connection closed.\");\n      }\n      this.clearPingTimer();\n      this.callback(\"closed\", event);\n    };\n  }\n  clearPingTimer() {\n    if (this.pingTimerId != -1) {\n      if (this.debug) {\n        Logger$1.debug(\"Clearing ping message timer\");\n      }\n      clearInterval(this.pingTimerId);\n      this.pingTimerId = -1;\n    }\n  }\n  sendPing() {\n    var jsCmd = {\n      command: \"ping\"\n    };\n    this.wsConn.send(JSON.stringify(jsCmd));\n  }\n  close() {\n    this.wsConn.close();\n  }\n  /**\n   * \n   * @param {*} text \n   * @returns \n   */\n  send(text) {\n    if (this.connecting == false && this.connected == false) {\n      //try to reconnect\n      this.initWebSocketConnection(() => {\n        this.send(text);\n      });\n      return;\n    }\n    try {\n      this.wsConn.send(text);\n      if (this.debug) {\n        Logger$1.debug(\"sent message:\" + text);\n      }\n    } catch (error) {\n      Logger$1.warn(\"Make sure you call methods after you receive initialized callback. Cannot send message:\" + text + \" Error is \" + error);\n    }\n  }\n  isConnected() {\n    return this.connected;\n  }\n  isConnecting() {\n    return this.connecting;\n  }\n}\n\nvar Logger = window.log;\n\n/**\n * This structure is used to handle large size data channel messages (like image)\n * which should be splitted into chunks while sending and receiving.\n *\n */\nclass ReceivingMessage {\n  /**\n   *\n   * @param {number} size\n   */\n  constructor(size) {\n    this.size = size;\n    this.received = 0;\n    this.data = new ArrayBuffer(size);\n  }\n}\n\n/**\n * WebRTCAdaptor Class is interface to the JS SDK of Ant Media Server (AMS). This class manages the signalling,\n * keeps the states of peers.\n *\n * This class is used for peer-to-peer signalling,\n * publisher and player signalling and conference.\n *\n * Also it is responsible for some room management in conference case.\n *\n * There are different use cases in AMS. This class is used for all of them.\n *\n * WebRTC Publish\n * WebRTC Play\n * WebRTC Data Channel Connection\n * WebRTC Conference\n * WebRTC Multitrack Play\n * WebRTC Multitrack Conference\n * WebRTC peer-to-peer session\n *\n */\nclass WebRTCAdaptor {\n  /**\n   * Register plugins to the WebRTCAdaptor\n   * @param {Function} plugin\n   */\n  static register(pluginInitMethod) {\n    WebRTCAdaptor.pluginInitMethods.push(pluginInitMethod);\n  }\n  /**\n   *\n   * @param {object} initialValues\n   */\n  constructor(initialValues) {\n    /**\n     * PeerConnection configuration while initializing the PeerConnection.\n     * https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/RTCPeerConnection#parameters\n     *\n     * More than one STURN and/or TURN servers can be added.  Here is a typical turn server configuration\n     *\n     *    {\n     * \t  urls: \"\",\n     *\t  username: \"\",\n     *    credential: \"\",\n     *\t}\n     *\n     *  Default value is the google stun server\n     */\n    this.peerconnection_config = {\n      'iceServers': [{\n        'urls': 'stun:stun1.l.google.com:19302'\n      }],\n      sdpSemantics: 'unified-plan'\n    };\n\n    /**\n     * Used while creating SDP (answer or offer)\n     * https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer#parameters\n     */\n    this.sdp_constraints = {\n      OfferToReceiveAudio: false,\n      OfferToReceiveVideo: false\n    };\n\n    /**\n     * This keeps the PeerConnections for each stream id.\n     * It is an array because one @WebRTCAdaptor instance can manage multiple WebRTC connections as in the conference.\n     * Its indices are the Stream Ids of each stream\n     */\n    this.remotePeerConnection = new Array();\n\n    /**\n     * This keeps statistics for the each PeerConnection.\n     * It is an array because one @WebRTCAdaptor instance can manage multiple WebRTC connections as in the conference.\n     * Its indices are the Stream Ids of each stream\n     */\n    this.remotePeerConnectionStats = new Array();\n\n    /**\n     * This keeps the Remote Description (SDP) set status for each PeerConnection.\n     * We need to keep this status because sometimes ice candidates from the remote peer\n     * may come before the Remote Description (SDP). So we need to store those ice candidates\n     * in @iceCandidateList field until we get and set the Remote Description.\n     * Otherwise setting ice candidates before Remote description may cause problem.\n     */\n    this.remoteDescriptionSet = new Array();\n\n    /**\n     * This keeps the Ice Candidates which are received before the Remote Description (SDP) received.\n     * For details please check @remoteDescriptionSet field.\n     */\n    this.iceCandidateList = new Array();\n\n    /**\n     * This is the name for the room that is desired to join in conference mode.\n     */\n    this.roomName = null;\n\n    /**\n     * This keeps StreamIds for the each playing session.\n     * It is an array because one @WebRTCAdaptor instance can manage multiple playing sessions.\n     */\n    this.playStreamId = new Array();\n\n    /**\n     * This is the flag indicates if multiple peers will join a peer in the peer to peer mode.\n     * This is used only with Embedded SDk\n     */\n    this.isMultiPeer = false;\n\n    /**\n     * This is the stream id that multiple peers can join a peer in the peer to peer mode.\n     * This is used only with Embedded SDk\n     */\n    this.multiPeerStreamId = null;\n\n    /**\n     * This is instance of @WebSocketAdaptor and manages to websocket connection.\n     * All signalling messages are sent to/recived from\n     * the Ant Media Server over this web socket connection\n     */\n    this.webSocketAdaptor = null;\n\n    /**\n     * This flags indicates if this @WebRTCAdaptor instance is used only for playing session(s)\n     * You don't need camera/mic access in play mode\n     */\n    this.isPlayMode = false;\n\n    /**\n     * This flags enables/disables debug logging\n     */\n    this.debug = false;\n\n    /**\n     * This is the Stream Id for the publisher. One @WebRCTCAdaptor supports only one publishing\n     * session for now (23.02.2022).\n     * In conference mode you can join a room with null stream id. In that case\n     * Ant Media Server generates a stream id and provides it JoinedTheRoom callback and it is set to this field.\n     */\n    this.publishStreamId = null;\n\n    /**\n     * This is used to keep stream id and track id (which is provided in SDP) mapping\n     * in MultiTrack Playback and conference.\n     */\n    this.idMapping = new Array();\n\n    /**\n     * This is used when only data is brodcasted with the same way video and/or audio.\n     * The difference is that no video or audio is sent when this field is true\n     */\n    this.onlyDataChannel = false;\n\n    /**\n     * While publishing and playing streams data channel is enabled by default\n     */\n    this.dataChannelEnabled = true;\n\n    /**\n     * This is array of @ReceivingMessage\n     * When you receive multiple large size messages @ReceivingMessage simultaneously\n     * this map is used to indicate them with its index tokens.\n     */\n    this.receivingMessages = new Map();\n\n    /**\n     * Supported candidate types. Below types are for both sending and receiving candidates.\n     * It means if when client receives candidate from STUN server, it sends to the server if candidate's protocol\n     * is in the list. Likely, when client receives remote candidate from server, it adds as ice candidate\n     * if candidate protocol is in the list below.\n     */\n    this.candidateTypes = [\"udp\", \"tcp\"];\n\n    /**\n     * Method to call when there is an event happened\n     */\n    this.callback = null;\n\n    /**\n     * Method to call when there is an error happened\n     */\n    this.callbackError = null;\n\n    /**\n     * Flag to indicate if the stream is published or not after the connection fails\n     */\n    this.reconnectIfRequiredFlag = true;\n\n    /**\n     * websocket url to connect\n     * @deprecated use websocketURL\n     */\n    this.websocket_url = null;\n\n    /**\n     * Websocket URL\n     */\n    this.websocketURL = null;\n\n    /**\n     * flag to initialize components in constructor\n     */\n    this.initializeComponents = true;\n\n    /**\n     * Degradation Preference\n     * \n     * maintain-framerate, maintain-resolution, or balanced\n     */\n    this.degradationPreference = \"maintain-resolution\";\n\n    /**\n     * PAY ATTENTION: The values of the above fields are provided as this constructor parameter.\n     * TODO: Also some other hidden parameters may be passed here\n     */\n    for (var key in initialValues) {\n      if (initialValues.hasOwnProperty(key)) {\n        this[key] = initialValues[key];\n      }\n    }\n    if (this.websocketURL == null) {\n      this.websocketURL = this.websocket_url;\n    }\n    if (this.websocketURL == null) {\n      throw new Error(\"WebSocket URL is not defined. It's mandatory\");\n    }\n    /**\n     * The html video tag for receiver is got here\n     */\n    this.remoteVideo = this.remoteVideoElement || document.getElementById(this.remoteVideoId);\n\n    /**\n     * Keeps the sound meters for each connection. Its index is stream id\n     */\n    this.soundMeters = new Array();\n\n    /**\n     * Keeps the current audio level for each playing streams in conference mode\n     */\n    this.soundLevelList = new Array();\n\n    /**\n     * This is the event listeners that WebRTC Adaptor calls when there is a new event happened\n     */\n    this.eventListeners = new Array();\n\n    /**\n     * This is the error event listeners that WebRTC Adaptor calls when there is an error happened\n     */\n    this.errorEventListeners = new Array();\n\n    /**\n     * This is token that is being used to publish the stream. It's added here to use in reconnect scenario\n     */\n    this.publishToken = null;\n\n    /**\n     * subscriber id that is being used to publish the stream. It's added here to use in reconnect scenario\n     */\n    this.publishSubscriberId = null;\n\n    /**\n     * subscriber code that is being used to publish the stream. It's added here to use in reconnect scenario\n     */\n    this.publishSubscriberCode = null;\n\n    /**\n     * This is the stream name that is being published. It's added here to use in reconnect scenario\n     */\n    this.publishStreamName = null;\n\n    /**\n     * This is the stream id of the main track that the current publishStreamId is going to be subtrack of it. It's added here to use in reconnect scenario\n     */\n    this.publishMainTrack = null;\n\n    /**\n     * This is the metadata that is being used to publish the stream. It's added here to use in reconnect scenario\n     */\n    this.publishMetaData = null;\n\n    /**\n     * This is the role for selective subtrack playback. It's added here to use in reconnect scenario\n     */\n    this.publishRole = null;\n\n    /**\n     * This is the token to play the stream. It's added here to use in reconnect scenario\n     */\n    this.playToken = null;\n\n    /**\n     * This is the room id to play the stream. It's added here to use in reconnect scenario\n     * This approach is old conferencing. It's better to use multi track conferencing\n     */\n    this.playRoomId = null;\n\n    /**\n     * These are enabled tracks to play the stream. It's added here to use in reconnect scenario\n     */\n    this.playEnableTracks = null;\n\n    /**\n     * This is the subscriber Id to play the stream. It's added here to use in reconnect scenario\n     */\n    this.playSubscriberId = null;\n\n    /**\n     * This is the subscriber code to play the stream. It's added here to use in reconnect scenario\n     */\n    this.playSubscriberCode = null;\n\n    /**\n     * This is the meta data to play the stream. It's added here to use in reconnect scenario\n     */\n    this.playMetaData = null;\n\n    /**\n     * This is the role for selective subtrack playback. It's added here to use in reconnect scenario\n     */\n    this.playRole = null;\n\n    /**\n     * This is the time info for the last reconnection attempt\n     */\n    this.lastReconnectiontionTrialTime = 0;\n\n    /**\n     * TimerId for the pending try again call\n     */\n    this.pendingTryAgainTimerId = -1;\n\n    /**\n     * All media management works for teh local stream are made by @MediaManager class.\n     * for details please check @MediaManager\n     */\n    this.mediaManager = new MediaManager({\n      userParameters: initialValues,\n      webRTCAdaptor: this,\n      callback: (info, obj) => {\n        this.notifyEventListeners(info, obj);\n      },\n      callbackError: (error, message) => {\n        this.notifyErrorEventListeners(error, message);\n      },\n      getSender: (streamId, type) => {\n        return this.getSender(streamId, type);\n      }\n    });\n\n    //Initialize the local stream (if needed) and web socket connection\n    if (this.initializeComponents) {\n      this.initialize();\n    }\n  }\n\n  /**\n   * Init plugins\n   */\n  initPlugins() {\n    WebRTCAdaptor.pluginInitMethods.forEach(initMethod => {\n      initMethod(this);\n    });\n  }\n\n  /**\n   * Add event listener to be notified. This is generally for plugins\n   * @param {*} listener\n   */\n  addEventListener(listener) {\n    this.eventListeners.push(listener);\n  }\n\n  /**\n   * Add error event listener to be notified. Thisis generally for plugins\n   * @param {*} errorListener\n   */\n  addErrorEventListener(errorListener) {\n    this.errorEventListeners.push(errorListener);\n  }\n\n  /**\n   * Notify event listeners and callback method\n   * @param {*} info\n   * @param {*} obj\n   */\n  notifyEventListeners(info, obj) {\n    this.eventListeners.forEach(listener => {\n      listener(info, obj);\n    });\n    if (this.callback != null) {\n      this.callback(info, obj);\n    }\n  }\n\n  /**\n   * Notify error event listeners and callbackError method\n   * @param {*} error\n   * @param {*} message\n   */\n  notifyErrorEventListeners(error, message) {\n    this.errorEventListeners.forEach(listener => {\n      listener(error, message);\n    });\n    if (this.callbackError != null) {\n      this.callbackError(error, message);\n    }\n  }\n\n  /**\n   * Called by constuctor to\n   *    -check local stream unless it is in play mode\n   *    -start websocket connection\n   */\n  initialize() {\n    if (!this.isPlayMode && !this.onlyDataChannel && this.mediaManager.localStream == null) {\n      //we need local stream because it not a play mode\n      return this.mediaManager.initLocalStream().then(() => {\n        this.initPlugins();\n        this.checkWebSocketConnection();\n        return new Promise((resolve, reject) => {\n          resolve(\"Wait 'initialized' callback from websocket\");\n        });\n      }).catch(error => {\n        Logger.warn(error);\n        throw error;\n      });\n    }\n    return new Promise((resolve, reject) => {\n      this.initPlugins();\n      this.checkWebSocketConnection();\n      resolve(\"Wait 'initialized' callback from websocket\");\n    });\n  }\n\n  /**\n   * Called to start a new WebRTC stream. AMS responds with start message.\n   * Parameters:\n   *  @param {string} streamId : unique id for the stream\n   *  @param {string=} [token] : required if any stream security (token control) enabled. Check https://github.com/ant-media/Ant-Media-Server/wiki/Stream-Security-Documentation\n   *  @param {string=} [subscriberId] : required if TOTP enabled. Check https://github.com/ant-media/Ant-Media-Server/wiki/Time-based-One-Time-Password-(TOTP)\n   *  @param {string=} [subscriberCode] : required if TOTP enabled. Check https://github.com/ant-media/Ant-Media-Server/wiki/Time-based-One-Time-Password-(TOTP)\n   *  @param {string=} [streamName] : required if you want to set a name for the stream\n   *  @param {string=} [mainTrack] :  required if you want to start the stream as a subtrack for a main stream which has id of this parameter.\n   *                Check:https://antmedia.io/antmediaserver-webrtc-multitrack-playing-feature/\n   *                !!! for multitrack conference set this value with roomName\n   *  @param {string=} [metaData] : a free text information for the stream to AMS. It is provided to Rest methods by the AMS\n   *  @param {string=} [role] : role for the stream. It is used for selective forwarding of subtracks in conference mode.\n   */\n  publish(streamId, token, subscriberId, subscriberCode, streamName, mainTrack, metaData, role) {\n    //TODO: should refactor the repeated code\n    this.publishStreamId = streamId;\n    this.mediaManager.publishStreamId = streamId;\n    this.publishToken = token;\n    this.publishSubscriberId = subscriberId;\n    this.publishSubscriberCode = subscriberCode;\n    this.publishStreamName = streamName;\n    this.publishMainTrack = mainTrack;\n    this.publishMetaData = metaData;\n    this.publishRole = role;\n    if (this.onlyDataChannel) {\n      this.sendPublishCommand(streamId, token, subscriberId, subscriberCode, streamName, mainTrack, metaData, role, false, false);\n    }\n    //If it started with playOnly mode and wants to publish now\n    else if (this.mediaManager.localStream == null) {\n      this.mediaManager.initLocalStream().then(() => {\n        var videoEnabled = false;\n        var audioEnabled = false;\n        if (this.mediaManager.localStream != null) {\n          videoEnabled = this.mediaManager.localStream.getVideoTracks().length > 0;\n          audioEnabled = this.mediaManager.localStream.getAudioTracks().length > 0;\n        }\n        this.sendPublishCommand(streamId, token, subscriberId, subscriberCode, streamName, mainTrack, metaData, role, videoEnabled, audioEnabled);\n      }).catch(error => {\n        Logger.warn(error);\n        throw error;\n      });\n    } else {\n      var videoEnabled = this.mediaManager.localStream.getVideoTracks().length > 0;\n      var audioEnabled = this.mediaManager.localStream.getAudioTracks().length > 0;\n      this.sendPublishCommand(streamId, token, subscriberId, subscriberCode, streamName, mainTrack, metaData, role, videoEnabled, audioEnabled);\n    }\n    //init peer connection for reconnectIfRequired\n    this.initPeerConnection(streamId, \"publish\");\n    this.reconnectIfRequired(3000, false);\n  }\n  sendPublishCommand(streamId, token, subscriberId, subscriberCode, streamName, mainTrack, metaData, role, videoEnabled, audioEnabled) {\n    var jsCmd = {\n      command: \"publish\",\n      streamId: streamId,\n      token: token,\n      subscriberId: typeof subscriberId !== undefined && subscriberId != null ? subscriberId : \"\",\n      subscriberCode: typeof subscriberCode !== undefined && subscriberCode != null ? subscriberCode : \"\",\n      streamName: typeof streamName !== undefined && streamName != null ? streamName : \"\",\n      mainTrack: typeof mainTrack !== undefined && mainTrack != null ? mainTrack : \"\",\n      video: videoEnabled,\n      audio: audioEnabled,\n      metaData: typeof metaData !== undefined && metaData != null ? metaData : \"\",\n      role: typeof role !== undefined && role != null ? role : \"\"\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to join a room. AMS responds with joinedTheRoom message.\n   * Parameters:\n   * @param {string} roomName : unique id of the room\n   * @param {string=} streamId : unique id of the stream belongs to this participant\n   * @param {string=} mode :    legacy for older implementation (default value)\n   *            mcu for merging streams\n   *            amcu: audio only conferences with mixed audio\n   * @param {string=} streamName : name of the stream\n   * @param {string=} role : role for the stream. It is used for selective forwarding of subtracks in conference mode.\n   * @param {string=} metadata : a free text information for the stream to AMS.\n   */\n  joinRoom(roomName, streamId, mode, streamName, role, metadata) {\n    this.roomName = roomName;\n    var jsCmd = {\n      command: \"joinRoom\",\n      room: roomName,\n      mainTrack: roomName,\n      streamId: streamId,\n      mode: mode,\n      streamName: streamName,\n      role: role,\n      metadata: metadata\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to start a playing session for a stream. AMS responds with start message.\n   * Parameters:\n   *  @param {string} streamId :(string) unique id for the stream that you want to play\n   *  @param {string=} token :(string) required if any stream security (token control) enabled. Check https://github.com/ant-media/Ant-Media-Server/wiki/Stream-Security-Documentation\n   *  @param {string=} roomId :(string) required if this stream is belonging to a room participant\n   *  @param {Array.<MediaStreamTrack>=} enableTracks :(array) required if the stream is a main stream of multitrack playing. You can pass the the subtrack id list that you want to play.\n   *                    you can also provide a track id that you don't want to play by adding ! before the id.\n   *  @param {string=} subscriberId :(string) required if TOTP enabled. Check https://github.com/ant-media/Ant-Media-Server/wiki/Time-based-One-Time-Password-(TOTP)\n   *  @param {string=} subscriberCode :(string) required if TOTP enabled. Check https://github.com/ant-media/Ant-Media-Server/wiki/Time-based-One-Time-Password-(TOTP)\n   *  @param {string=} metaData :(string, json) a free text information for the stream to AMS. It is provided to Rest methods by the AMS\n   *  @param {string=} [role] : role for the stream. It is used for selective forwarding of subtracks in conference mode.\n   */\n  play(streamId, token, roomId, enableTracks, subscriberId, subscriberCode, metaData, role) {\n    this.playStreamId.push(streamId);\n    this.playToken = token;\n    this.playRoomId = roomId;\n    this.playEnableTracks = enableTracks;\n    this.playSubscriberId = subscriberId;\n    this.playSubscriberCode = subscriberCode;\n    this.playMetaData = metaData;\n    this.playRole = role;\n    var jsCmd = {\n      command: \"play\",\n      streamId: streamId,\n      token: typeof token !== undefined && token != null ? token : \"\",\n      room: typeof roomId !== undefined && roomId != null ? roomId : \"\",\n      trackList: typeof enableTracks !== undefined && enableTracks != null ? enableTracks : [],\n      subscriberId: typeof subscriberId !== undefined && subscriberId != null ? subscriberId : \"\",\n      subscriberCode: typeof subscriberCode !== undefined && subscriberId != null ? subscriberCode : \"\",\n      viewerInfo: typeof metaData !== undefined && metaData != null ? metaData : \"\",\n      role: typeof role !== undefined && role != null ? role : \"\",\n      userPublishId: typeof this.publishStreamId !== undefined && this.publishStreamId != null ? this.publishStreamId : \"\"\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n\n    //init peer connection for reconnectIfRequired\n    this.initPeerConnection(streamId, \"play\");\n    this.reconnectIfRequired(3000, false);\n  }\n\n  /**\n   * Reconnects to the stream if it is not stopped on purpose\n   * @param {number} [delayMs]\n   * @returns\n   */\n  reconnectIfRequired() {\n    var delayMs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3000;\n    var forceReconnect = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (this.reconnectIfRequiredFlag) {\n      if (delayMs <= 0) {\n        delayMs = 500;\n        //clear the timer because there is a demand to reconnect without delay\n        clearTimeout(this.pendingTryAgainTimerId);\n        this.pendingTryAgainTimerId = -1;\n      }\n      if (this.pendingTryAgainTimerId == -1) {\n        this.pendingTryAgainTimerId = setTimeout(() => {\n          this.pendingTryAgainTimerId = -1;\n          this.tryAgain(forceReconnect);\n        }, delayMs);\n      }\n    }\n  }\n  tryAgain(forceReconnect) {\n    var _this = this;\n    var now = Date.now();\n    //to prevent too many trial from different paths\n    var timeDiff = now - this.lastReconnectiontionTrialTime;\n    if (timeDiff < 3000 && forceReconnect == false) {\n      //check again 1 seconds later if it is not stopped on purpose\n      Logger.debug(\"Reconnection request received after \" + timeDiff + \" ms. It should be at least 3000ms. It will try again after 1000ms\");\n      this.reconnectIfRequired(1000, forceReconnect);\n      return;\n    }\n    this.lastReconnectiontionTrialTime = now;\n\n    //reconnect publish\n    //if remotePeerConnection has a peer connection for the stream id, it means that it is not stopped on purpose\n\n    if (this.remotePeerConnection[this.publishStreamId] != null && (forceReconnect ||\n    //check connection status to not stop streaming an active stream\n    [\"checking\", \"connected\", \"completed\"].indexOf(this.iceConnectionState(this.publishStreamId)) === -1)) {\n      // notify that reconnection process started for publish\n      this.notifyEventListeners(\"reconnection_attempt_for_publisher\", this.publishStreamId);\n      this.stop(this.publishStreamId);\n      setTimeout(() => {\n        //publish about some time later because server may not drop the connection yet \n        //it may trigger already publishing error \n        Logger.log(\"Trying publish again for stream: \" + this.publishStreamId);\n        this.publish(this.publishStreamId, this.publishToken, this.publishSubscriberId, this.publishSubscriberCode, this.publishStreamName, this.publishMainTrack, this.publishMetaData, this.publishRole);\n      }, 500);\n    }\n\n    //reconnect play\n    var _loop = function _loop() {\n      var streamId = _this.playStreamId[index];\n      if (_this.remotePeerConnection[streamId] != null && (forceReconnect ||\n      //check connection status to not stop streaming an active stream\n      [\"checking\", \"connected\", \"completed\"].indexOf(_this.iceConnectionState(streamId)) === -1)) {\n        // notify that reconnection process started for play\n        _this.notifyEventListeners(\"reconnection_attempt_for_player\", streamId);\n        Logger.log(\"It will try to play again for stream: \" + streamId + \" because it is not stopped on purpose\");\n        _this.stop(streamId);\n        setTimeout(() => {\n          //play about some time later because server may not drop the connection yet \n          //it may trigger already playing error \n          Logger.log(\"Trying play again for stream: \" + streamId);\n          _this.play(streamId, _this.playToken, _this.playRoomId, _this.playEnableTracks, _this.playSubscriberId, _this.playSubscriberCode, _this.playMetaData, _this.playRole);\n        }, 500);\n      }\n    };\n    for (var index in this.playStreamId) {\n      _loop();\n    }\n  }\n\n  /**\n   * Called to stop a publishing/playing session for a stream. AMS responds with publishFinished or playFinished message.\n   * Parameters:\n   *  @param {string} streamId : unique id for the stream that you want to stop publishing or playing\n   */\n  stop(streamId) {\n    //stop is called on purpose and it deletes the peer connection from remotePeerConnections\n    this.closePeerConnection(streamId);\n    if (this.webSocketAdaptor != null && this.webSocketAdaptor.isConnected()) {\n      var jsCmd = {\n        command: \"stop\",\n        streamId: streamId\n      };\n      this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n    }\n  }\n\n  /**\n   * Called to join a peer-to-peer mode session as peer. AMS responds with joined message.\n   * Parameters:\n   * @param {string} streamId : unique id for the peer-to-peer session\n   */\n  join(streamId) {\n    var jsCmd = {\n      command: \"join\",\n      streamId: streamId,\n      multiPeer: this.isMultiPeer && this.multiPeerStreamId == null,\n      mode: this.isPlayMode ? \"play\" : \"both\"\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called by browser when a new track is added to WebRTC connetion. This is used to infor html pages with newStreamAvailable callback.\n   * Parameters:\n   * \t event: TODO\n   * \t streamId: unique id for the stream\n   */\n  onTrack(event, streamId) {\n    Logger.debug(\"onTrack for stream\");\n    if (this.remoteVideo != null) {\n      if (this.remoteVideo.srcObject !== event.streams[0]) {\n        this.remoteVideo.srcObject = event.streams[0];\n        Logger.debug('Received remote stream');\n      }\n    } else {\n      var dataObj = {\n        stream: event.streams[0],\n        track: event.track,\n        streamId: streamId,\n        trackId: this.idMapping[streamId][event.transceiver.mid]\n      };\n      this.notifyEventListeners(\"newTrackAvailable\", dataObj);\n\n      //deprecated. Listen newTrackAvailable in callback. It's kept for backward compatibility\n      this.notifyEventListeners(\"newStreamAvailable\", dataObj);\n    }\n  }\n\n  /**\n   * Called to leave from a conference room. AMS responds with leavedTheRoom message.\n   * Parameters:\n   * @param {string} roomName : unique id for the conference room\n   * @param {string=} streamId : unique id for the stream that is streamed by this @WebRTCAdaptor\n   */\n  leaveFromRoom(roomName, streamId) {\n    for (var key in this.remotePeerConnection) {\n      this.closePeerConnection(key);\n    }\n    this.roomName = roomName;\n    var jsCmd = {\n      command: \"leaveFromRoom\",\n      room: roomName,\n      mainTrack: roomName,\n      streamId: streamId\n    };\n    Logger.debug(\"leave request is sent for \" + roomName);\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to leave from a peer-to-peer mode session. AMS responds with leaved message.\n   * Parameters:\n   * @param {string} streamId : unique id for the peer-to-peer session\n   */\n  leave(streamId) {\n    var jsCmd = {\n      command: \"leave\",\n      streamId: this.isMultiPeer && this.multiPeerStreamId != null ? this.multiPeerStreamId : streamId\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n    this.closePeerConnection(streamId);\n    this.multiPeerStreamId = null;\n  }\n\n  /**\n   * Called to get a stream information for a specific stream. AMS responds with streamInformation message.\n   * Parameters:\n   * @param {string} streamId : unique id for the stream that you want to get info about\n   */\n  getStreamInfo(streamId) {\n    var jsCmd = {\n      command: \"getStreamInfo\",\n      streamId: streamId\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to get the list of video track assignments. AMS responds with the videoTrackAssignmentList message.\n   * Parameters:\n   * @param {string} streamId : unique id for the stream that you want to get info about\n   */\n  requestVideoTrackAssignments(streamId) {\n    var jsCmd = {\n      command: \"getVideoTrackAssignmentsCommand\",\n      streamId: streamId\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to get the broadcast object for a specific stream. AMS responds with the broadcastObject callback.\n   * Parameters:\n   * @param {string} streamId : unique id for the stream that you want to get info about\n   */\n  getBroadcastObject(streamId) {\n    var jsCmd = {\n      command: \"getBroadcastObject\",\n      streamId: streamId\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to update the meta information for a specific stream.\n   * Parameters:\n   * @param {string} streamId : unique id for the stream that you want to update MetaData\n   * @param {string}  metaData : new free text information for the stream\n   */\n  updateStreamMetaData(streamId, metaData) {\n    var jsCmd = {\n      command: \"updateStreamMetaData\",\n      streamId: streamId,\n      metaData: metaData\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to get the room information for a specific room. AMS responds with roomInformation message\n   * which includes the ids and names of the streams in that room.\n   * If there is no active streams in the room, AMS returns error `no_active_streams_in_room` in error callback\n   * Parameters:\n   * @param {string} roomName : unique id for the room that you want to get info about\n   * @param {string} streamId : unique id for the stream that is streamed by this @WebRTCAdaptor\n   */\n  getRoomInfo(roomName, streamId) {\n    var jsCmd = {\n      command: \"getRoomInfo\",\n      streamId: streamId,\n      room: roomName\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to get the subtracks for a specific maintrack. AMS responds with the subtrackList callback.\n   * Parameters:\n   * @param {string} streamId : main track id\n   * @param {string} role : filter the subtracks with the role\n   * @param {number} offset : offset for the subtrack list\n   * @param {number} size : size for the subtrack list\n   */\n  getSubtracks(streamId, role, offset, size) {\n    var jsCmd = {\n      command: \"getSubtracks\",\n      streamId: streamId,\n      role: role,\n      offset: offset,\n      size: size\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to get the subtrack count for a specific maintrack. AMS responds with the subtrackCount callback.\n   * @param {string} streamId : main track id\n   * @param {string} role : filter the subtracks with the role\n   * @param {string} status : filter the subtracks with the status\n   */\n  getSubtrackCount(streamId, role, status) {\n    var jsCmd = {\n      command: \"getSubtracksCount\",\n      streamId: streamId,\n      role: role,\n      status: status\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to enable/disable data flow from the AMS for a specific track under a main track.\n   * Parameters:\n   * @param {string}  mainTrackId : unique id for the main stream\n   * @param {string}  trackId : unique id for the track that you want to enable/disable data flow for\n   * @param {boolean} enabled : true or false\n   */\n  enableTrack(mainTrackId, trackId, enabled) {\n    var jsCmd = {\n      command: \"enableTrack\",\n      streamId: mainTrackId,\n      trackId: trackId,\n      enabled: enabled\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to get the track ids under a main stream. AMS responds with trackList message.\n   * Parameters:\n   * @param {string} streamId : unique id for the main stream\n   * @param {string=} [token] : not used\n   * TODO: check this function\n   */\n  getTracks(streamId, token) {\n    this.playStreamId.push(streamId);\n    var jsCmd = {\n      command: \"getTrackList\",\n      streamId: streamId,\n      token: token\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called by WebSocketAdaptor when a new ice candidate is received from AMS.\n   * Parameters:\n   *     event: TODO\n   *     streamId: unique id for the stream\n   */\n  iceCandidateReceived(event, streamId) {\n    if (event.candidate) {\n      var protocolSupported = false;\n      if (event.candidate.candidate == \"\") {\n        //event candidate can be received and its value can be \"\".\n        //don't compare the protocols\n        protocolSupported = true;\n      } else if (typeof event.candidate.protocol == \"undefined\") {\n        this.candidateTypes.forEach(element => {\n          if (event.candidate.candidate.toLowerCase().includes(element)) {\n            protocolSupported = true;\n          }\n        });\n      } else {\n        protocolSupported = this.candidateTypes.includes(event.candidate.protocol.toLowerCase());\n      }\n      if (protocolSupported) {\n        var jsCmd = {\n          command: \"takeCandidate\",\n          streamId: streamId,\n          label: event.candidate.sdpMLineIndex,\n          id: event.candidate.sdpMid,\n          candidate: event.candidate.candidate\n        };\n        if (this.debug) {\n          Logger.debug(\"sending ice candiate for stream Id \" + streamId);\n          Logger.debug(JSON.stringify(event.candidate));\n        }\n        this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n      } else {\n        Logger.debug(\"Candidate's protocol(full sdp: \" + event.candidate.candidate + \") is not supported. Supported protocols: \" + this.candidateTypes);\n        if (event.candidate.candidate != \"\") {\n          //\n          this.notifyErrorEventListeners(\"protocol_not_supported\", \"Support protocols: \" + this.candidateTypes.toString() + \" candidate: \" + event.candidate.candidate);\n        }\n      }\n    } else {\n      Logger.debug(\"No event.candidate in the iceCandidate event\");\n    }\n  }\n\n  /**\n   * Called internally to sanitize the text if it contains script to prevent xss\n   * @param text\n   * @returns {*}\n   */\n  sanitizeHTML(text) {\n    if (text.includes(\"script\")) return text.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n    return text;\n  }\n\n  /**\n   * Called internally to initiate Data Channel.\n   * Note that Data Channel should be enabled fromAMS settings.\n   *  @param {string}  streamId : unique id for the stream\n   *  @param {*} dataChannel : provided by PeerConnection\n   */\n  initDataChannel(streamId, dataChannel) {\n    dataChannel.onerror = error => {\n      Logger.debug(\"Data Channel Error:\", error);\n      var obj = {\n        streamId: streamId,\n        error: error\n      };\n      Logger.debug(\"channel status: \", dataChannel.readyState);\n      if (dataChannel.readyState != \"closed\") {\n        this.notifyErrorEventListeners(\"data_channel_error\", obj);\n      }\n    };\n    dataChannel.onmessage = event => {\n      var obj = {\n        streamId: streamId,\n        data: event.data\n      };\n      var data = obj.data;\n      if (typeof data === 'string' || data instanceof String) {\n        obj.data = this.sanitizeHTML(obj.data);\n        this.notifyEventListeners(\"data_received\", obj);\n      } else {\n        var length = data.length || data.size || data.byteLength;\n        var view = new Int32Array(data, 0, 1);\n        var token = view[0];\n        var msg = this.receivingMessages[token];\n        if (msg == undefined) {\n          var view = new Int32Array(data, 0, 2);\n          var size = view[1];\n          msg = new ReceivingMessage(size);\n          this.receivingMessages[token] = msg;\n          if (length > 8) {\n            Logger.debug(\"something went wrong in msg receiving\");\n          }\n          return;\n        }\n        var rawData = data.slice(4, length);\n        var dataView = new Uint8Array(msg.data);\n        dataView.set(new Uint8Array(rawData), msg.received, length - 4);\n        msg.received += length - 4;\n        if (msg.size == msg.received) {\n          obj.data = msg.data;\n          this.notifyEventListeners(\"data_received\", obj);\n        }\n      }\n    };\n    dataChannel.onopen = () => {\n      this.remotePeerConnection[streamId].dataChannel = dataChannel;\n      Logger.debug(\"Data channel is opened\");\n      this.notifyEventListeners(\"data_channel_opened\", streamId);\n    };\n    dataChannel.onclose = () => {\n      Logger.debug(\"Data channel is closed\");\n      this.notifyEventListeners(\"data_channel_closed\", streamId);\n    };\n  }\n\n  /**\n   * Called internally to initiate PeerConnection.\n   * @param {string} streamId : unique id for the stream\n   * @param {string}  dataChannelMode : can be \"publish\" , \"play\" or \"peer\" based on this it is decided which way data channel is created\n   */\n  initPeerConnection(streamId, dataChannelMode) {\n    //null == undefined -> it's true\n    //null === undefined -> it's false\n\n    if (this.remotePeerConnection[streamId] == null) {\n      var closedStreamId = streamId;\n      Logger.debug(\"stream id in init peer connection: \" + streamId + \" close stream id: \" + closedStreamId);\n      this.remotePeerConnection[streamId] = new RTCPeerConnection(this.peerconnection_config);\n      this.remoteDescriptionSet[streamId] = false;\n      this.iceCandidateList[streamId] = new Array();\n      if (!this.playStreamId.includes(streamId)) {\n        if (this.mediaManager.localStream != null) {\n          this.mediaManager.localStream.getTracks().forEach(track => {\n            var rtpSender = this.remotePeerConnection[streamId].addTrack(track, this.mediaManager.localStream);\n            if (track.kind == 'video') {\n              var parameters = rtpSender.getParameters();\n              parameters.degradationPreference = this.degradationPreference;\n              rtpSender.setParameters(parameters).then(() => {\n                Logger.info(\"Degradation Preference is set to \" + this.degradationPreference);\n              }).catch(err => {\n                Logger.warn(\"Degradation Preference cannot be set to \" + this.degradationPreference);\n              });\n            }\n            //\n            //parameters.degradationPreference\n          });\n        }\n      }\n\n      this.remotePeerConnection[streamId].onicecandidate = event => {\n        this.iceCandidateReceived(event, closedStreamId);\n      };\n      this.remotePeerConnection[streamId].ontrack = event => {\n        this.onTrack(event, closedStreamId);\n      };\n      this.remotePeerConnection[streamId].onnegotiationneeded = event => {\n        Logger.debug(\"onnegotiationneeded\");\n      };\n      if (this.dataChannelEnabled) {\n        // skip initializing data channel if it is disabled\n        if (dataChannelMode == \"publish\") {\n          //open data channel if it's publish mode peer connection\n          var dataChannelOptions = {\n            ordered: true\n          };\n          if (this.remotePeerConnection[streamId].createDataChannel) {\n            var dataChannel = this.remotePeerConnection[streamId].createDataChannel(streamId, dataChannelOptions);\n            this.initDataChannel(streamId, dataChannel);\n          } else {\n            Logger.warn(\"CreateDataChannel is not supported\");\n          }\n        } else if (dataChannelMode == \"play\") {\n          //in play mode, server opens the data channel\n          this.remotePeerConnection[streamId].ondatachannel = ev => {\n            this.initDataChannel(streamId, ev.channel);\n          };\n        } else {\n          //for peer mode do both for now\n          var _dataChannelOptions = {\n            ordered: true\n          };\n          if (this.remotePeerConnection[streamId].createDataChannel) {\n            var dataChannelPeer = this.remotePeerConnection[streamId].createDataChannel(streamId, _dataChannelOptions);\n            this.initDataChannel(streamId, dataChannelPeer);\n            this.remotePeerConnection[streamId].ondatachannel = ev => {\n              this.initDataChannel(streamId, ev.channel);\n            };\n          } else {\n            Logger.warn(\"CreateDataChannel is not supported\");\n          }\n        }\n      }\n      this.remotePeerConnection[streamId].oniceconnectionstatechange = event => {\n        var obj = {\n          state: this.remotePeerConnection[streamId].iceConnectionState,\n          streamId: streamId\n        };\n        this.oniceconnectionstatechangeCallback(obj);\n      };\n    }\n    return this.remotePeerConnection[streamId];\n  }\n  oniceconnectionstatechangeCallback(obj) {\n    Logger.debug(\"ice connection state is \" + obj.state + \" for streamId: \" + obj.streamId);\n    if (obj.state == \"failed\" || obj.state == \"disconnected\" || obj.state == \"closed\") {\n      //try immediately\n      Logger.debug(\"ice connection state is failed, disconnected or closed for streamId: \" + obj.streamId + \" it will try to reconnect immediately\");\n      this.reconnectIfRequired(0, false);\n    }\n    this.notifyEventListeners(\"ice_connection_state_changed\", obj);\n\n    //\n    if (!this.isPlayMode && !this.playStreamId.includes(obj.streamId)) {\n      if (this.remotePeerConnection[obj.streamId] != null && this.remotePeerConnection[obj.streamId].iceConnectionState == \"connected\") {\n        this.mediaManager.changeBandwidth(this.mediaManager.bandwidth, obj.streamId).then(() => {\n          Logger.debug(\"Bandwidth is changed to \" + this.mediaManager.bandwidth);\n        }).catch(e => Logger.warn(e));\n      }\n    }\n  }\n\n  /**\n   * Called internally to close PeerConnection.\n   * @param {string} streamId : unique id for the stream\n   */\n  closePeerConnection(streamId) {\n    var peerConnection = this.remotePeerConnection[streamId];\n    if (peerConnection != null) {\n      this.remotePeerConnection[streamId] = null;\n      delete this.remotePeerConnection[streamId];\n      if (peerConnection.dataChannel != null) {\n        peerConnection.dataChannel.close();\n      }\n      if (peerConnection.signalingState != \"closed\") {\n        peerConnection.close();\n      }\n      var playStreamIndex = this.playStreamId.indexOf(streamId);\n      if (playStreamIndex != -1) {\n        this.playStreamId.splice(playStreamIndex, 1);\n      }\n    }\n    //this is for the stats\n    if (this.remotePeerConnectionStats[streamId] != null) {\n      clearInterval(this.remotePeerConnectionStats[streamId].timerId);\n      delete this.remotePeerConnectionStats[streamId];\n    }\n    if (this.soundMeters[streamId] != null) {\n      delete this.soundMeters[streamId];\n    }\n  }\n\n  /**\n   * Called to get the signalling state for a stream.\n   * This information can be used for error handling.\n   * Check: https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/connectionState\n   * @param {string} streamId : unique id for the stream\n   */\n  signallingState(streamId) {\n    if (this.remotePeerConnection[streamId] != null) {\n      return this.remotePeerConnection[streamId].signalingState;\n    }\n    return null;\n  }\n\n  /**\n   * Called to get the ice connection state for a stream.\n   * This information can be used for error handling.\n   * Check: https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/iceConnectionState\n   * @param {string} streamId : unique id for the stream\n   */\n  iceConnectionState(streamId) {\n    if (this.remotePeerConnection[streamId] != null) {\n      return this.remotePeerConnection[streamId].iceConnectionState;\n    }\n    return null;\n  }\n\n  /**\n   * Called by browser when Local Configuration (SDP) is created successfully.\n   * It is set as LocalDescription first then sent to AMS.\n   * @param {object} configuration : created Local Configuration (SDP)\n   * @param {string} streamId : unique id for the stream\n   */\n  gotDescription(configuration, streamId) {\n    this.remotePeerConnection[streamId].setLocalDescription(configuration).then(responose => {\n      Logger.debug(\"Set local description successfully for stream Id \" + streamId);\n      var jsCmd = {\n        command: \"takeConfiguration\",\n        streamId: streamId,\n        type: configuration.type,\n        sdp: configuration.sdp\n      };\n      Logger.debug(\"setLocalDescription:\" + configuration.sdp);\n      this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n    }).catch(error => {\n      Logger.error(\"Cannot set local description. Error is: \" + error);\n    });\n  }\n\n  /**\n   * Called by WebSocketAdaptor when Remote Configuration (SDP) is received from AMS.\n   * It is set as RemoteDescription first then if @iceCandidateList has candidate that\n   * is received bfore this message, it is added as ice candidate.\n   * @param {object} configuration : received Remote Configuration (SDP)\n   * @param {string} idOfStream : unique id for the stream\n   * @param {string} typeOfConfiguration\n   * @param {string} idMapping : stream id and track id (which is provided in SDP) mapping in MultiTrack Playback and conference.\n   *                It is recorded to match stream id as new tracks are added with @onTrack\n   */\n  takeConfiguration(idOfStream, configuration, typeOfConfiguration, idMapping) {\n    var streamId = idOfStream;\n    var type = typeOfConfiguration;\n    var conf = configuration;\n    var isTypeOffer = type == \"offer\";\n    var dataChannelMode = \"publish\";\n    if (isTypeOffer) {\n      dataChannelMode = \"play\";\n    }\n    this.idMapping[streamId] = idMapping;\n    this.initPeerConnection(streamId, dataChannelMode);\n    Logger.debug(\"setRemoteDescription:\" + conf);\n    this.remotePeerConnection[streamId].setRemoteDescription(new RTCSessionDescription({\n      sdp: conf,\n      type: type\n    })).then(response => {\n      if (this.debug) {\n        Logger.debug(\"set remote description is succesfull with response: \" + response + \" for stream : \" + streamId + \" and type: \" + type);\n        Logger.debug(conf);\n      }\n      this.remoteDescriptionSet[streamId] = true;\n      var length = this.iceCandidateList[streamId].length;\n      Logger.debug(\"Ice candidate list size to be added: \" + length);\n      for (var i = 0; i < length; i++) {\n        this.addIceCandidate(streamId, this.iceCandidateList[streamId][i]);\n      }\n      this.iceCandidateList[streamId] = [];\n      if (isTypeOffer) {\n        //SDP constraints may be different in play mode\n        Logger.debug(\"try to create answer for stream id: \" + streamId);\n        this.remotePeerConnection[streamId].createAnswer(this.sdp_constraints).then(configuration => {\n          Logger.debug(\"created answer for stream id: \" + streamId);\n          //support for stereo\n          configuration.sdp = configuration.sdp.replace(\"useinbandfec=1\", \"useinbandfec=1; stereo=1\");\n          this.gotDescription(configuration, streamId);\n        }).catch(error => {\n          Logger.error(\"create answer error :\" + error);\n        });\n      }\n    }).catch(error => {\n      if (this.debug) {\n        Logger.error(\"set remote description is failed with error: \" + error);\n      }\n      if (error.toString().indexOf(\"InvalidAccessError\") > -1 || error.toString().indexOf(\"setRemoteDescription\") > -1) {\n        /**\n         * This error generally occurs in codec incompatibility.\n         * AMS for a now supports H.264 codec. This error happens when some browsers try to open it from VP8.\n         */\n        this.notifyErrorEventListeners(\"notSetRemoteDescription\");\n      }\n    });\n  }\n\n  /**\n   * Called by WebSocketAdaptor when new ice candidate is received from AMS.\n   * If Remote Description (SDP) is already set, the candidate is added immediately,\n   * otherwise stored in @iceCandidateList to add after Remote Description (SDP) set.\n   * @param {string} idOfTheStream : unique id for the stream\n   * @param {number|null} tmpLabel : sdpMLineIndex\n   * @param {string} tmpCandidate : ice candidate\n   */\n  takeCandidate(idOfTheStream, tmpLabel, tmpCandidate) {\n    var streamId = idOfTheStream;\n    var label = tmpLabel;\n    var candidateSdp = tmpCandidate;\n    var candidate = new RTCIceCandidate({\n      sdpMLineIndex: label,\n      candidate: candidateSdp\n    });\n    var dataChannelMode = \"peer\";\n    this.initPeerConnection(streamId, dataChannelMode);\n    Logger.debug(\"takeCandidate:\" + candidateSdp);\n    if (this.remoteDescriptionSet[streamId] == true) {\n      this.addIceCandidate(streamId, candidate);\n    } else {\n      Logger.debug(\"Ice candidate is added to list because remote description is not set yet\");\n      this.iceCandidateList[streamId].push(candidate);\n    }\n  }\n  /**\n   * Called internally to add the Ice Candidate to PeerConnection\n   *  @param {string} streamId : unique id for the stream\n   *  @param {object} candidate : ice candidate\n   */\n  addIceCandidate(streamId, candidate) {\n    var protocolSupported = false;\n    if (candidate.candidate == \"\") {\n      //candidate can be received and its value can be \"\".\n      //don't compare the protocols\n      protocolSupported = true;\n    } else if (typeof candidate.protocol == \"undefined\") {\n      this.candidateTypes.forEach(element => {\n        if (candidate.candidate.toLowerCase().includes(element)) {\n          protocolSupported = true;\n        }\n      });\n    } else {\n      protocolSupported = this.candidateTypes.includes(candidate.protocol.toLowerCase());\n    }\n    if (protocolSupported) {\n      this.remotePeerConnection[streamId].addIceCandidate(candidate).then(response => {\n        if (this.debug) {\n          Logger.debug(\"Candidate is added for stream \" + streamId);\n        }\n      }).catch(error => {\n        Logger.error(\"ice candiate cannot be added for stream id: \" + streamId + \" error is: \" + error);\n        Logger.error(candidate);\n      });\n    } else {\n      if (this.debug) {\n        Logger.debug(\"Candidate's protocol(\" + candidate.protocol + \") is not supported.\" + \"Candidate: \" + candidate.candidate + \" Supported protocols:\" + this.candidateTypes);\n      }\n    }\n  }\n  /**\n   * Called by WebSocketAdaptor when start message is received //TODO: may be changed. this logic shouldn't be in WebSocketAdaptor\n   * @param {string} idOfStream : unique id for the stream\n   */\n  startPublishing(idOfStream) {\n    var streamId = idOfStream;\n    var peerConnection = this.initPeerConnection(streamId, \"publish\");\n\n    //this.remotePeerConnection[streamId]\n    peerConnection.createOffer(this.sdp_constraints).then(configuration => {\n      this.gotDescription(configuration, streamId);\n    }).catch(error => {\n      Logger.error(\"create offer error for stream id: \" + streamId + \" error: \" + error);\n    });\n  }\n\n  /**\n   * Toggle video track on the server side.\n   *\n   * @param {string}  streamId : is the id of the stream\n   * @param {string}  trackId : is the id of the track. streamId is also one of the trackId of the stream. If you are having just a single track on your\n   *         stream, you need to give streamId as trackId parameter as well.\n   * @param {boolean}  enabled : is the enable/disable video track. If it's true, server sends video track. If it's false, server does not send video\n   */\n  toggleVideo(streamId, trackId, enabled) {\n    var jsCmd = {\n      command: \"toggleVideo\",\n      streamId: streamId,\n      trackId: trackId,\n      enabled: enabled\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Toggle audio track on the server side.\n   *\n   * @param {string} streamId : is the id of the stream\n   * @param {string}  trackId : is the id of the track. streamId is also one of the trackId of the stream. If you are having just a single track on your\n   *            stream, you need to give streamId as trackId parameter as well.\n   * @param {boolean}  enabled : is the enable/disable video track. If it's true, server sends audio track. If it's false, server does not send audio\n   *\n   */\n  toggleAudio(streamId, trackId, enabled) {\n    var jsCmd = {\n      command: \"toggleAudio\",\n      streamId: streamId,\n      trackId: trackId,\n      enabled: enabled\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to get statistics for a PeerConnection. It can be publisher or player.\n   *\n   * @param {string} streamId : unique id for the stream\n   */\n  getStats(streamId) {\n    Logger.debug(\"peerstatsgetstats = \" + this.remotePeerConnectionStats[streamId]);\n    return new Promise((resolve, reject) => {\n      this.remotePeerConnection[streamId].getStats(null).then(stats => {\n        var peerStats = this.parseStats(stats, streamId);\n        this.notifyEventListeners(\"updated_stats\", peerStats);\n        resolve(peerStats);\n      }).catch(err => {\n        resolve(false);\n      });\n    });\n  }\n  parseStats(stats, streamId) {\n    var bytesReceived = -1;\n    var videoPacketsLost = -1;\n    var audioPacketsLost = -1;\n    var fractionLost = -1;\n    var currentTime = -1;\n    var bytesSent = -1;\n    var videoPacketsSent = -1;\n    var audioPacketsSent = -1;\n    var audioLevel = -1;\n    var qlr = \"\";\n    var framesEncoded = -1;\n    var width = -1;\n    var height = -1;\n    var fps = -1;\n    var frameWidth = -1;\n    var frameHeight = -1;\n    var videoRoundTripTime = -1;\n    var videoJitter = -1;\n    var audioRoundTripTime = -1;\n    var audioJitter = -1;\n    var framesDecoded = -1;\n    var framesDropped = -1;\n    var framesReceived = -1;\n    var audioJitterAverageDelay = -1;\n    var videoJitterAverageDelay = -1;\n    var availableOutgoingBitrate = Infinity;\n    var currentRoundTripTime = -1;\n    var audioPacketsReceived = -1;\n    var videoPacketsReceived = -1;\n    var inboundRtp = [];\n    stats.forEach(value => {\n      //Logger.debug(value);\n      if (value.type == \"inbound-rtp\" && typeof value.kind != \"undefined\") {\n        //this is coming when webrtc playing\n\n        var inboundRtpObj = {};\n        inboundRtpObj.trackIdentifier = value.trackIdentifier;\n        bytesReceived += value.bytesReceived;\n        if (value.kind == \"audio\") {\n          audioPacketsLost = value.packetsLost;\n          audioJitter = value.jitter;\n          audioPacketsReceived = value.packetsReceived;\n          inboundRtpObj.audioPacketsLost = value.packetsLost;\n        } else if (value.kind == \"video\") {\n          videoPacketsLost = value.packetsLost;\n          inboundRtpObj.videoPacketsLost = value.packetsLost;\n          inboundRtpObj.framesDropped = value.framesDropped;\n          inboundRtpObj.framesDecoded = value.framesDecoded;\n          inboundRtpObj.framesPerSecond = value.framesPerSecond;\n          videoJitter = value.jitter;\n          videoPacketsReceived = value.packetsReceived;\n        }\n        inboundRtpObj.bytesReceived = value.bytesReceived;\n        inboundRtpObj.jitterBufferDelay = value.jitterBufferDelay;\n        inboundRtpObj.lastPacketReceivedTimestamp = value.lastPacketReceivedTimestamp;\n        fractionLost += value.fractionLost;\n        inboundRtpObj.fractionLost = value.fractionLost;\n        currentTime = value.timestamp;\n        inboundRtpObj.currentTime = value.timestamp;\n        if (typeof value.frameWidth != \"undefined\") {\n          frameWidth = value.frameWidth;\n          inboundRtpObj.frameWidth = value.frameWidth;\n        }\n        if (typeof value.frameHeight != \"undefined\") {\n          frameHeight = value.frameHeight;\n          inboundRtpObj.frameHeight = value.frameHeight;\n        }\n        if (typeof value.framesDecoded != \"undefined\") {\n          framesDecoded = value.framesDecoded;\n          inboundRtpObj.framesDecoded = value.framesDecoded;\n        }\n        if (typeof value.framesDropped != \"undefined\") {\n          framesDropped = value.framesDropped;\n          inboundRtpObj.framesDropped = value.framesDropped;\n        }\n        if (typeof value.framesReceived != \"undefined\") {\n          framesReceived = value.framesReceived;\n          inboundRtpObj.framesReceived = value.framesReceived;\n        }\n        inboundRtp.push(inboundRtpObj);\n      } else if (value.type == \"outbound-rtp\") {\n        //TODO: SPLIT AUDIO AND VIDEO BITRATES\n        //it is for the publishing\n        if (value.kind == \"audio\") {\n          audioPacketsSent = value.packetsSent;\n        } else if (value.kind == \"video\") {\n          videoPacketsSent = value.packetsSent;\n          frameWidth = value.frameWidth;\n          frameHeight = value.frameHeight;\n        }\n        bytesSent += value.bytesSent;\n        currentTime = value.timestamp;\n        qlr = value.qualityLimitationReason;\n        if (value.framesEncoded != null) {\n          //audio tracks are undefined here\n          framesEncoded += value.framesEncoded;\n        }\n      } else if (value.type == \"track\" && typeof value.kind != \"undefined\" && value.kind == \"audio\") {\n        if (typeof value.audioLevel != \"undefined\") {\n          audioLevel = value.audioLevel;\n        }\n        if (typeof value.jitterBufferDelay != \"undefined\" && typeof value.jitterBufferEmittedCount != \"undefined\") {\n          audioJitterAverageDelay = value.jitterBufferDelay / value.jitterBufferEmittedCount;\n        }\n      } else if (value.type == \"track\" && typeof value.kind != \"undefined\" && value.kind == \"video\") {\n        if (typeof value.frameWidth != \"undefined\") {\n          frameWidth = value.frameWidth;\n        }\n        if (typeof value.frameHeight != \"undefined\") {\n          frameHeight = value.frameHeight;\n        }\n        if (typeof value.framesDecoded != \"undefined\") {\n          framesDecoded = value.framesDecoded;\n        }\n        if (typeof value.framesDropped != \"undefined\") {\n          framesDropped = value.framesDropped;\n        }\n        if (typeof value.framesReceived != \"undefined\") {\n          framesReceived = value.framesReceived;\n        }\n        if (typeof value.jitterBufferDelay != \"undefined\" && typeof value.jitterBufferEmittedCount != \"undefined\") {\n          videoJitterAverageDelay = value.jitterBufferDelay / value.jitterBufferEmittedCount;\n        }\n      } else if (value.type == \"remote-inbound-rtp\" && typeof value.kind != \"undefined\") {\n        //this is coming when webrtc publishing\n\n        if (typeof value.packetsLost != \"undefined\") {\n          if (value.kind == \"video\") {\n            //this is the packetsLost for publishing\n            videoPacketsLost = value.packetsLost;\n          } else if (value.kind == \"audio\") {\n            //this is the packetsLost for publishing\n            audioPacketsLost = value.packetsLost;\n          }\n        }\n        if (typeof value.roundTripTime != \"undefined\") {\n          if (value.kind == \"video\") {\n            videoRoundTripTime = value.roundTripTime;\n          } else if (value.kind == \"audio\") {\n            audioRoundTripTime = value.roundTripTime;\n          }\n        }\n        if (typeof value.jitter != \"undefined\") {\n          if (value.kind == \"video\") {\n            videoJitter = value.jitter;\n          } else if (value.kind == \"audio\") {\n            audioJitter = value.jitter;\n          }\n        }\n      } else if (value.type == \"media-source\") {\n        if (value.kind == \"video\") {\n          //returns video source dimensions, not necessarily dimensions being encoded by browser\n          width = value.width;\n          height = value.height;\n          fps = value.framesPerSecond;\n        }\n      } else if (value.type == \"candidate-pair\" && value.state == \"succeeded\" && value.availableOutgoingBitrate != undefined) {\n        availableOutgoingBitrate = value.availableOutgoingBitrate / 1000;\n        //currentRoundTripTime\n        currentRoundTripTime = value.currentRoundTripTime;\n      }\n    });\n    if (typeof this.remotePeerConnectionStats[streamId] == 'undefined' || this.remotePeerConnectionStats[streamId] == null) {\n      this.remotePeerConnectionStats[streamId] = new PeerStats(streamId);\n    }\n    this.remotePeerConnectionStats[streamId].totalBytesReceived = bytesReceived;\n    this.remotePeerConnectionStats[streamId].videoPacketsLost = videoPacketsLost;\n    this.remotePeerConnectionStats[streamId].audioPacketsLost = audioPacketsLost;\n    this.remotePeerConnectionStats[streamId].fractionLost = fractionLost;\n    this.remotePeerConnectionStats[streamId].currentTime = currentTime;\n    this.remotePeerConnectionStats[streamId].totalBytesSent = bytesSent;\n    this.remotePeerConnectionStats[streamId].totalVideoPacketsSent = videoPacketsSent;\n    this.remotePeerConnectionStats[streamId].totalAudioPacketsSent = audioPacketsSent;\n    this.remotePeerConnectionStats[streamId].videoPacketsSent = videoPacketsSent;\n    this.remotePeerConnectionStats[streamId].audioPacketsSent = audioPacketsSent;\n    this.remotePeerConnectionStats[streamId].audioLevel = audioLevel;\n    this.remotePeerConnectionStats[streamId].qualityLimitationReason = qlr;\n    this.remotePeerConnectionStats[streamId].totalFramesEncoded = framesEncoded;\n    this.remotePeerConnectionStats[streamId].resWidth = width;\n    this.remotePeerConnectionStats[streamId].resHeight = height;\n    this.remotePeerConnectionStats[streamId].srcFps = fps;\n    this.remotePeerConnectionStats[streamId].frameWidth = frameWidth;\n    this.remotePeerConnectionStats[streamId].frameHeight = frameHeight;\n    this.remotePeerConnectionStats[streamId].videoRoundTripTime = videoRoundTripTime;\n    this.remotePeerConnectionStats[streamId].videoJitter = videoJitter;\n    this.remotePeerConnectionStats[streamId].audioRoundTripTime = audioRoundTripTime;\n    this.remotePeerConnectionStats[streamId].audioJitter = audioJitter;\n    this.remotePeerConnectionStats[streamId].framesDecoded = framesDecoded;\n    this.remotePeerConnectionStats[streamId].framesDropped = framesDropped;\n    this.remotePeerConnectionStats[streamId].framesReceived = framesReceived;\n    this.remotePeerConnectionStats[streamId].videoJitterAverageDelay = videoJitterAverageDelay;\n    this.remotePeerConnectionStats[streamId].audioJitterAverageDelay = audioJitterAverageDelay;\n    this.remotePeerConnectionStats[streamId].availableOutgoingBitrate = availableOutgoingBitrate;\n    this.remotePeerConnectionStats[streamId].inboundRtpList = inboundRtp;\n    this.remotePeerConnectionStats[streamId].currentRoundTripTime = currentRoundTripTime;\n    this.remotePeerConnectionStats[streamId].audioPacketsReceived = audioPacketsReceived;\n    this.remotePeerConnectionStats[streamId].videoPacketsReceived = videoPacketsReceived;\n    return this.remotePeerConnectionStats[streamId];\n  }\n\n  /**\n   * Called to start a periodic timer to get statistics periodically (5 seconds) for a specific stream.\n   *\n   * @param {string} streamId : unique id for the stream\n   * @param {number} periodMs : period in milliseconds. Default value is 5000 ms.\n   */\n  enableStats(streamId) {\n    var periodMs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5000;\n    if (this.remotePeerConnectionStats[streamId] == null) {\n      this.remotePeerConnectionStats[streamId] = new PeerStats(streamId);\n      this.remotePeerConnectionStats[streamId].timerId = setInterval(() => {\n        this.getStats(streamId);\n      }, periodMs);\n    }\n  }\n\n  /**\n   * Called to stop the periodic timer which is set by @enableStats\n   *\n   * @param {string} streamId : unique id for the stream\n   */\n  disableStats(streamId) {\n    if (this.remotePeerConnectionStats[streamId] != null || typeof this.remotePeerConnectionStats[streamId] != 'undefined') {\n      clearInterval(this.remotePeerConnectionStats[streamId].timerId);\n      delete this.remotePeerConnectionStats[streamId];\n    }\n  }\n\n  /**\n   * Called to check and start Web Socket connection if it is not started\n   */\n  checkWebSocketConnection() {\n    if (this.webSocketAdaptor == null || this.webSocketAdaptor.isConnected() == false && this.webSocketAdaptor.isConnecting() == false) {\n      Logger.debug(\"websocket url : \" + this.websocketURL);\n      this.webSocketAdaptor = new WebSocketAdaptor({\n        websocket_url: this.websocketURL,\n        webrtcadaptor: this,\n        callback: (info, obj) => {\n          this.websocketCallback(info, obj);\n        },\n        callbackError: (error, message) => {\n          this.notifyErrorEventListeners(error, message);\n        },\n        debug: this.debug\n      });\n    }\n  }\n  websocketCallback(info, obj) {\n    if (info == \"closed\" || info == \"server_will_stop\") {\n      Logger.info(\"Critical response from server:\" + info + \". It will reconnect immediately if there is an active connection\");\n\n      //close websocket reconnect again\n      if (info == \"server_will_stop\") {\n        this.webSocketAdaptor.close();\n      }\n      //try with forcing reconnect because webrtc will be closed as well\n      this.reconnectIfRequired(0, true);\n    }\n    this.notifyEventListeners(info, obj);\n  }\n\n  /**\n   * Called to stop Web Socket connection\n   * After calling this function, create new WebRTCAdaptor instance, don't use the the same object\n   * Because all streams are closed on server side as well when websocket connection is closed.\n   */\n  closeWebSocket() {\n    for (var key in this.remotePeerConnection) {\n      this.closePeerConnection(key);\n    }\n    //free the remote peer connection by initializing again\n    this.remotePeerConnection = new Array();\n    this.webSocketAdaptor.close();\n  }\n\n  /**\n   * @param {string} streamId Called to send a text message to other peer in the peer-to-peer sessionnnection is closed.\n   * @param {*} definition\n   * @param {*} data\n   */\n  peerMessage(streamId, definition, data) {\n    var jsCmd = {\n      command: \"peerMessageCommand\",\n      streamId: streamId,\n      definition: definition,\n      data: data\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to force AMS to send the video with the specified resolution in case of Adaptive Streaming (ABR) enabled.\n   * Normally the resolution is automatically determined by AMS according to the network condition.\n   * @param {string}  streamId : unique id for the stream\n   * @param {*}  resolution : default is auto. You can specify any height value from the ABR list.\n   */\n  forceStreamQuality(streamId, resolution) {\n    var jsCmd = {\n      command: \"forceStreamQuality\",\n      streamId: streamId,\n      streamHeight: resolution\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called to send data via DataChannel. DataChannel should be enabled on AMS settings.\n   * @param {string} streamId : unique id for the stream\n   * @param {*}  data : data that you want to send. It may be a text (may in Json format or not) or binary\n   */\n  sendData(streamId, data) {\n    var CHUNK_SIZE = 16000;\n    if (this.remotePeerConnection[streamId] !== undefined) {\n      var dataChannel = this.remotePeerConnection[streamId].dataChannel;\n      if (dataChannel === undefined || dataChannel === null || typeof dataChannel === 'undefined') {\n        Logger.warn('dataChannel is null or undefined');\n        return;\n      } else if (dataChannel.readyState !== 'open') {\n        Logger.warn('dataChannel.readyState is not open: ' + dataChannel.readyState);\n        return;\n      }\n      var length = data.length || data.size || data.byteLength;\n      var sent = 0;\n      if (typeof data === 'string' || data instanceof String) {\n        dataChannel.send(data);\n      } else {\n        var token = Math.floor(Math.random() * 999999);\n        var header = new Int32Array(2);\n        header[0] = token;\n        header[1] = length;\n        dataChannel.send(header);\n        var sent = 0;\n        while (sent < length) {\n          var size = Math.min(length - sent, CHUNK_SIZE);\n          var buffer = new Uint8Array(size + 4);\n          var tokenArray = new Int32Array(1);\n          tokenArray[0] = token;\n          buffer.set(new Uint8Array(tokenArray.buffer, 0, 4), 0);\n          var chunk = data.slice(sent, sent + size);\n          buffer.set(new Uint8Array(chunk), 4);\n          sent += size;\n          dataChannel.send(buffer);\n        }\n      }\n    } else {\n      Logger.warn(\"Send data is called for undefined peer connection with stream id: \" + streamId);\n    }\n  }\n\n  /**\n   * Called by user\n   * to add SoundMeter to a stream (remote stream)\n   * to measure audio level. This sound Meters are added to a map with the key of StreamId.\n   * When user called @getSoundLevelList, the instant levels are provided.\n   *\n   * This list can be used to add a sign to talking participant\n   * in conference room. And also to determine the dominant audio to focus that player.\n   * @param {MediaStream} stream\n   * @param {string} streamId\n   */\n  enableAudioLevel(stream, streamId) {\n    var soundMeter = new SoundMeter(this.mediaManager.audioContext);\n\n    // Put variables in global scope to make them available to the\n    // browser console.\n    // this function fetches getSoundLevelList and this list get instant levels from soundmeter directly\n    // so we don't need to fill inside of levelCallback here, just pass an empty function\n    soundMeter.connectToSource(stream, () => {}, function (e) {\n      if (e) {\n        alert(e);\n        return;\n      }\n      Logger.debug(\"Added sound meter for stream: \" + streamId + \" = \" + soundMeter.instant.toFixed(2));\n    });\n    this.soundMeters[streamId] = soundMeter;\n  }\n\n  /**\n   * Called by the user\n   * to get the audio levels for the streams for the provided StreamIds\n   *\n   * @param {*} streamsList\n   */\n  getSoundLevelList(streamsList) {\n    for (var i = 0; i < streamsList.length; i++) {\n      this.soundLevelList[streamsList[i]] = this.soundMeters[streamsList[i]].instant.toFixed(2);\n    }\n    this.notifyEventListeners(\"gotSoundList\", this.soundLevelList);\n  }\n\n  /**\n   * Called media manaher to get video/audio sender for the local peer connection\n   *\n   * @param {string} streamId :\n   * @param {string} type : \"video\" or \"audio\"\n   * @returns\n   */\n  getSender(streamId, type) {\n    var sender = null;\n    if (this.remotePeerConnection[streamId] != null) {\n      sender = this.remotePeerConnection[streamId].getSenders().find(function (s) {\n        return s.track.kind == type;\n      });\n    }\n    return sender;\n  }\n\n  /**\n   * Called by user\n   *\n   * @param {string} videoTrackId : track id associated with pinned video\n   * @param {string} streamId : streamId of the pinned video\n   * @param {boolean} enabled : true | false\n   * @returns\n   */\n  assignVideoTrack(videoTrackId, streamId, enabled) {\n    var jsCmd = {\n      command: \"assignVideoTrackCommand\",\n      streamId: streamId,\n      videoTrackId: videoTrackId,\n      enabled: enabled\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called by user\n   * video tracks may be less than the participants count\n   * so these parameters are used for assigning video tracks to participants.\n   * This message is used to make pagination in conference.\n   * @param {string} streamId\n   * @param {number} offset : start index for participant list to play\n   * @param {number} size : number of the participants to play\n   * @returns\n   */\n  updateVideoTrackAssignments(streamId, offset, size) {\n    var jsCmd = {\n      streamId: streamId,\n      command: \"updateVideoTrackAssignmentsCommand\",\n      offset: offset,\n      size: size\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called by user\n   * This message is used to set max video track count in a conference.\n   * @param {string} streamId\n   * @param {number} maxTrackCount : maximum video track count\n   * @returns\n   */\n  setMaxVideoTrackCount(streamId, maxTrackCount) {\n    var jsCmd = {\n      streamId: streamId,\n      command: \"setMaxVideoTrackCountCommand\",\n      maxTrackCount: maxTrackCount\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called by user\n   * This message is used to send audio level in a conference.\n   *\n   * IMPORTANT: AMS v2.7+ can get the audio level from the RTP header and sends audio level to the viewers the same way here.\n   *  Just one difference, AMS sends the audio level in the range of 0 and 127. 0 is max, 127 is ms\n  \t *  It means that likely you don't need to send UPDATE_AUDIO_LEVEL anymore\n   *\n   * @param {string} streamId\n   * @param {*} value : audio level\n   * @returns\n   */\n  updateAudioLevel(streamId, value) {\n    var jsCmd = {\n      streamId: streamId,\n      eventType: \"UPDATE_AUDIO_LEVEL\",\n      audioLevel: value\n    };\n    this.sendData(streamId, JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Called by user\n   * This message is used to get debug data from server for debugging purposes in conference.\n   * @param {string} streamId\n   * @returns\n   */\n  getDebugInfo(streamId) {\n    var jsCmd = {\n      streamId: streamId,\n      command: \"getDebugInfo\"\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Register user push notification token to Ant Media Server according to subscriberId and authToken\n   * @param {string} subscriberId: subscriber id it can be anything that defines the user\n   * @param {string} authToken: JWT token with the issuer field is the subscriberId and secret is the application's subscriberAuthenticationKey, \n   * \t\t\t\t\t\t\t  It's used to authenticate the user - token should be obtained from Ant Media Server Push Notification REST Service\n   * \t\t\t\t\t\t\t  or can be generated with JWT by using the secret and issuer fields\n   * \n   * @param {string} pushNotificationToken: Push Notification Token that is obtained from the Firebase or APN\n   * @param {string} tokenType: It can be \"fcm\" or \"apn\" for Firebase Cloud Messaging or Apple Push Notification\n   * \n   * @returns Server responds this message with a result.\n   * Result message is something like \n   * {\n   * \t  \"command\":\"notification\",\n   *    \"success\":true or false\n   *    \"definition\":\"If success is false, it gives the error message\",\n   * \t  \"information\":\"If succeess is false, it gives more information to debug if available\"\n   * \n   * }\t \n   *                            \n   */\n  registerPushNotificationToken(subscriberId, authToken, pushNotificationToken, tokenType) {\n    var jsCmd = {\n      command: \"registerPushNotificationToken\",\n      subscriberId: subscriberId,\n      token: authToken,\n      pnsRegistrationToken: pushNotificationToken,\n      pnsType: tokenType\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Send push notification to subscribers\n   * @param {string} subscriberId: subscriber id it can be anything(email, username, id) that defines the user in your applicaiton\n   * @param {string} authToken: JWT token with the issuer field is the subscriberId and secret is the application's subscriberAuthenticationKey,\n   *                               It's used to authenticate the user - token should be obtained from Ant Media Server Push Notification REST Service\n   *                              or can be generated with JWT by using the secret and issuer fields\n   * @param {string} pushNotificationContent: JSON Format - Push Notification Content. If it's not JSON, it will not parsed\n   * @param {Array} subscriberIdsToNotify: Array of subscriber ids to notify\n   * \n   * @returns Server responds this message with a result.\n   * Result message is something like \n   * {\n   * \t  \"command\":\"notification\",\n   *    \"success\":true or false\n   *    \"definition\":\"If success is false, it gives the error message\",\n   * \t  \"information\":\"If succeess is false, it gives more information to debug if available\"\n   * \n   * }\t \n   */\n  sendPushNotification(subscriberId, authToken, pushNotificationContent, subscriberIdsToNotify) {\n    //type check for pushNotificationContent if json\n    if (typeof pushNotificationContent !== \"object\") {\n      Logger.error(\"Push Notification Content is not JSON format\");\n      throw new Error(\"Push Notification Content is not JSON format\");\n    }\n\n    //type check if subscriberIdsToNotify is array\n    if (!Array.isArray(subscriberIdsToNotify)) {\n      Logger.error(\"subscriberIdsToNotify is not an array. Please put the subscriber ids to notify in an array such as [user1], [user1, user2]\");\n      throw new Error(\"subscriberIdsToNotify is not an array. Please put the subscriber ids to notify in an array such as [user1], [user1, user2]\");\n    }\n    var jsCmd = {\n      command: \"sendPushNotification\",\n      subscriberId: subscriberId,\n      token: authToken,\n      pushNotificationContent: pushNotificationContent,\n      subscriberIdsToNotify: subscriberIdsToNotify\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * Send push notification to topic\n   * @param {string} subscriberId: subscriber id it can be anything(email, username, id) that defines the user in your applicaiton\n   * @param {string} authToken: JWT token with the issuer field is the subscriberId and secret is the application's subscriberAuthenticationKey,\t\n   *                              It's used to authenticate the user - token should be obtained from Ant Media Server Push Notification REST Service\n   *                             or can be generated with JWT by using the secret and issuer fields\n   * @param {string} pushNotificationContent:JSON Format - Push Notification Content. If it's not JSON, it will not parsed\n   * @param {string} topic: Topic to send push notification\n   * \n   * @returns Server responds this message with a result.\n   * Result message is something like\n   * {\n   *     \"command\":\"notification\",\n   *     \"success\":true or false\n   *     \"definition\":\"If success is false, it gives the error message\",\n   *     \"information\":\"If succeess is false, it gives more information to debug if available\"\n   * }\n   * \n   */\n  sendPushNotificationToTopic(subscriberId, authToken, pushNotificationContent, topic) {\n    //type check for pushNotificationContent if json\n    if (typeof pushNotificationContent !== \"object\") {\n      Logger.error(\"Push Notification Content is not JSON format\");\n      throw new Error(\"Push Notification Content is not JSON format\");\n    }\n    var jsCmd = {\n      command: \"sendPushNotification\",\n      subscriberId: subscriberId,\n      token: authToken,\n      pushNotificationContent: pushNotificationContent,\n      topic: topic\n    };\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\n  }\n\n  /**\n   * The following messages are forwarded to MediaManager. They are also kept here because of backward compatibility.\n   * You can find the details about them in media_manager.js\n   * @param {string} streamId\n   * @returns \n   */\n  turnOffLocalCamera(streamId) {\n    return this.mediaManager.turnOffLocalCamera(streamId);\n  }\n  /**\n   *\n   * @param {string} streamId\n   * @returns\n   */\n  turnOnLocalCamera(streamId) {\n    return this.mediaManager.turnOnLocalCamera(streamId);\n  }\n  muteLocalMic() {\n    this.mediaManager.muteLocalMic();\n  }\n  unmuteLocalMic() {\n    this.mediaManager.unmuteLocalMic();\n  }\n  /**\n   *\n   * @param {string} streamId\n   * @returns\n   */\n  switchDesktopCapture(streamId) {\n    return this.mediaManager.switchDesktopCapture(streamId);\n  }\n\n  /**\n   * Switch to Video camera capture again. Updates the video track on the fly as well.\n   * @param {string} streamId\n   * @param {string} deviceId\n   * @returns {Promise}\n   */\n  switchVideoCameraCapture(streamId, deviceId, onEndedCallback) {\n    return this.mediaManager.switchVideoCameraCapture(streamId, deviceId, onEndedCallback);\n  }\n\n  /**\n   * Update video track of the stream. Updates the video track on the fly as well.\n   * @param {string} stream\n   * @param {string} streamId\n   * @param {function} onEndedCallback\n   * @param {boolean} stopDesktop\n   * @returns {Promise}\n   */\n  updateVideoTrack(stream, streamId, onEndedCallback, stopDesktop) {\n    return this.mediaManager.updateVideoTrack(stream, streamId, onEndedCallback, stopDesktop);\n  }\n\n  /**\n   * Update audio track of the stream. Updates the audio track on the fly as well. It just replaces the audio track with the first one in the stream\n   * @param {*} stream\n   * @param {*} streamId\n   * @param {*} onEndedCallback\n   * @returns\n   */\n  updateAudioTrack(stream, streamId, onEndedCallback) {\n    return this.mediaManager.updateAudioTrack(stream, streamId, onEndedCallback);\n  }\n\n  /**\n   * Called by User\n   * to switch between front and back camera on mobile devices\n   *\n   * @param {string} streamId Id of the stream to be changed.\n   * @param {string} facingMode it can be \"\"user\" or \"environment\"\n   *\n   * This method is used to switch front and back camera.\n   */\n  switchVideoCameraFacingMode(streamId, facingMode) {\n    return this.mediaManager.switchVideoCameraFacingMode(streamId, facingMode);\n  }\n  /**\n   *\n   * @param {string} streamId\n   * @returns\n   */\n  switchDesktopCaptureWithCamera(streamId) {\n    return this.mediaManager.switchDesktopCaptureWithCamera(streamId);\n  }\n  /**\n   *\n   * @param {string} streamId\n   * @param {string} deviceId\n   * @returns\n   */\n  switchAudioInputSource(streamId, deviceId) {\n    return this.mediaManager.switchAudioInputSource(streamId, deviceId);\n  }\n  /**\n   *\n   * @param {number} volumeLevel\n   */\n  setVolumeLevel(volumeLevel) {\n    this.mediaManager.setVolumeLevel(volumeLevel);\n  }\n  /**\n   *\n   * Using sound meter in order to get audio level may cause audio distortion in Windows browsers\n   * @param {Function} levelCallback\n   * @param {number} period\n   * @returns\n   */\n  enableAudioLevelForLocalStream(levelCallback, period) {\n    return this.mediaManager.enableAudioLevelForLocalStream(levelCallback);\n  }\n  disableAudioLevelForLocalStream() {\n    this.mediaManager.disableAudioLevelForLocalStream();\n  }\n  /**\n   *\n   * @param {object} constraints\n   * @returns\n   */\n  applyConstraints(constraints) {\n    return this.mediaManager.applyConstraints(constraints);\n  }\n  /**\n   *\n   * @param {number} bandwidth\n   * @param {string} streamId\n   */\n  changeBandwidth(bandwidth, streamId) {\n    this.mediaManager.changeBandwidth(bandwidth, streamId);\n  }\n  enableAudioLevelWhenMuted() {\n    return this.mediaManager.enableAudioLevelWhenMuted();\n  }\n  disableAudioLevelWhenMuted() {\n    this.mediaManager.disableAudioLevelWhenMuted();\n  }\n  /**\n   *\n   * @param {string} streamId\n   * @returns\n   */\n  getVideoSender(streamId) {\n    return this.mediaManager.getVideoSender(streamId);\n  }\n  /**\n   *\n   * @param {MediaStreamConstraints} mediaConstraints : media constraints to be used for opening the stream\n   * @param {string} streamId : id of the stream to replace tracks with\n   * @returns\n   */\n  openStream(mediaConstraints, streamId) {\n    return this.mediaManager.openStream(mediaConstraints, streamId);\n  }\n  closeStream() {\n    return this.mediaManager.closeStream();\n  }\n}\n\n/* The Information Callbacks Called by This Class */\n//TODO:\n\n/* The Error Callbacks Called by This Class */\n//TODO:\n/**\n * @type {Array<Function>}\n */\n_defineProperty(WebRTCAdaptor, \"pluginInitMethods\", new Array());\n\nexport { WebRTCAdaptor as W, _defineProperty as _, WebSocketAdaptor as a, _classPrivateMethodInitSpec as b, _classPrivateFieldInitSpec as c, _asyncToGenerator as d, _classPrivateFieldSet as e, _classPrivateFieldGet as f, _classPrivateMethodGet as g };\n","import { _ as _defineProperty, W as WebRTCAdaptor, b as _classPrivateMethodInitSpec, c as _classPrivateFieldInitSpec, d as _asyncToGenerator, e as _classPrivateFieldSet, f as _classPrivateFieldGet, g as _classPrivateMethodGet } from './webrtc_adaptor-65f8db53.js';\nimport './loglevel.min.js';\nimport './media_manager.js';\nimport './soundmeter.js';\nimport './utility.js';\nimport './fetch.stream.js';\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n(function () {\n\n  var x;\n  function aa(a) {\n    var b = 0;\n    return function () {\n      return b < a.length ? {\n        done: !1,\n        value: a[b++]\n      } : {\n        done: !0\n      };\n    };\n  }\n  var ba = \"function\" == typeof Object.defineProperties ? Object.defineProperty : function (a, b, c) {\n    if (a == Array.prototype || a == Object.prototype) return a;\n    a[b] = c.value;\n    return a;\n  };\n  function ca(a) {\n    a = [\"object\" == typeof globalThis && globalThis, a, \"object\" == typeof window && window, \"object\" == typeof self && self, \"object\" == typeof commonjsGlobal && commonjsGlobal];\n    for (var b = 0; b < a.length; ++b) {\n      var c = a[b];\n      if (c && c.Math == Math) return c;\n    }\n    throw Error(\"Cannot find global object\");\n  }\n  var y = ca(this);\n  function z(a, b) {\n    if (b) a: {\n      var c = y;\n      a = a.split(\".\");\n      for (var d = 0; d < a.length - 1; d++) {\n        var e = a[d];\n        if (!(e in c)) break a;\n        c = c[e];\n      }\n      a = a[a.length - 1];\n      d = c[a];\n      b = b(d);\n      b != d && null != b && ba(c, a, {\n        configurable: !0,\n        writable: !0,\n        value: b\n      });\n    }\n  }\n  z(\"Symbol\", function (a) {\n    function b(g) {\n      if (this instanceof b) throw new TypeError(\"Symbol is not a constructor\");\n      return new c(d + (g || \"\") + \"_\" + e++, g);\n    }\n    function c(g, f) {\n      this.h = g;\n      ba(this, \"description\", {\n        configurable: !0,\n        writable: !0,\n        value: f\n      });\n    }\n    if (a) return a;\n    c.prototype.toString = function () {\n      return this.h;\n    };\n    var d = \"jscomp_symbol_\" + (1E9 * Math.random() >>> 0) + \"_\",\n      e = 0;\n    return b;\n  });\n  z(\"Symbol.iterator\", function (a) {\n    if (a) return a;\n    a = Symbol(\"Symbol.iterator\");\n    for (var b = \"Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array\".split(\" \"), c = 0; c < b.length; c++) {\n      var d = y[b[c]];\n      \"function\" === typeof d && \"function\" != typeof d.prototype[a] && ba(d.prototype, a, {\n        configurable: !0,\n        writable: !0,\n        value: function () {\n          return da(aa(this));\n        }\n      });\n    }\n    return a;\n  });\n  function da(a) {\n    a = {\n      next: a\n    };\n    a[Symbol.iterator] = function () {\n      return this;\n    };\n    return a;\n  }\n  function A(a) {\n    var b = \"undefined\" != typeof Symbol && Symbol.iterator && a[Symbol.iterator];\n    return b ? b.call(a) : {\n      next: aa(a)\n    };\n  }\n  function ea(a) {\n    if (!(a instanceof Array)) {\n      a = A(a);\n      for (var b, c = []; !(b = a.next()).done;) c.push(b.value);\n      a = c;\n    }\n    return a;\n  }\n  var fa = \"function\" == typeof Object.assign ? Object.assign : function (a, b) {\n    for (var c = 1; c < arguments.length; c++) {\n      var d = arguments[c];\n      if (d) for (var e in d) Object.prototype.hasOwnProperty.call(d, e) && (a[e] = d[e]);\n    }\n    return a;\n  };\n  z(\"Object.assign\", function (a) {\n    return a || fa;\n  });\n  var ha = \"function\" == typeof Object.create ? Object.create : function (a) {\n      function b() {}\n      b.prototype = a;\n      return new b();\n    },\n    ia;\n  if (\"function\" == typeof Object.setPrototypeOf) ia = Object.setPrototypeOf;else {\n    var ja;\n    a: {\n      var ka = {\n          a: !0\n        },\n        la = {};\n      try {\n        la.__proto__ = ka;\n        ja = la.a;\n        break a;\n      } catch (a) {}\n      ja = !1;\n    }\n    ia = ja ? function (a, b) {\n      a.__proto__ = b;\n      if (a.__proto__ !== b) throw new TypeError(a + \" is not extensible\");\n      return a;\n    } : null;\n  }\n  var ma = ia;\n  function na(a, b) {\n    a.prototype = ha(b.prototype);\n    a.prototype.constructor = a;\n    if (ma) ma(a, b);else for (var c in b) if (\"prototype\" != c) if (Object.defineProperties) {\n      var d = Object.getOwnPropertyDescriptor(b, c);\n      d && Object.defineProperty(a, c, d);\n    } else a[c] = b[c];\n    a.za = b.prototype;\n  }\n  function oa() {\n    this.m = !1;\n    this.j = null;\n    this.i = void 0;\n    this.h = 1;\n    this.v = this.s = 0;\n    this.l = null;\n  }\n  function pa(a) {\n    if (a.m) throw new TypeError(\"Generator is already running\");\n    a.m = !0;\n  }\n  oa.prototype.u = function (a) {\n    this.i = a;\n  };\n  function qa(a, b) {\n    a.l = {\n      ma: b,\n      na: !0\n    };\n    a.h = a.s || a.v;\n  }\n  oa.prototype.return = function (a) {\n    this.l = {\n      return: a\n    };\n    this.h = this.v;\n  };\n  function D(a, b, c) {\n    a.h = c;\n    return {\n      value: b\n    };\n  }\n  function ra(a) {\n    this.h = new oa();\n    this.i = a;\n  }\n  function sa(a, b) {\n    pa(a.h);\n    var c = a.h.j;\n    if (c) return ta(a, \"return\" in c ? c[\"return\"] : function (d) {\n      return {\n        value: d,\n        done: !0\n      };\n    }, b, a.h.return);\n    a.h.return(b);\n    return ua(a);\n  }\n  function ta(a, b, c, d) {\n    try {\n      var e = b.call(a.h.j, c);\n      if (!(e instanceof Object)) throw new TypeError(\"Iterator result \" + e + \" is not an object\");\n      if (!e.done) return a.h.m = !1, e;\n      var g = e.value;\n    } catch (f) {\n      return a.h.j = null, qa(a.h, f), ua(a);\n    }\n    a.h.j = null;\n    d.call(a.h, g);\n    return ua(a);\n  }\n  function ua(a) {\n    for (; a.h.h;) try {\n      var b = a.i(a.h);\n      if (b) return a.h.m = !1, {\n        value: b.value,\n        done: !1\n      };\n    } catch (c) {\n      a.h.i = void 0, qa(a.h, c);\n    }\n    a.h.m = !1;\n    if (a.h.l) {\n      b = a.h.l;\n      a.h.l = null;\n      if (b.na) throw b.ma;\n      return {\n        value: b.return,\n        done: !0\n      };\n    }\n    return {\n      value: void 0,\n      done: !0\n    };\n  }\n  function va(a) {\n    this.next = function (b) {\n      pa(a.h);\n      a.h.j ? b = ta(a, a.h.j.next, b, a.h.u) : (a.h.u(b), b = ua(a));\n      return b;\n    };\n    this.throw = function (b) {\n      pa(a.h);\n      a.h.j ? b = ta(a, a.h.j[\"throw\"], b, a.h.u) : (qa(a.h, b), b = ua(a));\n      return b;\n    };\n    this.return = function (b) {\n      return sa(a, b);\n    };\n    this[Symbol.iterator] = function () {\n      return this;\n    };\n  }\n  function wa(a) {\n    function b(d) {\n      return a.next(d);\n    }\n    function c(d) {\n      return a.throw(d);\n    }\n    return new Promise(function (d, e) {\n      function g(f) {\n        f.done ? d(f.value) : Promise.resolve(f.value).then(b, c).then(g, e);\n      }\n      g(a.next());\n    });\n  }\n  function E(a) {\n    return wa(new va(new ra(a)));\n  }\n  z(\"Promise\", function (a) {\n    function b(f) {\n      this.i = 0;\n      this.j = void 0;\n      this.h = [];\n      this.u = !1;\n      var h = this.l();\n      try {\n        f(h.resolve, h.reject);\n      } catch (k) {\n        h.reject(k);\n      }\n    }\n    function c() {\n      this.h = null;\n    }\n    function d(f) {\n      return f instanceof b ? f : new b(function (h) {\n        h(f);\n      });\n    }\n    if (a) return a;\n    c.prototype.i = function (f) {\n      if (null == this.h) {\n        this.h = [];\n        var h = this;\n        this.j(function () {\n          h.m();\n        });\n      }\n      this.h.push(f);\n    };\n    var e = y.setTimeout;\n    c.prototype.j = function (f) {\n      e(f, 0);\n    };\n    c.prototype.m = function () {\n      for (; this.h && this.h.length;) {\n        var f = this.h;\n        this.h = [];\n        for (var h = 0; h < f.length; ++h) {\n          var k = f[h];\n          f[h] = null;\n          try {\n            k();\n          } catch (l) {\n            this.l(l);\n          }\n        }\n      }\n      this.h = null;\n    };\n    c.prototype.l = function (f) {\n      this.j(function () {\n        throw f;\n      });\n    };\n    b.prototype.l = function () {\n      function f(l) {\n        return function (m) {\n          k || (k = !0, l.call(h, m));\n        };\n      }\n      var h = this,\n        k = !1;\n      return {\n        resolve: f(this.I),\n        reject: f(this.m)\n      };\n    };\n    b.prototype.I = function (f) {\n      if (f === this) this.m(new TypeError(\"A Promise cannot resolve to itself\"));else if (f instanceof b) this.L(f);else {\n        a: switch (typeof f) {\n          case \"object\":\n            var h = null != f;\n            break a;\n          case \"function\":\n            h = !0;\n            break a;\n          default:\n            h = !1;\n        }\n        h ? this.F(f) : this.s(f);\n      }\n    };\n    b.prototype.F = function (f) {\n      var h = void 0;\n      try {\n        h = f.then;\n      } catch (k) {\n        this.m(k);\n        return;\n      }\n      \"function\" == typeof h ? this.M(h, f) : this.s(f);\n    };\n    b.prototype.m = function (f) {\n      this.v(2, f);\n    };\n    b.prototype.s = function (f) {\n      this.v(1, f);\n    };\n    b.prototype.v = function (f, h) {\n      if (0 != this.i) throw Error(\"Cannot settle(\" + f + \", \" + h + \"): Promise already settled in state\" + this.i);\n      this.i = f;\n      this.j = h;\n      2 === this.i && this.K();\n      this.H();\n    };\n    b.prototype.K = function () {\n      var f = this;\n      e(function () {\n        if (f.D()) {\n          var h = y.console;\n          \"undefined\" !== typeof h && h.error(f.j);\n        }\n      }, 1);\n    };\n    b.prototype.D = function () {\n      if (this.u) return !1;\n      var f = y.CustomEvent,\n        h = y.Event,\n        k = y.dispatchEvent;\n      if (\"undefined\" === typeof k) return !0;\n      \"function\" === typeof f ? f = new f(\"unhandledrejection\", {\n        cancelable: !0\n      }) : \"function\" === typeof h ? f = new h(\"unhandledrejection\", {\n        cancelable: !0\n      }) : (f = y.document.createEvent(\"CustomEvent\"), f.initCustomEvent(\"unhandledrejection\", !1, !0, f));\n      f.promise = this;\n      f.reason = this.j;\n      return k(f);\n    };\n    b.prototype.H = function () {\n      if (null != this.h) {\n        for (var f = 0; f < this.h.length; ++f) g.i(this.h[f]);\n        this.h = null;\n      }\n    };\n    var g = new c();\n    b.prototype.L = function (f) {\n      var h = this.l();\n      f.T(h.resolve, h.reject);\n    };\n    b.prototype.M = function (f, h) {\n      var k = this.l();\n      try {\n        f.call(h, k.resolve, k.reject);\n      } catch (l) {\n        k.reject(l);\n      }\n    };\n    b.prototype.then = function (f, h) {\n      function k(p, n) {\n        return \"function\" == typeof p ? function (q) {\n          try {\n            l(p(q));\n          } catch (t) {\n            m(t);\n          }\n        } : n;\n      }\n      var l,\n        m,\n        r = new b(function (p, n) {\n          l = p;\n          m = n;\n        });\n      this.T(k(f, l), k(h, m));\n      return r;\n    };\n    b.prototype.catch = function (f) {\n      return this.then(void 0, f);\n    };\n    b.prototype.T = function (f, h) {\n      function k() {\n        switch (l.i) {\n          case 1:\n            f(l.j);\n            break;\n          case 2:\n            h(l.j);\n            break;\n          default:\n            throw Error(\"Unexpected state: \" + l.i);\n        }\n      }\n      var l = this;\n      null == this.h ? g.i(k) : this.h.push(k);\n      this.u = !0;\n    };\n    b.resolve = d;\n    b.reject = function (f) {\n      return new b(function (h, k) {\n        k(f);\n      });\n    };\n    b.race = function (f) {\n      return new b(function (h, k) {\n        for (var l = A(f), m = l.next(); !m.done; m = l.next()) d(m.value).T(h, k);\n      });\n    };\n    b.all = function (f) {\n      var h = A(f),\n        k = h.next();\n      return k.done ? d([]) : new b(function (l, m) {\n        function r(q) {\n          return function (t) {\n            p[q] = t;\n            n--;\n            0 == n && l(p);\n          };\n        }\n        var p = [],\n          n = 0;\n        do p.push(void 0), n++, d(k.value).T(r(p.length - 1), m), k = h.next(); while (!k.done);\n      });\n    };\n    return b;\n  });\n  function xa(a, b) {\n    a instanceof String && (a += \"\");\n    var c = 0,\n      d = !1,\n      e = {\n        next: function () {\n          if (!d && c < a.length) {\n            var g = c++;\n            return {\n              value: b(g, a[g]),\n              done: !1\n            };\n          }\n          d = !0;\n          return {\n            done: !0,\n            value: void 0\n          };\n        }\n      };\n    e[Symbol.iterator] = function () {\n      return e;\n    };\n    return e;\n  }\n  z(\"Array.prototype.keys\", function (a) {\n    return a ? a : function () {\n      return xa(this, function (b) {\n        return b;\n      });\n    };\n  });\n  z(\"Array.prototype.fill\", function (a) {\n    return a ? a : function (b, c, d) {\n      var e = this.length || 0;\n      0 > c && (c = Math.max(0, e + c));\n      if (null == d || d > e) d = e;\n      d = Number(d);\n      0 > d && (d = Math.max(0, e + d));\n      for (c = Number(c || 0); c < d; c++) this[c] = b;\n      return this;\n    };\n  });\n  function F(a) {\n    return a ? a : Array.prototype.fill;\n  }\n  z(\"Int8Array.prototype.fill\", F);\n  z(\"Uint8Array.prototype.fill\", F);\n  z(\"Uint8ClampedArray.prototype.fill\", F);\n  z(\"Int16Array.prototype.fill\", F);\n  z(\"Uint16Array.prototype.fill\", F);\n  z(\"Int32Array.prototype.fill\", F);\n  z(\"Uint32Array.prototype.fill\", F);\n  z(\"Float32Array.prototype.fill\", F);\n  z(\"Float64Array.prototype.fill\", F);\n  z(\"Object.is\", function (a) {\n    return a ? a : function (b, c) {\n      return b === c ? 0 !== b || 1 / b === 1 / c : b !== b && c !== c;\n    };\n  });\n  z(\"Array.prototype.includes\", function (a) {\n    return a ? a : function (b, c) {\n      var d = this;\n      d instanceof String && (d = String(d));\n      var e = d.length;\n      c = c || 0;\n      for (0 > c && (c = Math.max(c + e, 0)); c < e; c++) {\n        var g = d[c];\n        if (g === b || Object.is(g, b)) return !0;\n      }\n      return !1;\n    };\n  });\n  z(\"String.prototype.includes\", function (a) {\n    return a ? a : function (b, c) {\n      if (null == this) throw new TypeError(\"The 'this' value for String.prototype.includes must not be null or undefined\");\n      if (b instanceof RegExp) throw new TypeError(\"First argument to String.prototype.includes must not be a regular expression\");\n      return -1 !== this.indexOf(b, c || 0);\n    };\n  });\n  var ya = this || self;\n  function Aa(a, b) {\n    a = a.split(\".\");\n    var c = ya;\n    a[0] in c || \"undefined\" == typeof c.execScript || c.execScript(\"var \" + a[0]);\n    for (var d; a.length && (d = a.shift());) a.length || void 0 === b ? c[d] && c[d] !== Object.prototype[d] ? c = c[d] : c = c[d] = {} : c[d] = b;\n  }\n  function Ba(a) {\n    var b;\n    a: {\n      if (b = ya.navigator) if (b = b.userAgent) break a;\n      b = \"\";\n    }\n    return -1 != b.indexOf(a);\n  }\n  var Ca = Array.prototype.map ? function (a, b) {\n    return Array.prototype.map.call(a, b, void 0);\n  } : function (a, b) {\n    for (var c = a.length, d = Array(c), e = \"string\" === typeof a ? a.split(\"\") : a, g = 0; g < c; g++) g in e && (d[g] = b.call(void 0, e[g], g, a));\n    return d;\n  };\n  var Da = {},\n    Ea = null;\n  function Fa(a) {\n    var b = a.length,\n      c = 3 * b / 4;\n    c % 3 ? c = Math.floor(c) : -1 != \"=.\".indexOf(a[b - 1]) && (c = -1 != \"=.\".indexOf(a[b - 2]) ? c - 2 : c - 1);\n    var d = new Uint8Array(c),\n      e = 0;\n    Ga(a, function (g) {\n      d[e++] = g;\n    });\n    return e !== c ? d.subarray(0, e) : d;\n  }\n  function Ga(a, b) {\n    function c(k) {\n      for (; d < a.length;) {\n        var l = a.charAt(d++),\n          m = Ea[l];\n        if (null != m) return m;\n        if (!/^[\\s\\xa0]*$/.test(l)) throw Error(\"Unknown base64 encoding at char: \" + l);\n      }\n      return k;\n    }\n    Ha();\n    for (var d = 0;;) {\n      var e = c(-1),\n        g = c(0),\n        f = c(64),\n        h = c(64);\n      if (64 === h && -1 === e) break;\n      b(e << 2 | g >> 4);\n      64 != f && (b(g << 4 & 240 | f >> 2), 64 != h && b(f << 6 & 192 | h));\n    }\n  }\n  function Ha() {\n    if (!Ea) {\n      Ea = {};\n      for (var a = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split(\"\"), b = [\"+/=\", \"+/\", \"-_=\", \"-_.\", \"-_\"], c = 0; 5 > c; c++) {\n        var d = a.concat(b[c].split(\"\"));\n        Da[c] = d;\n        for (var e = 0; e < d.length; e++) {\n          var g = d[e];\n          void 0 === Ea[g] && (Ea[g] = e);\n        }\n      }\n    }\n  }\n  var Ia = \"undefined\" !== typeof Uint8Array,\n    Ja = !(Ba(\"Trident\") || Ba(\"MSIE\")) && \"function\" === typeof ya.btoa;\n  function Ka(a) {\n    if (!Ja) {\n      var b;\n      void 0 === b && (b = 0);\n      Ha();\n      b = Da[b];\n      for (var c = Array(Math.floor(a.length / 3)), d = b[64] || \"\", e = 0, g = 0; e < a.length - 2; e += 3) {\n        var f = a[e],\n          h = a[e + 1],\n          k = a[e + 2],\n          l = b[f >> 2];\n        f = b[(f & 3) << 4 | h >> 4];\n        h = b[(h & 15) << 2 | k >> 6];\n        k = b[k & 63];\n        c[g++] = l + f + h + k;\n      }\n      l = 0;\n      k = d;\n      switch (a.length - e) {\n        case 2:\n          l = a[e + 1], k = b[(l & 15) << 2] || d;\n        case 1:\n          a = a[e], c[g] = b[a >> 2] + b[(a & 3) << 4 | l >> 4] + k + d;\n      }\n      return c.join(\"\");\n    }\n    for (b = \"\"; 10240 < a.length;) b += String.fromCharCode.apply(null, a.subarray(0, 10240)), a = a.subarray(10240);\n    b += String.fromCharCode.apply(null, a);\n    return btoa(b);\n  }\n  var La = RegExp(\"[-_.]\", \"g\");\n  function Ma(a) {\n    switch (a) {\n      case \"-\":\n        return \"+\";\n      case \"_\":\n        return \"/\";\n      case \".\":\n        return \"=\";\n      default:\n        return \"\";\n    }\n  }\n  function Na(a) {\n    if (!Ja) return Fa(a);\n    La.test(a) && (a = a.replace(La, Ma));\n    a = atob(a);\n    for (var b = new Uint8Array(a.length), c = 0; c < a.length; c++) b[c] = a.charCodeAt(c);\n    return b;\n  }\n  var Oa;\n  function Pa() {\n    return Oa || (Oa = new Uint8Array(0));\n  }\n  var Qa = {};\n  var Ra = \"function\" === typeof Uint8Array.prototype.slice,\n    G = 0,\n    H = 0;\n  function Sa(a) {\n    var b = 0 > a;\n    a = Math.abs(a);\n    var c = a >>> 0;\n    a = Math.floor((a - c) / 4294967296);\n    b && (c = A(Ta(c, a)), b = c.next().value, a = c.next().value, c = b);\n    G = c >>> 0;\n    H = a >>> 0;\n  }\n  var Ua = \"function\" === typeof BigInt;\n  function Ta(a, b) {\n    b = ~b;\n    a ? a = ~a + 1 : b += 1;\n    return [a, b];\n  }\n  function Va(a, b) {\n    this.i = a >>> 0;\n    this.h = b >>> 0;\n  }\n  function Wa(a) {\n    if (!a) return Xa || (Xa = new Va(0, 0));\n    if (!/^-?\\d+$/.test(a)) return null;\n    if (16 > a.length) Sa(Number(a));else if (Ua) a = BigInt(a), G = Number(a & BigInt(4294967295)) >>> 0, H = Number(a >> BigInt(32) & BigInt(4294967295));else {\n      var b = +(\"-\" === a[0]);\n      H = G = 0;\n      for (var c = a.length, d = b, e = (c - b) % 6 + b; e <= c; d = e, e += 6) d = Number(a.slice(d, e)), H *= 1E6, G = 1E6 * G + d, 4294967296 <= G && (H += G / 4294967296 | 0, G %= 4294967296);\n      b && (b = A(Ta(G, H)), a = b.next().value, b = b.next().value, G = a, H = b);\n    }\n    return new Va(G, H);\n  }\n  var Xa;\n  function Ya(a, b) {\n    return Error(\"Invalid wire type: \" + a + \" (at position \" + b + \")\");\n  }\n  function Za() {\n    return Error(\"Failed to read varint, encoding is invalid.\");\n  }\n  function $a(a, b) {\n    return Error(\"Tried to read past the end of the data \" + b + \" > \" + a);\n  }\n  function K() {\n    throw Error(\"Invalid UTF8\");\n  }\n  function ab(a, b) {\n    b = String.fromCharCode.apply(null, b);\n    return null == a ? b : a + b;\n  }\n  var bb = void 0,\n    cb,\n    db = \"undefined\" !== typeof TextDecoder,\n    eb,\n    fb = \"undefined\" !== typeof TextEncoder;\n  var gb;\n  function hb(a) {\n    if (a !== Qa) throw Error(\"illegal external caller\");\n  }\n  function ib(a, b) {\n    hb(b);\n    this.V = a;\n    if (null != a && 0 === a.length) throw Error(\"ByteString should be constructed with non-empty values\");\n  }\n  function jb() {\n    return gb || (gb = new ib(null, Qa));\n  }\n  function kb(a) {\n    hb(Qa);\n    var b = a.V;\n    b = null == b || Ia && null != b && b instanceof Uint8Array ? b : \"string\" === typeof b ? Na(b) : null;\n    return null == b ? b : a.V = b;\n  }\n  function lb(a) {\n    if (\"string\" === typeof a) return {\n      buffer: Na(a),\n      C: !1\n    };\n    if (Array.isArray(a)) return {\n      buffer: new Uint8Array(a),\n      C: !1\n    };\n    if (a.constructor === Uint8Array) return {\n      buffer: a,\n      C: !1\n    };\n    if (a.constructor === ArrayBuffer) return {\n      buffer: new Uint8Array(a),\n      C: !1\n    };\n    if (a.constructor === ib) return {\n      buffer: kb(a) || Pa(),\n      C: !0\n    };\n    if (a instanceof Uint8Array) return {\n      buffer: new Uint8Array(a.buffer, a.byteOffset, a.byteLength),\n      C: !1\n    };\n    throw Error(\"Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers\");\n  }\n  function mb(a, b) {\n    this.i = null;\n    this.m = !1;\n    this.h = this.j = this.l = 0;\n    nb(this, a, b);\n  }\n  function nb(a, b, c) {\n    c = void 0 === c ? {} : c;\n    a.S = void 0 === c.S ? !1 : c.S;\n    b && (b = lb(b), a.i = b.buffer, a.m = b.C, a.l = 0, a.j = a.i.length, a.h = a.l);\n  }\n  mb.prototype.reset = function () {\n    this.h = this.l;\n  };\n  function L(a, b) {\n    a.h = b;\n    if (b > a.j) throw $a(a.j, b);\n  }\n  function ob(a) {\n    var b = a.i,\n      c = a.h,\n      d = b[c++],\n      e = d & 127;\n    if (d & 128 && (d = b[c++], e |= (d & 127) << 7, d & 128 && (d = b[c++], e |= (d & 127) << 14, d & 128 && (d = b[c++], e |= (d & 127) << 21, d & 128 && (d = b[c++], e |= d << 28, d & 128 && b[c++] & 128 && b[c++] & 128 && b[c++] & 128 && b[c++] & 128 && b[c++] & 128))))) throw Za();\n    L(a, c);\n    return e;\n  }\n  function pb(a, b) {\n    if (0 > b) throw Error(\"Tried to read a negative byte length: \" + b);\n    var c = a.h,\n      d = c + b;\n    if (d > a.j) throw $a(b, a.j - c);\n    a.h = d;\n    return c;\n  }\n  var qb = [];\n  function rb() {\n    this.h = [];\n  }\n  rb.prototype.length = function () {\n    return this.h.length;\n  };\n  rb.prototype.end = function () {\n    var a = this.h;\n    this.h = [];\n    return a;\n  };\n  function sb(a, b, c) {\n    for (; 0 < c || 127 < b;) a.h.push(b & 127 | 128), b = (b >>> 7 | c << 25) >>> 0, c >>>= 7;\n    a.h.push(b);\n  }\n  function M(a, b) {\n    for (; 127 < b;) a.h.push(b & 127 | 128), b >>>= 7;\n    a.h.push(b);\n  }\n  function tb(a, b) {\n    if (qb.length) {\n      var c = qb.pop();\n      nb(c, a, b);\n      a = c;\n    } else a = new mb(a, b);\n    this.h = a;\n    this.j = this.h.h;\n    this.i = this.l = -1;\n    this.setOptions(b);\n  }\n  tb.prototype.setOptions = function (a) {\n    a = void 0 === a ? {} : a;\n    this.ca = void 0 === a.ca ? !1 : a.ca;\n  };\n  tb.prototype.reset = function () {\n    this.h.reset();\n    this.j = this.h.h;\n    this.i = this.l = -1;\n  };\n  function ub(a) {\n    var b = a.h;\n    if (b.h == b.j) return !1;\n    a.j = a.h.h;\n    var c = ob(a.h) >>> 0;\n    b = c >>> 3;\n    c &= 7;\n    if (!(0 <= c && 5 >= c)) throw Ya(c, a.j);\n    if (1 > b) throw Error(\"Invalid field number: \" + b + \" (at position \" + a.j + \")\");\n    a.l = b;\n    a.i = c;\n    return !0;\n  }\n  function vb(a) {\n    switch (a.i) {\n      case 0:\n        if (0 != a.i) vb(a);else a: {\n          a = a.h;\n          for (var b = a.h, c = b + 10, d = a.i; b < c;) if (0 === (d[b++] & 128)) {\n            L(a, b);\n            break a;\n          }\n          throw Za();\n        }\n        break;\n      case 1:\n        a = a.h;\n        L(a, a.h + 8);\n        break;\n      case 2:\n        2 != a.i ? vb(a) : (b = ob(a.h) >>> 0, a = a.h, L(a, a.h + b));\n        break;\n      case 5:\n        a = a.h;\n        L(a, a.h + 4);\n        break;\n      case 3:\n        b = a.l;\n        do {\n          if (!ub(a)) throw Error(\"Unmatched start-group tag: stream EOF\");\n          if (4 == a.i) {\n            if (a.l != b) throw Error(\"Unmatched end-group tag\");\n            break;\n          }\n          vb(a);\n        } while (1);\n        break;\n      default:\n        throw Ya(a.i, a.j);\n    }\n  }\n  var wb = [];\n  function xb() {\n    this.j = [];\n    this.i = 0;\n    this.h = new rb();\n  }\n  function N(a, b) {\n    0 !== b.length && (a.j.push(b), a.i += b.length);\n  }\n  function yb(a, b) {\n    if (b = b.R) {\n      N(a, a.h.end());\n      for (var c = 0; c < b.length; c++) N(a, kb(b[c]) || Pa());\n    }\n  }\n  var O = \"function\" === typeof Symbol && \"symbol\" === typeof Symbol() ? Symbol() : void 0;\n  function P(a, b) {\n    if (O) return a[O] |= b;\n    if (void 0 !== a.A) return a.A |= b;\n    Object.defineProperties(a, {\n      A: {\n        value: b,\n        configurable: !0,\n        writable: !0,\n        enumerable: !1\n      }\n    });\n    return b;\n  }\n  function zb(a, b) {\n    O ? a[O] && (a[O] &= ~b) : void 0 !== a.A && (a.A &= ~b);\n  }\n  function Q(a) {\n    var b;\n    O ? b = a[O] : b = a.A;\n    return null == b ? 0 : b;\n  }\n  function R(a, b) {\n    O ? a[O] = b : void 0 !== a.A ? a.A = b : Object.defineProperties(a, {\n      A: {\n        value: b,\n        configurable: !0,\n        writable: !0,\n        enumerable: !1\n      }\n    });\n  }\n  function Ab(a) {\n    P(a, 1);\n    return a;\n  }\n  function Bb(a, b) {\n    R(b, (a | 0) & -51);\n  }\n  function Cb(a, b) {\n    R(b, (a | 18) & -41);\n  }\n  var Db = {};\n  function Eb(a) {\n    return null !== a && \"object\" === typeof a && !Array.isArray(a) && a.constructor === Object;\n  }\n  var Fb,\n    Gb = [];\n  R(Gb, 23);\n  Fb = Object.freeze(Gb);\n  function Hb(a) {\n    if (Q(a.o) & 2) throw Error(\"Cannot mutate an immutable Message\");\n  }\n  function Ib(a) {\n    var b = a.length;\n    (b = b ? a[b - 1] : void 0) && Eb(b) ? b.g = 1 : (b = {}, a.push((b.g = 1, b)));\n  }\n  function Jb(a) {\n    var b = a.i + a.G;\n    return a.B || (a.B = a.o[b] = {});\n  }\n  function S(a, b) {\n    return -1 === b ? null : b >= a.i ? a.B ? a.B[b] : void 0 : a.o[b + a.G];\n  }\n  function U(a, b, c, d) {\n    Hb(a);\n    Kb(a, b, c, d);\n  }\n  function Kb(a, b, c, d) {\n    a.j && (a.j = void 0);\n    b >= a.i || d ? Jb(a)[b] = c : (a.o[b + a.G] = c, (a = a.B) && b in a && delete a[b]);\n  }\n  function Lb(a, b, c, d) {\n    var e = S(a, b);\n    Array.isArray(e) || (e = Fb);\n    var g = Q(e);\n    g & 1 || Ab(e);\n    if (d) g & 2 || P(e, 2), c & 1 || Object.freeze(e);else {\n      d = !(c & 2);\n      var f = g & 2;\n      c & 1 || !f ? d && g & 16 && !f && zb(e, 16) : (e = Ab(Array.prototype.slice.call(e)), Kb(a, b, e));\n    }\n    return e;\n  }\n  function Mb(a, b) {\n    var c = S(a, b);\n    var d = null == c ? c : \"number\" === typeof c || \"NaN\" === c || \"Infinity\" === c || \"-Infinity\" === c ? Number(c) : void 0;\n    null != d && d !== c && Kb(a, b, d);\n    return d;\n  }\n  function Nb(a, b, c, d, e) {\n    a.h || (a.h = {});\n    var g = a.h[c],\n      f = Lb(a, c, 3, e);\n    if (!g) {\n      var h = f;\n      g = [];\n      var k = !!(Q(a.o) & 16);\n      f = !!(Q(h) & 2);\n      var l = h;\n      !e && f && (h = Array.prototype.slice.call(h));\n      for (var m = f, r = 0; r < h.length; r++) {\n        var p = h[r];\n        var n = b,\n          q = !1;\n        q = void 0 === q ? !1 : q;\n        p = Array.isArray(p) ? new n(p) : q ? new n() : void 0;\n        if (void 0 !== p) {\n          n = p.o;\n          var t = q = Q(n);\n          f && (t |= 2);\n          k && (t |= 16);\n          t != q && R(n, t);\n          n = t;\n          m = m || !!(2 & n);\n          g.push(p);\n        }\n      }\n      a.h[c] = g;\n      k = Q(h);\n      b = k | 33;\n      b = m ? b & -9 : b | 8;\n      k != b && (m = h, Object.isFrozen(m) && (m = Array.prototype.slice.call(m)), R(m, b), h = m);\n      l !== h && Kb(a, c, h);\n      (e || d && f) && P(g, 2);\n      d && Object.freeze(g);\n      return g;\n    }\n    e || (e = Object.isFrozen(g), d && !e ? Object.freeze(g) : !d && e && (g = Array.prototype.slice.call(g), a.h[c] = g));\n    return g;\n  }\n  function Ob(a, b, c) {\n    var d = !!(Q(a.o) & 2);\n    b = Nb(a, b, c, d, d);\n    a = Lb(a, c, 3, d);\n    if (!(d || Q(a) & 8)) {\n      for (d = 0; d < b.length; d++) {\n        c = b[d];\n        if (Q(c.o) & 2) {\n          var e = Pb(c, !1);\n          e.j = c;\n        } else e = c;\n        c !== e && (b[d] = e, a[d] = e.o);\n      }\n      P(a, 8);\n    }\n    return b;\n  }\n  function V(a, b, c) {\n    if (null != c && \"number\" !== typeof c) throw Error(\"Value of float/double field must be a number|null|undefined, found \" + typeof c + \": \" + c);\n    U(a, b, c);\n  }\n  function Qb(a, b, c, d, e) {\n    Hb(a);\n    var g = Nb(a, c, b, !1, !1);\n    c = null != d ? d : new c();\n    a = Lb(a, b, 2, !1);\n    void 0 != e ? (g.splice(e, 0, c), a.splice(e, 0, c.o)) : (g.push(c), a.push(c.o));\n    c.C() && zb(a, 8);\n    return c;\n  }\n  function Rb(a, b) {\n    return null == a ? b : a;\n  }\n  function W(a, b, c) {\n    c = void 0 === c ? 0 : c;\n    return Rb(Mb(a, b), c);\n  }\n  var Sb;\n  function Tb(a) {\n    switch (typeof a) {\n      case \"number\":\n        return isFinite(a) ? a : String(a);\n      case \"object\":\n        if (a) if (Array.isArray(a)) {\n          if (0 !== (Q(a) & 128)) return a = Array.prototype.slice.call(a), Ib(a), a;\n        } else {\n          if (Ia && null != a && a instanceof Uint8Array) return Ka(a);\n          if (a instanceof ib) {\n            var b = a.V;\n            return null == b ? \"\" : \"string\" === typeof b ? b : a.V = Ka(b);\n          }\n        }\n    }\n    return a;\n  }\n  function Ub(a, b, c, d) {\n    if (null != a) {\n      if (Array.isArray(a)) a = Vb(a, b, c, void 0 !== d);else if (Eb(a)) {\n        var e = {},\n          g;\n        for (g in a) e[g] = Ub(a[g], b, c, d);\n        a = e;\n      } else a = b(a, d);\n      return a;\n    }\n  }\n  function Vb(a, b, c, d) {\n    var e = Q(a);\n    d = d ? !!(e & 16) : void 0;\n    a = Array.prototype.slice.call(a);\n    for (var g = 0; g < a.length; g++) a[g] = Ub(a[g], b, c, d);\n    c(e, a);\n    return a;\n  }\n  function Wb(a) {\n    return a.ja === Db ? a.toJSON() : Tb(a);\n  }\n  function Xb(a, b) {\n    a & 128 && Ib(b);\n  }\n  function Yb(a, b, c) {\n    c = void 0 === c ? Cb : c;\n    if (null != a) {\n      if (Ia && a instanceof Uint8Array) return a.length ? new ib(new Uint8Array(a), Qa) : jb();\n      if (Array.isArray(a)) {\n        var d = Q(a);\n        if (d & 2) return a;\n        if (b && !(d & 32) && (d & 16 || 0 === d)) return R(a, d | 2), a;\n        a = Vb(a, Yb, d & 4 ? Cb : c, !0);\n        b = Q(a);\n        b & 4 && b & 2 && Object.freeze(a);\n        return a;\n      }\n      return a.ja === Db ? Zb(a) : a;\n    }\n  }\n  function $b(a, b, c, d, e, g, f) {\n    if (a = a.h && a.h[c]) {\n      d = Q(a);\n      d & 2 ? d = a : (g = Ca(a, Zb), Cb(d, g), Object.freeze(g), d = g);\n      Hb(b);\n      f = null == d ? Fb : Ab([]);\n      if (null != d) {\n        g = !!d.length;\n        for (a = 0; a < d.length; a++) {\n          var h = d[a];\n          g = g && !(Q(h.o) & 2);\n          f[a] = h.o;\n        }\n        g = (g ? 8 : 0) | 1;\n        a = Q(f);\n        (a & g) !== g && (Object.isFrozen(f) && (f = Array.prototype.slice.call(f)), R(f, a | g));\n        b.h || (b.h = {});\n        b.h[c] = d;\n      } else b.h && (b.h[c] = void 0);\n      Kb(b, c, f, e);\n    } else U(b, c, Yb(d, g, f), e);\n  }\n  function Zb(a) {\n    if (Q(a.o) & 2) return a;\n    a = Pb(a, !0);\n    P(a.o, 2);\n    return a;\n  }\n  function Pb(a, b) {\n    var c = a.o,\n      d = [];\n    P(d, 16);\n    var e = a.constructor.h;\n    e && d.push(e);\n    e = a.B;\n    if (e) {\n      d.length = c.length;\n      d.fill(void 0, d.length, c.length);\n      var g = {};\n      d[d.length - 1] = g;\n    }\n    0 !== (Q(c) & 128) && Ib(d);\n    b = b || a.C() ? Cb : Bb;\n    g = a.constructor;\n    Sb = d;\n    d = new g(d);\n    Sb = void 0;\n    a.R && (d.R = a.R.slice());\n    g = !!(Q(c) & 16);\n    for (var f = e ? c.length - 1 : c.length, h = 0; h < f; h++) $b(a, d, h - a.G, c[h], !1, g, b);\n    if (e) for (var k in e) $b(a, d, +k, e[k], !0, g, b);\n    return d;\n  }\n  function X(a, b, c) {\n    null == a && (a = Sb);\n    Sb = void 0;\n    var d = this.constructor.i || 0,\n      e = 0 < d,\n      g = this.constructor.h,\n      f = !1;\n    if (null == a) {\n      a = g ? [g] : [];\n      var h = 48;\n      var k = !0;\n      e && (d = 0, h |= 128);\n      R(a, h);\n    } else {\n      if (!Array.isArray(a)) throw Error();\n      if (g && g !== a[0]) throw Error();\n      var l = h = P(a, 0);\n      if (k = 0 !== (16 & l)) (f = 0 !== (32 & l)) || (l |= 32);\n      if (e) {\n        if (128 & l) d = 0;else {\n          if (0 < a.length) {\n            var m = a[a.length - 1];\n            if (Eb(m) && \"g\" in m) {\n              d = 0;\n              l |= 128;\n              delete m.g;\n              var r = !0,\n                p;\n              for (p in m) {\n                r = !1;\n                break;\n              }\n              r && a.pop();\n            }\n          }\n        }\n      } else if (128 & l) throw Error();\n      h !== l && R(a, l);\n    }\n    this.G = (g ? 0 : -1) - d;\n    this.h = void 0;\n    this.o = a;\n    a: {\n      g = this.o.length;\n      d = g - 1;\n      if (g && (g = this.o[d], Eb(g))) {\n        this.B = g;\n        this.i = d - this.G;\n        break a;\n      }\n      void 0 !== b && -1 < b ? (this.i = Math.max(b, d + 1 - this.G), this.B = void 0) : this.i = Number.MAX_VALUE;\n    }\n    if (!e && this.B && \"g\" in this.B) throw Error('Unexpected \"g\" flag in sparse object of message that is not a group type.');\n    if (c) {\n      b = k && !f && !0;\n      e = this.i;\n      var n;\n      for (k = 0; k < c.length; k++) f = c[k], f < e ? (f += this.G, (d = a[f]) ? ac(d, b) : a[f] = Fb) : (n || (n = Jb(this)), (d = n[f]) ? ac(d, b) : n[f] = Fb);\n    }\n  }\n  X.prototype.toJSON = function () {\n    return Vb(this.o, Wb, Xb);\n  };\n  X.prototype.C = function () {\n    return !!(Q(this.o) & 2);\n  };\n  function ac(a, b) {\n    if (Array.isArray(a)) {\n      var c = Q(a),\n        d = 1;\n      !b || c & 2 || (d |= 16);\n      (c & d) !== d && R(a, c | d);\n    }\n  }\n  X.prototype.ja = Db;\n  X.prototype.toString = function () {\n    return this.o.toString();\n  };\n  function bc(a, b, c) {\n    if (c) {\n      var d = {},\n        e;\n      for (e in c) {\n        var g = c[e],\n          f = g.ra;\n        f || (d.J = g.xa || g.oa.W, g.ia ? (d.aa = cc(g.ia), f = function (h) {\n          return function (k, l, m) {\n            return h.J(k, l, m, h.aa);\n          };\n        }(d)) : g.ka ? (d.Z = dc(g.da.P, g.ka), f = function (h) {\n          return function (k, l, m) {\n            return h.J(k, l, m, h.Z);\n          };\n        }(d)) : f = d.J, g.ra = f);\n        f(b, a, g.da);\n        d = {\n          J: d.J,\n          aa: d.aa,\n          Z: d.Z\n        };\n      }\n    }\n    yb(b, a);\n  }\n  var ec = Symbol();\n  function fc(a, b, c) {\n    return a[ec] || (a[ec] = function (d, e) {\n      return b(d, e, c);\n    });\n  }\n  function gc(a) {\n    var b = a[ec];\n    if (!b) {\n      var c = hc(a);\n      b = function (d, e) {\n        return ic(d, e, c);\n      };\n      a[ec] = b;\n    }\n    return b;\n  }\n  function jc(a) {\n    var b = a.ia;\n    if (b) return gc(b);\n    if (b = a.wa) return fc(a.da.P, b, a.ka);\n  }\n  function kc(a) {\n    var b = jc(a),\n      c = a.da,\n      d = a.oa.U;\n    return b ? function (e, g) {\n      return d(e, g, c, b);\n    } : function (e, g) {\n      return d(e, g, c);\n    };\n  }\n  function lc(a, b) {\n    var c = a[b];\n    \"function\" == typeof c && 0 === c.length && (c = c(), a[b] = c);\n    return Array.isArray(c) && (mc in c || nc in c || 0 < c.length && \"function\" == typeof c[0]) ? c : void 0;\n  }\n  function oc(a, b, c, d, e, g) {\n    b.P = a[0];\n    var f = 1;\n    if (a.length > f && \"number\" !== typeof a[f]) {\n      var h = a[f++];\n      c(b, h);\n    }\n    for (; f < a.length;) {\n      c = a[f++];\n      for (var k = f + 1; k < a.length && \"number\" !== typeof a[k];) k++;\n      h = a[f++];\n      k -= f;\n      switch (k) {\n        case 0:\n          d(b, c, h);\n          break;\n        case 1:\n          (k = lc(a, f)) ? (f++, e(b, c, h, k)) : d(b, c, h, a[f++]);\n          break;\n        case 2:\n          k = f++;\n          k = lc(a, k);\n          e(b, c, h, k, a[f++]);\n          break;\n        case 3:\n          g(b, c, h, a[f++], a[f++], a[f++]);\n          break;\n        case 4:\n          g(b, c, h, a[f++], a[f++], a[f++], a[f++]);\n          break;\n        default:\n          throw Error(\"unexpected number of binary field arguments: \" + k);\n      }\n    }\n    return b;\n  }\n  var pc = Symbol();\n  function cc(a) {\n    var b = a[pc];\n    if (!b) {\n      var c = qc(a);\n      b = function (d, e) {\n        return rc(d, e, c);\n      };\n      a[pc] = b;\n    }\n    return b;\n  }\n  function dc(a, b) {\n    var c = a[pc];\n    c || (c = function (d, e) {\n      return bc(d, e, b);\n    }, a[pc] = c);\n    return c;\n  }\n  var nc = Symbol();\n  function sc(a, b) {\n    a.push(b);\n  }\n  function tc(a, b, c) {\n    a.push(b, c.W);\n  }\n  function uc(a, b, c, d) {\n    var e = cc(d),\n      g = qc(d).P,\n      f = c.W;\n    a.push(b, function (h, k, l) {\n      return f(h, k, l, g, e);\n    });\n  }\n  function vc(a, b, c, d, e, g) {\n    var f = dc(d, g),\n      h = c.W;\n    a.push(b, function (k, l, m) {\n      return h(k, l, m, d, f);\n    });\n  }\n  function qc(a) {\n    var b = a[nc];\n    if (b) return b;\n    b = oc(a, a[nc] = [], sc, tc, uc, vc);\n    mc in a && nc in a && (a.length = 0);\n    return b;\n  }\n  var mc = Symbol();\n  function wc(a, b) {\n    a[0] = b;\n  }\n  function xc(a, b, c, d) {\n    var e = c.U;\n    a[b] = d ? function (g, f, h) {\n      return e(g, f, h, d);\n    } : e;\n  }\n  function yc(a, b, c, d, e) {\n    var g = c.U,\n      f = gc(d),\n      h = hc(d).P;\n    a[b] = function (k, l, m) {\n      return g(k, l, m, h, f, e);\n    };\n  }\n  function zc(a, b, c, d, e, g, f) {\n    var h = c.U,\n      k = fc(d, e, g);\n    a[b] = function (l, m, r) {\n      return h(l, m, r, d, k, f);\n    };\n  }\n  function hc(a) {\n    var b = a[mc];\n    if (b) return b;\n    b = oc(a, a[mc] = {}, wc, xc, yc, zc);\n    mc in a && nc in a && (a.length = 0);\n    return b;\n  }\n  function ic(a, b, c) {\n    for (; ub(b) && 4 != b.i;) {\n      var d = b.l,\n        e = c[d];\n      if (!e) {\n        var g = c[0];\n        g && (g = g[d]) && (e = c[d] = kc(g));\n      }\n      if (!e || !e(b, a, d)) {\n        e = b;\n        d = a;\n        g = e.j;\n        vb(e);\n        var f = e;\n        if (!f.ca) {\n          e = f.h.h - g;\n          f.h.h = g;\n          f = f.h;\n          if (0 == e) e = jb();else {\n            g = pb(f, e);\n            if (f.S && f.m) e = f.i.subarray(g, g + e);else {\n              f = f.i;\n              var h = g;\n              e = g + e;\n              e = h === e ? Pa() : Ra ? f.slice(h, e) : new Uint8Array(f.subarray(h, e));\n            }\n            e = 0 == e.length ? jb() : new ib(e, Qa);\n          }\n          (g = d.R) ? g.push(e) : d.R = [e];\n        }\n      }\n    }\n    return a;\n  }\n  function rc(a, b, c) {\n    for (var d = c.length, e = 1 == d % 2, g = e ? 1 : 0; g < d; g += 2) (0, c[g + 1])(b, a, c[g]);\n    bc(a, b, e ? c[0] : void 0);\n  }\n  function Ac(a, b) {\n    return {\n      U: a,\n      W: b\n    };\n  }\n  var Y = Ac(function (a, b, c) {\n      if (5 !== a.i) return !1;\n      a = a.h;\n      var d = a.i,\n        e = a.h,\n        g = d[e];\n      var f = d[e + 1];\n      var h = d[e + 2];\n      d = d[e + 3];\n      L(a, a.h + 4);\n      f = (g << 0 | f << 8 | h << 16 | d << 24) >>> 0;\n      a = 2 * (f >> 31) + 1;\n      g = f >>> 23 & 255;\n      f &= 8388607;\n      U(b, c, 255 == g ? f ? NaN : Infinity * a : 0 == g ? a * Math.pow(2, -149) * f : a * Math.pow(2, g - 150) * (f + Math.pow(2, 23)));\n      return !0;\n    }, function (a, b, c) {\n      b = Mb(b, c);\n      if (null != b) {\n        M(a.h, 8 * c + 5);\n        a = a.h;\n        var d = +b;\n        0 === d ? 0 < 1 / d ? G = H = 0 : (H = 0, G = 2147483648) : isNaN(d) ? (H = 0, G = 2147483647) : (d = (c = 0 > d ? -2147483648 : 0) ? -d : d, 3.4028234663852886E38 < d ? (H = 0, G = (c | 2139095040) >>> 0) : 1.1754943508222875E-38 > d ? (d = Math.round(d / Math.pow(2, -149)), H = 0, G = (c | d) >>> 0) : (b = Math.floor(Math.log(d) / Math.LN2), d *= Math.pow(2, -b), d = Math.round(8388608 * d), 16777216 <= d && ++b, H = 0, G = (c | b + 127 << 23 | d & 8388607) >>> 0));\n        c = G;\n        a.h.push(c >>> 0 & 255);\n        a.h.push(c >>> 8 & 255);\n        a.h.push(c >>> 16 & 255);\n        a.h.push(c >>> 24 & 255);\n      }\n    }),\n    Bc = Ac(function (a, b, c) {\n      if (0 !== a.i) return !1;\n      var d = a.h,\n        e = 0,\n        g = a = 0,\n        f = d.i,\n        h = d.h;\n      do {\n        var k = f[h++];\n        e |= (k & 127) << g;\n        g += 7;\n      } while (32 > g && k & 128);\n      32 < g && (a |= (k & 127) >> 4);\n      for (g = 3; 32 > g && k & 128; g += 7) k = f[h++], a |= (k & 127) << g;\n      L(d, h);\n      if (128 > k) {\n        d = e >>> 0;\n        k = a >>> 0;\n        if (a = k & 2147483648) d = ~d + 1 >>> 0, k = ~k >>> 0, 0 == d && (k = k + 1 >>> 0);\n        d = 4294967296 * k + (d >>> 0);\n      } else throw Za();\n      U(b, c, a ? -d : d);\n      return !0;\n    }, function (a, b, c) {\n      b = S(b, c);\n      null != b && (\"string\" === typeof b && Wa(b), null != b && (M(a.h, 8 * c), \"number\" === typeof b ? (a = a.h, Sa(b), sb(a, G, H)) : (c = Wa(b), sb(a.h, c.i, c.h))));\n    }),\n    Cc = Ac(function (a, b, c) {\n      if (0 !== a.i) return !1;\n      U(b, c, ob(a.h));\n      return !0;\n    }, function (a, b, c) {\n      b = S(b, c);\n      if (null != b && null != b) if (M(a.h, 8 * c), a = a.h, c = b, 0 <= c) M(a, c);else {\n        for (b = 0; 9 > b; b++) a.h.push(c & 127 | 128), c >>= 7;\n        a.h.push(1);\n      }\n    }),\n    Dc = Ac(function (a, b, c) {\n      if (2 !== a.i) return !1;\n      var d = ob(a.h) >>> 0;\n      a = a.h;\n      var e = pb(a, d);\n      a = a.i;\n      if (db) {\n        var g = a,\n          f;\n        (f = cb) || (f = cb = new TextDecoder(\"utf-8\", {\n          fatal: !0\n        }));\n        a = e + d;\n        g = 0 === e && a === g.length ? g : g.subarray(e, a);\n        try {\n          var h = f.decode(g);\n        } catch (r) {\n          if (void 0 === bb) {\n            try {\n              f.decode(new Uint8Array([128]));\n            } catch (p) {}\n            try {\n              f.decode(new Uint8Array([97])), bb = !0;\n            } catch (p) {\n              bb = !1;\n            }\n          }\n          !bb && (cb = void 0);\n          throw r;\n        }\n      } else {\n        h = e;\n        d = h + d;\n        e = [];\n        for (var k = null, l, m; h < d;) l = a[h++], 128 > l ? e.push(l) : 224 > l ? h >= d ? K() : (m = a[h++], 194 > l || 128 !== (m & 192) ? (h--, K()) : e.push((l & 31) << 6 | m & 63)) : 240 > l ? h >= d - 1 ? K() : (m = a[h++], 128 !== (m & 192) || 224 === l && 160 > m || 237 === l && 160 <= m || 128 !== ((g = a[h++]) & 192) ? (h--, K()) : e.push((l & 15) << 12 | (m & 63) << 6 | g & 63)) : 244 >= l ? h >= d - 2 ? K() : (m = a[h++], 128 !== (m & 192) || 0 !== (l << 28) + (m - 144) >> 30 || 128 !== ((g = a[h++]) & 192) || 128 !== ((f = a[h++]) & 192) ? (h--, K()) : (l = (l & 7) << 18 | (m & 63) << 12 | (g & 63) << 6 | f & 63, l -= 65536, e.push((l >> 10 & 1023) + 55296, (l & 1023) + 56320))) : K(), 8192 <= e.length && (k = ab(k, e), e.length = 0);\n        h = ab(k, e);\n      }\n      U(b, c, h);\n      return !0;\n    }, function (a, b, c) {\n      b = S(b, c);\n      if (null != b) {\n        var d = !1;\n        d = void 0 === d ? !1 : d;\n        if (fb) {\n          if (d && /(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])/.test(b)) throw Error(\"Found an unpaired surrogate\");\n          b = (eb || (eb = new TextEncoder())).encode(b);\n        } else {\n          for (var e = 0, g = new Uint8Array(3 * b.length), f = 0; f < b.length; f++) {\n            var h = b.charCodeAt(f);\n            if (128 > h) g[e++] = h;else {\n              if (2048 > h) g[e++] = h >> 6 | 192;else {\n                if (55296 <= h && 57343 >= h) {\n                  if (56319 >= h && f < b.length) {\n                    var k = b.charCodeAt(++f);\n                    if (56320 <= k && 57343 >= k) {\n                      h = 1024 * (h - 55296) + k - 56320 + 65536;\n                      g[e++] = h >> 18 | 240;\n                      g[e++] = h >> 12 & 63 | 128;\n                      g[e++] = h >> 6 & 63 | 128;\n                      g[e++] = h & 63 | 128;\n                      continue;\n                    } else f--;\n                  }\n                  if (d) throw Error(\"Found an unpaired surrogate\");\n                  h = 65533;\n                }\n                g[e++] = h >> 12 | 224;\n                g[e++] = h >> 6 & 63 | 128;\n              }\n              g[e++] = h & 63 | 128;\n            }\n          }\n          b = e === g.length ? g : g.subarray(0, e);\n        }\n        M(a.h, 8 * c + 2);\n        M(a.h, b.length);\n        N(a, a.h.end());\n        N(a, b);\n      }\n    }),\n    Ec = Ac(function (a, b, c, d, e) {\n      if (2 !== a.i) return !1;\n      b = Qb(b, c, d);\n      c = a.h.j;\n      d = ob(a.h) >>> 0;\n      var g = a.h.h + d,\n        f = g - c;\n      0 >= f && (a.h.j = g, e(b, a, void 0, void 0, void 0), f = g - a.h.h);\n      if (f) throw Error(\"Message parsing ended unexpectedly. Expected to read \" + (d + \" bytes, instead read \" + (d - f) + \" bytes, either the data ended unexpectedly or the message misreported its own length\"));\n      a.h.h = g;\n      a.h.j = c;\n      return !0;\n    }, function (a, b, c, d, e) {\n      b = Ob(b, d, c);\n      if (null != b) for (d = 0; d < b.length; d++) {\n        var g = a;\n        M(g.h, 8 * c + 2);\n        var f = g.h.end();\n        N(g, f);\n        f.push(g.i);\n        g = f;\n        e(b[d], a);\n        f = a;\n        var h = g.pop();\n        for (h = f.i + f.h.length() - h; 127 < h;) g.push(h & 127 | 128), h >>>= 7, f.i++;\n        g.push(h);\n        f.i++;\n      }\n    });\n  function Fc(a) {\n    return function (b, c) {\n      a: {\n        if (wb.length) {\n          var d = wb.pop();\n          d.setOptions(c);\n          nb(d.h, b, c);\n          b = d;\n        } else b = new tb(b, c);\n        try {\n          var e = hc(a);\n          var g = ic(new e.P(), b, e);\n          break a;\n        } finally {\n          e = b.h, e.i = null, e.m = !1, e.l = 0, e.j = 0, e.h = 0, e.S = !1, b.l = -1, b.i = -1, 100 > wb.length && wb.push(b);\n        }\n        g = void 0;\n      }\n      return g;\n    };\n  }\n  function Gc(a) {\n    return function () {\n      var b = new xb();\n      rc(this, b, qc(a));\n      N(b, b.h.end());\n      for (var c = new Uint8Array(b.i), d = b.j, e = d.length, g = 0, f = 0; f < e; f++) {\n        var h = d[f];\n        c.set(h, g);\n        g += h.length;\n      }\n      b.j = [c];\n      return c;\n    };\n  }\n  function Z(a) {\n    X.call(this, a);\n  }\n  na(Z, X);\n  var Hc = [Z, 1, Cc, 2, Y, 3, Dc, 4, Dc];\n  Z.prototype.l = Gc(Hc);\n  function Ic(a) {\n    X.call(this, a, -1, Jc);\n  }\n  na(Ic, X);\n  Ic.prototype.addClassification = function (a, b) {\n    Qb(this, 1, Z, a, b);\n    return this;\n  };\n  var Jc = [1],\n    Kc = Fc([Ic, 1, Ec, Hc]);\n  function Lc(a) {\n    X.call(this, a);\n  }\n  na(Lc, X);\n  var Mc = [Lc, 1, Y, 2, Y, 3, Y, 4, Y, 5, Y];\n  Lc.prototype.l = Gc(Mc);\n  function Nc(a) {\n    X.call(this, a, -1, Oc);\n  }\n  na(Nc, X);\n  var Oc = [1],\n    Pc = Fc([Nc, 1, Ec, Mc]);\n  function Qc(a) {\n    X.call(this, a);\n  }\n  na(Qc, X);\n  var Rc = [Qc, 1, Y, 2, Y, 3, Y, 4, Y, 5, Y, 6, Bc],\n    Sc = Fc(Rc);\n  Qc.prototype.l = Gc(Rc);\n  function Tc(a, b, c) {\n    c = a.createShader(0 === c ? a.VERTEX_SHADER : a.FRAGMENT_SHADER);\n    a.shaderSource(c, b);\n    a.compileShader(c);\n    if (!a.getShaderParameter(c, a.COMPILE_STATUS)) throw Error(\"Could not compile WebGL shader.\\n\\n\" + a.getShaderInfoLog(c));\n    return c;\n  }\n  function Uc(a) {\n    return Ob(a, Z, 1).map(function (b) {\n      var c = S(b, 1);\n      return {\n        index: null == c ? 0 : c,\n        qa: W(b, 2),\n        label: null != S(b, 3) ? Rb(S(b, 3), \"\") : void 0,\n        displayName: null != S(b, 4) ? Rb(S(b, 4), \"\") : void 0\n      };\n    });\n  }\n  function Vc(a) {\n    return {\n      x: W(a, 1),\n      y: W(a, 2),\n      z: W(a, 3),\n      visibility: null != Mb(a, 4) ? W(a, 4) : void 0\n    };\n  }\n  function Wc(a, b) {\n    this.i = a;\n    this.h = b;\n    this.m = 0;\n  }\n  function Xc(a, b, c) {\n    Yc(a, b);\n    if (\"function\" === typeof a.h.canvas.transferToImageBitmap) return Promise.resolve(a.h.canvas.transferToImageBitmap());\n    if (c) return Promise.resolve(a.h.canvas);\n    if (\"function\" === typeof createImageBitmap) return createImageBitmap(a.h.canvas);\n    void 0 === a.j && (a.j = document.createElement(\"canvas\"));\n    return new Promise(function (d) {\n      a.j.height = a.h.canvas.height;\n      a.j.width = a.h.canvas.width;\n      a.j.getContext(\"2d\", {}).drawImage(a.h.canvas, 0, 0, a.h.canvas.width, a.h.canvas.height);\n      d(a.j);\n    });\n  }\n  function Yc(a, b) {\n    var c = a.h;\n    if (void 0 === a.s) {\n      var d = Tc(c, \"\\n  attribute vec2 aVertex;\\n  attribute vec2 aTex;\\n  varying vec2 vTex;\\n  void main(void) {\\n    gl_Position = vec4(aVertex, 0.0, 1.0);\\n    vTex = aTex;\\n  }\", 0),\n        e = Tc(c, \"\\n  precision mediump float;\\n  varying vec2 vTex;\\n  uniform sampler2D sampler0;\\n  void main(){\\n    gl_FragColor = texture2D(sampler0, vTex);\\n  }\", 1),\n        g = c.createProgram();\n      c.attachShader(g, d);\n      c.attachShader(g, e);\n      c.linkProgram(g);\n      if (!c.getProgramParameter(g, c.LINK_STATUS)) throw Error(\"Could not compile WebGL program.\\n\\n\" + c.getProgramInfoLog(g));\n      d = a.s = g;\n      c.useProgram(d);\n      e = c.getUniformLocation(d, \"sampler0\");\n      a.l = {\n        O: c.getAttribLocation(d, \"aVertex\"),\n        N: c.getAttribLocation(d, \"aTex\"),\n        ya: e\n      };\n      a.v = c.createBuffer();\n      c.bindBuffer(c.ARRAY_BUFFER, a.v);\n      c.enableVertexAttribArray(a.l.O);\n      c.vertexAttribPointer(a.l.O, 2, c.FLOAT, !1, 0, 0);\n      c.bufferData(c.ARRAY_BUFFER, new Float32Array([-1, -1, -1, 1, 1, 1, 1, -1]), c.STATIC_DRAW);\n      c.bindBuffer(c.ARRAY_BUFFER, null);\n      a.u = c.createBuffer();\n      c.bindBuffer(c.ARRAY_BUFFER, a.u);\n      c.enableVertexAttribArray(a.l.N);\n      c.vertexAttribPointer(a.l.N, 2, c.FLOAT, !1, 0, 0);\n      c.bufferData(c.ARRAY_BUFFER, new Float32Array([0, 1, 0, 0, 1, 0, 1, 1]), c.STATIC_DRAW);\n      c.bindBuffer(c.ARRAY_BUFFER, null);\n      c.uniform1i(e, 0);\n    }\n    d = a.l;\n    c.useProgram(a.s);\n    c.canvas.width = b.width;\n    c.canvas.height = b.height;\n    c.viewport(0, 0, b.width, b.height);\n    c.activeTexture(c.TEXTURE0);\n    a.i.bindTexture2d(b.glName);\n    c.enableVertexAttribArray(d.O);\n    c.bindBuffer(c.ARRAY_BUFFER, a.v);\n    c.vertexAttribPointer(d.O, 2, c.FLOAT, !1, 0, 0);\n    c.enableVertexAttribArray(d.N);\n    c.bindBuffer(c.ARRAY_BUFFER, a.u);\n    c.vertexAttribPointer(d.N, 2, c.FLOAT, !1, 0, 0);\n    c.bindFramebuffer(c.DRAW_FRAMEBUFFER ? c.DRAW_FRAMEBUFFER : c.FRAMEBUFFER, null);\n    c.clearColor(0, 0, 0, 0);\n    c.clear(c.COLOR_BUFFER_BIT);\n    c.colorMask(!0, !0, !0, !0);\n    c.drawArrays(c.TRIANGLE_FAN, 0, 4);\n    c.disableVertexAttribArray(d.O);\n    c.disableVertexAttribArray(d.N);\n    c.bindBuffer(c.ARRAY_BUFFER, null);\n    a.i.bindTexture2d(0);\n  }\n  function Zc(a) {\n    this.h = a;\n  }\n  var $c = new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 4, 1, 96, 0, 0, 3, 2, 1, 0, 10, 9, 1, 7, 0, 65, 0, 253, 15, 26, 11]);\n  function ad(a, b) {\n    return b + a;\n  }\n  function bd(a, b) {\n    window[a] = b;\n  }\n  function cd(a) {\n    var b = document.createElement(\"script\");\n    b.setAttribute(\"src\", a);\n    b.setAttribute(\"crossorigin\", \"anonymous\");\n    return new Promise(function (c) {\n      b.addEventListener(\"load\", function () {\n        c();\n      }, !1);\n      b.addEventListener(\"error\", function () {\n        c();\n      }, !1);\n      document.body.appendChild(b);\n    });\n  }\n  function dd() {\n    return E(function (a) {\n      switch (a.h) {\n        case 1:\n          return a.s = 2, D(a, WebAssembly.instantiate($c), 4);\n        case 4:\n          a.h = 3;\n          a.s = 0;\n          break;\n        case 2:\n          return a.s = 0, a.l = null, a.return(!1);\n        case 3:\n          return a.return(!0);\n      }\n    });\n  }\n  function ed(a) {\n    this.h = a;\n    this.listeners = {};\n    this.l = {};\n    this.L = {};\n    this.s = {};\n    this.v = {};\n    this.M = this.u = this.ga = !0;\n    this.I = Promise.resolve();\n    this.fa = \"\";\n    this.D = {};\n    this.locateFile = a && a.locateFile || ad;\n    if (\"object\" === typeof window) var b = window.location.pathname.toString().substring(0, window.location.pathname.toString().lastIndexOf(\"/\")) + \"/\";else if (\"undefined\" !== typeof location) b = location.pathname.toString().substring(0, location.pathname.toString().lastIndexOf(\"/\")) + \"/\";else throw Error(\"solutions can only be loaded on a web page or in a web worker\");\n    this.ha = b;\n    if (a.options) {\n      b = A(Object.keys(a.options));\n      for (var c = b.next(); !c.done; c = b.next()) {\n        c = c.value;\n        var d = a.options[c].default;\n        void 0 !== d && (this.l[c] = \"function\" === typeof d ? d() : d);\n      }\n    }\n  }\n  x = ed.prototype;\n  x.close = function () {\n    this.j && this.j.delete();\n    return Promise.resolve();\n  };\n  function fd(a) {\n    var b, c, d, e, g, f, h, k, l, m, r;\n    return E(function (p) {\n      switch (p.h) {\n        case 1:\n          if (!a.ga) return p.return();\n          b = void 0 === a.h.files ? [] : \"function\" === typeof a.h.files ? a.h.files(a.l) : a.h.files;\n          return D(p, dd(), 2);\n        case 2:\n          c = p.i;\n          if (\"object\" === typeof window) return bd(\"createMediapipeSolutionsWasm\", {\n            locateFile: a.locateFile\n          }), bd(\"createMediapipeSolutionsPackedAssets\", {\n            locateFile: a.locateFile\n          }), f = b.filter(function (n) {\n            return void 0 !== n.data;\n          }), h = b.filter(function (n) {\n            return void 0 === n.data;\n          }), k = Promise.all(f.map(function (n) {\n            var q = gd(a, n.url);\n            if (void 0 !== n.path) {\n              var t = n.path;\n              q = q.then(function (w) {\n                a.overrideFile(t, w);\n                return Promise.resolve(w);\n              });\n            }\n            return q;\n          })), l = Promise.all(h.map(function (n) {\n            return void 0 === n.simd || n.simd && c || !n.simd && !c ? cd(a.locateFile(n.url, a.ha)) : Promise.resolve();\n          })).then(function () {\n            var n, q, t;\n            return E(function (w) {\n              if (1 == w.h) return n = window.createMediapipeSolutionsWasm, q = window.createMediapipeSolutionsPackedAssets, t = a, D(w, n(q), 2);\n              t.i = w.i;\n              w.h = 0;\n            });\n          }), m = function () {\n            return E(function (n) {\n              a.h.graph && a.h.graph.url ? n = D(n, gd(a, a.h.graph.url), 0) : (n.h = 0, n = void 0);\n              return n;\n            });\n          }(), D(p, Promise.all([l, k, m]), 7);\n          if (\"function\" !== typeof importScripts) throw Error(\"solutions can only be loaded on a web page or in a web worker\");\n          d = b.filter(function (n) {\n            return void 0 === n.simd || n.simd && c || !n.simd && !c;\n          }).map(function (n) {\n            return a.locateFile(n.url, a.ha);\n          });\n          importScripts.apply(null, ea(d));\n          e = a;\n          return D(p, createMediapipeSolutionsWasm(Module), 6);\n        case 6:\n          e.i = p.i;\n          a.m = new OffscreenCanvas(1, 1);\n          a.i.canvas = a.m;\n          g = a.i.GL.createContext(a.m, {\n            antialias: !1,\n            alpha: !1,\n            va: \"undefined\" !== typeof WebGL2RenderingContext ? 2 : 1\n          });\n          a.i.GL.makeContextCurrent(g);\n          p.h = 4;\n          break;\n        case 7:\n          a.m = document.createElement(\"canvas\");\n          r = a.m.getContext(\"webgl2\", {});\n          if (!r && (r = a.m.getContext(\"webgl\", {}), !r)) return alert(\"Failed to create WebGL canvas context when passing video frame.\"), p.return();\n          a.K = r;\n          a.i.canvas = a.m;\n          a.i.createContext(a.m, !0, !0, {});\n        case 4:\n          a.j = new a.i.SolutionWasm(), a.ga = !1, p.h = 0;\n      }\n    });\n  }\n  function hd(a) {\n    var b, c, d, e, g, f, h, k;\n    return E(function (l) {\n      if (1 == l.h) {\n        if (a.h.graph && a.h.graph.url && a.fa === a.h.graph.url) return l.return();\n        a.u = !0;\n        if (!a.h.graph || !a.h.graph.url) {\n          l.h = 2;\n          return;\n        }\n        a.fa = a.h.graph.url;\n        return D(l, gd(a, a.h.graph.url), 3);\n      }\n      2 != l.h && (b = l.i, a.j.loadGraph(b));\n      c = A(Object.keys(a.D));\n      for (d = c.next(); !d.done; d = c.next()) e = d.value, a.j.overrideFile(e, a.D[e]);\n      a.D = {};\n      if (a.h.listeners) for (g = A(a.h.listeners), f = g.next(); !f.done; f = g.next()) h = f.value, id(a, h);\n      k = a.l;\n      a.l = {};\n      a.setOptions(k);\n      l.h = 0;\n    });\n  }\n  x.reset = function () {\n    var a = this;\n    return E(function (b) {\n      a.j && (a.j.reset(), a.s = {}, a.v = {});\n      b.h = 0;\n    });\n  };\n  x.setOptions = function (a, b) {\n    var c = this;\n    if (b = b || this.h.options) {\n      for (var d = [], e = [], g = {}, f = A(Object.keys(a)), h = f.next(); !h.done; g = {\n        X: g.X,\n        Y: g.Y\n      }, h = f.next()) if (h = h.value, !(h in this.l && this.l[h] === a[h])) {\n        this.l[h] = a[h];\n        var k = b[h];\n        void 0 !== k && (k.onChange && (g.X = k.onChange, g.Y = a[h], d.push(function (l) {\n          return function () {\n            var m;\n            return E(function (r) {\n              if (1 == r.h) return D(r, l.X(l.Y), 2);\n              m = r.i;\n              !0 === m && (c.u = !0);\n              r.h = 0;\n            });\n          };\n        }(g))), k.graphOptionXref && (h = Object.assign({}, {\n          calculatorName: \"\",\n          calculatorIndex: 0\n        }, k.graphOptionXref, {\n          valueNumber: 1 === k.type ? a[h] : 0,\n          valueBoolean: 0 === k.type ? a[h] : !1,\n          valueString: 2 === k.type ? a[h] : \"\"\n        }), e.push(h)));\n      }\n      if (0 !== d.length || 0 !== e.length) this.u = !0, this.H = (void 0 === this.H ? [] : this.H).concat(e), this.F = (void 0 === this.F ? [] : this.F).concat(d);\n    }\n  };\n  function jd(a) {\n    var b, c, d, e, g, f, h;\n    return E(function (k) {\n      switch (k.h) {\n        case 1:\n          if (!a.u) return k.return();\n          if (!a.F) {\n            k.h = 2;\n            break;\n          }\n          b = A(a.F);\n          c = b.next();\n        case 3:\n          if (c.done) {\n            k.h = 5;\n            break;\n          }\n          d = c.value;\n          return D(k, d(), 4);\n        case 4:\n          c = b.next();\n          k.h = 3;\n          break;\n        case 5:\n          a.F = void 0;\n        case 2:\n          if (a.H) {\n            e = new a.i.GraphOptionChangeRequestList();\n            g = A(a.H);\n            for (f = g.next(); !f.done; f = g.next()) h = f.value, e.push_back(h);\n            a.j.changeOptions(e);\n            e.delete();\n            a.H = void 0;\n          }\n          a.u = !1;\n          k.h = 0;\n      }\n    });\n  }\n  x.initialize = function () {\n    var a = this;\n    return E(function (b) {\n      return 1 == b.h ? D(b, fd(a), 2) : 3 != b.h ? D(b, hd(a), 3) : D(b, jd(a), 0);\n    });\n  };\n  function gd(a, b) {\n    var c, d;\n    return E(function (e) {\n      if (b in a.L) return e.return(a.L[b]);\n      c = a.locateFile(b, \"\");\n      d = fetch(c).then(function (g) {\n        return g.arrayBuffer();\n      });\n      a.L[b] = d;\n      return e.return(d);\n    });\n  }\n  x.overrideFile = function (a, b) {\n    this.j ? this.j.overrideFile(a, b) : this.D[a] = b;\n  };\n  x.clearOverriddenFiles = function () {\n    this.D = {};\n    this.j && this.j.clearOverriddenFiles();\n  };\n  x.send = function (a, b) {\n    var c = this,\n      d,\n      e,\n      g,\n      f,\n      h,\n      k,\n      l,\n      m,\n      r;\n    return E(function (p) {\n      switch (p.h) {\n        case 1:\n          if (!c.h.inputs) return p.return();\n          d = 1E3 * (void 0 === b || null === b ? performance.now() : b);\n          return D(p, c.I, 2);\n        case 2:\n          return D(p, c.initialize(), 3);\n        case 3:\n          e = new c.i.PacketDataList();\n          g = A(Object.keys(a));\n          for (f = g.next(); !f.done; f = g.next()) if (h = f.value, k = c.h.inputs[h]) {\n            a: {\n              var n = a[h];\n              switch (k.type) {\n                case \"video\":\n                  var q = c.s[k.stream];\n                  q || (q = new Wc(c.i, c.K), c.s[k.stream] = q);\n                  0 === q.m && (q.m = q.i.createTexture());\n                  if (\"undefined\" !== typeof HTMLVideoElement && n instanceof HTMLVideoElement) {\n                    var t = n.videoWidth;\n                    var w = n.videoHeight;\n                  } else \"undefined\" !== typeof HTMLImageElement && n instanceof HTMLImageElement ? (t = n.naturalWidth, w = n.naturalHeight) : (t = n.width, w = n.height);\n                  w = {\n                    glName: q.m,\n                    width: t,\n                    height: w\n                  };\n                  t = q.h;\n                  t.canvas.width = w.width;\n                  t.canvas.height = w.height;\n                  t.activeTexture(t.TEXTURE0);\n                  q.i.bindTexture2d(q.m);\n                  t.texImage2D(t.TEXTURE_2D, 0, t.RGBA, t.RGBA, t.UNSIGNED_BYTE, n);\n                  q.i.bindTexture2d(0);\n                  q = w;\n                  break a;\n                case \"detections\":\n                  q = c.s[k.stream];\n                  q || (q = new Zc(c.i), c.s[k.stream] = q);\n                  q.data || (q.data = new q.h.DetectionListData());\n                  q.data.reset(n.length);\n                  for (w = 0; w < n.length; ++w) {\n                    t = n[w];\n                    var v = q.data,\n                      B = v.setBoundingBox,\n                      J = w;\n                    var I = t.la;\n                    var u = new Qc();\n                    V(u, 1, I.sa);\n                    V(u, 2, I.ta);\n                    V(u, 3, I.height);\n                    V(u, 4, I.width);\n                    V(u, 5, I.rotation);\n                    U(u, 6, I.pa);\n                    I = u.l();\n                    B.call(v, J, I);\n                    if (t.ea) for (v = 0; v < t.ea.length; ++v) {\n                      u = t.ea[v];\n                      B = q.data;\n                      J = B.addNormalizedLandmark;\n                      I = w;\n                      u = Object.assign({}, u, {\n                        visibility: u.visibility ? u.visibility : 0\n                      });\n                      var C = new Lc();\n                      V(C, 1, u.x);\n                      V(C, 2, u.y);\n                      V(C, 3, u.z);\n                      u.visibility && V(C, 4, u.visibility);\n                      u = C.l();\n                      J.call(B, I, u);\n                    }\n                    if (t.ba) for (v = 0; v < t.ba.length; ++v) B = q.data, J = B.addClassification, I = w, u = t.ba[v], C = new Z(), V(C, 2, u.qa), u.index && U(C, 1, u.index), u.label && U(C, 3, u.label), u.displayName && U(C, 4, u.displayName), u = C.l(), J.call(B, I, u);\n                  }\n                  q = q.data;\n                  break a;\n                default:\n                  q = {};\n              }\n            }\n            l = q;\n            m = k.stream;\n            switch (k.type) {\n              case \"video\":\n                e.pushTexture2d(Object.assign({}, l, {\n                  stream: m,\n                  timestamp: d\n                }));\n                break;\n              case \"detections\":\n                r = l;\n                r.stream = m;\n                r.timestamp = d;\n                e.pushDetectionList(r);\n                break;\n              default:\n                throw Error(\"Unknown input config type: '\" + k.type + \"'\");\n            }\n          }\n          c.j.send(e);\n          return D(p, c.I, 4);\n        case 4:\n          e.delete(), p.h = 0;\n      }\n    });\n  };\n  function kd(a, b, c) {\n    var d, e, g, f, h, k, l, m, r, p, n, q, t, w;\n    return E(function (v) {\n      switch (v.h) {\n        case 1:\n          if (!c) return v.return(b);\n          d = {};\n          e = 0;\n          g = A(Object.keys(c));\n          for (f = g.next(); !f.done; f = g.next()) h = f.value, k = c[h], \"string\" !== typeof k && \"texture\" === k.type && void 0 !== b[k.stream] && ++e;\n          1 < e && (a.M = !1);\n          l = A(Object.keys(c));\n          f = l.next();\n        case 2:\n          if (f.done) {\n            v.h = 4;\n            break;\n          }\n          m = f.value;\n          r = c[m];\n          if (\"string\" === typeof r) return t = d, w = m, D(v, ld(a, m, b[r]), 14);\n          p = b[r.stream];\n          if (\"detection_list\" === r.type) {\n            if (p) {\n              var B = p.getRectList();\n              for (var J = p.getLandmarksList(), I = p.getClassificationsList(), u = [], C = 0; C < B.size(); ++C) {\n                var T = Sc(B.get(C)),\n                  od = W(T, 1),\n                  pd = W(T, 2),\n                  qd = W(T, 3),\n                  rd = W(T, 4),\n                  sd = W(T, 5, 0),\n                  za = void 0;\n                za = void 0 === za ? 0 : za;\n                T = {\n                  la: {\n                    sa: od,\n                    ta: pd,\n                    height: qd,\n                    width: rd,\n                    rotation: sd,\n                    pa: Rb(S(T, 6), za)\n                  },\n                  ea: Ob(Pc(J.get(C)), Lc, 1).map(Vc),\n                  ba: Uc(Kc(I.get(C)))\n                };\n                u.push(T);\n              }\n              B = u;\n            } else B = [];\n            d[m] = B;\n            v.h = 7;\n            break;\n          }\n          if (\"proto_list\" === r.type) {\n            if (p) {\n              B = Array(p.size());\n              for (J = 0; J < p.size(); J++) B[J] = p.get(J);\n              p.delete();\n            } else B = [];\n            d[m] = B;\n            v.h = 7;\n            break;\n          }\n          if (void 0 === p) {\n            v.h = 3;\n            break;\n          }\n          if (\"float_list\" === r.type) {\n            d[m] = p;\n            v.h = 7;\n            break;\n          }\n          if (\"proto\" === r.type) {\n            d[m] = p;\n            v.h = 7;\n            break;\n          }\n          if (\"texture\" !== r.type) throw Error(\"Unknown output config type: '\" + r.type + \"'\");\n          n = a.v[m];\n          n || (n = new Wc(a.i, a.K), a.v[m] = n);\n          return D(v, Xc(n, p, a.M), 13);\n        case 13:\n          q = v.i, d[m] = q;\n        case 7:\n          r.transform && d[m] && (d[m] = r.transform(d[m]));\n          v.h = 3;\n          break;\n        case 14:\n          t[w] = v.i;\n        case 3:\n          f = l.next();\n          v.h = 2;\n          break;\n        case 4:\n          return v.return(d);\n      }\n    });\n  }\n  function ld(a, b, c) {\n    var d;\n    return E(function (e) {\n      return \"number\" === typeof c || c instanceof Uint8Array || c instanceof a.i.Uint8BlobList ? e.return(c) : c instanceof a.i.Texture2dDataOut ? (d = a.v[b], d || (d = new Wc(a.i, a.K), a.v[b] = d), e.return(Xc(d, c, a.M))) : e.return(void 0);\n    });\n  }\n  function id(a, b) {\n    for (var c = b.name || \"$\", d = [].concat(ea(b.wants)), e = new a.i.StringList(), g = A(b.wants), f = g.next(); !f.done; f = g.next()) e.push_back(f.value);\n    g = a.i.PacketListener.implement({\n      onResults: function (h) {\n        for (var k = {}, l = 0; l < b.wants.length; ++l) k[d[l]] = h.get(l);\n        var m = a.listeners[c];\n        m && (a.I = kd(a, k, b.outs).then(function (r) {\n          r = m(r);\n          for (var p = 0; p < b.wants.length; ++p) {\n            var n = k[d[p]];\n            \"object\" === typeof n && n.hasOwnProperty && n.hasOwnProperty(\"delete\") && n.delete();\n          }\n          r && (a.I = r);\n        }));\n      }\n    });\n    a.j.attachMultiListener(e, g);\n    e.delete();\n  }\n  x.onResults = function (a, b) {\n    this.listeners[b || \"$\"] = a;\n  };\n  Aa(\"Solution\", ed);\n  Aa(\"OptionType\", {\n    BOOL: 0,\n    NUMBER: 1,\n    ua: 2,\n    0: \"BOOL\",\n    1: \"NUMBER\",\n    2: \"STRING\"\n  });\n  function md(a) {\n    void 0 === a && (a = 0);\n    switch (a) {\n      case 1:\n        return \"selfie_segmentation_landscape.tflite\";\n      default:\n        return \"selfie_segmentation.tflite\";\n    }\n  }\n  function nd(a) {\n    var b = this;\n    a = a || {};\n    this.h = new ed({\n      locateFile: a.locateFile,\n      files: function (c) {\n        return [{\n          simd: !0,\n          url: \"selfie_segmentation_solution_simd_wasm_bin.js\"\n        }, {\n          simd: !1,\n          url: \"selfie_segmentation_solution_wasm_bin.js\"\n        }, {\n          data: !0,\n          url: md(c.modelSelection)\n        }];\n      },\n      graph: {\n        url: \"selfie_segmentation.binarypb\"\n      },\n      listeners: [{\n        wants: [\"segmentation_mask\", \"image_transformed\"],\n        outs: {\n          image: {\n            type: \"texture\",\n            stream: \"image_transformed\"\n          },\n          segmentationMask: {\n            type: \"texture\",\n            stream: \"segmentation_mask\"\n          }\n        }\n      }],\n      inputs: {\n        image: {\n          type: \"video\",\n          stream: \"input_frames_gpu\"\n        }\n      },\n      options: {\n        useCpuInference: {\n          type: 0,\n          graphOptionXref: {\n            calculatorType: \"InferenceCalculator\",\n            fieldName: \"use_cpu_inference\"\n          },\n          default: \"object\" !== typeof window || void 0 === window.navigator ? !1 : \"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod\".split(\";\").includes(navigator.platform) || navigator.userAgent.includes(\"Mac\") && \"ontouchend\" in document\n        },\n        selfieMode: {\n          type: 0,\n          graphOptionXref: {\n            calculatorType: \"GlScalerCalculator\",\n            calculatorIndex: 1,\n            fieldName: \"flip_horizontal\"\n          }\n        },\n        modelSelection: {\n          type: 1,\n          graphOptionXref: {\n            calculatorType: \"ConstantSidePacketCalculator\",\n            calculatorName: \"ConstantSidePacketCalculatorModelSelection\",\n            fieldName: \"int_value\"\n          },\n          onChange: function (c) {\n            var d, e, g;\n            return E(function (f) {\n              if (1 == f.h) return d = md(c), e = \"third_party/mediapipe/modules/selfie_segmentation/\" + d, D(f, gd(b.h, d), 2);\n              g = f.i;\n              b.h.overrideFile(e, g);\n              return f.return(!0);\n            });\n          }\n        }\n      }\n    });\n  }\n  x = nd.prototype;\n  x.close = function () {\n    this.h.close();\n    return Promise.resolve();\n  };\n  x.onResults = function (a) {\n    this.h.onResults(a);\n  };\n  x.initialize = function () {\n    var a = this;\n    return E(function (b) {\n      return D(b, a.h.initialize(), 0);\n    });\n  };\n  x.reset = function () {\n    this.h.reset();\n  };\n  x.send = function (a) {\n    var b = this;\n    return E(function (c) {\n      return D(c, b.h.send(a), 0);\n    });\n  };\n  x.setOptions = function (a) {\n    this.h.setOptions(a);\n  };\n  Aa(\"SelfieSegmentation\", nd);\n  Aa(\"VERSION\", \"0.1.1675465747\");\n}).call(commonjsGlobal);\n\nvar Logger = window.log;\n/**\n * This class is used to apply a video effect to the video stream.\n * It's compatible with Ant Media Server JavaScript SDK v2.5.2+\n *\n */\nvar _virtualBackgroundImage = /*#__PURE__*/new WeakMap();\nvar _noEffect = /*#__PURE__*/new WeakSet();\nclass VideoEffect {\n  /**\n   *\n   * @param {WebRTCAdaptor} webRTCAdaptor\n   */\n  constructor(webRTCAdaptor) {\n    /**\n     * This method is used to disable the virtual background and blur effects.\n     */\n    _classPrivateMethodInitSpec(this, _noEffect);\n    _classPrivateFieldInitSpec(this, _virtualBackgroundImage, {\n      writable: true,\n      value: null\n    });\n    this.webRTCAdaptor = webRTCAdaptor;\n    this.selfieSegmentation = null;\n    this.effectCanvas = null;\n    this.ctx = null;\n    this.rawLocalVideo = document.createElement('video');\n    this.deepAR = null;\n    this.backgroundBlurRange = 3;\n    this.edgeBlurRange = 4;\n    this.effectName = VideoEffect.NO_EFFECT;\n    this.startTime = 0;\n    this.statTimerId = -1;\n    this.renderedFrameCount = 0;\n    this.lastRenderedFrameCount = 0;\n    this.effectCanvasFPS = 0;\n    this.videoCallbackPeriodMs = 0;\n    this.initializeSelfieSegmentation();\n    this.isInitialized = true;\n  }\n\n  /**\n   * This method is used to initialize the video effect.\n   * @param {MediaStream} stream - Original stream to be manipulated.\n   * @returns {Promise<void>}\n   */\n  init(stream) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.setRawLocalVideo(stream);\n      var trackSettings = stream.getVideoTracks()[0].getSettings();\n      _this.effectCanvasFPS = trackSettings.frameRate;\n      _this.videoCallbackPeriodMs = 1000 / _this.effectCanvasFPS;\n      _this.effectCanvas = _this.createEffectCanvas(trackSettings.width, trackSettings.height);\n      _this.ctx = _this.effectCanvas.getContext(\"2d\");\n      if (_this.canvasStream) {\n        _this.canvasStream.getTracks().forEach(track => track.stop());\n        _this.canvasStream = null;\n      }\n      _this.canvasStream = _this.effectCanvas.captureStream(_this.effectCanvasFPS);\n      return new Promise((resolve, reject) => {\n        resolve(_this.canvasStream);\n      });\n    })();\n  }\n\n  /**\n   * This method is used to set raw local video.\n   * @param {MediaStream} stream\n   * @returns {Promise<void>}\n   */\n  setRawLocalVideo(stream) {\n    this.rawLocalVideo.srcObject = stream;\n    this.rawLocalVideo.muted = true;\n    this.rawLocalVideo.autoplay = true;\n    return this.rawLocalVideo.play();\n  }\n\n  /**\n   * This method is used to create the canvas element which is used to apply the video effect.\n   * @param {number} height\n   * @param {number} width\n   */\n  createEffectCanvas(width, height) {\n    var effectCanvas = document.createElement('canvas');\n    effectCanvas.id = \"effectCanvas\";\n    effectCanvas.width = width;\n    effectCanvas.height = height;\n    return effectCanvas;\n  }\n\n  /**\n   * This method is used to initialize the selfie segmentation.\n   */\n  initializeSelfieSegmentation() {\n    this.selfieSegmentation = new SelfieSegmentation({\n      locateFile: file => {\n        return VideoEffect.LOCATE_FILE_URL + \"/\" + file;\n      }\n    });\n    this.selfieSegmentation.setOptions({\n      selfieMode: false,\n      // true: selfie mode, false: portrait mode\n      modelSelection: 1 // 0: General Model, 1: Landscape Model - We use Landscape Model for better performance\n    });\n\n    this.selfieSegmentation.onResults(results => {\n      this.onResults(results);\n    });\n  }\n  /**\n   * @param {HTMLElement} imageElement\n   */\n  set virtualBackgroundImage(imageElement) {\n    _classPrivateFieldSet(this, _virtualBackgroundImage, imageElement);\n  }\n  startFpsCalculation() {\n    this.statTimerId = setInterval(() => {\n      var currentTime = new Date().getTime();\n      var deltaTime = (currentTime - this.startTime) / 1000;\n      this.startTime = currentTime;\n      var fps = (this.renderedFrameCount - this.lastRenderedFrameCount) / deltaTime;\n      this.renderedFrameCount = this.lastRenderedFrameCount;\n      Logger.warn(\"Fps: \" + fps + \"fps\");\n    }, 1000);\n  }\n  stopFpsCalculation() {\n    if (this.statTimerId !== -1) {\n      clearInterval(this.statTimerId);\n      this.statTimerId = -1;\n    }\n  }\n  processFrame() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield _this2.selfieSegmentation.send({\n        image: _this2.rawLocalVideo\n      });\n\n      //call if the effect name is not NO_EFFECT\n      if (_this2.effectName !== VideoEffect.NO_EFFECT) {\n        setTimeout(() => {\n          _this2.processFrame();\n        }, _this2.videoCallbackPeriodMs);\n      }\n    })();\n  }\n\n  /**\n   * Set blur effect range\n   * @param {number} backgroundBlurRange\n   * @param {number} edgeBlurRange\n   */\n  setBlurEffectRange(backgroundBlurRange, edgeBlurRange) {\n    this.backgroundBlurRange = backgroundBlurRange;\n    this.edgeBlurRange = edgeBlurRange;\n  }\n\n  /**\n   * Enable effect\n   * @param {string} effectName\n   * @param {string} deepARApiKey\n   * @param {*} deepARModel\n   */\n  enableEffect(effectName, deepARApiKey, deepARModel) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this3.isInitialized) {\n        Logger.error(\"VideoEffect is not initialized!\");\n        return;\n      }\n      switch (effectName) {\n        case VideoEffect.DEEPAR:\n        case VideoEffect.VIRTUAL_BACKGROUND:\n        case VideoEffect.BLUR_BACKGROUND:\n        case VideoEffect.NO_EFFECT:\n          //Stop timer\n          _this3.stopFpsCalculation();\n          yield _classPrivateMethodGet(_this3, _noEffect, _noEffect2).call(_this3);\n          break;\n        default:\n          Logger.warn(\"Unknown effect name please use the constants VideoEffect.VIRTUAL_BACKGROUND,VideoEffect.BLUR_BACKGROUND or VideoEffect.NO_EFFECT \");\n          return;\n      }\n      var currentEffectName = _this3.effectName;\n      _this3.effectName = effectName;\n      if (currentEffectName === VideoEffect.DEEPAR && effectName !== VideoEffect.DEEPAR) {\n        _this3.deepAR.shutdown();\n        _this3.deepAR = null;\n      }\n      if (effectName === VideoEffect.VIRTUAL_BACKGROUND || effectName === VideoEffect.BLUR_BACKGROUND) {\n        //check old effect name. If it's no effect, start the process\n        if (currentEffectName === VideoEffect.NO_EFFECT || currentEffectName === VideoEffect.DEEPAR) {\n          if (VideoEffect.DEBUG) {\n            _this3.startFpsCalculation();\n          }\n          //We cannot use the localStream of the webrtc adaptor because it's gets stopped when updateVideoTrack is called\n          //get the video stream with current constraints and stop it when effects are disabled\n\n          //audio:true makes the trick to play the video in the background as well otherwise it stops playing\n          return navigator.mediaDevices.getUserMedia({\n            video: _this3.webRTCAdaptor.mediaConstraints.video,\n            audio: true\n          }).then(localStream => {\n            return _this3.init(localStream).then(processedStream => {\n              return _this3.webRTCAdaptor.updateVideoTrack(processedStream, _this3.webRTCAdaptor.publishStreamId, null, true).then(() => {\n                setTimeout(() => {\n                  _this3.processFrame();\n                }, _this3.videoCallbackPeriodMs);\n              });\n            }).catch(err => {\n              //log and throw again to let the catch in the chain it\n              Logger.error(err);\n              throw err;\n            });\n          });\n        } else {\n          return new Promise((resolve, reject) => {\n            resolve();\n          });\n        }\n      } else if (effectName === VideoEffect.DEEPAR) {\n        if (deepARApiKey === undefined || deepARApiKey === null || deepARApiKey === \"\" || deepARModel === undefined || deepARModel === null || deepARModel === \"\") {\n          Logger.error(\"DeepAR API key or DeepAR Model is not set!\");\n          return;\n        }\n        if (currentEffectName === VideoEffect.DEEPAR) {\n          _this3.deepAR.switchEffect(0, 'slot', VideoEffect.DEEP_AR_EFFECTS_URL + deepARModel + VideoEffect.DEEP_AR_EXTENSION);\n          return;\n        } else if (currentEffectName === VideoEffect.BLUR_BACKGROUND || currentEffectName === VideoEffect.VIRTUAL_BACKGROUND) {\n          //Stop timer\n          _this3.stopFpsCalculation();\n          yield _classPrivateMethodGet(_this3, _noEffect, _noEffect2).call(_this3);\n        }\n        var canvas = _this3.createEffectCanvas(500, 500);\n        var deepAR = new DeepAR({\n          licenseKey: deepARApiKey,\n          canvas: canvas,\n          deeparWasmPath: VideoEffect.DEEP_AR_FOLDER_ROOT_URL + '/wasm/deepar.wasm',\n          callbacks: {\n            onInitialize: function onInitialize() {\n              deepAR.startVideo(true);\n            }\n          }\n        });\n        _this3.deepAR = deepAR;\n        _this3.deepAR.callbacks.onVideoStarted = () => {\n          _this3.canvasStream = canvas.captureStream(30);\n          _this3.webRTCAdaptor.updateVideoTrack(_this3.canvasStream, _this3.webRTCAdaptor.publishStreamId, null, true);\n          _this3.deepAR.switchEffect(0, 'slot', VideoEffect.DEEP_AR_EFFECTS_URL + deepARModel + VideoEffect.DEEP_AR_EXTENSION);\n        };\n        _this3.deepAR.downloadFaceTrackingModel(VideoEffect.DEEP_AR_FOLDER_ROOT_URL + \"/models/face/models-68-extreme.bin\");\n        _this3.deepAR.setVideoElement(_this3.rawLocalVideo, true);\n      } else {\n        if (currentEffectName === VideoEffect.DEEPAR) {\n          var localStream = yield navigator.mediaDevices.getUserMedia({\n            video: _this3.webRTCAdaptor.mediaConstraints.video,\n            audio: true\n          });\n          yield _this3.setRawLocalVideo(localStream);\n        }\n        return new Promise((resolve, reject) => {\n          //Stop timer\n          _this3.stopFpsCalculation();\n          _classPrivateMethodGet(_this3, _noEffect, _noEffect2).call(_this3);\n          resolve();\n        });\n      }\n    })();\n  }\n  /**\n   * This method is used to draw the segmentation mask.\n   * @param {*} segmentation\n   */\n  drawSegmentationMask(segmentation) {\n    this.ctx.drawImage(segmentation, 0, 0, this.effectCanvas.width, this.effectCanvas.height);\n  }\n\n  /**\n   * This method is called by mediapipe when the segmentation mask is ready.\n   * @param {*} results\n   */\n  onResults(results) {\n    this.renderedFrameCount++;\n    if (this.effectName == VideoEffect.BLUR_BACKGROUND) {\n      this.drawBlurBackground(results.image, results.segmentationMask, this.backgroundBlurRange);\n    } else if (this.effectName == VideoEffect.VIRTUAL_BACKGROUND) {\n      this.drawVirtualBackground(results.image, results.segmentationMask, _classPrivateFieldGet(this, _virtualBackgroundImage));\n    } else {\n      this.drawImageDirectly(results.image);\n    }\n  }\n\n  /**\n   * This method is used to draw the raw frame directly to the canvas.\n   * @param {*} image\n   */\n  drawImageDirectly(image) {\n    this.ctx.save();\n    this.ctx.globalCompositeOperation = \"source-over\";\n    this.ctx.filter = \"none\";\n    this.ctx.drawImage(image, 0, 0, image.width, image.height);\n    this.ctx.restore();\n  }\n\n  /**\n   * This method is used to draw the frame with virtual background effect to the canvas.\n   * @param {*} image\n   * @param {*} segmentation\n   * @param {*} virtualBackgroundImage\n   */\n  drawVirtualBackground(image, segmentation, virtualBackgroundImage) {\n    this.ctx.save();\n    this.ctx.filter = \"none\";\n    this.ctx.clearRect(0, 0, this.effectCanvas.width, this.effectCanvas.height);\n    this.ctx.drawImage(segmentation, 0, 0, this.effectCanvas.width, this.effectCanvas.height);\n    this.ctx.globalCompositeOperation = 'source-out';\n    this.ctx.drawImage(virtualBackgroundImage, 0, 0, virtualBackgroundImage.naturalWidth, virtualBackgroundImage.naturalHeight, 0, 0, this.effectCanvas.width, this.effectCanvas.height);\n    this.ctx.globalCompositeOperation = 'destination-atop';\n    this.ctx.drawImage(image, 0, 0, this.effectCanvas.width, this.effectCanvas.height);\n    this.ctx.restore();\n  }\n\n  /**\n   * This method is used to draw frame with background blur effect to the canvas.\n   * @param {*} image\n   * @param {*} segmentation\n   * @param {*} blurAmount\n   */\n  drawBlurBackground(image, segmentation, blurAmount) {\n    this.ctx.clearRect(0, 0, this.effectCanvas.width, this.effectCanvas.height);\n    this.ctx.globalCompositeOperation = \"copy\";\n    this.ctx.filter = \"none\";\n    this.ctx.filter = \"blur(\" + this.edgeBlurRange + \"px)\";\n    this.drawSegmentationMask(segmentation);\n    this.ctx.globalCompositeOperation = \"source-in\";\n    this.ctx.filter = \"none\";\n    this.ctx.drawImage(image, 0, 0, this.effectCanvas.width, this.effectCanvas.height);\n    this.ctx.globalCompositeOperation = \"destination-over\";\n    this.ctx.filter = \"blur(\" + blurAmount + \"px)\";\n    this.ctx.drawImage(image, 0, 0, this.effectCanvas.width, this.effectCanvas.height);\n    this.ctx.restore();\n  }\n}\nfunction _noEffect2() {\n  this.rawLocalVideo.pause();\n  if (this.canvasStream != null) {\n    this.canvasStream.getVideoTracks().forEach(track => track.stop());\n  }\n  return this.webRTCAdaptor.switchVideoCameraCapture(this.webRTCAdaptor.publishStreamId);\n}\n_defineProperty(VideoEffect, \"DEEPAR\", \"deepar\");\n_defineProperty(VideoEffect, \"VIRTUAL_BACKGROUND\", \"virtual-background\");\n_defineProperty(VideoEffect, \"BLUR_BACKGROUND\", \"blur-background\");\n_defineProperty(VideoEffect, \"NO_EFFECT\", \"no-effect\");\n_defineProperty(VideoEffect, \"deepARModelList\", ['flower_face', 'Ping_Pong']);\n/**\n * @type {boolean}\n */\n_defineProperty(VideoEffect, \"DEBUG\", false);\n/**\n * LOCATE_FILE_URL is optional, it's to give locate url of selfie segmentation\n * If you would like to use CDN,\n * Give \"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/\"\n * or give local file relative path \"./js/external/selfie-segmentation\" according to your file\n */\n//static LOCATE_FILE_URL = \"./js/external/selfie-segmentation\";\n_defineProperty(VideoEffect, \"LOCATE_FILE_URL\", \"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation\");\n_defineProperty(VideoEffect, \"DEEP_AR_FOLDER_ROOT_URL\", \"https://cdn.jsdelivr.net/npm/deepar@4.0.3\");\n_defineProperty(VideoEffect, \"DEEP_AR_EFFECTS_URL\", \"../js/external/deepar-effects/\");\n_defineProperty(VideoEffect, \"DEEP_AR_EXTENSION\", \".deepar\");\nWebRTCAdaptor.register(webrtcAdaptorInstance => {\n  var videoEffect = new VideoEffect(webrtcAdaptorInstance);\n  Object.defineProperty(webrtcAdaptorInstance, \"setBlurEffectRange\", {\n    value: function value(backgroundBlurRange, edgeBlurRange) {\n      videoEffect.setBlurEffectRange(backgroundBlurRange, edgeBlurRange);\n    }\n  });\n  Object.defineProperty(webrtcAdaptorInstance, \"enableEffect\", {\n    value: function value(effectName, deepARApiKey, deepARModel) {\n      return videoEffect.enableEffect(effectName, deepARApiKey, deepARModel);\n    }\n  });\n  Object.defineProperty(webrtcAdaptorInstance, \"setBackgroundImage\", {\n    value: function value(imageElement) {\n      videoEffect.virtualBackgroundImage = imageElement;\n    }\n  });\n});\n\nexport { VideoEffect };\n","import { render } from \"./Streaming.vue?vue&type=template&id=3ff22ada&scoped=true\"\nimport script from \"./Streaming.vue?vue&type=script&lang=js\"\nexport * from \"./Streaming.vue?vue&type=script&lang=js\"\n\nimport \"./Streaming.vue?vue&type=style&index=0&id=3ff22ada&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3ff22ada\"]])\n\nexport default __exports__","import { render } from \"./Streaming.vue?vue&type=template&id=6985dc9b\"\nimport script from \"./Streaming.vue?vue&type=script&lang=js\"\nexport * from \"./Streaming.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["login","_createBlock","_component_Edit","key","_createCommentVNode","class","ref","autoplay","muted","id","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","onClick","_cache","args","$setup","startWebcam","_hoisted_4","_hoisted_5","startScreenCapture","startStreamingWithAdaptor","disabled","webcamStream","_hoisted_6","stopStreamingWithAdaptor","webRTCAdaptor","_hoisted_7","_hoisted_8","_toDisplayString","streamingStatus","root","definition","window","log","undefined","noop","undefinedType","isIE","navigator","test","userAgent","logMethods","bindMethod","obj","methodName","method","bind","Function","prototype","call","e","apply","arguments","traceForIE","console","trace","realMethod","replaceLoggingMethods","level","loggerName","i","length","this","methodFactory","debug","enableLoggingWhenConsoleArrives","defaultMethodFactory","Logger","name","defaultLevel","factory","currentLevel","self","storageKey","persistLevelIfPossible","levelNum","levelName","toUpperCase","localStorage","ignore","document","cookie","encodeURIComponent","getPersistedLevel","storedLevel","location","indexOf","exec","slice","levels","clearPersistedLevel","removeItem","getLevel","setLevel","persist","SILENT","setDefaultLevel","resetLevel","enableAll","TRACE","disableAll","initialLevel","defaultLogger","_loggersByName","getLogger","TypeError","logger","_log","noConflict","getLoggers","SoundMeter","constructor","context","volumeMeterUrl","instant","mic","volumeMeterNode","url","connectToSource","stream","levelCallback","errorCallback","audioWorklet","addModule","then","createMediaStreamSource","AudioWorkletNode","port","onmessage","event","data","type","message","toFixed","connect","catch","err","error","stop","postMessage","disconnect","close","String","endsWith","searchString","position","subjectString","toString","isFinite","Math","floor","lastIndex","lastIndexOf","isAndroid","vendor","opera","MediaManager","initialValues","bandwidth","camera_location","camera_margin","camera_percent","mediaConstraints","video","audio","getSender","publishStreamId","localStream","publishMode","callback","info","JSON","stringify","callbackError","userParameters","hasOwnProperty","currentVolume","previousAudioTrack","silentAudioTrack","desktopStream","smallVideoTrack","blackVideoTrack","audioContext","AudioContext","oscillator","primaryAudioTrackGainNode","secondaryAudioTrackGainNode","localStreamSoundMeter","blackFrameTimer","desktopCameraCanvasDrawerTimer","mutedAudioStream","isMuted","meterRefresh","cameraEnabled","replacementStream","localVideo","localVideoElement","getElementById","localVideoId","dummyCanvas","createElement","checkBrowserScreenShareSupported","initLocalStream","checkWebRTCPermissions","openStream","media_audio_constraint","navigatorUserMedia","gotStream","Promise","resolve","mediaDevices","getDevices","enumerateDevices","devices","deviceArray","Array","checkAudio","checkVideo","forEach","device","kind","push","inputDeviceNotFoundLimit","alert","trackDeviceChange","ondevicechange","setDesktopwithCameraSource","streamId","onEndedCallback","cameraStream","getVideoTracks","canvas","canvasContext","getContext","screenVideo","srcObject","play","cameraVideo","promise","canvasStream","captureStream","onended","updateVideoTrack","setInterval","width","videoWidth","height","videoHeight","drawImage","positionY","cameraWidth","cameraHeight","positionX","prepareStreamTracks","audioConstraint","audioTracks","getAudioTracks","removeTrack","audioStream","setGainNodeStream","setVideoCameraSource","mixAudioStreams","updateAudioTrack","addTrack","func","catch_error","MediaStream","getSilentAudioTrack","getBlackVideoTrack","reject","getUserMedia","warn","navigatorDisplayMedia","getDisplayMedia","switchVideoCameraCapture","getMedia","clearInterval","stopBlackVideoTrack","clearBlackVideoTrackTimer","stopSilentAudioTrack","closeStream","track","videoTrack","audioTrack","enableSecondStreamInMixedAudio","enable","gain","value","changeLocalVideo","videoEl","enableAudioLevelWhenMuted","mutedSoundMeter","disableAudioLevelWhenMuted","getTracks","secondStream","composedStream","audioDestionation","createMediaStreamDestination","createGain","audioSource","audioSource2","videoTracks","mediaStreamSource","mediaStreamDestination","controlledStream","switchDesktopCapture","switchDesktopCaptureWithCamera","updateLocalAudioStream","newAudioTrack","muteLocalMic","unmuteLocalMic","enableAudioLevelForLocalStream","updateLocalVideoStream","stopDesktop","newVideoTrack","switchAudioInputSource","deviceId","tempMediaConstraints","setAudioInputSource","checkAndStopLocalVideoTrackOnAndroid","exact","turnOffLocalCamera","switchVideoCameraFacingMode","facingMode","videoConstraint","Object","assign","audioTrackSender","replaceTrack","result","videoTrackSender","fillRect","createOscillator","dst","start","choosenId","turnOnLocalCamera","enabled","getVideoSender","videoSender","adapter","browserDetails","browser","version","RTCRtpSender","changeBandwidth","errorDefinition","parameters","getParameters","encodings","maxBitrate","setParameters","setVolumeLevel","volumeLevel","disableAudioLevelForLocalStream","state","resume","applyConstraints","newConstraints","constraints","asyncGeneratorStep","gen","_next","_throw","arg","done","_asyncToGenerator","fn","_defineProperty","_toPropertyKey","defineProperty","enumerable","configurable","writable","_toPrimitive","input","hint","prim","Symbol","toPrimitive","res","Number","_classPrivateFieldGet","receiver","privateMap","descriptor","_classExtractFieldDescriptor","_classApplyDescriptorGet","_classPrivateFieldSet","_classApplyDescriptorSet","action","has","get","set","_classPrivateMethodGet","privateSet","_checkPrivateRedeclaration","privateCollection","_classPrivateFieldInitSpec","_classPrivateMethodInitSpec","add","PeerStats","totalBytesReceivedCount","totalBytesSent","videoPacketsLost","fractionLost","startTime","lastFramesEncoded","totalFramesEncodedCount","lastBytesReceived","lastBytesSent","totalVideoPacketsSent","videoPacketsSent","videoPacketsReceived","totalAudioPacketsSent","audioPacketsSent","audioPacketsReceived","currentTimestamp","lastTime","timerId","firstByteSentCount","firstBytesReceivedCount","audioLevel","qualityLimitationReason","resWidth","resHeight","srcFps","frameWidth","frameHeight","videoRoundTripTime","videoJitter","audioRoundTripTime","audioJitter","audioPacketsLost","framesReceived","framesDropped","framesDecoded","audioJitterAverageDelay","videoJitterAverageDelay","availableOutgoingBitrate","Infinity","inboundRtpList","currentRoundTripTime","averageOutgoingBitrate","totalBytesSentCount","currentFPS","averageIncomingBitrate","currentOutgoingBitrate","currentIncomingBitrate","currentTime","timestamp","totalBytesReceived","bytesReceived","bytesSent","totalFramesEncoded","framesEncoded","Logger$1","WebSocketAdaptor","initWebSocketConnection","addEventListener","connected","connecting","callbackConnected","pingTimerId","URL","websocket_url","includes","searchParams","webrtcadaptor","isPlayMode","wsConn","WebSocket","onopen","sendPing","parse","command","startPublishing","candidate","takeCandidate","label","takeConfiguration","sdp","idMapping","closePeerConnection","multiPeerStreamId","join","onerror","clearPingTimer","onclose","jsCmd","send","text","isConnected","isConnecting","ReceivingMessage","size","received","ArrayBuffer","WebRTCAdaptor","register","pluginInitMethod","pluginInitMethods","peerconnection_config","sdpSemantics","sdp_constraints","OfferToReceiveAudio","OfferToReceiveVideo","remotePeerConnection","remotePeerConnectionStats","remoteDescriptionSet","iceCandidateList","roomName","playStreamId","isMultiPeer","webSocketAdaptor","onlyDataChannel","dataChannelEnabled","receivingMessages","Map","candidateTypes","reconnectIfRequiredFlag","websocketURL","initializeComponents","degradationPreference","Error","remoteVideo","remoteVideoElement","remoteVideoId","soundMeters","soundLevelList","eventListeners","errorEventListeners","publishToken","publishSubscriberId","publishSubscriberCode","publishStreamName","publishMainTrack","publishMetaData","publishRole","playToken","playRoomId","playEnableTracks","playSubscriberId","playSubscriberCode","playMetaData","playRole","lastReconnectiontionTrialTime","pendingTryAgainTimerId","mediaManager","notifyEventListeners","notifyErrorEventListeners","initialize","initPlugins","initMethod","listener","addErrorEventListener","errorListener","checkWebSocketConnection","publish","token","subscriberId","subscriberCode","streamName","mainTrack","metaData","role","sendPublishCommand","videoEnabled","audioEnabled","initPeerConnection","reconnectIfRequired","joinRoom","mode","metadata","room","roomId","enableTracks","trackList","viewerInfo","userPublishId","delayMs","forceReconnect","clearTimeout","setTimeout","tryAgain","_this","now","Date","timeDiff","iceConnectionState","_loop","index","multiPeer","onTrack","streams","dataObj","trackId","transceiver","mid","leaveFromRoom","leave","getStreamInfo","requestVideoTrackAssignments","getBroadcastObject","updateStreamMetaData","getRoomInfo","getSubtracks","offset","getSubtrackCount","status","enableTrack","mainTrackId","iceCandidateReceived","protocolSupported","protocol","element","toLowerCase","sdpMLineIndex","sdpMid","sanitizeHTML","replace","initDataChannel","dataChannel","readyState","byteLength","view","Int32Array","msg","rawData","dataView","Uint8Array","dataChannelMode","closedStreamId","RTCPeerConnection","rtpSender","onicecandidate","ontrack","onnegotiationneeded","dataChannelOptions","ordered","createDataChannel","ondatachannel","ev","channel","_dataChannelOptions","dataChannelPeer","oniceconnectionstatechange","oniceconnectionstatechangeCallback","peerConnection","signalingState","playStreamIndex","splice","signallingState","gotDescription","configuration","setLocalDescription","responose","idOfStream","typeOfConfiguration","conf","isTypeOffer","setRemoteDescription","RTCSessionDescription","response","addIceCandidate","createAnswer","idOfTheStream","tmpLabel","tmpCandidate","candidateSdp","RTCIceCandidate","createOffer","toggleVideo","toggleAudio","getStats","stats","peerStats","parseStats","qlr","fps","inboundRtp","inboundRtpObj","trackIdentifier","packetsLost","jitter","packetsReceived","framesPerSecond","jitterBufferDelay","lastPacketReceivedTimestamp","packetsSent","jitterBufferEmittedCount","roundTripTime","enableStats","periodMs","disableStats","websocketCallback","closeWebSocket","peerMessage","forceStreamQuality","resolution","streamHeight","sendData","CHUNK_SIZE","sent","random","header","min","buffer","tokenArray","chunk","enableAudioLevel","soundMeter","getSoundLevelList","streamsList","sender","getSenders","find","s","assignVideoTrack","videoTrackId","updateVideoTrackAssignments","setMaxVideoTrackCount","maxTrackCount","updateAudioLevel","eventType","getDebugInfo","registerPushNotificationToken","authToken","pushNotificationToken","tokenType","pnsRegistrationToken","pnsType","sendPushNotification","pushNotificationContent","subscriberIdsToNotify","isArray","sendPushNotificationToTopic","topic","period","commonjsGlobal","globalThis","global","x","aa","a","b","ba","defineProperties","c","ca","y","z","split","d","da","next","iterator","A","ea","g","f","h","fa","ia","ha","create","setPrototypeOf","ja","ka","la","__proto__","ma","na","getOwnPropertyDescriptor","za","oa","m","j","v","l","pa","qa","D","ra","sa","ta","return","ua","va","u","throw","wa","E","xa","F","fill","k","I","L","M","K","H","CustomEvent","Event","dispatchEvent","cancelable","createEvent","initCustomEvent","reason","T","p","n","q","t","r","race","all","max","is","RegExp","ya","Aa","execScript","shift","Ba","Ca","map","Da","Ea","Fa","Ga","subarray","charAt","Ha","concat","Ia","Ja","btoa","Ka","fromCharCode","Oa","La","Ma","Na","atob","charCodeAt","Pa","Qa","Ra","G","Sa","abs","Ta","Xa","Ua","BigInt","Va","Wa","Ya","Za","$a","ab","cb","eb","gb","bb","db","TextDecoder","fb","TextEncoder","hb","ib","V","jb","kb","lb","C","byteOffset","mb","nb","S","ob","pb","reset","qb","rb","sb","tb","pop","setOptions","ub","vb","end","wb","xb","N","yb","R","O","P","zb","Q","Ab","Bb","Cb","Db","Eb","Fb","Sb","Gb","Hb","o","Ib","Jb","B","U","Kb","Lb","freeze","Mb","Nb","isFrozen","Ob","Pb","Qb","Rb","W","Tb","Ub","Vb","Wb","toJSON","Xb","Yb","Zb","$b","X","MAX_VALUE","ac","bc","J","cc","Z","dc","ec","fc","gc","hc","ic","jc","kc","lc","mc","nc","oc","pc","qc","rc","sc","tc","uc","vc","wc","xc","yc","zc","Ac","Y","NaN","pow","isNaN","round","LN2","Bc","Cc","Dc","fatal","decode","encode","Ec","Fc","Gc","Hc","Ic","Jc","addClassification","Kc","Lc","Mc","Nc","Oc","Pc","Qc","Rc","Sc","Tc","createShader","VERTEX_SHADER","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","Uc","displayName","Vc","visibility","Wc","Xc","Yc","transferToImageBitmap","createImageBitmap","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","useProgram","getUniformLocation","getAttribLocation","createBuffer","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","bufferData","Float32Array","STATIC_DRAW","uniform1i","viewport","activeTexture","TEXTURE0","bindTexture2d","glName","bindFramebuffer","DRAW_FRAMEBUFFER","FRAMEBUFFER","clearColor","clear","COLOR_BUFFER_BIT","colorMask","drawArrays","TRIANGLE_FAN","disableVertexAttribArray","Zc","$c","ad","bd","cd","setAttribute","body","appendChild","dd","WebAssembly","instantiate","ed","listeners","ga","locateFile","pathname","substring","options","keys","default","fd","files","filter","gd","path","w","overrideFile","simd","createMediapipeSolutionsWasm","createMediapipeSolutionsPackedAssets","graph","importScripts","Module","OffscreenCanvas","GL","createContext","antialias","alpha","WebGL2RenderingContext","makeContextCurrent","SolutionWasm","hd","loadGraph","jd","GraphOptionChangeRequestList","push_back","changeOptions","delete","fetch","arrayBuffer","kd","ld","getRectList","getLandmarksList","getClassificationsList","od","pd","qd","rd","sd","rotation","transform","Uint8BlobList","Texture2dDataOut","wants","StringList","PacketListener","implement","onResults","outs","attachMultiListener","md","nd","modelSelection","image","segmentationMask","inputs","useCpuInference","graphOptionXref","calculatorType","fieldName","platform","selfieMode","calculatorIndex","calculatorName","onChange","valueNumber","valueBoolean","valueString","clearOverriddenFiles","performance","PacketDataList","createTexture","HTMLVideoElement","HTMLImageElement","naturalWidth","naturalHeight","texImage2D","TEXTURE_2D","RGBA","UNSIGNED_BYTE","DetectionListData","setBoundingBox","addNormalizedLandmark","pushTexture2d","pushDetectionList","BOOL","NUMBER","_virtualBackgroundImage","WeakMap","_noEffect","WeakSet","VideoEffect","selfieSegmentation","effectCanvas","ctx","rawLocalVideo","deepAR","backgroundBlurRange","edgeBlurRange","effectName","NO_EFFECT","statTimerId","renderedFrameCount","lastRenderedFrameCount","effectCanvasFPS","videoCallbackPeriodMs","initializeSelfieSegmentation","isInitialized","init","setRawLocalVideo","trackSettings","getSettings","frameRate","createEffectCanvas","SelfieSegmentation","file","LOCATE_FILE_URL","results","virtualBackgroundImage","imageElement","startFpsCalculation","getTime","deltaTime","stopFpsCalculation","processFrame","_this2","setBlurEffectRange","enableEffect","deepARApiKey","deepARModel","_this3","DEEPAR","VIRTUAL_BACKGROUND","BLUR_BACKGROUND","_noEffect2","currentEffectName","shutdown","DEBUG","processedStream","DeepAR","licenseKey","deeparWasmPath","DEEP_AR_FOLDER_ROOT_URL","callbacks","onInitialize","startVideo","onVideoStarted","switchEffect","DEEP_AR_EFFECTS_URL","DEEP_AR_EXTENSION","downloadFaceTrackingModel","setVideoElement","drawSegmentationMask","segmentation","drawBlurBackground","drawVirtualBackground","drawImageDirectly","save","globalCompositeOperation","restore","clearRect","blurAmount","pause","webrtcAdaptorInstance","videoEffect","setup","webcamVideo","screenCaptureStream","async","parseInt","onMounted","__exports__","components","Edit","storageManager","methods","route","useRoute","routeName","meta","title","useTitle","render"],"sourceRoot":""}