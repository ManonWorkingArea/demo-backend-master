"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[1480],{11480:function(e,t,o){o.d(t,{A:function(){return He}});var r=o(20641),a=o(90033),n=o(53751);const s={class:"taxonomy-selector"},l={key:0,class:"flex items-center justify-center py-3"},i={key:1,class:"bg-red-50 border border-red-200 rounded p-2"},u={class:"flex items-center"},d={class:"text-xs text-red-800"},c={key:2,class:"space-y-3"},m={class:"bg-gray-50 border-b border-gray-200 px-4 py-3"},p={class:"flex items-center justify-between"},g={class:"flex items-center space-x-3"},f={class:"text-sm font-semibold text-gray-900"},y={key:0,class:"ml-2 text-xs text-gray-500 font-normal"},x={key:0,class:"text-xs text-gray-600 mt-0.5"},k={class:"flex items-center gap-2"},v={class:"text-sm text-gray-600"},b=["onClick"],h={class:"p-3"},T={key:0,class:"mb-2"},L={class:"relative"},C=["onUpdate:modelValue","placeholder"],_={class:"terms-grid"},w={class:"flex items-center gap-3 pb-3 border-b border-gray-100"},A=["type","name","checked","onChange"],S=["onClick"],E={class:"text-sm font-semibold text-gray-900 truncate"},D={key:0,class:"text-xs text-gray-500 truncate"},I={key:0,class:"text-green-600"},G={key:0,class:"pt-3"},X={class:"grid grid-cols-2 gap-1"},F=["type","name","checked","onChange"],Q=["onClick"],V={class:"text-sm font-semibold text-gray-800 truncate"},$={key:0,class:"text-xs text-gray-500 truncate"},q={key:0,class:"text-green-600 flex-shrink-0"},R={class:"flex items-center gap-3"},M=["type","name","checked","onChange"],K=["onClick"],O={class:"text-sm font-semibold text-gray-900 truncate"},W={key:0,class:"text-xs text-gray-500 truncate"},z={key:0,class:"text-green-600"},j={key:1,class:"text-center py-4"},U=["onClick"],B={key:2,class:"mt-4 pt-3 border-t border-gray-200"},N={class:"flex items-center justify-between mb-2"},P={class:"text-sm font-medium text-gray-700 flex items-center gap-2"},J=["onClick"],H={class:"flex flex-wrap gap-2"},Y={class:"flex items-center gap-1.5"},Z={class:"text-sm font-medium text-gray-800"},ee={key:0,class:"text-xs text-gray-500"},te=["onClick"],oe={key:3,class:"text-center py-6"},re={class:"text-xs text-gray-500 mb-3"},ae={key:4,class:"mt-4 p-4 bg-gray-50 border border-gray-200 rounded-lg"},ne={class:"flex items-center justify-between"},se={class:"flex items-center gap-2"},le={class:"text-sm font-medium text-gray-700"},ie={key:5,class:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm overflow-y-auto h-full w-full z-50"},ue={class:"relative top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg shadow-xl min-w-[500px] max-w-[600px] border border-gray-200"},de={class:"flex justify-between items-center p-4 border-b border-gray-200 bg-white rounded-t-lg"},ce={class:"p-6"},me={key:0,class:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"},pe={class:"flex items-center gap-2 text-blue-800"},ge={class:"font-medium"},fe={key:0,class:"text-blue-600 text-sm"},ye={key:0,class:"text-blue-700 text-sm mt-1"},xe={class:"space-y-4"},ke={class:"relative"},ve=["value"],be={key:0},he={key:0},Te={key:0},Le={class:"block text-sm font-medium text-gray-700 mb-1"},Ce={key:0,class:"text-red-500 ml-1"},_e=["onUpdate:modelValue","placeholder"],we={key:1},Ae={class:"block text-sm font-medium text-gray-700 mb-1"},Se={key:0,class:"text-red-500 ml-1"},Ee=["onUpdate:modelValue","placeholder"],De={key:2},Ie={class:"block text-sm font-medium text-gray-700 mb-1"},Ge={key:0,class:"text-red-500 ml-1"},Xe=["onUpdate:modelValue"],Fe=["value"],Qe={key:3},Ve={class:"flex items-center gap-2"},$e=["onUpdate:modelValue"],qe={class:"text-sm font-medium text-gray-700"},Re={key:0,class:"text-red-500 ml-1"},Me={key:1,class:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg flex items-center gap-2"},Ke={class:"flex justify-end gap-3 p-4 border-t border-gray-200 bg-white rounded-b-lg"},Oe=["disabled"],We=["disabled"];function ze(e,t,o,ze,je,Ue){return(0,r.uX)(),(0,r.CE)("div",s,[ze.loading?((0,r.uX)(),(0,r.CE)("div",l,t[10]||(t[10]=[(0,r.Lk)("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"},null,-1),(0,r.Lk)("span",{class:"ml-2 text-xs text-gray-600"},"à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”...",-1)]))):ze.error?((0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",u,[t[11]||(t[11]=(0,r.Lk)("i",{class:"fas fa-exclamation-triangle text-red-600 mr-1 text-xs"},null,-1)),(0,r.Lk)("span",d,(0,a.v_)(ze.error),1)]),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>ze.refreshTaxonomy&&ze.refreshTaxonomy(...e)),class:"mt-1 text-xs text-red-600 hover:text-red-700 underline"}," à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆ ")])):ze.taxonomyGroups.length>0?((0,r.uX)(),(0,r.CE)("div",c,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ze.taxonomyGroups,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e._id,class:"bg-white border border-gray-200 rounded shadow-sm"},[(0,r.Lk)("div",m,[(0,r.Lk)("div",p,[(0,r.Lk)("div",g,[t[12]||(t[12]=(0,r.Lk)("div",{class:"w-6 h-6 bg-blue-500 rounded flex items-center justify-center"},[(0,r.Lk)("i",{class:"fas fa-tags text-white text-sm"})],-1)),(0,r.Lk)("div",null,[(0,r.Lk)("h3",f,[(0,r.eW)((0,a.v_)(e.name)+" ",1),e.code?((0,r.uX)(),(0,r.CE)("span",y,"("+(0,a.v_)(e.code)+")",1)):(0,r.Q3)("",!0)]),e.description?((0,r.uX)(),(0,r.CE)("p",x,(0,a.v_)(e.description),1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",k,[(0,r.Lk)("span",v,(0,a.v_)(ze.getSelectedTermsForGroup(e._id).length)+"/"+(0,a.v_)(ze.getTermsForGroup(e._id).length),1),(0,r.Lk)("button",{onClick:t=>ze.openQuickAddModal(e),type:"button",class:"p-1.5 bg-green-100 text-green-700 hover:bg-green-200 rounded transition-colors",title:"à¹€à¸žà¸´à¹ˆà¸¡ Term à¹ƒà¸«à¸¡à¹ˆ"},t[13]||(t[13]=[(0,r.Lk)("i",{class:"fas fa-plus text-xs"},null,-1)]),8,b)])])]),(0,r.Lk)("div",h,[ze.getTermsForGroup(e._id).length>0?((0,r.uX)(),(0,r.CE)("div",T,[(0,r.Lk)("div",L,[t[14]||(t[14]=(0,r.Lk)("div",{class:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none"},[(0,r.Lk)("i",{class:"fas fa-search text-gray-400 text-xs"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t=>ze.searchQueries[e._id]=t,type:"text",placeholder:`à¸„à¹‰à¸™à¸«à¸²à¹ƒà¸™ ${e.name}...`,class:"w-full pl-6 pr-2 py-1.5 border border-gray-300 rounded text-xs focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,8,C),[[n.Jo,ze.searchQueries[e._id]]])])])):(0,r.Q3)("",!0),(0,r.Lk)("div",_,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ze.getTermsGrouped(e._id).parentSections,(n=>((0,r.uX)(),(0,r.CE)("div",{key:n.parent._id,class:"terms-grid-item"},[(0,r.Lk)("div",w,[(0,r.Lk)("input",{type:"single"===ze.getGroupSelectionMode(e)?"radio":"checkbox",name:"single"===ze.getGroupSelectionMode(e)?`group-${e._id}`:void 0,checked:o.modelValue.includes(n.parent._id),onChange:t=>ze.toggleTerm(n.parent._id,e._id),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,40,A),(0,r.Lk)("div",{class:"flex-1 min-w-0 cursor-pointer",onClick:t=>ze.toggleTerm(n.parent._id,e._id)},[(0,r.Lk)("h4",E,(0,a.v_)(n.parent.customData?.name||n.parent.customData?.à¸Šà¸·à¹ˆà¸­||n.parent.name||"à¹„à¸¡à¹ˆà¸¡à¸µà¸Šà¸·à¹ˆà¸­"),1),n.parent.code||n.parent.customData?.à¸£à¸«à¸±à¸ª?((0,r.uX)(),(0,r.CE)("p",D,(0,a.v_)(n.parent.code||n.parent.customData?.à¸£à¸«à¸±à¸ª),1)):(0,r.Q3)("",!0)],8,S),o.modelValue.includes(n.parent._id)?((0,r.uX)(),(0,r.CE)("div",I,t[15]||(t[15]=[(0,r.Lk)("i",{class:"fas fa-check-circle text-sm"},null,-1)]))):(0,r.Q3)("",!0)]),n.children.length>0?((0,r.uX)(),(0,r.CE)("div",G,[(0,r.Lk)("div",X,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.children,(n=>((0,r.uX)(),(0,r.CE)("div",{key:n._id,class:"flex items-center gap-3 p-2 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors"},[(0,r.Lk)("input",{type:"single"===ze.getGroupSelectionMode(e)?"radio":"checkbox",name:"single"===ze.getGroupSelectionMode(e)?`group-${e._id}`:void 0,checked:o.modelValue.includes(n._id),onChange:t=>ze.toggleTerm(n._id,e._id),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded flex-shrink-0"},null,40,F),(0,r.Lk)("div",{class:"flex-1 min-w-0 cursor-pointer",onClick:t=>ze.toggleTerm(n._id,e._id)},[(0,r.Lk)("div",V,(0,a.v_)(n.customData?.name||n.customData?.à¸Šà¸·à¹ˆà¸­||n.name||"à¹„à¸¡à¹ˆà¸¡à¸µà¸Šà¸·à¹ˆà¸­"),1),n.code||n.customData?.à¸£à¸«à¸±à¸ª?((0,r.uX)(),(0,r.CE)("div",$,(0,a.v_)(n.code||n.customData?.à¸£à¸«à¸±à¸ª),1)):(0,r.Q3)("",!0)],8,Q),o.modelValue.includes(n._id)?((0,r.uX)(),(0,r.CE)("div",q,t[16]||(t[16]=[(0,r.Lk)("i",{class:"fas fa-check-circle text-sm"},null,-1)]))):(0,r.Q3)("",!0)])))),128))])])):(0,r.Q3)("",!0)])))),128)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ze.getTermsGrouped(e._id).standaloneTerms,(n=>((0,r.uX)(),(0,r.CE)("div",{key:n._id,class:"terms-grid-item"},[(0,r.Lk)("div",R,[(0,r.Lk)("input",{type:"single"===ze.getGroupSelectionMode(e)?"radio":"checkbox",name:"single"===ze.getGroupSelectionMode(e)?`group-${e._id}`:void 0,checked:o.modelValue.includes(n._id),onChange:t=>ze.toggleTerm(n._id,e._id),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,40,M),(0,r.Lk)("div",{class:"flex-1 min-w-0 cursor-pointer",onClick:t=>ze.toggleTerm(n._id,e._id)},[(0,r.Lk)("h4",O,(0,a.v_)(n.customData?.name||n.customData?.à¸Šà¸·à¹ˆà¸­||n.name||"à¹„à¸¡à¹ˆà¸¡à¸µà¸Šà¸·à¹ˆà¸­"),1),n.code||n.customData?.à¸£à¸«à¸±à¸ª?((0,r.uX)(),(0,r.CE)("p",W,(0,a.v_)(n.code||n.customData?.à¸£à¸«à¸±à¸ª),1)):(0,r.Q3)("",!0)],8,K),o.modelValue.includes(n._id)?((0,r.uX)(),(0,r.CE)("div",z,t[17]||(t[17]=[(0,r.Lk)("i",{class:"fas fa-check-circle text-sm"},null,-1)]))):(0,r.Q3)("",!0)])])))),128))]),0===ze.getTermsGrouped(e._id).parentSections.length&&0===ze.getTermsGrouped(e._id).standaloneTerms.length?((0,r.uX)(),(0,r.CE)("div",j,[t[18]||(t[18]=(0,r.Lk)("i",{class:"fas fa-search text-gray-400 text-lg mb-1"},null,-1)),t[19]||(t[19]=(0,r.Lk)("p",{class:"text-xs text-gray-500 mb-2"},"à¹„à¸¡à¹ˆà¸žà¸šà¸£à¸²à¸¢à¸à¸²à¸£",-1)),(0,r.Lk)("button",{onClick:t=>ze.openQuickAddModal(e),type:"button",class:"text-xs text-blue-600 hover:text-blue-700 underline"}," à¹€à¸žà¸´à¹ˆà¸¡ Term à¹à¸£à¸à¹ƒà¸™à¸à¸¥à¸¸à¹ˆà¸¡à¸™à¸µà¹‰ ",8,U)])):(0,r.Q3)("",!0),ze.getSelectedTermsForGroup(e._id).length>0?((0,r.uX)(),(0,r.CE)("div",B,[(0,r.Lk)("div",N,[(0,r.Lk)("h4",P,[t[20]||(t[20]=(0,r.Lk)("i",{class:"fas fa-check-circle text-green-600"},null,-1)),(0,r.eW)(" à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸ ("+(0,a.v_)(ze.getSelectedTermsForGroup(e._id).length)+") ",1)]),(0,r.Lk)("button",{onClick:t=>ze.clearGroupSelections(e._id),class:"text-xs text-red-600 hover:text-red-700 px-2 py-1 rounded hover:bg-red-50 transition-colors",title:"à¸¥à¹‰à¸²à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¹ƒà¸™à¸à¸¥à¸¸à¹ˆà¸¡à¸™à¸µà¹‰"},t[21]||(t[21]=[(0,r.Lk)("i",{class:"fas fa-times mr-1"},null,-1),(0,r.eW)(" à¸¥à¹‰à¸²à¸‡ ")]),8,J)]),(0,r.Lk)("div",H,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ze.getSelectedTermsForGroup(e._id),(e=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:"group-tag-item inline-flex items-center gap-2 bg-white border border-green-300 rounded-full px-2.5 py-1 text-sm shadow-sm hover:shadow-md transition-all duration-200 hover:scale-105"},[(0,r.Lk)("div",Y,[t[22]||(t[22]=(0,r.Lk)("div",{class:"w-2 h-2 bg-green-500 rounded-full"},null,-1)),(0,r.Lk)("span",Z,(0,a.v_)(ze.getTermDisplayName(e)),1),ze.getTermById(e)?.code||ze.getTermById(e)?.customData?.à¸£à¸«à¸±à¸ª?((0,r.uX)(),(0,r.CE)("span",ee," ("+(0,a.v_)(ze.getTermById(e)?.code||ze.getTermById(e)?.customData?.à¸£à¸«à¸±à¸ª)+") ",1)):(0,r.Q3)("",!0)]),(0,r.Lk)("button",{onClick:t=>ze.removeTerm(e),class:"ml-1 w-4 h-4 flex items-center justify-center text-red-500 hover:text-red-700 hover:bg-red-100 rounded-full transition-colors duration-200",title:"à¸¥à¸š"},t[23]||(t[23]=[(0,r.Lk)("i",{class:"fas fa-times text-xs"},null,-1)]),8,te)])))),128))])])):(0,r.Q3)("",!0)])])))),128))])):((0,r.uX)(),(0,r.CE)("div",oe,[t[25]||(t[25]=(0,r.Lk)("i",{class:"fas fa-tags text-gray-400 text-xl mb-2"},null,-1)),t[26]||(t[26]=(0,r.Lk)("h3",{class:"text-sm font-medium text-gray-900 mb-1"},"à¹„à¸¡à¹ˆà¸¡à¸µ Taxonomy",-1)),(0,r.Lk)("p",re,"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µ Taxonomy à¸ªà¸³à¸«à¸£à¸±à¸š "+(0,a.v_)(o.contentTypeLabel||o.contentType),1),(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>ze.refreshTaxonomy&&ze.refreshTaxonomy(...e)),class:"px-3 py-1.5 bg-blue-600 text-white rounded text-xs hover:bg-blue-700"},t[24]||(t[24]=[(0,r.Lk)("i",{class:"fas fa-refresh mr-1"},null,-1),(0,r.eW)(" à¸£à¸µà¹€à¸Ÿà¸£à¸Š ")]))])),o.modelValue.length>0&&ze.taxonomyGroups.length>1?((0,r.uX)(),(0,r.CE)("div",ae,[(0,r.Lk)("div",ne,[(0,r.Lk)("div",se,[t[27]||(t[27]=(0,r.Lk)("i",{class:"fas fa-list-check text-blue-600"},null,-1)),(0,r.Lk)("span",le," à¸ªà¸£à¸¸à¸›à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”: "+(0,a.v_)(o.modelValue.length)+" à¸£à¸²à¸¢à¸à¸²à¸£ ",1)]),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>ze.clearAllSelections&&ze.clearAllSelections(...e)),class:"text-sm text-red-600 hover:text-red-700 px-3 py-1.5 rounded-md hover:bg-red-50 transition-colors duration-200 font-medium"},t[28]||(t[28]=[(0,r.Lk)("i",{class:"fas fa-times mr-1"},null,-1),(0,r.eW)(" à¸¥à¹‰à¸²à¸‡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” ")]))])])):(0,r.Q3)("",!0),ze.showQuickAddModal?((0,r.uX)(),(0,r.CE)("div",ie,[(0,r.Lk)("div",ue,[(0,r.Lk)("div",de,[t[30]||(t[30]=(0,r.Lk)("h3",{class:"text-lg font-semibold text-gray-900 flex items-center gap-2"},[(0,r.Lk)("i",{class:"fas fa-plus-circle text-green-600"}),(0,r.eW)(" à¹€à¸žà¸´à¹ˆà¸¡ Term à¹ƒà¸«à¸¡à¹ˆ ")],-1)),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>ze.closeQuickAddModal&&ze.closeQuickAddModal(...e)),class:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors"},t[29]||(t[29]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,r.Lk)("div",ce,[ze.selectedGroupForAdd?((0,r.uX)(),(0,r.CE)("div",me,[(0,r.Lk)("div",pe,[t[31]||(t[31]=(0,r.Lk)("i",{class:"fas fa-tags"},null,-1)),(0,r.Lk)("span",ge,(0,a.v_)(ze.selectedGroupForAdd.name),1),ze.selectedGroupForAdd.code?((0,r.uX)(),(0,r.CE)("span",fe,"("+(0,a.v_)(ze.selectedGroupForAdd.code)+")",1)):(0,r.Q3)("",!0)]),ze.selectedGroupForAdd.description?((0,r.uX)(),(0,r.CE)("p",ye,(0,a.v_)(ze.selectedGroupForAdd.description),1)):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),(0,r.Lk)("div",xe,[(0,r.Lk)("div",null,[t[33]||(t[33]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"à¹€à¸›à¹‡à¸™ Sub Term à¸‚à¸­à¸‡ (à¸–à¹‰à¸²à¸¡à¸µ)",-1)),(0,r.Lk)("div",ke,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>ze.quickAddForm.parentId=e),class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[t[32]||(t[32]=(0,r.Lk)("option",{value:""},"-- à¹€à¸›à¹‡à¸™ Main Term (à¹„à¸¡à¹ˆà¸¡à¸µ Parent) --",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ze.getAvailableParentTerms(),(e=>((0,r.uX)(),(0,r.CE)("option",{key:e._id,value:e._id},[(0,r.eW)((0,a.v_)(e.customData?.name||e.customData?.à¸Šà¸·à¹ˆà¸­||e.name||"à¹„à¸¡à¹ˆà¸¡à¸µà¸Šà¸·à¹ˆà¸­")+" ",1),e.code||e.customData?.à¸£à¸«à¸±à¸ª?((0,r.uX)(),(0,r.CE)("span",be," ("+(0,a.v_)(e.code||e.customData?.à¸£à¸«à¸±à¸ª)+")",1)):(0,r.Q3)("",!0)],8,ve)))),128))],512),[[n.u1,ze.quickAddForm.parentId]])])]),(0,r.Lk)("div",null,[t[34]||(t[34]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," à¸Šà¸·à¹ˆà¸­ Term * ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>ze.quickAddForm.name=e),type:"text",placeholder:"à¸Šà¸·à¹ˆà¸­à¸‚à¸­à¸‡ Term à¹ƒà¸«à¸¡à¹ˆ",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onKeyup:t[6]||(t[6]=(0,n.jR)(((...e)=>ze.submitQuickAddTerm&&ze.submitQuickAddTerm(...e)),["enter"]))},null,544),[[n.Jo,ze.quickAddForm.name]])]),(0,r.Lk)("div",null,[t[35]||(t[35]=(0,r.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," à¸£à¸«à¸±à¸ª Term ",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>ze.quickAddForm.code=e),type:"text",placeholder:"à¸£à¸«à¸±à¸ªà¸‚à¸­à¸‡ Term (à¸–à¹‰à¸²à¸¡à¸µ)",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,512),[[n.Jo,ze.quickAddForm.code]]),t[36]||(t[36]=(0,r.Lk)("small",{class:"text-gray-500 text-xs mt-1"},"à¸£à¸«à¸±à¸ªà¸ªà¸³à¸«à¸£à¸±à¸šà¸­à¹‰à¸²à¸‡à¸­à¸´à¸‡ à¹„à¸¡à¹ˆà¸šà¸±à¸‡à¸„à¸±à¸š",-1))]),ze.selectedGroupForAdd&&ze.selectedGroupForAdd.fieldConfig&&ze.selectedGroupForAdd.fieldConfig.length>0?((0,r.uX)(),(0,r.CE)("div",he,[t[38]||(t[38]=(0,r.Lk)("h4",{class:"text-sm font-medium text-gray-700 mb-2 pb-2 border-b border-gray-200"}," à¸Ÿà¸´à¸¥à¸”à¹Œà¹€à¸žà¸´à¹ˆà¸¡à¹€à¸•à¸´à¸¡ ",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(ze.selectedGroupForAdd.fieldConfig,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.key,class:"mb-3"},["input"===e.type?((0,r.uX)(),(0,r.CE)("div",Te,[(0,r.Lk)("label",Le,[(0,r.eW)((0,a.v_)(e.label)+" ",1),e.required?((0,r.uX)(),(0,r.CE)("span",Ce,"*")):(0,r.Q3)("",!0)]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t=>ze.quickAddForm.customData[e.key]=t,type:"text",placeholder:e.label,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,8,_e),[[n.Jo,ze.quickAddForm.customData[e.key]]])])):(0,r.Q3)("",!0),"textarea"===e.type?((0,r.uX)(),(0,r.CE)("div",we,[(0,r.Lk)("label",Ae,[(0,r.eW)((0,a.v_)(e.label)+" ",1),e.required?((0,r.uX)(),(0,r.CE)("span",Se,"*")):(0,r.Q3)("",!0)]),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t=>ze.quickAddForm.customData[e.key]=t,rows:"3",placeholder:e.label,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},null,8,Ee),[[n.Jo,ze.quickAddForm.customData[e.key]]])])):(0,r.Q3)("",!0),"select"===e.type?((0,r.uX)(),(0,r.CE)("div",De,[(0,r.Lk)("label",Ie,[(0,r.eW)((0,a.v_)(e.label)+" ",1),e.required?((0,r.uX)(),(0,r.CE)("span",Ge,"*")):(0,r.Q3)("",!0)]),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t=>ze.quickAddForm.customData[e.key]=t,class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},[t[37]||(t[37]=(0,r.Lk)("option",{value:""},"-- à¹€à¸¥à¸·à¸­à¸ --",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.options,(e=>((0,r.uX)(),(0,r.CE)("option",{key:e.value,value:e.value},(0,a.v_)(e.label),9,Fe)))),128))],8,Xe),[[n.u1,ze.quickAddForm.customData[e.key]]])])):(0,r.Q3)("",!0),"status"===e.type?((0,r.uX)(),(0,r.CE)("div",Qe,[(0,r.Lk)("label",Ve,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t=>ze.quickAddForm.customData[e.key]=t,type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded","true-value":"true","false-value":"false"},null,8,$e),[[n.lH,ze.quickAddForm.customData[e.key]]]),(0,r.Lk)("span",qe,[(0,r.eW)((0,a.v_)(e.label)+" ",1),e.required?((0,r.uX)(),(0,r.CE)("span",Re,"*")):(0,r.Q3)("",!0)])])])):(0,r.Q3)("",!0)])))),128))])):(0,r.Q3)("",!0)]),ze.quickAddLoading?((0,r.uX)(),(0,r.CE)("div",Me,t[39]||(t[39]=[(0,r.Lk)("div",{class:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1),(0,r.Lk)("span",{class:"text-blue-700 text-sm"},"à¸à¸³à¸¥à¸±à¸‡à¹€à¸žà¸´à¹ˆà¸¡ Term à¹ƒà¸«à¸¡à¹ˆ...",-1)]))):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ke,[(0,r.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>ze.closeQuickAddModal&&ze.closeQuickAddModal(...e)),disabled:ze.quickAddLoading,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors text-sm font-medium disabled:opacity-50"}," à¸¢à¸à¹€à¸¥à¸´à¸ ",8,Oe),(0,r.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>ze.submitQuickAddTerm&&ze.submitQuickAddTerm(...e)),disabled:ze.quickAddLoading||!ze.quickAddForm.name?.trim(),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"},t[40]||(t[40]=[(0,r.Lk)("i",{class:"fas fa-plus mr-1"},null,-1),(0,r.eW)(" à¹€à¸žà¸´à¹ˆà¸¡ Term ")]),8,We)])])])):(0,r.Q3)("",!0)])}o(44114),o(17642),o(58004),o(33853),o(45876),o(32475),o(15024),o(31698),o(98992),o(54520),o(72577),o(3949),o(81454),o(37550);var je=o(50953),Ue=o(63112),Be=o(77823),Ne={name:"TaxonomySelector",props:{modelValue:{type:Array,default:()=>[]},contentType:{type:String,required:!0},contentTypeLabel:{type:String,default:""},maxSelections:{type:Number,default:null}},emits:["update:modelValue"],setup(e,{emit:t}){const{taxonomy:o,getTermById:a,getChildTerms:n,loading:s,error:l}=(0,Ue.Di)();console.log("TaxonomySelector setup - Content Type:",e.contentType),console.log("TaxonomySelector setup - Loading:",s.value),console.log("TaxonomySelector setup - Error:",l.value);const i=(0,je.KR)({}),u=(0,je.KR)(!1),d=(0,je.KR)(!1),c=(0,je.KR)(null),m=(0,je.KR)({parentId:"",name:"",code:"",customData:{}}),p=(0,r.EW)((()=>{const t=o.get(e.contentType);return console.log("TaxonomySelector - Taxonomy Groups for",e.contentType,":",t),t})),g=e=>e.selectionMode||"multiple",f=e=>e.selectionLimit||3,y=t=>{const r=o.getTerms(e.contentType).filter((e=>e.taxonomy===t));return console.log("TaxonomySelector - Terms for group",t,":",r),r},x=e=>y(e).filter((e=>!e.parentId)),k=e=>n(e),v=t=>e.modelValue.filter((e=>{const o=a(e);return o&&o.taxonomy===t})),b=(o,r)=>{console.log("TaxonomySelector - Toggle term:",o,"in group:",r);const n=[...e.modelValue],s=n.indexOf(o),l=p.value.find((e=>e._id===r));if(!l)return void console.warn("Group not found:",r);const i=g(l),u=f(l),d=v(r);if(console.log("Selection mode:",i,"Limit:",u,"Currently selected in group:",d.length),-1===s){let t=!0,s="";if("single"===i){const e=d.map((e=>a(e)?._id)).filter(Boolean);e.forEach((e=>{const t=n.indexOf(e);-1!==t&&(n.splice(t,1),console.log("Removed other term in single mode:",e))})),n.push(o),s="à¹€à¸¥à¸·à¸­à¸à¸£à¸²à¸¢à¸à¸²à¸£à¹ƒà¸«à¸¡à¹ˆ (à¹‚à¸«à¸¡à¸”à¹€à¸¥à¸·à¸­à¸à¹„à¸”à¹‰à¸«à¸™à¸¶à¹ˆà¸‡à¸£à¸²à¸¢à¸à¸²à¸£)"}else if("limited"===i)if(d.length>=u)t=!1,s=`à¹€à¸¥à¸·à¸­à¸à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” ${u} à¸£à¸²à¸¢à¸à¸²à¸£à¹ƒà¸™à¸à¸¥à¸¸à¹ˆà¸¡à¸™à¸µà¹‰ à¸à¸£à¸¸à¸“à¸²à¸¥à¸šà¸£à¸²à¸¢à¸à¸²à¸£à¹€à¸”à¸´à¸¡à¸à¹ˆà¸­à¸™à¹€à¸¥à¸·à¸­à¸à¹ƒà¸«à¸¡à¹ˆ`,console.warn(`Selection limit reached for group ${r}: ${u}`),(0,Be.A)({type:"warning",title:"à¸–à¸¶à¸‡à¸‚à¸µà¸”à¸ˆà¸³à¸à¸±à¸”à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸",message:s,autohide:!0,duration:4e3});else{n.push(o);const e=u-d.length-1;s=e>0?`à¹€à¸¥à¸·à¸­à¸à¹„à¸”à¹‰à¸­à¸µà¸ ${e} à¸£à¸²à¸¢à¸à¸²à¸£`:"à¹€à¸¥à¸·à¸­à¸à¸„à¸£à¸šà¸ˆà¸³à¸™à¸§à¸™à¸ªà¸¹à¸‡à¸ªà¸¸à¸”à¹à¸¥à¹‰à¸§"}else e.maxSelections&&n.length>=e.maxSelections?(t=!1,s=`à¹€à¸¥à¸·à¸­à¸à¹„à¸”à¹‰à¸ªà¸¹à¸‡à¸ªà¸¸à¸” ${e.maxSelections} à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”`,console.warn("Global maximum selections reached:",e.maxSelections),(0,Be.A)({type:"warning",title:"à¸–à¸¶à¸‡à¸‚à¸µà¸”à¸ˆà¸³à¸à¸±à¸”à¸à¸²à¸£à¹€à¸¥à¸·à¸­à¸",message:s,autohide:!0})):(n.push(o),s="à¹€à¸žà¸´à¹ˆà¸¡à¸£à¸²à¸¢à¸à¸²à¸£à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢");t&&s&&"multiple"!==i&&(0,Be.A)({type:"success",message:s,autohide:!0,duration:2e3})}else if(n.splice(s,1),console.log("Removed term:",o),"limited"===i){const e=u-v(r).length+1;(0,Be.A)({type:"info",message:`à¸¥à¸šà¸£à¸²à¸¢à¸à¸²à¸£à¹à¸¥à¹‰à¸§ à¹€à¸¥à¸·à¸­à¸à¹„à¸”à¹‰à¸­à¸µà¸ ${e} à¸£à¸²à¸¢à¸à¸²à¸£`,autohide:!0,duration:2e3})}console.log("TaxonomySelector - Emitting new selection:",n),t("update:modelValue",n)},h=o=>{const r=[...e.modelValue],a=r.indexOf(o);-1!==a&&(r.splice(a,1),t("update:modelValue",r))},T=e=>{const t=a(e);return t?t.customData?t.customData.name||t.customData.à¸Šà¸·à¹ˆà¸­||t.name||"à¹„à¸¡à¹ˆà¸¡à¸µà¸Šà¸·à¹ˆà¸­":t.name||"à¹„à¸¡à¹ˆà¸¡à¸µà¸Šà¸·à¹ˆà¸­":"à¹„à¸¡à¹ˆà¸žà¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"},L=e=>{const t=a(e);if(!t)return"";const o=p.value.find((e=>e._id===t.taxonomy));return o?o.name:"à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸à¸à¸¥à¸¸à¹ˆà¸¡"},C=e=>{const t=a(e);if(!t)return"multiple";const o=p.value.find((e=>e._id===t.taxonomy));return o?g(o):"multiple"},_=()=>{t("update:modelValue",[]),(0,Be.A)({type:"success",message:"à¸¥à¹‰à¸²à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”à¹à¸¥à¹‰à¸§",autohide:!0,duration:2e3})},w=o=>{const r=v(o),a=[...e.modelValue];r.forEach((e=>{const t=a.indexOf(e);-1!==t&&a.splice(t,1)})),t("update:modelValue",a);const n=p.value.find((e=>e._id===o)),s=n?n.name:"à¸à¸¥à¸¸à¹ˆà¸¡à¸™à¸µà¹‰";(0,Be.A)({type:"success",message:`à¸¥à¹‰à¸²à¸‡à¸£à¸²à¸¢à¸à¸²à¸£à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸à¹ƒà¸™${s}à¹à¸¥à¹‰à¸§`,autohide:!0,duration:2e3})},A=async()=>{console.log("TaxonomySelector - Refreshing taxonomy data..."),o.fetchTaxonomyData&&await o.fetchTaxonomyData(!0)},S=e=>{const t=y(e);console.log("getTermsGrouped - All terms for group",e,":",t);const o=i.value[e];let r=t;if(o&&o.trim()){const e=o.toLowerCase().trim(),a=t.filter((t=>!!t.customData&&Object.values(t.customData).some((t=>"string"===typeof t&&t.toLowerCase().includes(e))))),n=new Set(a.map((e=>e._id)));a.forEach((e=>{if(e.parentId&&!n.has(e.parentId)){const o=t.find((t=>t._id===e.parentId));o&&(a.push(o),n.add(o._id))}})),a.forEach((e=>{if(!e.parentId){const o=t.filter((t=>t.parentId===e._id));o.forEach((e=>{n.has(e._id)||(a.push(e),n.add(e._id))}))}})),r=a}const a=r.filter((e=>!e.parentId));console.log("getTermsGrouped - Root terms:",a);const n={parentSections:[],standaloneTerms:[]};return a.forEach((e=>{const t=r.filter((t=>t.parentId===e._id));console.log(`getTermsGrouped - Term "${e.name}" has ${t.length} children:`,t),t.length>0?n.parentSections.push({parent:e,children:t}):n.standaloneTerms.push(e)})),console.log("getTermsGrouped - Final result:",n),n};(0,r.sV)((()=>{console.log("TaxonomySelector mounted for content type:",e.contentType),console.log("Initial loading state:",s.value),console.log("Initial taxonomy groups:",p.value)}));const E=e=>{c.value=e,m.value.parentId="",m.value.name="",m.value.code="",m.value.customData={},u.value=!0},D=()=>{u.value=!1},I=()=>{const t=c.value?._id;if(!t)return[];const o=y(t),r=new Set(e.modelValue),a=o.filter((e=>!r.has(e._id)));return a},G=async()=>{if(d.value)return;if(!m.value.name?.trim())return void(0,Be.A)({type:"error",message:"à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­ Term à¹ƒà¸«à¸¡à¹ˆ",autohide:!0,duration:3e3});d.value=!0;const r=c.value?._id,a={taxonomy:r,name:m.value.name.trim(),code:m.value.code?.trim()||"",parentId:m.value.parentId||null,customData:m.value.customData};try{const r=await o.addTerm(e.contentType,a);console.log("Term added successfully:",r),t("update:modelValue",[...e.modelValue,r._id]),(0,Be.A)({type:"success",message:"à¹€à¸žà¸´à¹ˆà¸¡ Term à¹ƒà¸«à¸¡à¹ˆà¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢à¹à¸¥à¹‰à¸§",autohide:!0,duration:3e3}),D(),A()}catch(l){console.error("Error adding term:",l),(0,Be.A)({type:"error",message:"à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹€à¸žà¸´à¹ˆà¸¡ Term à¹ƒà¸«à¸¡à¹ˆ",autohide:!0,duration:3e3})}finally{d.value=!1}};return{taxonomy:o,loading:s,error:l,searchQueries:i,showQuickAddModal:u,quickAddLoading:d,selectedGroupForAdd:c,quickAddForm:m,taxonomyGroups:p,getTermById:a,getTermsForGroup:y,getRootTermsForGroup:x,getChildTerms:k,getSelectedTermsForGroup:v,toggleTerm:b,removeTerm:h,getTermDisplayName:T,getTermGroupName:L,getGroupSelectionMode:g,getGroupSelectionLimit:f,getGroupSelectionModeByTermId:C,clearAllSelections:_,clearGroupSelections:w,refreshTaxonomy:A,getTermsGrouped:S,openQuickAddModal:E,closeQuickAddModal:D,getAvailableParentTerms:I,submitQuickAddTerm:G}}},Pe=o(64621);const Je=(0,Pe.A)(Ne,[["render",ze],["__scopeId","data-v-31c17463"]]);var He=Je},63112:function(e,t,o){o.d(t,{Di:function(){return i}});o(44114),o(98992),o(54520),o(72577),o(81454),o(37550);var r=o(50953),a=o(20641),n=o(40475),s=o(40471);const l=new s.A(!1);function i(){const e=n.A.get("session"),t=n.A.get("configs"),o=(0,r.KR)([]),s=(0,r.KR)([]),i=(0,r.KR)(!1),u=(0,r.KR)(null),d=(0,r.KR)(null),c=(0,a.EW)((()=>({groups:o.value,terms:s.value,loading:i.value,error:u.value,isReady:!i.value&&o.value.length>=0&&s.value.length>=0}))),m=(0,r.KR)([{key:"course",label:"à¸„à¸­à¸£à¹Œà¸ªà¹€à¸£à¸µà¸¢à¸™",icon:"fas fa-graduation-cap",color:"blue"},{key:"post",label:"à¹‚à¸žà¸ªà¸•à¹Œ",icon:"fas fa-file-alt",color:"green"},{key:"member",label:"à¸ªà¸¡à¸²à¸Šà¸´à¸",icon:"fas fa-users",color:"purple"},{key:"resource",label:"à¸—à¸£à¸±à¸žà¸¢à¸²à¸à¸£",icon:"fas fa-folder",color:"orange"},{key:"product",label:"à¸ªà¸´à¸™à¸„à¹‰à¸²",icon:"fas fa-box",color:"red"}]),p=async(r=!1)=>{if(!r&&d.value&&Date.now()-d.value<3e5)console.log("ðŸ”„ à¹ƒà¸Šà¹‰à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ taxonomy à¸ˆà¸²à¸ cache");else{if(!e?.current?._id||!t?.key)return u.value="à¹„à¸¡à¹ˆà¸žà¸š session à¸«à¸£à¸·à¸­ config key",void console.error("âŒ à¹„à¸¡à¹ˆà¸žà¸š session à¸«à¸£à¸·à¸­ config key");i.value=!0,u.value=null,console.log("ðŸ”„ à¸à¸³à¸¥à¸±à¸‡à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ taxonomy...");try{const r={method:"find",args:[{$and:[{unit:e.current._id},{active:{$ne:!1}}]}],paging:{page:1,limit:500}},a=await l.POST("taxonomy/query",r,t.key);console.log("ðŸ” Raw API response:",a);let n=[];a&&a.data?Array.isArray(a.data)?n=a.data:a.data.data&&Array.isArray(a.data.data)?n=a.data.data:a.data.items&&Array.isArray(a.data.items)?n=a.data.items:"object"===typeof a.data&&a.data._id?n=[a.data]:(console.warn("âš ï¸ Unexpected response structure:",a.data),n=[]):(console.warn("âš ï¸ No data in response:",a),n=[]),console.log("ðŸ“¦ Processed data array:",n);const i=n.filter((e=>e&&"group"===e.type))||[],u=n.filter((e=>e&&"term"===e.type))||[];o.value=i,s.value=u,d.value=Date.now(),console.log("âœ… à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ taxonomy à¸ªà¸³à¹€à¸£à¹‡à¸ˆ:",{groups:i.length,terms:u.length,totalItems:n.length}),console.log("ðŸ“Š Groups:",i),console.log("ðŸ“‹ Terms:",u)}catch(a){u.value=`à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¸”à¸¶à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ taxonomy: ${a.message}`,console.error("âŒ Error fetching taxonomy data:",a),o.value=[],s.value=[]}finally{i.value=!1}}},g=async(o,r)=>{if(!e?.current?._id||!t?.key)throw new Error("à¹„à¸¡à¹ˆà¸žà¸š session à¸«à¸£à¸·à¸­ config key");console.log("ðŸ”„ à¸à¸³à¸¥à¸±à¸‡à¹€à¸žà¸´à¹ˆà¸¡ term à¹ƒà¸«à¸¡à¹ˆ:",r);try{const o={unit:e.current._id,type:"term",taxonomy:r.taxonomy,name:r.name,code:r.code||"",parentId:r.parentId||null,customData:r.customData||{},active:!0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()},a=s.value.filter((e=>e.taxonomy===r.taxonomy&&e.parentId===r.parentId));o.sortOrder=a.length,console.log("ðŸ“¤ à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ term à¹ƒà¸«à¸¡à¹ˆ:",o);const n=await l.POST("taxonomy",{data:o,options:{}},t.key);return console.log("âœ… à¸ªà¸£à¹‰à¸²à¸‡ term à¸ªà¸³à¹€à¸£à¹‡à¸ˆ:",n),n&&n._id&&(s.value.push(n),console.log("ðŸ“‹ à¹€à¸žà¸´à¹ˆà¸¡ term à¹ƒà¸«à¸¡à¹ˆà¹€à¸‚à¹‰à¸² local state:",n._id)),n}catch(a){throw console.error("âŒ Error adding term:",a),new Error(`à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸žà¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹€à¸žà¸´à¹ˆà¸¡ term: ${a.message}`)}},f=e=>{if(!e)return[];const t=o.value.filter((t=>t.contentTypes&&t.contentTypes.includes(e)&&!1!==t.active));return console.log(`ðŸ” Groups for content type '${e}':`,t),t},y=e=>{const t=f(e),o=t.map((e=>e._id)),r=s.value.filter((e=>o.includes(e.taxonomy)&&!1!==e.active));return console.log(`ðŸ” Terms for content type '${e}':`,r),r},x=e=>{const t=y(e);return t.filter((e=>!e.parentId)).sort(((e,t)=>(e.sortOrder||0)-(t.sortOrder||0)))},k=e=>s.value.filter((t=>t.parentId===e&&!1!==t.active)).sort(((e,t)=>(e.sortOrder||0)-(t.sortOrder||0))),v=e=>{const t=s.value.find((t=>t._id===e))||null;return console.log(`ðŸ” à¸«à¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ term ID '${e}':`,t),t},b=e=>{const t=o.value.find((t=>t._id===e))||null;return console.log(`ðŸ” à¸«à¸²à¸‚à¹‰à¸­à¸¡à¸¹à¸¥ group ID '${e}':`,t),t},h=e=>{const t=v(e);if(!t)return console.warn(`âš ï¸ à¹„à¸¡à¹ˆà¸žà¸š term ID: ${e}`),`à¸£à¸²à¸¢à¸à¸²à¸£ ${e}`;const o=t.customData?.name||t.customData?.à¸Šà¸·à¹ˆà¸­||t.customData?.title||t.name||t.code||"à¹„à¸¡à¹ˆà¸¡à¸µà¸Šà¸·à¹ˆà¸­";return console.log(`ðŸ“„ Display name for term '${e}':`,o),o},T=e=>{const t=v(e);if(!t||!t.taxonomy)return console.warn(`âš ï¸ à¹„à¸¡à¹ˆà¸žà¸š term à¸«à¸£à¸·à¸­ taxonomy group à¸ªà¸³à¸«à¸£à¸±à¸š ID: ${e}`),"à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸à¸à¸¥à¸¸à¹ˆà¸¡";const o=b(t.taxonomy);if(!o)return console.warn(`âš ï¸ à¹„à¸¡à¹ˆà¸žà¸š group ID: ${t.taxonomy}`),"à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸à¸à¸¥à¸¸à¹ˆà¸¡";const r=o.name||o.code||"à¹„à¸¡à¹ˆà¸£à¸°à¸šà¸¸à¸à¸¥à¸¸à¹ˆà¸¡";return console.log(`ðŸ“ Group name for term '${e}':`,r),r},L=e=>m.value.find((t=>t.key===e))||{label:e,icon:"fas fa-tag",color:"gray"},C=e=>{const t=x(e),o=e=>e.map((e=>({...e,children:o(k(e._id))})));return o(t)},_=(e,t=null)=>{if(!e?.trim())return[];const o=e.toLowerCase().trim();let r=t?y(t):s.value;return r.filter((e=>!!e.name?.toLowerCase().includes(o)||(!!e.code?.toLowerCase().includes(o)||!!e.customData&&Object.values(e.customData).some((e=>"string"===typeof e&&e.toLowerCase().includes(o))))))},w=e=>{const t=b(e);return t?.fieldConfig||[]},A=e=>{const t=f(e),o=y(e),r=x(e);return{totalGroups:t.length,totalTerms:o.length,rootTerms:r.length,subTerms:o.length-r.length,activeGroups:t.filter((e=>!1!==e.active)).length,activeTerms:o.filter((e=>!1!==e.active)).length}},S=(0,a.EW)((()=>m.value)),E=(0,a.EW)((()=>m.value.filter((e=>{const t=o.value.some((t=>t.contentTypes&&t.contentTypes.includes(e.key)));return t})))),D=(0,a.EW)((()=>!i.value&&o.value.length>=0&&s.value.length>=0)),I={state:c.value,get:e=>f(e),getTerms:e=>y(e),getRootTerms:e=>x(e),getTree:e=>C(e),search:(e,t)=>_(e,t),getStats:e=>A(e),refresh:(e=!1)=>p(e),getTermById:e=>v(e),getGroupById:e=>b(e),getTermDisplayName:e=>h(e),getTermGroupName:e=>T(e),fetchTaxonomyData:(e=!1)=>p(e),addTerm:(e,t)=>g(e,t)};return(0,a.sV)((()=>{p()})),{taxonomy:I,state:c,taxonomyGroups:o,terms:s,loading:i,error:u,allContentTypes:S,availableContentTypes:E,isDataReady:D,getGroupById:b,getTermById:v,getChildTerms:k,getContentTypeInfo:L,getFieldConfig:w,getTermDisplayName:h,getTermGroupName:T,fetchTaxonomyData:p,addTerm:g,getContentTypeStats:A}}},97080:function(e,t,o){var r=o(94402).has;e.exports=function(e){return r(e),e}},83789:function(e,t,o){var r=o(79306),a=o(28551),n=o(69565),s=o(91291),l=o(1767),i="Invalid size",u=RangeError,d=TypeError,c=Math.max,m=function(e,t){this.set=e,this.size=c(t,0),this.has=r(e.has),this.keys=r(e.keys)};m.prototype={getIterator:function(){return l(a(n(this.keys,this.set)))},includes:function(e){return n(this.has,this.set,e)}},e.exports=function(e){a(e);var t=+e.size;if(t!==t)throw new d(i);var o=s(t);if(o<0)throw new u(i);return new m(e,o)}},40507:function(e,t,o){var r=o(69565);e.exports=function(e,t,o){var a,n,s=o?e:e.iterator,l=e.next;while(!(a=r(l,s)).done)if(n=t(a.value),void 0!==n)return n}},89286:function(e,t,o){var r=o(94402),a=o(38469),n=r.Set,s=r.add;e.exports=function(e){var t=new n;return a(e,(function(e){s(t,e)})),t}},83440:function(e,t,o){var r=o(97080),a=o(94402),n=o(89286),s=o(25170),l=o(83789),i=o(38469),u=o(40507),d=a.has,c=a.remove;e.exports=function(e){var t=r(this),o=l(e),a=n(t);return s(t)<=o.size?i(t,(function(e){o.includes(e)&&c(a,e)})):u(o.getIterator(),(function(e){d(t,e)&&c(a,e)})),a}},94402:function(e,t,o){var r=o(79504),a=Set.prototype;e.exports={Set:Set,add:r(a.add),has:r(a.has),remove:r(a["delete"]),proto:a}},68750:function(e,t,o){var r=o(97080),a=o(94402),n=o(25170),s=o(83789),l=o(38469),i=o(40507),u=a.Set,d=a.add,c=a.has;e.exports=function(e){var t=r(this),o=s(e),a=new u;return n(t)>o.size?i(o.getIterator(),(function(e){c(t,e)&&d(a,e)})):l(t,(function(e){o.includes(e)&&d(a,e)})),a}},64449:function(e,t,o){var r=o(97080),a=o(94402).has,n=o(25170),s=o(83789),l=o(38469),i=o(40507),u=o(9539);e.exports=function(e){var t=r(this),o=s(e);if(n(t)<=o.size)return!1!==l(t,(function(e){if(o.includes(e))return!1}),!0);var d=o.getIterator();return!1!==i(d,(function(e){if(a(t,e))return u(d,"normal",!1)}))}},53838:function(e,t,o){var r=o(97080),a=o(25170),n=o(38469),s=o(83789);e.exports=function(e){var t=r(this),o=s(e);return!(a(t)>o.size)&&!1!==n(t,(function(e){if(!o.includes(e))return!1}),!0)}},28527:function(e,t,o){var r=o(97080),a=o(94402).has,n=o(25170),s=o(83789),l=o(40507),i=o(9539);e.exports=function(e){var t=r(this),o=s(e);if(n(t)<o.size)return!1;var u=o.getIterator();return!1!==l(u,(function(e){if(!a(t,e))return i(u,"normal",!1)}))}},38469:function(e,t,o){var r=o(79504),a=o(40507),n=o(94402),s=n.Set,l=n.proto,i=r(l.forEach),u=r(l.keys),d=u(new s).next;e.exports=function(e,t,o){return o?a({iterator:u(e),next:d},t):i(e,t)}},84916:function(e,t,o){var r=o(97751),a=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},n=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};e.exports=function(e,t){var o=r("Set");try{(new o)[e](a(0));try{return(new o)[e](a(-1)),!1}catch(l){if(!t)return!0;try{return(new o)[e](n(-1/0)),!1}catch(i){var s=new o;return s.add(1),s.add(2),t(s[e](n(1/0)))}}}catch(i){return!1}}},25170:function(e,t,o){var r=o(46706),a=o(94402);e.exports=r(a.proto,"size","get")||function(e){return e.size}},83650:function(e,t,o){var r=o(97080),a=o(94402),n=o(89286),s=o(83789),l=o(40507),i=a.add,u=a.has,d=a.remove;e.exports=function(e){var t=r(this),o=s(e).getIterator(),a=n(t);return l(o,(function(e){u(t,e)?d(a,e):i(a,e)})),a}},44204:function(e,t,o){var r=o(97080),a=o(94402).add,n=o(89286),s=o(83789),l=o(40507);e.exports=function(e){var t=r(this),o=s(e).getIterator(),i=n(t);return l(o,(function(e){a(i,e)})),i}},17642:function(e,t,o){var r=o(46518),a=o(83440),n=o(84916),s=!n("difference",(function(e){return 0===e.size}));r({target:"Set",proto:!0,real:!0,forced:s},{difference:a})},58004:function(e,t,o){var r=o(46518),a=o(79039),n=o(68750),s=o(84916),l=!s("intersection",(function(e){return 2===e.size&&e.has(1)&&e.has(2)}))||a((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));r({target:"Set",proto:!0,real:!0,forced:l},{intersection:n})},33853:function(e,t,o){var r=o(46518),a=o(64449),n=o(84916),s=!n("isDisjointFrom",(function(e){return!e}));r({target:"Set",proto:!0,real:!0,forced:s},{isDisjointFrom:a})},45876:function(e,t,o){var r=o(46518),a=o(53838),n=o(84916),s=!n("isSubsetOf",(function(e){return e}));r({target:"Set",proto:!0,real:!0,forced:s},{isSubsetOf:a})},32475:function(e,t,o){var r=o(46518),a=o(28527),n=o(84916),s=!n("isSupersetOf",(function(e){return!e}));r({target:"Set",proto:!0,real:!0,forced:s},{isSupersetOf:a})},15024:function(e,t,o){var r=o(46518),a=o(83650),n=o(84916);r({target:"Set",proto:!0,real:!0,forced:!n("symmetricDifference")},{symmetricDifference:a})},31698:function(e,t,o){var r=o(46518),a=o(44204),n=o(84916);r({target:"Set",proto:!0,real:!0,forced:!n("union")},{union:a})}}]);
//# sourceMappingURL=1480.2337e2a5.js.map