"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[1501],{11501:function(e,s,t){t.r(s),t.d(s,{default:function(){return zs}});var i=t(20641);function o(e,s,t,o,a,l){return(0,i.uX)(),(0,i.Wv)((0,i.$y)(l.componentName))}var a=t(52968),l=t(75220),n=t(40475),r=t(90033),d=t(53751);const c={class:"bg-gray-50"},m={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},u={class:"sm:mx-auto sm:w-full sm:max-w-md"},p=["src"],g={class:"bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10"},f={class:"mt-2"},h={class:"mt-2"},b={class:"col-span-2"},w={class:"mt-2"},k={class:"col-span-2"},y={class:"mt-2"},x={class:"mt-2 relative"},v=["type"],L={class:"mt-2 relative"},P=["type"],C={class:"col-span-2"},V={class:"mt-2"},_={class:"col-span-2"},M={class:"flex items-center"},E={key:0,class:"col-span-2"},z={class:"mt-2"},$={class:"col-span-2"},B={class:"flex items-center"},T={for:"remember-me",class:"ml-2 block text-md text-gray-900"},X={class:"col-span-2"},F={key:0,class:"col-span-2"},Q={class:"items-center px-3 py-1 rounded-md bg-blue-100 text-sm text-black pb-5 mb-5"},A={key:0,class:"w-full"},U={key:1,class:"w-full"},D={key:2,class:"w-full"},S={key:3,class:"w-full"},J={key:4,class:"w-full"},O={key:5,class:"w-full"},W={key:6,class:"w-full"},j={key:7,class:"w-full"},H={key:8,class:"w-full"},K=["disabled"];function I(e,s,t,o,a,l){const n=(0,i.g2)("Modal");return(0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",m,[(0,i.Lk)("div",u,[(0,i.Lk)("img",{class:"mx-auto h-24 w-auto",src:this.config.siteLogo,alt:"Your Company"},null,8,p),s[21]||(s[21]=(0,i.Lk)("h2",{class:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900"},"ลงทะเบียนสมาชิกใหม่",-1))]),(0,i.Lk)("div",{class:(0,r.C4)(["mt-8 sm:mx-auto sm:w-full sm:max-w-lg relative",[a.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,i.Lk)("div",g,[(0,i.Lk)("form",{class:"grid grid-cols-2 gap-6",onSubmit:s[20]||(s[20]=(0,d.D$)((()=>{}),["prevent"]))},[(0,i.Lk)("div",null,[s[22]||(s[22]=(0,i.Lk)("label",{for:"firstname",class:"block text-md font-semibold leading-6 text-gray-900"},"ชื่อ",-1)),(0,i.Lk)("div",f,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.firstname=e),id:"firstname",name:"firstname",type:"text",autocomplete:"firstname",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-md sm:leading-6"},null,512),[[d.Jo,a.firstname]])])]),(0,i.Lk)("div",null,[s[23]||(s[23]=(0,i.Lk)("label",{for:"lastname",class:"block text-md font-semibold leading-6 text-gray-900"},"นามสกุล",-1)),(0,i.Lk)("div",h,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.lastname=e),id:"lastname",name:"lastname",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[d.Jo,a.lastname]])])]),(0,i.Lk)("div",b,[s[24]||(s[24]=(0,i.Lk)("label",{for:"citizen",class:"block text-md font-semibold leading-6 text-gray-900"},"หมายเลขบัตรประจำตัวประชาชน",-1)),s[25]||(s[25]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ระบุเป็นตัวเลข 13 หลักเท่านั้น")],-1)),(0,i.Lk)("div",w,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.citizen=e),onInput:s[3]||(s[3]=e=>a.citizen=e.target.value.replace(/\D/,"").slice(0,13)),id:"citizen",name:"citizen",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[d.Jo,a.citizen]])])]),(0,i.Lk)("div",k,[s[26]||(s[26]=(0,i.Lk)("label",{for:"email",class:"block text-md font-semibold leading-6 text-gray-900"},"อีเมล์",-1)),s[27]||(s[27]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ใช้สำหรับเข้าระบบและรับข่าวสาร")],-1)),(0,i.Lk)("div",y,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a.email=e),id:"email",name:"email",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:s[5]||(s[5]=(...e)=>l.validateEmail&&l.validateEmail(...e))},null,544),[[d.Jo,a.email]])])]),(0,i.Lk)("div",null,[s[28]||(s[28]=(0,i.Lk)("label",{for:"password",class:"block text-md font-semibold leading-6 text-gray-900"},"รหัสผ่าน",-1)),(0,i.Lk)("div",x,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>a.password=e),id:"password",name:"password",type:a.showPassword1?"text":"password",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:s[7]||(s[7]=(...e)=>l.validatePassword&&l.validatePassword(...e)),onPaste:s[8]||(s[8]=(...e)=>l.preventPaste&&l.preventPaste(...e))},null,40,v),[[d.hp,a.password]]),(0,i.Lk)("button",{onClick:s[9]||(s[9]=e=>a.showPassword1=!a.showPassword1),type:"button",class:"absolute top-[5px] right-[5px] px-2 py-1 bg-gray-200 rounded-md text-xs"},(0,r.v_)(a.showPassword1?"ซ่อน":"แสดง"),1)])]),(0,i.Lk)("div",null,[s[29]||(s[29]=(0,i.Lk)("label",{for:"cpassword",class:"block text-md font-semibold leading-6 text-gray-900"},"ยืนยันรหัสผ่าน",-1)),(0,i.Lk)("div",L,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[10]||(s[10]=e=>a.cpassword=e),id:"cpassword",name:"cpassword",type:a.showPassword2?"text":"password",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:s[11]||(s[11]=(...e)=>l.validatePassword&&l.validatePassword(...e)),onPaste:s[12]||(s[12]=(...e)=>l.preventPaste&&l.preventPaste(...e))},null,40,P),[[d.hp,a.cpassword]]),(0,i.Lk)("button",{onClick:s[13]||(s[13]=e=>a.showPassword2=!a.showPassword2),type:"button",class:"absolute top-[5px] right-[5px] px-2 py-1 bg-gray-200 rounded-md text-xs"},(0,r.v_)(a.showPassword2?"ซ่อน":"แสดง"),1)])]),(0,i.Lk)("div",C,[s[30]||(s[30]=(0,i.Lk)("label",{for:"phone",class:"block text-md font-semibold leading-6 text-gray-900"},"เบอร์โทร",-1)),s[31]||(s[31]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ระบุเป็นตัวเลขมือถือ 10 หลักเท่านั้น")],-1)),(0,i.Lk)("div",V,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[14]||(s[14]=e=>a.phone=e),onInput:s[15]||(s[15]=e=>a.phone=e.target.value.replace(/\D/,"").slice(0,10)),id:"phone",name:"phone",type:"text",autocomplete:"phone",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[d.Jo,a.phone]])])]),(0,i.Lk)("div",_,[(0,i.Lk)("div",M,[(0,i.bo)((0,i.Lk)("input",{id:"ftiMember",name:"ftiMember",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600","onUpdate:modelValue":s[16]||(s[16]=e=>a.ftiMember=e)},null,512),[[d.lH,a.ftiMember]]),s[32]||(s[32]=(0,i.Lk)("label",{for:"ftiMember",class:"ml-2 block text-md text-gray-900"},"สมัครในนามสมาชิก สภาอุตสาหกรรมแห่งประเทศไทย",-1))])]),a.ftiMember?((0,i.uX)(),(0,i.CE)("div",E,[s[33]||(s[33]=(0,i.Lk)("label",{for:"fti_member",class:"block text-md font-semibold leading-6 text-gray-900"},"หมายเลขสมาชิก ส.อ.ท.",-1)),(0,i.Lk)("div",z,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[17]||(s[17]=e=>a.fti_member=e),id:"fti_member",name:"fti_member",type:"text",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[d.Jo,a.fti_member]])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",$,[(0,i.Lk)("div",B,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[18]||(s[18]=e=>a.agreedToPolicy=e),id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,512),[[d.lH,a.agreedToPolicy]]),(0,i.Lk)("label",T,[s[34]||(s[34]=(0,i.eW)("คุณยอมรับ ")),(0,i.bF)(n,{title:"นโยบายความเป็นส่วนตัว"}),s[35]||(s[35]=(0,i.eW)(" ของ เว็บไซต์."))])])]),(0,i.Lk)("div",X,[l.validForm?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",F,[(0,i.Lk)("div",Q,[s[36]||(s[36]=(0,i.Lk)("div",{class:"font-semibold pt-3 pb-3"},"คำแนะนำในการสมัคร",-1)),a.firstname?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",A," ** กรุณากรอกชื่อ ")),a.lastname?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",U," ** กรุณากรอกนามสกุล ")),l.citizenValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",D," ** หมายเลขบัตรประชาชนต้องเป็นตัวเลข 13 หลักเท่านั้น ")),l.validPhone?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",S," ** เบอร์โทรต้องเป็นตัวเลข 10 หลักเท่านั้น ")),e.passwordValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",J," ** รหัสผ่านต้องมีอักขระ 8-20 ตัวและไม่มีช่องว่าง ")),e.cpasswordValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",O," ** ยืนยันรหัสผ่านไม่ตรงกับรหัสผ่าน ")),!a.ftiMember||a.fti_member&&a.fti_member.trim()?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",W," ** กรุณากรอกหมายเลขสมาชิก ส.อ.ท. ")),l.emailValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",j," ** กรุณากรอกอีเมล์ให้ถูกต้อง ")),a.agreedToPolicy?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",H," ** กรุณายอมรับนโยบายความเป็นส่วนตัวก่อนลงทะเบียน "))])])),(0,i.Lk)("button",{onClick:s[19]||(s[19]=(...e)=>l.submitForm&&l.submitForm(...e)),disabled:!l.validForm,type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-ทก font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"สมัครสมาชิก",8,K)])],32)])],2)])])}t(44114),t(81454);var N=t(22857),q=t(21396),R=t.n(q);function Y(e){const s=document.querySelector(`label[for="${e}"]`);return s?s.textContent.trim():e}var G={name:"Register",components:{Modal:N.A},data(){return{login:n.A.get("session","login"),config:n.A.get("configs"),ftiMember:!1,password:"",cpassword:"",firstname:"",lastname:"",email:"",phone:"",citizen:"",fti_member:"",passwordMatch:!0,showPassword1:!1,showPassword2:!1,agreedToPolicy:!1,activeBlock:!1}},watch:{password(){this.checkPasswords(),this.passwordValid=this.checkPasswordValid(this.password)},cpassword(){this.checkPasswords(),this.cpasswordValid=this.checkCPasswordValid(this.cpassword)},email(e){const s=/^[^\sก-๙]+@[^\sก-๙]+\.[^\sก-๙]+$/;s.test(e)||(this.email=e.replace(/[^\w.@-]/gi,""))}},computed:{citizenValid(){return/^\d{13}$/.test(this.citizen)},validPhone(){return/^\d{10}$/.test(this.phone)},ftiMemberValid(){return!this.ftiMember||this.ftiMember&&this.fti_member&&this.fti_member.trim().length>0},emailValid(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(this.email)},validForm(){const e=this.password.replace(/\s/g,""),s=this.cpassword.replace(/\s/g,""),t=e&&!/\s/.test(e)&&!/[ก-๙]/.test(e)&&e.length>=8,i=s&&!/\s/.test(s)&&!/[ก-๙]/.test(s),o=/^\d{13}$/.test(this.citizen),a=this.firstname.trim()&&this.lastname.trim(),l=/^\d{10}$/.test(this.phone),n=!this.ftiMember||this.ftiMember&&this.fti_member&&this.fti_member.trim(),r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)&&!/example\.com/.test(this.email),d=this.agreedToPolicy;return t&&i&&this.passwordMatch&&o&&a&&l&&n&&r&&d}},methods:{validateEmail(e){const s=e.key;(/\s/.test(s)||/[ก-๙]/.test(s))&&e.preventDefault()},checkPasswordValid(e){const s=e.replace(/\s/g,"");return s&&!/\s/.test(s)&&!/[ก-๙]/.test(s)},checkCPasswordValid(e){const s=e.replace(/\s/g,"");return s&&!/\s/.test(s)&&!/[ก-๙]/.test(s)&&s===this.password},checkPasswords(){const e=this.password.replace(/\s/g,""),s=this.cpassword.replace(/\s/g,"");this.passwordMatch=e===s,e.length<8||/\s/.test(e)||/[ก-๙]/.test(e)?this.passwordValid=!1:this.passwordValid=!0,this.password=e,this.cpassword=s},validatePassword(e){const s=e.key;(/\s/.test(s)||/[ก-๙]/.test(s))&&e.preventDefault()},preventPaste(e){e.preventDefault()},async submitForm(){if(this.validForm){console.log("All Form Valid");try{this.activeBlock=!0;const e=R().lib.WordArray.random(16),s=R().SHA256(this.password+e).toString(),t=await fetch("https://gateway.cloudrestfulapi.com/api/user/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.config.key},body:JSON.stringify({data:{firstname:this.firstname,lastname:this.lastname,citizen:this.citizen,phone:this.phone,email:this.email,username:this.email,password:s,parent:this.config.siteID,salt:e.toString(),role:"user",info:{fti_member:!!this.fti_member,fti_member_number:this.fti_member,agree:this.agreedToPolicy}},options:{fieldType:[],uniqueFields:[["email","phone","citizen"]]}})}),i=await t.json();if(400===t.status&&"duplicate"===i.message){this.activeBlock=!1;const e=i.fields.map((e=>Y(e))).join(", ");this.$swal({title:"มีข้อมูลเหล่านี้อยู่ในระบบแล้ว !",text:`ฟิลด์: ${e} กรุณาตรวจสอบข้อมูลของคุณให้ถูกต้องอีกครั้ง`,type:"error",showCancelButton:!1,confirmButtonColor:"#0054b4",confirmButtonText:"ตกลง",closeOnConfirm:!0,closeOnCancel:!1})}else 200===t.status?(this.activeBlock=!1,this.$swal({title:"ทำการลงทะเบียนเรียบร้อยแล้ว ?",text:"คุณต้องการที่จะดำเนินการอย่างไร !",type:"success",showCancelButton:!0,confirmButtonColor:"#0054b4",confirmButtonText:"เข้าสู่ระบบ",cancelButtonText:"ลงทะเบียนอีกครั้ง",closeOnConfirm:!1,closeOnCancel:!1}).then((e=>{e.isConfirmed?(console.log("Home"),this.$router.push("/user/login")):(console.log("New"),window.location.reload())}))):this.activeBlock=!1}catch(e){console.log(e)}}else console.log("Any Form not Valid")}}},Z=t(64621);const ee=(0,Z.A)(G,[["render",I]]);var se=ee;const te={class:"bg-gray-50"},ie={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},oe={class:"sm:mx-auto sm:w-full sm:max-w-md"},ae=["src"],le={class:"bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10"},ne={class:"mt-2"},re={class:"mt-2"},de={class:"col-span-2"},ce={class:"mt-2"},me={class:"col-span-2"},ue={class:"mt-2"},pe={class:"mt-2 relative"},ge=["type"],fe={class:"mt-2 relative"},he=["type"],be={class:"col-span-2"},we={class:"mt-2"},ke={class:"col-span-2"},ye={class:"flex items-center"},xe={key:0,class:"col-span-2"},ve={class:"mt-2"},Le={class:"col-span-2"},Pe={class:"flex items-center"},Ce={for:"remember-me",class:"ml-2 block text-md text-gray-900"},Ve={class:"col-span-2"},_e={key:0,class:"col-span-2"},Me={class:"items-center px-3 py-1 rounded-md bg-blue-100 text-sm text-black pb-5 mb-5"},Ee={key:0,class:"w-full"},ze={key:1,class:"w-full"},$e={key:2,class:"w-full"},Be={key:3,class:"w-full"},Te={key:4,class:"w-full"},Xe={key:5,class:"w-full"},Fe={key:6,class:"w-full"},Qe={key:7,class:"w-full"},Ae={key:8,class:"w-full"},Ue=["disabled"];function De(e,s,t,o,a,l){const n=(0,i.g2)("Modal");return(0,i.uX)(),(0,i.CE)("div",te,[(0,i.Lk)("div",ie,[(0,i.Lk)("div",oe,[(0,i.Lk)("img",{class:"mx-auto h-24 w-auto",src:this.config.siteLogo,alt:"Your Company"},null,8,ae),s[21]||(s[21]=(0,i.Lk)("h2",{class:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900"},"ลงทะเบียนสมาชิกใหม่",-1))]),(0,i.Lk)("div",{class:(0,r.C4)(["mt-8 sm:mx-auto sm:w-full sm:max-w-lg relative",[a.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,i.Lk)("div",le,[(0,i.Lk)("form",{class:"grid grid-cols-2 gap-6",onSubmit:s[20]||(s[20]=(0,d.D$)((()=>{}),["prevent"]))},[(0,i.Lk)("div",null,[s[22]||(s[22]=(0,i.Lk)("label",{for:"firstname",class:"block text-md font-semibold leading-6 text-gray-900"},"ชื่อ",-1)),(0,i.Lk)("div",ne,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.firstname=e),id:"firstname",name:"firstname",type:"text",autocomplete:"firstname",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-md sm:leading-6"},null,512),[[d.Jo,a.firstname]])])]),(0,i.Lk)("div",null,[s[23]||(s[23]=(0,i.Lk)("label",{for:"lastname",class:"block text-md font-semibold leading-6 text-gray-900"},"นามสกุล",-1)),(0,i.Lk)("div",re,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.lastname=e),id:"lastname",name:"lastname",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[d.Jo,a.lastname]])])]),(0,i.Lk)("div",de,[s[24]||(s[24]=(0,i.Lk)("label",{for:"citizen",class:"block text-md font-semibold leading-6 text-gray-900"},"หมายเลขบัตรประจำตัวประชาชน",-1)),s[25]||(s[25]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ระบุเป็นตัวเลข 13 หลักเท่านั้น")],-1)),(0,i.Lk)("div",ce,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.citizen=e),onInput:s[3]||(s[3]=e=>a.citizen=e.target.value.replace(/\D/,"").slice(0,13)),id:"citizen",name:"citizen",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[d.Jo,a.citizen]])])]),(0,i.Lk)("div",me,[s[26]||(s[26]=(0,i.Lk)("label",{for:"email",class:"block text-md font-semibold leading-6 text-gray-900"},"อีเมล์",-1)),s[27]||(s[27]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ใช้สำหรับเข้าระบบและรับข่าวสาร")],-1)),(0,i.Lk)("div",ue,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a.email=e),id:"email",name:"email",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:s[5]||(s[5]=(...e)=>l.validateEmail&&l.validateEmail(...e))},null,544),[[d.Jo,a.email]])])]),(0,i.Lk)("div",null,[s[28]||(s[28]=(0,i.Lk)("label",{for:"password",class:"block text-md font-semibold leading-6 text-gray-900"},"รหัสผ่าน",-1)),(0,i.Lk)("div",pe,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>a.password=e),id:"password",name:"password",type:a.showPassword1?"text":"password",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:s[7]||(s[7]=(...e)=>l.validatePassword&&l.validatePassword(...e)),onPaste:s[8]||(s[8]=(...e)=>l.preventPaste&&l.preventPaste(...e))},null,40,ge),[[d.hp,a.password]]),(0,i.Lk)("button",{onClick:s[9]||(s[9]=e=>a.showPassword1=!a.showPassword1),type:"button",class:"absolute top-[5px] right-[5px] px-2 py-1 bg-gray-200 rounded-md text-xs"},(0,r.v_)(a.showPassword1?"ซ่อน":"แสดง"),1)])]),(0,i.Lk)("div",null,[s[29]||(s[29]=(0,i.Lk)("label",{for:"cpassword",class:"block text-md font-semibold leading-6 text-gray-900"},"ยืนยันรหัสผ่าน",-1)),(0,i.Lk)("div",fe,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[10]||(s[10]=e=>a.cpassword=e),id:"cpassword",name:"cpassword",type:a.showPassword2?"text":"password",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:s[11]||(s[11]=(...e)=>l.validatePassword&&l.validatePassword(...e)),onPaste:s[12]||(s[12]=(...e)=>l.preventPaste&&l.preventPaste(...e))},null,40,he),[[d.hp,a.cpassword]]),(0,i.Lk)("button",{onClick:s[13]||(s[13]=e=>a.showPassword2=!a.showPassword2),type:"button",class:"absolute top-[5px] right-[5px] px-2 py-1 bg-gray-200 rounded-md text-xs"},(0,r.v_)(a.showPassword2?"ซ่อน":"แสดง"),1)])]),(0,i.Lk)("div",be,[s[30]||(s[30]=(0,i.Lk)("label",{for:"phone",class:"block text-md font-semibold leading-6 text-gray-900"},"เบอร์โทร",-1)),s[31]||(s[31]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ระบุเป็นตัวเลขมือถือ 10 หลักเท่านั้น")],-1)),(0,i.Lk)("div",we,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[14]||(s[14]=e=>a.phone=e),onInput:s[15]||(s[15]=e=>a.phone=e.target.value.replace(/\D/,"").slice(0,10)),id:"phone",name:"phone",type:"text",autocomplete:"phone",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[d.Jo,a.phone]])])]),(0,i.Lk)("div",ke,[(0,i.Lk)("div",ye,[(0,i.bo)((0,i.Lk)("input",{id:"ftiMember",name:"ftiMember",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600","onUpdate:modelValue":s[16]||(s[16]=e=>a.ftiMember=e)},null,512),[[d.lH,a.ftiMember]]),s[32]||(s[32]=(0,i.Lk)("label",{for:"ftiMember",class:"ml-2 block text-md text-gray-900"},"สมัครในนามสมาชิก สภาอุตสาหกรรมแห่งประเทศไทย",-1))])]),a.ftiMember?((0,i.uX)(),(0,i.CE)("div",xe,[s[33]||(s[33]=(0,i.Lk)("label",{for:"fti_member",class:"block text-md font-semibold leading-6 text-gray-900"},"หมายเลขสมาชิก ส.อ.ท.",-1)),(0,i.Lk)("div",ve,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[17]||(s[17]=e=>a.fti_member=e),id:"fti_member",name:"fti_member",type:"text",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[d.Jo,a.fti_member]])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Le,[(0,i.Lk)("div",Pe,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[18]||(s[18]=e=>a.agreedToPolicy=e),id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,512),[[d.lH,a.agreedToPolicy]]),(0,i.Lk)("label",Ce,[s[34]||(s[34]=(0,i.eW)("คุณยอมรับ ")),(0,i.bF)(n,{title:"นโยบายความเป็นส่วนตัว"}),s[35]||(s[35]=(0,i.eW)(" ของ เว็บไซต์."))])])]),(0,i.Lk)("div",Ve,[l.validForm?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",_e,[(0,i.Lk)("div",Me,[s[36]||(s[36]=(0,i.Lk)("div",{class:"font-semibold pt-3 pb-3"},"คำแนะนำในการสมัคร",-1)),a.firstname?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ee," ** กรุณากรอกชื่อ ")),a.lastname?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ze," ** กรุณากรอกนามสกุล ")),l.citizenValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",$e," ** หมายเลขบัตรประชาชนต้องเป็นตัวเลข 13 หลักเท่านั้น ")),l.validPhone?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Be," ** เบอร์โทรต้องเป็นตัวเลข 10 หลักเท่านั้น ")),e.passwordValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Te," ** รหัสผ่านต้องมีอักขระ 8-20 ตัวและไม่มีช่องว่าง ")),e.cpasswordValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Xe," ** ยืนยันรหัสผ่านไม่ตรงกับรหัสผ่าน ")),!a.ftiMember||a.fti_member&&a.fti_member.trim()?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Fe," ** กรุณากรอกหมายเลขสมาชิก ส.อ.ท. ")),l.emailValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Qe," ** กรุณากรอกอีเมล์ให้ถูกต้อง ")),a.agreedToPolicy?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ae," ** กรุณายอมรับนโยบายความเป็นส่วนตัวก่อนลงทะเบียน "))])])),(0,i.Lk)("button",{onClick:s[19]||(s[19]=(...e)=>l.submitForm&&l.submitForm(...e)),disabled:!l.validForm,type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-ทก font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"สมัครสมาชิก",8,Ue)])],32)])],2)])])}function Se(e){const s=document.querySelector(`label[for="${e}"]`);return s?s.textContent.trim():e}var Je={name:"Register",components:{Modal:N.A},data(){return{login:n.A.get("session","login"),config:n.A.get("configs"),ftiMember:!1,password:"",cpassword:"",firstname:"",lastname:"",email:"",phone:"",citizen:"",fti_member:"",passwordMatch:!0,showPassword1:!1,showPassword2:!1,agreedToPolicy:!1,activeBlock:!1}},watch:{password(){this.checkPasswords(),this.passwordValid=this.checkPasswordValid(this.password)},cpassword(){this.checkPasswords(),this.cpasswordValid=this.checkCPasswordValid(this.cpassword)},email(e){const s=/^[^\sก-๙]+@[^\sก-๙]+\.[^\sก-๙]+$/;s.test(e)||(this.email=e.replace(/[^\w.@-]/gi,""))}},computed:{citizenValid(){return/^\d{13}$/.test(this.citizen)},validPhone(){return/^\d{10}$/.test(this.phone)},ftiMemberValid(){return!this.ftiMember||this.ftiMember&&this.fti_member&&this.fti_member.trim().length>0},emailValid(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(this.email)},validForm(){const e=this.password.replace(/\s/g,""),s=this.cpassword.replace(/\s/g,""),t=e&&!/\s/.test(e)&&!/[ก-๙]/.test(e)&&e.length>=8,i=s&&!/\s/.test(s)&&!/[ก-๙]/.test(s),o=/^\d{13}$/.test(this.citizen),a=this.firstname.trim()&&this.lastname.trim(),l=/^\d{10}$/.test(this.phone),n=!this.ftiMember||this.ftiMember&&this.fti_member&&this.fti_member.trim(),r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)&&!/example\.com/.test(this.email),d=this.agreedToPolicy;return t&&i&&this.passwordMatch&&o&&a&&l&&n&&r&&d}},methods:{validateEmail(e){const s=e.key;(/\s/.test(s)||/[ก-๙]/.test(s))&&e.preventDefault()},checkPasswordValid(e){const s=e.replace(/\s/g,"");return s&&!/\s/.test(s)&&!/[ก-๙]/.test(s)},checkCPasswordValid(e){const s=e.replace(/\s/g,"");return s&&!/\s/.test(s)&&!/[ก-๙]/.test(s)&&s===this.password},checkPasswords(){const e=this.password.replace(/\s/g,""),s=this.cpassword.replace(/\s/g,"");this.passwordMatch=e===s,e.length<8||/\s/.test(e)||/[ก-๙]/.test(e)?this.passwordValid=!1:this.passwordValid=!0,this.password=e,this.cpassword=s},validatePassword(e){const s=e.key;(/\s/.test(s)||/[ก-๙]/.test(s))&&e.preventDefault()},preventPaste(e){e.preventDefault()},async submitForm(){if(this.validForm){console.log("All Form Valid");try{this.activeBlock=!0;const e=R().lib.WordArray.random(16),s=R().SHA256(this.password+e).toString(),t=await fetch("https://gateway.cloudrestfulapi.com/api/user/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.config.key},body:JSON.stringify({data:{firstname:this.firstname,lastname:this.lastname,citizen:this.citizen,phone:this.phone,email:this.email,username:this.email,password:s,parent:this.config.siteID,salt:e.toString(),role:"user",info:{fti_member:!!this.fti_member,fti_member_number:this.fti_member,agree:this.agreedToPolicy}},options:{fieldType:[],uniqueFields:[["email","phone","citizen"]]}})}),i=await t.json();if(400===t.status&&"duplicate"===i.message){this.activeBlock=!1;const e=i.fields.map((e=>Se(e))).join(", ");this.$swal({title:"มีข้อมูลเหล่านี้อยู่ในระบบแล้ว !",text:`ฟิลด์: ${e} กรุณาตรวจสอบข้อมูลของคุณให้ถูกต้องอีกครั้ง`,type:"error",showCancelButton:!1,confirmButtonColor:"#0054b4",confirmButtonText:"ตกลง",closeOnConfirm:!0,closeOnCancel:!1})}else 200===t.status?(this.activeBlock=!1,this.$swal({title:"ทำการลงทะเบียนเรียบร้อยแล้ว ?",text:"คุณต้องการที่จะดำเนินการอย่างไร !",type:"success",showCancelButton:!0,confirmButtonColor:"#0054b4",confirmButtonText:"เข้าสู่ระบบ",cancelButtonText:"ลงทะเบียนอีกครั้ง",closeOnConfirm:!1,closeOnCancel:!1}).then((e=>{e.isConfirmed?(console.log("Home"),this.$router.push("/user/login")):(console.log("New"),window.location.reload())}))):this.activeBlock=!1}catch(e){console.log(e)}}else console.log("Any Form not Valid")}}};const Oe=(0,Z.A)(Je,[["render",De]]);var We=Oe;const je={class:"bg-gray-50"},He={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},Ke={class:"sm:mx-auto sm:w-full sm:max-w-md"},Ie=["src"],Ne={class:"bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10"},qe={class:"mt-2"},Re={class:"mt-2"},Ye={class:"col-span-2"},Ge={class:"mt-2"},Ze={class:"col-span-2"},es={class:"mt-2"},ss={class:"mt-2 relative"},ts=["type"],is={class:"mt-2 relative"},os=["type"],as={class:"col-span-2"},ls={class:"mt-2"},ns={class:"col-span-2"},rs={class:"flex items-center"},ds={for:"remember-me",class:"ml-2 block text-md text-gray-900"},cs={class:"col-span-2"},ms={key:0,class:"col-span-2"},us={class:"items-center px-3 py-1 rounded-md bg-blue-100 text-sm text-black pb-5 mb-5"},ps={key:0,class:"w-full"},gs={key:1,class:"w-full"},fs={key:2,class:"w-full"},hs={key:3,class:"w-full"},bs={key:4,class:"w-full"},ws={key:5,class:"w-full"},ks={key:6,class:"w-full"},ys={key:7,class:"w-full"},xs={key:8,class:"w-full"},vs=["disabled"];function Ls(e,s,t,o,a,l){const n=(0,i.g2)("Modal");return(0,i.uX)(),(0,i.CE)("div",je,[(0,i.Lk)("div",He,[(0,i.Lk)("div",Ke,[(0,i.Lk)("img",{class:"mx-auto h-24 w-auto",src:this.config.siteLogo,alt:"Your Company"},null,8,Ie),s[19]||(s[19]=(0,i.Lk)("h2",{class:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900"},"ลงทะเบียนสมาชิกใหม่",-1))]),(0,i.Lk)("div",{class:(0,r.C4)(["mt-8 sm:mx-auto sm:w-full sm:max-w-lg relative",[a.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,i.Lk)("div",Ne,[(0,i.Lk)("form",{class:"grid grid-cols-2 gap-6",onSubmit:s[18]||(s[18]=(0,d.D$)((()=>{}),["prevent"]))},[(0,i.Lk)("div",null,[s[20]||(s[20]=(0,i.Lk)("label",{for:"firstname",class:"block text-md font-semibold leading-6 text-gray-900"},"ชื่อ",-1)),(0,i.Lk)("div",qe,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.firstname=e),id:"firstname",name:"firstname",type:"text",autocomplete:"firstname",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-md sm:leading-6"},null,512),[[d.Jo,a.firstname]])])]),(0,i.Lk)("div",null,[s[21]||(s[21]=(0,i.Lk)("label",{for:"lastname",class:"block text-md font-semibold leading-6 text-gray-900"},"นามสกุล",-1)),(0,i.Lk)("div",Re,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.lastname=e),id:"lastname",name:"lastname",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[d.Jo,a.lastname]])])]),(0,i.Lk)("div",Ye,[s[22]||(s[22]=(0,i.Lk)("label",{for:"citizen",class:"block text-md font-semibold leading-6 text-gray-900"},"หมายเลขบัตรประจำตัวประชาชน",-1)),s[23]||(s[23]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ระบุเป็นตัวเลข 13 หลักเท่านั้น")],-1)),(0,i.Lk)("div",Ge,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.citizen=e),onInput:s[3]||(s[3]=e=>a.citizen=e.target.value.replace(/\D/,"").slice(0,13)),id:"citizen",name:"citizen",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[d.Jo,a.citizen]])])]),(0,i.Lk)("div",Ze,[s[24]||(s[24]=(0,i.Lk)("label",{for:"email",class:"block text-md font-semibold leading-6 text-gray-900"},"อีเมล์",-1)),s[25]||(s[25]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ใช้สำหรับเข้าระบบและรับข่าวสาร")],-1)),(0,i.Lk)("div",es,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a.email=e),id:"email",name:"email",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:s[5]||(s[5]=(...e)=>l.validateEmail&&l.validateEmail(...e))},null,544),[[d.Jo,a.email]])])]),(0,i.Lk)("div",null,[s[26]||(s[26]=(0,i.Lk)("label",{for:"password",class:"block text-md font-semibold leading-6 text-gray-900"},"รหัสผ่าน",-1)),(0,i.Lk)("div",ss,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>a.password=e),id:"password",name:"password",type:a.showPassword1?"text":"password",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:s[7]||(s[7]=(...e)=>l.validatePassword&&l.validatePassword(...e)),onPaste:s[8]||(s[8]=(...e)=>l.preventPaste&&l.preventPaste(...e))},null,40,ts),[[d.hp,a.password]]),(0,i.Lk)("button",{onClick:s[9]||(s[9]=e=>a.showPassword1=!a.showPassword1),type:"button",class:"absolute top-[5px] right-[5px] px-2 py-1 bg-gray-200 rounded-md text-xs"},(0,r.v_)(a.showPassword1?"ซ่อน":"แสดง"),1)])]),(0,i.Lk)("div",null,[s[27]||(s[27]=(0,i.Lk)("label",{for:"cpassword",class:"block text-md font-semibold leading-6 text-gray-900"},"ยืนยันรหัสผ่าน",-1)),(0,i.Lk)("div",is,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[10]||(s[10]=e=>a.cpassword=e),id:"cpassword",name:"cpassword",type:a.showPassword2?"text":"password",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:s[11]||(s[11]=(...e)=>l.validatePassword&&l.validatePassword(...e)),onPaste:s[12]||(s[12]=(...e)=>l.preventPaste&&l.preventPaste(...e))},null,40,os),[[d.hp,a.cpassword]]),(0,i.Lk)("button",{onClick:s[13]||(s[13]=e=>a.showPassword2=!a.showPassword2),type:"button",class:"absolute top-[5px] right-[5px] px-2 py-1 bg-gray-200 rounded-md text-xs"},(0,r.v_)(a.showPassword2?"ซ่อน":"แสดง"),1)])]),(0,i.Lk)("div",as,[s[28]||(s[28]=(0,i.Lk)("label",{for:"phone",class:"block text-md font-semibold leading-6 text-gray-900"},"เบอร์โทร",-1)),s[29]||(s[29]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ระบุเป็นตัวเลขมือถือ 10 หลักเท่านั้น")],-1)),(0,i.Lk)("div",ls,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[14]||(s[14]=e=>a.phone=e),onInput:s[15]||(s[15]=e=>a.phone=e.target.value.replace(/\D/,"").slice(0,10)),id:"phone",name:"phone",type:"text",autocomplete:"phone",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[d.Jo,a.phone]])])]),(0,i.Lk)("div",ns,[(0,i.Lk)("div",rs,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":s[16]||(s[16]=e=>a.agreedToPolicy=e),id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,512),[[d.lH,a.agreedToPolicy]]),(0,i.Lk)("label",ds,[s[30]||(s[30]=(0,i.eW)("คุณยอมรับ ")),(0,i.bF)(n,{title:"นโยบายความเป็นส่วนตัว"}),s[31]||(s[31]=(0,i.eW)(" ของ เว็บไซต์."))])])]),(0,i.Lk)("div",cs,[l.validForm?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ms,[(0,i.Lk)("div",us,[s[32]||(s[32]=(0,i.Lk)("div",{class:"font-semibold pt-3 pb-3"},"คำแนะนำในการสมัคร",-1)),a.firstname?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ps," ** กรุณากรอกชื่อ ")),a.lastname?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",gs," ** กรุณากรอกนามสกุล ")),l.citizenValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",fs," ** หมายเลขบัตรประชาชนต้องเป็นตัวเลข 13 หลักเท่านั้น ")),l.validPhone?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",hs," ** เบอร์โทรต้องเป็นตัวเลข 10 หลักเท่านั้น ")),e.passwordValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",bs," ** รหัสผ่านต้องมีอักขระ 8-20 ตัวและไม่มีช่องว่าง ")),e.cpasswordValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ws," ** ยืนยันรหัสผ่านไม่ตรงกับรหัสผ่าน ")),!a.ftiMember||a.fti_member&&a.fti_member.trim()?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ks," ** กรุณากรอกหมายเลขสมาชิก ส.อ.ท. ")),l.emailValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ys," ** กรุณากรอกอีเมล์ให้ถูกต้อง ")),a.agreedToPolicy?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",xs," ** กรุณายอมรับนโยบายความเป็นส่วนตัวก่อนลงทะเบียน "))])])),(0,i.Lk)("button",{onClick:s[17]||(s[17]=(...e)=>l.submitForm&&l.submitForm(...e)),disabled:!l.validForm,type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-ทก font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"สมัครสมาชิก",8,vs)])],32)])],2)])])}function Ps(e){const s=document.querySelector(`label[for="${e}"]`);return s?s.textContent.trim():e}var Cs={name:"Register",components:{Modal:N.A},data(){return{login:n.A.get("session","login"),config:n.A.get("configs"),ftiMember:!1,password:"",cpassword:"",firstname:"",lastname:"",email:"",phone:"",citizen:"",fti_member:"",passwordMatch:!0,showPassword1:!1,showPassword2:!1,agreedToPolicy:!1,activeBlock:!1}},watch:{password(){this.checkPasswords(),this.passwordValid=this.checkPasswordValid(this.password)},cpassword(){this.checkPasswords(),this.cpasswordValid=this.checkCPasswordValid(this.cpassword)},email(e){const s=/^[^\sก-๙]+@[^\sก-๙]+\.[^\sก-๙]+$/;s.test(e)||(this.email=e.replace(/[^\w.@-]/gi,""))}},computed:{citizenValid(){return/^\d{13}$/.test(this.citizen)},validPhone(){return/^\d{10}$/.test(this.phone)},ftiMemberValid(){return!this.ftiMember||this.ftiMember&&this.fti_member&&this.fti_member.trim().length>0},emailValid(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(this.email)},validForm(){const e=this.password.replace(/\s/g,""),s=this.cpassword.replace(/\s/g,""),t=e&&!/\s/.test(e)&&!/[ก-๙]/.test(e)&&e.length>=8,i=s&&!/\s/.test(s)&&!/[ก-๙]/.test(s),o=/^\d{13}$/.test(this.citizen),a=this.firstname.trim()&&this.lastname.trim(),l=/^\d{10}$/.test(this.phone),n=!this.ftiMember||this.ftiMember&&this.fti_member&&this.fti_member.trim(),r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)&&!/example\.com/.test(this.email),d=this.agreedToPolicy;return t&&i&&this.passwordMatch&&o&&a&&l&&n&&r&&d}},methods:{validateEmail(e){const s=e.key;(/\s/.test(s)||/[ก-๙]/.test(s))&&e.preventDefault()},checkPasswordValid(e){const s=e.replace(/\s/g,"");return s&&!/\s/.test(s)&&!/[ก-๙]/.test(s)},checkCPasswordValid(e){const s=e.replace(/\s/g,"");return s&&!/\s/.test(s)&&!/[ก-๙]/.test(s)&&s===this.password},checkPasswords(){const e=this.password.replace(/\s/g,""),s=this.cpassword.replace(/\s/g,"");this.passwordMatch=e===s,e.length<8||/\s/.test(e)||/[ก-๙]/.test(e)?this.passwordValid=!1:this.passwordValid=!0,this.password=e,this.cpassword=s},validatePassword(e){const s=e.key;(/\s/.test(s)||/[ก-๙]/.test(s))&&e.preventDefault()},preventPaste(e){e.preventDefault()},async submitForm(){if(this.validForm){console.log("All Form Valid");try{this.activeBlock=!0;const e=R().lib.WordArray.random(16),s=R().SHA256(this.password+e).toString(),t=await fetch("https://gateway.cloudrestfulapi.com/api/user/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.config.key},body:JSON.stringify({data:{firstname:this.firstname,lastname:this.lastname,citizen:this.citizen,phone:this.phone,email:this.email,username:this.email,password:s,parent:this.config.siteID,salt:e.toString(),role:"user",info:{fti_member:!!this.fti_member,fti_member_number:this.fti_member,agree:this.agreedToPolicy}},options:{fieldType:[],uniqueFields:[["email","phone","citizen"]]}})}),i=await t.json();if(400===t.status&&"duplicate"===i.message){this.activeBlock=!1;const e=i.fields.map((e=>Ps(e))).join(", ");this.$swal({title:"มีข้อมูลเหล่านี้อยู่ในระบบแล้ว !",text:`ฟิลด์: ${e} กรุณาตรวจสอบข้อมูลของคุณให้ถูกต้องอีกครั้ง`,type:"error",showCancelButton:!1,confirmButtonColor:"#0054b4",confirmButtonText:"ตกลง",closeOnConfirm:!0,closeOnCancel:!1})}else 200===t.status?(this.activeBlock=!1,this.$swal({title:"ทำการลงทะเบียนเรียบร้อยแล้ว ?",text:"คุณต้องการที่จะดำเนินการอย่างไร !",type:"success",showCancelButton:!0,confirmButtonColor:"#0054b4",confirmButtonText:"เข้าสู่ระบบ",cancelButtonText:"ลงทะเบียนอีกครั้ง",closeOnConfirm:!1,closeOnCancel:!1}).then((e=>{e.isConfirmed?(console.log("Home"),this.$router.push("/user/login")):(console.log("New"),window.location.reload())}))):this.activeBlock=!1}catch(e){console.log(e)}}else console.log("Any Form not Valid")}}};const Vs=(0,Z.A)(Cs,[["render",Ls]]);var _s=Vs,Ms={name:"userLoginLoader",components:{},data(){return{session:n.A.get("session"),configs:n.A.get("configs")}},setup(){const e=(0,l.lq)(),s=e.meta.title;(0,a.K7)(s)},computed:{componentName(){return this.configs&&this.configs.layout&&this.configs.layout.userLogin?"DOA"===this.configs.layout.userLogin?We:"SACRED"===this.configs.layout.userLogin?_s:se:se}}};const Es=(0,Z.A)(Ms,[["render",o]]);var zs=Es}}]);
//# sourceMappingURL=1501.8c3cc06b.js.map