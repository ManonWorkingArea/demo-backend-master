{"version":3,"file":"js/1553.55791369.js","mappings":"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","sources":["webpack://node-backend/./src/extensions/modules/system/user/view/Forgot.vue","webpack://node-backend/./src/extensions/modules/system/user/component/frontend/Forgot.vue","webpack://node-backend/./src/extensions/modules/system/user/component/frontend/Forgot.vue?e68d","webpack://node-backend/./src/extensions/modules/system/user/view/Forgot.vue?0e08"],"sourcesContent":["<template>\n    <component :is=\"componentName\" />\n    </template>\n    \n    <script>\n    import { useTitle } from 'vue-page-title';\n    import { useRoute } from 'vue-router';\n    import storageManager from '@/plugins/storage';\n    import Forgot from '../component/frontend/Forgot';\n    import ForgotDOA from '../component/frontend/Forgot/Forgot-DOA';\n    import ForgotSACRED from '../component/frontend/Forgot/Forgot-SACRED';\n    \n    export default {\n    name: 'userLoginLoader',\n    components: {},\n    data() {\n      return {\n        session: storageManager.get('session'),\n        configs: storageManager.get('configs'),\n      };\n    },\n    setup() {\n      const route = useRoute();\n      const routeName = route.meta.title;\n      useTitle(routeName);\n    },\n    computed: {\n      componentName() {\n        // Check if configs.layout.userDashboard exists\n        if (this.configs && this.configs.layout && this.configs.layout.userLogin) {\n          // Check if the userDashboard is \"DOA\"\n          if (this.configs.layout.userLogin === 'DOA') {\n            return ForgotDOA; // Use ProfileDOA component\n          } else if (this.configs.layout.userLogin === 'SACRED') {\n            return ForgotSACRED; // Use ProfileDOA component\n          } else {\n            // Fallback to static import (Profile.vue)\n            return Forgot;\n          }\n        } else {\n          // Fallback to static import (Profile.vue)\n          return Forgot;\n        }\n      },\n    },\n  };\n  </script>\n        ","<script>\nimport storageManager from '@/plugins/storage';\nimport { sendEmail } from '@/plugins/sendEmail';\nexport default {\n\tname: 'Login',\n\tcomponents: {\n\t},\n  props: {\n    showModal: {\n      type: Boolean,\n      default: false\n    }\n  },\n\tdata() {\n\t\treturn {\n      config: storageManager.get('configs'),\n      email: '',\n      errorStage: false,\n      errorMessage: '',\n      buttonText:'ส่งข้อมูลเพื่อขอรับรหัสผ่านใหม่'\n\t\t}\n\t},\n\tmethods: {\n    async resetPassword() {\n      try {\n\n        if (!this.email) {\n            this.errorStage = true;\n            this.errorMessage = \"โปรดกรอกอีเมล์\";\n            this.activeBlock = false;\n            return;\n          }\n        \n          this.activeBlock    = true;\n          this.errorStage     = false;\n          this.buttonText     = \"กำลังดำเนินการ...\";\n          const resAPILogin   = await fetch(\"https://gateway.cloudrestfulapi.com/api/user/query\", {\n              method: 'POST',\n              headers: {'Content-Type': 'application/json','client-token-key':this.config.key},\n              body: JSON.stringify({\n                method: 'find',\n                args: [\n                  {\n                    $and: [\n                      { email: this.email }\n                    ]\n                  }\n                ]\n              })\n          });\n          \n          const getLogin  = await resAPILogin.json();\n\n          console.log(getLogin);\n          const loginData = getLogin.length > 0 ? getLogin[0] : null;\n\n          if (!getLogin || getLogin.length === 0) {\n            this.errorStage = true;\n            this.errorMessage = \"ไม่พบอีเมล์นี้ในระบบ กรุณาตรวจสอบหรือติดต่อทีมงาน\";\n            this.activeBlock = false;\n            this.buttonText = \"ส่งข้อมูลเพื่อขอรับรหัสผ่านใหม่\";\n            this.buttonDisabled = false;\n            return;\n          } else {\n            // Send Email\n            const emailData = {\n              email: loginData.email, // Use the email from the retrieved loginData\n              name: loginData.firstname + '' + loginData.lastname, // Use the name from the retrieved loginData\n            };\n            await sendEmail(emailData,'reset-password');\n\n            this.$swal({\n                icon: 'success',\n                title: 'การรีเซ็ตรหัสผ่านใหม่เรียบร้อยแล้ว',\n                text: 'ระบบได้ทำการรีเซ็ตและจัดส่งรหัสผ่านใหม่ให้ทางอีเมล์แล้ว กรุณาตรวจสอบอีเมล์และเข้าสู่ระบบด้วยวรหัสผ่านใหม่ เมื่อเข้าสู่ระบบครั้งแรก กรุณาเปลี่ยนรหัสผ่านใหม่อีกครั้งเพื่อความปลอดภัย',\n                showCancelButton: false,\n                confirmButtonText: 'ตกลง',\n              }).then(() => {\n                this.$router.push(\"/user/login\");\n              });\n          }\n          this.activeBlock  = false;\n      } catch (error) {\n        console.log(error)\n        this.buttonText = \"ส่งข้อมูลเพื่อขอรับรหัสผ่านใหม่\";\n        this.buttonDisabled = false;\n      }\n    }\n\t},\n};\n</script>\n\n<template>\n  <div class=\"bg-gray-50\">\n    \n    <div class=\"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8\">\n      <div class=\"sm:mx-auto sm:w-full sm:max-w-lg\">\n        <img class=\"mx-auto h-16 w-auto\" :src=\"this.config.siteLogo\" alt=\"Your Company\" v-if=\"!this.showModal\">\n        <h2 class=\"mt-6 text-center text-2xl font-bold tracking-tight text-gray-900\">ลืมรหัสผ่าน</h2>\n        <p class=\"mt-2 text-center text-sm text-gray-600\">\n          หรือ\n          <router-link :to=\"'/user/register'\" class=\"font-medium text-indigo-600 hover:text-indigo-500\">\n          ลงทะเบียนสมาชิกใหม่\n          </router-link>\n        </p>\n      </div>\n  \n      <div class=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md relative\" :data-content=\"'กำลังติดต่อฐานข้อมูล กรุณารอสักครู่.....'\" :class=\"[(activeBlock?'isblock' : 'isunblock')]\">\n        <div class=\"bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10\">\n          <form class=\"space-y-6\" @submit.prevent=\"resetPassword\">\n\n            <div>\n              <div class=\"relative mt-2\">\n                  <span class=\"input-label\">อีเมล์ที่ลงทะเบียน <small class=\"text-red-400\">(*จำเป็นต้องกรอก)</small></span>\n                  <input\n                    v-model=\"email\"\n                    type=\"text\"\n                    placeholder=\"อีเมล์ที่ลงทะเบียน\"\n                    class=\"w-full p-4 border border-gray-200 text-sm\"\n                  />\n                </div>\n            </div>\n            \n            <div>\n              <strong>*หมายเหตุ*</strong><br/>\n              กรอกเลขที่บัตรประชาชนที่ลงทะเบียนไว้ในระบบ หลังจากคลิ๊ก \"ตั้งค่ารหัสผ่าน\" เรียบร้อยแล้ว ระบบจะทำการสร้างรหัสผ่านเป็นเบอร์โทรที่ลงทะเบียนไว้ในระบบ หากจำเบอร์โทรไม่ได้ กรุณาแจ้งทีมงานที่ @doacer\n            </div>\n  \n            <div>\n              <div v-if=\"errorStage\" class=\"col-span-2\">\n                <div class=\"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5\">\n                  <div class=\"font-semibold pt-3 pb-3\">เกิดข้อผิดพลาด</div>\n                  <div class=\"w-full\">{{ errorMessage }}</div>\n                </div>\n              </div>\n              <button\n                type=\"submit\"\n                :disabled=\"buttonDisabled\"\n                class=\"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n              >\n              <font-awesome-icon :icon=\"['fas', 'refresh']\" class=\"mr-2\"/> {{ buttonText }}\n            </button>\n            <router-link :to=\"'/user/login'\" class=\"flex w-full justify-center rounded-md bg-gray-300 text-md font-semibold text-gray-700 shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 mt-4 py-2\">\n              ย้อนกลับ\n            </router-link>\n            </div>\n          </form>\n  \n        </div>\n      </div>\n    </div>\n  \n    </div>\n</template>\n\n<style scoped>\n.input-label{\n    font-size: 15px;\n    background: #fff;\n    position: absolute;\n    left: 10px;\n    top: -10px;\n    padding-left: 4px;\n    padding-right: 5px;\n    color: #000000;\n    font-weight: bold;\n}\n</style>","import { render } from \"./Forgot.vue?vue&type=template&id=786aebbe&scoped=true\"\nimport script from \"./Forgot.vue?vue&type=script&lang=js\"\nexport * from \"./Forgot.vue?vue&type=script&lang=js\"\n\nimport \"./Forgot.vue?vue&type=style&index=0&id=786aebbe&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-786aebbe\"]])\n\nexport default __exports__","import { render } from \"./Forgot.vue?vue&type=template&id=30221110\"\nimport script from \"./Forgot.vue?vue&type=script&lang=js\"\nexport * from \"./Forgot.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_resolveDynamicComponent","$options","componentName","class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","showModal","_createCommentVNode","src","config","siteLogo","alt","_hoisted_4","_hoisted_5","_createTextVNode","_createVNode","_component_router_link","to","default","_withCtx","_cache","_","_normalizeClass","_ctx","activeBlock","_hoisted_6","onSubmit","_withModifiers","args","resetPassword","_hoisted_7","$event","$data","email","type","placeholder","errorStage","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","errorMessage","disabled","buttonDisabled","_component_font_awesome_icon","icon","buttonText","_hoisted_11","name","components","props","Boolean","data","storageManager","get","methods","this","resAPILogin","fetch","method","headers","body","JSON","stringify","$and","getLogin","json","console","log","loginData","length","emailData","firstname","lastname","sendEmail","$swal","title","text","showCancelButton","confirmButtonText","then","$router","push","error","__exports__","session","configs","setup","route","useRoute","routeName","meta","useTitle","computed","layout","userLogin","ForgotDOA","ForgotSACRED","Forgot","render"],"sourceRoot":""}