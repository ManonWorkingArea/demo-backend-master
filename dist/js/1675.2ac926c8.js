"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[1675],{11675:function(e,t,o){o.r(t),o.d(t,{default:function(){return se}});var s=o(20641);function a(e,t,o,a,l,n){const i=(0,s.g2)("Authen"),c=(0,s.g2)("Dashboard");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(i),this.login?((0,s.uX)(),(0,s.Wv)(c,{key:0})):(0,s.Q3)("",!0)],64)}var l=o(52968),n=o(75220),i=o(90033),c=o(53751);const r={key:0,class:"text-center"},d={key:2,class:"fixed top-0 left-0 w-full h-full flex items-center justify-center z-50"},u={class:"relative bg-white w-full md:w-1/2 lg:w-1/2 rounded shadow-lg"},g={class:"bg-blue-500 text-white p-4 rounded-t"},p={class:"text-md font-semibold"},b={class:"p-3"},f={class:"grid grid-cols-2 gap-2"},m={class:"mb-2"},h={class:"mb-2"},k={class:"mb-2"},y={class:"mb-2"},x={class:"mb-2"},v={class:"mb-2"},L={class:"mb-2"},w={class:"mb-2"},C={class:"mb-2"},A={class:"mb-2"},D={class:"bg-gray-100 px-4 py-3 flex justify-end rounded-b"},E={key:3,class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5 border-t"},S={class:"mt-8"},F={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},_={class:"mt-8 flex flex-col"},X={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},T={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},M={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"},K={class:"w-full h-30 relative text-center object-cover pt-10"},j={class:"flex flex-col items-center justify-center"},I={class:"relative text-center w-1/2"},U={class:"p-4"},N={href:"javascript:void(0);",class:"font-bold text-gray-600 hover:underline"},P={class:"text-sm text-gray-400"},J={class:"bg-gray-100 border-t-2 border-gray-200 py-2 px-4 flex justify-between items-center"},V=["onClick"],$=["onClick"],B={class:"w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center hover:opacity-70"};function H(e,t,o,a,l,n){const H=(0,s.g2)("Loader"),Q=(0,s.g2)("Subhead"),R=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[l.loading_sources?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",r,[(0,s.bF)(H)])),l.loading_sources?((0,s.uX)(),(0,s.Wv)(Q,{key:1,navigation:[{name:"ย้อนกลับ",link:"/",style:"chevron-left",class:"default-btn",visible:!0,type:"button"}]})):(0,s.Q3)("",!0),l.showModal?((0,s.uX)(),(0,s.CE)("div",d,[t[25]||(t[25]=(0,s.Lk)("div",{class:"fixed inset-0 bg-black opacity-50"},null,-1)),(0,s.Lk)("div",u,[(0,s.Lk)("div",g,[(0,s.Lk)("h3",p,(0,i.v_)(l.isEditMode?"Edit Item":"Add New Item"),1),(0,s.Lk)("button",{class:"absolute top-3 right-3 text-lg font-semibold hover:text-gray-200",onClick:t[0]||(t[0]=(...e)=>n.closeModal&&n.closeModal(...e))},"×")]),(0,s.Lk)("div",b,[(0,s.Lk)("form",null,[(0,s.Lk)("div",f,[(0,s.Lk)("div",m,[t[14]||(t[14]=(0,s.Lk)("label",{for:"name",class:"block text-gray-700 font-bold mb-2"},"Storage Name",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.spaceData.name=e),type:"text",id:"name",class:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:border-blue-500"},null,512),[[c.Jo,l.spaceData.name]])]),(0,s.Lk)("div",h,[t[15]||(t[15]=(0,s.Lk)("label",{for:"space",class:"block text-gray-700 font-bold mb-2"},"Disk Space",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.spaceData.space=e),type:"text",id:"space",class:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:border-blue-500"},null,512),[[c.Jo,l.spaceData.space]])]),(0,s.Lk)("div",k,[t[16]||(t[16]=(0,s.Lk)("label",{for:"s3Key",class:"block text-gray-700 font-bold mb-2"},"S3 Key",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.spaceData.s3Key=e),type:"text",id:"s3Key",class:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:border-blue-500"},null,512),[[c.Jo,l.spaceData.s3Key]])]),(0,s.Lk)("div",y,[t[17]||(t[17]=(0,s.Lk)("label",{for:"s3Endpoint",class:"block text-gray-700 font-bold mb-2"},"S3 Endpoint",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.spaceData.s3Endpoint=e),type:"text",id:"s3Endpoint",class:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:border-blue-500"},null,512),[[c.Jo,l.spaceData.s3Endpoint]])]),(0,s.Lk)("div",x,[t[18]||(t[18]=(0,s.Lk)("label",{for:"s3Hosting",class:"block text-gray-700 font-bold mb-2"},"S3 Hosting",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.spaceData.s3Hosting=e),type:"text",id:"s3Hosting",class:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:border-blue-500"},null,512),[[c.Jo,l.spaceData.s3Hosting]])]),(0,s.Lk)("div",v,[t[19]||(t[19]=(0,s.Lk)("label",{for:"s3Secret",class:"block text-gray-700 font-bold mb-2"},"S3 Secret",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.spaceData.s3Secret=e),type:"text",id:"s3Secret",class:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:border-blue-500"},null,512),[[c.Jo,l.spaceData.s3Secret]])]),(0,s.Lk)("div",L,[t[20]||(t[20]=(0,s.Lk)("label",{for:"s3Region",class:"block text-gray-700 font-bold mb-2"},"S3 Region",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.spaceData.s3Region=e),type:"text",id:"s3Region",class:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:border-blue-500"},null,512),[[c.Jo,l.spaceData.s3Region]])]),(0,s.Lk)("div",w,[t[21]||(t[21]=(0,s.Lk)("label",{for:"s3EndpointDefault",class:"block text-gray-700 font-bold mb-2"},"S3 Default Endpoint",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.spaceData.s3EndpointDefault=e),type:"text",id:"s3EndpointDefault",class:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:border-blue-500"},null,512),[[c.Jo,l.spaceData.s3EndpointDefault]])]),(0,s.Lk)("div",C,[t[22]||(t[22]=(0,s.Lk)("label",{for:"s3Bucket",class:"block text-gray-700 font-bold mb-2"},"S3 Bucket",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.spaceData.s3Bucket=e),type:"text",id:"s3Bucket",class:"w-full border border-gray-300 p-2 rounded focus:outline-none focus:border-blue-500"},null,512),[[c.Jo,l.spaceData.s3Bucket]])]),(0,s.Lk)("div",A,[t[23]||(t[23]=(0,s.Lk)("label",{class:"block text-gray-700 font-bold mb-2"},"สถานะ",-1)),(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=e=>l.spaceData.status=e),class:"form-checkbox h-5 w-5 text-blue-600"},null,512),[[c.lH,l.spaceData.status]]),t[24]||(t[24]=(0,s.eW)(" ใช้งาน "))])])])]),(0,s.Lk)("div",D,[(0,s.Lk)("button",{type:"button",class:"px-4 py-2 text-white bg-blue-500 rounded hover:bg-blue-600 mr-2",onClick:t[11]||(t[11]=(...e)=>n.closeModal&&n.closeModal(...e))}," Close "),(0,s.Lk)("button",{type:"button",onClick:t[12]||(t[12]=(...e)=>n.submitForm&&n.submitForm(...e)),class:"px-4 py-2 text-white bg-green-500 rounded hover:bg-green-600"},(0,i.v_)(l.isEditMode?"Update":"Submit"),1)])])])):(0,s.Q3)("",!0),l.loading_sources?((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",S,[(0,s.Lk)("div",F,[(0,s.Lk)("div",_,[(0,s.Lk)("div",X,[(0,s.Lk)("div",T,[(0,s.Lk)("div",M,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.listItem,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e._id,class:"bg-white rounded-lg shadow-md overflow-hidden"},[(0,s.Lk)("div",K,[(0,s.Lk)("div",{class:(0,i.C4)(["w-7 h-7 absolute top-2 right-2 text-white pt-1 text-sm font-normal rounded-full text-center",e.status?"bg-green-600":"bg-red-600"])},[(0,s.bF)(R,{icon:e.status?["fas","check-circle"]:["fas","times"],class:"text-white"},null,8,["icon"])],2),(0,s.Lk)("div",j,[(0,s.Lk)("div",I,[(0,s.bF)(R,{icon:["fas","hdd"],class:"text-blue-300 text-[60px] mb-4"}),t[26]||(t[26]=(0,s.Lk)("div",{class:"absolute w-full bg-gray-200 border border-gray-300 rounded-full h-[6px] bottom-0"},[(0,s.Lk)("div",{class:"absolute w-[46%] bg-gray-700 rounded-full h-[6px] bottom-0"})],-1))])])]),(0,s.Lk)("div",U,[(0,s.Lk)("a",N,(0,i.v_)(e.name),1),(0,s.Lk)("p",P,[(0,s.bF)(R,{icon:["fas","pie-chart"],class:"text-black mt-[3px] mr-1 text-md"}),(0,s.eW)(" 0 GB / "+(0,i.v_)(e.space)+" GB",1)])]),(0,s.Lk)("div",J,[(0,s.Lk)("a",{href:"javascript:void(0);",onClick:t=>n.editItem("edit",e),class:"text-gray-900 hover:text-gray-500 text-md font-medium"},[(0,s.bF)(R,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),t[27]||(t[27]=(0,s.Lk)("span",null,"แก้ไข",-1))],8,V),(0,s.Lk)("a",{href:"javascript:void(0);",onClick:t=>n.deleteData("edit",e._id),class:"text-gray-900 hover:text-gray-500 text-md font-medium"},[(0,s.bF)(R,{icon:["fas","trash-can"],class:"text-black mt-[3px] mr-2 text-md"}),t[28]||(t[28]=(0,s.Lk)("span",null,"ลบ",-1))],8,$)])])))),128)),(0,s.Lk)("button",{class:"bg-white p-10 rounded-lg shadow-md overflow-hidden flex flex-col items-center justify-center cursor-pointer p-10",onClick:t[13]||(t[13]=e=>n.openModal("add"))},[(0,s.Lk)("div",B,[(0,s.bF)(R,{icon:["fas","plus"],class:"text-3xl"})]),t[29]||(t[29]=(0,s.Lk)("p",{class:"text-gray-500 mt-2 text-center"},"Add Storage",-1))])])])])])])])])):(0,s.Q3)("",!0)],64)}var Q=o(59911),R=o.n(Q),q=o(75435),O=o(87814),W=o(40475),G={inject:["apiServer"],data(){return{hostkey:this.$Key,accessToken:W.A.get("session","token"),configs:W.A.get("configs"),loading_sources:!0,isEditMode:!1,showModal:!1,spaceData:{name:"",status:"",space:"",s3Key:"",s3Endpoint:"",s3Hosting:"",s3Secret:"",s3Region:"",s3EndpointDefault:"",s3Bucket:""},listItemToEdit:null,listItem:[]}},components:{Loader:q.A,Subhead:O.A},methods:{editItem(e,t){this.listItemToEdit=t,this.openModal(e,t)},openModal(e,t={}){this.isEditMode="edit"===e,this.spaceData={...t},this.showModal=!0},closeModal(){this.showModal=!1},submitForm(){this.isEditMode?this.editData(this.listItemToEdit._id):this.addData()},async editData(e){try{const t={...this.spaceData};delete t._id;const o=await fetch(`https://gateway.cloudrestfulapi.com/api/space/${e}`,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({data:t})});o.ok?(console.log("Item updated successfully"),await this.getData(),this.closeModal()):console.error("Failed to update item")}catch(t){console.error(t)}},async addData(){try{const e=await fetch("https://gateway.cloudrestfulapi.com/api/space",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({data:this.spaceData})});e.ok?(console.log("Item added successfully"),await this.getData(),this.closeModal()):console.error("Failed to add item")}catch(e){console.error(e)}},async getData(){if(W.A.get("session","login"))try{this.loading_sources=!1;const e=await fetch("https://gateway.cloudrestfulapi.com/api/space/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({method:"find",args:[{$and:[{}]}]})}),t=await e.json();console.log(t),this.listItem=t,this.loading_sources=!0}catch(e){console.log(e)}},async deleteData(e){if(W.A.get("session","login"))try{this.loading_sources=!1,console.log("id",e);const t=await fetch("https://gateway.cloudrestfulapi.com/api/space/"+e,{method:"DELETE",headers:{"Content-Type":"application/json","client-token-key":this.hostkey}});console.log(await t),this.loading_sources=!0,await this.getData()}catch(t){console.log(t)}},updated(){R().replace()}},async mounted(){try{await this.getData()}catch(e){console.log(Error)}},setup(){}},Y=o(64621);const z=(0,Y.A)(G,[["render",H]]);var Z=z,ee=o(74284),te={name:"Home",components:{Dashboard:Z,Authen:ee.A},data(){return{login:W.A.get("session","login")}},methods:{},mounted(){},setup(){const e=(0,n.lq)(),t=e.meta.title;(0,l.K7)(t),console.log("Dashboard")}};const oe=(0,Y.A)(te,[["render",a]]);var se=oe},87814:function(e,t,o){o.d(t,{A:function(){return F}});var s=o(20641),a=o(90033),l=o(53751);const n={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},i={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},c={class:"min-w-0 flex-1"},r={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},d={key:0,class:"text-sm text-gray-500"},u={class:"mt-5 flex xl:mt-0 xl:ml-4"},g={class:"flex items-center space-x-2"},p={class:"text-sm text-gray-400"},b=["onUpdate:modelValue","placeholder","onChange"],f={value:"",disabled:""},m=["value"],h=["onClick"],k={class:"text-sm hidden sm:inline-block ml-1"},y=["onClick"],x={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,o,v,L,w){const C=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("header",n,[(0,s.Lk)("div",i,[(0,s.Lk)("div",c,[(0,s.Lk)("h1",r,[(0,s.bF)(C,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,s.eW)(" "+(0,a.v_)(o.pageTitle?o.pageTitle:this.PageName),1)]),o.subhead?((0,s.uX)(),(0,s.CE)("p",d,(0,a.v_)(o.subhead),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",u,[(0,s.Lk)("div",g,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.navigation,((t,o)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:o},["select"===t.type?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("label",p,(0,a.v_)(t.placeholder),1),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:o=>e.$emit("toggleStatus",t.value)},[(0,s.Lk)("option",f,"-- "+(0,a.v_)(t.placeholder)+" --",1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.options,((e,t)=>((0,s.uX)(),(0,s.CE)("option",{key:t,value:e.value},(0,a.v_)(e.name),9,m)))),128))],40,b),[[l.u1,t.value]])],64)):"call-function"===t.type?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[!1!==t.visible?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:o=>e.$emit(t.function),type:"button",class:(0,a.C4)(w.getClasses(t.class))},[(0,s.bF)(C,{icon:["fas",`${t.style}`],class:(0,a.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,s.Lk)("span",k,(0,a.v_)(t.name),1)],10,h)):(0,s.Q3)("",!0)],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[!1!==t.visible?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e=>w.handleNavigationClick(t),type:"button",class:(0,a.C4)(w.getClasses(t.class))},[(0,s.bF)(C,{icon:["fas",`${t.style}`],class:(0,a.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,s.Lk)("span",x,(0,a.v_)(t.name),1)],10,y)):(0,s.Q3)("",!0)],64))],64)))),128))])])])])}o(44114);var L=o(75220),w=o(52968),C=o(23264),A=o(93426),D={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,L.lq)();return console.log("Translate",(0,A.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,A.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,w.K7)((0,A.iX)())},methods:{getClasses(e){const t=(0,C.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},E=o(64621);const S=(0,E.A)(D,[["render",v]]);var F=S},74284:function(e,t,o){o.d(t,{A:function(){return u}});var s=o(20641);function a(e,t,o,a,l,n){return(0,s.uX)(),(0,s.CE)("div")}var l=o(75220),n=o(63084),i=o(40475),c={name:"Authen",data(){return{configs:i.A.get("configs"),session:i.A.get("session")}},created(){n.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const e=(0,l.lq)(),t=e.meta.auth,o=e.name,s=i.A.get("session");let a=s.token,c=s.login,r=s.current;n.A.log("hasLogin",c),n.A.log("Page -> Auth:",t),n.A.log("User -> Token:",a),n.A.log("User -> Login:",c),"frontend"===this.session.interface?n.A.log("Front-End"):"backend"===this.session.interface&&(n.A.log("Back-End"),c?("Login"==o||void 0==r?(n.A.log("Not Login Again"),this.$router.replace({path:"/"})):(n.A.log("Has School Active"),t?(n.A.log("This page is : Authen Request"),""===a||null===a||void 0==a?n.A.log("Your Cannot Access"):n.A.log("Your Can Access")):n.A.log("This page is : No Authen Request")),n.A.log("Login")):(n.A.log("Not Login"),"Login"!=o?(window.location.href="/member/login",n.A.log("Not Login Page",o)):n.A.log("Login Page",o)))}},setup(){}},r=o(64621);const d=(0,r.A)(c,[["render",a]]);var u=d},23264:function(e,t,o){function s(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}o.d(t,{c:function(){return s}})}}]);
//# sourceMappingURL=1675.2ac926c8.js.map