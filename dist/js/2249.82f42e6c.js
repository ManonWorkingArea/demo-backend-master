"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[2249],{72249:function(e,t,s){s.r(t),s.d(t,{default:function(){return q}});var n=s(20641);function o(e,t,s,o,a,l){const i=(0,n.g2)("Authen"),r=(0,n.g2)("Dashboard");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(i),this.login?((0,n.uX)(),(0,n.Wv)(r,{key:0})):(0,n.Q3)("",!0)],64)}var a=s(52968),l=s(75220),i=(s(44114),s(90033));const r={key:0,class:"text-center"},c={key:2,class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5 border-t"},u={class:"mt-8"},d={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},g={class:"mt-8 flex flex-col"},h={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},m={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},p={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},f=["src"],b={class:"p-4"},x=["href"],y={class:"text-sm text-gray-400"},k={class:"bg-gray-100 border-t-2 border-gray-200 py-2 px-4 flex justify-between items-center"},v=["onClick"],A=["onClick"],w={href:"#",class:"text-gray-900 hover:text-gray-500 text-md font-medium"},C={href:"/asset/add",class:"bg-white p-10 rounded-lg shadow-md overflow-hidden flex flex-col items-center justify-center cursor-pointer p-10"},L={class:"w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center hover:opacity-70"};function E(e,t,s,o,a,l){const E=(0,n.g2)("Loader"),_=(0,n.g2)("Subhead"),X=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)(n.FK,null,[a.loading_sources?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(E)])),a.loading_sources?((0,n.uX)(),(0,n.Wv)(_,{key:1,navigation:[{name:"เพิ่ม Asset",link:"/asset/add",style:"plus",class:"primary-btn",visible:!0,type:"button"}]})):(0,n.Q3)("",!0),a.loading_sources?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[(0,n.Lk)("div",g,[(0,n.Lk)("div",h,[(0,n.Lk)("div",m,[(0,n.Lk)("div",p,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.listItems,(s=>((0,n.uX)(),(0,n.CE)("div",{key:s._id,class:"bg-white rounded-lg shadow-md overflow-hidden"},[(0,n.Lk)("img",{class:"w-full h-48 object-cover",src:s.loginBg?s.loginBg:"https://picsum.photos/seed/picsum/200/300",alt:"Placeholder image"},null,8,f),(0,n.Lk)("div",b,[(0,n.Lk)("a",{href:"/asset/detail/"+s._id,class:"font-bold text-gray-600 hover:underline"},(0,i.v_)(s.siteName),9,x),(0,n.Lk)("p",y,[(0,n.bF)(X,{icon:["fas","globe"],class:"text-black mt-[3px] mr-1 text-md"}),(0,n.eW)(" "+(0,i.v_)(s.hostname),1)])]),(0,n.Lk)("div",k,[(0,n.Lk)("a",{href:"javascript:void(0);",onClick:t=>e.$router.push("/asset/edit/"+s._id),class:"text-gray-900 hover:text-gray-500 text-md font-medium"},[(0,n.bF)(X,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),t[0]||(t[0]=(0,n.Lk)("span",null,"แก้ไข",-1))],8,v),(0,n.Lk)("a",{href:"javascript:void(0);",onClick:t=>e.$router.push("/asset/admin/"+s._id),class:"text-gray-900 hover:text-gray-500 text-md font-medium"},[(0,n.bF)(X,{icon:["fas","user-tie"],class:"text-black mt-[3px] mr-2 text-md"}),t[1]||(t[1]=(0,n.Lk)("span",null,"ผู้ดูแล",-1))],8,A),(0,n.Lk)("a",w,[(0,n.bF)(X,{icon:["fas","trash-can"],class:"text-black mt-[3px] mr-2 text-md"}),t[2]||(t[2]=(0,n.Lk)("span",null,"ลบ",-1))])])])))),128)),(0,n.Lk)("a",C,[(0,n.Lk)("div",L,[(0,n.bF)(X,{icon:["fas","plus"],class:"text-3xl"})]),t[3]||(t[3]=(0,n.Lk)("p",{class:"text-gray-500 mt-2 text-center"},"Add Asset",-1))])])])])])])])])):(0,n.Q3)("",!0)],64)}var _=s(59911),X=s.n(_),F=s(75435),T=s(87814),P=s(40475),$={inject:["apiServer"],data(){return{hostkey:this.$Key,accessToken:P.A.get("session","token"),configs:P.A.get("configs"),listItems:[],loading_sources:!0}},components:{Loader:F.A,Subhead:T.A},methods:{async getData(){if(P.A.get("session","login"))try{this.loading_sources=!1;const e=await fetch("https://gateway.cloudrestfulapi.com/api/hostname/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({method:"find",args:[{$and:[{siteType:"asset"},{parent:this.configs.siteID}]}]})}),t=await e.json();console.log(t),this.listItems=t,this.loading_sources=!0}catch(e){console.log(e)}},async deleteData(e){if(P.A.get("session","login"))try{this.loading_sources=!1,console.log("id",e);const t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/schools/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}});console.log(await t),this.loading_sources=!0,await this.getData()}catch(t){console.log(t)}},updated(){X().replace()}},async mounted(){try{await this.getData()}catch(e){console.log(Error)}},setup(){}},K=s(64621);const N=(0,K.A)($,[["render",E]]);var j=N,D=s(74284),I={name:"Home",components:{Dashboard:j,Authen:D.A},data(){return{login:P.A.get("session","login")}},methods:{},mounted(){},setup(){const e=(0,l.lq)(),t=e.meta.title;(0,a.K7)(t),console.log("Dashboard")}};const S=(0,K.A)(I,[["render",o]]);var q=S},87814:function(e,t,s){s.d(t,{A:function(){return F}});var n=s(20641),o=s(90033),a=s(53751);const l={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},i={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},r={class:"min-w-0 flex-1"},c={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},u={key:0,class:"text-sm text-gray-500"},d={class:"mt-5 flex xl:mt-0 xl:ml-4"},g={class:"flex items-center space-x-2"},h={class:"text-sm text-gray-400"},m=["onUpdate:modelValue","placeholder","onChange"],p={value:"",disabled:""},f=["value"],b=["onClick"],x={class:"text-sm hidden sm:inline-block ml-1"},y=["onClick"],k={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,s,v,A,w){const C=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)("header",l,[(0,n.Lk)("div",i,[(0,n.Lk)("div",r,[(0,n.Lk)("h1",c,[(0,n.bF)(C,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,n.eW)(" "+(0,o.v_)(s.pageTitle?s.pageTitle:this.PageName),1)]),s.subhead?((0,n.uX)(),(0,n.CE)("p",u,(0,o.v_)(s.subhead),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",d,[(0,n.Lk)("div",g,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.navigation,((t,s)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:s},["select"===t.type?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("label",h,(0,o.v_)(t.placeholder),1),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:s=>e.$emit("toggleStatus",t.value)},[(0,n.Lk)("option",p,"-- "+(0,o.v_)(t.placeholder)+" --",1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.options,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.value},(0,o.v_)(e.name),9,f)))),128))],40,m),[[a.u1,t.value]])],64)):"call-function"===t.type?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[!1!==t.visible?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:s=>e.$emit(t.function),type:"button",class:(0,o.C4)(w.getClasses(t.class))},[(0,n.bF)(C,{icon:["fas",`${t.style}`],class:(0,o.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,n.Lk)("span",x,(0,o.v_)(t.name),1)],10,b)):(0,n.Q3)("",!0)],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[!1!==t.visible?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:e=>w.handleNavigationClick(t),type:"button",class:(0,o.C4)(w.getClasses(t.class))},[(0,n.bF)(C,{icon:["fas",`${t.style}`],class:(0,o.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,n.Lk)("span",k,(0,o.v_)(t.name),1)],10,y)):(0,n.Q3)("",!0)],64))],64)))),128))])])])])}s(44114);var A=s(75220),w=s(52968),C=s(23264),L=s(93426),E={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,A.lq)();return console.log("Translate",(0,L.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,L.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,w.K7)((0,L.iX)())},methods:{getClasses(e){const t=(0,C.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},_=s(64621);const X=(0,_.A)(E,[["render",v]]);var F=X},74284:function(e,t,s){s.d(t,{A:function(){return d}});var n=s(20641);function o(e,t,s,o,a,l){return(0,n.uX)(),(0,n.CE)("div")}var a=s(75220),l=s(63084),i=s(40475),r={name:"Authen",data(){return{configs:i.A.get("configs"),session:i.A.get("session")}},created(){l.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const e=(0,a.lq)(),t=e.meta.auth,s=e.name,n=i.A.get("session");let o=n.token,r=n.login,c=n.current;l.A.log("hasLogin",r),l.A.log("Page -> Auth:",t),l.A.log("User -> Token:",o),l.A.log("User -> Login:",r),"frontend"===this.session.interface?l.A.log("Front-End"):"backend"===this.session.interface&&(l.A.log("Back-End"),r?("Login"==s||void 0==c?(l.A.log("Not Login Again"),this.$router.replace({path:"/"})):(l.A.log("Has School Active"),t?(l.A.log("This page is : Authen Request"),""===o||null===o||void 0==o?l.A.log("Your Cannot Access"):l.A.log("Your Can Access")):l.A.log("This page is : No Authen Request")),l.A.log("Login")):(l.A.log("Not Login"),"Login"!=s?(window.location.href="/member/login",l.A.log("Not Login Page",s)):l.A.log("Login Page",s)))}},setup(){}},c=s(64621);const u=(0,c.A)(r,[["render",o]]);var d=u},23264:function(e,t,s){function n(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}s.d(t,{c:function(){return n}})}}]);
//# sourceMappingURL=2249.82f42e6c.js.map