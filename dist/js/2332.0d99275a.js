"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[2332],{2332:function(e,s,t){t.r(s),t.d(s,{default:function(){return v}});var o=t(20641),i=t(90033),a=t(53751);const n={class:"flex min-h-screen"},l={class:"mx-auto w-full max-w-sm lg:w-96"},r=["src"],c={class:"mt-8 border-t"},d={class:"mt-6"},u={class:"mt-1"},m={class:"space-y-1"},p={class:"mt-1"},g={class:"relative w-full"},f={class:"absolute inset-y-0 right-0 flex items-center px-2"},h=["type"];function b(e,s,t,b,k,w){return(0,o.uX)(),(0,o.CE)("div",n,[(0,o.Lk)("div",{class:(0,i.C4)(["flex flex-1 flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24 blocking relative",[k.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,o.Lk)("div",l,[(0,o.Lk)("div",null,[(0,o.Lk)("img",{class:"mx-auto h-24 w-auto",src:k.logo,alt:"FTI Academy"},null,8,r),s[4]||(s[4]=(0,o.Lk)("h2",{class:"mt-6 text-3xl font-bold tracking-tight text-gray-900 text-center"},"เข้าสู่ระบบ FTI Academy",-1))]),(0,o.Lk)("div",c,[(0,o.Lk)("div",d,[(0,o.Lk)("form",{class:"space-y-6",onSubmit:s[3]||(s[3]=(0,a.D$)(((...e)=>w.login&&w.login(...e)),["prevent"]))},[(0,o.Lk)("div",null,[s[5]||(s[5]=(0,o.Lk)("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"อีเมล์/ชื่อผู้ใช้งาน",-1)),(0,o.Lk)("div",u,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>k.email=e),id:"email",name:"email",type:"text",autocomplete:"email",required:"",class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"},null,512),[[a.Jo,k.email]])])]),(0,o.Lk)("div",m,[s[7]||(s[7]=(0,o.Lk)("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"รหัสผ่าน",-1)),(0,o.Lk)("div",p,[(0,o.Lk)("div",g,[(0,o.Lk)("div",f,[s[6]||(s[6]=(0,o.Lk)("input",{class:"hidden js-password-toggle",id:"toggle",type:"checkbox"},null,-1)),(0,o.Lk)("label",{class:"bg-gray-300 hover:bg-gray-400 rounded px-2 py-1 text-sm text-gray-600 font-mono cursor-pointer js-password-label",for:"toggle",onClick:s[1]||(s[1]=(...e)=>w.switchVisibility&&w.switchVisibility(...e)),ref:"btnToggle"},"แสดง",512)]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>k.password=e),id:"password",name:"password",placeholder:"รหัสผ่าน",type:k.passwordFieldType,autocomplete:"off",class:"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"},null,8,h),[[a.hp,k.password]])])])]),s[8]||(s[8]=(0,o.Fv)('<div class="flex items-center justify-between"><div class="flex items-center"><input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"><label for="remember-me" class="ml-2 block text-sm text-gray-900">จำข้อมูลของฉัน</label></div><div class="text-sm"><a href="forgot" class="font-medium text-indigo-600 hover:text-indigo-500">ลืมรหัสผ่าน?</a></div></div><div><button type="submit" class="flex w-full justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">เข้าสู่ระบบ</button></div>',2))],32)])])])],2),s[9]||(s[9]=(0,o.Lk)("div",{class:"relative hidden w-0 flex-1 lg:block"},[(0,o.Lk)("img",{class:"absolute inset-0 h-full w-full object-cover",src:"https://img.freepik.com/free-photo/business-freelance-asian-woman-working-doing-projects-sending-email-laptop-computer-while-sitting-table-cafe_7861-1332.jpg?w=1480&t=st=1667435493~exp=1667436093~hmac=f007ab2e563a0ca4ba5a740b4472aba8345881433a772ac3ef9017ef30e6dd5c",alt:""})],-1))])}var k=t(40475),w={name:"ContactUs",inject:["apiServer"],data(){return{logo:t(64760),email:"",password:"",showPassword:!1,returnSecureToken:!0,passwordFieldType:"password",activeBlock:!1}},components:{},methods:{async login(){try{this.activeBlock=!0;let e="",s="";const t=await fetch("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDODKwE1BfZOj9ieB6pisJm-p2MmudWLSw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email,password:this.password,returnSecureToken:this.returnSecureToken})}),o=await t.json(),i=t.status;if(console.log("resAPILogin",o),"200"==i){e=o.idToken,this.cookies.set("userToken",e),this.cookies.set("hasLogin",!0),s=o.refreshToken,this.cookies.set("userTokenRefresh",s),console.log("userToken",e);const t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/auth/role/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}),i=await t.json();if(console.log("Role",i),i.success){const t={role:i.data.role,token:e,refresh:s};k.A.update("session",t),this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,icon:"success",title:"แจ้งเตือน",text:"เข้าสู่ระบบเรียบร้อยแล้ว"}).then((()=>{}))}}else this.$swal({title:"เกิดข้อผิดพลาด",text:o.message,icon:"error",confirmButtonText:"ตกลง"}).then((()=>{this.activeBlock=!1}))}catch(e){console.log(e)}},switchVisibility(){this.passwordFieldType="password"===this.passwordFieldType?"text":"password",this.show=!this.show,this.$refs.btnToggle.innerText=this.show?"ซ่อน":"แสดง"}},setup(){},mounted(){}},x=t(64621);const y=(0,x.A)(w,[["render",b]]);var v=y},64760:function(e,s,t){e.exports=t.p+"img/color-logo.9f3f18a5.png"}}]);
//# sourceMappingURL=2332.0d99275a.js.map