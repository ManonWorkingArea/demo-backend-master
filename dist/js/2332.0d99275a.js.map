{"version":3,"file":"js/2332.0d99275a.js","mappings":"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","sources":["webpack://node-backend/./src/extensions/modules/system/member/view/Unactive.vue","webpack://node-backend/./src/extensions/modules/system/member/view/Unactive.vue?c622"],"sourcesContent":["<script>\n\n// Component\n\nimport storageManager from '@/plugins/storage';\n\n// Plugin\n\n\nexport default {\n  name: 'ContactUs',\n  inject: ['apiServer'],\n  data() {\n    return {\n      logo:require('@/assets/images/color-logo.png'),\n      email: '',\n      password: '',\n      showPassword: false,\n      returnSecureToken:true,\n      passwordFieldType: \"password\",\n      activeBlock: false\n    }\n  },\n  components: {\n  },\n  methods: {\n    async login() {\n        try {\n          // Request user login\n          this.activeBlock  = true;\n          let userToken     = \"\";\n          let userTokenRefresh     = \"\";\n          const resAPILogin = await fetch(\"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDODKwE1BfZOj9ieB6pisJm-p2MmudWLSw\", {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              email: this.email,\n              password: this.password,\n              returnSecureToken: this.returnSecureToken,\n            })\n          });\n\n          const getLogin  = await resAPILogin.json();\n          const status = resAPILogin.status;\n          console.log(\"resAPILogin\",getLogin);\n\n          if(status==\"200\") {\n            \n            userToken = getLogin.idToken;\n            this.cookies.set(\"userToken\", userToken);\n            this.cookies.set(\"hasLogin\", true);\n\n            userTokenRefresh = getLogin.refreshToken;\n            this.cookies.set(\"userTokenRefresh\", userTokenRefresh);\n\n            console.log(\"userToken\",userToken);\n\n            const resAPIRole = await fetch(\"https://asia-southeast2-elearning-6871c.cloudfunctions.net/auth/role/\", {\n              method: 'GET',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + userToken,\n              }\n            });\n            const getRole  = await resAPIRole.json();\n\n            console.log(\"Role\",getRole)\n            \n            if(getRole.success)\n            {\n              // --------------------------------------------\n              const session = {\n                role: getRole.data.role,\n                token: userToken,\n                refresh: userTokenRefresh,\n              };\n              storageManager.update('session',session)\n              // --------------------------------------------\n              \n              // Return to interface\n              this.$swal({\n                  toast: true,\n                  position: 'bottom-end',\n                  showConfirmButton: false,\n                  timer: 1000,\n                  icon: 'success',\n                  title: 'แจ้งเตือน',\n                  text: 'เข้าสู่ระบบเรียบร้อยแล้ว',\n              }).then(() => \n              {\n                // window.location.href = \"/\"\n              });\n            }\n          } else {\n            this.$swal({\n            title: 'เกิดข้อผิดพลาด',\n            text: getLogin.message,\n            icon: 'error',\n            confirmButtonText: 'ตกลง'\n            }).then(() => {\n              this.activeBlock = false;\n            })\n          }\n        } catch (error) {\n          console.log(error)\n        }\n    },\n    switchVisibility() {\n      this.passwordFieldType = this.passwordFieldType === \"password\" ? \"text\" : \"password\";\n      this.show = !this.show;\n      this.$refs.btnToggle.innerText = this.show?'ซ่อน':'แสดง';\n    }\n  },\n  setup() {\n\n  },\n \n  mounted() {\n    // let my_cookie_value = this.cookies.get(\"myCoookie\");\n    // console.log(my_cookie_value);\n  }\n}\n</script>\n\n<template>\n\n  \n\n  <div class=\"flex min-h-screen\">\n    <div class=\"flex flex-1 flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24 blocking relative\" :data-content=\"'กำลังติดต่อฐานข้อมูล กรุณารอสักครู่.....'\" :class=\"[(activeBlock?'isblock' : 'isunblock')]\">\n      <div class=\"mx-auto w-full max-w-sm lg:w-96 \" >\n        <div>\n          <img class=\"mx-auto h-24 w-auto\" :src=\"logo\" alt=\"FTI Academy\">\n          <h2 class=\"mt-6 text-3xl font-bold tracking-tight text-gray-900 text-center\">เข้าสู่ระบบ FTI Academy</h2>\n        </div>\n\n        <div class=\"mt-8 border-t\">\n\n          <div class=\"mt-6\">\n            <form class=\"space-y-6\" @submit.prevent=\"login\">\n              <div>\n                <label for=\"email\" class=\"block text-sm font-medium text-gray-700\">อีเมล์/ชื่อผู้ใช้งาน</label>\n                <div class=\"mt-1\">\n                  <input v-model=\"email\" id=\"email\" name=\"email\" type=\"text\" autocomplete=\"email\" required class=\"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm\">\n                </div>\n              </div>\n\n              <div class=\"space-y-1\">\n                <label for=\"password\" class=\"block text-sm font-medium text-gray-700\">รหัสผ่าน</label>\n                  <div class=\"mt-1\">\n                    <div class=\"relative w-full\">\n                      <div class=\"absolute inset-y-0 right-0 flex items-center px-2\">\n                        <input class=\"hidden js-password-toggle\" id=\"toggle\" type=\"checkbox\" />\n                        <label class=\"bg-gray-300 hover:bg-gray-400 rounded px-2 py-1 text-sm text-gray-600 font-mono cursor-pointer js-password-label\" for=\"toggle\" @click=\"switchVisibility\" ref=\"btnToggle\">แสดง</label>\n                      </div>\n                      <input v-model=\"password\" id=\"password\" name=\"password\" placeholder=\"รหัสผ่าน\" :type=\"passwordFieldType\" autocomplete=\"off\" class=\"block w-full appearance-none rounded-md border border-gray-300 px-3 py-2 placeholder-gray-400 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm\"/>\n                    </div>\n                  </div>\n              </div>\n\n              <div class=\"flex items-center justify-between\">\n                <div class=\"flex items-center\">\n                  <input id=\"remember-me\" name=\"remember-me\" type=\"checkbox\" class=\"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500\">\n                  <label for=\"remember-me\" class=\"ml-2 block text-sm text-gray-900\">จำข้อมูลของฉัน</label>\n                </div>\n\n                <div class=\"text-sm\">\n                  <a href=\"forgot\" class=\"font-medium text-indigo-600 hover:text-indigo-500\">ลืมรหัสผ่าน?</a>\n                </div>\n              </div>\n\n              <div>\n                <button type=\"submit\" class=\"flex w-full justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\">เข้าสู่ระบบ</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"relative hidden w-0 flex-1 lg:block\">\n      <img class=\"absolute inset-0 h-full w-full object-cover\" src=\"https://img.freepik.com/free-photo/business-freelance-asian-woman-working-doing-projects-sending-email-laptop-computer-while-sitting-table-cafe_7861-1332.jpg?w=1480&t=st=1667435493~exp=1667436093~hmac=f007ab2e563a0ca4ba5a740b4472aba8345881433a772ac3ef9017ef30e6dd5c\" alt=\"\">\n    </div>\n  </div>\n  \n</template>","import { render } from \"./Unactive.vue?vue&type=template&id=5d38d831\"\nimport script from \"./Unactive.vue?vue&type=script&lang=js\"\nexport * from \"./Unactive.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_normalizeClass","$data","activeBlock","_hoisted_2","src","logo","alt","_hoisted_3","_hoisted_4","_hoisted_5","onSubmit","_cache","_withModifiers","args","$options","login","for","_hoisted_6","$event","email","id","name","type","autocomplete","required","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","onClick","switchVisibility","ref","password","placeholder","passwordFieldType","_hoisted_11","_createStaticVNode","inject","data","require","showPassword","returnSecureToken","components","methods","this","userToken","userTokenRefresh","resAPILogin","fetch","method","headers","body","JSON","stringify","getLogin","json","status","console","log","idToken","cookies","set","refreshToken","resAPIRole","getRole","success","session","role","token","refresh","storageManager","update","$swal","toast","position","showConfirmButton","timer","icon","title","text","then","message","confirmButtonText","error","show","$refs","btnToggle","innerText","setup","mounted","__exports__","render"],"sourceRoot":""}