"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[2359],{82359:function(e,t,s){s.r(t),s.d(t,{default:function(){return V}});var a=s(20641);const n={class:"w-full h-full"};function o(e,t,s,o,i,l){const r=(0,a.g2)("Package",!0);return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.bF)(r)])}s(44114);var i=s(90033);const l={key:0,class:"text-center"},r={key:2,class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5 border-t"},c={class:"mt-8"},d={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},u={class:"mt-8 flex flex-col"},g={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},p={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},m={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},f={class:"relative"},x={class:"absolute top-2 right-2 bg-indigo-600 text-white px-3 py-1 text-sm font-semibold rounded-md"},k={class:"h-48 bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center"},h={class:"text-center text-white"},b={class:"text-xl font-bold"},y={class:"p-4"},v={class:"mb-3"},w={class:"flex items-center justify-between mb-2"},C={class:"text-sm text-gray-600"},L={class:"grid grid-cols-2 gap-2 text-sm"},_={class:"flex items-center"},F={class:"flex items-center"},E={class:"flex items-center"},X={class:"flex items-center"},P={class:"bg-gray-100 border-t-2 border-gray-200 py-2 px-4 flex justify-between items-center"},j=["onClick"],A=["onClick"],T=["onClick"],$=["onClick"];function S(e,t,s,n,o,S){const K=(0,a.g2)("Loader"),I=(0,a.g2)("Subhead"),N=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)(a.FK,null,[o.loading_sources?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(K)])),o.loading_sources?((0,a.uX)(),(0,a.Wv)(I,{key:1,navigation:[{name:"เพิ่ม Package",link:"/origin/package/add",style:"plus",class:"primary-btn",visible:!0,type:"button"}]})):(0,a.Q3)("",!0),o.loading_sources?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",c,[(0,a.Lk)("div",d,[(0,a.Lk)("div",u,[(0,a.Lk)("div",g,[(0,a.Lk)("div",p,[(0,a.Lk)("div",m,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.listItems,(s=>((0,a.uX)(),(0,a.CE)("div",{key:s._id,class:"bg-white rounded-lg shadow-md overflow-hidden"},[(0,a.Lk)("div",f,[(0,a.Lk)("div",x,(0,i.v_)(s.price)+" บาท ",1),(0,a.Lk)("div",k,[(0,a.Lk)("div",h,[(0,a.bF)(N,{icon:["fas","gift"],class:"text-6xl mb-4"}),(0,a.Lk)("h3",b,(0,i.v_)(s.name),1)])])]),(0,a.Lk)("div",y,[(0,a.Lk)("div",v,[(0,a.Lk)("div",w,[(0,a.Lk)("p",C,(0,i.v_)(s.description),1),(0,a.Lk)("span",{class:(0,i.C4)(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",s.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},(0,i.v_)(s.status?"เปิดใช้งาน":"ปิดใช้งาน"),3)]),(0,a.Lk)("div",L,[(0,a.Lk)("div",_,[(0,a.bF)(N,{icon:["fas","database"],class:"text-indigo-600 mr-2"}),(0,a.Lk)("span",null,"Assets: "+(0,i.v_)(s.limits.maxAssets),1)]),(0,a.Lk)("div",F,[(0,a.bF)(N,{icon:["fas","hdd"],class:"text-indigo-600 mr-2"}),(0,a.Lk)("span",null,(0,i.v_)(s.limits.storageGB)+" GB",1)]),(0,a.Lk)("div",E,[(0,a.bF)(N,{icon:["fas","users"],class:"text-indigo-600 mr-2"}),(0,a.Lk)("span",null,"Users: "+(0,i.v_)(s.limits.maxUsers),1)]),(0,a.Lk)("div",X,[(0,a.bF)(N,{icon:["fas","clock"],class:"text-indigo-600 mr-2"}),(0,a.Lk)("span",null,(0,i.v_)(s.duration)+" วัน",1)])])])]),(0,a.Lk)("div",P,[(0,a.Lk)("a",{href:"javascript:void(0);",onClick:e=>S.togglePackageStatus(s._id,s.status),class:(0,i.C4)(["text-md font-medium",s.status?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"])},[(0,a.bF)(N,{icon:["fas",s.status?"pause":"play"],class:"mt-[3px] mr-2 text-md"},null,8,["icon"]),(0,a.Lk)("span",null,(0,i.v_)(s.status?"ปิดใช้งาน":"เปิดใช้งาน"),1)],10,j),(0,a.Lk)("a",{href:"javascript:void(0);",onClick:t=>e.$router.push("/origin/package/edit/"+s._id),class:"text-gray-900 hover:text-gray-500 text-md font-medium"},[(0,a.bF)(N,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),t[0]||(t[0]=(0,a.Lk)("span",null,"แก้ไข",-1))],8,A),(0,a.Lk)("a",{href:"javascript:void(0);",onClick:t=>e.$router.push("/origin/package/detail/"+s._id),class:"text-gray-900 hover:text-gray-500 text-md font-medium"},[(0,a.bF)(N,{icon:["fas","eye"],class:"text-black mt-[3px] mr-2 text-md"}),t[1]||(t[1]=(0,a.Lk)("span",null,"ดู",-1))],8,T),(0,a.Lk)("a",{href:"javascript:void(0);",onClick:e=>S.deleteData(s._id),class:"text-red-600 hover:text-red-800 text-md font-medium"},[(0,a.bF)(N,{icon:["fas","trash"],class:"mt-[3px] mr-2 text-md"}),t[2]||(t[2]=(0,a.Lk)("span",null,"ลบ",-1))],8,$)])])))),128))])])])])])])])):(0,a.Q3)("",!0)],64)}var K=s(59911),I=s.n(K),N=s(75435),D=s(87814),Q=s(40475),U={inject:["apiServer"],data(){return{hostkey:this.$Key,accessToken:Q.A.get("session","token"),configs:Q.A.get("configs"),listItems:[],loading_sources:!0}},components:{Loader:N.A,Subhead:D.A},methods:{async getData(){if(Q.A.get("session","login"))try{this.loading_sources=!1;const e=await fetch("https://gateway.cloudrestfulapi.com/api/package/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({method:"find",args:[{}]})}),t=await e.json();console.log(t),this.listItems=t,this.loading_sources=!0}catch(e){console.log(e)}},async deleteData(e){if(Q.A.get("session","login"))try{this.loading_sources=!1,console.log("id",e);const t=await fetch("https://gateway.cloudrestfulapi.com/api/package/"+e,{method:"DELETE",headers:{"Content-Type":"application/json","client-token-key":this.hostkey}});console.log(await t),this.loading_sources=!0,await this.getData()}catch(t){console.log(t)}},async togglePackageStatus(e,t){try{if(!confirm(`คุณต้องการ${t?"ปิดใช้งาน":"เปิดใช้งาน"} Package นี้หรือไม่?`))return;this.loading_sources=!1;const s=await fetch(`https://gateway.cloudrestfulapi.com/api/package/${e}`,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({data:{status:!t}})});if(!s.ok)throw new Error("Failed to update package status");await this.getData()}catch(s){console.error("Error toggling package status:",s),this.loading_sources=!0}},getStatusClass(e){return e?"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800":"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800"},formatPrice(e){return new Intl.NumberFormat("th-TH").format(e)},openPackageManagement(){this.$router.push("/origin/package/management")},updated(){I().replace()}},async mounted(){try{await this.getData()}catch(e){console.log(Error)}},setup(){}},q=s(64621);const O=(0,q.A)(U,[["render",S]]);var B=O,G={components:{Package:B}};const J=(0,q.A)(G,[["render",o]]);var V=J},87814:function(e,t,s){s.d(t,{A:function(){return P}});var a=s(20641),n=s(90033),o=s(53751);const i={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},l={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},r={class:"min-w-0 flex-1"},c={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},d={key:0,class:"text-sm text-gray-500"},u={class:"mt-5 flex xl:mt-0 xl:ml-4"},g={class:"flex items-center space-x-2"},p={class:"text-sm text-gray-400"},m=["onUpdate:modelValue","placeholder","onChange"],f={value:"",disabled:""},x=["value"],k=["onClick"],h={class:"text-sm hidden sm:inline-block ml-1"},b=["onClick"],y={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,s,v,w,C){const L=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("header",i,[(0,a.Lk)("div",l,[(0,a.Lk)("div",r,[(0,a.Lk)("h1",c,[(0,a.bF)(L,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,a.eW)(" "+(0,n.v_)(s.pageTitle?s.pageTitle:this.PageName),1)]),s.subhead?((0,a.uX)(),(0,a.CE)("p",d,(0,n.v_)(s.subhead),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",u,[(0,a.Lk)("div",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.navigation,((t,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},["select"===t.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("label",p,(0,n.v_)(t.placeholder),1),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:s=>e.$emit("toggleStatus",t.value)},[(0,a.Lk)("option",f,"-- "+(0,n.v_)(t.placeholder)+" --",1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.options,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:t,value:e.value},(0,n.v_)(e.name),9,x)))),128))],40,m),[[o.u1,t.value]])],64)):"call-function"===t.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[!1!==t.visible?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:s=>e.$emit(t.function),type:"button",class:(0,n.C4)(C.getClasses(t.class))},[(0,a.bF)(L,{icon:["fas",`${t.style}`],class:(0,n.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,a.Lk)("span",h,(0,n.v_)(t.name),1)],10,k)):(0,a.Q3)("",!0)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[!1!==t.visible?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e=>C.handleNavigationClick(t),type:"button",class:(0,n.C4)(C.getClasses(t.class))},[(0,a.bF)(L,{icon:["fas",`${t.style}`],class:(0,n.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,a.Lk)("span",y,(0,n.v_)(t.name),1)],10,b)):(0,a.Q3)("",!0)],64))],64)))),128))])])])])}s(44114);var w=s(75220),C=s(52968),L=s(23264),_=s(93426),F={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,w.lq)();return console.log("Translate",(0,_.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,_.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,C.K7)((0,_.iX)())},methods:{getClasses(e){const t=(0,L.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},E=s(64621);const X=(0,E.A)(F,[["render",v]]);var P=X},23264:function(e,t,s){function a(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}s.d(t,{c:function(){return a}})}}]);
//# sourceMappingURL=2359.69730d7d.js.map