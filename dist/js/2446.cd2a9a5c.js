"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[2446],{32670:function(t,i,a){a.r(i),a.d(i,{default:function(){return c}});var e=a(20641);function s(t,i,a,s,n,o){const r=(0,e.g2)("ContentForm");return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.bF)(r,{mode:"add",type:"post",initialData:n.initialData,onCloseEdit:o.closeEdit},null,8,["initialData","onCloseEdit"])])}a(44114);var n=a(40475),o=a(47930),r={data(){const t=n.A.get("session","token"),i=n.A.get("session"),a=this.$route.params;return{configs:n.A.get("configs"),hostkey:this.$Key,accessToken:t,session:i,loading_sources:!0,isEditMode:!0,initialData:{type:"blog",owner:i.current._id,status:"draft",parent:a.id||null,pageID:a.id||null}}},components:{ContentForm:o.A},created(){this.$route.params.id&&this.fetchParentPageDetails()},methods:{async fetchParentPageDetails(){try{const t=await this.$api.get(`/api/page/${this.$route.params.id}`),i=t.data;this.initialData={...this.initialData,destination:i.destination||"",course:i.course||""}}catch(t){console.error("เกิดข้อผิดพลาดในการดึงข้อมูล parent page:",t)}},openEdit(t){this.isEditMode=!0,this.initialData={...this.initialData,...t}},closeEdit(){this.isEditMode=!1,this.initialData={type:"blog",owner:this.session.current._id,status:"draft",parent:this.$route.params.id||null,pageID:this.$route.params.id||null},this.$router.push("/cms/blog")}}},d=a(64621);const l=(0,d.A)(r,[["render",s]]);var c=l}}]);
//# sourceMappingURL=2446.cd2a9a5c.js.map