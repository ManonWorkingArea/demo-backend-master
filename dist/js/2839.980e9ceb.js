"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[2839],{12839:function(e,t,s){s.r(t),s.d(t,{default:function(){return te}});var o=s(20641);function a(e,t,s,a,l,n){return(0,o.uX)(),(0,o.Wv)((0,o.$y)(n.componentName))}var l=s(52968),n=s(75220),i=s(40475),r=s(53751),c=s(90033);const d={class:"flex-1 bg-gray-100 pt-2 pb-5"},u={class:"mt-2"},p={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},g={class:"space-y-6 sm:px-6 lg:col-span-9 lg:px-0"},h={class:"shadow"},m={class:"bg-white py-6 px-4 sm:p-6"},y={class:"mt-6 grid grid-cols-5 gap-2"},f={class:"mt-1"},b={class:"inline-flex items-center"},k={class:"inline-flex items-center ml-6"},v={class:"mt-1"},_={class:"inline-flex items-center"},x={class:"inline-flex items-center ml-6"},w={class:"mt-6 grid grid-cols-5 gap-2"},L={class:"col-span-3"},C=["value"],S=["value"],q={class:"mt-6 grid grid-cols-5 gap-2"},E={class:"col-span-3"},O={class:"relative mt-1 rounded-md shadow-sm"},I={class:"absolute w-full mt-2 bg-white border rounded-md shadow-lg",style:{height:"300px","overflow-y":"auto"},ref:"dropdown"},A={class:"px-3 py-2"},T={class:"flex items-center"},N={class:"flex items-center"},F=["value"],X={class:"col-span-2 mt-7"},$={key:0,class:"shadow sm:overflow-hidden sm:rounded-md mt-8"},P={class:"bg-white py-6 px-4 sm:p-6"},j={class:"mt-5 overflow-x-auto"},B={class:"table-auto border border-gray-100 w-full"},D={class:"border border-gray-100"},U={class:"px-4 py-2"},R={class:"px-4 py-2"},V={class:"px-4 py-2"},K={class:"px-4 py-2"},J={class:"px-4 py-2"};function Q(e,t,s,a,l,n){const i=(0,o.g2)("Subhead"),Q=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(i,{navigation:[{name:"ย้อนกลับ",link:"/cms/content",style:"chevron-left",class:"default-btn",visible:!0,type:"button"}]}),(0,o.Lk)("div",d,[(0,o.Lk)("div",u,[(0,o.Lk)("div",p,[(0,o.Lk)("div",g,[(0,o.Lk)("form",{onSubmit:t[19]||(t[19]=(0,r.D$)(((...t)=>e.addAdmin&&e.addAdmin(...t)),["prevent"]))},[(0,o.Lk)("section",{"aria-labelledby":"payment-details-heading",class:(0,c.C4)(["relative",[l.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,o.Lk)("div",h,[(0,o.Lk)("div",m,[t[40]||(t[40]=(0,o.Lk)("div",null,[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"สร้างเลขคำขอส่งตัวอย่าง"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"กรอกข้อมูลให้ครบถ้วน.")],-1)),(0,o.Lk)("div",y,[(0,o.Lk)("div",null,[t[20]||(t[20]=(0,o.Lk)("label",{for:"req_no",class:"block text-md font-medium text-gray-700"},"เลขที่คำขอ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.req_no=e),type:"text",name:"req_no",id:"req_no",autocomplete:"req_no",readonly:"",class:"mt-1 block w-full rounded-md bg-gray-100 border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,l.req_no]])]),(0,o.Lk)("div",null,[t[22]||(t[22]=(0,o.Lk)("label",{for:"choose_favor",class:"block text-md font-medium text-gray-700"},"รูปแบบประจำ",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.choose_favor=e),name:"choose_favor",id:"choose_favor",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},t[21]||(t[21]=[(0,o.Lk)("option",{value:"",disabled:"",selected:""},"ไม่เลือก",-1),(0,o.Lk)("option",{value:"A"},"แบบที่ 1",-1),(0,o.Lk)("option",{value:"B"},"แบบที่ 2",-1)]),512),[[r.u1,l.choose_favor]])]),(0,o.Lk)("div",null,[t[23]||(t[23]=(0,o.Lk)("label",{for:"total_test",class:"block text-md font-medium text-gray-700"},"จำนวน(ต.ย.)*",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.total_test=e),type:"number",name:"total_test",id:"total_test",autocomplete:"total_test",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,l.total_test]])]),(0,o.Lk)("div",null,[t[26]||(t[26]=(0,o.Lk)("label",{for:"language_result",class:"block text-md font-medium text-gray-700"},"ภาษา",-1)),(0,o.Lk)("div",f,[(0,o.Lk)("label",b,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=e=>l.language_result=e),name:"language_result",value:"0",class:"form-radio h-4 w-4 text-gray-600"},null,512),[[r.XL,l.language_result]]),t[24]||(t[24]=(0,o.Lk)("span",{class:"ml-2"},"ไทย",-1))]),(0,o.Lk)("label",k,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>l.language_result=e),name:"language_result",value:"1",class:"form-radio h-4 w-4 text-gray-600"},null,512),[[r.XL,l.language_result]]),t[25]||(t[25]=(0,o.Lk)("span",{class:"ml-2"},"อังกฤษ",-1))])])]),(0,o.Lk)("div",null,[t[29]||(t[29]=(0,o.Lk)("label",{for:"receive_result",class:"block text-md font-medium text-gray-700"},"การรับผล",-1)),(0,o.Lk)("div",v,[(0,o.Lk)("label",_,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=e=>l.receive_result=e),name:"receive_result",value:"0",class:"form-radio h-4 w-4 text-gray-600"},null,512),[[r.XL,l.receive_result]]),t[27]||(t[27]=(0,o.Lk)("span",{class:"ml-2"},"ด้วยตัวเอง",-1))]),(0,o.Lk)("label",x,[(0,o.bo)((0,o.Lk)("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=e=>l.receive_result=e),name:"receive_result",value:"1",class:"form-radio h-4 w-4 text-gray-600"},null,512),[[r.XL,l.receive_result]]),t[28]||(t[28]=(0,o.Lk)("span",{class:"ml-2"},"ไปรษณีย์",-1))])])])]),(0,o.Lk)("div",w,[(0,o.Lk)("div",L,[t[31]||(t[31]=(0,o.Lk)("label",{for:"req_no",class:"block text-md font-medium text-gray-700"},"กิจกรรม*",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.activity_code=e),class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},[t[30]||(t[30]=(0,o.Lk)("option",{value:""},"เลือกกิจกรรม",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.activities,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.ini_code,value:e.ini_code},(0,c.v_)(e.ini_desc1),9,C)))),128))],512),[[r.u1,l.activity_code]])]),(0,o.Lk)("div",null,[t[33]||(t[33]=(0,o.Lk)("label",{for:"service_code",class:"block text-md font-medium text-gray-700"},"ประเภท*",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.service_code=e),name:"service_code",id:"service_code",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm",onChange:t[9]||(t[9]=(...e)=>n.SearchSamCodeByGroup&&n.SearchSamCodeByGroup(...e))},t[32]||(t[32]=[(0,o.Lk)("option",{value:"",disabled:"",selected:""},"เลือกประเภท",-1),(0,o.Lk)("option",{value:"A"},"เนื้อ/ผลิดภัณฑ์จากสัตว์",-1),(0,o.Lk)("option",{value:"B"},"อาหารสัตว์",-1)]),544),[[r.u1,l.service_code]])]),(0,o.Lk)("div",null,[t[35]||(t[35]=(0,o.Lk)("label",{for:"sample_code",class:"block text-md font-medium text-gray-700"},"ชนิดตัวอย่าง*",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.sample_code=e),name:"sample_code",id:"sample_code",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},[t[34]||(t[34]=(0,o.Lk)("option",{value:"",disabled:"",selected:""},"ไม่เลือก",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.sampleOptions,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.value,value:e.value},(0,c.v_)(e.label),9,S)))),128))],512),[[r.u1,l.sample_code]])])]),(0,o.Lk)("div",q,[(0,o.Lk)("div",E,[t[37]||(t[37]=(0,o.Lk)("label",{for:"item_select",class:"block text-md font-medium text-gray-700"},"เลือกรายการตรวจฯ*",-1)),(0,o.Lk)("div",O,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>l.searchQuery=e),placeholder:"ค้นหา...",class:"w-full py-2 px-3 rounded-md border-gray-300 focus:outline-none focus:ring-gray-900 focus:border-gray-900"},null,512),[[r.Jo,l.searchQuery]]),(0,o.Lk)("button",{class:"absolute right-0 top-0 bottom-0 px-4 py-2 bg-gray-200 text-gray-700 rounded-r-md focus:outline-none",onClick:t[12]||(t[12]=(...e)=>n.toggleDropdown&&n.toggleDropdown(...e))},(0,c.v_)(l.isDropdownOpen?`บันทึกข้อมูล (${l.selectedItems.length} new)`:l.selectedItems.length>0?"เลือกแล้ว "+l.selectedItems.length:"ยังไม่ได้เลือก"),1),(0,o.bo)((0,o.Lk)("ul",I,[(0,o.Lk)("li",A,[(0,o.Lk)("label",T,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=e=>l.selectAll=e),onClick:t[14]||(t[14]=(...e)=>n.toggleSelectAll&&n.toggleSelectAll(...e)),class:"form-checkbox mr-2"},null,512),[[r.lH,l.selectAll]]),t[36]||(t[36]=(0,o.Lk)("span",null,"เลือกทั้งหมด",-1))])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredOptions,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e.value,class:"px-3 py-2"},[(0,o.Lk)("label",N,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[15]||(t[15]=e=>l.selectedItems=e),value:e.value,class:"form-checkbox mr-2",onClick:t[16]||(t[16]=(0,r.D$)((()=>{}),["stop"]))},null,8,F),[[r.lH,l.selectedItems]]),(0,o.Lk)("span",null,(0,c.v_)(e.label),1)])])))),128))],512),[[r.aG,l.isDropdownOpen&&n.filteredOptions.length>0]])])]),(0,o.Lk)("div",X,[null===this.return_item?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[17]||(t[17]=(0,r.D$)(((...e)=>n.CreateReqNo&&n.CreateReqNo(...e)),["prevent"])),type:"button",class:"relative rounded-md w-full bg-gray-800 px-4 py-2.5 text-md font-medium text-white hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,o.bF)(Q,{icon:["fas","plus"],class:"pr-2 pl-2"}),t[38]||(t[38]=(0,o.eW)(" สร้างคำขอ "))])):(0,o.Q3)("",!0),null!==this.return_item?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:t[18]||(t[18]=(0,r.D$)(((...e)=>n.EditReqNo&&n.EditReqNo(...e)),["prevent"])),type:"button",class:"relative rounded-md w-full bg-blue-800 px-4 py-2.5 text-md font-medium text-white hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,o.bF)(Q,{icon:["fas","save"],class:"pr-2 pl-2"}),t[39]||(t[39]=(0,o.eW)(" แก้ไข "))])):(0,o.Q3)("",!0)])])])]),null!==this.return_item?((0,o.uX)(),(0,o.CE)("div",$,[(0,o.Lk)("div",P,[t[43]||(t[43]=(0,o.Lk)("div",null,[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-medium leading-6 text-gray-900"},"ข้อมูลคำขอที่บันทึกล่าสุด"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"สามารถแก้ไขข้อมูลได้.")],-1)),(0,o.Lk)("div",j,[(0,o.Lk)("table",B,[t[42]||(t[42]=(0,o.Lk)("thead",{class:"bg-gray-200 text-left border border-gray-100"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{class:"px-4 py-2",scope:"col"},"เลขที่คำขอ"),(0,o.Lk)("th",{class:"px-4 py-2",scope:"col"},"หมายเลข ต.ย."),(0,o.Lk)("th",{class:"px-4 py-2",scope:"col"},"รวม(ต.ย./ตรวจฯ)"),(0,o.Lk)("th",{class:"px-4 py-2",scope:"col"},"กิจกรรม"),(0,o.Lk)("th",{class:"px-4 py-2",scope:"col"},"ชนิดตัวอย่าง"),(0,o.Lk)("th",{class:"px-4 py-2",scope:"col"},"Action")])],-1)),(0,o.Lk)("tbody",D,[(0,o.Lk)("tr",null,[(0,o.Lk)("td",U,(0,c.v_)(this.req_no),1),(0,o.Lk)("td",R,(0,c.v_)(this.return_item.AllTestNo),1),(0,o.Lk)("td",V,(0,c.v_)(this.return_item.total_test)+"/"+(0,c.v_)(this.return_item.TotalItem),1),(0,o.Lk)("td",K,(0,c.v_)(this.return_item.ActivityName),1),(0,o.Lk)("td",J,(0,c.v_)(this.return_item.SampleName),1),t[41]||(t[41]=(0,o.Lk)("td",{class:"px-4 py-2"},[(0,o.Lk)("button",{class:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},"แก้ไข")],-1))])])])])])])):(0,o.Q3)("",!0)],2)],32)])])])])],64)}s(98992),s(54520),s(72577),s(81454);var G=s(87814);function M(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";for(let o=0;o<e;o++){const e=Math.floor(Math.random()*t.length);s+=t.charAt(e)}return s}var H={name:"ContactUs",inject:["apiServer"],data(){return{title:"",slug:"newpage-slug",content:"",display:"single",type:"page",owner:"",configs:i.A.get("configs"),session:i.A.get("session"),bqclp:i.A.get("bqclp"),activeBlock:!1,editing:void 0,isComment:void 0,isCounter:void 0,isMenu:void 0,layout:void 0,parent:void 0,FileBrowserOpen:!1,parentList:[],searchTerm:"",showDropdown:!1,destination:"form",defaultCollectionOptions:["form","message"],activity_code:"",activities:[],choose_favor:"",sample_code:"",sampleOptions:[],searchQuery:"",selectedItems:[],item_select:[],isDropdownOpen:!1,selectAll:!1,req_no:"",total_test:"1",language_result:"0",receive_result:"0",service_code:"",return_item:null}},components:{Subhead:G.A},computed:{filteredParentList(){return this.parentList.filter((e=>e.title.toLowerCase().includes(this.searchTerm.toLowerCase())))},filteredOptions(){const e=this.searchQuery.toLowerCase();return this.item_select.filter((t=>t.label&&t.label.toLowerCase().includes(e)))}},methods:{toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen},toggleSelectAll(){this.selectAll=!this.selectAll,this.selectAll?this.selectedItems=this.filteredOptions.map((e=>e.value)):this.selectedItems=[]},fetchData(){fetch("https://sea-turtle-app-hit8g.ondigitalocean.app/activity").then((e=>e.json())).then((e=>{this.activities=e.data})).catch((e=>{console.error(e)}))},async SearchSamCodeByGroup(){if(this.service_code){this.isDropdownOpen=!1;const t="https://sea-turtle-app-hit8g.ondigitalocean.app/query",s={StrSql:`pl_select_ini_code 6, 'SAMPLE', '${this.service_code}'`};try{const e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await e.json();this.sampleOptions=o.data.map((e=>({value:e.ini_code,label:e.ini_desc_thai}))),this.sample_code=this.sampleOptions.length>0?this.sampleOptions[0].value:"",this.selectedItems=[],await this.SearchItemCodeByGroup()}catch(e){console.error("Error fetching data:",e)}}else this.sampleOptions=[],this.sample_code=""},async SearchItemCodeByGroup(){if(this.service_code){const t="https://sea-turtle-app-hit8g.ondigitalocean.app/query",s={StrSql:`pl_select_ini_code 6, 'T_ITEM', '${this.service_code}'`};try{const e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await e.json();this.item_select=o.data.map((e=>({value:e.ini_code,label:e.ini_desc_thai})))}catch(e){console.error("Error fetching data:",e)}}else this.item_select=[]},async CreateReqNo(){let e=1,t="",s=M(20)+Date.now(),o="test_inet_InsertReqHeader 5, ",a="test_inet_InsertReqHeader "+e+", ",l="'"+t+"', '"+s+"', "+this.total_test+", '"+this.bqclp.uss_id+"', '"+this.service_code+"', '"+this.activity_code+"', '"+this.sample_code+"', '"+this.language_result+"', '"+this.receive_result+"', '"+this.bqclp.user_login+"', '"+this.selectedItems.map((e=>`[${e}]`)).join("")+"' ",n=a+l;o+=l,console.log(o);const i="https://sea-turtle-app-hit8g.ondigitalocean.app/query",r={StrSql:n};try{const e=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await e.json();console.log(t),this.req_no=t.data[0].req_no,await this.getNewReqNo(o),await this.SearchItemCodeByGroup()}catch(c){console.error("Error fetching data:",c)}},async getNewReqNo(e){const t="https://sea-turtle-app-hit8g.ondigitalocean.app/query",s={StrSql:e};try{const e=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await e.json();this.return_item=o.data[0],console.log(o)}catch(o){console.error("Error fetching data:",o)}},async EditReqNo(){let e=2,t=this.req_no,s="",o="test_inet_InsertReqHeader 6, ",a="test_inet_InsertReqHeader "+e+", ",l="'"+t+"', '"+s+"', "+this.total_test+", '"+this.bqclp.uss_id+"', '"+this.service_code+"', '"+this.activity_code+"', '"+this.sample_code+"', '"+this.language_result+"', '"+this.receive_result+"', '"+this.bqclp.user_login+"', '"+this.selectedItems.map((e=>`[${e}]`)).join("")+"' ",n=a+l;o+=l,console.log(o);const i="https://sea-turtle-app-hit8g.ondigitalocean.app/query",r={StrSql:n};try{const e=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),t=await e.json();console.log(t),await this.getNewReqNo(o)}catch(c){console.error("Error fetching data:",c)}},slugify(e){if(!e||"string"!==typeof e)return"";e=e.trim().toLowerCase();for(var t="àáãäâèéëêìíïîòóöôùúüûñç·/_,:;",s="aaaaaeeeeiiiioooouuuunc------",o=0,a=t.length;o<a;o++)e=e.replace(new RegExp(t.charAt(o),"g"),s.charAt(o));e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");var l=e.lastIndexOf(".");return-1!==l&&(e=e.substring(0,l)),e},async checkSlugExists(e){try{const t="https://gateway.cloudrestfulapi.com/api/post/query",s={method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{owner:this.session.current.id},{slug:e}]}]})},o=await fetch(t,s),a=await o.json();return a.length>0}catch(t){return console.log(t),!1}},updateSlug(){const e=this.slugify(this.slug);let t=1;const s=async e=>{const o=await this.checkSlugExists(e);o?(e=`${e}-${t}`,t++,s(e)):(console.log("Slug is available",e),this.slug=e,this.editing=!1)};s(e)},onTitleInput(){let e=this.slugify(this.title),t=1;const s=async e=>{const o=await this.checkSlugExists(e);o?(e=`${e}-${t}`,t++,s(e)):(console.log("Slug is available",e),this.slug=e)};s(e)},removeParent(){this.searchTerm="",this.parent=void 0},OpenFileBrowser(e){this.selectedSlideItemIndex=e,this.FileBrowserOpen=!0},changeFileTrigger(e){this.FileBrowserOpen=e},selectFileTrigger(e){console.log("selectFileTrigger"),void 0!=e&&(this.selectCourseCover=e,console.log("selectFileReturnFunction",e.file),this.feature_image=e.file,this.selectedSlideItemIndex=void 0)},selectParent(e){console.log("Selected parent:",e),this.parent=e,this.showDropdown=!1},async getData(){if(i.A.get("session","login"))try{this.loading_sources=!1;const e=await fetch("https://gateway.cloudrestfulapi.com/api/post/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{owner:this.session.current._id,type:"page"}]}]})}),t=await e.json();this.parentList=t,this.service_code="A",await this.SearchSamCodeByGroup(),this.loading_sources=!0}catch(e){console.log(e)}},async addPost(){try{this.activeBlock=!0;const e=await fetch("https://gateway.cloudrestfulapi.com/api/post/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{title:this.title,slug:this.slug,content:this.content,display:this.display,type:this.type,isComment:this.isComment,isCounter:this.isCounter,isMenu:this.isMenu,status:this.status,authen:this.authen,parent:this.parent,destination:this.destination,feature_image:this.feature_image,owner:this.session.current._id,builder:[]},options:{uniqueFields:[["slug"]]}})}),t=await e.json();console.log(t),this.$router.replace(`/cms/edit/${t._id}`)}catch(e){console.log(e)}}},setup(){},async mounted(){try{window.addEventListener("click",this.onBlur),await this.getData(),await this.fetchData();const e=this.$route.params.id,t=this.parentList.find((t=>t._id===e));t&&(this.parent=t)}catch(e){console.log(Error)}},beforeUnmount(){window.removeEventListener("click",this.onBlur)}},W=s(64621);const z=(0,W.A)(H,[["render",Q]]);var Y=z,Z={name:"Page Index",components:{Backend:Y,Frontend:Y},data(){return{session:i.A.get("session")}},setup(){const e=(0,n.lq)(),t=e.meta.title;(0,l.K7)(t)},computed:{componentName(){return"backend"===this.session.interface?"Backend":"frontend"===this.session.interface?"Frontend":(console.error("Invalid interface:",this.session.interface),null)}}};const ee=(0,W.A)(Z,[["render",a]]);var te=ee},87814:function(e,t,s){s.d(t,{A:function(){return O}});var o=s(20641),a=s(90033),l=s(53751);const n={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},i={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},r={class:"min-w-0 flex-1"},c={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},d={key:0,class:"text-sm text-gray-500"},u={class:"mt-5 flex xl:mt-0 xl:ml-4"},p={class:"flex items-center space-x-2"},g={class:"text-sm text-gray-400"},h=["onUpdate:modelValue","placeholder","onChange"],m={value:"",disabled:""},y=["value"],f=["onClick"],b={class:"text-sm hidden sm:inline-block ml-1"},k=["onClick"],v={class:"text-sm hidden sm:inline-block ml-1"};function _(e,t,s,_,x,w){const L=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("header",n,[(0,o.Lk)("div",i,[(0,o.Lk)("div",r,[(0,o.Lk)("h1",c,[(0,o.bF)(L,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,o.eW)(" "+(0,a.v_)(s.pageTitle?s.pageTitle:this.PageName),1)]),s.subhead?((0,o.uX)(),(0,o.CE)("p",d,(0,a.v_)(s.subhead),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",u,[(0,o.Lk)("div",p,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.navigation,((t,s)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:s},["select"===t.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("label",g,(0,a.v_)(t.placeholder),1),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:s=>e.$emit("toggleStatus",t.value)},[(0,o.Lk)("option",m,"-- "+(0,a.v_)(t.placeholder)+" --",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.options,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:e.value},(0,a.v_)(e.name),9,y)))),128))],40,h),[[l.u1,t.value]])],64)):"call-function"===t.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[!1!==t.visible?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:s=>e.$emit(t.function),type:"button",class:(0,a.C4)(w.getClasses(t.class))},[(0,o.bF)(L,{icon:["fas",`${t.style}`],class:(0,a.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,o.Lk)("span",b,(0,a.v_)(t.name),1)],10,f)):(0,o.Q3)("",!0)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[!1!==t.visible?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e=>w.handleNavigationClick(t),type:"button",class:(0,a.C4)(w.getClasses(t.class))},[(0,o.bF)(L,{icon:["fas",`${t.style}`],class:(0,a.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,o.Lk)("span",v,(0,a.v_)(t.name),1)],10,k)):(0,o.Q3)("",!0)],64))],64)))),128))])])])])}s(44114);var x=s(75220),w=s(52968),L=s(23264),C=s(93426),S={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,x.lq)();return console.log("Translate",(0,C.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,C.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,w.K7)((0,C.iX)())},methods:{getClasses(e){const t=(0,L.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},q=s(64621);const E=(0,q.A)(S,[["render",_]]);var O=E},23264:function(e,t,s){function o(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}s.d(t,{c:function(){return o}})}}]);
//# sourceMappingURL=2839.980e9ceb.js.map