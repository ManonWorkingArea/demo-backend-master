"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[300],{10300:function(e,t,a){a.d(t,{A:function(){return He}});var l=a(20641),s=a(90033),o=a(53751);const d={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 text-sm mt-3"},n={key:0,class:"bg-white p-2"},r={class:"text-md font-semibold mb-1 flex justify-between items-center"},u={class:"truncate"},i=["onClick"],m={key:0,class:"relative"},p=["onUpdate:modelValue"],c=["value"],y=["onClick"],v={key:1,class:"relative"},k={class:"flex items-start mb-2 mt-2 pb-2 pt-2 border-b border-gray-200"},f=["value","onUpdate:modelValue"],b={key:0,class:"text-gray-600"},h=["onClick"],g={key:2,class:"relative"},L=["onUpdate:modelValue","onKeypress"],D=["onUpdate:modelValue","onKeypress"],w=["onClick"],C={key:0,class:"mb-1"},x={class:"text-gray-500"},E={class:"leading-6 text-gray-900 p-3 mt-3 bg-blue-50 border border-gray-200 rounded-sm"},I={class:"mt-5 mb-5"},U={class:"leading-6 text-gray-900 p-3 bg-blue-50 border border-gray-200 rounded-sm"},V={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-3 text-sm mt-5"},X={class:"text-md font-semibold mb-1",style:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},F={class:"mb-1"},_={class:"image-container"},A=["src","onClick"],K=["src"];function O(e,t,a,O,M,Q){const T=(0,l.g2)("multiple-data"),R=(0,l.g2)("font-awesome-icon"),W=(0,l.g2)("address-data"),j=(0,l.g2)("form-upload");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.eW)((0,s.v_)(M.formDocumentID)+" ",1),M.formRawData&&M.formRawData.setData?((0,l.uX)(!0),(0,l.CE)(l.FK,{key:0},(0,l.pI)(Object.keys(M.formRawData.setData),((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(M.formRawData.setData[e],((a,s)=>((0,l.uX)(),(0,l.CE)("div",{key:`contact_${t}_${s}`,class:"w-full text-lg font-normal text-gray-700"},[(0,l.bF)(T,{value:a,set:e,onSetUpdated:Q.handleSetDataUpdated},null,8,["value","set","onSetUpdated"])])))),128))])))),128)):(0,l.Q3)("",!0),(0,l.Lk)("div",d,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(M.formInput,((e,a)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:a},[e.value?((0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("h2",r,[(0,l.Lk)("span",u,(0,s.v_)(e.name),1),M.editMode[e.key]||"admin"!==M.session.role?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:t=>Q.toggleEditMode(e.key)},[(0,l.bF)(R,{icon:["fas","pencil"],class:"w-3 text-gray-400"})],8,i))]),M.editMode[e.key]&&"select"===e.master.type?((0,l.uX)(),(0,l.CE)("div",m,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t=>M.newValue[e.key].value=t,class:"mr-2"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.master.options,((e,t)=>((0,l.uX)(),(0,l.CE)("option",{key:t,value:e.value},(0,s.v_)(e.label),9,c)))),128))],8,p),[[o.u1,M.newValue[e.key].value]]),(0,l.Lk)("button",{onClick:t=>Q.updateValueAndLabel(e.key,M.newValue,e.master.options),class:"mt-1 bg-gray-300 right-[6px] p-2 text-sm top-[6px] rounded-sm text-gray-600"},[(0,l.bF)(R,{icon:["fas","save"],class:"w-3 text-gray-600"}),t[1]||(t[1]=(0,l.eW)(" บันทึก "))],8,y)])):(0,l.Q3)("",!0),M.editMode[e.key]&&"radiobox"===e.master.type?((0,l.uX)(),(0,l.CE)("div",v,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.master.options,((a,d)=>((0,l.uX)(),(0,l.CE)("div",{key:d},[(0,l.Lk)("label",k,[(0,l.bo)((0,l.Lk)("input",{type:"radio",value:a.value,"onUpdate:modelValue":t=>M.newValue[e.key].value=t,class:"mr-2"},null,8,f),[[o.XL,M.newValue[e.key].value]]),(0,l.Lk)("div",null,[(0,l.Lk)("span",{class:(0,s.C4)({"font-semibold":a.description})},(0,s.v_)(a.label),3),t[2]||(t[2]=(0,l.Lk)("br",null,null,-1)),a.description?((0,l.uX)(),(0,l.CE)("span",b,(0,s.v_)(a.description),1)):(0,l.Q3)("",!0)])])])))),128)),(0,l.Lk)("button",{onClick:t=>Q.updateValueAndLabel(e.key,M.newValue,e.master.options),class:"mt-1 bg-gray-300 right-[6px] p-2 text-sm top-[6px] rounded-sm text-gray-600"},[(0,l.bF)(R,{icon:["fas","save"],class:"w-3 text-gray-600"}),t[3]||(t[3]=(0,l.eW)(" บันทึก "))],8,h)])):(0,l.Q3)("",!0),M.editMode[e.key]&&"input"===e.master.type?((0,l.uX)(),(0,l.CE)("div",g,[M.newValue[e.key].label?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[M.editMode[e.key]?(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:0,"onUpdate:modelValue":t=>M.newValue[e.key].label=t,placeholder:"New value",class:"w-full text-gray-500 p-3 text-sm rounded-sm border border-gray-200",onKeypress:(0,o.jR)((t=>Q.updateInputValue(e.key)),["enter"])},null,40,L)),[[o.Jo,M.newValue[e.key].label]]):(0,l.Q3)("",!0)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[M.editMode[e.key]?(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:0,"onUpdate:modelValue":t=>M.newValue[e.key]=t,placeholder:"New value",class:"w-full text-gray-500 p-3 text-sm rounded-sm border border-gray-200",onKeypress:(0,o.jR)((t=>Q.updateInputValue(e.key)),["enter"])},null,40,D)),[[o.Jo,M.newValue[e.key]]]):(0,l.Q3)("",!0)],64)),M.editMode[e.key]?((0,l.uX)(),(0,l.CE)("button",{key:2,onClick:t=>Q.updateInputValue(e.key),class:"mt-1 bg-gray-300 right-[6px] p-2 text-sm top-[6px] rounded-sm text-gray-600"},[(0,l.bF)(R,{icon:["fas","save"],class:"w-3 text-gray-600"}),t[4]||(t[4]=(0,l.eW)(" บันทึก"))],8,w)):(0,l.Q3)("",!0)])):((0,l.uX)(),(0,l.CE)(l.FK,{key:3},[M.editMode[e.key]?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",C,[(0,l.Lk)("p",x,["object"===typeof e.value&&e.value.label?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.eW)((0,s.v_)(e.value.label),1)],64)):((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.eW)((0,s.v_)(e.value),1)],64))])]))],64))])):(0,l.Q3)("",!0)],64)))),128))]),M.addressArray.length>0?((0,l.uX)(),(0,l.CE)(l.FK,{key:1},[(0,l.Lk)("h2",E,[(0,l.bF)(R,{icon:["fas","map"],class:""}),t[5]||(t[5]=(0,l.eW)(" ที่อยู่"))]),(0,l.Lk)("div",I,[(0,l.bF)(W,{addresses:M.addressArray,onAddressUpdated:Q.handleAddressUpdated,class:"text-sm"},null,8,["addresses","onAddressUpdated"])])],64)):(0,l.Q3)("",!0),M.formUpload.length>0?((0,l.uX)(),(0,l.CE)(l.FK,{key:2},[(0,l.Lk)("h2",U,[(0,l.bF)(R,{icon:["fas","file"],class:""}),t[6]||(t[6]=(0,l.eW)(" เอกสาร/รูปภาพ"))]),(0,l.Lk)("div",V,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(M.formUpload,((e,t)=>((0,l.uX)(),(0,l.CE)("div",{key:t,class:"bg-white p-2"},[(0,l.Lk)("h2",X,(0,s.v_)(e.name),1),(0,l.Lk)("div",F,[(0,l.Lk)("div",_,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.value,((e,t)=>((0,l.uX)(),(0,l.CE)("img",{src:e,key:t,class:"thumbnail",onClick:t=>Q.openLightbox(e)},null,8,A)))),128))]),"admin"===M.session.role||"user"===M.session.role?((0,l.uX)(),(0,l.Wv)(j,{key:0,data:e.master,item:e.key,"onUpdate:modelValue":Q.handleUploadUpdated,resetFlag:M.resetFlag,class:"text-sm mt-3"},null,8,["data","item","onUpdate:modelValue","resetFlag"])):(0,l.Q3)("",!0)])])))),128)),M.showLightbox?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"lightbox",onClick:t[0]||(t[0]=(...e)=>Q.closeLightbox&&Q.closeLightbox(...e))},[t[7]||(t[7]=(0,l.Lk)("span",{class:"close"},"×",-1)),(0,l.Lk)("img",{src:M.currentImage,class:"lightbox-image",alt:"lightbox-image"},null,8,K)])):(0,l.Q3)("",!0)])],64)):(0,l.Q3)("",!0)],64)}a(44114),a(98992),a(72577),a(3949);var M=a(77823),Q=a(40475),T=a(40471),R=a(14192);const W={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 text-sm mt-3"},j={class:"flex justify-between items-center font-semibold text-gray-800 mb-2"},S={class:""},H=["onClick"],J={key:0},N={key:0},P={key:1},$={key:2},B={key:1,class:"relative"},G=["onUpdate:modelValue"],q=["value"],z={key:1},Y=["onUpdate:modelValue","value"],Z={key:2},ee=["onUpdate:modelValue","onKeypress"],te=["onClick"];function ae(e,t,a,d,n,r){const u=(0,l.g2)("font-awesome-icon"),i=(0,l.g2)("datetime");return(0,l.uX)(),(0,l.CE)("div",W,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.value,((e,a)=>((0,l.uX)(),(0,l.CE)("div",{key:a,class:"p-2"},[(0,l.Lk)("div",j,[(0,l.Lk)("span",S,(0,s.v_)(e.name),1),e.editMode||"admin"!==n.session.role?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:t=>r.toggleEditMode(e)},[(0,l.bF)(u,{icon:["fas","pencil"],class:"w-3 text-gray-400"})],8,H))]),e.editMode?((0,l.uX)(),(0,l.CE)("div",B,[e.master&&"select"===e.master.type?(0,l.bo)(((0,l.uX)(),(0,l.CE)("select",{key:0,"onUpdate:modelValue":t=>e.value.value=t,class:"w-full text-gray-500 p-3 text-sm rounded-sm border border-gray-200"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.master.options,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.value},(0,s.v_)(e.label),9,q)))),128))],8,G)),[[o.u1,e.value.value]]):e.master&&"radiobox"===e.master.type?((0,l.uX)(),(0,l.CE)("div",z,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.master.options,(t=>((0,l.uX)(),(0,l.CE)("label",{key:t.value},[(0,l.bo)((0,l.Lk)("input",{type:"radio","onUpdate:modelValue":t=>e.value=t,value:t.value,class:"mr-2"},null,8,Y),[[o.XL,e.value]]),(0,l.eW)(" "+(0,s.v_)(t.label),1)])))),128))])):e.master&&"datetime"===e.master.type?((0,l.uX)(),(0,l.CE)("div",Z,[(0,l.bF)(i,{data:e.master,item:e.key,defaultTime:e.value,"onUpdate:modelValue":r.handleDatetimeUpdated},null,8,["data","item","defaultTime","onUpdate:modelValue"])])):(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:3,type:"text","onUpdate:modelValue":t=>e.value=t,class:"w-full text-gray-500 p-3 rounded-sm border border-gray-200",onKeypress:(0,o.jR)((t=>r.saveCell(e)),["enter"])},null,40,ee)),[[o.Jo,e.value]]),(0,l.Lk)("button",{class:"bg-gray-300 mt-1 p-2 text-sm rounded-sm text-gray-600",onClick:t=>r.saveCell(e)},[(0,l.bF)(u,{icon:["fas","save"],class:"w-3 text-gray-600"}),t[0]||(t[0]=(0,l.eW)(" บันทึก "))],8,te)])):((0,l.uX)(),(0,l.CE)("div",J,["select"===e.type?((0,l.uX)(),(0,l.CE)("span",N,(0,s.v_)(e.value.label),1)):(0,l.Q3)("",!0),"datetime"===e.type?((0,l.uX)(),(0,l.CE)("span",P,(0,s.v_)(r.formatThaidate(e.value)),1)):(0,l.Q3)("",!0),"input"===e.type?((0,l.uX)(),(0,l.CE)("span",$,(0,s.v_)(e.value),1)):(0,l.Q3)("",!0)]))])))),128))])}var le=a(9964),se=a(61923),oe={props:{value:{type:Array,required:!0},set:{type:String,required:!0}},components:{datetime:se.A},data(){return{session:Q.A.get("session"),returnData:null}},methods:{formatThaidate(e){return le.A.toThaiDatetime(e,"date")},toggleEditMode(e){e.editMode=!e.editMode},handleDatetimeUpdated(e){this.returnData=e,console.log("handleDatetimeUpdated",e)},saveCell(e){console.log(e.master.type),"select"===e.master.type||"radiobox"===e.master.type?e.value.label=e.master.options.find((t=>t.value===e.value.value))?.label||"":"datetime"===e.master.type&&(e.value=this.returnData),e.editMode=!1,console.log(this.returnData,e.value),this.$emit("set-updated",this.value,this.set)}}},de=a(64621);const ne=(0,de.A)(oe,[["render",ae]]);var re=ne;const ue={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ie={key:0,class:"bg-white shadow-sm rounded-lg border border-gray-300 p-6"},me={class:"flex items-center justify-between"},pe={class:"font-semibold text-lg"},ce=["onClick"],ye={class:"mt-4"},ve={key:0},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},fe=["onUpdate:modelValue"],be=["onUpdate:modelValue"],he=["onUpdate:modelValue"],ge=["onUpdate:modelValue"],Le=["onUpdate:modelValue"],De=["onUpdate:modelValue"],we=["onUpdate:modelValue"],Ce=["onUpdate:modelValue"],xe=["onUpdate:modelValue"],Ee={class:"flex space-x-4 mt-4"},Ie=["onClick"],Ue=["onClick"],Ve={key:1},Xe={class:"flex flex-wrap -mx-2"},Fe={class:"w-full md:w-1/2 lg:w-1/3 px-2 mb-2"},_e={class:"w-full md:w-1/2 lg:w-1/3 px-2 mb-2"},Ae={class:"w-full md:w-1/2 lg:w-1/3 px-2 mb-2"},Ke={class:"w-full md:w-1/2 lg:w-1/3 px-2 mb-2"},Oe={class:"w-full md:w-1/2 lg:w-1/3 px-2 mb-2"};function Me(e,t,a,d,n,r){const u=(0,l.g2)("font-awesome-icon");return(0,l.uX)(),(0,l.CE)("div",ue,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.addresses,((e,a)=>((0,l.uX)(),(0,l.CE)(l.FK,{key:a},[e.value?((0,l.uX)(),(0,l.CE)("div",ie,[(0,l.Lk)("div",me,[(0,l.Lk)("h3",pe,(0,s.v_)(e.name),1),"admin"===n.session.role?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:t=>r.toggleEdit(e)},[(0,l.bF)(u,{icon:["fas","pencil"],class:"w-4 text-gray-500 hover:text-gray-700"})],8,ce)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",ye,[e.isEditing?((0,l.uX)(),(0,l.CE)("div",ve,[(0,l.Lk)("div",ke,[(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[t[0]||(t[0]=(0,l.Lk)("span",{class:"font-semibold"},"เลขที่:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value.NO=t,class:"border border-gray-300 rounded-sm p-2 w-full mt-1"},null,8,fe),[[o.Jo,e.value.NO]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[t[1]||(t[1]=(0,l.Lk)("span",{class:"font-semibold"},"หมู่:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value.MOO=t,class:"border border-gray-300 rounded-sm p-2 w-full mt-1"},null,8,be),[[o.Jo,e.value.MOO]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[t[2]||(t[2]=(0,l.Lk)("span",{class:"font-semibold"},"ซอย:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value.SOI_TH=t,class:"border border-gray-300 rounded-sm p-2 w-full mt-1"},null,8,he),[[o.Jo,e.value.SOI_TH]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[t[3]||(t[3]=(0,l.Lk)("span",{class:"font-semibold"},"อาคาร:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value.BUILDING_TH=t,class:"border border-gray-300 rounded-sm p-2 w-full mt-1"},null,8,ge),[[o.Jo,e.value.BUILDING_TH]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[t[4]||(t[4]=(0,l.Lk)("span",{class:"font-semibold"},"ถนน:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value.ROAD_TH=t,class:"border border-gray-300 rounded-sm p-2 w-full mt-1"},null,8,Le),[[o.Jo,e.value.ROAD_TH]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[t[5]||(t[5]=(0,l.Lk)("span",{class:"font-semibold"},"ตำบล/แขวง:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value.subdistrict=t,class:"border border-gray-300 rounded-sm p-2 w-full mt-1"},null,8,De),[[o.Jo,e.value.subdistrict]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[t[6]||(t[6]=(0,l.Lk)("span",{class:"font-semibold"},"อำเภอ/เขต:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value.district=t,class:"border border-gray-300 rounded-sm p-2 w-full mt-1"},null,8,we),[[o.Jo,e.value.district]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[t[7]||(t[7]=(0,l.Lk)("span",{class:"font-semibold"},"จังหวัด:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value.province=t,class:"border border-gray-300 rounded-sm p-2 w-full mt-1"},null,8,Ce),[[o.Jo,e.value.province]])])]),(0,l.Lk)("div",null,[(0,l.Lk)("p",null,[t[8]||(t[8]=(0,l.Lk)("span",{class:"font-semibold"},"รหัสไปรษณีย์:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t=>e.value.zipcode=t,class:"border border-gray-300 rounded-sm p-2 w-full mt-1"},null,8,xe),[[o.Jo,e.value.zipcode]])])])]),(0,l.Lk)("div",Ee,[(0,l.Lk)("button",{onClick:t=>r.updateAddress(e),class:"bg-blue-500 text-white rounded-sm px-4 py-2 hover:bg-blue-600"}," Update ",8,Ie),(0,l.Lk)("button",{onClick:t=>r.toggleEdit(e),class:"bg-gray-500 text-white rounded-sm px-4 py-2 hover:bg-gray-600"}," Cancel ",8,Ue)])])):((0,l.uX)(),(0,l.CE)("div",Ve,[(0,l.Lk)("div",Xe,[(0,l.Lk)("div",Fe,[(0,l.Lk)("p",null,[t[9]||(t[9]=(0,l.Lk)("span",{class:"font-semibold"},"เลขที่:",-1)),(0,l.eW)(" "+(0,s.v_)(e.value.NO||"-"),1)])]),(0,l.Lk)("div",_e,[(0,l.Lk)("p",null,[t[10]||(t[10]=(0,l.Lk)("span",{class:"font-semibold"},"หมู่:",-1)),(0,l.eW)(" "+(0,s.v_)(e.value.MOO||"-"),1)])]),(0,l.Lk)("div",Ae,[(0,l.Lk)("p",null,[t[11]||(t[11]=(0,l.Lk)("span",{class:"font-semibold"},"ซอย:",-1)),(0,l.eW)(" "+(0,s.v_)(e.value.SOI_TH||"-"),1)])]),(0,l.Lk)("div",Ke,[(0,l.Lk)("p",null,[t[12]||(t[12]=(0,l.Lk)("span",{class:"font-semibold"},"อาคาร:",-1)),(0,l.eW)(" "+(0,s.v_)(e.value.BUILDING_TH||"-"),1)])]),(0,l.Lk)("div",Oe,[(0,l.Lk)("p",null,[t[13]||(t[13]=(0,l.Lk)("span",{class:"font-semibold"},"ถนน:",-1)),(0,l.eW)(" "+(0,s.v_)(e.value.ROAD_TH||"-"),1)])])]),(0,l.Lk)("p",null,[t[14]||(t[14]=(0,l.Lk)("span",{class:"font-semibold"},"ตำบล/แขวง:",-1)),(0,l.eW)(" "+(0,s.v_)(e.value.subdistrict||"-"),1)]),(0,l.Lk)("p",null,[t[15]||(t[15]=(0,l.Lk)("span",{class:"font-semibold"},"อำเภอ/เขต:",-1)),(0,l.eW)(" "+(0,s.v_)(e.value.district||"-"),1)]),(0,l.Lk)("p",null,[t[16]||(t[16]=(0,l.Lk)("span",{class:"font-semibold"},"จังหวัด:",-1)),(0,l.eW)(" "+(0,s.v_)(e.value.province||"-")+" "+(0,s.v_)(e.value.zipcode||"-"),1)])]))])])):(0,l.Q3)("",!0)],64)))),128))])}var Qe={props:{addresses:{type:Array,required:!0}},data(){return{session:Q.A.get("session")}},created(){this.setDefaultAddresses()},methods:{toggleEdit(e){e.isEditing=!e.isEditing},updateAddress(){this.$emit("address-updated",this.addresses)},setDefaultAddresses(){const e={tax_ID:"",owner_NAME_TH:"",MOO:"",SOI_TH:"",NO:"",BUILDING_TH:"",ROAD_TH:"",subdistrict:"",district:"",province:"",zipcode:""};this.addresses.forEach((t=>{t.value&&"N/A"!==t.value||(t.value={...e})}))}}};const Te=(0,de.A)(Qe,[["render",Me],["__scopeId","data-v-0d9054ed"]]);var Re=Te;const We=new T.A(!1);var je={components:{AddressData:Re,MultipleData:re,FormUpload:R.A},props:{formData:{type:Object,required:!0},formID:{type:String}},data(){return{configs:Q.A.get("configs"),session:Q.A.get("session"),editMode:{},newValue:{},formInput:[],headerGroup:[],formUpload:[],setData:[],addressArray:[],showLightbox:!1,currentImage:null,resetFlag:!1,postData:this.formData.posts.builder,formDocument:this.formData.forms,formRawData:this.formData.forms.formData,formDocumentID:null}},mounted(){this.processFormData(),this.formDocumentID=this.formID},methods:{performSearch(e,t){this.searchResult=null,this.searchInitiated=!0;for(const a of this.postData)for(const l of a.columns){const a=l.object.find((a=>a.type===e&&a.name===t));if(a)return this.searchResult=a,a}},openLightbox(e){this.currentImage=e,this.showLightbox=!0},closeLightbox(){this.showLightbox=!1},toggleEditMode(e){this.editMode[e]=!this.editMode[e],this.newValue[e]||(this.newValue[e]=this.formDocument.formData[e].value)},handleAddressUpdated(e){this.addressArray=e,e.forEach((e=>{console.log(e.key,e.value),this.updateValueByKey(e.key,e.value)}))},handleUploadUpdated(e,t){if(console.log("handleUploadUpdated",e,t),Object.prototype.hasOwnProperty.call(this.formDocument.formData,t)){this.formDocument.formData[t].value=e,console.log("Find",t),console.log("found",this.formDocument.formData[t]);const a=this.formInput.findIndex((e=>e.key===e));-1!==a&&(this.formInput[a]={...this.formInput[a],value:e}),this.resetChildComponent(),this.updateFormDataInAPI()}else console.error(`Key ${t} not found in formDocument.`)},resetChildComponent(){setTimeout((()=>{this.resetFlag=!0}),2e3)},handleSetDataUpdated(e,t){this.formDocument.formData.setData[t]=[e],console.log("Edit",this.formDocument),this.updateFormDataInAPI()},findFormDataByKey(e){return Object.prototype.hasOwnProperty.call(this.formDocument.formData,e)?this.formDocument.formData[e]:null},updateValueByKey(e,t){if(Object.prototype.hasOwnProperty.call(this.formDocument.formData,e)){this.formDocument.formData[e].value=t;const a=this.formInput.findIndex((t=>t.key===e));-1!==a&&(this.formInput[a]={...this.formInput[a],value:t}),this.updateFormDataInAPI()}else console.error(`Key ${e} not found in formDocument.`)},updateInputValue(e){this.editMode[e]=!1,this.updateValueByKey(e,this.newValue[e])},updateSingleValue(e,t){this.formDocument.formData[e].value=t,this.updateFormDataInAPI()},updateValueAndLabel(e,t,a){this.editMode[e]=!1;const l=a.find((a=>a.value===t[e].value));this.formDocument.formData[e].value["value"]=t[e].value,this.formDocument.formData[e].value["label"]=l.label,this.updateFormDataInAPI()},async updateFormDataInAPI(){try{this.toast=(0,M.A)({type:"pending",message:"กำลังบันทึกข้อมูล.."});let e=this.formDocument;delete e._id,console.log(this.formDocumentID);const{data:t,status:a}=await We.PUT(`form/${this.formDocumentID}`,{data:e},this.configs.key);console.log(a),200===a?this.toast.hide("บันทึกข้อมูลเสร็จแล้ว.","success",30,(()=>{this.resetFlag=!1,this.processFormData(),console.log("Form data update successful:",t)})):this.toast.hide("เกิดข้อผิดพลาด.","error",30,(()=>{console.log("Form data update successful:",t)}))}catch(e){console.error("Error updating form data:",e)}},processFormData(){this.formUpload=[],this.formInput=[],this.addressArray=[],this.setData=[];const e=Object.keys(this.formRawData);e.forEach((e=>{const t=this.formRawData[e];if("setData"!==e&&"hidden"!==t.type)if("upload"===t.type){const a=Array.isArray(t.value)?t.value:[t.value];this.formUpload.push({key:e,...t,files:a})}else"address"!==t.type?this.formInput.push({key:e,...t}):this.addressArray.push({key:e,...t})})),this.formRawData.setData&&Object.keys(this.formRawData.setData).forEach((e=>{const t=this.formRawData.setData[e];t.forEach(((t,a)=>{const l=`contact_${e}_${a}`,s={key:e,index:a,uniqueKey:l,value:t};s.value.forEach((e=>{"text"!==e.type&&"number"!==e.type&&"email"!==e.type||(e.type="input");const t=this.performSearch(e.type,e.name);t&&(e.master=t)})),this.setData.push(s)}))})),this.headerGroup=this.formInput.slice(0,4),this.formInput.forEach((e=>{"text"!==e.type&&"number"!==e.type&&"email"!==e.type||(e.type="input");const t=this.performSearch(e.type,e.name);t&&(e.master=t)})),this.formUpload.forEach((e=>{const t=this.performSearch(e.type,e.name);t&&(e.master=t)}))}}};const Se=(0,de.A)(je,[["render",O],["__scopeId","data-v-15299a12"]]);var He=Se}}]);
//# sourceMappingURL=300.54c52b82.js.map