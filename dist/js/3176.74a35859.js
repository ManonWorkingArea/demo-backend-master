"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[3176],{53176:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var o=n(20641);function a(e,t,n,a,s,r){const l=(0,o.g2)("Authen"),d=(0,o.g2)("Dashboard");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),this.login?((0,o.uX)(),(0,o.Wv)(d,{key:0})):(0,o.Q3)("",!0)],64)}var s=n(52968),r=n(75220),l=n(53751),d=n(90033);const i={class:"flex-1 bg-gray-100 pt-2 pb-5"},c={class:"mt-2"},m={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},u={class:"space-y-6 sm:px-6 lg:col-span-9 lg:px-0"},p={class:"shadow sm:overflow-hidden sm:rounded-md"},g={class:"bg-white py-6 px-4 sm:p-6"},f={class:"mt-6 grid grid-cols-4 gap-6"},x={class:"col-span-4 sm:col-span-2"},h={class:"col-span-4 sm:col-span-2"},b={class:"mt-6 grid grid-cols-6 gap-6"},y={class:"col-span-4 sm:col-span-3"},k={class:"col-span-4 sm:col-span-3"},v={class:"shadow sm:overflow-hidden sm:rounded-md mt-8"},w={class:"bg-white py-6 px-4 sm:p-6"},L={class:"mt-6 grid grid-cols-6 gap-6"},A={class:"col-span-4 sm:col-span-3"},P={class:"col-span-4 sm:col-span-3"},S={class:"flex"},E={"aria-labelledby":"plan-heading",class:"mt-8"},F={class:"shadow sm:overflow-hidden sm:rounded-md"},C={class:"bg-gray-50 px-4 py-3 text-right sm:px-6 border-t"},$={type:"submit",class:"inline-flex justify-center rounded-md border border-transparent bg-gray-800 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"};function j(e,t,n,a,s,r){const j=(0,o.g2)("breadcrumbs"),T=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(j,{navigation:[{name:"ย้อนกลับ",link:"/school/user",style:"chevron-left"}]}),(0,o.Lk)("div",i,[(0,o.Lk)("div",c,[(0,o.Lk)("div",m,[(0,o.Lk)("div",u,[(0,o.Lk)("form",{onSubmit:t[7]||(t[7]=(0,l.D$)(((...e)=>r.addAdmin&&r.addAdmin(...e)),["prevent"]))},[(0,o.Lk)("section",{"aria-labelledby":"payment-details-heading",class:(0,d.C4)(["relative",[s.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,o.Lk)("div",p,[(0,o.Lk)("div",g,[t[12]||(t[12]=(0,o.Lk)("div",null,[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-medium leading-6 text-gray-900"},"ข้อมูลส่วนตัว"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"กรอกข้อมูลของหลักสูตรให้ครบถ้วน.")],-1)),(0,o.Lk)("div",f,[(0,o.Lk)("div",x,[t[8]||(t[8]=(0,o.Lk)("label",{for:"firstname",class:"block text-sm font-medium text-gray-700"},"ชื่อ",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.firstname=e),type:"text",name:"firstname",id:"firstname",autocomplete:"firstname",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[l.Jo,s.firstname]])]),(0,o.Lk)("div",h,[t[9]||(t[9]=(0,o.Lk)("label",{for:"lastname",class:"block text-sm font-medium text-gray-700"},"นามสกุล",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.lastname=e),type:"text",name:"lastname",id:"lastname",autocomplete:"lastname",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[l.Jo,s.lastname]])])]),(0,o.Lk)("div",b,[(0,o.Lk)("div",y,[t[10]||(t[10]=(0,o.Lk)("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},"เบอร์โทร",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.phone=e),type:"text",name:"phone",id:"phone",autocomplete:"phone",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[l.Jo,s.phone]])]),(0,o.Lk)("div",k,[t[11]||(t[11]=(0,o.Lk)("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"อีเมล์",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.email=e),type:"text",name:"email",id:"email",autocomplete:"email",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[l.Jo,s.email]])])])])]),(0,o.Lk)("div",v,[(0,o.Lk)("div",w,[t[15]||(t[15]=(0,o.Lk)("div",null,[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-medium leading-6 text-gray-900"},"ข้อมูลบัญชี"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"กรอกข้อมูลของหลักสูตรให้ครบถ้วน.")],-1)),(0,o.Lk)("div",L,[(0,o.Lk)("div",A,[t[13]||(t[13]=(0,o.Lk)("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"ชื่อบัญชีผู้ใช้งาน",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.username=e),type:"text",name:"username",id:"username",autocomplete:"username",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[l.Jo,s.username]])]),(0,o.Lk)("div",P,[t[14]||(t[14]=(0,o.Lk)("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"รหัสผ่าน",-1)),(0,o.Lk)("div",S,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.password=e),type:"text",name:"password",id:"password",autocomplete:"password",class:"mt-1 flex-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[l.Jo,s.password]]),(0,o.Lk)("button",{type:"button",class:"ml-2 px-3 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-900",onClick:t[6]||(t[6]=(...e)=>r.generateRandomPassword&&r.generateRandomPassword(...e))}," Generate ")])])])])])],2),(0,o.Lk)("section",E,[(0,o.Lk)("div",F,[(0,o.Lk)("div",C,[(0,o.Lk)("button",$,[(0,o.bF)(T,{icon:["fas","save"],class:"pr-2 pl-2"}),t[16]||(t[16]=(0,o.eW)("บันทึกข้อมูล"))])])])])],32)])])])])],64)}var T=n(36406),U=n(21396),N=n.n(U),B=n(40475),_=n(25747),q={name:"ContactUs",inject:["apiServer"],data(){return{firstname:"",lastname:"",phone:"",email:"",username:"",password:"",role:"",configs:B.A.get("configs"),activeBlock:!1}},components:{Breadcrumbs:T.A},methods:{async addAdmin(){try{this.activeBlock=!0;const e=N().lib.WordArray.random(16),t=N().SHA256(this.password+e).toString(),n=await fetch("https://gateway.cloudrestfulapi.com/api/user/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{firstname:this.firstname,lastname:this.lastname,phone:this.phone,email:this.email,username:this.username,password:t,parent:this.configs.siteID,salt:e.toString(),role:"admin"},options:{fieldType:[],uniqueFields:[["username"]]}})}),o=await n.json();if(200===n.status){const e={email:"manonsanoi@gmail.com",name:"User Detail",content:`\n              <table style="border-collapse: collapse; width: 100%; color:#000000;">\n                <tr style="background-color: #f2f2f2; ">\n                  <th style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Field</th>\n                  <th style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Value</th>\n                </tr>\n                <tr>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">First Name</td>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">${this.firstname}</td>\n                </tr>\n                <tr>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Last Name</td>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">${this.lastname}</td>\n                </tr>\n                <tr>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Phone</td>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">${this.phone}</td>\n                </tr>\n                <tr>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Email</td>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">${this.email}</td>\n                </tr>\n                <tr>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Username</td>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">${this.username}</td>\n                </tr>\n                <tr>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">Password</td>\n                  <td style="border: 1px solid #dddddd; text-align: left; padding: 8px;">${this.password}</td>\n                </tr>\n              </table>\n            `};await(0,_.Z)(e,"new-template"),window.location.href="/school/user"}console.log(o)}catch(e){console.log(e)}},generateRandomPassword(){const e=12,t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_-+=<>?";let n="";for(let o=0;o<e;o++){const e=Math.floor(Math.random()*t.length);n+=t[e]}this.password=n}},setup(){},mounted(){}},D=n(64621);const W=(0,D.A)(q,[["render",j]]);var X=W,J=n(74284),V={name:"Home",components:{Dashboard:X,Authen:J.A},data(){return{login:B.A.get("session","login")}},methods:{},mounted(){},setup(){const e=(0,r.lq)(),t=e.meta.title;(0,s.K7)(t),console.log("Dashboard")}};const z=(0,D.A)(V,[["render",a]]);var O=z},36406:function(e,t,n){n.d(t,{A:function(){return E}});n(44114);var o=n(20641),a=n(90033);const s={class:"flex-1 bg-white"},r={class:"pt-4"},l={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},d={class:"hidden sm:flex","aria-label":"Breadcrumb"},i={role:"list",class:"flex items-center space-x-4"},c={class:"flex"},m={href:"/",class:"text-sm font-medium text-gray-500 hover:text-gray-700"},u={key:0},p={class:"flex items-center"},g=["href"],f={class:"flex items-center"},x={class:"ml-4 text-sm font-medium text-gray-400"},h={class:"mt-2 md:flex md:items-center md:justify-between pb-3"},b={class:"min-w-0 flex-1"},y={class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-2xl sm:tracking-tight"},k={class:"mt-4 flex flex-shrink-0 md:mt-0 md:ml-4"},v=["onClick"];function w(e,t,n,w,L,A){const P=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.Lk)("div",r,[(0,o.Lk)("div",l,[(0,o.Lk)("div",null,[(0,o.Lk)("div",null,[(0,o.Lk)("nav",d,[(0,o.Lk)("ol",i,[(0,o.Lk)("li",null,[(0,o.Lk)("div",c,[(0,o.Lk)("a",m,[(0,o.bF)(P,{icon:["fas","home"]})])])]),e.$route.matched.length>1?((0,o.uX)(),(0,o.CE)("li",u,[(0,o.Lk)("div",p,[(0,o.bF)(P,{icon:["fas","chevron-right"],class:"text-gray-200"}),(0,o.Lk)("a",{href:"/"+this.ParentPage,class:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700"},(0,a.v_)(this.ParentName),9,g)])])):(0,o.Q3)("",!0),(0,o.Lk)("li",null,[(0,o.Lk)("div",f,[(0,o.bF)(P,{icon:["fas","chevron-right"],class:"text-gray-200"}),(0,o.Lk)("span",x,(0,a.v_)(this.PageName),1)])])])])]),(0,o.Lk)("div",h,[(0,o.Lk)("div",b,[(0,o.Lk)("h2",y,[(0,o.bF)(P,{icon:["fas",`${this.PageIcon}`],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,o.eW)(" "+(0,a.v_)(this.PageName),1)])]),(0,o.Lk)("div",k,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.navigation,((t,n)=>((0,o.uX)(),(0,o.CE)("button",{key:n,onClick:n=>e.$router.push(t.link),type:"button",class:"ml-3 inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(P,{icon:["fas",`${t.style}`],class:"text-gray-200 mr-2"},null,8,["icon"]),(0,o.eW)(" "+(0,a.v_)(t.name),1)],8,v)))),128))])])])])])])}var L=n(75220),A={data(){const e=(0,L.lq)();return{PageName:e.meta.title,PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},components:{},props:{navigation:{type:Array,default:()=>[]}}},P=n(64621);const S=(0,P.A)(A,[["render",w]]);var E=S},74284:function(e,t,n){n.d(t,{A:function(){return m}});var o=n(20641);function a(e,t,n,a,s,r){return(0,o.uX)(),(0,o.CE)("div")}var s=n(75220),r=n(63084),l=n(40475),d={name:"Authen",data(){return{configs:l.A.get("configs"),session:l.A.get("session")}},created(){r.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const e=(0,s.lq)(),t=e.meta.auth,n=e.name,o=l.A.get("session");let a=o.token,d=o.login,i=o.current;r.A.log("hasLogin",d),r.A.log("Page -> Auth:",t),r.A.log("User -> Token:",a),r.A.log("User -> Login:",d),"frontend"===this.session.interface?r.A.log("Front-End"):"backend"===this.session.interface&&(r.A.log("Back-End"),d?("Login"==n||void 0==i?(r.A.log("Not Login Again"),this.$router.replace({path:"/"})):(r.A.log("Has School Active"),t?(r.A.log("This page is : Authen Request"),""===a||null===a||void 0==a?r.A.log("Your Cannot Access"):r.A.log("Your Can Access")):r.A.log("This page is : No Authen Request")),r.A.log("Login")):(r.A.log("Not Login"),"Login"!=n?(window.location.href="/member/login",r.A.log("Not Login Page",n)):r.A.log("Login Page",n)))}},setup(){}},i=n(64621);const c=(0,i.A)(d,[["render",a]]);var m=c},25747:function(e,t,n){n.d(t,{Z:function(){return u}});var o=n(40475);const a=`\n<!DOCTYPE html>\n<html lang="en">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <title>Email Template</title>\n  <style>\n    /* Add your custom CSS styles here */\n    /* For example: */\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n      text-align: center;\n    }\n    body {\n      font-family: Arial, sans-serif;\n      line-height: 1.5;\n      background-color: #f2f2f2;\n      color: #ffffff;\n    }\n    .container {\n      max-width: 600px;\n      margin: 0px auto;\n      padding: 20px;\n      background-color: #ffffff;\n      border-radius: 5px;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    }\n    .header {\n      text-align: center;\n      margin-bottom: 20px;\n    }\n    .header img {\n      max-width: 150px;\n      height: auto;\n    }\n    .content {\n      padding: 20px;\n      border-top: 1px solid #e6e6e6;\n      border-bottom: 1px solid #e6e6e6;\n    }\n    .heading {\n      font-size: 18px;\n      margin-bottom: 20px;\n      color: #000000;\n      text-align: center;\n    }\n    .text {\n      margin-bottom: 20px;\n      color: #000000;\n      text-align: left;\n      font-size: 16px;\n    }\n    .container p {\n      margin-bottom: 20px;\n      color: #000000;\n      text-align: left;\n      font-size: 16px;\n    }\n    .text p {\n      margin-bottom: 20px;\n      color: #000000;\n      text-align: left;\n      font-size: 16px;\n    }\n    .footer {\n      text-align: center;\n      margin-top: 20px;\n      color: #888888;\n      font-size: 14px;\n    }\n    .footer a {\n      color: #888888;\n      text-decoration: none;\n      transition: color 0.3s ease;\n    }\n    .footer a:hover {\n      color: #ffffff;\n    }\n  </style>\n</head>\n<body>\n  <div class="container" style="margin-top:20px;">\n    <div class="header">\n      <img src="https://vue-project.sgp1.digitaloceanspaces.com/Logo/color-logopng.png" alt="Logo">\n    </div>\n    <div class="content">\n      <h2 class="heading">{{ subject }}</h2>\n      <p class="text">{{ content }}</p>\n    </div>\n    <div class="footer">\n      &copy; ${(new Date).getFullYear()} {{ provider }}. All rights reserved.</a>\n    </div>\n  </div>\n</body>\n</html>\n`;var s=n(21396),r=n.n(s),l=n(40471);const d=new l.A(!1),i="https://gateway.cloudrestfulapi.com/email/send",c=o.A.get("session"),m=o.A.get("configs");async function u(e,t=""){let n;"frontend"===c.interface?({email_provider:n}=m):({email_provider:n}=c.current);const{name:o,email:s,subject:r,body:l}=e;try{let c,u;"welcome"===t?({emailBody:c,emailSubject:u}=x(e)):"reset-password"===t?({emailBody:c,emailSubject:u}=await b(e)):"change-password"===t?({emailBody:c,emailSubject:u}=await h(e)):"new-template"===t?({emailBody:c,emailSubject:u}=f(e)):(c=l,u=r),c=a.replace("{{ content }}",c).replace("{{ subject }}",u).replace("{{ provider }}",n);const y=await p(o,s,u,c),k=await d.POST(i,{subject:u,text:c,html:c,fromEmail:"noreply@fti.academy",fromName:"Academy Customer Support",toEmail:s,toName:o},m.key);if(200===k.status){const e=k.data;return console.log(e.message),await g(y._id,"confirm"),e}{console.log("Failed to send email");const e="Failed to send email";return await g(y._id,"fail",e),e}}catch(u){return console.error("Error sending email:",u),u.message}}async function p(e,t,n,o){try{const a={data:{name:e,email:t,subject:n,body:o,status:"submit"},options:{fieldType:[],uniqueFields:[]}},{status:s,data:r}=await d.POST("message/",a,m.key);return 200===s?(console.log("Email data recorded successfully"),r):"Failed to record email data"}catch(a){return console.error("Error recording email data:",a),a.message}}async function g(e,t,n=""){try{const o={data:{status:t,error:n}},{status:a}=await d.PUT(`message/${e}`,o,m.key);if(200!==a)return"Failed to update email status";console.log("Email status updated successfully")}catch(n){return console.error("Error updating email status:",n),n.message}}function f(e){const t=`Hello ${e.name},\n\nThis is your custom email body.\n\nYour custom data: ${e.content}`,n="Custom Email";return{emailBody:t,emailSubject:n}}function x(){const e="Welcome to our website!",t="Welcome Email";return{emailBody:e,emailSubject:t}}function h(){const e="\n  <p>สวัสดีค่ะ,</p>\n  <p>ขอแจ้งให้ทราบว่าบัญชีของคุณได้รับการเปลี่ยนแปลงรหัสผ่านเรียบร้อยแล้วค่ะ</p>\n  <p>หากคุณไม่ได้ดำเนินการเปลี่ยนรหัสผ่านนี้ กรุณาติดต่อทีมงานเพื่อรายงานให้ทราบค่ะ</p></br></br>\n  <p>ขอบคุณค่ะ</p>\n  ",t="แจ้งเตือน: บัญชีของคุณได้รับการเปลี่ยนรหัสผ่าน";return{emailBody:e,emailSubject:t}}async function b(e){try{const n={method:"find",args:[{$and:[{email:e.email}]}]},{data:o}=await d.POST("user/query",n,m.key);if(o.length>0){const e=y(6),n=r().lib.WordArray.random(16),a=r().SHA256(e+n).toString();try{const e={data:{password:a,salt:n.toString(),req_reset:!0}},{status:t}=await d.PUT(`user/${o[0]._id}`,e,m.key);if(200!==t)return"Failed to update email status";console.log("Email status updated successfully")}catch(t){return console.error("Error updating email status:",t),t.message}const s="แจ้งเตือน: รีเซ็ตรหัสผ่าน",l=`\n        <p>สวัสดีค่ะ,</p>\n        <p>ขอแจ้งให้ทราบว่าบัญชีของคุณได้รับการเปลี่ยนแปลงรหัสผ่านเรียบร้อยแล้วค่ะ</p>\n        <p>รหัสผ่านใหม่ของคุณคือ: <strong>${e}</strong></p>\n        <p>โปรดจำรหัสผ่านใหม่นี้ไว้เพื่อเข้าสู่ระบบในครั้งถัดไปค่ะ</p>\n        <p>หากคุณไม่ได้ดำเนินการเปลี่ยนรหัสผ่านนี้ กรุณาติดต่อทีมงานเพื่อรายงานให้ทราบค่ะ</p></br></br>\n        <p>ขอบคุณค่ะ</p>\n      `;return{emailBody:l,emailSubject:s}}return console.log("No User"),"User not found"}catch(t){return console.error("Error retrieving user information:",t),t.message}}function y(e){const t="0123456789";let n="";for(let o=0;o<e;o++){const e=Math.floor(Math.random()*t.length);n+=t[e]}return n}}}]);
//# sourceMappingURL=3176.74a35859.js.map