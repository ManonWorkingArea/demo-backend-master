"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[3269],{83269:function(e,t,s){s.r(t),s.d(t,{default:function(){return oe}});var i=s(20641);function o(e,t,s,o,a,l){return(0,i.uX)(),(0,i.Wv)((0,i.$y)(l.componentName))}var a=s(52968),l=s(75220),n=s(40475),r=s(90033),d=s(53751);const c={class:"bg-gray-50"},m={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},u={class:"sm:mx-auto sm:w-full sm:max-w-md"},p=["src"],g={class:"bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10"},f={class:"mt-2"},h={class:"mt-2"},b={class:"col-span-2"},k={class:"mt-2"},w={class:"col-span-2"},y={class:"mt-2"},x={class:"mt-2 relative"},v=["type"],L={class:"mt-2 relative"},P=["type"],C={class:"col-span-2"},V={class:"mt-2"},_={class:"col-span-2"},M={class:"flex items-center"},E={key:0,class:"col-span-2"},F={class:"mt-2"},z={class:"col-span-2"},T={class:"flex items-center"},$={for:"remember-me",class:"ml-2 block text-md text-gray-900"},B={class:"col-span-2"},X={key:0,class:"col-span-2"},A={class:"items-center px-3 py-1 rounded-md bg-blue-100 text-sm text-black pb-5 mb-5"},Q={key:0,class:"w-full"},U={key:1,class:"w-full"},D={key:2,class:"w-full"},J={key:3,class:"w-full"},S={key:4,class:"w-full"},W={key:5,class:"w-full"},O={key:6,class:"w-full"},j={key:7,class:"w-full"},I={key:8,class:"w-full"},H=["disabled"];function K(e,t,s,o,a,l){const n=(0,i.g2)("Modal");return(0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",m,[(0,i.Lk)("div",u,[(0,i.Lk)("img",{class:"mx-auto h-24 w-auto",src:this.config.siteLogo,alt:"Your Company"},null,8,p),t[21]||(t[21]=(0,i.Lk)("h2",{class:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900"},"ลงทะเบียนบัญชี FTI Academy",-1))]),(0,i.Lk)("div",{class:(0,r.C4)(["mt-8 sm:mx-auto sm:w-full sm:max-w-lg relative",[a.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,i.Lk)("div",g,[(0,i.Lk)("form",{class:"grid grid-cols-2 gap-6",onSubmit:t[20]||(t[20]=(0,d.D$)((()=>{}),["prevent"]))},[(0,i.Lk)("div",null,[t[22]||(t[22]=(0,i.Lk)("label",{for:"firstname",class:"block text-md font-semibold leading-6 text-gray-900"},"ชื่อ",-1)),(0,i.Lk)("div",f,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.firstname=e),id:"firstname",name:"firstname",type:"text",autocomplete:"firstname",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-md sm:leading-6"},null,512),[[d.Jo,a.firstname]])])]),(0,i.Lk)("div",null,[t[23]||(t[23]=(0,i.Lk)("label",{for:"lastname",class:"block text-md font-semibold leading-6 text-gray-900"},"นามสกุล",-1)),(0,i.Lk)("div",h,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.lastname=e),id:"lastname",name:"lastname",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[d.Jo,a.lastname]])])]),(0,i.Lk)("div",b,[t[24]||(t[24]=(0,i.Lk)("label",{for:"citizen",class:"block text-md font-semibold leading-6 text-gray-900"},"หมายเลขบัตรประจำตัวประชาชน",-1)),t[25]||(t[25]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ระบุเป็นตัวเลข 13 หลักเท่านั้น")],-1)),(0,i.Lk)("div",k,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.citizen=e),onInput:t[3]||(t[3]=e=>a.citizen=e.target.value.replace(/\D/,"").slice(0,13)),id:"citizen",name:"citizen",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[d.Jo,a.citizen]])])]),(0,i.Lk)("div",w,[t[26]||(t[26]=(0,i.Lk)("label",{for:"email",class:"block text-md font-semibold leading-6 text-gray-900"},"อีเมล์",-1)),t[27]||(t[27]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ใช้สำหรับเข้าระบบและรับข่าวสาร")],-1)),(0,i.Lk)("div",y,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.email=e),id:"email",name:"email",type:"text",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:t[5]||(t[5]=(...e)=>l.validateEmail&&l.validateEmail(...e))},null,544),[[d.Jo,a.email]])])]),(0,i.Lk)("div",null,[t[28]||(t[28]=(0,i.Lk)("label",{for:"password",class:"block text-md font-semibold leading-6 text-gray-900"},"รหัสผ่าน",-1)),(0,i.Lk)("div",x,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>a.password=e),id:"password",name:"password",type:a.showPassword1?"text":"password",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:t[7]||(t[7]=(...e)=>l.validatePassword&&l.validatePassword(...e)),onPaste:t[8]||(t[8]=(...e)=>l.preventPaste&&l.preventPaste(...e))},null,40,v),[[d.hp,a.password]]),(0,i.Lk)("button",{onClick:t[9]||(t[9]=e=>a.showPassword1=!a.showPassword1),type:"button",class:"absolute top-[5px] right-[5px] px-2 py-1 bg-gray-200 rounded-md text-xs"},(0,r.v_)(a.showPassword1?"ซ่อน":"แสดง"),1)])]),(0,i.Lk)("div",null,[t[29]||(t[29]=(0,i.Lk)("label",{for:"cpassword",class:"block text-md font-semibold leading-6 text-gray-900"},"ยืนยันรหัสผ่าน",-1)),(0,i.Lk)("div",L,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>a.cpassword=e),id:"cpassword",name:"cpassword",type:a.showPassword2?"text":"password",autocomplete:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",onKeypress:t[11]||(t[11]=(...e)=>l.validatePassword&&l.validatePassword(...e)),onPaste:t[12]||(t[12]=(...e)=>l.preventPaste&&l.preventPaste(...e))},null,40,P),[[d.hp,a.cpassword]]),(0,i.Lk)("button",{onClick:t[13]||(t[13]=e=>a.showPassword2=!a.showPassword2),type:"button",class:"absolute top-[5px] right-[5px] px-2 py-1 bg-gray-200 rounded-md text-xs"},(0,r.v_)(a.showPassword2?"ซ่อน":"แสดง"),1)])]),(0,i.Lk)("div",C,[t[30]||(t[30]=(0,i.Lk)("label",{for:"phone",class:"block text-md font-semibold leading-6 text-gray-900"},"เบอร์โทร",-1)),t[31]||(t[31]=(0,i.Lk)("small",{class:"text-gray-500"},[(0,i.Lk)("span",{class:"text-red-600 font-bold text-[16px]"},"*"),(0,i.eW)(" ระบุเป็นตัวเลขมือถือ 10 หลักเท่านั้น")],-1)),(0,i.Lk)("div",V,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>a.phone=e),onInput:t[15]||(t[15]=e=>a.phone=e.target.value.replace(/\D/,"").slice(0,10)),id:"phone",name:"phone",type:"text",autocomplete:"phone",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,544),[[d.Jo,a.phone]])])]),(0,i.Lk)("div",_,[(0,i.Lk)("div",M,[(0,i.bo)((0,i.Lk)("input",{id:"ftiMember",name:"ftiMember",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600","onUpdate:modelValue":t[16]||(t[16]=e=>a.ftiMember=e)},null,512),[[d.lH,a.ftiMember]]),t[32]||(t[32]=(0,i.Lk)("label",{for:"ftiMember",class:"ml-2 block text-md text-gray-900"},"สมัครในนามสมาชิก สภาอุตสาหกรรมแห่งประเทศไทย",-1))])]),a.ftiMember?((0,i.uX)(),(0,i.CE)("div",E,[t[33]||(t[33]=(0,i.Lk)("label",{for:"fti_member",class:"block text-md font-semibold leading-6 text-gray-900"},"หมายเลขสมาชิก ส.อ.ท.",-1)),(0,i.Lk)("div",F,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>a.fti_member=e),id:"fti_member",name:"fti_member",type:"text",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[d.Jo,a.fti_member]])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",z,[(0,i.Lk)("div",T,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>a.agreedToPolicy=e),id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"},null,512),[[d.lH,a.agreedToPolicy]]),(0,i.Lk)("label",$,[t[34]||(t[34]=(0,i.eW)("คุณยอมรับ ")),(0,i.bF)(n,{title:"นโยบายความเป็นส่วนตัว"}),t[35]||(t[35]=(0,i.eW)(" ของ FTI Academy."))])])]),(0,i.Lk)("div",B,[l.validForm?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",X,[(0,i.Lk)("div",A,[t[36]||(t[36]=(0,i.Lk)("div",{class:"font-semibold pt-3 pb-3"},"คำแนะนำในการสมัคร",-1)),a.firstname?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Q," ** กรุณากรอกชื่อ ")),a.lastname?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",U," ** กรุณากรอกนามสกุล ")),l.citizenValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",D," ** หมายเลขบัตรประชาชนต้องเป็นตัวเลข 13 หลักเท่านั้น ")),l.validPhone?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",J," ** เบอร์โทรต้องเป็นตัวเลข 10 หลักเท่านั้น ")),e.passwordValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",S," ** รหัสผ่านต้องมีอักขระ 8-20 ตัวและไม่มีช่องว่าง ")),e.cpasswordValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",W," ** ยืนยันรหัสผ่านไม่ตรงกับรหัสผ่าน ")),!a.ftiMember||a.fti_member&&a.fti_member.trim()?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",O," ** กรุณากรอกหมายเลขสมาชิก ส.อ.ท. ")),l.emailValid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",j," ** กรุณากรอกอีเมล์ให้ถูกต้อง ")),a.agreedToPolicy?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",I," ** กรุณายอมรับนโยบายความเป็นส่วนตัวก่อนลงทะเบียน "))])])),(0,i.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>l.submitForm&&l.submitForm(...e)),disabled:!l.validForm,type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-ทก font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"สมัครสมาชิก",8,H)])],32)])],2)])])}s(44114),s(81454);var N=s(22857),q=s(21396),Y=s.n(q);function G(e){const t=document.querySelector(`label[for="${e}"]`);return t?t.textContent.trim():e}var R={name:"Login",components:{Modal:N.A},data(){return{login:n.A.get("session","login"),config:n.A.get("configs"),ftiMember:!1,password:"",cpassword:"",firstname:"",lastname:"",email:"",phone:"",citizen:"",fti_member:"",passwordMatch:!0,showPassword1:!1,showPassword2:!1,agreedToPolicy:!1,activeBlock:!1}},watch:{password(){this.checkPasswords(),this.passwordValid=this.checkPasswordValid(this.password)},cpassword(){this.checkPasswords(),this.cpasswordValid=this.checkCPasswordValid(this.cpassword)},email(e){const t=/^[^\sก-๙]+@[^\sก-๙]+\.[^\sก-๙]+$/;t.test(e)||(this.email=e.replace(/[^\w.@-]/gi,""))}},computed:{citizenValid(){return/^\d{13}$/.test(this.citizen)},validPhone(){return/^\d{10}$/.test(this.phone)},ftiMemberValid(){return!this.ftiMember||this.ftiMember&&this.fti_member&&this.fti_member.trim().length>0},emailValid(){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.test(this.email)},validForm(){const e=this.password.replace(/\s/g,""),t=this.cpassword.replace(/\s/g,""),s=e&&!/\s/.test(e)&&!/[ก-๙]/.test(e)&&e.length>=8,i=t&&!/\s/.test(t)&&!/[ก-๙]/.test(t),o=/^\d{13}$/.test(this.citizen),a=this.firstname.trim()&&this.lastname.trim(),l=/^\d{10}$/.test(this.phone),n=!this.ftiMember||this.ftiMember&&this.fti_member&&this.fti_member.trim(),r=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)&&!/example\.com/.test(this.email),d=this.agreedToPolicy;return s&&i&&this.passwordMatch&&o&&a&&l&&n&&r&&d}},methods:{validateEmail(e){const t=e.key;(/\s/.test(t)||/[ก-๙]/.test(t))&&e.preventDefault()},checkPasswordValid(e){const t=e.replace(/\s/g,"");return t&&!/\s/.test(t)&&!/[ก-๙]/.test(t)},checkCPasswordValid(e){const t=e.replace(/\s/g,"");return t&&!/\s/.test(t)&&!/[ก-๙]/.test(t)&&t===this.password},checkPasswords(){const e=this.password.replace(/\s/g,""),t=this.cpassword.replace(/\s/g,"");this.passwordMatch=e===t,e.length<8||/\s/.test(e)||/[ก-๙]/.test(e)?this.passwordValid=!1:this.passwordValid=!0,this.password=e,this.cpassword=t},validatePassword(e){const t=e.key;(/\s/.test(t)||/[ก-๙]/.test(t))&&e.preventDefault()},preventPaste(e){e.preventDefault()},async submitForm(){if(this.validForm){console.log("All Form Valid");try{this.activeBlock=!0;const e=Y().lib.WordArray.random(16),t=Y().SHA256(this.password+e).toString(),s=await fetch("https://gateway.cloudrestfulapi.com/api/user/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.config.key},body:JSON.stringify({data:{firstname:this.firstname,lastname:this.lastname,citizen:this.citizen,phone:this.phone,email:this.email,username:this.email,password:t,parent:this.config.siteID,salt:e.toString(),role:"user",info:{fti_member:!!this.fti_member,fti_member_number:this.fti_member,agree:this.agreedToPolicy}},options:{fieldType:[],uniqueFields:[["email","phone","citizen"]]}})}),i=await s.json();if(400===s.status&&"duplicate"===i.message){this.activeBlock=!1;const e=i.fields.map((e=>G(e))).join(", ");this.$swal({title:"มีข้อมูลเหล่านี้อยู่ในระบบแล้ว !",text:`ฟิลด์: ${e} กรุณาตรวจสอบข้อมูลของคุณให้ถูกต้องอีกครั้ง`,type:"error",showCancelButton:!1,confirmButtonColor:"#0054b4",confirmButtonText:"ตกลง",closeOnConfirm:!0,closeOnCancel:!1})}else 200===s.status?(this.activeBlock=!1,this.$swal({title:"ทำการลงทะเบียนเรียบร้อยแล้ว ?",text:"คุณต้องการที่จะดำเนินการอย่างไร !",type:"success",showCancelButton:!0,confirmButtonColor:"#0054b4",confirmButtonText:"เข้าสู่ระบบ",cancelButtonText:"ลงทะเบียนอีกครั้ง",closeOnConfirm:!1,closeOnCancel:!1}).then((e=>{e.isConfirmed?(console.log("Home"),this.$router.push("/student/login")):(console.log("New"),window.location.reload())}))):this.activeBlock=!1}catch(e){console.log(e)}}else console.log("Any Form not Valid")}}},Z=s(64621);const ee=(0,Z.A)(R,[["render",K]]);var te=ee,se={name:"Lesson Detail",components:{Frontend:te},data(){return{session:n.A.get("session")}},setup(){const e=(0,l.lq)(),t=e.meta.title;(0,a.K7)(t)},computed:{componentName(){return"Frontend"}}};const ie=(0,Z.A)(se,[["render",o]]);var oe=ie}}]);
//# sourceMappingURL=3269.199fa182.js.map