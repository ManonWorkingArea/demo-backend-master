"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[3404],{73404:function(e,t,s){s.r(t),s.d(t,{default:function(){return mt}});var a=s(20641);function n(e,t,s,n,r,o){const l=(0,a.g2)("List");return this.login?((0,a.uX)(),(0,a.Wv)(l,{key:0,"header-height":r.manualHeaderHeight},null,8,["header-height"])):(0,a.Q3)("",!0)}var r=s(52968),o=s(75220),l=s(90033),i=s(53751);const d={class:"hidden lg:flex lg:w-64 lg:flex-col"},c={class:"flex flex-col flex-grow bg-white border-r border-gray-200 h-full"},u={class:"flex items-center justify-between px-4 py-4 border-b border-gray-200 flex-shrink-0"},g={class:"px-4 py-3 border-b border-gray-200"},h={class:"space-y-1"},v={class:"flex items-center justify-between p-2 bg-blue-50 rounded-lg stats-card"},x={class:"text-xs font-semibold text-blue-600"},b={class:"flex items-center justify-between p-2 bg-yellow-50 rounded-lg stats-card"},m={class:"text-xs font-semibold text-yellow-600"},f={class:"flex items-center justify-between p-2 bg-green-50 rounded-lg stats-card"},p={class:"text-xs font-semibold text-green-600"},y={class:"px-4 py-3 border-b border-gray-200"},k={class:"space-y-1"},C=["onClick"],L={class:"flex-1 text-left"},w={class:"px-4 py-3 border-b border-gray-200 flex-shrink-0"},S={class:"space-y-1"},E={class:"mt-auto px-4 py-3 flex-shrink-0"},_={class:"flex items-center gap-3 p-2 bg-gray-50 rounded-lg"},M={class:"flex-1 min-w-0"},j={class:"text-xs font-medium text-gray-900 truncate"},H={class:"lg:hidden bg-white border-b border-gray-200 px-4 py-2 flex-shrink-0"},P={class:"flex items-center justify-between"},T={class:"bg-white border-b border-gray-200 px-4 py-2 flex-shrink-0"},X={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-2"},A={class:"flex-1 max-w-md"},F={class:"relative"},I={class:"flex items-center gap-2"},O=["disabled"],$={class:"lg:hidden bg-white border-b border-gray-200 flex-shrink-0"},U={class:"px-4 py-2"},D=["value"],Q={class:"flex-1 flex overflow-hidden"},B={class:"w-full lg:w-80 bg-white border-r border-gray-200 flex flex-col h-full"},K={class:"px-4 py-2 border-b border-gray-200 flex-shrink-0"},R={class:"flex items-center justify-between"},z={class:"text-xs text-gray-500"},N={class:"flex-1 overflow-y-auto"},W=["onClick"],q={class:"flex items-center gap-2"},V={class:"w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0"},J={class:"text-white text-xs font-medium"},G={class:"flex-1 min-w-0"},Y={class:"flex items-center justify-between gap-2"},Z={class:"flex-1 min-w-0"},ee={class:"font-medium text-gray-900 text-xs truncate"},te={class:"text-gray-500 text-xs truncate"},se={class:"flex items-center gap-1 flex-shrink-0"},ae={class:"text-xs text-gray-400"},ne={key:0,class:"bg-red-500 text-white text-xs px-1 py-0.5 rounded-full min-w-[14px] text-center text-[10px] ml-1"},re={class:"mt-1"},oe={key:0,class:"text-center py-6"},le={key:0,class:"flex-1 flex flex-col bg-white h-full overflow-hidden"},ie={class:"px-4 py-2 border-b border-gray-200 bg-gray-50 flex-shrink-0"},de={class:"flex items-center justify-between"},ce={class:"flex items-center gap-3"},ue={class:"w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center"},ge={class:"text-white text-xs font-medium"},he={class:"font-medium text-gray-900 text-sm"},ve={class:"text-xs text-gray-500"},xe={class:"flex items-center gap-2"},be={key:0,class:"px-4 py-2 bg-yellow-50 border-b border-gray-200 flex-shrink-0"},me={class:"relative"},fe={class:"flex-1 overflow-y-auto p-3 space-y-2",ref:"chatWindow"},pe={class:"text-xs"},ye={class:"text-[10px] mt-1 opacity-70"},ke={class:"p-3 border-t border-gray-200 bg-gray-50 flex-shrink-0"},Ce={class:"flex items-center gap-2"},Le=["disabled"],we=["disabled"],Se=["disabled"],Ee=["disabled"],_e={key:1,class:"flex-1 flex items-center justify-center bg-gray-50"},Me={class:"flex flex-col h-full"},je={class:"px-4 py-3 border-b border-gray-200 bg-gray-50"},He={class:"flex items-center justify-between"},Pe={class:"flex-1 p-4 space-y-4"},Te={class:"text-center"},Xe={class:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3"},Ae={class:"text-white text-xl font-medium"},Fe={class:"font-medium text-gray-900"},Ie={class:"space-y-3"},Oe={class:"text-sm text-gray-900"},$e={class:"text-sm text-gray-900"},Ue={class:"text-sm text-gray-900"},De={class:"flex flex-col h-full"},Qe={class:"flex items-center justify-between px-4 py-4 border-b border-gray-200"},Be={class:"px-4 py-4 border-b border-gray-200"},Ke={class:"space-y-2"},Re={class:"flex items-center justify-between p-2 bg-blue-50 rounded-lg stats-card"},ze={class:"text-sm font-semibold text-blue-600"},Ne={class:"flex items-center justify-between p-2 bg-yellow-50 rounded-lg stats-card"},We={class:"text-sm font-semibold text-yellow-600"},qe={class:"flex items-center justify-between p-2 bg-green-50 rounded-lg stats-card"},Ve={class:"text-sm font-semibold text-green-600"},Je={class:"px-4 py-4 border-b border-gray-200"},Ge={class:"space-y-1"},Ye=["onClick"],Ze={class:"flex-1 text-left"};function et(e,t,s,n,r,o){const et=(0,a.g2)("EmojiPicker");return(0,a.uX)(),(0,a.CE)("div",{class:(0,l.C4)(["bg-gray-50 flex overflow-hidden support-container",[s.headerType&&`with-${s.headerType}`,s.customClass]]),style:(0,l.Tr)(s.customHeight?{height:s.customHeight,maxHeight:s.customHeight}:{})},[(0,a.Lk)("div",d,[(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[t[23]||(t[23]=(0,a.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"Live Support",-1)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.loadConversations&&o.loadConversations(...e)),class:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors duration-200",title:"à¸£à¸µà¹€à¸Ÿà¸£à¸Šà¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸²"},t[22]||(t[22]=[(0,a.Lk)("i",{class:"fas fa-sync-alt text-sm"},null,-1)]))]),(0,a.Lk)("div",g,[t[27]||(t[27]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"à¸ªà¸–à¸´à¸•à¸´à¸£à¸§à¸¡",-1)),(0,a.Lk)("div",h,[(0,a.Lk)("div",v,[t[24]||(t[24]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-blue-500 rounded-full"}),(0,a.Lk)("span",{class:"text-xs text-gray-700"},"à¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸²à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”")],-1)),(0,a.Lk)("span",x,(0,l.v_)(r.conversations.length),1)]),(0,a.Lk)("div",b,[t[25]||(t[25]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,a.Lk)("span",{class:"text-xs text-gray-700"},"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢")],-1)),(0,a.Lk)("span",m,(0,l.v_)(o.unassignedCount),1)]),(0,a.Lk)("div",f,[t[26]||(t[26]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.Lk)("span",{class:"text-xs text-gray-700"},"à¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¹à¸¥à¹‰à¸§")],-1)),(0,a.Lk)("span",p,(0,l.v_)(o.assignedCount),1)])])]),(0,a.Lk)("div",y,[t[28]||(t[28]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"à¸ªà¸–à¸²à¸™à¸°",-1)),(0,a.Lk)("nav",k,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.sidebarMenuItems,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.value,onClick:t=>o.selectStatusAndCloseMobile(e.value),class:(0,l.C4)(["w-full flex items-center gap-3 px-3 py-2 text-xs rounded-lg transition-colors duration-200 sidebar-menu-item",{"bg-blue-100 text-blue-700 font-medium active":r.selectedStatus===e.value,"text-gray-600 hover:bg-gray-100 hover:text-gray-900":r.selectedStatus!==e.value}])},[(0,a.Lk)("i",{class:(0,l.C4)([e.icon,"text-xs w-3"])},null,2),(0,a.Lk)("span",L,(0,l.v_)(e.label),1),o.getStatusCount(e.value)>0?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,l.C4)(["px-1.5 py-0.5 text-[10px] rounded-full status-badge",{"bg-blue-200 text-blue-800":r.selectedStatus===e.value,"bg-gray-200 text-gray-600":r.selectedStatus!==e.value}])},(0,l.v_)(o.getStatusCount(e.value)),3)):(0,a.Q3)("",!0)],10,C)))),128))])]),(0,a.Lk)("div",w,[t[31]||(t[31]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-2"},"à¸à¸²à¸£à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£",-1)),(0,a.Lk)("div",S,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.loadConversations&&o.loadConversations(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-xs text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[29]||(t[29]=[(0,a.Lk)("i",{class:"fas fa-sync-alt text-xs w-3"},null,-1),(0,a.Lk)("span",null,"à¸£à¸µà¹€à¸Ÿà¸£à¸Š",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.toggleFullscreen&&o.toggleFullscreen(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-xs text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},[t[30]||(t[30]=(0,a.Lk)("i",{class:"fas fa-expand text-xs w-3"},null,-1)),(0,a.Lk)("span",null,(0,l.v_)(r.isFullscreen?"à¸­à¸­à¸à¸ˆà¸²à¸à¹€à¸•à¹‡à¸¡à¸ˆà¸­":"à¹€à¸•à¹‡à¸¡à¸ˆà¸­"),1)])])]),(0,a.Lk)("div",E,[(0,a.Lk)("div",_,[t[33]||(t[33]=(0,a.Lk)("div",{class:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-user text-white text-xs"})],-1)),(0,a.Lk)("div",M,[(0,a.Lk)("p",j,(0,l.v_)(r.session?.current?.name||"à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰"),1),t[32]||(t[32]=(0,a.Lk)("p",{class:"text-[10px] text-gray-500"},"à¹€à¸ˆà¹‰à¸²à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ Support",-1))])])])])]),(0,a.Lk)("div",{class:(0,l.C4)(["flex-1 flex flex-col min-w-0 h-full",{"fixed inset-0 z-50":r.isFullscreen}])},[(0,a.Lk)("div",H,[(0,a.Lk)("div",P,[t[35]||(t[35]=(0,a.Lk)("h1",{class:"text-base font-semibold text-gray-900"},"Live Support",-1)),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>o.toggleMobileSidebar&&o.toggleMobileSidebar(...e)),class:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},t[34]||(t[34]=[(0,a.Lk)("i",{class:"fas fa-bars"},null,-1)]))])]),(0,a.Lk)("div",T,[(0,a.Lk)("div",X,[(0,a.Lk)("div",A,[(0,a.Lk)("div",F,[t[36]||(t[36]=(0,a.Lk)("i",{class:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"},null,-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>r.conversationSearch=e),placeholder:"à¸„à¹‰à¸™à¸«à¸²à¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸²...",class:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"},null,512),[[i.Jo,r.conversationSearch]])])]),(0,a.Lk)("div",I,[r.selectedConversation?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>o.resolveConversation&&o.resolveConversation(...e)),disabled:"resolved"===r.selectedConversation?.status,class:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-medium px-3 py-1.5 rounded-lg transition-colors duration-200 text-xs flex items-center gap-1"},t[37]||(t[37]=[(0,a.Lk)("i",{class:"fas fa-check text-xs"},null,-1),(0,a.eW)(" à¹à¸à¹‰à¹„à¸‚à¹à¸¥à¹‰à¸§ ")]),8,O)):(0,a.Q3)("",!0),"bot"===r.selectedConversation?.mode?((0,a.uX)(),(0,a.CE)("button",{key:1,onClick:t[6]||(t[6]=(...e)=>o.switchToAgentMode&&o.switchToAgentMode(...e)),class:"bg-orange-600 hover:bg-orange-700 text-white font-medium px-3 py-1.5 rounded-lg transition-colors duration-200 text-xs flex items-center gap-1"},t[38]||(t[38]=[(0,a.Lk)("i",{class:"fas fa-user-tie text-xs"},null,-1),(0,a.eW)(" à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹€à¸›à¹‡à¸™à¹€à¸ˆà¹‰à¸²à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ ")]))):(0,a.Q3)("",!0)])])]),(0,a.Lk)("div",$,[(0,a.Lk)("div",U,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.selectedStatus=e),onChange:t[8]||(t[8]=e=>o.selectStatus(r.selectedStatus)),class:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.sidebarMenuItems,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.value,value:e.value},(0,l.v_)(e.label)+" ("+(0,l.v_)(o.getStatusCount(e.value))+") ",9,D)))),128))],544),[[i.u1,r.selectedStatus]])])]),(0,a.Lk)("div",Q,[(0,a.Lk)("div",B,[(0,a.Lk)("div",K,[(0,a.Lk)("div",R,[t[39]||(t[39]=(0,a.Lk)("h3",{class:"font-medium text-gray-900 text-sm"},"à¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸²",-1)),(0,a.Lk)("span",z,(0,l.v_)(o.filteredConversationsBySearch.length)+" à¸£à¸²à¸¢à¸à¸²à¸£",1)])]),(0,a.Lk)("div",N,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.filteredConversationsBySearch,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:(0,l.C4)(["p-2 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors conversation-card",{"bg-blue-50 border-blue-200":r.selectedConversation?._id===e._id}]),onClick:t=>o.selectConversation(e)},[(0,a.Lk)("div",q,[(0,a.Lk)("div",V,[(0,a.Lk)("span",J,(0,l.v_)(o.getInitials(e.sender)),1)]),(0,a.Lk)("div",G,[(0,a.Lk)("div",Y,[(0,a.Lk)("div",Z,[(0,a.Lk)("h4",ee,(0,l.v_)(e.sender),1),(0,a.Lk)("p",te,(0,l.v_)(e.preview),1)]),(0,a.Lk)("div",se,[(0,a.Lk)("span",ae,(0,l.v_)(o.formatTime(e.lastUpdate)),1),e.unreadCount>0?((0,a.uX)(),(0,a.CE)("span",ne,(0,l.v_)(e.unreadCount),1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",re,[(0,a.Lk)("span",{class:(0,l.C4)(["px-1.5 py-0.5 text-[9px] rounded-full",o.getStatusClass(e.status)])},(0,l.v_)(o.getStatusLabel(e.status)),3)])])])],10,W)))),128)),0===o.filteredConversationsBySearch.length?((0,a.uX)(),(0,a.CE)("div",oe,t[40]||(t[40]=[(0,a.Lk)("i",{class:"fas fa-comments text-gray-300 text-2xl mb-2"},null,-1),(0,a.Lk)("p",{class:"text-gray-500 text-xs"},"à¹„à¸¡à¹ˆà¸žà¸šà¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸²à¸—à¸µà¹ˆà¸•à¸£à¸‡à¸à¸±à¸šà¸à¸²à¸£à¸„à¹‰à¸™à¸«à¸²",-1)]))):(0,a.Q3)("",!0)])]),r.selectedConversation?((0,a.uX)(),(0,a.CE)("div",le,[(0,a.Lk)("div",ie,[(0,a.Lk)("div",de,[(0,a.Lk)("div",ce,[(0,a.Lk)("div",ue,[(0,a.Lk)("span",ge,(0,l.v_)(o.getInitials(r.selectedConversation.sender)),1)]),(0,a.Lk)("div",null,[(0,a.Lk)("h3",he,(0,l.v_)(r.selectedConversation.sender),1),(0,a.Lk)("p",ve,(0,l.v_)(r.selectedConversation.email||"à¹„à¸¡à¹ˆà¸¡à¸µà¸­à¸µà¹€à¸¡à¸¥"),1)])]),(0,a.Lk)("div",xe,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>o.toggleSearchPanel&&o.toggleSearchPanel(...e)),class:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},t[41]||(t[41]=[(0,a.Lk)("i",{class:"fas fa-search text-xs"},null,-1)])),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>o.toggleCustomerPanel&&o.toggleCustomerPanel(...e)),class:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},t[42]||(t[42]=[(0,a.Lk)("i",{class:"fas fa-info-circle text-xs"},null,-1)]))])])]),r.isSearchPanelOpen?((0,a.uX)(),(0,a.CE)("div",be,[(0,a.Lk)("div",me,[t[43]||(t[43]=(0,a.Lk)("i",{class:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs"},null,-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>r.messageSearch=e),placeholder:"à¸„à¹‰à¸™à¸«à¸²à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡...",class:"w-full pl-8 pr-4 py-1.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs"},null,512),[[i.Jo,r.messageSearch]])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",fe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.filteredMessagesBySearch,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:(0,l.C4)(["flex chat-message","customer"===e.sender?"justify-start":"justify-end"])},[(0,a.Lk)("div",{class:(0,l.C4)(["max-w-xs px-3 py-2 rounded-lg","customer"===e.sender?"bg-gray-100 text-gray-900":"bg-blue-600 text-white"])},[(0,a.Lk)("p",pe,(0,l.v_)(e.text),1),(0,a.Lk)("p",ye,(0,l.v_)(e.time),1)],2)],2)))),128))],512),(0,a.Lk)("div",ke,[(0,a.Lk)("div",Ce,[(0,a.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>o.toggleEmojiPicker&&o.toggleEmojiPicker(...e)),disabled:"bot"===r.selectedConversation.mode,class:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},t[44]||(t[44]=[(0,a.Lk)("i",{class:"fas fa-smile text-xs"},null,-1)]),8,Le),(0,a.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>o.addFile&&o.addFile(...e)),disabled:"bot"===r.selectedConversation.mode,class:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50"},t[45]||(t[45]=[(0,a.Lk)("i",{class:"fas fa-paperclip text-xs"},null,-1)]),8,we),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>r.newMessage=e),placeholder:"à¸žà¸´à¸¡à¸žà¹Œà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡...",onKeyup:t[15]||(t[15]=(0,i.jR)(((...e)=>o.sendMessage&&o.sendMessage(...e)),["enter"])),disabled:"bot"===r.selectedConversation.mode,class:"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs disabled:bg-gray-100"},null,40,Se),[[i.Jo,r.newMessage]]),(0,a.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>o.sendMessage&&o.sendMessage(...e)),disabled:"bot"===r.selectedConversation.mode||!r.newMessage.trim(),class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white p-1.5 rounded-lg transition-colors"},t[46]||(t[46]=[(0,a.Lk)("i",{class:"fas fa-paper-plane text-xs"},null,-1)]),8,Ee)])]),(0,a.bF)(et,{isOpen:r.isEmojiPickerOpen,onSelectEmoji:o.addEmojiToMessage,disabled:"bot"===r.selectedConversation.mode},null,8,["isOpen","onSelectEmoji","disabled"])])):((0,a.uX)(),(0,a.CE)("div",_e,t[47]||(t[47]=[(0,a.Lk)("div",{class:"text-center"},[(0,a.Lk)("i",{class:"fas fa-comments text-gray-300 text-4xl mb-3"}),(0,a.Lk)("h3",{class:"text-base font-medium text-gray-900 mb-2"},"à¹€à¸¥à¸·à¸­à¸à¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸²"),(0,a.Lk)("p",{class:"text-gray-500 text-sm"},"à¹€à¸¥à¸·à¸­à¸à¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸²à¸ˆà¸²à¸à¸£à¸²à¸¢à¸à¸²à¸£à¹€à¸žà¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™")],-1)])))])],2),r.isCustomerPanelOpen&&r.selectedConversation?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,l.C4)(["fixed inset-y-0 right-0 w-80 bg-white border-l border-gray-200 shadow-lg z-40 transform transition-transform duration-300",{"translate-x-0":r.isCustomerPanelOpen,"translate-x-full":!r.isCustomerPanelOpen}])},[(0,a.Lk)("div",Me,[(0,a.Lk)("div",je,[(0,a.Lk)("div",He,[t[49]||(t[49]=(0,a.Lk)("h3",{class:"font-medium text-gray-900"},"à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸¥à¸¹à¸à¸„à¹‰à¸²",-1)),(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>o.toggleCustomerPanel&&o.toggleCustomerPanel(...e)),class:"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors"},t[48]||(t[48]=[(0,a.Lk)("i",{class:"fas fa-times text-sm"},null,-1)]))])]),(0,a.Lk)("div",Pe,[(0,a.Lk)("div",Te,[(0,a.Lk)("div",Xe,[(0,a.Lk)("span",Ae,(0,l.v_)(o.getInitials(r.selectedConversation.sender)),1)]),(0,a.Lk)("h4",Fe,(0,l.v_)(r.selectedConversation.sender),1)]),(0,a.Lk)("div",Ie,[(0,a.Lk)("div",null,[t[50]||(t[50]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"à¸­à¸µà¹€à¸¡à¸¥",-1)),(0,a.Lk)("p",Oe,(0,l.v_)(r.selectedConversation.email||"à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"),1)]),(0,a.Lk)("div",null,[t[51]||(t[51]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œ",-1)),(0,a.Lk)("p",$e,(0,l.v_)(r.selectedConversation.phone||"à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"),1)]),(0,a.Lk)("div",null,[t[52]||(t[52]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆ",-1)),(0,a.Lk)("p",Ue,(0,l.v_)(r.selectedConversation.address||"à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥"),1)]),(0,a.Lk)("div",null,[t[53]||(t[53]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"à¸ªà¸–à¸²à¸™à¸°",-1)),(0,a.Lk)("span",{class:(0,l.C4)(["inline-block px-2 py-1 text-xs rounded-full",o.getStatusClass(r.selectedConversation.status)])},(0,l.v_)(o.getStatusLabel(r.selectedConversation.status)),3)])])])])],2)):(0,a.Q3)("",!0),r.showMobileSidebar?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t[20]||(t[20]=(...e)=>o.toggleMobileSidebar&&o.toggleMobileSidebar(...e))},[(0,a.Lk)("div",{class:"w-64 h-full bg-white transform transition-transform duration-300",onClick:t[19]||(t[19]=(0,i.D$)((()=>{}),["stop"]))},[(0,a.Lk)("div",De,[(0,a.Lk)("div",Qe,[t[55]||(t[55]=(0,a.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"Live Support",-1)),(0,a.Lk)("button",{onClick:t[18]||(t[18]=(...e)=>o.toggleMobileSidebar&&o.toggleMobileSidebar(...e)),class:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},t[54]||(t[54]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,a.Lk)("div",Be,[t[59]||(t[59]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"à¸ªà¸–à¸´à¸•à¸´à¸£à¸§à¸¡",-1)),(0,a.Lk)("div",Ke,[(0,a.Lk)("div",Re,[t[56]||(t[56]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-blue-500 rounded-full"}),(0,a.Lk)("span",{class:"text-sm text-gray-700"},"à¸à¸²à¸£à¸ªà¸™à¸—à¸™à¸²à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”")],-1)),(0,a.Lk)("span",ze,(0,l.v_)(r.conversations.length),1)]),(0,a.Lk)("div",Ne,[t[57]||(t[57]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,a.Lk)("span",{class:"text-sm text-gray-700"},"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢")],-1)),(0,a.Lk)("span",We,(0,l.v_)(o.unassignedCount),1)]),(0,a.Lk)("div",qe,[t[58]||(t[58]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.Lk)("span",{class:"text-sm text-gray-700"},"à¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¹à¸¥à¹‰à¸§")],-1)),(0,a.Lk)("span",Ve,(0,l.v_)(o.assignedCount),1)])])]),(0,a.Lk)("div",Je,[t[60]||(t[60]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"à¸ªà¸–à¸²à¸™à¸°",-1)),(0,a.Lk)("nav",Ge,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.sidebarMenuItems,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.value,onClick:t=>o.selectStatusAndCloseMobile(e.value),class:(0,l.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors duration-200 sidebar-menu-item",{"bg-blue-100 text-blue-700 font-medium active":r.selectedStatus===e.value,"text-gray-600 hover:bg-gray-100 hover:text-gray-900":r.selectedStatus!==e.value}])},[(0,a.Lk)("i",{class:(0,l.C4)([e.icon,"text-sm w-4"])},null,2),(0,a.Lk)("span",Ze,(0,l.v_)(e.label),1),o.getStatusCount(e.value)>0?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,l.C4)(["px-2 py-1 text-xs rounded-full status-badge",{"bg-blue-200 text-blue-800":r.selectedStatus===e.value,"bg-gray-200 text-gray-600":r.selectedStatus!==e.value}])},(0,l.v_)(o.getStatusCount(e.value)),3)):(0,a.Q3)("",!0)],10,Ye)))),128))])])])])])):(0,a.Q3)("",!0),r.isCustomerPanelOpen?((0,a.uX)(),(0,a.CE)("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-25 z-30",onClick:t[21]||(t[21]=(...e)=>o.toggleCustomerPanel&&o.toggleCustomerPanel(...e))})):(0,a.Q3)("",!0)],6)}s(44114),s(98992),s(54520),s(72577),s(3949),s(81454);var tt=s(53216),st=s(40475);const at={key:0,class:"emoji-picker"},nt=["onClick"];function rt(e,t,s,n,r,o){return s.isOpen?((0,a.uX)(),(0,a.CE)("div",at,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.emojis,(e=>((0,a.uX)(),(0,a.CE)("div",{class:"emoji",key:e,onClick:t=>o.selectEmoji(e)},(0,l.v_)(e),9,nt)))),128))])):(0,a.Q3)("",!0)}var ot={props:{isOpen:{type:Boolean,default:!1}},data(){return{emojis:["ðŸ˜Š","ðŸ˜‚","ðŸ˜","ðŸ˜Ž","ðŸ˜­","ðŸ‘","ðŸ‘Ž","â¤ï¸","ðŸ”¥","ðŸŽ‰","ðŸ™Œ","ðŸ‘","ðŸ¤”","ðŸ˜¢","ðŸ˜¡","ðŸ˜‡","ðŸ¥³","ðŸ˜´","ðŸ¤¯","ðŸ¤©","ðŸ˜œ","ðŸ¤—","ðŸ˜","ðŸ˜¤","ðŸ¤«","ðŸ˜Œ","ðŸ¤­","ðŸ™ˆ","ðŸ™‰","ðŸ™Š"]}},methods:{selectEmoji(e){this.$emit("select-emoji",e)}}},lt=s(64621);const it=(0,lt.A)(ot,[["render",rt],["__scopeId","data-v-155f8c9f"]]);var dt=it,ct=s(8605),ut=s(77160),gt={components:{EmojiPicker:dt},props:{headerType:{type:String,default:null,validator:e=>["topbar","breadcrumb","full-admin",null].includes(e)},headerHeight:{type:[Number,String],default:null},customHeight:{type:String,default:null},customClass:{type:String,default:""}},data(){return{userInput:"",generatedMessage:"",loader:!0,title:"Live Support Chat",conversationSearch:"",messageSearch:"",isSearchPanelOpen:!1,conversations:[],selectedConversation:null,selectedStatus:"all",newMessage:"",isCustomerPanelOpen:!1,isFullscreen:!1,isEmojiPickerOpen:!1,isAgentMode:!1,session:st.A.get("session"),showMobileSidebar:!1,sidebarMenuItems:[{value:"all",label:"à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”",icon:"fas fa-list"},{value:"unassigned",label:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢",icon:"fas fa-clock"},{value:"assigned",label:"à¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¹à¸¥à¹‰à¸§",icon:"fas fa-user-check"},{value:"resolved",label:"à¹à¸à¹‰à¹„à¸‚à¹à¸¥à¹‰à¸§",icon:"fas fa-check-circle"}]}},created(){this.loadConversations()},computed:{filteredConversationsBySearch(){return this.conversationSearch?this.sortedFilteredConversations.filter((e=>e.sender.toLowerCase().includes(this.conversationSearch.toLowerCase())||e.preview.toLowerCase().includes(this.conversationSearch.toLowerCase()))):this.sortedFilteredConversations},filteredMessagesBySearch(){return this.selectedConversation&&this.messageSearch?this.selectedConversation.message.filter((e=>e.text.toLowerCase().includes(this.messageSearch.toLowerCase()))):this.selectedConversation?this.selectedConversation.message:[]},sortedFilteredConversations(){return this.filteredConversations.slice().sort(((e,t)=>t.unreadCount===e.unreadCount?t.lastUpdate-e.lastUpdate:t.unreadCount-e.unreadCount))},filteredConversations(){return"all"===this.selectedStatus?this.conversations:this.conversations.filter((e=>e.status===this.selectedStatus))},unassignedCount(){return this.conversations.filter((e=>"unassigned"===e.status)).length},assignedCount(){return this.conversations.filter((e=>"assigned"===e.status)).length},resolvedCount(){return this.conversations.filter((e=>"resolved"===e.status)).length}},mounted(){this.subscribeToHostChannel(this.session.current._id,this.handleHostMessages),this.calculateHeaderHeight(),window.addEventListener("resize",this.calculateHeaderHeight)},beforeUnmount(){window.removeEventListener("resize",this.calculateHeaderHeight)},methods:{calculateHeaderHeight(){if(this.customHeight||this.headerHeight){if(this.headerHeight){const e="number"===typeof this.headerHeight?`${this.headerHeight}px`:this.headerHeight;document.documentElement.style.setProperty("--header-height",e)}return}let e=0;const t=["header",".header",".navbar",".topbar",".breadcrumb",".access-bar",'[class*="header"]','[class*="navbar"]','[class*="topbar"]','[role="banner"]'];if(t.forEach((t=>{const s=document.querySelectorAll(t);s.forEach((t=>{this.isElementAbove(t)&&(e+=t.offsetHeight)}))})),0===e)switch(this.headerType){case"topbar":e=120;break;case"breadcrumb":e=140;break;case"full-admin":e=160;break;default:e=window.innerWidth<=768?56:80}e+=8,document.documentElement.style.setProperty("--header-height",`${e}px`),console.log(`Support Component: Calculated header height = ${e}px`)},isElementAbove(e){const t=this.$el;if(!t)return!1;const s=e.getBoundingClientRect(),a=t.getBoundingClientRect();return s.bottom<=a.top},async getCustomMessage(){if(""!==this.userInput.trim())try{this.generatedMessage=await(0,ut.k)(this.userInput)}catch(e){console.error("Error generating message:",e),this.generatedMessage="Sorry, an error occurred."}},unsubscribeFromConversationChannel(e){const t=(0,tt.al)(`conversation-${e}`);t?t.unsubscribe():console.warn(`Conversation channel not found: conversation-${e}`)},subscribeToHostChannel(e){const t=(0,tt.al)(`host-${e}`);(0,tt.SR)(t,(e=>{this.handleHostMessages(e)}))},subscribeToConversationChannel(e){const t=(0,tt.al)(`conversation-${e}`);(0,tt.SR)(t,(e=>{this.handleConversationMessages(e)}))},handleHostMessages(e){e.data&&"conversation_update"===e.data.type&&this.loadConversations(!0)},handleConversationMessages(e){e.data&&e.data.type},async publishToHostChannel(e,t){const s=(0,tt.al)(`host-${this.session.host_id}`);try{await(0,tt.Le)(s,{type:e,data:t})}catch(a){console.error(a)}},async publishToConversationChannel(e,t,s){const a=(0,tt.al)(`conversation-${e}`);try{await(0,tt.Le)(a,{type:t,data:s})}catch(n){console.error(n)}},async loadConversations(e=!1){try{e||(this.loader=!1);const t=await(0,ct.bX)();this.conversations=t.map((e=>({...e,lastUpdate:new Date(e.lastUpdate)}))),this.selectLastConversation(),e||(this.loader=!0)}catch(t){console.error(t),e||(this.loader=!0)}},formatTime(e){return e instanceof Date&&!isNaN(e)?e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"Invalid Date"},toggleEmojiPicker(){this.isEmojiPickerOpen=!this.isEmojiPickerOpen},toggleSearchPanel(){this.isSearchPanelOpen=!this.isSearchPanelOpen},addEmojiToMessage(e){this.newMessage+=e,this.isEmojiPickerOpen=!1},selectLastConversation(){const e=this.conversations.slice().sort(((e,t)=>new Date(e.updatedAt)-new Date(t.updatedAt)));e.length>0&&(this.selectedConversation=e[e.length-1],this.resetUnreadCount(this.selectedConversation._id),this.isCustomerPanelOpen=!1,this.$nextTick((()=>{this.scrollToEnd()})))},async selectConversation(e){this.selectedConversation=e,this.resetUnreadCount(e._id),this.isCustomerPanelOpen=!1,this.isAgentMode="agent"===this.selectedConversation.mode,this.$nextTick((()=>{this.scrollToEnd()}))},selectStatus(e){this.selectedStatus=e},async sendMessage(){if(this.newMessage.trim()&&this.selectedConversation){const t={id:this.selectedConversation.message.length+1,text:this.newMessage,time:(new Date).toLocaleTimeString(),sender:"agent",read:!0};this.selectedConversation.message.push(t),this.selectedConversation.lastUpdate=new Date,this.newMessage="",this.updateConversationPreview(this.selectedConversation);try{await(0,ct.xR)(this.selectedConversation._id,{message:this.selectedConversation.message,lastUpdate:this.selectedConversation.lastUpdate,preview:this.selectedConversation.preview}),this.$nextTick((()=>{this.scrollToEnd()}));const e={text:this.newMessage,timestamp:(new Date).toISOString()};await this.publishToConversationChannel(this.selectedConversation._id,"agent_reply",e)}catch(e){console.error(e)}}},updateConversationPreview(e){const t=e.message.slice().reverse().find((e=>"customer"===e.sender));e.preview=t?t.text:""},calculateUnreadCount(e){return e.message.filter((e=>"customer"===e.sender&&!e.read)).length},resetUnreadCount(e){const t=this.conversations.find((t=>t._id===e));t&&(t.message.forEach((e=>{"customer"===e.sender&&(e.read=!0)})),t.unreadCount=0)},scrollToEnd(){const e=this.$refs.chatWindow;e&&(e.scrollTop=e.scrollHeight)},async resolveConversation(){if(this.selectedConversation){this.selectedConversation.status="resolved";try{await(0,ct.xR)(this.selectedConversation._id,{status:"resolved"}),this.selectStatus("resolved")}catch(e){console.error(e),this.selectedConversation.status="open"}}},toggleCustomerPanel(){this.isCustomerPanelOpen=!this.isCustomerPanelOpen},getInitials(e){return e.split(" ").map((e=>e[0])).join("")},addFile(){alert("Add file clicked!")},toggleFullscreen(){this.isFullscreen=!this.isFullscreen},async switchToAgentMode(){if(this.selectedConversation&&"bot"===this.selectedConversation.mode){this.selectedConversation.mode="agent";try{await(0,ct.xR)(this.selectedConversation._id,{mode:"agent"}),this.isAgentMode=!0}catch(e){console.error("Failed to switch to agent mode:",e),this.selectedConversation.mode="bot"}}},getStatusCount(e){return"all"===e?this.conversations.length:"unassigned"===e?this.unassignedCount:"assigned"===e?this.assignedCount:"resolved"===e?this.resolvedCount:0},getStatusLabel(e){const t={unassigned:"à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢",assigned:"à¹„à¸”à¹‰à¸£à¸±à¸šà¸¡à¸­à¸šà¸«à¸¡à¸²à¸¢à¹à¸¥à¹‰à¸§",resolved:"à¹à¸à¹‰à¹„à¸‚à¹à¸¥à¹‰à¸§",all:"à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”"};return t[e]||e},getStatusClass(e){const t={unassigned:"bg-yellow-100 text-yellow-800",assigned:"bg-green-100 text-green-800",resolved:"bg-red-100 text-red-800"};return t[e]||"bg-gray-100 text-gray-800"},toggleMobileSidebar(){this.showMobileSidebar=!this.showMobileSidebar},selectStatusAndCloseMobile(e){this.selectStatus(e),this.toggleMobileSidebar()}},watch:{conversations:{handler(e){e.forEach((e=>{if(this.selectedConversation&&this.selectedConversation._id!==e._id){const t=e.message[e.message.length-1];t&&"agent"!==t.sender&&(e.unreadCount=this.calculateUnreadCount(e),this.updateConversationPreview(e))}}))},deep:!0},selectedConversation:{handler(e,t){t&&this.unsubscribeFromConversationChannel(t._id),e&&e._id&&this.subscribeToConversationChannel(e._id)},immediate:!0}}};const ht=(0,lt.A)(gt,[["render",et],["__scopeId","data-v-4c1bf625"]]);var vt=ht,xt={name:"AdminList",components:{List:vt},data(){return{login:st.A.get("session","login"),manualHeaderHeight:216}},computed:{dynamicHeaderHeight(){const e=null!==document.querySelector(".topbar"),t=null!==document.querySelector(".breadcrumb");let s=80;return e&&(s+=40),t&&(s+=40),s},customContainerHeight(){return`calc(100vh - ${this.manualHeaderHeight}px)`}},methods:{showAlert(){this.$swal("Hello Vue world!!!")},updateHeaderHeight(e){this.manualHeaderHeight=e}},setup(){const e=(0,o.lq)(),t=e.meta.title;(0,r.K7)(t)}};const bt=(0,lt.A)(xt,[["render",n]]);var mt=bt},77160:function(e,t,s){s.d(t,{k:function(){return a}});const a=async e=>{const t="AIzaSyB_DNNNAbBpaQ41rKHgDeL-zzGpQmjcRH4",s=`https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent?key=${t}`,a={"Content-Type":"application/json"},n=JSON.stringify({contents:[{role:"user",parts:[{text:e}]}]});try{const e=await fetch(s,{method:"POST",headers:a,body:n}),t=await e.json();if(e.ok){const e=t.candidates[0]?.content.parts[0]?.text.trim();return e||"Sorry, I couldn't generate a response."}return console.error("Error generating message:",t),"Sorry, I couldn't generate a response."}catch(r){return console.error("Network error generating message:",r),"Sorry, I couldn't generate a response."}}},8605:function(e,t,s){s.d(t,{T$:function(){return g},bX:function(){return i},cK:function(){return c},me:function(){return d},xR:function(){return u}});var a=s(40475),n=s(40471);const r=new n.A(!1),o=a.A.get("configs"),l=a.A.get("session"),i=async()=>{const e=await r.POST("conversation/query",{method:"find",args:[{$and:[{unit:l.current._id}]}]},o.key);if(200===e.status)return e.data;throw new Error("Failed to fetch conversations")},d=async e=>{const t=await r.GET(`conversation/${e}`,o.key);if(200===t.status)return t.data;throw new Error(`Failed to fetch conversation with ID ${e}`)},c=async e=>{const t=await r.POST("conversation",{data:{...e,unit:l.current._id}},o.key);if(200===t.status)return t.data;throw new Error("Failed to create conversation")},u=async(e,t)=>{t._id&&delete t._id;const s=await r.PUT(`conversation/${e}`,{data:t},o.key);if(200===s.status)return s.data;throw new Error(`Failed to update conversation with ID ${e}`)},g=async(e,t,s)=>{try{const a=await d(e);if(a){a.sender=t,s&&(a.preview=s);const n=await u(e,{sender:a.sender,preview:a.preview,updatedAt:new Date});return n}throw new Error(`Conversation with ID ${e} not found`)}catch(a){throw console.error("Error updating sender in conversation:",a.message),a}}}}]);
//# sourceMappingURL=3404.9c8c38a9.js.map