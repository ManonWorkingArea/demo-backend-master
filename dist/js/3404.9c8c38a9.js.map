{"version":3,"file":"js/3404.9c8c38a9.js","mappings":"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","sources":["webpack://node-backend/./src/extensions/modules/system/livesupport/view/Support.vue","webpack://node-backend/./src/extensions/modules/system/livesupport/component/Support.vue","webpack://node-backend/./src/extensions/modules/system/livesupport/component/EmojiPicker.vue","webpack://node-backend/./src/extensions/modules/system/livesupport/component/EmojiPicker.vue?536b","webpack://node-backend/./src/extensions/modules/system/livesupport/component/Support.vue?09e8","webpack://node-backend/./src/extensions/modules/system/livesupport/view/Support.vue?54e6","webpack://node-backend/./src/extensions/modules/system/livesupport/component/ai.js","webpack://node-backend/./src/extensions/modules/system/livesupport/component/conversation.js"],"sourcesContent":["<script>\nimport {useTitle} \tfrom 'vue-page-title';\nimport {useRoute} \tfrom 'vue-router'\nimport List \t\tfrom '../component/Support';\nimport storageManager from '@/plugins/storage';\nexport default {\n\tname: 'AdminList',\n\tcomponents: {\n\t\tList\n\t},\n\tdata() {\n\t\treturn {\n\t\tlogin: storageManager.get('session','login'),\n\t\t// กำหนดความสูงของ header แบบ manual\n\t\tmanualHeaderHeight: 216, // ปรับค่านี้ตามต้องการ\n\t\t}\n\t},\n\tcomputed: {\n\t\t// คำนวณความสูงแบบ dynamic\n\t\tdynamicHeaderHeight() {\n\t\t\t// ตัวอย่าง: ตรวจสอบว่ามี topbar หรือไม่\n\t\t\tconst hasTopbar = document.querySelector('.topbar') !== null;\n\t\t\tconst hasBreadcrumb = document.querySelector('.breadcrumb') !== null;\n\t\t\t\n\t\t\tlet height = 80; // ความสูงพื้นฐาน\n\t\t\tif (hasTopbar) height += 40;\n\t\t\tif (hasBreadcrumb) height += 40;\n\t\t\t\n\t\t\treturn height;\n\t\t},\n\t\t\n\t\t// กำหนดความสูงทั้งหมดแบบ manual\n\t\tcustomContainerHeight() {\n\t\t\treturn `calc(100vh - ${this.manualHeaderHeight}px)`;\n\t\t}\n\t},\n\tmethods: {\n\t\tshowAlert() {\n\t\tthis.$swal('Hello Vue world!!!');\n\t\t},\n\t\t\n\t\t// Method สำหรับปรับความสูงแบบ manual\n\t\tupdateHeaderHeight(newHeight) {\n\t\t\tthis.manualHeaderHeight = newHeight;\n\t\t}\n\t},\n\tsetup() {\n        const route     = useRoute();\n        const routeName = route.meta.title;\n        useTitle(routeName);\n    },\n};\n</script>\n\n<template>\n<!-- ตัวอย่างการใช้งานแบบ Manual -->\n\n<!-- 1. กำหนดความสูงของ header แบบ manual -->\n<List v-if=\"this.login\" :header-height=\"manualHeaderHeight\"/>\n\n<!-- 2. ใช้ computed property -->\n<!-- <List v-if=\"this.login\" :header-height=\"dynamicHeaderHeight\"/> -->\n\n<!-- 3. กำหนดความสูงทั้งหมดแบบ manual -->\n<!-- <List v-if=\"this.login\" :custom-height=\"customContainerHeight\"/> -->\n\n<!-- 4. กำหนดค่าตายตัว -->\n<!-- <List v-if=\"this.login\" :header-height=\"140\"/> -->\n\n<!-- 5. ใช้ calc แบบ manual -->\n<!-- <List v-if=\"this.login\" custom-height=\"calc(100vh - 160px)\"/> -->\n\n<!-- 6. รวมหลายตัวเลือก -->\n<!-- <List v-if=\"this.login\" \n      header-type=\"full-admin\" \n      :header-height=\"manualHeaderHeight\"\n      custom-class=\"manual-support\"/> -->\n\n<!-- Controls สำหรับปรับความสูงแบบ manual (สำหรับ testing) -->\n<!-- \n<div v-if=\"this.login\" class=\"p-4 bg-gray-100 mb-4\">\n  <h3>Manual Header Height Control</h3>\n  <input \n    type=\"range\" \n    min=\"60\" \n    max=\"200\" \n    v-model=\"manualHeaderHeight\"\n    class=\"w-full\"\n  />\n  <p>Current Height: {{ manualHeaderHeight }}px</p>\n  <button @click=\"updateHeaderHeight(80)\" class=\"btn\">80px</button>\n  <button @click=\"updateHeaderHeight(120)\" class=\"btn\">120px</button>\n  <button @click=\"updateHeaderHeight(160)\" class=\"btn\">160px</button>\n</div>\n-->\n</template>","<template>\n  <div class=\"bg-gray-50 flex overflow-hidden support-container\" \n       :class=\"[\n         headerType && `with-${headerType}`,\n         customClass\n       ]\"\n       :style=\"customHeight ? { height: customHeight, maxHeight: customHeight } : {}\">\n    <!-- Sidebar -->\n    <div class=\"hidden lg:flex lg:w-64 lg:flex-col\">\n      <div class=\"flex flex-col flex-grow bg-white border-r border-gray-200 h-full\">\n        <!-- Sidebar Header -->\n        <div class=\"flex items-center justify-between px-4 py-4 border-b border-gray-200 flex-shrink-0\">\n          <h1 class=\"text-lg font-semibold text-gray-900\">Live Support</h1>\n          <button \n            @click=\"loadConversations\" \n            class=\"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors duration-200\"\n            title=\"รีเฟรชการสนทนา\"\n          >\n            <i class=\"fas fa-sync-alt text-sm\"></i>\n          </button>\n        </div>\n\n        <!-- Quick Stats -->\n        <div class=\"px-4 py-3 border-b border-gray-200\">\n          <h3 class=\"text-sm font-medium text-gray-700 mb-2\">สถิติรวม</h3>\n          <div class=\"space-y-1\">\n            <div class=\"flex items-center justify-between p-2 bg-blue-50 rounded-lg stats-card\">\n              <div class=\"flex items-center gap-2\">\n                <div class=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                <span class=\"text-xs text-gray-700\">การสนทนาทั้งหมด</span>\n              </div>\n              <span class=\"text-xs font-semibold text-blue-600\">{{ conversations.length }}</span>\n            </div>\n            <div class=\"flex items-center justify-between p-2 bg-yellow-50 rounded-lg stats-card\">\n              <div class=\"flex items-center gap-2\">\n                <div class=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n                <span class=\"text-xs text-gray-700\">ยังไม่ได้รับมอบหมาย</span>\n              </div>\n              <span class=\"text-xs font-semibold text-yellow-600\">{{ unassignedCount }}</span>\n            </div>\n            <div class=\"flex items-center justify-between p-2 bg-green-50 rounded-lg stats-card\">\n              <div class=\"flex items-center gap-2\">\n                <div class=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                <span class=\"text-xs text-gray-700\">ได้รับมอบหมายแล้ว</span>\n              </div>\n              <span class=\"text-xs font-semibold text-green-600\">{{ assignedCount }}</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- Navigation Menu -->\n        <div class=\"px-4 py-3 border-b border-gray-200\">\n          <h3 class=\"text-sm font-medium text-gray-700 mb-2\">สถานะ</h3>\n          <nav class=\"space-y-1\">\n            <button \n              v-for=\"status in sidebarMenuItems\" \n              :key=\"status.value\"\n              @click=\"selectStatusAndCloseMobile(status.value)\" \n              class=\"w-full flex items-center gap-3 px-3 py-2 text-xs rounded-lg transition-colors duration-200 sidebar-menu-item\"\n              :class=\"{ \n                'bg-blue-100 text-blue-700 font-medium active': selectedStatus === status.value,\n                'text-gray-600 hover:bg-gray-100 hover:text-gray-900': selectedStatus !== status.value\n              }\"\n            >\n              <i :class=\"status.icon\" class=\"text-xs w-3\"></i>\n              <span class=\"flex-1 text-left\">{{ status.label }}</span>\n              <span \n                v-if=\"getStatusCount(status.value) > 0\" \n                class=\"px-1.5 py-0.5 text-[10px] rounded-full status-badge\"\n                :class=\"{ \n                  'bg-blue-200 text-blue-800': selectedStatus === status.value,\n                  'bg-gray-200 text-gray-600': selectedStatus !== status.value\n                }\"\n              >\n                {{ getStatusCount(status.value) }}\n              </span>\n            </button>\n          </nav>\n        </div>\n\n        <!-- Quick Actions -->\n        <div class=\"px-4 py-3 border-b border-gray-200 flex-shrink-0\">\n          <h3 class=\"text-sm font-medium text-gray-700 mb-2\">การดำเนินการ</h3>\n          <div class=\"space-y-1\">\n            <button \n              @click=\"loadConversations\"\n              class=\"w-full flex items-center gap-3 px-3 py-2 text-xs text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200\"\n            >\n              <i class=\"fas fa-sync-alt text-xs w-3\"></i>\n              <span>รีเฟรช</span>\n            </button>\n            <button \n              @click=\"toggleFullscreen\"\n              class=\"w-full flex items-center gap-3 px-3 py-2 text-xs text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200\"\n            >\n              <i class=\"fas fa-expand text-xs w-3\"></i>\n              <span>{{ isFullscreen ? 'ออกจากเต็มจอ' : 'เต็มจอ' }}</span>\n            </button>\n          </div>\n        </div>\n\n        <!-- User Info -->\n        <div class=\"mt-auto px-4 py-3 flex-shrink-0\">\n          <div class=\"flex items-center gap-3 p-2 bg-gray-50 rounded-lg\">\n            <div class=\"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center\">\n              <i class=\"fas fa-user text-white text-xs\"></i>\n            </div>\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-xs font-medium text-gray-900 truncate\">{{ session?.current?.name || 'ผู้ใช้' }}</p>\n              <p class=\"text-[10px] text-gray-500\">เจ้าหน้าที่ Support</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Main Content -->\n    <div class=\"flex-1 flex flex-col min-w-0 h-full\" :class=\"{ 'fixed inset-0 z-50': isFullscreen }\">\n      <!-- Mobile Header -->\n      <div class=\"lg:hidden bg-white border-b border-gray-200 px-4 py-2 flex-shrink-0\">\n        <div class=\"flex items-center justify-between\">\n          <h1 class=\"text-base font-semibold text-gray-900\">Live Support</h1>\n          <button \n            @click=\"toggleMobileSidebar\" \n            class=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <i class=\"fas fa-bars\"></i>\n          </button>\n        </div>\n      </div>\n\n      <!-- Header Section -->\n      <div class=\"bg-white border-b border-gray-200 px-4 py-2 flex-shrink-0\">\n        <div class=\"flex flex-col md:flex-row md:items-center md:justify-between gap-2\">\n          <!-- Search Input -->\n          <div class=\"flex-1 max-w-md\">\n            <div class=\"relative\">\n              <i class=\"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm\"></i>\n              <input \n                type=\"text\" \n                v-model=\"conversationSearch\" \n                placeholder=\"ค้นหาการสนทนา...\" \n                class=\"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm\"\n              />\n            </div>\n          </div>\n\n          <!-- Action Buttons -->\n          <div class=\"flex items-center gap-2\">\n            <button \n              v-if=\"selectedConversation\" \n              @click=\"resolveConversation\" \n              :disabled=\"selectedConversation?.status === 'resolved'\"\n              class=\"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-medium px-3 py-1.5 rounded-lg transition-colors duration-200 text-xs flex items-center gap-1\"\n            >\n              <i class=\"fas fa-check text-xs\"></i>\n              แก้ไขแล้ว\n            </button>\n            <button \n              v-if=\"selectedConversation?.mode === 'bot'\" \n              @click=\"switchToAgentMode\"\n              class=\"bg-orange-600 hover:bg-orange-700 text-white font-medium px-3 py-1.5 rounded-lg transition-colors duration-200 text-xs flex items-center gap-1\"\n            >\n              <i class=\"fas fa-user-tie text-xs\"></i>\n              เปลี่ยนเป็นเจ้าหน้าที่\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <!-- Status Tabs (Mobile) -->\n      <div class=\"lg:hidden bg-white border-b border-gray-200 flex-shrink-0\">\n        <div class=\"px-4 py-2\">\n          <select \n            v-model=\"selectedStatus\" \n            @change=\"selectStatus(selectedStatus)\"\n            class=\"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            <option \n              v-for=\"status in sidebarMenuItems\" \n              :key=\"status.value\" \n              :value=\"status.value\"\n            >\n              {{ status.label }} ({{ getStatusCount(status.value) }})\n            </option>\n          </select>\n        </div>\n      </div>\n\n      <!-- Main Chat Area -->\n      <div class=\"flex-1 flex overflow-hidden\">\n        <!-- Conversation List -->\n        <div class=\"w-full lg:w-80 bg-white border-r border-gray-200 flex flex-col h-full\">\n          <!-- Conversation Header -->\n          <div class=\"px-4 py-2 border-b border-gray-200 flex-shrink-0\">\n            <div class=\"flex items-center justify-between\">\n              <h3 class=\"font-medium text-gray-900 text-sm\">การสนทนา</h3>\n              <span class=\"text-xs text-gray-500\">{{ filteredConversationsBySearch.length }} รายการ</span>\n            </div>\n          </div>\n\n          <!-- Conversation List -->\n          <div class=\"flex-1 overflow-y-auto\">\n            <div \n              v-for=\"conversation in filteredConversationsBySearch\" \n              :key=\"conversation._id\" \n              class=\"p-2 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors conversation-card\"\n              :class=\"{ 'bg-blue-50 border-blue-200': selectedConversation?._id === conversation._id }\"\n              @click=\"selectConversation(conversation)\"\n            >\n              <div class=\"flex items-center gap-2\">\n                <!-- Avatar -->\n                <div class=\"w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0\">\n                  <span class=\"text-white text-xs font-medium\">{{ getInitials(conversation.sender) }}</span>\n                </div>\n\n                <!-- Content -->\n                <div class=\"flex-1 min-w-0\">\n                  <div class=\"flex items-center justify-between gap-2\">\n                    <div class=\"flex-1 min-w-0\">\n                      <h4 class=\"font-medium text-gray-900 text-xs truncate\">{{ conversation.sender }}</h4>\n                      <p class=\"text-gray-500 text-xs truncate\">{{ conversation.preview }}</p>\n                    </div>\n                    \n                    <div class=\"flex items-center gap-1 flex-shrink-0\">\n                      <span class=\"text-xs text-gray-400\">{{ formatTime(conversation.lastUpdate) }}</span>\n                      <span \n                        v-if=\"conversation.unreadCount > 0\" \n                        class=\"bg-red-500 text-white text-xs px-1 py-0.5 rounded-full min-w-[14px] text-center text-[10px] ml-1\"\n                      >\n                        {{ conversation.unreadCount }}\n                      </span>\n                    </div>\n                  </div>\n                  \n                  <!-- Status moved to bottom -->\n                  <div class=\"mt-1\">\n                    <span \n                      class=\"px-1.5 py-0.5 text-[9px] rounded-full\"\n                      :class=\"getStatusClass(conversation.status)\"\n                    >\n                      {{ getStatusLabel(conversation.status) }}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <!-- Empty State -->\n            <div v-if=\"filteredConversationsBySearch.length === 0\" class=\"text-center py-6\">\n              <i class=\"fas fa-comments text-gray-300 text-2xl mb-2\"></i>\n              <p class=\"text-gray-500 text-xs\">ไม่พบการสนทนาที่ตรงกับการค้นหา</p>\n            </div>\n          </div>\n        </div>\n\n        <!-- Chat Area -->\n        <div class=\"flex-1 flex flex-col bg-white h-full overflow-hidden\" v-if=\"selectedConversation\">\n          <!-- Chat Header -->\n          <div class=\"px-4 py-2 border-b border-gray-200 bg-gray-50 flex-shrink-0\">\n            <div class=\"flex items-center justify-between\">\n              <div class=\"flex items-center gap-3\">\n                <div class=\"w-7 h-7 bg-blue-500 rounded-full flex items-center justify-center\">\n                  <span class=\"text-white text-xs font-medium\">{{ getInitials(selectedConversation.sender) }}</span>\n                </div>\n                <div>\n                  <h3 class=\"font-medium text-gray-900 text-sm\">{{ selectedConversation.sender }}</h3>\n                  <p class=\"text-xs text-gray-500\">{{ selectedConversation.email || 'ไม่มีอีเมล' }}</p>\n                </div>\n              </div>\n              \n              <div class=\"flex items-center gap-2\">\n                <button \n                  @click=\"toggleSearchPanel\"\n                  class=\"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\"\n                >\n                  <i class=\"fas fa-search text-xs\"></i>\n                </button>\n                <button \n                  @click=\"toggleCustomerPanel\"\n                  class=\"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\"\n                >\n                  <i class=\"fas fa-info-circle text-xs\"></i>\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <!-- Search Panel -->\n          <div v-if=\"isSearchPanelOpen\" class=\"px-4 py-2 bg-yellow-50 border-b border-gray-200 flex-shrink-0\">\n            <div class=\"relative\">\n              <i class=\"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs\"></i>\n              <input \n                v-model=\"messageSearch\" \n                placeholder=\"ค้นหาข้อความ...\" \n                class=\"w-full pl-8 pr-4 py-1.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs\"\n              />\n            </div>\n          </div>\n\n          <!-- Messages -->\n          <div class=\"flex-1 overflow-y-auto p-3 space-y-2\" ref=\"chatWindow\">\n            <div \n              v-for=\"message in filteredMessagesBySearch\" \n              :key=\"message._id\" \n              class=\"flex chat-message\"\n              :class=\"message.sender === 'customer' ? 'justify-start' : 'justify-end'\"\n            >\n              <div \n                class=\"max-w-xs px-3 py-2 rounded-lg\"\n                :class=\"message.sender === 'customer' \n                  ? 'bg-gray-100 text-gray-900' \n                  : 'bg-blue-600 text-white'\"\n              >\n                <p class=\"text-xs\">{{ message.text }}</p>\n                <p class=\"text-[10px] mt-1 opacity-70\">{{ message.time }}</p>\n              </div>\n            </div>\n          </div>\n\n          <!-- Message Input -->\n          <div class=\"p-3 border-t border-gray-200 bg-gray-50 flex-shrink-0\">\n            <div class=\"flex items-center gap-2\">\n              <button \n                @click=\"toggleEmojiPicker\"\n                :disabled=\"selectedConversation.mode === 'bot'\"\n                class=\"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\"\n              >\n                <i class=\"fas fa-smile text-xs\"></i>\n              </button>\n              <button \n                @click=\"addFile\"\n                :disabled=\"selectedConversation.mode === 'bot'\"\n                class=\"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50\"\n              >\n                <i class=\"fas fa-paperclip text-xs\"></i>\n              </button>\n              <input \n                v-model=\"newMessage\" \n                placeholder=\"พิมพ์ข้อความ...\" \n                @keyup.enter=\"sendMessage\"\n                :disabled=\"selectedConversation.mode === 'bot'\"\n                class=\"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-xs disabled:bg-gray-100\"\n              />\n              <button \n                @click=\"sendMessage\"\n                :disabled=\"selectedConversation.mode === 'bot' || !newMessage.trim()\"\n                class=\"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white p-1.5 rounded-lg transition-colors\"\n              >\n                <i class=\"fas fa-paper-plane text-xs\"></i>\n              </button>\n            </div>\n          </div>\n\n          <!-- Emoji Picker -->\n          <EmojiPicker \n            :isOpen=\"isEmojiPickerOpen\" \n            @select-emoji=\"addEmojiToMessage\" \n            :disabled=\"selectedConversation.mode === 'bot'\"\n          />\n        </div>\n\n        <!-- No Conversation Selected -->\n        <div v-else class=\"flex-1 flex items-center justify-center bg-gray-50\">\n          <div class=\"text-center\">\n            <i class=\"fas fa-comments text-gray-300 text-4xl mb-3\"></i>\n            <h3 class=\"text-base font-medium text-gray-900 mb-2\">เลือกการสนทนา</h3>\n            <p class=\"text-gray-500 text-sm\">เลือกการสนทนาจากรายการเพื่อเริ่มต้น</p>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Customer Detail Side Panel -->\n    <div \n      v-if=\"isCustomerPanelOpen && selectedConversation\" \n      class=\"fixed inset-y-0 right-0 w-80 bg-white border-l border-gray-200 shadow-lg z-40 transform transition-transform duration-300\"\n      :class=\"{ 'translate-x-0': isCustomerPanelOpen, 'translate-x-full': !isCustomerPanelOpen }\"\n    >\n      <div class=\"flex flex-col h-full\">\n        <!-- Panel Header -->\n        <div class=\"px-4 py-3 border-b border-gray-200 bg-gray-50\">\n          <div class=\"flex items-center justify-between\">\n            <h3 class=\"font-medium text-gray-900\">ข้อมูลลูกค้า</h3>\n            <button \n              @click=\"toggleCustomerPanel\"\n              class=\"p-1 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors\"\n            >\n              <i class=\"fas fa-times text-sm\"></i>\n            </button>\n          </div>\n        </div>\n\n        <!-- Panel Content -->\n        <div class=\"flex-1 p-4 space-y-4\">\n          <div class=\"text-center\">\n            <div class=\"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-3\">\n              <span class=\"text-white text-xl font-medium\">{{ getInitials(selectedConversation.sender) }}</span>\n            </div>\n            <h4 class=\"font-medium text-gray-900\">{{ selectedConversation.sender }}</h4>\n          </div>\n\n          <div class=\"space-y-3\">\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">อีเมล</label>\n              <p class=\"text-sm text-gray-900\">{{ selectedConversation.email || 'ไม่มีข้อมูล' }}</p>\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">เบอร์โทรศัพท์</label>\n              <p class=\"text-sm text-gray-900\">{{ selectedConversation.phone || 'ไม่มีข้อมูล' }}</p>\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">ที่อยู่</label>\n              <p class=\"text-sm text-gray-900\">{{ selectedConversation.address || 'ไม่มีข้อมูล' }}</p>\n            </div>\n            <div>\n              <label class=\"block text-sm font-medium text-gray-700 mb-1\">สถานะ</label>\n              <span \n                class=\"inline-block px-2 py-1 text-xs rounded-full\"\n                :class=\"getStatusClass(selectedConversation.status)\"\n              >\n                {{ getStatusLabel(selectedConversation.status) }}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Mobile Sidebar Overlay -->\n    <div \n      v-if=\"showMobileSidebar\" \n      class=\"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50\"\n      @click=\"toggleMobileSidebar\"\n    >\n      <div \n        class=\"w-64 h-full bg-white transform transition-transform duration-300\"\n        @click.stop\n      >\n        <!-- Mobile Sidebar Content (same as desktop sidebar) -->\n        <div class=\"flex flex-col h-full\">\n          <!-- Sidebar Header -->\n          <div class=\"flex items-center justify-between px-4 py-4 border-b border-gray-200\">\n            <h1 class=\"text-lg font-semibold text-gray-900\">Live Support</h1>\n            <button \n              @click=\"toggleMobileSidebar\"\n              class=\"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors\"\n            >\n              <i class=\"fas fa-times\"></i>\n            </button>\n          </div>\n\n          <!-- Quick Stats -->\n          <div class=\"px-4 py-4 border-b border-gray-200\">\n            <h3 class=\"text-sm font-medium text-gray-700 mb-3\">สถิติรวม</h3>\n            <div class=\"space-y-2\">\n              <div class=\"flex items-center justify-between p-2 bg-blue-50 rounded-lg stats-card\">\n                <div class=\"flex items-center gap-2\">\n                  <div class=\"w-2 h-2 bg-blue-500 rounded-full\"></div>\n                  <span class=\"text-sm text-gray-700\">การสนทนาทั้งหมด</span>\n                </div>\n                <span class=\"text-sm font-semibold text-blue-600\">{{ conversations.length }}</span>\n              </div>\n              <div class=\"flex items-center justify-between p-2 bg-yellow-50 rounded-lg stats-card\">\n                <div class=\"flex items-center gap-2\">\n                  <div class=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n                  <span class=\"text-sm text-gray-700\">ยังไม่ได้รับมอบหมาย</span>\n                </div>\n                <span class=\"text-sm font-semibold text-yellow-600\">{{ unassignedCount }}</span>\n              </div>\n              <div class=\"flex items-center justify-between p-2 bg-green-50 rounded-lg stats-card\">\n                <div class=\"flex items-center gap-2\">\n                  <div class=\"w-2 h-2 bg-green-500 rounded-full\"></div>\n                  <span class=\"text-sm text-gray-700\">ได้รับมอบหมายแล้ว</span>\n                </div>\n                <span class=\"text-sm font-semibold text-green-600\">{{ assignedCount }}</span>\n              </div>\n            </div>\n          </div>\n\n          <!-- Navigation Menu -->\n          <div class=\"px-4 py-4 border-b border-gray-200\">\n            <h3 class=\"text-sm font-medium text-gray-700 mb-3\">สถานะ</h3>\n            <nav class=\"space-y-1\">\n              <button \n                v-for=\"status in sidebarMenuItems\" \n                :key=\"status.value\"\n                @click=\"selectStatusAndCloseMobile(status.value)\" \n                class=\"w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors duration-200 sidebar-menu-item\"\n                :class=\"{ \n                  'bg-blue-100 text-blue-700 font-medium active': selectedStatus === status.value,\n                  'text-gray-600 hover:bg-gray-100 hover:text-gray-900': selectedStatus !== status.value\n                }\"\n              >\n                <i :class=\"status.icon\" class=\"text-sm w-4\"></i>\n                <span class=\"flex-1 text-left\">{{ status.label }}</span>\n                <span \n                  v-if=\"getStatusCount(status.value) > 0\" \n                  class=\"px-2 py-1 text-xs rounded-full status-badge\"\n                  :class=\"{ \n                    'bg-blue-200 text-blue-800': selectedStatus === status.value,\n                    'bg-gray-200 text-gray-600': selectedStatus !== status.value\n                  }\"\n                >\n                  {{ getStatusCount(status.value) }}\n                </span>\n              </button>\n            </nav>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Overlay for customer panel -->\n    <div \n      v-if=\"isCustomerPanelOpen\" \n      class=\"fixed inset-0 bg-black bg-opacity-25 z-30\"\n      @click=\"toggleCustomerPanel\"\n    ></div>\n  </div>\n</template>\n\n<script>\n\nimport { getAblyChannel, subscribeToMessages, publishMessage } from '@/services/ably';\nimport storageManager from '@/plugins/storage';\nimport EmojiPicker from './EmojiPicker.vue'; // Import the EmojiPicker component\nimport { fetchConversations,updateConversation } from './conversation'; // Import the fetchConversations method\nimport { generateCustomMessage } from \"./ai\";\n\nexport default {\n  components: {\n    EmojiPicker\n  },\n  props: {\n    // ประเภทของ header layout\n    headerType: {\n      type: String,\n      default: null,\n      validator: value => ['topbar', 'breadcrumb', 'full-admin', null].includes(value)\n    },\n    // ความสูงของ header แบบกำหนดเอง\n    headerHeight: {\n      type: [Number, String],\n      default: null\n    },\n    // ความสูงทั้งหมดแบบกำหนดเอง\n    customHeight: {\n      type: String,\n      default: null\n    },\n    // CSS class เพิ่มเติม\n    customClass: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      userInput: \"\",\n      generatedMessage: \"\",\n\n      loader: true,\n      title: 'Live Support Chat',\n      conversationSearch: '',\n      messageSearch: '',\n      isSearchPanelOpen: false,\n      conversations: [],\n      selectedConversation: null,\n      selectedStatus: 'all',\n      newMessage: '',\n      isCustomerPanelOpen: false,\n      isFullscreen: false,\n      isEmojiPickerOpen: false,\n      isAgentMode: false,\n      session: storageManager.get('session'),\n      showMobileSidebar: false,\n      sidebarMenuItems: [\n        { value: 'all', label: 'ทั้งหมด', icon: 'fas fa-list' },\n        { value: 'unassigned', label: 'ยังไม่ได้รับมอบหมาย', icon: 'fas fa-clock' },\n        { value: 'assigned', label: 'ได้รับมอบหมายแล้ว', icon: 'fas fa-user-check' },\n        { value: 'resolved', label: 'แก้ไขแล้ว', icon: 'fas fa-check-circle' }\n      ],\n    };\n  },\n  created() {\n    this.loadConversations();\n  },\n  computed: {\n    filteredConversationsBySearch() {\n      if (!this.conversationSearch) {\n        return this.sortedFilteredConversations;\n      }\n      return this.sortedFilteredConversations.filter(conversation => {\n        return (\n          conversation.sender.toLowerCase().includes(this.conversationSearch.toLowerCase()) ||\n          conversation.preview.toLowerCase().includes(this.conversationSearch.toLowerCase())\n        );\n      });\n    },\n    filteredMessagesBySearch() {\n      if (!this.selectedConversation || !this.messageSearch) {\n        return this.selectedConversation ? this.selectedConversation.message : [];\n      }\n      return this.selectedConversation.message.filter(message => {\n        return message.text.toLowerCase().includes(this.messageSearch.toLowerCase());\n      });\n    },\n    sortedFilteredConversations() {\n      return this.filteredConversations\n        .slice()\n        .sort((a, b) => {\n          if (b.unreadCount === a.unreadCount) {\n            return b.lastUpdate - a.lastUpdate;\n          }\n          return b.unreadCount - a.unreadCount;\n        });\n    },\n    filteredConversations() {\n      if (this.selectedStatus === 'all') {\n        return this.conversations;\n      }\n      return this.conversations.filter((conversation) => conversation.status === this.selectedStatus);\n    },\n    unassignedCount() {\n      return this.conversations.filter(conv => conv.status === 'unassigned').length;\n    },\n    assignedCount() {\n      return this.conversations.filter(conv => conv.status === 'assigned').length;\n    },\n    resolvedCount() {\n      return this.conversations.filter(conv => conv.status === 'resolved').length;\n    }\n  },\n  mounted() {\n    this.subscribeToHostChannel(this.session.current._id, this.handleHostMessages);\n    this.calculateHeaderHeight();\n    window.addEventListener('resize', this.calculateHeaderHeight);\n  },\n  beforeUnmount() {\n    window.removeEventListener('resize', this.calculateHeaderHeight);\n  },\n  methods: {\n    calculateHeaderHeight() {\n      // ถ้ามี customHeight หรือ headerHeight ที่กำหนดไว้แล้ว ไม่ต้องคำนวณ\n      if (this.customHeight || this.headerHeight) {\n        if (this.headerHeight) {\n          const height = typeof this.headerHeight === 'number' \n            ? `${this.headerHeight}px` \n            : this.headerHeight;\n          document.documentElement.style.setProperty('--header-height', height);\n        }\n        return;\n      }\n      \n      // ตรวจจับความสูงของ header elements ที่อยู่ด้านบน\n      let headerHeight = 0;\n      \n      // ค้นหา header elements ทั่วไป\n      const possibleHeaders = [\n        'header',\n        '.header',\n        '.navbar',\n        '.topbar',\n        '.breadcrumb',\n        '.access-bar',\n        '[class*=\"header\"]',\n        '[class*=\"navbar\"]',\n        '[class*=\"topbar\"]',\n        '[role=\"banner\"]'\n      ];\n      \n      possibleHeaders.forEach(selector => {\n        const elements = document.querySelectorAll(selector);\n        elements.forEach(element => {\n          if (this.isElementAbove(element)) {\n            headerHeight += element.offsetHeight;\n          }\n        });\n      });\n      \n      // ถ้าไม่พบ header ให้ใช้ค่าเริ่มต้นตาม headerType\n      if (headerHeight === 0) {\n        switch (this.headerType) {\n          case 'topbar':\n            headerHeight = 120;\n            break;\n          case 'breadcrumb':\n            headerHeight = 140;\n            break;\n          case 'full-admin':\n            headerHeight = 160;\n            break;\n          default:\n            headerHeight = window.innerWidth <= 768 ? 56 : 80;\n        }\n      }\n      \n      // เพิ่ม padding เล็กน้อยเพื่อความปลอดภัย\n      headerHeight += 8;\n      \n      // ตั้งค่า CSS variable\n      document.documentElement.style.setProperty('--header-height', `${headerHeight}px`);\n      \n      // Log สำหรับ debug\n      console.log(`Support Component: Calculated header height = ${headerHeight}px`);\n    },\n    \n    isElementAbove(element) {\n      // ตรวจสอบว่า element อยู่ด้านบนของคอมโพเนนต์นี้หรือไม่\n      const supportElement = this.$el;\n      if (!supportElement) return false;\n      \n      const elementRect = element.getBoundingClientRect();\n      const supportRect = supportElement.getBoundingClientRect();\n      \n      return elementRect.bottom <= supportRect.top;\n    },\n    async getCustomMessage() {\n      if (this.userInput.trim() !== \"\") {\n        try {\n          this.generatedMessage = await generateCustomMessage(this.userInput);\n        } catch (error) {\n          console.error(\"Error generating message:\", error);\n          this.generatedMessage = \"Sorry, an error occurred.\";\n        }\n      }\n    },\n    // Ably Socket Function\n    unsubscribeFromConversationChannel(conversationId) {\n      const conversationChannel = getAblyChannel(`conversation-${conversationId}`);\n      if (conversationChannel) {\n        conversationChannel.unsubscribe();\n      } else {\n        console.warn(`Conversation channel not found: conversation-${conversationId}`);\n      }\n    },\n    subscribeToHostChannel(hostId) {\n      const hostChannel = getAblyChannel(`host-${hostId}`);\n      subscribeToMessages(hostChannel, (msg) => {\n        this.handleHostMessages(msg);\n      });\n    },\n    subscribeToConversationChannel(conversationId) {\n      const conversationChannel = getAblyChannel(`conversation-${conversationId}`);\n      subscribeToMessages(conversationChannel, (msg) => {\n        this.handleConversationMessages(msg);\n      });\n    },\n    handleHostMessages(msg) {\n      if (msg.data && msg.data.type === 'conversation_update') {\n        this.loadConversations(true);\n      }\n    },\n    handleConversationMessages(msg) {\n      if (msg.data && msg.data.type === 'client_reply') {\n        //this.addAgentMessage(msg.data.message);\n      }\n    },\n    async publishToHostChannel(messageType, messageData) {\n      const hostChannel = getAblyChannel(`host-${this.session.host_id}`);\n      try {\n        await publishMessage(hostChannel, {\n          type: messageType,\n          data: messageData,\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async publishToConversationChannel(conversationId, messageType, messageData) {\n      const conversationChannel = getAblyChannel(`conversation-${conversationId}`);\n      try {\n        await publishMessage(conversationChannel, {\n          type: messageType,\n          data: messageData,\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    // Ably Socket Function\n    async loadConversations(silent=false) {\n      try {\n        if(!silent) { this.loader = false; }\n        const data = await fetchConversations();\n        this.conversations = data.map(conv => ({\n          ...conv,\n          lastUpdate: new Date(conv.lastUpdate)\n        })); \n        this.selectLastConversation();\n        if(!silent) { this.loader = true; }\n      } catch (error) {\n        console.error(error);\n        if(!silent) { this.loader = true; }\n      }\n    },\n    formatTime(date) {\n      return date instanceof Date && !isNaN(date)\n        ? date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n        : 'Invalid Date';\n    },\n    toggleEmojiPicker() {\n      this.isEmojiPickerOpen = !this.isEmojiPickerOpen;\n    },\n    toggleSearchPanel() {\n      this.isSearchPanelOpen = !this.isSearchPanelOpen;\n    },\n    addEmojiToMessage(emoji) {\n      this.newMessage += emoji;\n      this.isEmojiPickerOpen = false;\n    },\n    selectLastConversation() {\n      const sortedConversations = this.conversations\n        .slice()\n        .sort((a, b) => new Date(a.updatedAt) - new Date(b.updatedAt));\n      if (sortedConversations.length > 0) {\n        this.selectedConversation = sortedConversations[sortedConversations.length - 1];\n        this.resetUnreadCount(this.selectedConversation._id);\n        this.isCustomerPanelOpen = false;\n        this.$nextTick(() => {\n          this.scrollToEnd();\n        });\n      }\n    },\n    async selectConversation(conversation) {\n      this.selectedConversation = conversation;\n      this.resetUnreadCount(conversation._id);\n      this.isCustomerPanelOpen = false;\n      this.isAgentMode = this.selectedConversation.mode === 'agent';\n      this.$nextTick(() => {\n        this.scrollToEnd();\n      });\n    },\n    selectStatus(status) {\n      this.selectedStatus = status;\n    },\n    async sendMessage() {\n      if (this.newMessage.trim() && this.selectedConversation) {\n        const newMessage = {\n          id: this.selectedConversation.message.length + 1,\n          text: this.newMessage,\n          time: new Date().toLocaleTimeString(),\n          sender: 'agent',\n          read: true,\n        };\n\n        this.selectedConversation.message.push(newMessage);\n        this.selectedConversation.lastUpdate = new Date();\n        this.newMessage = '';\n\n        this.updateConversationPreview(this.selectedConversation);\n\n        try {\n          await updateConversation(this.selectedConversation._id, {\n            message: this.selectedConversation.message,\n            lastUpdate: this.selectedConversation.lastUpdate,\n            preview: this.selectedConversation.preview\n          });\n\n          this.$nextTick(() => {\n            this.scrollToEnd();\n          });\n\n          const messageData = {\n            text: this.newMessage,\n            timestamp: new Date().toISOString(),\n          };\n          await this.publishToConversationChannel(this.selectedConversation._id, 'agent_reply', messageData);\n\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    },\n    updateConversationPreview(conversation) {\n      const lastCustomerMessage = conversation.message\n        .slice()\n        .reverse()\n        .find((msg) => msg.sender === 'customer');\n      conversation.preview = lastCustomerMessage ? lastCustomerMessage.text : '';\n    },\n    calculateUnreadCount(conversation) {\n      return conversation.message.filter((msg) => msg.sender === 'customer' && !msg.read).length;\n    },\n    resetUnreadCount(conversationId) {\n      const conversation = this.conversations.find((c) => c._id === conversationId);\n      if (conversation) {\n        conversation.message.forEach((msg) => {\n          if (msg.sender === 'customer') {\n            msg.read = true;\n          }\n        });\n        conversation.unreadCount = 0;\n      }\n    },\n    scrollToEnd() {\n      const chatWindow = this.$refs.chatWindow;\n      if (chatWindow) {\n        chatWindow.scrollTop = chatWindow.scrollHeight;\n      }\n    },\n    async resolveConversation() {\n      if (this.selectedConversation) {\n        this.selectedConversation.status = 'resolved';\n        \n        try {\n          await updateConversation(this.selectedConversation._id, {\n            status: 'resolved',\n          });\n          this.selectStatus('resolved');\n        } catch (error) {\n          console.error(error);\n          this.selectedConversation.status = 'open';\n        }\n      }\n    },\n    toggleCustomerPanel() {\n      this.isCustomerPanelOpen = !this.isCustomerPanelOpen;\n    },\n    getInitials(name) {\n      return name\n        .split(' ')\n        .map((n) => n[0])\n        .join('');\n    },\n    addFile() {\n      alert('Add file clicked!');\n    },\n    toggleFullscreen() {\n      this.isFullscreen = !this.isFullscreen;\n    },\n    async switchToAgentMode() {\n      if (this.selectedConversation && this.selectedConversation.mode === 'bot') {\n        this.selectedConversation.mode = 'agent';\n\n        try {\n          await updateConversation(this.selectedConversation._id, { mode: 'agent' });\n          this.isAgentMode = true;\n        } catch (error) {\n          console.error('Failed to switch to agent mode:', error);\n          this.selectedConversation.mode = 'bot';\n        }\n      }\n    },\n    getStatusCount(status) {\n      if (status === 'all') return this.conversations.length;\n      if (status === 'unassigned') return this.unassignedCount;\n      if (status === 'assigned') return this.assignedCount;\n      if (status === 'resolved') return this.resolvedCount;\n      return 0;\n    },\n    getStatusLabel(status) {\n      const statusLabels = {\n        unassigned: 'ยังไม่ได้รับมอบหมาย',\n        assigned: 'ได้รับมอบหมายแล้ว',\n        resolved: 'แก้ไขแล้ว',\n        all: 'ทั้งหมด'\n      };\n      return statusLabels[status] || status;\n    },\n    getStatusClass(status) {\n      const statusClasses = {\n        unassigned: 'bg-yellow-100 text-yellow-800',\n        assigned: 'bg-green-100 text-green-800',\n        resolved: 'bg-red-100 text-red-800',\n      };\n      return statusClasses[status] || 'bg-gray-100 text-gray-800';\n    },\n    toggleMobileSidebar() {\n      this.showMobileSidebar = !this.showMobileSidebar;\n    },\n    selectStatusAndCloseMobile(status) {\n      this.selectStatus(status);\n      this.toggleMobileSidebar();\n    },\n  },\n  watch: {\n    conversations: {\n      handler(newConversations) {\n        newConversations.forEach((conversation) => {\n          if (this.selectedConversation && this.selectedConversation._id !== conversation._id) {\n            const lastMessage = conversation.message[conversation.message.length - 1];\n            if (lastMessage && lastMessage.sender !== 'agent') {\n              conversation.unreadCount = this.calculateUnreadCount(conversation);\n              this.updateConversationPreview(conversation);\n            }\n          }\n        });\n      },\n      deep: true,\n    },\n    selectedConversation: {\n      handler(newConversation, oldConversation) {\n        if (oldConversation) {\n          this.unsubscribeFromConversationChannel(oldConversation._id);\n        }\n        if (newConversation && newConversation._id) {\n          this.subscribeToConversationChannel(newConversation._id);\n        }\n      },\n      immediate: true,\n    },\n  },\n};\n</script>\n\n\n<style scoped>\n.line-clamp-2 {\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n/* Custom scrollbar */\n.overflow-y-auto::-webkit-scrollbar {\n  width: 6px;\n}\n\n.overflow-y-auto::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 3px;\n}\n\n.overflow-y-auto::-webkit-scrollbar-thumb {\n  background: #c1c1c1;\n  border-radius: 3px;\n}\n\n.overflow-y-auto::-webkit-scrollbar-thumb:hover {\n  background: #a8a8a8;\n}\n\n/* Smooth transitions */\n.transition-all {\n  transition: all 0.2s ease-in-out;\n}\n\n.transition-colors {\n  transition: color 0.2s ease-in-out, background-color 0.2s ease-in-out;\n}\n\n.transition-transform {\n  transition: transform 0.3s ease-in-out;\n}\n\n/* Focus states */\n.focus\\:ring-2:focus {\n  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);\n}\n\n/* Hover effects */\n.hover\\:shadow-md:hover {\n  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n}\n\n/* Sidebar styles */\n.sidebar-menu-item {\n  position: relative;\n  overflow: hidden;\n}\n\n.sidebar-menu-item::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 3px;\n  height: 100%;\n  background: transparent;\n  transition: background-color 0.2s ease-in-out;\n}\n\n.sidebar-menu-item.active::before {\n  background: #3b82f6;\n}\n\n/* Mobile sidebar animation */\n.mobile-sidebar-enter {\n  transform: translateX(-100%);\n}\n\n.mobile-sidebar-enter-active {\n  transition: transform 0.3s ease-out;\n}\n\n.mobile-sidebar-enter-to {\n  transform: translateX(0);\n}\n\n.mobile-sidebar-leave {\n  transform: translateX(0);\n}\n\n.mobile-sidebar-leave-active {\n  transition: transform 0.3s ease-in;\n}\n\n.mobile-sidebar-leave-to {\n  transform: translateX(-100%);\n}\n\n/* Stats cards hover effect */\n.stats-card {\n  transition: all 0.2s ease-in-out;\n}\n\n.stats-card:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* Button hover effects */\n.btn-primary {\n  background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);\n  transition: all 0.2s ease-in-out;\n}\n\n.btn-primary:hover {\n  background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);\n}\n\n/* Conversation card animations */\n.conversation-card {\n  transition: all 0.2s ease-in-out;\n  position: relative;\n  overflow: hidden;\n}\n\n.conversation-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);\n  transition: left 0.5s ease-in-out;\n}\n\n.conversation-card:hover::before {\n  left: 100%;\n}\n\n.conversation-card:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n/* Status badges */\n.status-badge {\n  position: relative;\n  overflow: hidden;\n}\n\n.status-badge::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n  transition: left 0.3s ease-in-out;\n}\n\n.status-badge:hover::before {\n  left: 100%;\n}\n\n/* Chat message animations */\n.chat-message {\n  animation: slideInMessage 0.3s ease-out;\n}\n\n@keyframes slideInMessage {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Loading states */\n.loading-spinner {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n/* Pulse animation for new items */\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.7;\n  }\n}\n\n.pulse {\n  animation: pulse 2s infinite;\n}\n\n/* Fullscreen mode */\n.fullscreen {\n  position: fixed !important;\n  top: 0 !important;\n  left: 0 !important;\n  width: 100vw !important;\n  height: 100vh !important;\n  z-index: 9999 !important;\n  background: white;\n}\n\n/* Chat bubbles */\n.chat-bubble {\n  animation: fadeInUp 0.3s ease-out;\n}\n\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Emoji picker positioning */\n.emoji-picker {\n  position: absolute;\n  bottom: 100%;\n  left: 0;\n  z-index: 1000;\n}\n\n/* Mobile responsive adjustments */\n@media (max-width: 1024px) {\n  .sidebar-desktop {\n    display: none;\n  }\n  \n  /* Conversation list height limit on mobile */\n  .conversation-list-mobile {\n    max-height: 40vh;\n  }\n  \n  /* Compact mobile conversation cards */\n  .conversation-card {\n    padding: 0.375rem 0.5rem;\n  }\n}\n\n@media (max-width: 768px) {\n  .gap-3 {\n    gap: 0.375rem;\n  }\n  \n  .p-4 {\n    padding: 0.5rem;\n  }\n  \n  .text-sm {\n    font-size: 0.75rem;\n  }\n  \n  .conversation-card {\n    padding: 0.25rem 0.5rem;\n  }\n  \n  /* Further reduce conversation list height on small screens */\n  .conversation-list-mobile {\n    max-height: 35vh;\n  }\n  \n  /* Ultra compact for small screens */\n  .conversation-card .avatar-ultra-small {\n    width: 1.25rem;\n    height: 1.25rem;\n  }\n  \n  .conversation-card .text-ultra-small {\n    font-size: 0.65rem;\n    line-height: 1;\n  }\n}\n\n/* Conversation list specific styles */\n.conversation-list {\n  height: 100%;\n  max-height: 100%;\n}\n\n@media (min-width: 1024px) {\n  .conversation-list {\n    max-height: calc(100vh - 200px);\n  }\n}\n\n/* Compact conversation cards */\n.conversation-card-compact {\n  padding: 0.25rem 0.5rem;\n}\n\n.conversation-card-compact .avatar-small {\n  width: 1.5rem;\n  height: 1.5rem;\n}\n\n.conversation-card-compact .text-compact {\n  font-size: 0.7rem;\n  line-height: 1.1;\n}\n\n/* Line clamp utilities */\n.line-clamp-1 {\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n/* Dark mode support (if needed) */\n@media (prefers-color-scheme: dark) {\n  .dark-mode {\n    background-color: #1f2937;\n    color: #f9fafb;\n  }\n  \n  .dark-mode .bg-white {\n    background-color: #374151;\n  }\n  \n  .dark-mode .border-gray-200 {\n    border-color: #4b5563;\n  }\n  \n  .dark-mode .text-gray-900 {\n    color: #f9fafb;\n  }\n  \n  .dark-mode .text-gray-700 {\n    color: #d1d5db;\n  }\n  \n  .dark-mode .text-gray-600 {\n    color: #9ca3af;\n  }\n}\n\n/* Print styles */\n@media print {\n  .sidebar,\n  .mobile-sidebar,\n  .customer-panel,\n  button {\n    display: none !important;\n  }\n  \n  .main-content {\n    width: 100% !important;\n    margin: 0 !important;\n    padding: 0 !important;\n  }\n}\n\n/* High contrast mode */\n@media (prefers-contrast: high) {\n  .border-gray-200 {\n    border-color: #000;\n  }\n  \n  .text-gray-600 {\n    color: #000;\n  }\n  \n  .bg-gray-50 {\n    background-color: #fff;\n  }\n}\n\n/* Reduced motion */\n@media (prefers-reduced-motion: reduce) {\n  * {\n    animation-duration: 0.01ms !important;\n    animation-iteration-count: 1 !important;\n    transition-duration: 0.01ms !important;\n  }\n}\n\n/* Focus visible for accessibility */\n.focus-visible:focus {\n  outline: 2px solid #3b82f6;\n  outline-offset: 2px;\n}\n\n/* Skip link for accessibility */\n.skip-link {\n  position: absolute;\n  top: -40px;\n  left: 6px;\n  background: #3b82f6;\n  color: white;\n  padding: 8px;\n  text-decoration: none;\n  border-radius: 4px;\n  z-index: 1000;\n}\n\n.skip-link:focus {\n  top: 6px;\n}\n\n/* Customer panel slide animation */\n.customer-panel-enter-active,\n.customer-panel-leave-active {\n  transition: transform 0.3s ease-in-out;\n}\n\n.customer-panel-enter-from,\n.customer-panel-leave-to {\n  transform: translateX(100%);\n}\n\n/* Notification badge pulse */\n.notification-badge {\n  animation: badgePulse 2s infinite;\n}\n\n@keyframes badgePulse {\n  0% {\n    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);\n  }\n  70% {\n    box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);\n  }\n  100% {\n    box-shadow: 0 0 0 0 rgba(239, 68, 68, 0);\n  }\n}\n\n/* Typing indicator */\n.typing-indicator {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 8px 12px;\n  background: #f3f4f6;\n  border-radius: 12px;\n  margin: 8px 0;\n}\n\n.typing-dot {\n  width: 6px;\n  height: 6px;\n  background: #9ca3af;\n  border-radius: 50%;\n  animation: typingDot 1.4s infinite ease-in-out;\n}\n\n.typing-dot:nth-child(1) {\n  animation-delay: -0.32s;\n}\n\n.typing-dot:nth-child(2) {\n  animation-delay: -0.16s;\n}\n\n@keyframes typingDot {\n  0%, 80%, 100% {\n    transform: scale(0);\n    opacity: 0.5;\n  }\n  40% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n/* Online status indicator */\n.online-indicator {\n  position: relative;\n}\n\n.online-indicator::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 12px;\n  height: 12px;\n  background: #10b981;\n  border: 2px solid white;\n  border-radius: 50%;\n}\n\n/* Message status indicators */\n.message-status {\n  display: inline-flex;\n  align-items: center;\n  gap: 2px;\n  margin-left: 4px;\n}\n\n.message-status.sent {\n  color: #9ca3af;\n}\n\n.message-status.delivered {\n  color: #3b82f6;\n}\n\n.message-status.read {\n  color: #10b981;\n}\n\n/* Smooth scrolling */\n.smooth-scroll {\n  scroll-behavior: smooth;\n}\n\n/* Custom focus styles for better accessibility */\n.custom-focus:focus {\n  outline: none;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);\n  border-color: #3b82f6;\n}\n\n/* Glassmorphism effect for panels */\n.glass-panel {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\n/* Gradient text */\n.gradient-text {\n  background: linear-gradient(135deg, #3b82f6, #8b5cf6);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n/* Floating action button */\n.fab {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n  color: white;\n  border: none;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);\n  cursor: pointer;\n  transition: all 0.3s ease;\n  z-index: 1000;\n}\n\n.fab:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 20px rgba(59, 130, 246, 0.6);\n}\n\n/* Skeleton loading */\n.skeleton {\n  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n  background-size: 200% 100%;\n  animation: loading 1.5s infinite;\n}\n\n@keyframes loading {\n  0% {\n    background-position: 200% 0;\n  }\n  100% {\n    background-position: -200% 0;\n  }\n}\n\n/* Tooltip */\n.tooltip {\n  position: relative;\n}\n\n.tooltip::before {\n  content: attr(data-tooltip);\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background: #1f2937;\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  white-space: nowrap;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.3s;\n  z-index: 1000;\n}\n\n.tooltip:hover::before {\n  opacity: 1;\n}\n\n/* Success/Error states */\n.success-state {\n  background: linear-gradient(135deg, #10b981, #059669);\n  color: white;\n}\n\n.error-state {\n  background: linear-gradient(135deg, #ef4444, #dc2626);\n  color: white;\n}\n\n.warning-state {\n  background: linear-gradient(135deg, #f59e0b, #d97706);\n  color: white;\n}\n\n/* Micro-interactions */\n.micro-bounce:active {\n  transform: scale(0.95);\n}\n\n.micro-shake {\n  animation: shake 0.5s ease-in-out;\n}\n\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  25% { transform: translateX(-5px); }\n  75% { transform: translateX(5px); }\n}\n\n/* Progress indicators */\n.progress-bar {\n  height: 4px;\n  background: #e5e7eb;\n  border-radius: 2px;\n  overflow: hidden;\n}\n\n.progress-fill {\n  height: 100%;\n  background: linear-gradient(90deg, #3b82f6, #8b5cf6);\n  transition: width 0.3s ease;\n}\n\n/* Connection status */\n.connection-status {\n  position: fixed;\n  top: 10px;\n  right: 10px;\n  padding: 8px 12px;\n  border-radius: 20px;\n  font-size: 12px;\n  font-weight: 500;\n  z-index: 1000;\n}\n\n.connection-status.online {\n  background: #dcfce7;\n  color: #166534;\n  border: 1px solid #bbf7d0;\n}\n\n.connection-status.offline {\n  background: #fef2f2;\n  color: #991b1b;\n  border: 1px solid #fecaca;\n}\n\n.connection-status.reconnecting {\n  background: #fef3c7;\n  color: #92400e;\n  border: 1px solid #fde68a;\n}\n\n/* Chat area specific styles */\n.chat-area {\n  height: 100vh;\n  max-height: 100vh;\n  overflow: hidden;\n}\n\n.chat-messages {\n  height: 100%;\n  max-height: 100%;\n  overflow-y: auto;\n}\n\n/* Message container improvements */\n.message-container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  overflow: hidden;\n}\n\n.message-list {\n  flex: 1;\n  overflow-y: auto;\n  scroll-behavior: smooth;\n  padding: 0.75rem;\n}\n\n.message-input-area {\n  flex-shrink: 0;\n  border-top: 1px solid #e5e7eb;\n  background: #f9fafb;\n  padding: 0.75rem;\n}\n\n/* Improved scrollbar for chat */\n.message-list::-webkit-scrollbar {\n  width: 6px;\n}\n\n.message-list::-webkit-scrollbar-track {\n  background: #f1f5f9;\n  border-radius: 3px;\n}\n\n.message-list::-webkit-scrollbar-thumb {\n  background: #cbd5e1;\n  border-radius: 3px;\n}\n\n.message-list::-webkit-scrollbar-thumb:hover {\n  background: #94a3b8;\n}\n\n/* Chat message animations */\n.chat-message {\n  animation: slideInMessage 0.3s ease-out;\n}\n\n@keyframes slideInMessage {\n  from {\n    opacity: 0;\n    transform: translateY(10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Auto scroll to bottom */\n.auto-scroll {\n  scroll-behavior: smooth;\n}\n\n/* Message bubble improvements */\n.message-bubble {\n  max-width: 70%;\n  word-wrap: break-word;\n  overflow-wrap: break-word;\n}\n\n/* Remove all max-height constraints for full screen */\n.conversation-list {\n  height: 100%;\n  max-height: 100%;\n}\n\n/* Ensure no scrolling on main container */\n.h-screen {\n  height: 100vh;\n  max-height: 100vh;\n  overflow: hidden;\n}\n\n/* Compact mobile styles */\n@media (max-width: 768px) {\n  .message-bubble {\n    max-width: 85%;\n  }\n  \n  .conversation-card {\n    padding: 0.375rem 0.5rem;\n  }\n  \n  .stats-card {\n    padding: 0.375rem 0.5rem;\n  }\n}\n\n/* Support container with dynamic height calculation */\n.support-container {\n  height: calc(100vh - var(--header-height, 64px));\n  max-height: calc(100vh - var(--header-height, 64px));\n  overflow: hidden;\n}\n\n/* Responsive header heights */\n@media (min-width: 1024px) {\n  .support-container {\n    height: calc(100vh - var(--header-height, 80px));\n    max-height: calc(100vh - var(--header-height, 80px));\n  }\n}\n\n@media (max-width: 768px) {\n  .support-container {\n    height: calc(100vh - var(--header-height, 56px));\n    max-height: calc(100vh - var(--header-height, 56px));\n  }\n}\n\n/* Alternative fixed heights for common header sizes */\n.support-container.with-topbar {\n  height: calc(100vh - 120px); /* Header + Topbar */\n  max-height: calc(100vh - 120px);\n}\n\n.support-container.with-breadcrumb {\n  height: calc(100vh - 140px); /* Header + Breadcrumb */\n  max-height: calc(100vh - 140px);\n}\n\n.support-container.full-admin {\n  height: calc(100vh - 160px); /* Full admin layout */\n  max-height: calc(100vh - 160px);\n}\n\n/* Chat area specific styles */\n.chat-area {\n  height: 100%;\n  max-height: 100%;\n  overflow: hidden;\n}\n</style>\n","<template>\n    <div v-if=\"isOpen\" class=\"emoji-picker\">\n      <div class=\"emoji\" v-for=\"emoji in emojis\" :key=\"emoji\" @click=\"selectEmoji(emoji)\">\n        {{ emoji }}\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  export default {\n    props: {\n      isOpen: {\n        type: Boolean,\n        default: false,\n      },\n    },\n    data() {\n      return {\n        emojis: [\n          '😊', '😂', '😍', '😎', '😭', '👍', '👎', '❤️', '🔥', '🎉', // Existing emojis\n          '🙌', '👏', '🤔', '😢', '😡', '😇', '🥳', '😴', '🤯', '🤩', // Additional emojis\n          '😜', '🤗', '😏', '😤', '🤫', '😌', '🤭', '🙈', '🙉', '🙊', // More emojis\n        ], \n      };\n    },\n    methods: {\n      selectEmoji(emoji) {\n        this.$emit('select-emoji', emoji);\n      },\n    },\n  };\n  </script>\n  \n  <style scoped>\n  .emoji-picker {\n    position: absolute;\n    bottom: 60px; /* Adjust to position above the button */\n    left: 0; /* Align left */\n    background-color: white;\n    border: 1px solid #d1d5db;\n    padding: 10px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    z-index: 100;\n    display: grid; /* Use grid for layout */\n    grid-template-columns: repeat(5, 1fr); /* 5 columns */\n    gap: 8px; /* Adjust gap between emojis */\n  }\n  .emoji {\n    cursor: pointer;\n    font-size: 1.5rem;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  </style>\n  ","import { render } from \"./EmojiPicker.vue?vue&type=template&id=155f8c9f&scoped=true\"\nimport script from \"./EmojiPicker.vue?vue&type=script&lang=js\"\nexport * from \"./EmojiPicker.vue?vue&type=script&lang=js\"\n\nimport \"./EmojiPicker.vue?vue&type=style&index=0&id=155f8c9f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-155f8c9f\"]])\n\nexport default __exports__","import { render } from \"./Support.vue?vue&type=template&id=4c1bf625&scoped=true\"\nimport script from \"./Support.vue?vue&type=script&lang=js\"\nexport * from \"./Support.vue?vue&type=script&lang=js\"\n\nimport \"./Support.vue?vue&type=style&index=0&id=4c1bf625&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4c1bf625\"]])\n\nexport default __exports__","import { render } from \"./Support.vue?vue&type=template&id=653dafe4\"\nimport script from \"./Support.vue?vue&type=script&lang=js\"\nexport * from \"./Support.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export const generateCustomMessage = async (prompt) => {\n    const apiKey = \"AIzaSyB_DNNNAbBpaQ41rKHgDeL-zzGpQmjcRH4\"; // Replace with your actual API key\n    const url = `https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent?key=${apiKey}`;\n    const headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    const body = JSON.stringify({\n      contents: [\n        {\n          role: \"user\",\n          parts: [{ text: prompt }]\n        }\n      ]\n    });\n    try {\n      const response = await fetch(url, {\n        method: \"POST\",\n        headers: headers,\n        body: body\n      });\n      const data = await response.json();\n      if (response.ok) {\n        // Access the text from the first candidate's content parts\n        const generatedText = data.candidates[0]?.content.parts[0]?.text.trim();\n        return generatedText || \"Sorry, I couldn't generate a response.\";\n      } else {\n        console.error(\"Error generating message:\", data);\n        return \"Sorry, I couldn't generate a response.\";\n      }\n    } catch (error) {\n      console.error(\"Network error generating message:\", error);\n      return \"Sorry, I couldn't generate a response.\";\n    }\n  };\n  ","import storageManager from '@/plugins/storage';\nimport requestClient from '@/plugins/requestClient';\n\nconst Request = new requestClient(false);\nconst configs = storageManager.get('configs');\nconst session = storageManager.get('session');\n\n// Fetch a list of all conversations\nconst fetchConversations = async () => {\n  const response = await Request.POST('conversation/query', { method: 'find', args: [{ $and: [{ unit: session.current._id }] }] }, configs.key);\n  if (response.status === 200) return response.data;\n  throw new Error('Failed to fetch conversations');\n};\n\n// Fetch a single conversation by ID\nconst fetchConversationById = async (conversationId) => {\n  const response = await Request.GET(`conversation/${conversationId}`, configs.key);\n  if (response.status === 200) return response.data;\n  throw new Error(`Failed to fetch conversation with ID ${conversationId}`);\n};\n\n// Create a new conversation\nconst createConversation = async (conversationData) => {\n  const response = await Request.POST('conversation', { data: { ...conversationData, unit: session.current._id } }, configs.key);\n  if (response.status === 200) return response.data;\n  throw new Error('Failed to create conversation');\n};\n\n// Update an existing conversation by ID\nconst updateConversation = async (conversationId, updatedData) => {\n  // Ensure _id is not included in the updated data\n  if (updatedData._id) {\n    delete updatedData._id;\n  }\n  const response = await Request.PUT(`conversation/${conversationId}`, { data: updatedData }, configs.key);\n  if (response.status === 200) return response.data;\n  throw new Error(`Failed to update conversation with ID ${conversationId}`);\n};\n\n// Update the sender and preview data in a conversation by ID\nconst updateSenderInConversation = async (conversationId, newSenderName, newPreview) => {\n  try {\n    // Fetch the conversation by ID\n    const conversation = await fetchConversationById(conversationId);\n    \n    if (conversation) {\n      // Update the sender in the conversation itself\n      conversation.sender = newSenderName;\n\n      // Optionally update the preview if provided\n      if (newPreview) {\n        conversation.preview = newPreview;\n      }\n\n      // Update the conversation in the database\n      const response = await updateConversation(conversationId, {\n        sender: conversation.sender,\n        preview: conversation.preview,\n        updatedAt: new Date(), // Update the timestamp\n      });\n      return response;\n    } else {\n      throw new Error(`Conversation with ID ${conversationId} not found`);\n    }\n  } catch (error) {\n    console.error('Error updating sender in conversation:', error.message);\n    throw error;\n  }\n};\n\n// Delete a conversation by ID\nconst deleteConversation = async (conversationId) => {\n  const response = await Request.DELETE(`conversation/${conversationId}`, '', configs.key);\n  if (response.status === 200) return response.data;\n  throw new Error(`Failed to delete conversation with ID ${conversationId}`);\n};\n\nexport {\n  fetchConversations,\n  fetchConversationById,\n  createConversation,\n  updateConversation,\n  deleteConversation,\n  updateSenderInConversation\n};\n"],"names":["login","_createBlock","_component_List","key","$data","manualHeaderHeight","_createCommentVNode","class","ref","_createElementBlock","_normalizeClass","$props","headerType","customClass","style","_normalizeStyle","customHeight","height","maxHeight","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","onClick","_cache","args","$options","loadConversations","title","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","conversations","length","_hoisted_8","_hoisted_9","unassignedCount","_hoisted_10","_hoisted_11","assignedCount","_hoisted_12","_hoisted_13","_Fragment","_renderList","sidebarMenuItems","status","value","$event","selectStatusAndCloseMobile","selectedStatus","icon","_hoisted_15","label","getStatusCount","_hoisted_14","_hoisted_16","_hoisted_17","toggleFullscreen","isFullscreen","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","session","current","name","_hoisted_22","_hoisted_23","toggleMobileSidebar","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","type","conversationSearch","placeholder","_hoisted_28","selectedConversation","resolveConversation","disabled","_createTextVNode","_hoisted_29","mode","switchToAgentMode","_hoisted_30","_hoisted_31","onChange","selectStatus","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","filteredConversationsBySearch","_hoisted_38","conversation","_id","selectConversation","_hoisted_40","_hoisted_41","_hoisted_42","getInitials","sender","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","preview","_hoisted_48","_hoisted_49","formatTime","lastUpdate","unreadCount","_hoisted_50","_hoisted_51","getStatusClass","getStatusLabel","_hoisted_39","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","email","_hoisted_61","toggleSearchPanel","toggleCustomerPanel","isSearchPanelOpen","_hoisted_62","_hoisted_63","messageSearch","_hoisted_64","filteredMessagesBySearch","message","_hoisted_65","text","_hoisted_66","time","_hoisted_67","_hoisted_68","toggleEmojiPicker","_hoisted_69","addFile","_hoisted_70","newMessage","onKeyup","_withKeys","sendMessage","_hoisted_71","trim","_hoisted_72","_createVNode","_component_EmojiPicker","isOpen","isEmojiPickerOpen","onSelectEmoji","addEmojiToMessage","_hoisted_73","isCustomerPanelOpen","_hoisted_74","_hoisted_75","_hoisted_76","_hoisted_77","_hoisted_78","_hoisted_79","_hoisted_80","_hoisted_81","_hoisted_82","_hoisted_83","_hoisted_84","phone","_hoisted_85","address","showMobileSidebar","_withModifiers","_hoisted_86","_hoisted_87","_hoisted_88","_hoisted_89","_hoisted_90","_hoisted_91","_hoisted_92","_hoisted_93","_hoisted_94","_hoisted_95","_hoisted_96","_hoisted_97","_hoisted_99","_hoisted_98","emojis","emoji","selectEmoji","props","Boolean","default","data","methods","this","$emit","__exports__","components","EmojiPicker","String","validator","includes","headerHeight","Number","userInput","generatedMessage","loader","isAgentMode","storageManager","get","created","computed","sortedFilteredConversations","filter","toLowerCase","filteredConversations","slice","sort","a","b","conv","resolvedCount","mounted","subscribeToHostChannel","handleHostMessages","calculateHeaderHeight","window","addEventListener","beforeUnmount","removeEventListener","document","documentElement","setProperty","possibleHeaders","forEach","selector","elements","querySelectorAll","element","isElementAbove","offsetHeight","innerWidth","console","log","supportElement","$el","elementRect","getBoundingClientRect","supportRect","bottom","top","getCustomMessage","generateCustomMessage","error","unsubscribeFromConversationChannel","conversationId","conversationChannel","getAblyChannel","unsubscribe","warn","hostId","hostChannel","subscribeToMessages","msg","subscribeToConversationChannel","handleConversationMessages","publishToHostChannel","messageType","messageData","host_id","publishMessage","publishToConversationChannel","silent","fetchConversations","map","Date","selectLastConversation","date","isNaN","toLocaleTimeString","hour","minute","sortedConversations","updatedAt","resetUnreadCount","$nextTick","scrollToEnd","id","read","push","updateConversationPreview","updateConversation","timestamp","toISOString","lastCustomerMessage","reverse","find","calculateUnreadCount","c","chatWindow","$refs","scrollTop","scrollHeight","split","n","join","alert","statusLabels","unassigned","assigned","resolved","all","statusClasses","watch","handler","newConversations","lastMessage","deep","newConversation","oldConversation","immediate","List","dynamicHeaderHeight","hasTopbar","querySelector","hasBreadcrumb","customContainerHeight","showAlert","$swal","updateHeaderHeight","newHeight","setup","route","useRoute","routeName","meta","useTitle","render","async","apiKey","url","headers","body","JSON","stringify","contents","role","parts","prompt","response","fetch","method","json","ok","generatedText","candidates","content","Request","requestClient","configs","POST","$and","unit","Error","fetchConversationById","GET","createConversation","conversationData","updatedData","PUT","updateSenderInConversation","newSenderName","newPreview"],"sourceRoot":""}