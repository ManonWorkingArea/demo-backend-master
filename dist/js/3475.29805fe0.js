"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[3475],{12846:function(e,t,a){a.r(t),a.d(t,{default:function(){return ue}});var s=a(20641);function o(e,t,a,o,i,n){const l=(0,s.g2)("Target",!0);return this.login?((0,s.uX)(),(0,s.Wv)(l,{key:0})):(0,s.Q3)("",!0)}var i=a(52968),n=a(75220),l=(a(44114),a(90033)),r=a(53751);const c={class:"bg-white rounded-lg shadow-sm border border-gray-200"},d={class:"px-4 py-3 border-b border-gray-200"},g={class:"flex items-center justify-between"},u={class:"flex items-center space-x-3"},p={class:"w-8 h-8 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center"},m={class:"text-xs text-gray-500"},f={class:"bg-gray-50 border-b border-gray-200 px-4 py-2"},b={class:"p-4"},h={key:0,class:"text-center py-8"},y={class:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3"},k={key:1,class:"space-y-3"},x={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3"},v={class:"h-32 bg-gray-100 relative overflow-hidden"},w={class:"p-4 relative"},L={class:"absolute -top-8 left-4"},T={class:"w-16 h-16 bg-white rounded-lg border-2 border-white shadow-lg overflow-hidden"},F=["src"],C={class:"pt-10"},O={class:"flex items-start justify-between mb-2"},_={class:"flex-1"},j={class:"text-base font-semibold text-gray-900 mb-1"},R={class:"text-xs text-gray-500 mb-1"},B={class:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded-md inline-block"},M={class:"flex items-center justify-end pt-3 border-t border-gray-100 space-x-1"},W=["onClick"],D=["onClick"],E={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},A={class:"flex min-h-full items-center justify-center p-4"},X={class:"relative bg-white rounded-xl shadow-xl max-w-lg w-full"},I={class:"h-32 bg-gray-100 relative overflow-hidden rounded-t-xl"},P={class:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300"},S={class:"absolute top-20 left-6"},$={class:"w-16 h-16 bg-white rounded-lg border-2 border-white shadow-lg overflow-hidden relative group"},J=["src"],Q={class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black bg-opacity-50"},U={class:"p-5 pt-12"},z={class:"flex items-center justify-between mb-4"},K={class:"flex items-center space-x-2"},N={class:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center"},V={class:"space-y-3"},q={class:"flex justify-end space-x-2 mt-5"},G={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},H={class:"flex min-h-full items-center justify-center p-4"},Y={class:"relative bg-white rounded-xl shadow-xl max-w-md w-full p-5"},Z={class:"flex items-center justify-between mb-4"},ee={class:"flex items-center space-x-2"},te={class:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center"},ae={class:"flex justify-end space-x-2"};function se(e,t,a,o,i,n){const se=(0,s.g2)("FileBrowser"),oe=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[i.FileBannerOpen?((0,s.uX)(),(0,s.Wv)(se,{key:0,isWindowsOpen:!0,callbackFunction:"banner",allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:n.changeFileTrigger,onFileBrowserCallback:n.selectFileTrigger},null,8,["onFileBrowserTrigger","onFileBrowserCallback"])):(0,s.Q3)("",!0),i.FileLogoOpen?((0,s.uX)(),(0,s.Wv)(se,{key:1,isWindowsOpen:!0,callbackFunction:"logo",allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:n.changeFileTriggerLogo,onFileBrowserCallback:n.selectFileTriggerLogo},null,8,["onFileBrowserTrigger","onFileBrowserCallback"])):(0,s.Q3)("",!0),(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[(0,s.Lk)("div",g,[(0,s.Lk)("div",u,[(0,s.Lk)("div",p,[(0,s.bF)(oe,{icon:["fas","bullseye"],class:"text-white text-sm"})]),(0,s.Lk)("div",null,[t[16]||(t[16]=(0,s.Lk)("h2",{class:"text-base font-semibold text-gray-900"},"กลุ่มเป้าหมาย",-1)),(0,s.Lk)("p",m,(0,l.v_)(n.getMainTargets.length)+" กลุ่มเป้าหมาย",1)])]),(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>n.addTarget("main")),type:"button",class:"inline-flex items-center rounded-lg bg-orange-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-all duration-200"},[(0,s.bF)(oe,{icon:["fas","plus"],class:"mr-1.5"}),t[17]||(t[17]=(0,s.eW)(" เพิ่มกลุ่มเป้าหมาย "))])])]),(0,s.Lk)("div",f,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$router.push("/lesson/home")),type:"button",class:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200"},[(0,s.bF)(oe,{icon:["fas","chevron-left"],class:"mr-1.5 text-xs"}),t[18]||(t[18]=(0,s.eW)(" ย้อนกลับ "))])]),(0,s.Lk)("div",b,[0===n.getMainTargets.length?((0,s.uX)(),(0,s.CE)("div",h,[(0,s.Lk)("div",y,[(0,s.bF)(oe,{icon:["fas","bullseye"],class:"text-gray-400 text-lg"})]),t[20]||(t[20]=(0,s.Lk)("h3",{class:"text-base font-medium text-gray-900 mb-2"},"ยังไม่มีกลุ่มเป้าหมาย",-1)),t[21]||(t[21]=(0,s.Lk)("p",{class:"text-sm text-gray-500 mb-4"},"เริ่มต้นสร้างกลุ่มเป้าหมายสำหรับหลักสูตร",-1)),(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>n.addTarget("main")),type:"button",class:"inline-flex items-center rounded-lg bg-orange-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 transition-all duration-200"},[(0,s.bF)(oe,{icon:["fas","plus"],class:"mr-1.5"}),t[19]||(t[19]=(0,s.eW)(" สร้างกลุ่มเป้าหมายแรก "))])])):((0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("div",x,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.flattenedTargets,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,["main"===e.type?((0,s.uX)(),(0,s.CE)("div",{key:e._id,class:"bg-white border border-gray-200 rounded-lg hover:shadow-md transition-all duration-200 group overflow-hidden"},[(0,s.Lk)("div",v,[(0,s.Lk)("div",{class:"w-full h-full bg-cover bg-center",style:(0,l.Tr)({backgroundImage:e.banner?`url(${e.banner})`:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)"})},null,4),t[22]||(t[22]=(0,s.Lk)("div",{class:"absolute inset-0 bg-black bg-opacity-20"},null,-1))]),(0,s.Lk)("div",w,[(0,s.Lk)("div",L,[(0,s.Lk)("div",T,[(0,s.Lk)("img",{src:e.logo||"https://dummyimage.com/400x400/dbdbdb/6e6e6e.jpg&text=++TARGET++",alt:"Logo",class:"w-full h-full object-cover"},null,8,F)])]),(0,s.Lk)("div",C,[(0,s.Lk)("div",O,[(0,s.Lk)("div",_,[(0,s.Lk)("h3",j,(0,l.v_)(n.getMainTargetIndex(e))+". "+(0,l.v_)(e.name),1),(0,s.Lk)("p",R,(0,l.v_)(e.code),1),(0,s.Lk)("div",B,[(0,s.bF)(oe,{icon:["fas","bullseye"],class:"mr-1"}),t[23]||(t[23]=(0,s.eW)(" กลุ่มเป้าหมาย "))])])]),(0,s.Lk)("div",M,[(0,s.Lk)("button",{onClick:t=>n.openRenameDialog(e),class:"inline-flex items-center px-2 py-1 text-xs text-gray-600 hover:text-orange-600 hover:bg-orange-50 rounded transition-all duration-200"},[(0,s.bF)(oe,{icon:["fas","edit"],class:"mr-1 text-xs"}),t[24]||(t[24]=(0,s.eW)(" แก้ไข "))],8,W),(0,s.Lk)("button",{onClick:t=>n.removeMainTargetConfirmation(e),class:"inline-flex items-center px-2 py-1 text-xs text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-all duration-200"},[(0,s.bF)(oe,{icon:["fas","trash"],class:"mr-1 text-xs"}),t[25]||(t[25]=(0,s.eW)(" ลบ "))],8,D)])])])])):(0,s.Q3)("",!0)],64)))),256))])]))])]),(0,s.bF)(r.eB,{"enter-active-class":"modal-enter-active","leave-active-class":"modal-leave-active","enter-from-class":"modal-enter-from","leave-to-class":"modal-leave-to"},{default:(0,s.k6)((()=>[i.showRenameDialog?((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",A,[(0,s.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25 transition-opacity",onClick:t[3]||(t[3]=(...e)=>n.closeRenameDialog&&n.closeRenameDialog(...e))}),(0,s.Lk)("div",X,[(0,s.Lk)("div",I,[(0,s.Lk)("div",{class:"w-full h-full bg-cover bg-center",style:(0,l.Tr)({backgroundImage:i.selectedTarget?.banner?`url(${i.selectedTarget.banner})`:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)"})},null,4),t[27]||(t[27]=(0,s.Lk)("div",{class:"absolute inset-0 bg-black bg-opacity-20"},null,-1)),(0,s.Lk)("div",P,[(0,s.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.OpenFileBrowser&&n.OpenFileBrowser(...e)),class:"bg-black bg-opacity-75 text-white text-xs px-3 py-2 rounded-lg hover:bg-opacity-90 transition-all duration-200"},[(0,s.bF)(oe,{icon:["fas","image"],class:"mr-1.5"}),t[26]||(t[26]=(0,s.eW)(" เปลี่ยนรูปปก "))])])]),(0,s.Lk)("div",S,[(0,s.Lk)("div",$,[(0,s.Lk)("img",{src:i.selectedTarget?.logo||"https://dummyimage.com/400x400/dbdbdb/6e6e6e.jpg&text=++TARGET++",alt:"Logo",class:"w-full h-full object-cover"},null,8,J),(0,s.Lk)("div",Q,[(0,s.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.OpenFileBrowserLogo&&n.OpenFileBrowserLogo(...e)),class:"text-white text-xs"},[(0,s.bF)(oe,{icon:["fas","image"]})])])])]),(0,s.Lk)("div",U,[(0,s.Lk)("div",z,[(0,s.Lk)("div",K,[(0,s.Lk)("div",N,[(0,s.bF)(oe,{icon:["fas","edit"],class:"text-orange-600 text-sm"})]),t[28]||(t[28]=(0,s.Lk)("div",null,[(0,s.Lk)("h3",{class:"text-base font-semibold text-gray-900"},"แก้ไขกลุ่มเป้าหมาย"),(0,s.Lk)("p",{class:"text-xs text-gray-500"},"จัดการข้อมูลกลุ่มเป้าหมาย")],-1))]),(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.closeRenameDialog&&n.closeRenameDialog(...e)),class:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-all duration-200"},[(0,s.bF)(oe,{icon:["fas","times"],class:"text-sm"})])]),(0,s.Lk)("div",V,[(0,s.Lk)("div",null,[t[29]||(t[29]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"ชื่อกลุ่มเป้าหมาย",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.selectedTarget.name=e),type:"text",class:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 text-sm",placeholder:"ระบุชื่อกลุ่มเป้าหมาย"},null,512),[[r.Jo,i.selectedTarget.name]])]),(0,s.Lk)("div",null,[t[30]||(t[30]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"รหัสกลุ่มเป้าหมาย",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.selectedTarget.code=e),type:"text",class:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 text-sm",placeholder:"ระบุรหัสกลุ่มเป้าหมาย"},null,512),[[r.Jo,i.selectedTarget.code]])]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.selectedTarget.logo=e),type:"hidden"},null,512),[[r.Jo,i.selectedTarget.logo]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.selectedTarget.banner=e),type:"hidden"},null,512),[[r.Jo,i.selectedTarget.banner]])]),(0,s.Lk)("div",q,[(0,s.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>n.closeRenameDialog&&n.closeRenameDialog(...e)),class:"px-3 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all duration-200"}," ยกเลิก "),(0,s.Lk)("button",{onClick:t[12]||(t[12]=e=>n.renameTarget(i.selectedTarget)),class:"px-3 py-2 text-xs font-medium text-white bg-orange-600 hover:bg-orange-700 rounded-lg transition-all duration-200"},[(0,s.bF)(oe,{icon:["fas","save"],class:"mr-1"}),t[31]||(t[31]=(0,s.eW)(" บันทึก "))])])])])])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(r.eB,{"enter-active-class":"modal-enter-active","leave-active-class":"modal-leave-active","enter-from-class":"modal-enter-from","leave-to-class":"modal-leave-to"},{default:(0,s.k6)((()=>[i.showConfirmationPopup?((0,s.uX)(),(0,s.CE)("div",G,[(0,s.Lk)("div",H,[(0,s.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25 transition-opacity",onClick:t[13]||(t[13]=(...e)=>n.cancelRemoveMainTarget&&n.cancelRemoveMainTarget(...e))}),(0,s.Lk)("div",Y,[(0,s.Lk)("div",Z,[(0,s.Lk)("div",ee,[(0,s.Lk)("div",te,[(0,s.bF)(oe,{icon:["fas","exclamation-triangle"],class:"text-red-600 text-sm"})]),t[32]||(t[32]=(0,s.Lk)("div",null,[(0,s.Lk)("h3",{class:"text-base font-semibold text-gray-900"},"ยืนยันการลบ"),(0,s.Lk)("p",{class:"text-xs text-gray-500"},"กลุ่มเป้าหมาย")],-1))])]),t[33]||(t[33]=(0,s.Lk)("div",{class:"mb-4"},[(0,s.Lk)("p",{class:"text-sm text-gray-600"},"คุณแน่ใจหรือไม่ที่จะลบกลุ่มเป้าหมายนี้? การดำเนินการนี้ไม่สามารถยกเลิกได้")],-1)),(0,s.Lk)("div",ae,[(0,s.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>n.cancelRemoveMainTarget&&n.cancelRemoveMainTarget(...e)),class:"px-3 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all duration-200"}," ยกเลิก "),(0,s.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>n.confirmRemoveMainTarget&&n.confirmRemoveMainTarget(...e)),class:"px-3 py-2 text-xs font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-all duration-200"}," ลบ ")])])])])):(0,s.Q3)("",!0)])),_:1})],64)}a(98992),a(54520),a(8872);var oe=a(40475),ie=a(40687),ne={name:"TargetList",data(){return{session:oe.A.get("session"),configs:oe.A.get("configs"),targets:[],uniqueIdCounter:5,showRenameDialog:!1,selectedTarget:null,showMoveDialog:!1,selectedTargetParent:null,FileBannerOpen:!1,FileLogoOpen:!1,showConfirmationPopup:!1}},components:{FileBrowser:ie.A},computed:{flattenedTargets(){return this.flattenTargets(this.targets)},getMainTargets(){return this.targets.filter((e=>"main"===e.type))}},async mounted(){try{await this.getTargetData()}catch(e){console.log(Error)}},methods:{OpenFileBrowser(){this.FileBannerOpen=!0},changeFileTrigger(e){this.FileBannerOpen=e},selectFileTrigger(e){void 0!=e&&this.updateBanner(e.file)},async updateBanner(e){try{const t=this.selectedTarget,a={...t,banner:e};delete a._id;const s=await fetch(`https://gateway.cloudrestfulapi.com/api/target/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:a,options:{}})});s.ok&&(this.selectedTarget.banner=e,this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"แก้ไขรูปหน้าปก",text:"แก้ไขรูปหน้าปก สำเร็จแล้ว"}))}catch(t){console.log(t)}},OpenFileBrowserLogo(){this.FileLogoOpen=!0},changeFileTriggerLogo(e){this.FileLogoOpen=e},selectFileTriggerLogo(e){void 0!=e&&this.updateLogo(e.file)},async updateLogo(e){try{const t=this.selectedTarget,a={...t,logo:e};delete a._id;const s=await fetch(`https://gateway.cloudrestfulapi.com/api/target/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:a,options:{}})});s.ok&&(this.selectedTarget.logo=e,this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"แก้ไขรูปหน้าปก",text:"แก้ไขรูปหน้าปก สำเร็จแล้ว"}))}catch(t){console.log(t)}},async getTargetData(){const e=await fetch("https://gateway.cloudrestfulapi.com/api/target/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{unit:this.session.current._id}]}],paging:{page:1,limit:200}})});if(e.ok){const t=await e.json();console.log("finalRes",t),this.targets=t.data}},async addTarget(e,t){try{const a={unit:this.session.current._id,name:"กลุ่มเป้าหมายใหม่",code:"รหัสกลุ่มเป้าหมาย",type:"main",order:0};"sub"===e&&(a.type="sub",a.parent=t._id);const s=await fetch("https://gateway.cloudrestfulapi.com/api/target/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:a,options:{}})});if(s.ok){await this.getTargetData();const e=await s.json();console.log("finalRes",e)}}catch(a){console.error(a)}},async updateTarget(e){const t=await fetch("https://gateway.cloudrestfulapi.com/api/target/"+e._id,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{name:e.name,code:e.code,order:e.order},options:{}})});if(t.ok){await this.getTargetData();const e=await t.json();console.log("finalRes",e)}},async deleteTarget(e){const t=await fetch("https://gateway.cloudrestfulapi.com/api/target/"+e._id,{method:"DELETE",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}});if(t.ok){await this.getTargetData();const e=await t.json();console.log("finalRes",e)}},getMainTargetIndex(e){const t=this.flattenedTargets.filter((e=>"main"===e.type));return t.findIndex((t=>t._id===e._id))+1},flattenTargets(e){return e.reduce(((e,t)=>(e.push(t),e)),[])},async removeMainTarget(e){try{const t=this.targets.findIndex((t=>t._id===e._id&&"main"===t.type));-1!==t&&(this.targets.splice(t,1),await this.deleteTarget(e))}catch(t){console.error(t)}},openRenameDialog(e){this.selectedTarget=e,this.showRenameDialog=!0},closeRenameDialog(){this.showRenameDialog=!1,this.selectedTarget=null},async renameTarget(e){try{const t=e.name.trim(),a=e.code.trim();""!==t&&(e.name=t),""!==a&&(e.code=a),await this.updateTarget(e),this.closeRenameDialog()}catch(t){console.error(t)}},async removeMainTargetConfirmation(e){this.selectedTarget=e,this.showConfirmationPopup=!0},async cancelRemoveMainTarget(){this.showConfirmationPopup=!1},async confirmRemoveMainTarget(){await this.removeMainTarget(this.selectedTarget),this.showConfirmationPopup=!1}}},le=a(64621);const re=(0,le.A)(ne,[["render",se],["__scopeId","data-v-3948ef29"]]);var ce=re,de={name:"Lesson Edit",components:{Target:ce},data(){return{login:oe.A.get("session","login")}},methods:{},setup(){const e=(0,n.lq)(),t=e.meta.title;(0,i.K7)(t)}};const ge=(0,le.A)(de,[["render",o]]);var ue=ge},40687:function(e,t,a){a.d(t,{A:function(){return b}});var s=a(20641),o=a(50953),i=a(90033),n=a(94232),l=a(10797),r=a(55372);const c={key:0,class:"fixed inset-0 overflow-y-auto"},d={class:"flex min-h-full items-center justify-center p-4 text-center"},g={class:"font-medium"},u={class:"bg-black w-8 h-8 right-2 top-2 leading-8 hover:bg-gray-500"},p={props:["isWindowsOpen","allowFileType","callbackFunction"],data(){return console.log("FileBrowser props:",this.isWindowsOpen,this.allowFileType,this.callbackFunction),{SessionList:[],loading_sources:!0,activeBlock:!1,schoolId:"",isOpen:this.isWindowsOpen,isAllow:this.allowFileType,isCallback:this.callbackFunction,mode:"popup"}},components:{FileManager:r.A},watch:{isWindowsOpen(e){console.log("isWindowsOpen changed to:",e),this.isOpen=e}},methods:{selectFileTrigger(e){this.selectFileTrigger=e,this.closeModal(),this.selectFile(e)},closeModal(){this.isOpen=!1,this.$emit("fileBrowserTrigger",!1)},selectFile(e){this.$emit("fileBrowserCallback",e)}},async mounted(){console.log("FileBrowser mounted with isOpen:",this.isOpen,"isWindowsOpen:",this.isWindowsOpen)},setup(){}};var m=Object.assign(p,{__name:"FileBrowser",setup(e){return(t,a)=>{const p=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.Wv)((0,o.R1)(n.O),{appear:"",show:t.isOpen,as:"template"},{default:(0,s.k6)((()=>[(0,s.bF)((0,o.R1)(l.lG),{as:"div",onClose:t.closeModal,class:"relative z-10"},{default:(0,s.k6)((()=>[(0,s.bF)((0,o.R1)(n._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,s.k6)((()=>a[1]||(a[1]=[(0,s.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)]))),_:1}),t.loading_sources?((0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",d,[(0,s.bF)((0,o.R1)(n._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:(0,s.k6)((()=>[(0,s.bF)((0,o.R1)(l.Lj),{class:(0,i.C4)(["w-[60rem] z-40 transform overflow-hidden bg-white p-3 text-left align-middle shadow-xl transition-all blocking relative",[t.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},{default:(0,s.k6)((()=>[(0,s.bF)((0,o.R1)(l.L3),{as:"h3",class:"text-lg pb-2 font-bold leading-6 text-gray-900 border-b"},{default:(0,s.k6)((()=>[a[3]||(a[3]=(0,s.eW)("เลือกไฟล์ (Select File) ")),(0,s.Lk)("p",g,[a[2]||(a[2]=(0,s.eW)("อนุญาติเฉพาะไฟล์ ")),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.allowFileType,(e=>((0,s.uX)(),(0,s.CE)("span",{key:e.code,class:"text-xs font-medium bg-indigo-600 pl-2 pr-2 pt-1 mr-1 rounded text-white"},(0,i.v_)(e),1)))),128))]),(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>t.closeModal&&t.closeModal(...e)),type:"button",class:"z-50 absolute top-2 right-2"},[(0,s.Lk)("div",u,[(0,s.bF)(p,{icon:["fas","times"],class:"text-white mt-[7px] font-sm"})])])])),_:1}),(0,s.Lk)("div",null,[(0,s.bF)(r.A,{onSelectFileTrigger:t.selectFileTrigger,Mode:t.mode,AllowFile:t.isAllow,CallbackFunc:t.isCallback},null,8,["onSelectFileTrigger","Mode","AllowFile","CallbackFunc"])])])),_:1},8,["class"])])),_:1})])])):(0,s.Q3)("",!0)])),_:1},8,["onClose"])])),_:1},8,["show"])}}});const f=m;var b=f}}]);
//# sourceMappingURL=3475.29805fe0.js.map