"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[3679],{93679:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var o=n(20641);function l(e,t,n,l,a,i){return(0,o.uX)(),(0,o.Wv)((0,o.$y)(i.componentName))}var a=n(52968),i=n(75220),r=n(40475),s=n(90033),d=n(53751);const m={class:"email-template"},u={key:0},c={key:1},p={key:2},h=["onClick"];function g(e,t,n,l,a,i){const r=(0,o.g2)("Product"),g=(0,o.g2)("EmailBuilder"),k=(0,o.g2)("EmailPreview");return(0,o.uX)(),(0,o.CE)("div",m,[(0,o.bF)(r),(0,o.Lk)("h2",null,"Email Template "+(0,s.v_)(a.configId),1),a.showBuilder?((0,o.uX)(),(0,o.CE)("div",u,[(0,o.bF)(g,{templateContent:a.templateContent,onSaveTemplate:i.saveBuilderData,onUpdateTemplate:i.updateBuilderData,onBackToList:i.navigateBackToList,onShowPreview:i.triggerShowPreview},null,8,["templateContent","onSaveTemplate","onUpdateTemplate","onBackToList","onShowPreview"])])):a.showPreview?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(k,{config:a.templateContent,onBackToBuilder:i.navigateBackToBuilder},null,8,["config","onBackToBuilder"])])):((0,o.uX)(),(0,o.CE)("div",p,[(0,o.Lk)("div",null,[t[4]||(t[4]=(0,o.Lk)("label",null,"Template Name:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.templateName=e),placeholder:"Enter template name"},null,512),[[d.Jo,a.templateName]])]),(0,o.Lk)("div",null,[t[5]||(t[5]=(0,o.Lk)("label",null,"Template Code:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.templateCode=e),placeholder:"Enter template code"},null,512),[[d.Jo,a.templateCode]])]),(0,o.Lk)("div",null,[t[6]||(t[6]=(0,o.Lk)("label",null,"Email Content:",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.content=e),placeholder:"Enter content"},null,512),[[d.Jo,a.content]])]),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.saveTemplate&&i.saveTemplate(...e))},"Save Template"),(0,o.Lk)("p",null,(0,s.v_)(a.message),1),t[7]||(t[7]=(0,o.Lk)("h3",null,"Templates List",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.templates,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e._id},[(0,o.Lk)("a",{onClick:(0,d.D$)((t=>i.openBuilder(e._id)),["prevent"])},(0,s.v_)(e.name),9,h)])))),128))])]))])}n(14603),n(47566),n(98721);function k(e,t,n,l,a,i){return(0,o.uX)(),(0,o.CE)("div",null,[t[10]||(t[10]=(0,o.Lk)("h2",null,"Create New Product",-1)),(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,d.D$)(((...e)=>i.createProduct&&i.createProduct(...e)),["prevent"]))},[(0,o.Lk)("div",null,[t[5]||(t[5]=(0,o.Lk)("label",{for:"name"},"Product Name:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.product.name=e),id:"name",required:""},null,512),[[d.Jo,a.product.name]])]),(0,o.Lk)("div",null,[t[6]||(t[6]=(0,o.Lk)("label",{for:"price"},"Price:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=e=>a.product.price=e),id:"price",required:""},null,512),[[d.Jo,a.product.price]])]),(0,o.Lk)("div",null,[t[7]||(t[7]=(0,o.Lk)("label",{for:"description"},"Description:",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.product.description=e),id:"description"},null,512),[[d.Jo,a.product.description]])]),(0,o.Lk)("div",null,[t[8]||(t[8]=(0,o.Lk)("label",{for:"image"},"Image URL:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=e=>a.product.image_url=e),id:"image",required:""},null,512),[[d.Jo,a.product.image_url]])]),t[9]||(t[9]=(0,o.Lk)("button",{type:"submit"},"Create Product",-1))],32)])}n(64979);var b=n(94335),v={data(){return{product:{name:"",price:"",description:"",image_url:""}}},methods:{async createProduct(){const e={name:this.product.name,regular_price:this.product.price.toString(),description:this.product.description,images:[{src:this.product.image_url}]},t=btoa("ck_ed64b8d78cdee89d97aa1ac3dece0c715e95cd58:cs_0f46af30389dfb6a140847900b12567dc7dc5412");try{const n=await b.A.post("https://espada-fashion.com/wp-json/wc/v2/products",e,{headers:{"Content-Type":"application/json",Authorization:`Basic ${t}`}});console.log("Product created successfully:",n.data)}catch(n){console.error("Error creating product:",n.response?n.response.data:n.message)}}}},L=n(64621);const f=(0,L.A)(v,[["render",k],["__scopeId","data-v-7ab43dca"]]);var C=f;const w={class:"email-builder"};function U(e,t,n,l,a,i){return(0,o.uX)(),(0,o.CE)("div",w,[t[29]||(t[29]=(0,o.Lk)("h2",null,"Email Builder",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("backToList"))},"Back to List"),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.showPreview&&i.showPreview(...e))},"Preview Template"),(0,o.Lk)("div",null,[t[15]||(t[15]=(0,o.Lk)("label",null,"Logo URL:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.logoUrl=e),placeholder:"Enter logo URL"},null,512),[[d.Jo,a.logoUrl]])]),(0,o.Lk)("div",null,[t[17]||(t[17]=(0,o.Lk)("label",null,"Logo Alignment:",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.logoAlignment=e)},t[16]||(t[16]=[(0,o.Lk)("option",{value:"left"},"Left",-1),(0,o.Lk)("option",{value:"center"},"Center",-1),(0,o.Lk)("option",{value:"right"},"Right",-1)]),512),[[d.u1,a.logoAlignment]])]),(0,o.Lk)("div",null,[t[18]||(t[18]=(0,o.Lk)("label",null,"Banner Image URL:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.bannerImageUrl=e),placeholder:"Enter banner image URL"},null,512),[[d.Jo,a.bannerImageUrl]])]),(0,o.Lk)("div",null,[t[19]||(t[19]=(0,o.Lk)("label",null,"Banner URL:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>a.bannerUrl=e),placeholder:"Enter banner URL"},null,512),[[d.Jo,a.bannerUrl]])]),(0,o.Lk)("div",null,[t[20]||(t[20]=(0,o.Lk)("label",null,"Subheader:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>a.subheader=e),placeholder:"Enter subheader text"},null,512),[[d.Jo,a.subheader]])]),(0,o.Lk)("div",null,[t[21]||(t[21]=(0,o.Lk)("label",null,"Email Content:",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>a.content=e),placeholder:"Enter content"},null,512),[[d.Jo,a.content]])]),(0,o.Lk)("div",null,[t[22]||(t[22]=(0,o.Lk)("label",null,"Footer Text:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>a.footerText=e),placeholder:"Enter footer text"},null,512),[[d.Jo,a.footerText]])]),(0,o.Lk)("div",null,[t[23]||(t[23]=(0,o.Lk)("label",null,"Footer Column 1:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>a.footerColumn1=e),placeholder:"Enter footer column 1 text"},null,512),[[d.Jo,a.footerColumn1]])]),(0,o.Lk)("div",null,[t[24]||(t[24]=(0,o.Lk)("label",null,"Footer Column 2:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>a.footerColumn2=e),placeholder:"Enter footer column 2 text"},null,512),[[d.Jo,a.footerColumn2]])]),(0,o.Lk)("div",null,[t[25]||(t[25]=(0,o.Lk)("label",null,"Footer Column 3:",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>a.footerColumn3=e),placeholder:"Enter footer column 3 text"},null,512),[[d.Jo,a.footerColumn3]])]),(0,o.Lk)("div",null,[t[27]||(t[27]=(0,o.Lk)("label",null,"Heading Alignment:",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>a.headingAlignment=e)},t[26]||(t[26]=[(0,o.Lk)("option",{value:"left"},"Left",-1),(0,o.Lk)("option",{value:"center"},"Center",-1),(0,o.Lk)("option",{value:"right"},"Right",-1)]),512),[[d.u1,a.headingAlignment]])]),(0,o.Lk)("div",null,[t[28]||(t[28]=(0,o.Lk)("label",null,"Heading Font Size:",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=e=>a.headingFontSize=e),placeholder:"Enter heading font size in px"},null,512),[[d.Jo,a.headingFontSize]])]),(0,o.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>i.updateTemplate&&i.updateTemplate(...e))},"Save Template")])}var T={props:{templateContent:{type:Object,default:()=>({})}},data(){return{logoUrl:this.templateContent.logoUrl||"",logoAlignment:this.templateContent.logoAlignment||"left",bannerImageUrl:this.templateContent.bannerImageUrl||"",bannerUrl:this.templateContent.bannerUrl||"",subheader:this.templateContent.subheader||"",content:this.templateContent.content||"",footerText:this.templateContent.footerText||"",footerColumn1:this.templateContent.footerColumns?.[0]||"",footerColumn2:this.templateContent.footerColumns?.[1]||"",footerColumn3:this.templateContent.footerColumns?.[2]||"",headingAlignment:this.templateContent.headingAlignment||"left",headingFontSize:this.templateContent.headingFontSize||18}},watch:{templateContent:{handler(e){this.logoUrl=e.logoUrl||"",this.logoAlignment=e.logoAlignment||"left",this.bannerImageUrl=e.bannerImageUrl||"",this.bannerUrl=e.bannerUrl||"",this.subheader=e.subheader||"",this.content=e.content||"",this.footerText=e.footerText||"",this.footerColumn1=e.footerColumns?.[0]||"",this.footerColumn2=e.footerColumns?.[1]||"",this.footerColumn3=e.footerColumns?.[2]||"",this.headingAlignment=e.headingAlignment||"left",this.headingFontSize=e.headingFontSize||18},deep:!0,immediate:!0}},methods:{updateTemplate(){const e={logoUrl:this.logoUrl,logoAlignment:this.logoAlignment,bannerImageUrl:this.bannerImageUrl,bannerUrl:this.bannerUrl,subheader:this.subheader,content:this.content,footerText:this.footerText,footerColumns:[this.footerColumn1,this.footerColumn2,this.footerColumn3],headingAlignment:this.headingAlignment,headingFontSize:this.headingFontSize};this.$emit("updateTemplate",e)},showPreview(){const e={logoUrl:this.logoUrl,logoAlignment:this.logoAlignment,bannerImageUrl:this.bannerImageUrl,bannerUrl:this.bannerUrl,subheader:this.subheader,content:this.content,footerText:this.footerText,footerColumns:[this.footerColumn1,this.footerColumn2,this.footerColumn3],headingAlignment:this.headingAlignment,headingFontSize:this.headingFontSize};this.$emit("showPreview",e)}}};const E=(0,L.A)(T,[["render",U],["__scopeId","data-v-68295f83"]]);var I=E;const B={class:"email-preview"},y={class:"preview-container"},P=["srcdoc"];function S(e,t,n,l,a,i){return(0,o.uX)(),(0,o.CE)("div",B,[t[1]||(t[1]=(0,o.Lk)("h2",null,"Email Preview",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("backToBuilder"))},"Edit Template"),(0,o.Lk)("div",y,[(0,o.Lk)("iframe",{srcdoc:i.previewContent,frameborder:"0",class:"preview-frame"},null,8,P)])])}var A=n(29493),_={props:{config:{type:Object,required:!0}},computed:{previewContent(){const e="\n          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam in venenatis enim. Vivamus nec gravida velit</p>\n          <p>Praesent auctor arcu eget turpis facilisis, nec facilisis libero convallis.</p>\n        ",t="Sample Email Subject";return(0,A.E)(this.config,{subject:this.config.subject||t,content:this.config.content||e})}}};const F=(0,L.A)(_,[["render",S],["__scopeId","data-v-243e1e7a"]]);var x=F,J=n(40471);const V=new J.A(!1),N=r.A.get("configs"),z=r.A.get("session");var D={components:{EmailBuilder:I,EmailPreview:x,Product:C},data(){return{templateName:"",templateCode:"",content:"",configId:null,message:"",showBuilder:!1,showPreview:!1,templates:[],templateContent:{}}},methods:{async addEmailTemplate(){try{const e=await V.POST("email_template/",{data:{name:this.templateName,code:this.templateCode,content:this.content,unit:z.current._id||N.siteID}},N.key);200===e.status&&(this.configId=e.data._id,this.message="Email template saved!",this.loadTemplates())}catch(e){console.error("Error adding email template:",e),this.message="Error saving template"}},async updateEmailTemplate(e){try{const t=await V.PUT(`email_template/${this.configId}`,{data:{name:this.templateName,code:this.templateCode,content:JSON.stringify(e),_id:void 0}},N.key);200===t.status&&(this.message="Email template updated!",this.loadTemplates())}catch(t){console.error("Error updating email template:",t),this.message="Error updating template"}},async loadEmailTemplate(e){try{const t=await V.GET(`email_template/${e}`,N.key);if(200===t.status){const e=t.data;this.templateContent=JSON.parse(e.content)||{},this.templateName=e.name||"",this.templateCode=e.code||"",this.configId=e._id}}catch(t){console.error("Error loading email template:",t)}},async loadTemplates(){try{const e=await V.POST("email_template/query",{method:"find",args:[{unit:z.current._id||N.siteID}]},N.key);200===e.status&&e.data.length>0&&(this.templates=e.data)}catch(e){console.error("Error loading templates:",e)}},async openBuilder(e){await this.loadEmailTemplate(e),this.showBuilder=!0;const t=new URL(window.location);t.searchParams.set("itemID",e),window.history.pushState({},"",t)},saveTemplate(){this.configId?this.updateEmailTemplate(this.templateContent):this.addEmailTemplate()},saveBuilderData(e){this.content=JSON.stringify(e),this.saveTemplate(),this.showBuilder=!1,this.removeItemIdFromUrl()},updateBuilderData(e){this.updateEmailTemplate(e),this.showBuilder=!1,this.removeItemIdFromUrl()},triggerShowPreview(e){this.templateContent=e,this.showPreview=!0,this.showBuilder=!1},navigateBackToBuilder(){this.showPreview=!1,this.showBuilder=!0},navigateBackToList(){this.showBuilder=!1,this.clearTemplateSelection(),this.removeItemIdFromUrl()},clearTemplateSelection(){this.templateName="",this.templateCode="",this.content="",this.configId=null,this.templateContent={}},removeItemIdFromUrl(){const e=new URL(window.location);e.searchParams.delete("itemID"),window.history.pushState({},"",e)}},created(){this.loadTemplates();const e=new URLSearchParams(window.location.search),t=e.get("itemID");t&&this.openBuilder(t)}};const R=(0,L.A)(D,[["render",g],["__scopeId","data-v-15e40171"]]);var X=R,$={name:"Page Item",components:{Backend:X,Frontend:X},data(){return{session:r.A.get("session")}},setup(){const e=(0,i.lq)(),t=e.meta.title;(0,a.K7)(t)},computed:{componentName(){return"backend"===this.session.interface?"Backend":"frontend"===this.session.interface?"Frontend":(console.error("Invalid interface:",this.session.interface),null)}}};const j=(0,L.A)($,[["render",l]]);var O=j}}]);
//# sourceMappingURL=3679.4aada759.js.map