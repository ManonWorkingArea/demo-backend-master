"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[3734],{90689:function(e,t,s){s.r(t),s.d(t,{default:function(){return Ce}});var o=s(20641);function a(e,t,s,a,n,i){const l=(0,o.g2)("Detail",!0);return this.login?((0,o.uX)(),(0,o.Wv)(l,{key:0})):(0,o.Q3)("",!0)}var n=s(52968),i=s(75220),l=(s(44114),s(90033)),r=s(53751);const c={key:1,class:"text-center"},d={key:2},u={class:"mx-auto max-w-3xl px-4 mt-5 sm:px-6 md:flex md:items-center md:justify-between md:space-x-5 lg:max-w-7xl lg:px-8"},p={class:"flex items-center space-x-5"},g={class:"text-2xl font-bold text-gray-900"},m={class:"justify-stretch mt-6 flex flex-col-reverse space-y-4 space-y-reverse sm:flex-row-reverse sm:justify-end sm:space-y-0 sm:space-x-3 sm:space-x-reverse md:mt-0 md:flex-row md:space-x-3"},h={class:"mx-auto mt-8 grid max-w-3xl grid-cols-1 gap-6 sm:px-6 lg:max-w-7xl lg:grid-flow-col-dense lg:grid-cols-1"},y={class:"space-y-6 lg:col-span-2 lg:col-start-1"},f={"aria-labelledby":"notes-title"},x={class:"bg-white shadow sm:overflow-hidden sm:rounded-lg"},b={class:"divide-y divide-gray-200"},w={class:"px-4 py-5 sm:px-6 relative"},k={id:"notes-title",class:"text-lg font-bold text-gray-900"},v={class:"font-bold text-indigo-300"},L={class:"font-bold text-indigo-300"},C={class:"font-bold text-indigo-300"},F={class:"absolute top-4 right-4 ml-3 inline-flex items-center"},D={class:"px-4 py-6 sm:px-6"},_=["innerHTML"],T={"aria-labelledby":"notes-title",id:"root-panel"},E={class:"bg-white shadow sm:overflow-hidden sm:rounded-lg"},I={class:"divide-y divide-gray-200"},A={class:"px-4 py-5 sm:px-6 relative"},O={class:"pl-5 pr-5 pb-5"},j=["id"],B={class:"w-full block text-base font-bold text-gray-900 border-b border-gray-200 pb-2 pt-2 hover:text-blue-600 hover:font-bold"},X={class:"float-left"},W=["onClick","innerHTML"],q={class:"mt-2 w-full float-left relative"},S={key:0,type:"radio",checked:"",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:"",readonly:""},Q=["id"],M={class:"ml-3 block text-base font-medium text-gray-700"},P={class:"pb-3 font-bold flex justify-between items-center"},U={class:"border-t border-gray-200 grid grid-cols-2 gap-2 mb-2 py-3 px-2"},$={class:"col-span-2"},V={class:"pb-3"},R={class:"mt-4"},H={class:"space-y-4 sm:flex sm:items-center sm:space-y-0 sm:space-x-10"},J={class:"flex items-center"},K=["onUpdate:modelValue"],N={class:"flex items-center"},Y=["onUpdate:modelValue"],G={class:"flex items-center"},z=["onUpdate:modelValue"],Z={class:"pb-3"},ee=["onUpdate:modelValue"],te=["onUpdate:modelValue","id","name","value"],se=["onUpdate:modelValue","id","name","value"],oe={for:"name",class:"w-full block text-base font-medium text-gray-900 ml-2"},ae=["onUpdate:modelValue"],ne=["onClick"],ie={class:"bg-gray-50 border-t border-gray-200 p-2 text-right flex justify-between"},le=["onClick"],re=["onClick"],ce=["onClick"];function de(e,t,s,a,n,i){const de=(0,o.g2)("FileBrowser"),ue=(0,o.g2)("Loader"),pe=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[n.FileBrowserOpen?((0,o.uX)(),(0,o.Wv)(de,{key:0,isWindowsOpen:!0,allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:i.changeFileTrigger,onSelectFileTrigger:i.selectFileTrigger},null,8,["onFileBrowserTrigger","onSelectFileTrigger"])):(0,o.Q3)("",!0),n.loading_sources?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(ue)])),n.loading_sources?((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",u,[(0,o.Lk)("div",p,[(0,o.Lk)("div",null,[(0,o.Lk)("h1",g,(0,l.v_)(n.courseData.name),1),t[7]||(t[7]=(0,o.Fv)('<p class="text-sm font-medium text-gray-500"> หมวดหมู่ <a href="#" class="text-indigo-400">การตลาด</a><span class="font-medium text-gray-200">|</span> การแสดงผล <a href="#" class="text-indigo-400">บุฟเฟต์</a><span class="font-medium text-gray-200">|</span> ประเภท <a href="#" class="text-indigo-400">เรียนออนไลน์</a></p>',1))])]),(0,o.Lk)("div",m,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/lesson/detail/"+this.history)),type:"button",class:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-100"},[(0,o.bF)(pe,{icon:["fas","chevron-left"],class:"text-black text-[12px] mr-2"}),t[8]||(t[8]=(0,o.eW)(" ย้อนกลับ "))])])]),(0,o.Lk)("div",h,[(0,o.Lk)("div",y,[(0,o.Lk)("section",f,[(0,o.Lk)("div",x,[(0,o.Lk)("div",b,[(0,o.Lk)("div",w,[(0,o.Lk)("h2",k,(0,l.v_)(n.examData.name),1),(0,o.Lk)("span",null,[t[9]||(t[9]=(0,o.eW)("ข้อสอบ : ")),(0,o.Lk)("span",v,(0,l.v_)(n.examData.total),1),t[10]||(t[10]=(0,o.eW)(" ข้อ"))]),t[15]||(t[15]=(0,o.Lk)("span",{class:"font-medium text-gray-200"},"|",-1)),(0,o.Lk)("span",null,[t[11]||(t[11]=(0,o.eW)("เวลาสอบ : ")),(0,o.Lk)("span",L,(0,l.v_)(n.examData.timer),1),t[12]||(t[12]=(0,o.eW)(" นาที"))]),t[16]||(t[16]=(0,o.Lk)("span",{class:"font-medium text-gray-200"},"|",-1)),(0,o.Lk)("span",null,[t[13]||(t[13]=(0,o.eW)("ประเภท : ")),(0,o.Lk)("span",C,(0,l.v_)(n.examData.type),1)]),(0,o.Lk)("div",F,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$router.push("/lesson/exam/edit/"+this.dataItem)),type:"button",class:"mr-3 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-100"},[(0,o.bF)(pe,{icon:["fas","edit"],class:"text-black pr-3"}),t[14]||(t[14]=(0,o.eW)(" แก้ไขข้อมูล "))]),(0,o.Lk)("button",{onClick:t[2]||(t[2]=t=>e.deleteExam(this.dataItem)),type:"button",class:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-100"},[(0,o.bF)(pe,{icon:["fas","trash"],class:"text-black"})])])]),(0,o.Lk)("div",D,[(0,o.Lk)("div",{innerHTML:n.examData.description},null,8,_)])])])]),(0,o.Lk)("section",T,[(0,o.Lk)("div",E,[(0,o.Lk)("div",I,[(0,o.Lk)("div",A,[t[18]||(t[18]=(0,o.Lk)("h2",{id:"notes-title",class:"text-lg font-bold text-gray-900"},"ข้อสอบทั้งหมด",-1)),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(0,r.D$)((e=>i.addQuestion(n.questionData.length)),["stop"])),type:"button",class:"absolute top-4 right-4 ml-3 inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(pe,{icon:["fas","square-plus"],class:"text-gray-200 pr-3"}),t[17]||(t[17]=(0,o.eW)(" เพิ่มข้อสอบ "))])]),(0,o.Lk)("div",O,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.questionData,((s,a)=>((0,o.uX)(),(0,o.CE)("div",{key:s._id,class:(0,l.C4)(["p-2 mt-2 cursor-pointer",{"border-gray-300":n.selectedExamIndex===a,"mb-[4px]":n.selectedExamIndex===a,"border-[1px]":n.selectedExamIndex===a,"hover:bg-gray-50 hover:border-gray-200":n.selectedExamIndex!==a,"shadow-lg":n.selectedExamIndex===a}]),id:`panel-${a}`},[(0,o.Lk)("fieldset",{class:(0,l.C4)({hidden:n.selectedExamIndex===a,"opacity-10":null!==n.selectedExamIndex&&e.selectedPlayerIndex!==a,"pointer-events-none":null!==n.selectedExamIndex&&n.selectedExamIndex!==a})},[(0,o.Lk)("div",B,[(0,o.Lk)("div",X,(0,l.v_)(a+1)+".",1),(0,o.Lk)("div",{onClick:e=>i.togglePanel(a,s),innerHTML:s.detail},null,8,W)]),(0,o.Lk)("div",q,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.answers,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"flex items-center pb-2"},[s.correct===e._id?((0,o.uX)(),(0,o.CE)("input",S)):((0,o.uX)(),(0,o.CE)("input",{key:1,id:e._id,type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:"",readonly:""},null,8,Q)),(0,o.Lk)("label",M,(0,l.v_)(e.detail),1)])))),128))])],2),i.isOpenPanel(a)?((0,o.uX)(),(0,o.CE)("div",{key:0,class:(0,l.C4)(["mt-2 relative",{isblock:n.isLoading}]),"data-content":"กำลังบันทึกข้อมูล..."},[(0,o.Lk)("div",P,[(0,o.Lk)("span",null,"แก้ไขข้อสอบข้อที่ "+(0,l.v_)(a+1),1),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(0,r.D$)(((...e)=>i.hidePanel&&i.hidePanel(...e)),["stop"])),type:"button",class:"mr-1 border border-transparent bg-white shadow-sm border border-gray-400 px-4 py-2 text-sm font-medium text-gray-600 shadow-sm hover:bg-gray-100"},[(0,o.bF)(pe,{icon:["fas","times"],class:"text-gray-600 pr-2"}),t[19]||(t[19]=(0,o.eW)(" ปิด "))])]),(0,o.Lk)("div",U,[(0,o.Lk)("div",$,[(0,o.Lk)("div",V,[t[23]||(t[23]=(0,o.Lk)("label",{for:"result",class:"block text-base font-medium text-gray-900"},"ประเภทคำถาม",-1)),(0,o.Lk)("fieldset",R,[(0,o.Lk)("div",H,[(0,o.Lk)("div",J,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e=>s.type=e,checked:"",id:"type_general",value:"text",name:"type",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,K),[[r.XL,s.type]]),t[20]||(t[20]=(0,o.Lk)("label",{for:"type_general",class:"ml-3 block text-sm font-medium text-gray-700"},"text",-1))]),(0,o.Lk)("div",N,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e=>s.type=e,id:"type_pre",value:"pre",name:"image",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,Y),[[r.XL,s.type]]),t[21]||(t[21]=(0,o.Lk)("label",{for:"type_pre",class:"ml-3 block text-sm font-medium text-gray-700"},"image",-1))]),(0,o.Lk)("div",G,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":e=>s.type=e,id:"type_post",value:"post",name:"video",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,z),[[r.XL,s.type]]),t[22]||(t[22]=(0,o.Lk)("label",{for:"type_post",class:"ml-3 block text-sm font-medium text-gray-700"},"video",-1))])])])]),(0,o.Lk)("div",Z,[t[24]||(t[24]=(0,o.Lk)("div",{class:"block text-base font-bold text-gray-900"},"โจทย์",-1)),s&&s.detail?(0,o.bo)(((0,o.uX)(),(0,o.CE)("textarea",{key:0,"onUpdate:modelValue":e=>s.detail=e,onFocus:t[5]||(t[5]=(...e)=>i.inputFocusHandler&&i.inputFocusHandler(...e)),rows:"3",cols:"20",class:"mt-1 block w-full rounded-sm border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},"                              ",40,ee)),[[r.Jo,s.detail]]):(0,o.Q3)("",!0)])]),t[25]||(t[25]=(0,o.Lk)("div",{class:"block text-base font-bold text-gray-900"},"คำตอบ",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.answers,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"col-span-2 flex items-center"},[s.correct===e._id?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,"onUpdate:modelValue":e=>s.correct=e,id:e._id,name:s._id,value:e._id,type:"radio",checked:"",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,te)),[[r.XL,s.correct]]):(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:1,"onUpdate:modelValue":e=>s.correct=e,id:e._id,name:s._id,value:e._id,type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,se)),[[r.XL,s.correct]]),(0,o.Lk)("label",oe,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t=>e.detail=t,onFocus:t[6]||(t[6]=(...e)=>i.inputFocusHandler&&i.inputFocusHandler(...e)),type:"text",autocomplete:"detail",class:"mt-1 block w-full rounded-sm border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,40,ae),[[r.Jo,e.detail]])]),(0,o.Lk)("button",{onClick:t=>i.deleteAnswer(e._id),class:"p-2 text-gray-600 hover:text-red-600 focus:outline-none"},[(0,o.bF)(pe,{icon:["fas","trash"],class:"text-lg"})],8,ne)])))),128))]),(0,o.Lk)("div",ie,[(0,o.Lk)("button",{onClick:e=>i.handleButtonClick(s),type:"button",class:"border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"},[(0,o.bF)(pe,{icon:["fas","trash"],class:"text-gray-200 pr-2"}),t[26]||(t[26]=(0,o.eW)(" ลบ "))],8,le),(0,o.Lk)("div",null,[(0,o.Lk)("button",{onClick:(0,r.D$)((e=>i.addAnswer(s.answers.length,s._id)),["stop"]),type:"button",class:"mr-1 border border-transparent bg-white shadow-sm border border-gray-400 px-4 py-2 text-sm font-medium text-gray-600 shadow-sm hover:bg-gray-100"},[(0,o.bF)(pe,{icon:["fas","plus"],class:"text-gray-600 pr-2"}),t[27]||(t[27]=(0,o.eW)(" เพิ่มคำตอบ "))],8,re),(0,o.Lk)("button",{onClick:(0,r.D$)((e=>i.updateAnswer(s)),["stop"]),type:"button",class:"border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(pe,{icon:["fas","save"],class:"text-gray-200 pr-2"}),t[28]||(t[28]=(0,o.eW)(" บันทึกข้อมูล "))],8,ce)])])],2)):(0,o.Q3)("",!0)],10,j)))),128))])])])])])])])):(0,o.Q3)("",!0)],64)}s(81454);var ue=s(59911),pe=s.n(ue),ge=s(75435),me=s(40687),he=s(40475),ye=s(95093),fe=s.n(ye);fe()().format();var xe={data(){const e=he.A.get("session");return{configs:he.A.get("configs"),courseData:[],examData:[],schoolAdmin:[],questionData:[],parentID:"",dataItem:this.$route.params.id,history:this.$route.params.history,accessToken:e.token,login:e.login,master:e.master,selectCourseCover:"",cover:"",count:"",loading_sources:!0,FileBrowserOpen:!1,readMoreActivated:!1,selectedExamIndex:null,isLoading:!1,longText:"",endpoint:""}},components:{Loader:ge.A,FileBrowser:me.A},methods:{inputFocusHandler(e){e.stopPropagation()},async handleButtonClick(e){console.log(e);try{e.answers.length<=0?await this.deleteQuestion(e._id):await this.deleteQuestionAnswer(e),this.hidePanel()}catch(t){console.error("An error occurred:",t)}},togglePanel(e){if(this.isOpenPanel(e))this.selectedExamIndex=null;else{this.selectedExamIndex=e;const t=document.getElementById(`panel-${this.selectedExamIndex}`);if(t){const e=t.getBoundingClientRect().top+window.scrollY-20;this.smoothScrollTo(e)}}},smoothScrollTo(e,t=500){const s=window.scrollY,o=e-s,a=performance.now();function n(){const l=performance.now(),r=l-a;r<t?(window.scrollTo(0,s+i(r/t)*o),requestAnimationFrame(n)):window.scrollTo(0,e)}function i(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}requestAnimationFrame(n)},isOpenPanel(e){return this.selectedExamIndex===e},hidePanel(){this.selectedExamIndex=null},dateTime(e){return fe()(e).format("DD/MM/YYYY hh:mm:ss")},activateReadMore(){this.readMoreActivated=!0},unActivateReadMore(){this.readMoreActivated=!1},async getData(e=!1){try{e?console.log("Get Data Silent : Start"):this.loading_sources=!1;const t=await fetch("https://gateway.cloudrestfulapi.com/api/exam/"+this.dataItem,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}}),s=await t.json();if(console.log(s),200===t.status){this.examData=s,this.parentID=s.courseId;const t=await this.getCourseData(this.parentID),o=await this.getQuestionData(this.dataItem);this.questionData=o,console.log("examData",this.examData),console.log("questionData",this.questionData),this.questionData=await Promise.all(this.questionData.map((async e=>{console.log("element",e._id);const t=await fetch("https://gateway.cloudrestfulapi.com/api/answer/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{questionID:e._id}]}]})}),s=await t.json();return e.answers=s,e}))),this.count=this.questionData.length,console.log("questionData",this.questionData),console.log("courseReturn",t),t&&(this.courseData=t,e?console.log("Get Data Silent : Finish"):this.loading_sources=!0)}}catch(t){console.log(t)}},async getCourseData(e){if(he.A.get("session","login"))try{const t=await fetch("https://gateway.cloudrestfulapi.com/api/"+this.endpoint+"/"+e,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}});return await t.json()}catch(t){console.log(t)}},async getQuestionData(e){if(he.A.get("session","login"))try{const t=await fetch("https://gateway.cloudrestfulapi.com/api/questions/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{examID:e}]}]})});return await t.json()}catch(t){console.log(t)}},async addQuestion(e){try{const t=await fetch("https://gateway.cloudrestfulapi.com/api/questions/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{examID:this.dataItem,detail:"โจทย์สำหรับ "+this.examData.name+"ข้อที่ "+parseInt(("0"+e++).slice(-2)),type:"text",order:parseInt(("0"+e++).slice(-2))},options:{}})});await t.json(),200===t.status&&await this.getData(!0)}catch(t){console.log(t)}},async addAnswer(e,t){try{this.isLoading=!0;const s=await fetch("https://gateway.cloudrestfulapi.com/api/answer/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{questionID:t,order:parseInt(("0"+e++).slice(-2))},options:{}})});await s.json(),200===s.status&&await this.getData(!0)}catch(s){console.log(s)}finally{this.isLoading=!1}},changeFileTrigger(e){this.FileBrowserOpen=e},selectFileTrigger(e){void 0!=e&&(this.selectCourseCover=e,console.log("selectFileReturnFunction",e),this.updataCover(e))},async deleteQuestion(e){if(he.A.get("session","login"))try{console.log("question",e),this.$swal({title:"ต้องการลบข้อมูลนี้ ?",text:"หลังจากลบแล้วจะไม่สามารถกู้คืนข้อมูลนี้ได้อีก !",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"ตกลง ลบเลย",cancelButtonText:"ยกเลิก",closeOnConfirm:!1,closeOnCancel:!1}).then((t=>{t.isConfirmed?(console.log("Delete"),this.confirmDeleteQuestion(e)):console.log("Cancel")}))}catch(t){console.log(t)}},async confirmDeleteQuestion(e){try{const t=await fetch("https://gateway.cloudrestfulapi.com/api/questions/"+e,{method:"DELETE",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}});await t.json(),200===t.status&&await this.getData(!0)}catch(t){console.log(t)}},async deleteQuestionAnswer(e){try{for(let t=0;t<e.answers.length;t++){const s=e.answers[t];console.log("answer",s),await this.confirmDeleteAnswer(s._id)}await this.confirmDeleteQuestion(e._id),await this.getData(!0)}catch(t){console.error("Error updating answers:",t)}},async updateAnswer(e){try{this.isLoading=!0;for(let t=0;t<e.answers.length;t++){const s=e.answers[t];console.log("answer",s),await this.updateAnswerData(s)}await this.updateQuestionData(e),await this.getData(!0)}catch(t){console.error("Error updating answers:",t)}finally{this.isLoading=!1}},async updateAnswerData(e){try{const t=await fetch("https://gateway.cloudrestfulapi.com/api/answer/"+e._id,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{detail:e.detail},options:{}})});await t.json()}catch(t){console.log(t)}},async updateQuestionData(e){try{const t=await fetch("https://gateway.cloudrestfulapi.com/api/questions/"+e._id,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{type:e.type,detail:e.detail,correct:e.correct},options:{}})});await t.json()}catch(t){console.log(t)}},async deleteAnswer(e){try{this.$swal({title:"ต้องการลบข้อมูลนี้ ?",text:"หลังจากลบแล้วจะไม่สามารถกู้คืนข้อมูลนี้ได้อีก !",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"ตกลง ลบเลย",cancelButtonText:"ยกเลิก",closeOnConfirm:!1,closeOnCancel:!1}).then((t=>{t.isConfirmed?(console.log("Delete"),this.confirmDeleteAnswer(e)):console.log("Cancel")}))}catch(t){console.log(t)}},async confirmDeleteAnswer(e){try{this.isLoading=!0;const t=await fetch("https://gateway.cloudrestfulapi.com/api/answer/"+e,{method:"DELETE",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}});await t.json(),200===t.status&&await this.getData(!0)}catch(t){console.log(t)}finally{this.isLoading=!1}},OpenFileBrowser(){this.FileBrowserOpen=!0},updated(){pe().replace()},sort(e){return e.sort(((e,t)=>e.order-t.order))}},async mounted(){try{this.master?this.endpoint="mcourse":this.endpoint="course",await this.getData()}catch(e){console.log(Error)}},setup(){}},be=s(64621);const we=(0,be.A)(xe,[["render",de]]);var ke=we,ve={name:"PlayerDetail",components:{Detail:ke},data(){return{login:he.A.get("session","login")}},methods:{},setup(){const e=(0,i.lq)(),t=e.meta.title;(0,n.K7)(t)}};const Le=(0,be.A)(ve,[["render",a]]);var Ce=Le},40687:function(e,t,s){s.d(t,{A:function(){return y}});var o=s(20641),a=s(50953),n=s(90033),i=s(94232),l=s(10797),r=s(55372);const c={key:0,class:"fixed inset-0 overflow-y-auto"},d={class:"flex min-h-full items-center justify-center p-4 text-center"},u={class:"font-medium"},p={class:"bg-black w-8 h-8 right-2 top-2 leading-8 hover:bg-gray-500"},g={props:["isWindowsOpen","allowFileType","callbackFunction"],data(){return console.log("FileBrowser props:",this.isWindowsOpen,this.allowFileType,this.callbackFunction),{SessionList:[],loading_sources:!0,activeBlock:!1,schoolId:"",isOpen:this.isWindowsOpen,isAllow:this.allowFileType,isCallback:this.callbackFunction,mode:"popup"}},components:{FileManager:r.A},watch:{isWindowsOpen(e){console.log("isWindowsOpen changed to:",e),this.isOpen=e}},methods:{selectFileTrigger(e){this.selectFileTrigger=e,this.closeModal(),this.selectFile(e)},closeModal(){this.isOpen=!1,this.$emit("fileBrowserTrigger",!1)},selectFile(e){this.$emit("fileBrowserCallback",e)}},async mounted(){console.log("FileBrowser mounted with isOpen:",this.isOpen,"isWindowsOpen:",this.isWindowsOpen)},setup(){}};var m=Object.assign(g,{__name:"FileBrowser",setup(e){return(t,s)=>{const g=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.Wv)((0,a.R1)(i.O),{appear:"",show:t.isOpen,as:"template"},{default:(0,o.k6)((()=>[(0,o.bF)((0,a.R1)(l.lG),{as:"div",onClose:t.closeModal,class:"relative z-10"},{default:(0,o.k6)((()=>[(0,o.bF)((0,a.R1)(i._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,o.k6)((()=>s[1]||(s[1]=[(0,o.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)]))),_:1}),t.loading_sources?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",d,[(0,o.bF)((0,a.R1)(i._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:(0,o.k6)((()=>[(0,o.bF)((0,a.R1)(l.Lj),{class:(0,n.C4)(["w-[60rem] z-40 transform overflow-hidden bg-white p-3 text-left align-middle shadow-xl transition-all blocking relative",[t.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},{default:(0,o.k6)((()=>[(0,o.bF)((0,a.R1)(l.L3),{as:"h3",class:"text-lg pb-2 font-bold leading-6 text-gray-900 border-b"},{default:(0,o.k6)((()=>[s[3]||(s[3]=(0,o.eW)("เลือกไฟล์ (Select File) ")),(0,o.Lk)("p",u,[s[2]||(s[2]=(0,o.eW)("อนุญาติเฉพาะไฟล์ ")),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.allowFileType,(e=>((0,o.uX)(),(0,o.CE)("span",{key:e.code,class:"text-xs font-medium bg-indigo-600 pl-2 pr-2 pt-1 mr-1 rounded text-white"},(0,n.v_)(e),1)))),128))]),(0,o.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>t.closeModal&&t.closeModal(...e)),type:"button",class:"z-50 absolute top-2 right-2"},[(0,o.Lk)("div",p,[(0,o.bF)(g,{icon:["fas","times"],class:"text-white mt-[7px] font-sm"})])])])),_:1}),(0,o.Lk)("div",null,[(0,o.bF)(r.A,{onSelectFileTrigger:t.selectFileTrigger,Mode:t.mode,AllowFile:t.isAllow,CallbackFunc:t.isCallback},null,8,["onSelectFileTrigger","Mode","AllowFile","CallbackFunc"])])])),_:1},8,["class"])])),_:1})])])):(0,o.Q3)("",!0)])),_:1},8,["onClose"])])),_:1},8,["show"])}}});const h=m;var y=h}}]);
//# sourceMappingURL=3734.b0300fa3.js.map