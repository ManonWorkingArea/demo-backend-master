{"version":3,"file":"js/4107.5938ea40.js","mappings":"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","sources":["webpack://node-backend/./src/extensions/modules/ecommerce/shop/view/Order.vue","webpack://node-backend/./src/extensions/modules/ecommerce/shop/component/Order.vue","webpack://node-backend/./src/extensions/modules/ecommerce/shop/component/order/order_front.js","webpack://node-backend/./src/extensions/modules/ecommerce/shop/component/Order.vue?b472","webpack://node-backend/./src/extensions/modules/ecommerce/shop/view/Order.vue?a184"],"sourcesContent":["<template>\n    <component :is=\"componentName\" />\n</template>\n    \n<script>\n    import { useTitle } from 'vue-page-title';\n    import { useRoute } from 'vue-router';\n    import storageManager from '@/plugins/storage';\n    import Backend from '../component/Order.vue';\n    import Frontend from '../component/Order.vue';\n    \n    export default {\n    name: 'Order List',\n    components: {\n        Backend,\n        Frontend,\n    },\n    data() {\n        return {\n            session: storageManager.get('session')\n        };\n    },\n    setup() {\n        const route = useRoute();\n        const routeName = route.meta.title;\n        useTitle(routeName);\n    },\n    computed: {\n        componentName() {\n            if (this.session.interface === 'backend') {\n                return 'Backend';\n            } else if (this.session.interface === 'frontend') {\n                return 'Frontend';\n            } else {\n                console.error('Invalid interface:', this.session.interface);\n                return null;\n            }\n        }\n    }\n    };\n</script>","<template>\n    <div>\n      <h1>Orders</h1>\n      \n      <!-- Tabs for Order Status -->\n      <div class=\"tabs\">\n        <button\n          v-for=\"status in orderStatuses\"\n          :key=\"status.code\"\n          :class=\"{ active: selectedStatus === status.code }\"\n          @click=\"selectStatus(status.code)\"\n        >\n          {{ status.name }}\n        </button>\n      </div>\n      \n      <!-- Orders List -->\n      <div v-if=\"orders.length\">\n        <h2>{{ getStatusName(selectedStatus) }} Orders</h2>\n        <ul>\n          <li v-for=\"order in orders\" :key=\"order._id\">\n            <span>Order ID: #{{ order.code }}</span><br>\n            <span>Total: ${{ order.total }}</span><br>\n            <span>Status: {{ getStatusName(order.status) }}</span><br>\n            <button @click=\"changeOrderStatus(order)\">Next Status</button>\n          </li>\n        </ul>\n      </div>\n      <div v-else>\n        <p>No orders found for this status.</p>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import { fetchOrderStatuses, fetchOrdersByStatus, updateOrderStatus } from './order/order_front';\n  \n  export default {\n    data() {\n      return {\n        orderStatuses: [],\n        orders: [],\n        selectedStatus: '',\n      };\n    },\n    async created() {\n      await this.loadOrderStatuses();\n      if (this.orderStatuses.length) {\n        this.selectedStatus = this.orderStatuses[0].code;\n        await this.loadOrdersByStatus();\n      }\n    },\n    methods: {\n      async loadOrderStatuses() {\n        try {\n          this.orderStatuses = await fetchOrderStatuses();\n        } catch (error) {\n          console.error('Error loading order statuses:', error);\n        }\n      },\n      async loadOrdersByStatus() {\n        try {\n          this.orders = await fetchOrdersByStatus(this.selectedStatus);\n        } catch (error) {\n          console.error('Error loading orders:', error);\n        }\n      },\n      selectStatus(statusCode) {\n        this.selectedStatus = statusCode;\n        this.loadOrdersByStatus();\n      },\n      getStatusName(statusCode) {\n        const status = this.orderStatuses.find(status => status.code === statusCode);\n        return status ? status.name : statusCode;\n      },\n      getNextStatus(currentStatus) {\n        const currentIndex = this.orderStatuses.findIndex(status => status.code === currentStatus);\n        if (currentIndex >= 0 && currentIndex < this.orderStatuses.length - 1) {\n          return this.orderStatuses[currentIndex + 1].code;\n        }\n        return null;\n      },\n      async changeOrderStatus(order) {\n        const nextStatus = this.getNextStatus(order.status);\n        if (nextStatus) {\n          try {\n            await updateOrderStatus(order._id, nextStatus);\n            this.loadOrdersByStatus();\n          } catch (error) {\n            console.error('Error updating order status:', error);\n          }\n        } else {\n          alert('This order is already at the final status.');\n        }\n      }\n    }\n  };\n  </script>\n  \n  <style scoped>\n  .tabs {\n    display: flex;\n    gap: 10px;\n    margin-bottom: 20px;\n  }\n  \n  .tabs button {\n    padding: 10px;\n    border: none;\n    background-color: #f0f0f0;\n    cursor: pointer;\n  }\n  \n  .tabs button.active {\n    background-color: #007bff;\n    color: white;\n  }\n  \n  .tabs button:hover {\n    background-color: #007bff;\n    color: white;\n  }\n  </style>\n  ","import requestClient from '@/plugins/requestClient';\nimport storageManager from '@/plugins/storage';\n\nconst Request = new requestClient(false);\nconst configs = storageManager.get('configs');\nconst session = storageManager.get('session');\n\nconst fetchOrderStatuses = async () => {\n    try {\n      const response = await Request.POST('shop_order_status/query', { method: 'find', args: [{ unit: session.current._id }] }, configs.key);\n      if (response.status === 200) {\n        const statuses = response.data;\n        statuses.sort((a, b) => a.order - b.order); // Sort by the 'order' field\n        return statuses;\n      }\n      throw new Error('Failed to fetch order statuses');\n    } catch (error) {\n      console.error('Error fetching order statuses:', error);\n      throw error;\n    }\n  };\n  \n\nconst fetchOrdersByStatus = async (statusCode) => {\n  try {\n    const response = await Request.POST('shop_orders/query', { method: 'find', args: [{ unit: session.current._id, status: statusCode }] }, configs.key);\n    if (response.status === 200) return response.data;\n    throw new Error('Failed to fetch orders');\n  } catch (error) {\n    console.error('Error fetching orders:', error);\n    throw error;\n  }\n};\n\nconst updateOrderStatus = async (orderId, newStatus) => {\n  try {\n    const response = await Request.PUT(`shop_orders/${orderId}`, { data: { status: newStatus } }, configs.key);\n    if (response.status === 200) return response.data;\n    throw new Error('Failed to update order status');\n  } catch (error) {\n    console.error('Error updating order status:', error);\n    throw error;\n  }\n};\n\nexport {\n  fetchOrderStatuses,\n  fetchOrdersByStatus,\n  updateOrderStatus\n};\n","import { render } from \"./Order.vue?vue&type=template&id=88174a94&scoped=true\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=88174a94&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-88174a94\"]])\n\nexport default __exports__","import { render } from \"./Order.vue?vue&type=template&id=57a857ab\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_resolveDynamicComponent","$options","componentName","class","key","_createElementBlock","_createElementVNode","_hoisted_1","_Fragment","_renderList","$data","orderStatuses","status","code","_normalizeClass","active","selectedStatus","onClick","$event","selectStatus","name","_hoisted_2","orders","length","_hoisted_3","_toDisplayString","getStatusName","order","_id","total","changeOrderStatus","_hoisted_4","_hoisted_5","_cache","Request","requestClient","configs","storageManager","get","session","fetchOrderStatuses","async","response","POST","method","args","unit","current","statuses","data","sort","a","b","Error","error","console","fetchOrdersByStatus","statusCode","updateOrderStatus","orderId","newStatus","PUT","created","this","loadOrderStatuses","loadOrdersByStatus","methods","find","getNextStatus","currentStatus","currentIndex","findIndex","nextStatus","alert","__exports__","components","Backend","Frontend","setup","route","useRoute","routeName","meta","title","useTitle","computed","interface","render"],"sourceRoot":""}