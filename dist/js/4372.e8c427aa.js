"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[4372],{50616:function(e,t,s){s.d(t,{A:function(){return u}});var a=s(20641);function l(e,t,s,l,o,i){const r=(0,a.g2)("UnderConstruction"),n=(0,a.g2)("Render");return(0,a.uX)(),(0,a.CE)("div",null,[o.page?((0,a.uX)(),(0,a.Wv)(n,{key:1,dataItem:o.page,mode:"slug"},null,8,["dataItem"])):((0,a.uX)(),(0,a.Wv)(r,{key:0}))])}var o=s(40475),i=s(21810),r=s(40368),n={data(){const e=o.A.get("configs"),t=o.A.get("session");return{configs:e,session:t,page:this.$route.params.page}},components:{Render:i.A,UnderConstruction:r.A},methods:{},setup(){},computed:{}},c=s(64621);const d=(0,c.A)(n,[["render",l]]);var u=d},54372:function(e,t,s){s.r(t),s.d(t,{default:function(){return Os}});var a=s(20641);function l(e,t,s,l,o,i){return(0,a.uX)(),(0,a.Wv)((0,a.$y)(i.componentName),{key:o.routeKey})}var o=s(52968),i=s(75220),r=s(40475),n=s(90033);const c={class:"bg-gray-50 flex cms-container"},d={class:"hidden lg:flex lg:w-64 lg:flex-col"},u={class:"flex flex-col flex-grow bg-white border-r border-gray-200 min-h-screen"},g={class:"flex items-center justify-between px-4 py-4 border-b border-gray-200 flex-shrink-0"},p={class:"px-4 py-4 border-b border-gray-200"},m={class:"space-y-2"},f={class:"flex items-center justify-between p-2 bg-blue-50 rounded-lg stats-card"},y={class:"text-sm font-semibold text-blue-600"},h={class:"px-4 py-4 border-b border-gray-200"},b={class:"space-y-1"},x=["onClick"],k={class:"flex-1 text-left"},v={class:"text-xs text-gray-500"},L={class:"px-4 py-4 border-b border-gray-200"},w={class:"space-y-1"},C={class:"px-4 py-4 border-b border-gray-200"},I={class:"space-y-2"},$={class:"flex items-center justify-between"},_={class:"text-xs text-gray-900 font-medium"},P={class:"w-full bg-gray-200 rounded-full h-1.5"},T={class:"flex items-center justify-between"},D={class:"flex items-center gap-1"},E={class:"flex items-center justify-between"},F={class:"px-4 py-4 border-b border-gray-200"},X={class:"space-y-2"},A={class:"mt-auto px-4 py-4 flex-shrink-0"},S={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},M={class:"flex-1 min-w-0"},N={class:"text-sm font-medium text-gray-900 truncate"},j={class:"flex-1 flex flex-col min-w-0"},Q={class:"lg:hidden bg-white border-b border-gray-200 px-4 py-3"},W={class:"flex items-center justify-between"},q={key:0,class:"bg-white border-b border-gray-200"},R={class:"bg-white"},H={class:"tab-folder flex border-gray-400 bg-gray-500 pt-5 pl-2 md:pl-6"},B=["onClick"],K={class:"flex items-center"},O={class:"text-sm text-gray-600 hidden md:block"},U={key:0,class:"absolute bottom-0 left-0 w-full"},V={class:"flex-1 p-4 pb-8 overflow-visible bg-gray-100"},z={key:0,class:"text-center"},J={key:1,class:"w-full"},G={class:"mx-auto px-6 sm:px-6 lg:px-6"};function Z(e,t,s,l,o,i){const r=(0,a.g2)("router-link"),Z=(0,a.g2)("font-awesome-icon"),Y=(0,a.g2)("Subhead"),ee=(0,a.g2)("Loader"),te=(0,a.g2)("Content");return(0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",d,[(0,a.Lk)("div",u,[(0,a.Lk)("div",g,[t[6]||(t[6]=(0,a.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"จัดการเนื้อหา",-1)),(0,a.bF)(r,{to:"/cms/add",class:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors duration-200",title:"เพิ่มหน้าใหม่"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.Lk)("i",{class:"fas fa-plus text-sm"},null,-1)]))),_:1})]),(0,a.Lk)("div",p,[t[9]||(t[9]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"สถิติรวม",-1)),(0,a.Lk)("div",m,[(0,a.Lk)("div",f,[t[7]||(t[7]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-blue-500 rounded-full"}),(0,a.Lk)("span",{class:"text-sm text-gray-700"},"เนื้อหาทั้งหมด")],-1)),(0,a.Lk)("span",y,(0,n.v_)(o.tabs.length),1)]),t[8]||(t[8]=(0,a.Fv)('<div class="flex items-center justify-between p-2 bg-green-50 rounded-lg stats-card" data-v-065885aa><div class="flex items-center gap-2" data-v-065885aa><div class="w-2 h-2 bg-green-500 rounded-full" data-v-065885aa></div><span class="text-sm text-gray-700" data-v-065885aa>เผยแพร่แล้ว</span></div><span class="text-sm font-semibold text-green-600" data-v-065885aa>24</span></div><div class="flex items-center justify-between p-2 bg-yellow-50 rounded-lg stats-card" data-v-065885aa><div class="flex items-center gap-2" data-v-065885aa><div class="w-2 h-2 bg-yellow-500 rounded-full" data-v-065885aa></div><span class="text-sm text-gray-700" data-v-065885aa>ร่าง</span></div><span class="text-sm font-semibold text-yellow-600" data-v-065885aa>8</span></div>',2))])]),(0,a.Lk)("div",h,[t[10]||(t[10]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"ประเภทเนื้อหา",-1)),(0,a.Lk)("nav",b,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.tabs,(e=>((0,a.uX)(),(0,a.CE)("button",{key:e.codeName,onClick:t=>i.selectTab(e.codeName),class:(0,n.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors duration-200 sidebar-menu-item",{"bg-blue-100 text-blue-700 font-medium active":o.selectedTab===e.codeName,"text-gray-600 hover:bg-gray-100 hover:text-gray-900":o.selectedTab!==e.codeName}])},[(0,a.bF)(Z,{icon:["fas",e.icon],class:"text-sm w-4"},null,8,["icon"]),(0,a.Lk)("span",k,(0,n.v_)(e.name),1),(0,a.Lk)("span",v,(0,n.v_)(e.subText),1)],10,x)))),128))])]),(0,a.Lk)("div",L,[t[15]||(t[15]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"เครื่องมือ",-1)),(0,a.Lk)("div",w,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.importData&&i.importData(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[11]||(t[11]=[(0,a.Lk)("i",{class:"fas fa-download text-blue-500 w-4"},null,-1),(0,a.Lk)("span",null,"นำเข้าข้อมูล",-1)])),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.exportData&&i.exportData(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[12]||(t[12]=[(0,a.Lk)("i",{class:"fas fa-upload text-green-500 w-4"},null,-1),(0,a.Lk)("span",null,"ส่งออกข้อมูล",-1)])),(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>i.manageTemplates&&i.manageTemplates(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[13]||(t[13]=[(0,a.Lk)("i",{class:"fas fa-copy text-purple-500 w-4"},null,-1),(0,a.Lk)("span",null,"จัดการเทมเพลต",-1)])),(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.openMediaLibrary&&i.openMediaLibrary(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[14]||(t[14]=[(0,a.Lk)("i",{class:"fas fa-images text-pink-500 w-4"},null,-1),(0,a.Lk)("span",null,"คลังสื่อ",-1)]))])]),(0,a.Lk)("div",C,[t[19]||(t[19]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"สถานะระบบ",-1)),(0,a.Lk)("div",I,[(0,a.Lk)("div",$,[t[16]||(t[16]=(0,a.Lk)("span",{class:"text-xs text-gray-600"},"พื้นที่จัดเก็บ",-1)),(0,a.Lk)("span",_,(0,n.v_)(o.systemStatus.storage.used)+"GB / "+(0,n.v_)(o.systemStatus.storage.total)+"GB",1)]),(0,a.Lk)("div",P,[(0,a.Lk)("div",{class:"bg-blue-500 h-1.5 rounded-full",style:(0,n.Tr)({width:o.systemStatus.storage.percentage+"%"})},null,4)]),(0,a.Lk)("div",T,[t[17]||(t[17]=(0,a.Lk)("span",{class:"text-xs text-gray-600"},"การเชื่อมต่อ",-1)),(0,a.Lk)("div",D,[(0,a.Lk)("div",{class:(0,n.C4)(["normal"===o.systemStatus.connection?"bg-green-500":"bg-red-500","w-2 h-2 rounded-full"])},null,2),(0,a.Lk)("span",{class:(0,n.C4)(["normal"===o.systemStatus.connection?"text-green-600":"text-red-600","text-xs font-medium"])},(0,n.v_)("normal"===o.systemStatus.connection?"ปกติ":"ขัดข้อง"),3)])]),(0,a.Lk)("div",E,[t[18]||(t[18]=(0,a.Lk)("span",{class:"text-xs text-gray-600"},"ล่าสุด",-1)),(0,a.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>i.refreshSystemStatus&&i.refreshSystemStatus(...e)),class:"text-xs text-gray-500 hover:text-blue-600 transition-colors"},(0,n.v_)(o.systemStatus.lastSync),1)])])]),(0,a.Lk)("div",F,[t[23]||(t[23]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"การดำเนินการ",-1)),(0,a.Lk)("div",X,[(0,a.bF)(r,{to:"/cms/add",class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},{default:(0,a.k6)((()=>t[20]||(t[20]=[(0,a.Lk)("i",{class:"fas fa-plus text-sm w-4"},null,-1),(0,a.Lk)("span",null,"เพิ่มหน้าใหม่",-1)]))),_:1}),(0,a.bF)(r,{to:"/cms/customize",class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},{default:(0,a.k6)((()=>t[21]||(t[21]=[(0,a.Lk)("i",{class:"fas fa-palette text-sm w-4"},null,-1),(0,a.Lk)("span",null,"ตั้งค่าการแสดงผล",-1)]))),_:1}),(0,a.bF)(r,{to:"/cms/settings",class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},{default:(0,a.k6)((()=>t[22]||(t[22]=[(0,a.Lk)("i",{class:"fas fa-cog text-sm w-4"},null,-1),(0,a.Lk)("span",null,"ตั้งค่าระบบ",-1)]))),_:1})])]),(0,a.Lk)("div",A,[(0,a.Lk)("div",S,[t[25]||(t[25]=(0,a.Lk)("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[(0,a.Lk)("i",{class:"fas fa-user text-white text-sm"})],-1)),(0,a.Lk)("div",M,[(0,a.Lk)("p",N,(0,n.v_)(o.session?.current?.name||"ผู้ใช้"),1),t[24]||(t[24]=(0,a.Lk)("p",{class:"text-xs text-gray-500"},"ผู้ดูแลระบบ",-1))])])])])]),(0,a.Lk)("div",j,[(0,a.Lk)("div",Q,[(0,a.Lk)("div",W,[t[27]||(t[27]=(0,a.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"จัดการเนื้อหา",-1)),(0,a.bF)(r,{to:"/cms/add",class:"bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200 text-sm flex items-center gap-2"},{default:(0,a.k6)((()=>t[26]||(t[26]=[(0,a.Lk)("i",{class:"fas fa-plus text-xs"},null,-1),(0,a.eW)(" เพิ่มหน้า ")]))),_:1})])]),o.loading_sources?((0,a.uX)(),(0,a.CE)("div",q,[(0,a.bF)(Y,{navigation:[{name:"เพิ่ม Page",link:"/cms/add",style:"plus",class:"primary-btn",visible:!0,type:"button"},{name:"ตั้งค่าการแสดงผล",link:"/cms/customize",style:"palette",class:"primary-btn",visible:!0,type:"button"}],onOpenPopup:e.openPopup},null,8,["onOpenPopup"])])):(0,a.Q3)("",!0),(0,a.Lk)("div",R,[(0,a.Lk)("div",H,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.tabs,(t=>((0,a.uX)(),(0,a.CE)("div",{class:(0,n.C4)(["tab-folder-item py-2 px-3 text-gray-700 transition-colors duration-200 bg-opacity-100 relative rounded-t-lg bg-gray-100 mr-2",{"bg-gray-100 text-blue-600":o.selectedTab===t.codeName&&!e.$route.params.id,"bg-gray-100 bg-opacity-30":o.selectedTab!==t.codeName||e.$route.params.id,"opacity-50 cursor-not-allowed":e.$route.params.id,"cursor-pointer hover:text-blue-600":!e.$route.params.id}]),key:t.codeName,onClick:s=>e.$route.params.id?null:i.selectTab(t.codeName)},[(0,a.Lk)("div",K,[(0,a.bF)(Z,{icon:["fas",t.icon],class:"mr-1 hidden md:block"},null,8,["icon"]),(0,a.Lk)("div",null,(0,n.v_)(t.name),1)]),(0,a.Lk)("div",O,(0,n.v_)(t.subText),1),o.selectedTab!==t.codeName||e.$route.params.id?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",U))],10,B)))),128))])]),(0,a.Lk)("div",V,[o.loading_sources?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",z,[(0,a.bF)(ee)])),o.loading_sources?((0,a.uX)(),(0,a.CE)("div",J,[(0,a.Lk)("div",G,["page"===o.selectedTab?((0,a.uX)(),(0,a.Wv)(te,{key:0,itemType:o.selectedTab,dataItem:e.$route.params.id?{id:e.$route.params.id,type:"post"}:null},null,8,["itemType","dataItem"])):(0,a.Q3)("",!0),"form"===o.selectedTab?((0,a.uX)(),(0,a.Wv)(te,{key:1,itemType:o.selectedTab,dataItem:e.$route.params.id?{id:e.$route.params.id,type:"post"}:null},null,8,["itemType","dataItem"])):(0,a.Q3)("",!0),"layout"===o.selectedTab?((0,a.uX)(),(0,a.Wv)(te,{key:2,itemType:o.selectedTab,dataItem:e.$route.params.id?{id:e.$route.params.id,type:"post"}:null},null,8,["itemType","dataItem"])):(0,a.Q3)("",!0),"menu"===o.selectedTab?((0,a.uX)(),(0,a.Wv)(te,{key:3,itemType:o.selectedTab,dataItem:e.$route.params.id?{id:e.$route.params.id,type:"post"}:null},null,8,["itemType","dataItem"])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)])])])}s(44114),s(98992),s(37550),s(14603),s(47566),s(98721);var Y=s(75435),ee=s(87814),te=(s(54520),s(53751));const se={class:"space-y-4"},ae={key:0,class:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4"},le={class:"flex items-center justify-between"},oe={class:"flex items-center gap-3"},ie={class:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center"},re={class:"text-xl font-bold text-gray-900"},ne={class:"text-sm text-gray-600"},ce={class:"flex items-center gap-2"},de={class:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4"},ue={class:"bg-white rounded-lg p-3 border border-blue-100"},ge={class:"flex items-center gap-2"},pe={class:"font-semibold text-gray-900"},me={class:"bg-white rounded-lg p-3 border border-blue-100"},fe={class:"flex items-center gap-2"},ye={class:"font-semibold text-gray-900"},he={class:"bg-white rounded-lg p-3 border border-blue-100"},be={class:"flex items-center gap-2"},xe={class:"font-semibold text-gray-900"},ke={class:"bg-white rounded-lg p-3 border border-blue-100"},ve={class:"flex items-center gap-2"},Le={class:"font-semibold text-gray-900"},we={class:"bg-white border border-gray-200 rounded-lg p-4"},Ce={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},Ie={class:"flex items-center gap-2 text-sm"},$e={key:0,class:"flex items-center gap-2"},_e={class:"font-medium text-gray-700"},Pe={class:"text-xs text-gray-500"},Te={key:1},De={class:"font-medium text-gray-700"},Ee={class:"flex flex-col md:flex-row gap-3 flex-1"},Fe={class:"flex-1 max-w-md"},Xe={class:"relative"},Ae={class:"flex gap-2"},Se={class:"flex border border-gray-200 rounded-lg overflow-hidden"},Me={class:"flex gap-2"},Ne={key:0,class:"flex items-center gap-2"},je={key:0,class:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-200"},Qe=["onClick"],We={key:1,class:"bg-blue-50 border border-blue-200 rounded-lg p-3"},qe={class:"flex items-center justify-between"},Re={class:"text-sm text-blue-700"},He={class:"flex gap-2"},Be={key:2,class:"flex items-center justify-between"},Ke={class:"flex items-center gap-2"},Oe={class:"text-lg font-semibold text-gray-900"},Ue={key:0},Ve={key:1,class:"capitalize"},ze={class:"px-2 py-1 bg-gray-100 text-gray-600 text-sm rounded-full"},Je={key:3,class:"flex items-center justify-center py-20"},Ge={key:4,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4"},Ze={class:"relative p-3"},Ye={class:"flex items-center justify-between mb-2"},et={class:"flex items-center gap-2"},tt={key:0,class:"flex-shrink-0"},st=["value"],at=["title"],lt={class:"text-[10px] leading-none"},ot={class:"flex-1 flex justify-center"},it={key:0,class:"bg-gradient-to-r from-yellow-400 to-orange-400 text-white px-2 py-0.5 rounded-full text-xs font-semibold flex items-center gap-1"},rt={key:1,class:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1"},nt={class:"flex items-center gap-2"},ct={class:"flex items-center gap-1"},dt={class:"relative opacity-0 group-hover:opacity-100 transition-opacity duration-200"},ut=["onClick"],gt={key:0,class:"absolute right-0 top-6 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20 dropdown-menu"},pt=["onClick"],mt=["onClick"],ft=["onClick"],yt={class:"px-3 pb-2"},ht={class:"font-semibold text-gray-900 group-hover/title:text-blue-600 transition-colors text-sm leading-5 line-clamp-2 mb-2 min-h-[2.5rem]"},bt={class:"flex items-center gap-1 mb-2"},xt={class:"flex-1 bg-gray-50 px-2 py-1 rounded-md"},kt={class:"text-xs text-gray-600 font-mono truncate"},vt=["onClick"],Lt={class:"space-y-1.5 mb-3"},wt={class:"flex items-center justify-between text-xs text-gray-500"},Ct={class:"flex items-center gap-1"},It={class:"flex items-center gap-1"},$t={class:"flex flex-wrap gap-1"},_t={key:0,class:"flex items-center gap-1 text-xs bg-green-50 text-green-600 px-2 py-0.5 rounded-full"},Pt={class:"border-t border-gray-100"},Tt={class:"flex items-center gap-2"},Dt=["onClick"],Et={class:"bg-gray-50 px-3 py-2 flex items-center justify-between"},Ft={class:"flex items-center gap-2"},Xt={class:"w-4 h-4 bg-green-500 text-white rounded text-xs flex items-center justify-center font-bold"},At={class:"flex items-center gap-0.5"},St=["onClick"],Mt=["onClick"],Nt=["onClick"],jt={key:0,class:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center"},Qt={class:"text-sm text-gray-500 text-center"},Wt={key:5,class:"bg-white rounded-lg border border-gray-200 overflow-hidden"},qt={class:"bg-gray-50 px-4 py-3 border-b border-gray-200"},Rt={class:"flex items-center justify-between"},Ht={class:"flex items-center gap-4"},Bt={key:0,class:"flex items-center"},Kt=["checked"],Ot={class:"text-sm text-gray-500"},Ut={class:"divide-y divide-gray-200"},Vt={class:"px-4 py-4"},zt={class:"flex items-center gap-4"},Jt={key:0,class:"flex-shrink-0"},Gt=["value"],Zt={class:"flex-shrink-0"},Yt={class:"flex-1 min-w-0"},es={class:"flex items-center gap-2 mb-1"},ts={key:0,class:"bg-gradient-to-r from-yellow-400 to-orange-400 text-white px-2 py-0.5 rounded-full text-xs font-semibold flex items-center gap-1"},ss={key:1,class:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-2 py-0.5 rounded-full text-xs font-medium flex items-center gap-1"},as={class:"flex items-center gap-2 mb-2"},ls={class:"bg-gray-100 px-2 py-1 rounded text-xs text-gray-600 font-mono"},os=["onClick"],is={class:"flex items-center gap-4 text-xs text-gray-500"},rs={class:"flex items-center gap-1"},ns={class:"flex items-center gap-1"},cs={class:"flex items-center gap-1"},ds={class:"font-medium"},us={class:"flex-shrink-0"},gs={class:"flex items-center gap-1"},ps={class:"flex-shrink-0"},ms={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200"},fs=["onClick"],ys=["onClick"],hs=["onClick"],bs=["onClick"],xs={class:"flex-shrink-0 relative"},ks=["onClick"],vs={key:0,class:"absolute right-0 top-10 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-20 dropdown-menu"},Ls=["onClick"],ws=["onClick"],Cs=["onClick"],Is={class:"border-t border-gray-200 bg-gray-50"},$s={class:"text-sm text-gray-500"},_s={key:6,class:"text-center py-20"},Ps={class:"border-t border-gray-200 bg-white rounded-lg p-4 mt-8"};function Ts(e,t,s,l,o,i){const r=(0,a.g2)("custom-confirmation"),c=(0,a.g2)("Preview"),d=(0,a.g2)("router-link"),u=(0,a.g2)("Pagination");return(0,a.uX)(),(0,a.CE)(a.FK,null,[o.showConfirmation?((0,a.uX)(),(0,a.Wv)(r,{key:0,message:o.confirmationMessage,header:o.confirmationHeader,onConfirm:i.confirmRemoveItem,onCancel:i.handleConfirmCancel},null,8,["message","header","onConfirm","onCancel"])):(0,a.Q3)("",!0),(0,a.bF)(c,{visible:this.previewVisible,"data-item":this.localDataItem,onClose:i.hidePreview},null,8,["visible","data-item","onClose"]),(0,a.Lk)("div",se,[o.parentPageInfo?((0,a.uX)(),(0,a.CE)("div",ae,[(0,a.Lk)("div",le,[(0,a.Lk)("div",oe,[(0,a.Lk)("div",ie,[(0,a.Lk)("i",{class:(0,n.C4)([i.getPostTypeIcon(o.parentPageInfo),"text-white text-xl"])},null,2)]),(0,a.Lk)("div",null,[(0,a.Lk)("h1",re,(0,n.v_)(o.parentPageInfo.title),1),(0,a.Lk)("p",ne,"จัดการเนื้อหาภายใน"+(0,n.v_)(i.getTypeName(o.parentPageInfo.type)),1)])]),(0,a.Lk)("div",ce,[(0,a.bF)(d,{to:`/cms/edit/${o.parentPageInfo._id}#${o.parentPageInfo.type}`,class:"inline-flex items-center gap-2 px-3 py-2 text-sm text-blue-600 hover:text-blue-700 hover:bg-blue-100 border border-blue-200 rounded-lg transition-colors"},{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.Lk)("i",{class:"fas fa-edit"},null,-1),(0,a.Lk)("span",null,"แก้ไขหน้าหลัก",-1)]))),_:1},8,["to"]),(0,a.bF)(d,{to:`/cms/builder/${o.parentPageInfo._id}`,class:"inline-flex items-center gap-2 px-3 py-2 text-sm text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors"},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.Lk)("i",{class:"fas fa-palette"},null,-1),(0,a.Lk)("span",null,"ออกแบบหน้าหลัก",-1)]))),_:1},8,["to"])])]),(0,a.Lk)("div",de,[(0,a.Lk)("div",ue,[(0,a.Lk)("div",ge,[t[15]||(t[15]=(0,a.Lk)("i",{class:"fas fa-eye text-blue-500"},null,-1)),(0,a.Lk)("div",null,[t[14]||(t[14]=(0,a.Lk)("p",{class:"text-xs text-gray-500"},"การเข้าชม",-1)),(0,a.Lk)("p",pe,(0,n.v_)(i.formatNumber(o.parentPageInfo.visitor||0)),1)])])]),(0,a.Lk)("div",me,[(0,a.Lk)("div",fe,[t[17]||(t[17]=(0,a.Lk)("i",{class:"fas fa-newspaper text-green-500"},null,-1)),(0,a.Lk)("div",null,[t[16]||(t[16]=(0,a.Lk)("p",{class:"text-xs text-gray-500"},"เนื้อหาทั้งหมด",-1)),(0,a.Lk)("p",ye,(0,n.v_)(o.totalItems),1)])])]),(0,a.Lk)("div",he,[(0,a.Lk)("div",be,[t[19]||(t[19]=(0,a.Lk)("i",{class:"fas fa-check-circle text-green-500"},null,-1)),(0,a.Lk)("div",null,[t[18]||(t[18]=(0,a.Lk)("p",{class:"text-xs text-gray-500"},"เผยแพร่แล้ว",-1)),(0,a.Lk)("p",xe,(0,n.v_)(i.filteredListItems.filter((e=>e.status)).length),1)])])]),(0,a.Lk)("div",ke,[(0,a.Lk)("div",ve,[t[21]||(t[21]=(0,a.Lk)("i",{class:"fas fa-edit text-orange-500"},null,-1)),(0,a.Lk)("div",null,[t[20]||(t[20]=(0,a.Lk)("p",{class:"text-xs text-gray-500"},"ร่าง",-1)),(0,a.Lk)("p",Le,(0,n.v_)(i.filteredListItems.filter((e=>!e.status)).length),1)])])])])])):(0,a.Q3)("",!0),(0,a.Lk)("div",we,[(0,a.Lk)("div",Ce,[(0,a.Lk)("div",Ie,[(0,a.bF)(d,{to:"/cms/pages",class:"flex items-center gap-1 text-gray-500 hover:text-blue-600 transition-colors"},{default:(0,a.k6)((()=>t[22]||(t[22]=[(0,a.Lk)("i",{class:"fas fa-home text-xs"},null,-1),(0,a.Lk)("span",null,"หน้าหลัก",-1)]))),_:1}),t[23]||(t[23]=(0,a.Lk)("i",{class:"fas fa-chevron-right text-xs text-gray-400"},null,-1)),o.parentPageInfo?((0,a.uX)(),(0,a.CE)("div",$e,[(0,a.Lk)("div",{class:"w-6 h-6 rounded flex items-center justify-center text-xs",style:(0,n.Tr)({backgroundColor:`${i.getPostTypeColor(o.parentPageInfo)}15`,color:i.getPostTypeColor(o.parentPageInfo)})},[(0,a.Lk)("i",{class:(0,n.C4)(i.getPostTypeIcon(o.parentPageInfo))},null,2)],4),(0,a.Lk)("span",_e,(0,n.v_)(o.parentPageInfo.title),1),(0,a.Lk)("span",Pe,"("+(0,n.v_)(i.getTypeName(o.parentPageInfo.type))+")",1)])):((0,a.uX)(),(0,a.CE)("div",Te,[(0,a.Lk)("span",De,(0,n.v_)(i.getTypeName(s.itemType)),1)]))]),(0,a.Lk)("div",Ee,[(0,a.Lk)("div",Fe,[(0,a.Lk)("div",Xe,[t[24]||(t[24]=(0,a.Lk)("i",{class:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"},null,-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.searchTerm=e),type:"text",placeholder:"ค้นหาเนื้อหา...",class:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"},null,512),[[te.Jo,o.searchTerm]])])]),(0,a.Lk)("div",Ae,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.sortBy=e),onChange:t[2]||(t[2]=(...e)=>i.applySorting&&i.applySorting(...e)),class:"px-3 py-2.5 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm bg-white"},t[25]||(t[25]=[(0,a.Lk)("option",{value:"date_desc"},"วันที่ล่าสุด",-1),(0,a.Lk)("option",{value:"date_asc"},"วันที่เก่าสุด",-1),(0,a.Lk)("option",{value:"title_asc"},"ชื่อ A-Z",-1),(0,a.Lk)("option",{value:"title_desc"},"ชื่อ Z-A",-1)]),544),[[te.u1,o.sortBy]]),(0,a.Lk)("div",Se,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>o.viewMode="grid"),class:(0,n.C4)(["grid"===o.viewMode?"bg-blue-500 text-white":"bg-white text-gray-600 hover:bg-gray-50","px-3 py-2.5 text-sm transition-colors"])},t[26]||(t[26]=[(0,a.Lk)("i",{class:"fas fa-th"},null,-1)]),2),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>o.viewMode="list"),class:(0,n.C4)(["list"===o.viewMode?"bg-blue-500 text-white":"bg-white text-gray-600 hover:bg-gray-50","px-3 py-2.5 text-sm transition-colors border-l border-gray-200"])},t[27]||(t[27]=[(0,a.Lk)("i",{class:"fas fa-list"},null,-1)]),2)])])]),(0,a.Lk)("div",Me,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=e=>o.bulkActions=!o.bulkActions),class:"flex items-center gap-2 px-3 py-2.5 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 border border-gray-200 rounded-lg transition-colors"},t[28]||(t[28]=[(0,a.Lk)("i",{class:"fas fa-check-square"},null,-1),(0,a.Lk)("span",null,"เลือกหลายรายการ",-1)]))]),o.parentPageInfo?((0,a.uX)(),(0,a.CE)("div",Ne,[(0,a.bF)(d,{to:"/cms/pages/",class:"inline-flex items-center gap-2 px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 border border-gray-200 rounded-lg transition-colors"},{default:(0,a.k6)((()=>t[29]||(t[29]=[(0,a.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,a.Lk)("span",null,"กลับไปยังรายการหลัก",-1)]))),_:1})])):(0,a.Q3)("",!0)]),o.activeFilters.length>0?((0,a.uX)(),(0,a.CE)("div",je,[t[31]||(t[31]=(0,a.Lk)("span",{class:"text-sm text-gray-500"},"ตัวกรอง:",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.activeFilters,(e=>((0,a.uX)(),(0,a.CE)("span",{key:e.key,class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"},[(0,a.eW)((0,n.v_)(e.label)+" ",1),(0,a.Lk)("button",{onClick:t=>i.removeFilter(e.key),class:"hover:text-blue-600"},t[30]||(t[30]=[(0,a.Lk)("i",{class:"fas fa-times text-xs"},null,-1)]),8,Qe)])))),128)),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>i.clearAllFilters&&i.clearAllFilters(...e)),class:"text-xs text-gray-500 hover:text-gray-700"}," ล้างทั้งหมด ")])):(0,a.Q3)("",!0)]),o.bulkActions&&o.selectedItems.length>0?((0,a.uX)(),(0,a.CE)("div",We,[(0,a.Lk)("div",qe,[(0,a.Lk)("span",Re,"เลือกแล้ว "+(0,n.v_)(o.selectedItems.length)+" รายการ",1),(0,a.Lk)("div",He,[(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>i.bulkDelete&&i.bulkDelete(...e)),class:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white text-sm rounded-lg transition-colors"},t[32]||(t[32]=[(0,a.Lk)("i",{class:"fas fa-trash mr-1"},null,-1),(0,a.eW)(" ลบที่เลือก ")])),(0,a.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>i.bulkDuplicate&&i.bulkDuplicate(...e)),class:"px-3 py-1.5 bg-gray-500 hover:bg-gray-600 text-white text-sm rounded-lg transition-colors"},t[33]||(t[33]=[(0,a.Lk)("i",{class:"fas fa-clone mr-1"},null,-1),(0,a.eW)(" สำเนาที่เลือก ")]))])])])):(0,a.Q3)("",!0),o.loading_sources?((0,a.uX)(),(0,a.CE)("div",Be,[(0,a.Lk)("div",Ke,[(0,a.Lk)("h2",Oe,[o.parentPageInfo?((0,a.uX)(),(0,a.CE)("span",Ue,'เนื้อหาใน "'+(0,n.v_)(o.parentPageInfo.title)+'"',1)):((0,a.uX)(),(0,a.CE)("span",Ve,(0,n.v_)("page"===s.itemType?"หน้าเว็บ":"form"===s.itemType?"แบบฟอร์ม":"layout"===s.itemType?"เลย์เอาต์":"เมนู"),1))]),(0,a.Lk)("span",ze,(0,n.v_)(i.filteredListItems.length)+" รายการ ",1)])])):(0,a.Q3)("",!0),o.loading_sources?"grid"===o.viewMode?((0,a.uX)(),(0,a.CE)("div",Ge,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredListItems,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:(0,n.C4)(["group relative bg-white rounded-xl shadow-sm border border-gray-200/60 overflow-hidden content-card transition-all duration-200 hover:shadow-lg",{"ring-1 ring-blue-500":o.selectedItems.includes(e._id),folder:"group"===e.display,file:"group"!==e.display}])},[(0,a.Lk)("div",Ze,[(0,a.Lk)("div",Ye,[(0,a.Lk)("div",et,[o.bulkActions?((0,a.uX)(),(0,a.CE)("div",tt,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",value:e._id,"onUpdate:modelValue":t[9]||(t[9]=e=>o.selectedItems=e),class:"w-3.5 h-3.5 text-blue-600 bg-white border-gray-300 rounded focus:ring-blue-500 focus:ring-1"},null,8,st),[[te.lH,o.selectedItems]])])):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 relative",style:(0,n.Tr)({backgroundColor:`${i.getPostTypeColor(e)}15`,color:i.getPostTypeColor(e)})},[(0,a.Lk)("i",{class:(0,n.C4)([i.getPostTypeIcon(e),"text-sm"])},null,2),"group"===e.display&&void 0!==e.subPostCount?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-blue-500 text-white text-xs font-bold rounded-full flex items-center justify-center shadow-md border-2 border-white",title:`${e.subPostCount} บทความ`},[(0,a.Lk)("span",lt,(0,n.v_)(e.subPostCount>99?"99+":e.subPostCount),1)],8,at)):(0,a.Q3)("",!0)],4)]),(0,a.Lk)("div",ot,[e.isHome?((0,a.uX)(),(0,a.CE)("div",it,t[35]||(t[35]=[(0,a.Lk)("i",{class:"fas fa-home text-xs"},null,-1),(0,a.Lk)("span",null,"หน้าหลัก",-1)]))):e.isTemplate?((0,a.uX)(),(0,a.CE)("div",rt,t[36]||(t[36]=[(0,a.Lk)("i",{class:"fas fa-palette text-xs"},null,-1),(0,a.Lk)("span",null,"เทมเพลต",-1)]))):(0,a.Q3)("",!0)]),(0,a.Lk)("div",nt,[(0,a.Lk)("div",ct,[(0,a.Lk)("div",{class:(0,n.C4)([{"bg-green-500":e.status,"bg-gray-400":!e.status},"w-1.5 h-1.5 rounded-full"])},null,2),(0,a.Lk)("span",{class:(0,n.C4)([{"text-green-600":e.status,"text-gray-500":!e.status},"text-xs font-medium"])},(0,n.v_)(e.status?"เผยแพร่":"ร่าง"),3)]),(0,a.Lk)("div",dt,[(0,a.Lk)("button",{onClick:t=>i.toggleCardMenu(e._id),class:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors"},t[37]||(t[37]=[(0,a.Lk)("i",{class:"fas fa-ellipsis-h text-xs"},null,-1)]),8,ut),o.openCardMenu===e._id?((0,a.uX)(),(0,a.CE)("div",gt,[(0,a.bF)(d,{to:"/cms/edit/"+e._id+"#"+s.itemType,class:"flex items-center gap-2 px-3 py-1.5 text-xs text-gray-700 hover:bg-gray-50",onClick:i.closeCardMenu},{default:(0,a.k6)((()=>t[38]||(t[38]=[(0,a.Lk)("i",{class:"fas fa-edit text-blue-500 w-3"},null,-1),(0,a.Lk)("span",null,"แก้ไข",-1)]))),_:2},1032,["to","onClick"]),(0,a.Lk)("button",{onClick:t=>{i.duplicateItem(e),i.closeCardMenu()},class:"w-full flex items-center gap-2 px-3 py-1.5 text-xs text-gray-700 hover:bg-gray-50"},t[39]||(t[39]=[(0,a.Lk)("i",{class:"fas fa-clone text-green-500 w-3"},null,-1),(0,a.Lk)("span",null,"สำเนา",-1)]),8,pt),(0,a.Lk)("button",{onClick:t=>{i.showPreview(e._id),i.closeCardMenu()},class:"w-full flex items-center gap-2 px-3 py-1.5 text-xs text-gray-700 hover:bg-gray-50"},t[40]||(t[40]=[(0,a.Lk)("i",{class:"fas fa-globe text-purple-500 w-3"},null,-1),(0,a.Lk)("span",null,"ดูตัวอย่าง",-1)]),8,mt),t[42]||(t[42]=(0,a.Lk)("div",{class:"border-t border-gray-100 my-1"},null,-1)),(0,a.Lk)("button",{onClick:t=>{i.removeItem(e._id),i.closeCardMenu()},class:"w-full flex items-center gap-2 px-3 py-1.5 text-xs text-red-600 hover:bg-red-50"},t[41]||(t[41]=[(0,a.Lk)("i",{class:"fas fa-trash text-red-500 w-3"},null,-1),(0,a.Lk)("span",null,"ลบ",-1)]),8,ft)])):(0,a.Q3)("",!0)])])])]),(0,a.Lk)("div",yt,[((0,a.uX)(),(0,a.Wv)((0,a.$y)((e.display,"router-link")),{to:"group"===e.display?`/cms/pages/${e._id}`:`/cms/edit/${e._id}#${s.itemType}`,class:"block group/title"},{default:(0,a.k6)((()=>[(0,a.Lk)("h3",ht,(0,n.v_)(e.title),1)])),_:2},1032,["to"])),(0,a.Lk)("div",bt,[(0,a.Lk)("div",xt,[(0,a.Lk)("p",kt,(0,n.v_)(e.slug),1)]),(0,a.Lk)("button",{onClick:t=>i.copyToClipboard(e.slug),class:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",title:"คัดลอกลิงค์"},t[43]||(t[43]=[(0,a.Lk)("i",{class:"fas fa-copy text-xs"},null,-1)]),8,vt)]),(0,a.Lk)("div",Lt,[(0,a.Lk)("div",wt,[(0,a.Lk)("div",Ct,[t[44]||(t[44]=(0,a.Lk)("i",{class:"fas fa-calendar-alt text-gray-400"},null,-1)),(0,a.Lk)("span",null,(0,n.v_)(i.formatThaidate(e.createdAt)),1)]),(0,a.Lk)("div",It,[t[45]||(t[45]=(0,a.Lk)("i",{class:"fas fa-eye text-gray-400"},null,-1)),(0,a.Lk)("span",null,(0,n.v_)(i.formatNumber(e.views||0)),1)])]),(0,a.Lk)("div",$t,["form"===e.type&&e.formCount?((0,a.uX)(),(0,a.CE)("div",_t,[t[46]||(t[46]=(0,a.Lk)("i",{class:"fas fa-paper-plane text-xs"},null,-1)),(0,a.Lk)("span",null,(0,n.v_)(e.formCount),1)])):(0,a.Q3)("",!0)])])]),(0,a.Lk)("div",Pt,[(0,a.Lk)("div",{class:"px-3 py-2 flex items-center justify-between text-white text-xs font-medium",style:(0,n.Tr)({backgroundColor:i.getPostTypeColor(e)})},["page"===e.type||"layout"===e.type||"form"===e.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(d,{to:"/cms/builder/"+e._id,class:"flex items-center gap-1.5 hover:text-gray-200 transition-colors"},{default:(0,a.k6)((()=>t[47]||(t[47]=[(0,a.Lk)("i",{class:"fas fa-palette"},null,-1),(0,a.Lk)("span",null,"ออกแบบ",-1)]))),_:2},1032,["to"]),(0,a.Lk)("div",Tt,[(0,a.Lk)("button",{onClick:t=>i.showPreview(e._id),class:"flex items-center gap-1.5 hover:text-gray-200 transition-colors"},t[48]||(t[48]=[(0,a.Lk)("i",{class:"fas fa-external-link-alt"},null,-1),(0,a.Lk)("span",null,"ดู",-1)]),8,Dt),(0,a.bF)(d,{to:"/cms/edit/"+e._id+"#"+s.itemType,class:"flex items-center gap-1.5 hover:text-gray-200 transition-colors"},{default:(0,a.k6)((()=>t[49]||(t[49]=[(0,a.Lk)("i",{class:"fas fa-edit"},null,-1),(0,a.Lk)("span",null,"แก้ไข",-1)]))),_:2},1032,["to"])])],64)):"menu"===e.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(d,{to:"/cms/menu/"+e._id,class:"flex items-center gap-1.5 hover:text-gray-200 transition-colors"},{default:(0,a.k6)((()=>t[50]||(t[50]=[(0,a.Lk)("i",{class:"fas fa-palette"},null,-1),(0,a.Lk)("span",null,"ออกแบบ",-1)]))),_:2},1032,["to"]),(0,a.bF)(d,{to:"/cms/edit/"+e._id+"#"+s.itemType,class:"flex items-center gap-1.5 hover:text-gray-200 transition-colors"},{default:(0,a.k6)((()=>t[51]||(t[51]=[(0,a.Lk)("i",{class:"fas fa-edit"},null,-1),(0,a.Lk)("span",null,"แก้ไข",-1)]))),_:2},1032,["to"])],64)):(0,a.Q3)("",!0)],4),(0,a.Lk)("div",Et,[(0,a.Lk)("div",Ft,["group"===e.display?((0,a.uX)(),(0,a.Wv)(d,{key:0,to:"/cms/pages/"+e._id,class:"flex items-center gap-1 text-xs text-gray-600 hover:text-blue-600 transition-colors"},{default:(0,a.k6)((()=>[t[52]||(t[52]=(0,a.Lk)("i",{class:"fas fa-newspaper"},null,-1)),(0,a.Lk)("span",null,(0,n.v_)(e.subPostCount||0)+" บทความ",1)])),_:2},1032,["to"])):(0,a.Q3)("",!0),"form"===e.type?((0,a.uX)(),(0,a.Wv)(d,{key:1,to:"/cms/form/"+e._id,class:"flex items-center gap-1 text-xs text-gray-600 hover:text-green-600 transition-colors"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",Xt,(0,n.v_)(e.formCount||0),1),t[53]||(t[53]=(0,a.Lk)("span",null,"ข้อมูล",-1))])),_:2},1032,["to"])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",At,[(0,a.Lk)("button",{onClick:t=>i.toggleFavorite(e),class:(0,n.C4)([e.isFavorite?"text-yellow-500":"text-gray-400 hover:text-yellow-500","p-1 rounded-md hover:bg-white transition-all"]),title:"เพิ่มในรายการโปรด"},[(0,a.Lk)("i",{class:(0,n.C4)([e.isFavorite?"fas fa-star":"far fa-star","text-xs"])},null,2)],10,St),(0,a.Lk)("button",{onClick:t=>i.duplicateItem(e),class:"p-1 text-gray-400 hover:text-blue-600 hover:bg-white rounded-md transition-all",title:"สำเนา"},t[54]||(t[54]=[(0,a.Lk)("i",{class:"fas fa-clone text-xs"},null,-1)]),8,Mt),(0,a.Lk)("button",{onClick:t=>i.removeItem(e._id),class:"p-1 text-gray-400 hover:text-red-600 hover:bg-white rounded-md transition-all",title:"ลบ"},t[55]||(t[55]=[(0,a.Lk)("i",{class:"fas fa-trash text-xs"},null,-1)]),8,Nt)])])]),e.loading?((0,a.uX)(),(0,a.CE)("div",jt,t[56]||(t[56]=[(0,a.Lk)("div",{class:"text-center"},[(0,a.Lk)("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-1"}),(0,a.Lk)("p",{class:"text-xs text-gray-500"},"กำลังดำเนินการ...")],-1)]))):(0,a.Q3)("",!0)],2)))),128)),(0,a.bF)(d,{to:o.localDataItem&&o.localDataItem.id?`/cms/post/${o.localDataItem.id}/add`:"/cms/add",class:"group bg-white border-2 border-dashed border-gray-300 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer add-content-card hover:border-blue-400 hover:bg-blue-50/50 transition-all duration-200 min-h-[240px]"},{default:(0,a.k6)((()=>[t[57]||(t[57]=(0,a.Lk)("div",{class:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 text-white flex items-center justify-center group-hover:scale-105 transition-transform duration-200 mb-3 shadow-lg shadow-blue-500/25"},[(0,a.Lk)("i",{class:"fas fa-plus text-lg"})],-1)),t[58]||(t[58]=(0,a.Lk)("h3",{class:"font-semibold text-gray-700 group-hover:text-blue-700 transition-colors mb-1"},"เพิ่มเนื้อหาใหม่",-1)),(0,a.Lk)("p",Qt,"สร้าง"+(0,n.v_)(i.getTypeName(s.itemType).toLowerCase())+"ใหม่",1)])),_:1},8,["to"])])):"list"===o.viewMode?((0,a.uX)(),(0,a.CE)("div",Wt,[(0,a.Lk)("div",qt,[(0,a.Lk)("div",Rt,[(0,a.Lk)("div",Ht,[o.bulkActions?((0,a.uX)(),(0,a.CE)("div",Bt,[(0,a.Lk)("input",{type:"checkbox",onChange:t[10]||(t[10]=(...e)=>i.toggleSelectAll&&i.toggleSelectAll(...e)),checked:o.selectedItems.length===i.filteredListItems.length&&i.filteredListItems.length>0,class:"w-4 h-4 text-blue-600 bg-white border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,40,Kt),t[59]||(t[59]=(0,a.Lk)("span",{class:"ml-2 text-sm text-gray-600"},"เลือกทั้งหมด",-1))])):(0,a.Q3)("",!0),t[60]||(t[60]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-900"},"รายการเนื้อหา",-1))]),(0,a.Lk)("div",Ot,(0,n.v_)(i.filteredListItems.length)+" รายการ ",1)])]),(0,a.Lk)("div",Ut,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.filteredListItems,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:(0,n.C4)(["group hover:bg-gray-50 transition-colors duration-200",{"bg-blue-50":o.selectedItems.includes(e._id)}])},[(0,a.Lk)("div",Vt,[(0,a.Lk)("div",zt,[o.bulkActions?((0,a.uX)(),(0,a.CE)("div",Jt,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",value:e._id,"onUpdate:modelValue":t[11]||(t[11]=e=>o.selectedItems=e),class:"w-4 h-4 text-blue-600 bg-white border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,8,Gt),[[te.lH,o.selectedItems]])])):(0,a.Q3)("",!0),(0,a.Lk)("div",Zt,[(0,a.Lk)("div",{class:"w-10 h-10 rounded-lg flex items-center justify-center",style:(0,n.Tr)({backgroundColor:`${i.getPostTypeColor(e)}15`,color:i.getPostTypeColor(e)})},[(0,a.Lk)("i",{class:(0,n.C4)([i.getPostTypeIcon(e),"text-lg"])},null,2)],4)]),(0,a.Lk)("div",Yt,[(0,a.Lk)("div",es,[((0,a.uX)(),(0,a.Wv)((0,a.$y)((e.display,"router-link")),{to:"group"===e.display?`/cms/pages/${e._id}`:`/cms/edit/${e._id}#${s.itemType}`,class:"font-semibold text-gray-900 hover:text-blue-600 transition-colors text-sm"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.title),1)])),_:2},1032,["to"])),e.isHome?((0,a.uX)(),(0,a.CE)("div",ts,t[61]||(t[61]=[(0,a.Lk)("i",{class:"fas fa-home text-xs"},null,-1),(0,a.Lk)("span",null,"หน้าหลัก",-1)]))):e.isTemplate?((0,a.uX)(),(0,a.CE)("div",ss,t[62]||(t[62]=[(0,a.Lk)("i",{class:"fas fa-palette text-xs"},null,-1),(0,a.Lk)("span",null,"เทมเพลต",-1)]))):(0,a.Q3)("",!0)]),(0,a.Lk)("div",as,[(0,a.Lk)("div",ls,(0,n.v_)(e.slug),1),(0,a.Lk)("button",{onClick:t=>i.copyToClipboard(e.slug),class:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded transition-colors",title:"คัดลอกลิงค์"},t[63]||(t[63]=[(0,a.Lk)("i",{class:"fas fa-copy text-xs"},null,-1)]),8,os)]),(0,a.Lk)("div",is,[(0,a.Lk)("div",rs,[t[64]||(t[64]=(0,a.Lk)("i",{class:"fas fa-calendar-alt"},null,-1)),(0,a.Lk)("span",null,(0,n.v_)(i.formatThaidate(e.createdAt)),1)]),(0,a.Lk)("div",ns,[t[65]||(t[65]=(0,a.Lk)("i",{class:"fas fa-eye"},null,-1)),(0,a.Lk)("span",null,(0,n.v_)(i.formatNumber(e.views||0))+" ครั้ง",1)]),(0,a.Lk)("div",cs,[t[66]||(t[66]=(0,a.Lk)("span",null,"ประเภท:",-1)),(0,a.Lk)("span",ds,(0,n.v_)(i.getTypeName(e.type)),1)])])]),(0,a.Lk)("div",us,[(0,a.Lk)("div",gs,[(0,a.Lk)("div",{class:(0,n.C4)([{"bg-green-500":e.status,"bg-gray-400":!e.status},"w-2 h-2 rounded-full"])},null,2),(0,a.Lk)("span",{class:(0,n.C4)([{"text-green-600":e.status,"text-gray-500":!e.status},"text-sm font-medium"])},(0,n.v_)(e.status?"เผยแพร่":"ร่าง"),3)])]),(0,a.Lk)("div",ps,[(0,a.Lk)("div",ms,["page"===e.type||"layout"===e.type||"form"===e.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.bF)(d,{to:"/cms/builder/"+e._id,class:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"ออกแบบ"},{default:(0,a.k6)((()=>t[67]||(t[67]=[(0,a.Lk)("i",{class:"fas fa-palette text-sm"},null,-1)]))),_:2},1032,["to"]),(0,a.Lk)("button",{onClick:t=>i.showPreview(e._id),class:"p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-colors",title:"ดูตัวอย่าง"},t[68]||(t[68]=[(0,a.Lk)("i",{class:"fas fa-external-link-alt text-sm"},null,-1)]),8,fs)],64)):"menu"===e.type?((0,a.uX)(),(0,a.Wv)(d,{key:1,to:"/cms/menu/"+e._id,class:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"ออกแบบเมนู"},{default:(0,a.k6)((()=>t[69]||(t[69]=[(0,a.Lk)("i",{class:"fas fa-palette text-sm"},null,-1)]))),_:2},1032,["to"])):(0,a.Q3)("",!0),(0,a.bF)(d,{to:"/cms/edit/"+e._id+"#"+s.itemType,class:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:"แก้ไข"},{default:(0,a.k6)((()=>t[70]||(t[70]=[(0,a.Lk)("i",{class:"fas fa-edit text-sm"},null,-1)]))),_:2},1032,["to"]),(0,a.Lk)("button",{onClick:t=>i.toggleFavorite(e),class:(0,n.C4)([e.isFavorite?"text-yellow-500 hover:bg-yellow-100":"text-gray-400 hover:bg-gray-100","p-2 rounded-lg transition-colors"]),title:"เพิ่มในรายการโปรด"},[(0,a.Lk)("i",{class:(0,n.C4)([e.isFavorite?"fas fa-star":"far fa-star","text-sm"])},null,2)],10,ys),(0,a.Lk)("button",{onClick:t=>i.duplicateItem(e),class:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"สำเนา"},t[71]||(t[71]=[(0,a.Lk)("i",{class:"fas fa-clone text-sm"},null,-1)]),8,hs),(0,a.Lk)("button",{onClick:t=>i.removeItem(e._id),class:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"ลบ"},t[72]||(t[72]=[(0,a.Lk)("i",{class:"fas fa-trash text-sm"},null,-1)]),8,bs)])]),(0,a.Lk)("div",xs,[(0,a.Lk)("button",{onClick:t=>i.toggleCardMenu(e._id),class:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors"},t[73]||(t[73]=[(0,a.Lk)("i",{class:"fas fa-ellipsis-v text-sm"},null,-1)]),8,ks),o.openCardMenu===e._id?((0,a.uX)(),(0,a.CE)("div",vs,[(0,a.bF)(d,{to:"/cms/edit/"+e._id+"#"+s.itemType,class:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:i.closeCardMenu},{default:(0,a.k6)((()=>t[74]||(t[74]=[(0,a.Lk)("i",{class:"fas fa-edit text-blue-500 w-4"},null,-1),(0,a.Lk)("span",null,"แก้ไขเนื้อหา",-1)]))),_:2},1032,["to","onClick"]),"group"===e.display?((0,a.uX)(),(0,a.Wv)(d,{key:0,to:"/cms/pages/"+e._id,class:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:i.closeCardMenu},{default:(0,a.k6)((()=>[t[75]||(t[75]=(0,a.Lk)("i",{class:"fas fa-newspaper text-blue-500 w-4"},null,-1)),(0,a.Lk)("span",null,"จัดการบทความ ("+(0,n.v_)(e.subPostCount||0)+")",1)])),_:2},1032,["to","onClick"])):(0,a.Q3)("",!0),"form"===e.type?((0,a.uX)(),(0,a.Wv)(d,{key:1,to:"/cms/form/"+e._id,class:"flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:i.closeCardMenu},{default:(0,a.k6)((()=>[t[76]||(t[76]=(0,a.Lk)("i",{class:"fas fa-database text-green-500 w-4"},null,-1)),(0,a.Lk)("span",null,"ข้อมูลที่ส่ง ("+(0,n.v_)(e.formCount||0)+")",1)])),_:2},1032,["to","onClick"])):(0,a.Q3)("",!0),(0,a.Lk)("button",{onClick:t=>{i.duplicateItem(e),i.closeCardMenu()},class:"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"},t[77]||(t[77]=[(0,a.Lk)("i",{class:"fas fa-clone text-green-500 w-4"},null,-1),(0,a.Lk)("span",null,"สำเนารายการ",-1)]),8,Ls),(0,a.Lk)("button",{onClick:t=>{i.showPreview(e._id),i.closeCardMenu()},class:"w-full flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"},t[78]||(t[78]=[(0,a.Lk)("i",{class:"fas fa-globe text-purple-500 w-4"},null,-1),(0,a.Lk)("span",null,"ดูตัวอย่าง",-1)]),8,ws),t[80]||(t[80]=(0,a.Lk)("div",{class:"border-t border-gray-100 my-1"},null,-1)),(0,a.Lk)("button",{onClick:t=>{i.removeItem(e._id),i.closeCardMenu()},class:"w-full flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50"},t[79]||(t[79]=[(0,a.Lk)("i",{class:"fas fa-trash text-red-500 w-4"},null,-1),(0,a.Lk)("span",null,"ลบรายการ",-1)]),8,Cs)])):(0,a.Q3)("",!0)])])])],2)))),128))]),(0,a.Lk)("div",Is,[(0,a.bF)(d,{to:o.localDataItem&&o.localDataItem.id?`/cms/post/${o.localDataItem.id}/add`:"/cms/add",class:"group flex items-center gap-4 px-4 py-4 hover:bg-gray-100 transition-colors"},{default:(0,a.k6)((()=>[t[82]||(t[82]=(0,a.Lk)("div",{class:"w-10 h-10 border-2 border-dashed border-gray-400 rounded-lg flex items-center justify-center group-hover:border-blue-500 group-hover:bg-blue-50 transition-colors"},[(0,a.Lk)("i",{class:"fas fa-plus text-gray-400 group-hover:text-blue-500 transition-colors"})],-1)),(0,a.Lk)("div",null,[t[81]||(t[81]=(0,a.Lk)("div",{class:"font-medium text-gray-900 group-hover:text-blue-600 transition-colors"},"เพิ่มเนื้อหาใหม่",-1)),(0,a.Lk)("div",$s,"สร้าง"+(0,n.v_)(i.getTypeName(s.itemType).toLowerCase())+"ใหม่",1)])])),_:1},8,["to"])])])):0===i.filteredListItems.length?((0,a.uX)(),(0,a.CE)("div",_s,[t[84]||(t[84]=(0,a.Lk)("i",{class:"fas fa-file-alt text-gray-300 text-6xl mb-4"},null,-1)),t[85]||(t[85]=(0,a.Lk)("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"ไม่พบเนื้อหา",-1)),t[86]||(t[86]=(0,a.Lk)("p",{class:"text-gray-500 mb-6"},"ยังไม่มีเนื้อหาในประเภทนี้",-1)),(0,a.bF)(d,{to:o.localDataItem&&o.localDataItem.id?`/cms/post/${o.localDataItem.id}/add`:"/cms/add",class:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200"},{default:(0,a.k6)((()=>t[83]||(t[83]=[(0,a.Lk)("i",{class:"fas fa-plus text-sm"},null,-1),(0,a.eW)(" เพิ่มเนื้อหาใหม่ ")]))),_:1},8,["to"])])):(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",Je,t[34]||(t[34]=[(0,a.Lk)("div",{class:"text-center"},[(0,a.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.Lk)("p",{class:"text-gray-500"},"กำลังโหลดข้อมูล...")],-1)]))),(0,a.Lk)("div",Ps,[(0,a.bF)(u,{"current-page":o.currentPage,"total-items":o.totalItems,"total-pages":o.totalPages,"limit-items":o.limitItem,"data-loading":!o.loading_sources,"display-mode":"summary",onPageChanged:i.handlePageChanged},null,8,["current-page","total-items","total-pages","limit-items","data-loading","onPageChanged"])])])],64)}s(72577),s(81454),s(8872);var Ds=s(59911),Es=s.n(Ds),Fs=s(9964),Xs=s(20720),As=s(38558),Ss=s(77528),Ms={props:{itemType:{type:String,default:"page"},dataItem:{type:[Object,String,null],default:null}},data(){const e=r.A.get("session","token"),t=r.A.get("session"),s=t.current.theme||{},a=s.homepage||"",l=s.header||"",o=s.footer||"",i=s.navigator||"",n=s.subheader||"",c=s.checkout||"",d=s.dashboard||"",u=s.login||"",g=s.resetpassword||"",p=s.changepassword||"";return{configs:r.A.get("configs"),hostkey:this.$Key,accessToken:e,session:t,listItems:[],selectedHome:a,selectedHeader:l,selectedSubheader:n,selectedFooter:o,selectedNavigator:i,loading_sources:!0,showPopup:!1,limitItem:50,limitOptions:[10,20,50,100,200,500,1e3,2e3],currentPage:1,totalPages:0,totalItems:0,notificationCount:2,filterTypes:[{name:"หน้าเว็บ",value:"page",icon:"fas fa-file",color:"#3b82f6"},{name:"แบบฟอร์ม",value:"form",icon:"fas fa-file-alt",color:"#1f2937"},{name:"ดีไซน์",value:"layout",icon:"fas fa-pencil-ruler",color:"#ef4444"},{name:"เมนู",value:"menu",icon:"fas fa-list",color:"#22c55e"}],selectedTypes:[],localDataItem:this.dataItem,previewVisible:!1,confirmationMessage:"",confirmationHeader:"",showConfirmation:!1,deletionData:null,searchTerm:"",activeTab:"home",selectedLoginPage:u,selectedResetPasswordPage:g,selectedForgotPasswordPage:p,selectedCheckoutPage:c,selectedDashboardPage:d,emailTemplates:{welcomeEmail:"",recoveryPassword:"",otp:"",general:""},emailTemplateOptions:[],viewMode:this.dataItem?"list":"grid",bulkActions:!1,selectedItems:[],sortBy:"date_desc",activeFilters:[],openCardMenu:null,parentPageInfo:null}},components:{Preview:Xs.A,CustomConfirmation:Ss.A,Pagination:As.A},methods:{removeItem(e){this.confirmationMessage="คุณต้องการลบเนื้อหา (Page) นี้ ?",this.confirmationHeader="ยืนยันการทำรายการ",this.deletionData={itemIndex:e},this.showConfirmation=!0},confirmRemoveItem(){const{itemIndex:e,bulkDelete:t,items:s}=this.deletionData;t&&s?(console.log("Bulk Delete",s),this.bulkDeleteItems(s)):e&&(console.log("Delete",e),this.deleteData(e)),this.handleConfirmCancel()},handleConfirmCancel(){this.deletionData=null,this.confirmationMessage="",this.confirmationHeader="",this.showConfirmation=!1},async deleteData(e){if(r.A.get("session","login"))try{this.loading_sources=!1,console.log("id",e);const{data:t}=await this.$Request.DELETE(`post/${e}`,null,this.configs.key);console.log(t),this.loading_sources=!0,await this.getData()}catch(t){console.log(t)}},showPreview(e){this.localDataItem=e,this.previewVisible=!0},hidePreview(){this.previewVisible=!1},openPopup(){this.showPopup=!0},resetSelectedOptions(){this.selectedNavigator="",this.selectedHome="",this.selectedHeader="",this.selectedSubheader="",this.selectedFooter="",this.selectedLoginPage="",this.selectedResetPasswordPage="",this.selectedForgotPasswordPage="",this.selectedDashboardPage="",this.selectedCheckoutPage=""},updateDropdownOptions(){this.filteredPageItems=this.listItems.filter((e=>"page"===e.type||"form"===e.type)),this.filteredLayoutItems=this.listItems.filter((e=>"layout"===e.type)),this.filteredMenuItems=this.listItems.filter((e=>"menu"===e.type))},async savePopup(){const e={homepage:this.selectedHome,header:this.selectedHeader,subheader:this.selectedSubheader,footer:this.selectedFooter,navigator:this.selectedNavigator,dashboard:this.selectedDashboardPage,checkout:this.selectedCheckoutPage,login:this.selectedLoginPage,resetpassword:this.selectedResetPasswordPage,changepassword:this.selectedForgotPasswordPage,emailTemplates:this.emailTemplates};await this.changeLayout(e),await this.refreshDropdownData(),this.cancelPopup()},async refreshDropdownData(){try{await this.getData(!0)}catch(e){console.error("Error refreshing dropdown data:",e)}},cancelPopup(){this.showPopup=!1},formatThaidate(e){return Fs.A.toThaiDatetime(e,"short")},async getData(e=!1){try{e||(this.loading_sources=!1);const t=[{owner:this.session.current._id},{type:this.localDataItem&&this.localDataItem.type?"post":this.itemType},{$or:[{title:{$regex:this.searchTerm,$options:"i"}},{slug:{$regex:this.searchTerm,$options:"i"}}]}];this.localDataItem&&("object"===typeof this.localDataItem&&this.localDataItem.id?t.push({...this.localDataItem.type?{type:this.localDataItem.type}:{},parent:this.localDataItem.id}):"string"===typeof this.localDataItem&&t.push({parent:this.localDataItem}));const s=[{$match:{$and:t}},{$lookup:{from:"form",let:{postID:{$toString:"$_id"}},pipeline:[{$match:{$expr:{$eq:[{$toString:"$formID"},"$$postID"]}}},{$count:"formCount"}],as:"formCounts"}},{$lookup:{from:"post",let:{parentID:{$cond:{if:{$and:[{$eq:["$type","post"]},{$ne:["$parent",null]}]},then:{$toObjectId:"$parent"},else:null}}},pipeline:[{$match:{$expr:{$eq:["$_id","$$parentID"]}}}],as:"pageData"}},{$addFields:{formCount:{$arrayElemAt:["$formCounts.formCount",0]},page:{$arrayElemAt:["$pageData",0]}}},{$lookup:{from:"post",let:{thisId:"$_id",displayType:"$display"},pipeline:[{$match:{$expr:{$and:[{$eq:["$parent",{$toString:"$$thisId"}]},{$eq:["$type","post"]}]}}},{$count:"cnt"}],as:"subPostCounts"}},{$addFields:{subPostCount:{$cond:[{$eq:["$display","group"]},{$ifNull:[{$arrayElemAt:["$subPostCounts.cnt",0]},0]},void 0]}}},{$unset:["pageData","formCounts","subPostCounts"]},{$facet:{post:[{$skip:(this.currentPage-1)*this.limitItem},{$limit:this.limitItem},{$project:{page:0,pageData:0}}],totalCount:[{$count:"count"}],pageInfo:[{$match:{$and:[{type:"post"},{parent:{$ne:null}}]}},{$lookup:{from:"post",let:{parentID:{$toObjectId:"$parent"}},pipeline:[{$match:{$expr:{$eq:["$_id","$$parentID"]}}}],as:"parentPage"}},{$replaceRoot:{newRoot:{$arrayElemAt:["$parentPage",0]}}},{$limit:1}]}},{$replaceRoot:{newRoot:{$mergeObjects:[{totalCount:{$arrayElemAt:["$totalCount.count",0]},pageInfo:{$arrayElemAt:["$pageInfo",0]}},{post:"$post"}]}}}],a={pipeline:s},{data:l}=await this.$Request.POST("post/aggregate",a,this.configs.key);if(l&&Array.isArray(l)){const t=l[0]||{},s=t.totalCount||0,a=t.pageInfo||null;this.listItems=Array.isArray(t.post)?t.post:[],this.filteredItems=this.listItems,this.totalItems=s,this.totalPages=Math.ceil(s/this.limitItem),a&&(this.parentPageInfo=a),e||(this.loading_sources=!0)}else this.listItems=[],this.filteredItems=[],this.totalItems=0,this.totalPages=0,this.parentPageInfo=null,e||(this.loading_sources=!0)}catch(t){console.log(t)}},handlePageChanged(e){if(e!==this.currentPage){window.scrollTo(0,0),this.currentPage=e;const t=r.A.get("session");t.currentPage=this.currentPage,r.A.set("session",t),console.log("getdata","handlePageChanged"),this.getData()}},async countFormPost(e,t){if(r.A.get("session","login"))try{this.loading_sources=!1;const s={method:"find",args:[{formID:e}],paging:{page:this.currentPage,limit:this.limitItem}},{data:a}=await this.$Request.POST(`${t}/count`,s,this.configs.key),l=a.count;return this.loading_sources=!0,l}catch(s){console.log(s)}},async changeLayout(e){try{this.activeBlock=!0;const t={data:{theme:e}},{data:s,status:a}=await this.$Request.PUT(`hostname/${this.session.current._id}`,t,this.hostkey);200===a&&(this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"บันทึกข้อมูลหน้า Home",text:"บันทึกข้อมูลสำหรับหน้า Home สำเร็จแล้ว"}),this.activeBlock=!1,this.getData(),console.log(s.data))}catch(t){console.error(t)}},async addPost(e){try{this.activeBlock=!0;const t={data:{...e,owner:this.session.current._id},options:{uniqueFields:[["slug"]]}},{data:s,status:a}=await this.$Request.POST("post/",t,this.configs.key);200===a&&(console.log(s.data),await this.getData())}catch(t){console.log(t)}},duplicateItem(e){const t={...e};delete t._id,t.slug=`${t.slug}-copy`,t.status=!1;let s=1,a=t.title;while(this.isTitleExists(t.title))t.title=`${a} (Copy ${s})`,t.slug=`${t.slug}-${s}`,s++;this.addPost(t)},isTitleExists(e){return this.listItems.some((t=>t.title===e))},updated(){Es().replace()},selectTab(e){this.selectedTab=e,window.location.hash=`#tab${e+1}`},applySorting(){this.getData(!0)},getTypeName(e){const t=this.filterTypes.find((t=>t.value===e));return t?t.name:e.charAt(0).toUpperCase()+e.slice(1)},getTypeIcon(e){const t=this.filterTypes.find((t=>t.value===e));return t?t.icon:"fas fa-file"},getTypeColor(e){const t=this.filterTypes.find((t=>t.value===e));return t?t.color:"#6b7280"},getTotalViews(){return this.listItems.reduce(((e,t)=>e+(t.views||0)),0)},getLastUpdate(){if(0===this.listItems.length)return"ไม่มีข้อมูล";const e=this.listItems.reduce(((e,t)=>{const s=new Date(t.createdAt);return s>e?s:e}),new Date(0));return this.formatThaidate(e)},getPostTypeIcon(e){if("page"===e.type&&e.isHome)return"fas fa-home";if("group"===e.display)return"fas fa-folder";const t=this.filterTypes.find((t=>t.value===e.type));return t?t.icon:"fas fa-file"},getPostTypeColor(e){if("page"===e.type&&e.isHome)return"#f59e0b";const t=this.filterTypes.find((t=>t.value===e.type));return t?t.color:"#6b7280"},toggleSelectAll(e){e.target.checked?this.selectedItems=this.filteredListItems.map((e=>e._id)):this.selectedItems=[]},async bulkDelete(){0!==this.selectedItems.length&&(this.confirmationMessage=`คุณต้องการลบเนื้อหา ${this.selectedItems.length} รายการ ?`,this.confirmationHeader="ยืนยันการลบหลายรายการ",this.deletionData={bulkDelete:!0,items:[...this.selectedItems]},this.showConfirmation=!0)},async bulkDuplicate(){if(0!==this.selectedItems.length)try{this.loading_sources=!1;for(const e of this.selectedItems){const t=this.listItems.find((t=>t._id===e));t&&await this.duplicateItem(t)}this.selectedItems=[],this.bulkActions=!1,await this.getData(),this.loading_sources=!0}catch(e){console.error("Error in bulk duplicate:",e),this.loading_sources=!0}},clearAllFilters(){this.searchTerm="",this.selectedTypes=[],this.activeFilters=[],this.sortBy="date_desc",this.getData(!0)},removeFilter(e){this.activeFilters=this.activeFilters.filter((t=>t.key!==e)),this.getData(!0)},async bulkDeleteItems(e){if(r.A.get("session","login"))try{this.loading_sources=!1;for(const t of e)await this.$Request.DELETE(`post/${t}`,null,this.configs.key);this.selectedItems=[],this.bulkActions=!1,this.loading_sources=!0,await this.getData()}catch(t){console.log(t),this.loading_sources=!0}},formatNumber(e){return e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e.toString()},async copyToClipboard(e){try{await navigator.clipboard.writeText(e),this.$toast.success("คัดลอกลิงค์แล้ว")}catch(t){const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),this.$toast.success("คัดลอกลิงค์แล้ว")}},toggleCardMenu(e){this.openCardMenu=this.openCardMenu===e?null:e},closeCardMenu(){this.openCardMenu=null},async toggleFavorite(e){try{e.isFavorite=!e.isFavorite;const t=await this.$Request.PUT(`post/${e._id}`,{data:{isFavorite:e.isFavorite}},this.configs.key);200===t.status&&this.$toast.success(e.isFavorite?"เพิ่มในรายการโปรดแล้ว":"ลบออกจากรายการโปรดแล้ว")}catch(t){console.error("Error toggling favorite:",t),e.isFavorite=!e.isFavorite,this.$toast.error("เกิดข้อผิดพลาด")}},handleClickOutside(e){this.openCardMenu&&!this.$el.contains(e.target)&&this.closeCardMenu()},async getParentPageInfo(){if(this.localDataItem&&this.localDataItem.id)try{const{data:e}=await this.$Request.GET(`post/${this.localDataItem.id}`,this.configs.key);e&&e.data&&(this.parentPageInfo=e.data)}catch(e){console.error("Error fetching parent page info:",e)}}},watch:{listItems(e){e&&e.length&&this.updateDropdownOptions()},searchTerm(){this.getData(!0)}},async mounted(){try{await this.getData(),await this.getParentPageInfo(),this.updateDropdownOptions();const e=window.location.hash;if(e){const t=parseInt(e.replace("#tab",""))-1;!isNaN(t)&&t>=0&&t<this.tabs.length&&(this.selectedTab=t)}document.addEventListener("click",this.handleClickOutside)}catch(e){console.log(Error)}},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},computed:{filteredListItems(){if(0===this.selectedTypes.length){const e=[...this.listItems];e.sort(((e,t)=>"page"===e.type||"form"===e.type&&"layout"===t.type?-1:"layout"===e.type&&"form"===t.type?1:0));const t=e.map((e=>({...e,isHome:e._id===this.selectedHome}))),s=t.findIndex((e=>!0===e.isHome));if(-1!==s){const e=t.splice(s,1)[0];t.unshift(e)}return t}{const e=[...this.listItems];e.sort(((e,t)=>this.selectedTypes.includes(e.type)&&this.selectedTypes.includes(t.type)?"page"===e.type||"form"===e.type&&"layout"===t.type?-1:"layout"===e.type&&"form"===t.type?1:0:this.selectedTypes.includes(e.type)?-1:this.selectedTypes.includes(t.type)?1:0));const t=e.map((e=>({...e,isHome:e._id===this.selectedHome}))).filter((e=>this.selectedTypes.includes(e.type))),s=t.findIndex((e=>!0===e.isHome));if(-1!==s){const e=t.splice(s,1)[0];t.unshift(e)}return t}},filteredPageItems(){return this.listItems.filter((e=>"page"===e.type||"form"===e.type))},filteredLayoutItems(){return this.listItems.filter((e=>"layout"===e.type))},filteredMenuItems(){return this.listItems.filter((e=>"menu"===e.type))}}},Ns=s(64621);const js=(0,Ns.A)(Ms,[["render",Ts],["__scopeId","data-v-ea8cfc54"]]);var Qs=js,Ws={data(){const e=r.A.get("session","token"),t=r.A.get("session");return{configs:r.A.get("configs"),hostkey:this.$Key,accessToken:e,session:t,loading_sources:!0,activeTab:"home",tabs:[{codeName:"page",name:"Page",icon:"list",subText:"หน้าเว็บ"},{codeName:"form",name:"Form",icon:"file-alt",subText:"แบบฟอร์ม"},{codeName:"layout",name:"Layout",icon:"pencil-ruler",subText:"เว็บเลย์เอาต์"},{codeName:"menu",name:"Menu",icon:"list",subText:"เมนูหน้าเว็บ"}],selectedTab:"page",sidebarStats:{total:0,published:0,draft:0,favorites:0},systemStatus:{storage:{used:2.4,total:10,percentage:24},connection:"normal",lastSync:"เมื่อไม่นานนี้"}}},components:{Loader:Y.A,Subhead:ee.A,Content:Qs},methods:{selectTab(e){this.selectedTab=e,window.location.hash=`#${e}`},async importData(){try{const e=document.createElement("input");e.type="file",e.accept=".json,.csv,.xlsx",e.onchange=e=>{const t=e.target.files[0];t&&(console.log("Importing file:",t.name),this.processImportFile(t))},e.click()}catch(e){console.error("Import error:",e)}},async exportData(){try{console.log("Exporting data...");const e={timestamp:(new Date).toISOString(),type:this.selectedTab,data:"content_data_here"};this.downloadJSON(e,`cms_export_${this.selectedTab}_${Date.now()}.json`),this.$toast.success("ส่งออกข้อมูลสำเร็จ")}catch(e){console.error("Export error:",e),this.$toast.error("เกิดข้อผิดพลาดในการส่งออก")}},processImportFile(e){const t=new FileReader;t.onload=e=>{try{const t=JSON.parse(e.target.result);console.log("Imported data:",t),this.$toast.success("นำเข้าข้อมูลสำเร็จ")}catch(t){console.error("Parse error:",t),this.$toast.error("รูปแบบไฟล์ไม่ถูกต้อง")}},t.readAsText(e)},downloadJSON(e,t){const s=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)},manageTemplates(){this.$router.push("/cms/templates")},openMediaLibrary(){this.$router.push("/cms/media")},refreshSystemStatus(){console.log("Refreshing system status..."),this.systemStatus.lastSync="ล่าสุด",this.systemStatus.connection="normal",setTimeout((()=>{this.systemStatus.lastSync="เมื่อไม่นานนี้"}),3e3)},updateSidebarStats(){console.log("Updating sidebar statistics...")}},async mounted(){try{const e=window.location.hash;if(e){const t=e.replace("#","");this.tabs.some((e=>e.codeName===t))&&(this.selectedTab=t)}}catch(e){console.log(Error)}}};const qs=(0,Ns.A)(Ws,[["render",Z],["__scopeId","data-v-065885aa"]]);var Rs=qs,Hs=s(50616),Bs={name:"Page All",components:{Backend:Rs,Frontend:Hs.A},props:{id:{type:String,default:null}},data(){return{session:r.A.get("session"),routeKey:Date.now()}},created(){const e=(0,i.lq)();(0,o.K7)(e.meta.title)},watch:{"$route.params.id":{immediate:!0,handler(){this.routeKey=Date.now()}}},computed:{componentName(){return"backend"===this.session.interface?"Backend":"frontend"===this.session.interface?"Frontend":(console.error("Invalid interface:",this.session.interface),null)}}};const Ks=(0,Ns.A)(Bs,[["render",l]]);var Os=Ks},20720:function(e,t,s){s.d(t,{A:function(){return T}});var a=s(20641),l=s(90033);const o={key:0,class:"inline-preview-container"},i={class:""},r={class:""},n={key:0,class:"browser-frame"},c={class:"browser-header"},d={class:"browser-address-bar"},u={class:"address-input"},g=["src"],p={key:1,class:"device-frame mobile-frame"},m={class:"device-screen"},f={class:"mobile-browser-bar"},y={class:"mobile-address"},h=["src"],b={key:2,class:"device-frame tablet-frame"},x={class:"tablet-container"},k={class:"tablet-screen-area"},v={class:"device-screen tablet-screen"},L={class:"tablet-browser-bar"},w={class:"tablet-address"},C=["src"];function I(e,t,s,I,$,_){return s.visible?((0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",i,[(0,a.Lk)("div",r,[(0,a.Lk)("div",{class:(0,l.C4)(["inline-iframe-container flex justify-center",{"full-width-desktop":"desktop"===$.currentViewport}])},["desktop"===$.currentViewport||"laptop"===$.currentViewport?((0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("div",c,[t[0]||(t[0]=(0,a.Lk)("div",{class:"browser-controls"},[(0,a.Lk)("div",{class:"control-btn close"}),(0,a.Lk)("div",{class:"control-btn minimize"}),(0,a.Lk)("div",{class:"control-btn maximize"})],-1)),(0,a.Lk)("div",d,[(0,a.Lk)("div",u,(0,l.v_)(`localhost:3000/cms/iframe/${s.dataItem}`),1)]),t[1]||(t[1]=(0,a.Lk)("div",{class:"browser-menu"},[(0,a.Lk)("div",{class:"menu-dots"})],-1))]),(0,a.Lk)("iframe",{ref:"viewportFrameInline",src:`/cms/iframe/${s.dataItem}`,style:(0,l.Tr)(_.inlineIframeStyle),class:"browser-content"},null,12,g)])):"mobile"===$.currentViewport?((0,a.uX)(),(0,a.CE)("div",p,[t[3]||(t[3]=(0,a.Lk)("div",{class:"device-header"},[(0,a.Lk)("div",{class:"notch"}),(0,a.Lk)("div",{class:"speaker"})],-1)),(0,a.Lk)("div",m,[(0,a.Lk)("div",f,[(0,a.Lk)("div",y,(0,l.v_)(`localhost:3000/cms/iframe/${s.dataItem}`),1),t[2]||(t[2]=(0,a.Lk)("div",{class:"mobile-refresh"},"⟳",-1))]),(0,a.Lk)("iframe",{ref:"viewportFrameInline",src:`/cms/iframe/${s.dataItem}`,style:(0,l.Tr)(_.inlineIframeStyle),class:"device-content"},null,12,h)]),t[4]||(t[4]=(0,a.Lk)("div",{class:"device-footer"},[(0,a.Lk)("div",{class:"home-indicator"})],-1))])):"tablet"===$.currentViewport?((0,a.uX)(),(0,a.CE)("div",b,[(0,a.Lk)("div",x,[t[6]||(t[6]=(0,a.Lk)("div",{class:"tablet-left-control"},[(0,a.Lk)("div",{class:"camera"})],-1)),(0,a.Lk)("div",k,[(0,a.Lk)("div",v,[(0,a.Lk)("div",L,[(0,a.Lk)("div",w,(0,l.v_)(`localhost:3000/cms/iframe/${s.dataItem}`),1),t[5]||(t[5]=(0,a.Lk)("div",{class:"tablet-menu"},"⋯",-1))]),(0,a.Lk)("iframe",{ref:"viewportFrameInline",src:`/cms/iframe/${s.dataItem}`,style:(0,l.Tr)(_.inlineIframeStyle),class:"device-content tablet-content"},null,12,C)])]),t[7]||(t[7]=(0,a.Lk)("div",{class:"tablet-right-control"},[(0,a.Lk)("div",{class:"home-button"})],-1))])])):(0,a.Q3)("",!0)],2)])])])):(0,a.Q3)("",!0)}var $={props:{visible:{type:Boolean,required:!0},dataItem:{type:String,required:!0},viewport:{type:String,default:"desktop"}},data(){return{currentViewport:this.viewport}},computed:{inlineIframeStyle(){let e="100%",t="100%",s="600px";switch(this.currentViewport){case"mobile":e="345px",t="345px",s="650px";break;case"laptop":e="1124px",t="1124px",s="700px";break;case"tablet":e="800px",t="800px",s="700px";break;case"desktop":e="100%",t="none",s="800px";break;default:break}return{width:e,maxWidth:t,height:s,border:"none",borderRadius:"mobile"===this.currentViewport||"tablet"===this.currentViewport?"0":"4px"}}},methods:{hideComponent(){this.$emit("close")}},watch:{viewport(e){this.currentViewport=e}}},_=s(64621);const P=(0,_.A)($,[["render",I],["__scopeId","data-v-2ccf1d56"]]);var T=P},40368:function(e,t,s){s.d(t,{A:function(){return c}});var a=s(20641);const l={class:"flex flex-col items-center justify-center min-h-screen bg-gray-100"};function o(e,t,s,o,i,r){return(0,a.uX)(),(0,a.CE)("div",l,t[0]||(t[0]=[(0,a.Lk)("h1",{class:"text-4xl font-bold mb-4 text-gray-800"},"Under Construction",-1),(0,a.Lk)("p",{class:"text-lg text-gray-700 mb-6"},"We're working on something awesome. Please check back later!",-1),(0,a.Lk)("div",{class:"flex flex-col items-center"},[(0,a.Lk)("p",{class:"text-gray-700"},"Estimated Completion: September 2023")],-1)]))}var i={name:"UnderConstruction",mounted(){this.$setPageTitle("Under Construction")}},r=s(64621);const n=(0,r.A)(i,[["render",o],["__scopeId","data-v-685445e4"]]);var c=n},87814:function(e,t,s){s.d(t,{A:function(){return T}});var a=s(20641),l=s(90033),o=s(53751);const i={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},r={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},n={class:"min-w-0 flex-1"},c={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},d={key:0,class:"text-sm text-gray-500"},u={class:"mt-5 flex xl:mt-0 xl:ml-4"},g={class:"flex items-center space-x-2"},p={class:"text-sm text-gray-400"},m=["onUpdate:modelValue","placeholder","onChange"],f={value:"",disabled:""},y=["value"],h=["onClick"],b={class:"text-sm hidden sm:inline-block ml-1"},x=["onClick"],k={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,s,v,L,w){const C=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("header",i,[(0,a.Lk)("div",r,[(0,a.Lk)("div",n,[(0,a.Lk)("h1",c,[(0,a.bF)(C,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,a.eW)(" "+(0,l.v_)(s.pageTitle?s.pageTitle:this.PageName),1)]),s.subhead?((0,a.uX)(),(0,a.CE)("p",d,(0,l.v_)(s.subhead),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",u,[(0,a.Lk)("div",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.navigation,((t,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},["select"===t.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("label",p,(0,l.v_)(t.placeholder),1),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:s=>e.$emit("toggleStatus",t.value)},[(0,a.Lk)("option",f,"-- "+(0,l.v_)(t.placeholder)+" --",1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.options,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:t,value:e.value},(0,l.v_)(e.name),9,y)))),128))],40,m),[[o.u1,t.value]])],64)):"call-function"===t.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[!1!==t.visible?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:s=>e.$emit(t.function),type:"button",class:(0,l.C4)(w.getClasses(t.class))},[(0,a.bF)(C,{icon:["fas",`${t.style}`],class:(0,l.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,a.Lk)("span",b,(0,l.v_)(t.name),1)],10,h)):(0,a.Q3)("",!0)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[!1!==t.visible?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e=>w.handleNavigationClick(t),type:"button",class:(0,l.C4)(w.getClasses(t.class))},[(0,a.bF)(C,{icon:["fas",`${t.style}`],class:(0,l.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,a.Lk)("span",k,(0,l.v_)(t.name),1)],10,x)):(0,a.Q3)("",!0)],64))],64)))),128))])])])])}s(44114);var L=s(75220),w=s(52968),C=s(23264),I=s(93426),$={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,L.lq)();return console.log("Translate",(0,I.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,I.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,w.K7)((0,I.iX)())},methods:{getClasses(e){const t=(0,C.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},_=s(64621);const P=(0,_.A)($,[["render",v]]);var T=P},77528:function(e,t,s){s.d(t,{A:function(){return h}});var a=s(20641),l=s(53751),o=s(90033);const i={class:"w-[420px] bg-white shadow-xl border border-gray-200 rounded-lg overflow-hidden confirmation-modal",tabindex:"0"},r={class:"bg-white border-b border-gray-200 px-4 py-3"},n={class:"flex items-center space-x-2"},c={class:"text-base font-semibold text-gray-900"},d={class:"px-4 py-4"},u=["innerHTML"],g={class:"bg-gray-50 border-t border-gray-200 px-4 py-3 flex items-center justify-end space-x-2"};function p(e,t,s,p,m,f){const y=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("div",{class:"z-20 fixed inset-0 flex items-center justify-center",onKeydown:[t[2]||(t[2]=(0,l.jR)(((...e)=>f.confirmDeletion&&f.confirmDeletion(...e)),["enter"])),t[3]||(t[3]=(0,l.jR)(((...e)=>f.cancelDeletion&&f.cancelDeletion(...e)),["esc"]))],ref:"popupContainer",tabindex:"0"},[t[6]||(t[6]=(0,a.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-50"},null,-1)),(0,a.Lk)("div",i,[(0,a.Lk)("div",r,[(0,a.Lk)("div",n,[(0,a.Lk)("div",{class:(0,o.C4)(["w-6 h-6 rounded-md flex items-center justify-center",f.iconBadgeClass])},[(0,a.bF)(y,{icon:f.iconType,class:"h-3 w-3 text-white"},null,8,["icon"])],2),(0,a.Lk)("div",null,[(0,a.Lk)("h2",c,(0,o.v_)(s.header),1),t[4]||(t[4]=(0,a.Lk)("p",{class:"text-xs text-gray-500"},"โปรดยืนยันการดำเนินการ",-1))])])]),(0,a.Lk)("div",d,[(0,a.Lk)("div",{class:"text-sm text-gray-700 leading-relaxed",innerHTML:s.message},null,8,u)]),(0,a.Lk)("div",g,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>f.cancelDeletion&&f.cancelDeletion(...e)),class:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-colors"}," ยกเลิก "),(0,a.Lk)("button",{class:(0,o.C4)([f.confirmButtonClass,"px-3 py-1.5 text-sm font-medium text-white border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors"]),onClick:t[1]||(t[1]=(...e)=>f.confirmDeletion&&f.confirmDeletion(...e))},[(0,a.bF)(y,{icon:["fas","check"],class:"h-3.5 w-3.5 mr-1.5"}),t[5]||(t[5]=(0,a.eW)(" ตกลง "))],2)])])],544)}var m={props:{header:{type:String,required:!0},message:{type:String,required:!0},type:{type:String,default:"default"}},mounted(){this.$refs.popupContainer.focus()},computed:{iconType(){return"warning"===this.type?["fas","exclamation-triangle"]:"success"===this.type?["fas","check-circle"]:"information"===this.type?["fas","info-circle"]:["fas","question-circle"]},iconBadgeClass(){return"warning"===this.type?"bg-red-500":"success"===this.type?"bg-green-500":"information"===this.type?"bg-blue-500":"bg-gray-500"},confirmButtonClass(){return"warning"===this.type?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"success"===this.type?"bg-green-600 hover:bg-green-700 focus:ring-green-500":"information"===this.type?"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500":"bg-gray-600 hover:bg-gray-700 focus:ring-gray-500"}},methods:{confirmDeletion(){this.$emit("confirm")},cancelDeletion(){this.$emit("cancel")}}},f=s(64621);const y=(0,f.A)(m,[["render",p],["__scopeId","data-v-9ba66394"]]);var h=y},38558:function(e,t,s){s.d(t,{A:function(){return T}});var a=s(20641),l=s(90033);const o={class:"flex flex-col justify-center items-center h-full"},i={key:0,class:"flex flex-wrap justify-center"},r=["disabled"],n={key:0,class:"font-medium"},c=["disabled"],d=["onClick","disabled"],u={key:1,class:"font-medium"},g=["disabled"],p=["disabled"],m={key:1,class:"text-sm text-gray-400 text-center"},f={class:"font-medium"},y={class:"text-gray-600"},h={class:"font-medium"},b={class:"text-gray-600"},x={class:"font-medium"},k={class:"text-gray-600"},v={class:"font-medium"},L={class:"text-gray-600"};function w(e,t,s,w,C,I){const $=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("div",o,["nav"===s.displayMode||"full"===s.displayMode?((0,a.uX)(),(0,a.CE)("ul",i,[(0,a.Lk)("li",{class:(0,l.C4)({"opacity-50 cursor-not-allowed":1===C.activePage})},[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>I.handleButtonClick(C.activePage-1)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[(0,a.bF)($,{icon:["fas","chevron-left"],class:"text-gray-700 pl-1 pr-1 text-md"})],8,r)],2),C.activePage>2?((0,a.uX)(),(0,a.CE)("li",n,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>I.handleButtonClick(1)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"}," หน้าแรก ",8,c)])):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(I.pages,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e,class:(0,l.C4)([{"bg-indigo-100 ml-1 mr-1 rounded-md border-indigo-500 text-indigo-600 font-semibold":C.activePage===e},"font-medium"])},[(0,a.Lk)("button",{onClick:t=>I.handleButtonClick(e),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"},(0,l.v_)(e.toString().padStart(2,"0")),9,d)],2)))),128)),C.activePage<s.totalPages-1?((0,a.uX)(),(0,a.CE)("li",u,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>I.handleButtonClick(s.totalPages)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"}," หน้าสุดท้าย ",8,g)])):(0,a.Q3)("",!0),(0,a.Lk)("li",{class:(0,l.C4)({"opacity-50 cursor-not-allowed":C.activePage===s.totalPages})},[(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>I.handleButtonClick(C.activePage+1)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[(0,a.bF)($,{icon:["fas","chevron-right"],class:"text-gray-700 pl-1 pr-1 text-md"})],8,p)],2)])):(0,a.Q3)("",!0),"summary"===s.displayMode||"full"===s.displayMode?((0,a.uX)(),(0,a.CE)("div",m,[(0,a.eW)((0,l.v_)(I.translate("paging-display"))+" ",1),(0,a.Lk)("span",f,[(0,a.Lk)("span",y,(0,l.v_)(I.startItem),1)]),(0,a.eW)(" "+(0,l.v_)(I.translate("paging-to"))+" ",1),(0,a.Lk)("span",h,[(0,a.Lk)("span",b,(0,l.v_)(I.endItem),1)]),t[4]||(t[4]=(0,a.eW)(" / ")),(0,a.Lk)("span",x,[(0,a.Lk)("span",k,(0,l.v_)(I.formatNumber(s.totalPages)),1)]),(0,a.eW)(" "+(0,l.v_)(I.translate("paging-page"))+" | "+(0,l.v_)(I.translate("paging-from"))+" ",1),(0,a.Lk)("span",v,[(0,a.Lk)("span",L,(0,l.v_)(I.formatNumber(s.totalItems)),1)]),(0,a.eW)(" "+(0,l.v_)(I.translate("paging-item")),1)])):(0,a.Q3)("",!0)])}s(44114),s(14603),s(47566),s(98721);var C=s(9964),I=s(93426),$={props:{currentPage:{type:Number,required:!0},dataLoading:{type:Boolean,required:!0},displayMode:{type:String,required:!0,default:"full"},totalPages:{type:Number,required:!0},totalItems:{type:Number,required:!0},limitItems:{type:Number,required:!0}},data(){return{activePage:this.currentPage,buttonClicked:!1}},computed:{pages(){if(window.innerWidth>=600){const e=Math.max(this.activePage-2,1),t=Math.min(this.activePage+2,this.totalPages);let s=[];for(let a=e;a<=t;a++)s.push(a);return s}{let e=Math.max(this.activePage-1,1),t=Math.min(e+2,this.totalPages);t-e<2&&(e=Math.max(t-2,1));let s=[];for(let a=e;a<=t;a++)s.push(a);return s}},startItem(){return(this.activePage-1)*this.limitItems+1},endItem(){return Math.min(this.activePage*this.limitItems,this.totalItems)}},methods:{translate:I.Tl,formatNumber(e){return C.A.formatNumber(e,"short")},goToPage(e){if(e<1||e>this.totalPages)return;const t=new URLSearchParams(window.location.search),s=t.get("searchQuery");let a="";e>1&&s?a=`?page=${e}&searchQuery=${s}`:e>1?a=`?page=${e}`:s&&(a=`?searchQuery=${s}`);const l=`${window.location.pathname}${a||""}`;window.history.pushState({path:l},"",l),this.activePage=e,this.$emit("page-changed",e)},handleButtonClick(e){this.buttonClicked||(this.buttonClicked=!0,this.goToPage(e),setTimeout((()=>{this.buttonClicked=!1}),1e3))}},watch:{currentPage(e){this.activePage=e},activePage(e){this.$emit("page-changed",e)},$route(){}},created(){const e=new URLSearchParams(window.location.search),t=e.get("page");if(t){const e=parseInt(t);isNaN(e)||this.goToPage(e)}}},_=s(64621);const P=(0,_.A)($,[["render",w]]);var T=P},23264:function(e,t,s){function a(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}s.d(t,{c:function(){return a}})}}]);
//# sourceMappingURL=4372.e8c427aa.js.map