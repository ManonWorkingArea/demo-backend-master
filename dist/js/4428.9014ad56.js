"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[4428],{61787:function(e,t,o){o.r(t),o.d(t,{default:function(){return pe}});var s=o(20641);function i(e,t,o,i,r,n){const l=(0,s.g2)("Lecturer",!0);return this.login?((0,s.uX)(),(0,s.Wv)(l,{key:0})):(0,s.Q3)("",!0)}var r=o(52968),n=o(75220),l=(o(44114),o(90033)),a=o(53751);const c={class:"bg-white rounded-lg shadow-sm border border-gray-200"},d={class:"px-4 py-3 border-b border-gray-200"},u={class:"flex items-center justify-between"},g={class:"flex items-center space-x-3"},p={class:"w-8 h-8 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center"},m={class:"text-xs text-gray-500"},b={class:"bg-gray-50 border-b border-gray-200 px-4 py-2"},f={class:"p-4"},h={key:0,class:"text-center py-8"},y={class:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3"},k={key:1,class:"space-y-3"},L={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3"},x={class:"h-32 bg-gray-100 relative overflow-hidden"},v={class:"p-4 relative"},w={class:"absolute -top-8 left-4"},F={class:"w-16 h-16 bg-white rounded-full border-2 border-white shadow-lg overflow-hidden"},C=["src"],T={class:"pt-10"},_={class:"flex items-start justify-between mb-2"},O={class:"flex-1"},j={class:"text-base font-semibold text-gray-900 mb-1"},R={class:"text-xs text-gray-500 mb-1"},B={class:"text-sm text-gray-600 line-clamp-2 mb-2"},M={key:0,class:"text-xs text-green-600 bg-green-50 px-2 py-1 rounded-md inline-block"},D={class:"flex items-center justify-end pt-3 border-t border-gray-100 space-x-1"},W=["onClick"],A=["onClick"],E={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},X={class:"flex min-h-full items-center justify-center p-4"},P={class:"relative bg-white rounded-xl shadow-xl max-w-lg w-full"},S={class:"h-32 bg-gray-100 relative overflow-hidden rounded-t-xl"},I={class:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity duration-300"},J={class:"absolute top-20 left-6"},$={class:"w-16 h-16 bg-white rounded-full border-2 border-white shadow-lg overflow-hidden relative group"},U=["src"],N={class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black bg-opacity-50 rounded-full"},Q={class:"p-5 pt-12"},V={class:"flex items-center justify-between mb-4"},z={class:"flex items-center space-x-2"},K={class:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center"},q={class:"space-y-3"},G={class:"flex justify-end space-x-2 mt-5"},H={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},Y={class:"flex min-h-full items-center justify-center p-4"},Z={class:"relative bg-white rounded-xl shadow-xl max-w-md w-full p-5"},ee={class:"flex items-center justify-between mb-4"},te={class:"flex items-center space-x-2"},oe={class:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center"},se={class:"flex justify-end space-x-2"};function ie(e,t,o,i,r,n){const ie=(0,s.g2)("FileBrowser"),re=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[r.FileBannerOpen?((0,s.uX)(),(0,s.Wv)(ie,{key:0,isWindowsOpen:!0,callbackFunction:"banner",allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:n.changeFileTrigger,onFileBrowserCallback:n.selectFileTrigger},null,8,["onFileBrowserTrigger","onFileBrowserCallback"])):(0,s.Q3)("",!0),r.FileLogoOpen?((0,s.uX)(),(0,s.Wv)(ie,{key:1,isWindowsOpen:!0,callbackFunction:"logo",allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:n.changeFileTriggerLogo,onFileBrowserCallback:n.selectFileTriggerLogo},null,8,["onFileBrowserTrigger","onFileBrowserCallback"])):(0,s.Q3)("",!0),(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[(0,s.Lk)("div",u,[(0,s.Lk)("div",g,[(0,s.Lk)("div",p,[(0,s.bF)(re,{icon:["fas","chalkboard-teacher"],class:"text-white text-sm"})]),(0,s.Lk)("div",null,[t[18]||(t[18]=(0,s.Lk)("h2",{class:"text-base font-semibold text-gray-900"},"วิทยากร",-1)),(0,s.Lk)("p",m,(0,l.v_)(n.getMainLecturers.length)+" วิทยากร",1)])]),(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>n.addLecturer("main")),type:"button",class:"inline-flex items-center rounded-lg bg-green-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200"},[(0,s.bF)(re,{icon:["fas","plus"],class:"mr-1.5"}),t[19]||(t[19]=(0,s.eW)(" เพิ่มวิทยากร "))])])]),(0,s.Lk)("div",b,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$router.push("/lesson/home")),type:"button",class:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 transition-colors duration-200"},[(0,s.bF)(re,{icon:["fas","chevron-left"],class:"mr-1.5 text-xs"}),t[20]||(t[20]=(0,s.eW)(" ย้อนกลับ "))])]),(0,s.Lk)("div",f,[0===n.getMainLecturers.length?((0,s.uX)(),(0,s.CE)("div",h,[(0,s.Lk)("div",y,[(0,s.bF)(re,{icon:["fas","chalkboard-teacher"],class:"text-gray-400 text-lg"})]),t[22]||(t[22]=(0,s.Lk)("h3",{class:"text-base font-medium text-gray-900 mb-2"},"ยังไม่มีวิทยากร",-1)),t[23]||(t[23]=(0,s.Lk)("p",{class:"text-sm text-gray-500 mb-4"},"เริ่มต้นเพิ่มวิทยากรสำหรับการสอน",-1)),(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>n.addLecturer("main")),type:"button",class:"inline-flex items-center rounded-lg bg-green-600 px-3 py-2 text-sm font-medium text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200"},[(0,s.bF)(re,{icon:["fas","plus"],class:"mr-1.5"}),t[21]||(t[21]=(0,s.eW)(" เพิ่มวิทยากรคนแรก "))])])):((0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("div",L,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.flattenedLecturers,(e=>((0,s.uX)(),(0,s.CE)(s.FK,null,["main"===e.type?((0,s.uX)(),(0,s.CE)("div",{key:e._id,class:"bg-white border border-gray-200 rounded-lg hover:shadow-md transition-all duration-200 group overflow-hidden"},[(0,s.Lk)("div",x,[(0,s.Lk)("div",{class:"w-full h-full bg-cover bg-center",style:(0,l.Tr)({backgroundImage:e.banner?`url(${e.banner})`:"linear-gradient(135deg, #10b981 0%, #059669 100%)"})},null,4),t[24]||(t[24]=(0,s.Lk)("div",{class:"absolute inset-0 bg-black bg-opacity-20"},null,-1))]),(0,s.Lk)("div",v,[(0,s.Lk)("div",w,[(0,s.Lk)("div",F,[(0,s.Lk)("img",{src:e.logo||"https://dummyimage.com/400x400/dbdbdb/6e6e6e.jpg&text=++AVATAR++",alt:"Avatar",class:"w-full h-full object-cover"},null,8,C)])]),(0,s.Lk)("div",T,[(0,s.Lk)("div",_,[(0,s.Lk)("div",O,[(0,s.Lk)("h3",j,(0,l.v_)(n.getMainLecturerIndex(e))+". "+(0,l.v_)(e.name),1),(0,s.Lk)("p",R,(0,l.v_)(e.code),1),(0,s.Lk)("p",B,(0,l.v_)(e.description),1),e.education?((0,s.uX)(),(0,s.CE)("div",M," การศึกษา: "+(0,l.v_)(e.education),1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",D,[(0,s.Lk)("button",{onClick:t=>n.openRenameDialog(e),class:"inline-flex items-center px-2 py-1 text-xs text-gray-600 hover:text-green-600 hover:bg-green-50 rounded transition-all duration-200"},[(0,s.bF)(re,{icon:["fas","edit"],class:"mr-1 text-xs"}),t[25]||(t[25]=(0,s.eW)(" แก้ไข "))],8,W),(0,s.Lk)("button",{onClick:t=>n.removeMainLecturerConfirmation(e),class:"inline-flex items-center px-2 py-1 text-xs text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-all duration-200"},[(0,s.bF)(re,{icon:["fas","trash"],class:"mr-1 text-xs"}),t[26]||(t[26]=(0,s.eW)(" ลบ "))],8,A)])])])])):(0,s.Q3)("",!0)],64)))),256))])]))])]),(0,s.bF)(a.eB,{"enter-active-class":"modal-enter-active","leave-active-class":"modal-leave-active","enter-from-class":"modal-enter-from","leave-to-class":"modal-leave-to"},{default:(0,s.k6)((()=>[r.showRenameDialog?((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",X,[(0,s.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25 transition-opacity",onClick:t[3]||(t[3]=(...e)=>n.closeRenameDialog&&n.closeRenameDialog(...e))}),(0,s.Lk)("div",P,[(0,s.Lk)("div",S,[(0,s.Lk)("div",{class:"w-full h-full bg-cover bg-center",style:(0,l.Tr)({backgroundImage:r.selectedLecturer?.banner?`url(${r.selectedLecturer.banner})`:"linear-gradient(135deg, #10b981 0%, #059669 100%)"})},null,4),t[28]||(t[28]=(0,s.Lk)("div",{class:"absolute inset-0 bg-black bg-opacity-20"},null,-1)),(0,s.Lk)("div",I,[(0,s.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.OpenFileBrowser&&n.OpenFileBrowser(...e)),class:"bg-black bg-opacity-75 text-white text-xs px-3 py-2 rounded-lg hover:bg-opacity-90 transition-all duration-200"},[(0,s.bF)(re,{icon:["fas","image"],class:"mr-1.5"}),t[27]||(t[27]=(0,s.eW)(" เปลี่ยนรูปปก "))])])]),(0,s.Lk)("div",J,[(0,s.Lk)("div",$,[(0,s.Lk)("img",{src:r.selectedLecturer?.logo||"https://dummyimage.com/400x400/dbdbdb/6e6e6e.jpg&text=++AVATAR++",alt:"Avatar",class:"w-full h-full object-cover"},null,8,U),(0,s.Lk)("div",N,[(0,s.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.OpenFileBrowserLogo&&n.OpenFileBrowserLogo(...e)),class:"text-white text-xs"},[(0,s.bF)(re,{icon:["fas","image"]})])])])]),(0,s.Lk)("div",Q,[(0,s.Lk)("div",V,[(0,s.Lk)("div",z,[(0,s.Lk)("div",K,[(0,s.bF)(re,{icon:["fas","edit"],class:"text-green-600 text-sm"})]),t[29]||(t[29]=(0,s.Lk)("div",null,[(0,s.Lk)("h3",{class:"text-base font-semibold text-gray-900"},"แก้ไขข้อมูลวิทยากร"),(0,s.Lk)("p",{class:"text-xs text-gray-500"},"จัดการข้อมูลและประวัติ")],-1))]),(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.closeRenameDialog&&n.closeRenameDialog(...e)),class:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-all duration-200"},[(0,s.bF)(re,{icon:["fas","times"],class:"text-sm"})])]),(0,s.Lk)("div",q,[(0,s.Lk)("div",null,[t[30]||(t[30]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"ชื่อวิทยากร",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.selectedLecturer.name=e),type:"text",class:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 text-sm",placeholder:"ระบุชื่อวิทยากร"},null,512),[[a.Jo,r.selectedLecturer.name]])]),(0,s.Lk)("div",null,[t[31]||(t[31]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"รหัสวิทยากร",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>r.selectedLecturer.code=e),type:"text",class:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 text-sm",placeholder:"ระบุรหัสวิทยากร"},null,512),[[a.Jo,r.selectedLecturer.code]])]),(0,s.Lk)("div",null,[t[32]||(t[32]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"ประวัติการทำงาน",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[9]||(t[9]=e=>r.selectedLecturer.description=e),rows:"2",class:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 resize-none text-sm",placeholder:"ระบุประวัติการทำงาน"},null,512),[[a.Jo,r.selectedLecturer.description]])]),(0,s.Lk)("div",null,[t[33]||(t[33]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"ประวัติการศึกษา",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[10]||(t[10]=e=>r.selectedLecturer.education=e),rows:"2",class:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 resize-none text-sm",placeholder:"ระบุประวัติการศึกษา"},null,512),[[a.Jo,r.selectedLecturer.education]])]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>r.selectedLecturer.logo=e),type:"hidden"},null,512),[[a.Jo,r.selectedLecturer.logo]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>r.selectedLecturer.banner=e),type:"hidden"},null,512),[[a.Jo,r.selectedLecturer.banner]])]),(0,s.Lk)("div",G,[(0,s.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.closeRenameDialog&&n.closeRenameDialog(...e)),class:"px-3 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all duration-200"}," ยกเลิก "),(0,s.Lk)("button",{onClick:t[14]||(t[14]=e=>n.renameLecturer(r.selectedLecturer)),class:"px-3 py-2 text-xs font-medium text-white bg-green-600 hover:bg-green-700 rounded-lg transition-all duration-200"},[(0,s.bF)(re,{icon:["fas","save"],class:"mr-1"}),t[34]||(t[34]=(0,s.eW)(" บันทึก "))])])])])])])):(0,s.Q3)("",!0)])),_:1}),(0,s.bF)(a.eB,{"enter-active-class":"modal-enter-active","leave-active-class":"modal-leave-active","enter-from-class":"modal-enter-from","leave-to-class":"modal-leave-to"},{default:(0,s.k6)((()=>[r.showConfirmationPopup?((0,s.uX)(),(0,s.CE)("div",H,[(0,s.Lk)("div",Y,[(0,s.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25 transition-opacity",onClick:t[15]||(t[15]=(...e)=>n.cancelRemoveMainLecturer&&n.cancelRemoveMainLecturer(...e))}),(0,s.Lk)("div",Z,[(0,s.Lk)("div",ee,[(0,s.Lk)("div",te,[(0,s.Lk)("div",oe,[(0,s.bF)(re,{icon:["fas","exclamation-triangle"],class:"text-red-600 text-sm"})]),t[35]||(t[35]=(0,s.Lk)("div",null,[(0,s.Lk)("h3",{class:"text-base font-semibold text-gray-900"},"ยืนยันการลบ"),(0,s.Lk)("p",{class:"text-xs text-gray-500"},"วิทยากร")],-1))])]),t[36]||(t[36]=(0,s.Lk)("div",{class:"mb-4"},[(0,s.Lk)("p",{class:"text-sm text-gray-600"},"คุณแน่ใจหรือไม่ที่จะลบวิทยากรนี้? การดำเนินการนี้ไม่สามารถยกเลิกได้")],-1)),(0,s.Lk)("div",se,[(0,s.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>n.cancelRemoveMainLecturer&&n.cancelRemoveMainLecturer(...e)),class:"px-3 py-2 text-xs font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-all duration-200"}," ยกเลิก "),(0,s.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>n.confirmRemoveMainLecturer&&n.confirmRemoveMainLecturer(...e)),class:"px-3 py-2 text-xs font-medium text-white bg-red-600 hover:bg-red-700 rounded-lg transition-all duration-200"}," ลบ ")])])])])):(0,s.Q3)("",!0)])),_:1})],64)}o(98992),o(54520),o(8872);var re=o(40475),ne=o(40687),le={name:"LecturerList",data(){return{session:re.A.get("session"),configs:re.A.get("configs"),lecturers:[],uniqueIdCounter:5,showRenameDialog:!1,selectedLecturer:null,showMoveDialog:!1,selectedLecturerParent:null,FileBannerOpen:!1,FileLogoOpen:!1,showConfirmationPopup:!1}},components:{FileBrowser:ne.A},computed:{flattenedLecturers(){return this.flattenLecturers(this.lecturers)},getMainLecturers(){return this.lecturers.filter((e=>"main"===e.type))}},async mounted(){try{await this.getLecturerData()}catch(e){console.log(Error)}},methods:{OpenFileBrowser(){this.FileBannerOpen=!0},changeFileTrigger(e){this.FileBannerOpen=e},selectFileTrigger(e){void 0!=e&&this.updateBanner(e.file)},async updateBanner(e){try{const t=this.selectedLecturer,o={...t,banner:e};delete o._id;const s=await fetch(`https://gateway.cloudrestfulapi.com/api/lecturer/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:o,options:{}})});s.ok&&(this.selectedLecturer.banner=e,this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"แก้ไขรูปหน้าปก",text:"แก้ไขรูปหน้าปก สำเร็จแล้ว"}))}catch(t){console.log(t)}},OpenFileBrowserLogo(){this.FileLogoOpen=!0},changeFileTriggerLogo(e){this.FileLogoOpen=e},selectFileTriggerLogo(e){void 0!=e&&this.updateLogo(e.file)},async updateLogo(e){try{const t=this.selectedLecturer,o={...t,logo:e};delete o._id;const s=await fetch(`https://gateway.cloudrestfulapi.com/api/lecturer/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:o,options:{}})});s.ok&&(this.selectedLecturer.logo=e,this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"แก้ไขรูปหน้าปก",text:"แก้ไขรูปหน้าปก สำเร็จแล้ว"}))}catch(t){console.log(t)}},async getLecturerData(){const e=await fetch("https://gateway.cloudrestfulapi.com/api/lecturer/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{unit:this.session.current._id}]}],paging:{page:1,limit:200}})});if(e.ok){const t=await e.json();console.log("finalRes",t),this.lecturers=t.data}},async addLecturer(e,t){try{const o={unit:this.session.current._id,name:"New Lecturer",code:"lecturer-code",description:"Description for New Lecturer",education:"Education for New Lecturer",type:"main",order:0};"sub"===e&&(o.type="sub",o.parent=t._id);const s=await fetch("https://gateway.cloudrestfulapi.com/api/lecturer/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:o,options:{}})});if(s.ok){await this.getLecturerData();const e=await s.json();console.log("finalRes",e)}}catch(o){console.error(o)}},async updateLecturer(e){const t=await fetch("https://gateway.cloudrestfulapi.com/api/lecturer/"+e._id,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{name:e.name,code:e.code,description:e.description,education:e.education,order:e.order},options:{}})});if(t.ok){await this.getLecturerData();const e=await t.json();console.log("finalRes",e)}},async deleteLecturer(e){const t=await fetch("https://gateway.cloudrestfulapi.com/api/lecturer/"+e._id,{method:"DELETE",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}});if(t.ok){await this.getLecturerData();const e=await t.json();console.log("finalRes",e)}},getMainLecturerIndex(e){const t=this.flattenedLecturers.filter((e=>"main"===e.type));return t.findIndex((t=>t._id===e._id))+1},flattenLecturers(e){return e.reduce(((e,t)=>(e.push(t),e)),[])},async removeMainLecturer(e){try{const t=this.lecturers.findIndex((t=>t._id===e._id&&"main"===t.type));-1!==t&&(this.lecturers.splice(t,1),await this.deleteLecturer(e))}catch(t){console.error(t)}},openRenameDialog(e){this.selectedLecturer=e,this.showRenameDialog=!0},closeRenameDialog(){this.showRenameDialog=!1,this.selectedLecturer=null},async renameLecturer(e){try{const t=e.name.trim(),o=e.code.trim(),s=e.description.trim(),i=e.education.trim();""!==t&&(e.name=t),""!==o&&(e.code=o),""!==s&&(e.description=s),""!==i&&(e.education=i),await this.updateLecturer(e),this.closeRenameDialog()}catch(t){console.error(t)}},openMoveDialog(e){this.selectedLecturer=e,this.selectedLecturerParent=e.parent,this.showMoveDialog=!0},closeMoveDialog(){this.showMoveDialog=!1,this.selectedLecturer=null,this.selectedLecturerParent=null},updateSelectedLecturerParent(){this.selectedLecturer.parent=this.selectedLecturerParent,this.closeMoveDialog()},async removeMainLecturerConfirmation(e){this.selectedLecturer=e,this.showConfirmationPopup=!0},async cancelRemoveMainLecturer(){this.showConfirmationPopup=!1,this.selectedLecturer=null},async confirmRemoveMainLecturer(){try{await this.removeMainLecturer(this.selectedLecturer),this.showConfirmationPopup=!1}catch(e){console.error(e)}}}},ae=o(64621);const ce=(0,ae.A)(le,[["render",ie],["__scopeId","data-v-095998e2"]]);var de=ce,ue={name:"Lesson Edit",components:{Lecturer:de},data(){return{login:re.A.get("session","login")}},methods:{},setup(){const e=(0,n.lq)(),t=e.meta.title;(0,r.K7)(t)}};const ge=(0,ae.A)(ue,[["render",i]]);var pe=ge},40687:function(e,t,o){o.d(t,{A:function(){return f}});var s=o(20641),i=o(50953),r=o(90033),n=o(94232),l=o(10797),a=o(55372);const c={key:0,class:"fixed inset-0 overflow-y-auto"},d={class:"flex min-h-full items-center justify-center p-4 text-center"},u={class:"font-medium"},g={class:"bg-black w-8 h-8 right-2 top-2 leading-8 hover:bg-gray-500"},p={props:["isWindowsOpen","allowFileType","callbackFunction"],data(){return console.log("FileBrowser props:",this.isWindowsOpen,this.allowFileType,this.callbackFunction),{SessionList:[],loading_sources:!0,activeBlock:!1,schoolId:"",isOpen:this.isWindowsOpen,isAllow:this.allowFileType,isCallback:this.callbackFunction,mode:"popup"}},components:{FileManager:a.A},watch:{isWindowsOpen(e){console.log("isWindowsOpen changed to:",e),this.isOpen=e}},methods:{selectFileTrigger(e){this.selectFileTrigger=e,this.closeModal(),this.selectFile(e)},closeModal(){this.isOpen=!1,this.$emit("fileBrowserTrigger",!1)},selectFile(e){this.$emit("fileBrowserCallback",e)}},async mounted(){console.log("FileBrowser mounted with isOpen:",this.isOpen,"isWindowsOpen:",this.isWindowsOpen)},setup(){}};var m=Object.assign(p,{__name:"FileBrowser",setup(e){return(t,o)=>{const p=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.Wv)((0,i.R1)(n.O),{appear:"",show:t.isOpen,as:"template"},{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(l.lG),{as:"div",onClose:t.closeModal,class:"relative z-10"},{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(n._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,s.k6)((()=>o[1]||(o[1]=[(0,s.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)]))),_:1}),t.loading_sources?((0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",d,[(0,s.bF)((0,i.R1)(n._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(l.Lj),{class:(0,r.C4)(["w-[60rem] z-40 transform overflow-hidden bg-white p-3 text-left align-middle shadow-xl transition-all blocking relative",[t.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(l.L3),{as:"h3",class:"text-lg pb-2 font-bold leading-6 text-gray-900 border-b"},{default:(0,s.k6)((()=>[o[3]||(o[3]=(0,s.eW)("เลือกไฟล์ (Select File) ")),(0,s.Lk)("p",u,[o[2]||(o[2]=(0,s.eW)("อนุญาติเฉพาะไฟล์ ")),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.allowFileType,(e=>((0,s.uX)(),(0,s.CE)("span",{key:e.code,class:"text-xs font-medium bg-indigo-600 pl-2 pr-2 pt-1 mr-1 rounded text-white"},(0,r.v_)(e),1)))),128))]),(0,s.Lk)("button",{onClick:o[0]||(o[0]=(...e)=>t.closeModal&&t.closeModal(...e)),type:"button",class:"z-50 absolute top-2 right-2"},[(0,s.Lk)("div",g,[(0,s.bF)(p,{icon:["fas","times"],class:"text-white mt-[7px] font-sm"})])])])),_:1}),(0,s.Lk)("div",null,[(0,s.bF)(a.A,{onSelectFileTrigger:t.selectFileTrigger,Mode:t.mode,AllowFile:t.isAllow,CallbackFunc:t.isCallback},null,8,["onSelectFileTrigger","Mode","AllowFile","CallbackFunc"])])])),_:1},8,["class"])])),_:1})])])):(0,s.Q3)("",!0)])),_:1},8,["onClose"])])),_:1},8,["show"])}}});const b=m;var f=b}}]);
//# sourceMappingURL=4428.9014ad56.js.map