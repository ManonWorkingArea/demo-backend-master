"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[446],{70446:function(e,t,s){s.r(t),s.d(t,{default:function(){return Z}});var a=s(20641);const i={class:"w-full h-full"};function o(e,t,s,o,n,r){const l=(0,a.g2)("PackageEdit",!0);return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(l)])}var n=s(53751),r=s(90033);const l={key:0,class:"text-center"},d={class:"flex-1 pb-8"},c={class:"mt-8"},u={class:"flex-1 bg-gray-100"},m={class:"mt-8"},g={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},p={class:"space-y-6 sm:px-6 lg:col-span-9 lg:px-0"},b={class:"shadow sm:overflow-hidden sm:rounded-md"},f={class:"bg-white py-6 px-4 sm:p-6"},k={key:0,class:"mt-4 rounded-md bg-red-50 p-4"},x={class:"flex"},h={class:"flex-shrink-0"},y={class:"ml-3"},v={class:"mt-1 text-sm text-red-700"},L={key:1,class:"mt-4 rounded-md bg-green-50 p-4"},w={class:"flex"},C={class:"flex-shrink-0"},P={class:"mt-6 grid grid-cols-4 gap-6"},F={class:"col-span-4 sm:col-span-2"},U={class:"col-span-4 sm:col-span-2"},E={class:"col-span-4"},X={class:"col-span-4 sm:col-span-2"},A={class:"col-span-4 sm:col-span-2"},_={class:"mt-1"},V={class:"inline-flex items-center"},B={class:"mt-8"},S={class:"grid grid-cols-4 gap-6"},K={class:"mt-6 grid grid-cols-2 gap-6"},$={class:"inline-flex items-center"},I={class:"inline-flex items-center"},J={class:"inline-flex items-center"},T={class:"inline-flex items-center"},G={class:"mt-8"},j={class:"flex justify-between items-center mb-4"},D=["onUpdate:modelValue"],N=["onClick"];function Q(e,t,s,i,o,Q){const q=(0,a.g2)("Loader"),H=(0,a.g2)("Subhead"),W=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)(a.FK,null,[o.loading_sources?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(q)])),o.loading_sources?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.bF)(H,{navigation:[{name:"ย้อนกลับ",link:"/origin/package",style:"chevron-left",class:"secondary-btn",visible:!0,type:"button"}]}),(0,a.Lk)("main",d,[(0,a.Lk)("div",c,[(0,a.Lk)("div",u,[(0,a.Lk)("div",m,[(0,a.Lk)("div",g,[(0,a.Lk)("div",p,[(0,a.Lk)("form",{onSubmit:t[14]||(t[14]=(0,n.D$)(((...e)=>Q.updatePackage&&Q.updatePackage(...e)),["prevent"]))},[(0,a.Lk)("section",{"aria-labelledby":"payment-details-heading",class:(0,r.C4)(["relative",[o.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,a.Lk)("div",b,[(0,a.Lk)("div",f,[t[34]||(t[34]=(0,a.Lk)("div",null,[(0,a.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-medium leading-6 text-gray-900"}," แก้ไข Package "),(0,a.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"แก้ไขข้อมูล Package สำหรับ Collection")],-1)),o.error?((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",x,[(0,a.Lk)("div",h,[(0,a.bF)(W,{icon:["fas","exclamation-circle"],class:"h-5 w-5 text-red-400"})]),(0,a.Lk)("div",y,[t[15]||(t[15]=(0,a.Lk)("h3",{class:"text-sm font-medium text-red-800"},"เกิดข้อผิดพลาด",-1)),(0,a.Lk)("p",v,(0,r.v_)(o.error),1)])])])):(0,a.Q3)("",!0),o.success?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("div",w,[(0,a.Lk)("div",C,[(0,a.bF)(W,{icon:["fas","check-circle"],class:"h-5 w-5 text-green-400"})]),t[16]||(t[16]=(0,a.Lk)("div",{class:"ml-3"},[(0,a.Lk)("h3",{class:"text-sm font-medium text-green-800"},"สำเร็จ"),(0,a.Lk)("p",{class:"mt-1 text-sm text-green-700"},"อัปเดต Package เรียบร้อยแล้ว กำลังไปยังหน้ารายการ...")],-1))])])):(0,a.Q3)("",!0),(0,a.Lk)("div",P,[(0,a.Lk)("div",F,[t[17]||(t[17]=(0,a.Lk)("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"ชื่อ Package",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e),type:"text",name:"name",id:"name",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[n.Jo,o.name]])]),(0,a.Lk)("div",U,[t[18]||(t[18]=(0,a.Lk)("label",{for:"price",class:"block text-sm font-medium text-gray-700"},"ราคา (บาท)",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.price=e),type:"number",name:"price",id:"price",min:"0",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[n.Jo,o.price]])]),(0,a.Lk)("div",E,[t[19]||(t[19]=(0,a.Lk)("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"คำอธิบาย",-1)),(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.description=e),name:"description",id:"description",rows:"3",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:"อธิบายรายละเอียดของ Package"},null,512),[[n.Jo,o.description]])]),(0,a.Lk)("div",X,[t[20]||(t[20]=(0,a.Lk)("label",{for:"duration",class:"block text-sm font-medium text-gray-700"},"ระยะเวลา (วัน)",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.duration=e),type:"number",name:"duration",id:"duration",min:"1",required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[n.Jo,o.duration]])]),(0,a.Lk)("div",A,[t[22]||(t[22]=(0,a.Lk)("label",{class:"block text-sm font-medium text-gray-700"},"สถานะ",-1)),(0,a.Lk)("div",_,[(0,a.Lk)("label",V,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.status=e),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[n.lH,o.status]]),t[21]||(t[21]=(0,a.Lk)("span",{class:"ml-2 text-sm text-gray-700"},"เปิดใช้งาน",-1))])])])]),(0,a.Lk)("div",B,[t[31]||(t[31]=(0,a.Lk)("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ข้อจำกัดการใช้งาน",-1)),(0,a.Lk)("div",S,[(0,a.Lk)("div",null,[t[23]||(t[23]=(0,a.Lk)("label",{for:"maxAssets",class:"block text-sm font-medium text-gray-700"},"จำนวน Assets สูงสุด",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.limits.maxAssets=e),type:"number",name:"maxAssets",id:"maxAssets",min:"1",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[n.Jo,o.limits.maxAssets]])]),(0,a.Lk)("div",null,[t[24]||(t[24]=(0,a.Lk)("label",{for:"maxUsers",class:"block text-sm font-medium text-gray-700"},"จำนวนผู้ใช้สูงสุด",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.limits.maxUsers=e),type:"number",name:"maxUsers",id:"maxUsers",min:"1",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[n.Jo,o.limits.maxUsers]])]),(0,a.Lk)("div",null,[t[25]||(t[25]=(0,a.Lk)("label",{for:"storageGB",class:"block text-sm font-medium text-gray-700"},"พื้นที่จัดเก็บ (GB)",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.limits.storageGB=e),type:"number",name:"storageGB",id:"storageGB",min:"1",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[n.Jo,o.limits.storageGB]])]),(0,a.Lk)("div",null,[t[26]||(t[26]=(0,a.Lk)("label",{for:"bandwidth",class:"block text-sm font-medium text-gray-700"},"Bandwidth (GB/เดือน)",-1)),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.limits.bandwidth=e),type:"number",name:"bandwidth",id:"bandwidth",min:"1",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,512),[[n.Jo,o.limits.bandwidth]])])]),(0,a.Lk)("div",K,[(0,a.Lk)("div",null,[(0,a.Lk)("label",$,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.limits.customDomain=e),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[n.lH,o.limits.customDomain]]),t[27]||(t[27]=(0,a.Lk)("span",{class:"ml-2 text-sm text-gray-700"},"Custom Domain",-1))])]),(0,a.Lk)("div",null,[(0,a.Lk)("label",I,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.limits.sslCertificate=e),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[n.lH,o.limits.sslCertificate]]),t[28]||(t[28]=(0,a.Lk)("span",{class:"ml-2 text-sm text-gray-700"},"SSL Certificate",-1))])]),(0,a.Lk)("div",null,[(0,a.Lk)("label",J,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.limits.apiAccess=e),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[n.lH,o.limits.apiAccess]]),t[29]||(t[29]=(0,a.Lk)("span",{class:"ml-2 text-sm text-gray-700"},"API Access",-1))])]),(0,a.Lk)("div",null,[(0,a.Lk)("label",T,[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.limits.prioritySupport=e),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[n.lH,o.limits.prioritySupport]]),t[30]||(t[30]=(0,a.Lk)("span",{class:"ml-2 text-sm text-gray-700"},"Priority Support",-1))])])])]),(0,a.Lk)("div",G,[(0,a.Lk)("div",j,[t[33]||(t[33]=(0,a.Lk)("h3",{class:"text-lg font-medium text-gray-900"},"คุณสมบัติเพิ่มเติม",-1)),(0,a.Lk)("button",{type:"button",onClick:t[13]||(t[13]=(...e)=>Q.addFeature&&Q.addFeature(...e)),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200"},[(0,a.bF)(W,{icon:["fas","plus"],class:"mr-2"}),t[32]||(t[32]=(0,a.eW)(" เพิ่มคุณสมบัติ "))])]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.features,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:"flex items-center space-x-3 mb-3"},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e=>o.features[t]=e,type:"text",placeholder:"ระบุคุณสมบัติ",class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,8,D),[[n.Jo,o.features[t]]]),(0,a.Lk)("button",{type:"button",onClick:e=>Q.removeFeature(t),class:"text-red-600 hover:text-red-800"},[(0,a.bF)(W,{icon:["fas","trash"]})],8,N)])))),128))])]),t[35]||(t[35]=(0,a.Lk)("div",{class:"bg-gray-50 px-4 py-3 text-right sm:px-6"},[(0,a.Lk)("button",{type:"submit",class:"inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," อัพเดท Package ")],-1))])],2)],32)])])])])])])],64)):(0,a.Q3)("",!0)],64)}s(44114),s(98992),s(54520);var q=s(75435),H=s(87814),W={inject:["apiServer"],data(){return{hostkey:this.$Key,activeBlock:!1,packageId:this.$route.params.id,name:"",description:"",price:0,duration:30,limits:{maxAssets:1,maxUsers:5,storageGB:1,bandwidth:10,customDomain:!1,sslCertificate:!1,apiAccess:!1,prioritySupport:!1},features:[],status:!0,loading_sources:!0,error:null,success:!1}},components:{Loader:q.A,Subhead:H.A},methods:{async fetchData(){try{this.loading_sources=!1;const e=await fetch("https://gateway.cloudrestfulapi.com/api/package/"+this.packageId,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.hostkey}}),t=await e.json();this.name=t.name,this.description=t.description,this.price=t.price,this.duration=t.duration,this.limits=t.limits||this.limits,this.features=t.features||[],this.status=t.status,this.loading_sources=!0}catch(e){console.error(e),this.loading_sources=!0}},async updatePackage(){try{if(this.error=null,this.success=!1,!this.name.trim())return void(this.error="กรุณาใส่ชื่อ Package");if(!this.description.trim())return void(this.error="กรุณาใส่คำอธิบาย Package");if(this.price<=0)return void(this.error="กรุณาใส่ราคาที่มากกว่า 0");this.activeBlock=!0;const e=await fetch("https://gateway.cloudrestfulapi.com/api/package/"+this.packageId,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({data:{name:this.name,description:this.description,price:this.price,duration:this.duration,limits:this.limits,features:this.features.filter((e=>""!==e.trim())),status:this.status,updatedAt:new Date},options:{unique:"_id"}})}),t=await e.json();this.activeBlock=!1,e.ok?(this.success=!0,setTimeout((()=>{this.$router.push("/origin/package")}),1500)):this.error=t.message||"เกิดข้อผิดพลาดในการอัปเดต Package"}catch(e){console.error("Error updating package:",e),this.error="เกิดข้อผิดพลาดในการเชื่อมต่อกับเซิร์ฟเวอร์",this.activeBlock=!1}},addFeature(){this.features.push("")},removeFeature(e){this.features.splice(e,1)}},async mounted(){await this.fetchData()},setup(){}},O=s(64621);const z=(0,O.A)(W,[["render",Q],["__scopeId","data-v-a63945e6"]]);var M=z,R={components:{PackageEdit:M}};const Y=(0,O.A)(R,[["render",o]]);var Z=Y},87814:function(e,t,s){s.d(t,{A:function(){return X}});var a=s(20641),i=s(90033),o=s(53751);const n={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},r={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},l={class:"min-w-0 flex-1"},d={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},c={key:0,class:"text-sm text-gray-500"},u={class:"mt-5 flex xl:mt-0 xl:ml-4"},m={class:"flex items-center space-x-2"},g={class:"text-sm text-gray-400"},p=["onUpdate:modelValue","placeholder","onChange"],b={value:"",disabled:""},f=["value"],k=["onClick"],x={class:"text-sm hidden sm:inline-block ml-1"},h=["onClick"],y={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,s,v,L,w){const C=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("header",n,[(0,a.Lk)("div",r,[(0,a.Lk)("div",l,[(0,a.Lk)("h1",d,[(0,a.bF)(C,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,a.eW)(" "+(0,i.v_)(s.pageTitle?s.pageTitle:this.PageName),1)]),s.subhead?((0,a.uX)(),(0,a.CE)("p",c,(0,i.v_)(s.subhead),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",u,[(0,a.Lk)("div",m,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.navigation,((t,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},["select"===t.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("label",g,(0,i.v_)(t.placeholder),1),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:s=>e.$emit("toggleStatus",t.value)},[(0,a.Lk)("option",b,"-- "+(0,i.v_)(t.placeholder)+" --",1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.options,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:t,value:e.value},(0,i.v_)(e.name),9,f)))),128))],40,p),[[o.u1,t.value]])],64)):"call-function"===t.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[!1!==t.visible?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:s=>e.$emit(t.function),type:"button",class:(0,i.C4)(w.getClasses(t.class))},[(0,a.bF)(C,{icon:["fas",`${t.style}`],class:(0,i.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,a.Lk)("span",x,(0,i.v_)(t.name),1)],10,k)):(0,a.Q3)("",!0)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[!1!==t.visible?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e=>w.handleNavigationClick(t),type:"button",class:(0,i.C4)(w.getClasses(t.class))},[(0,a.bF)(C,{icon:["fas",`${t.style}`],class:(0,i.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,a.Lk)("span",y,(0,i.v_)(t.name),1)],10,h)):(0,a.Q3)("",!0)],64))],64)))),128))])])])])}s(44114);var L=s(75220),w=s(52968),C=s(23264),P=s(93426),F={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,L.lq)();return console.log("Translate",(0,P.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,P.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,w.K7)((0,P.iX)())},methods:{getClasses(e){const t=(0,C.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},U=s(64621);const E=(0,U.A)(F,[["render",v]]);var X=E},23264:function(e,t,s){function a(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}s.d(t,{c:function(){return a}})}}]);
//# sourceMappingURL=446.82dbe4f4.js.map