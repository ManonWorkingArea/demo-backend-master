"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[4479],{4479:function(t,e,s){s.r(e),s.d(e,{default:function(){return tt}});var o=s(20641);function n(t,e,s,n,a,r){const i=(0,o.g2)("Index",!0);return this.login?((0,o.uX)(),(0,o.Wv)(i,{key:0})):(0,o.Q3)("",!0)}var a=s(52968),r=s(75220),i=(s(44114),s(90033));const l={key:0,class:"text-center"},c={key:1},u={class:"py-2 border-gray-800"},d={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 xl:flex xl:items-center xl:justify-between"},p={class:"min-w-0 flex-1"},g={class:"mt-2 text-xl font-bold leading-7 text-gray-700 sm:truncate sm:text-1xl sm:tracking-tight"},m={class:"mt-5 flex xl:mt-0 xl:ml-4"},h={key:0,class:"hidden sm:block"},f={key:1,class:"hidden sm:block"},x={key:2,class:"hidden sm:block"},k={class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5 border-t"},y={class:"mt-8"},b={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},w={class:"mt-8 flex flex-col"},v={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},C={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},L={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},_={class:"min-w-full divide-y divide-gray-300"},F={class:"divide-y divide-gray-200 bg-white"},T={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},A={class:"whitespace-nowrap px-3 py-4 text-md text-gray-700 font-bold"},E=["href"],M={class:"font-medium mt-2"},X={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},P={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},D={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},W={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-md font-medium sm:pr-6"},I=["onClick"],Q=["onClick"],j=["onClick"];function S(t,e,s,n,a,r){const S=(0,o.g2)("Loader"),z=(0,o.g2)("font-awesome-icon"),K=(0,o.g2)("CourseIcon"),B=(0,o.g2)("CourseStat"),q=(0,o.g2)("Price"),$=(0,o.g2)("StatusLabel"),G=(0,o.g2)("Tooltip");return(0,o.uX)(),(0,o.CE)(o.FK,null,[a.loading_sources?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",l,[(0,o.bF)(S)])),a.loading_sources?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("header",u,[(0,o.Lk)("div",d,[(0,o.Lk)("div",p,[(0,o.Lk)("h1",g,[(0,o.bF)(z,{icon:["fas",a.PageIcon],class:"text-gray-500 text-[24px]"},null,8,["icon"]),(0,o.eW)(" "+(0,i.v_)(a.PageName),1)])]),(0,o.Lk)("div",m,[this.master?((0,o.uX)(),(0,o.CE)("span",h,[(0,o.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$router.push("/lesson/add")),type:"button",class:"inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-gray-50"},[(0,o.bF)(z,{icon:["fas","plus"],class:"text-black text-[12px] mr-2"}),e[3]||(e[3]=(0,o.eW)(" เพิ่มหลักสูตรใหม่ "))])])):(0,o.Q3)("",!0),this.master?((0,o.uX)(),(0,o.CE)("span",f,[(0,o.Lk)("button",{onClick:e[1]||(e[1]=t=>r.toggleMaster()),type:"button",class:"ml-3 inline-flex items-center rounded-md border border-gray-300 bg-emerald-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-emerald-900 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-gray-50"},[(0,o.bF)(z,{icon:["fas","pencil"],class:"text-white text-[12px] mr-2"}),e[4]||(e[4]=(0,o.eW)(" Child Mode "))])])):(0,o.Q3)("",!0),this.master?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",x,[(0,o.Lk)("button",{onClick:e[2]||(e[2]=t=>r.toggleMaster()),type:"button",class:"ml-3 inline-flex items-center rounded-md border border-gray-300 bg-rose-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-rose-900 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-gray-50"},[(0,o.bF)(z,{icon:["fas","pencil"],class:"text-white text-[12px] mr-2"}),e[5]||(e[5]=(0,o.eW)(" Master Mode "))])]))])])]),(0,o.Lk)("div",k,[(0,o.Lk)("div",y,[(0,o.Lk)("div",b,[(0,o.Lk)("div",w,[(0,o.Lk)("div",v,[(0,o.Lk)("div",C,[(0,o.Lk)("div",L,[(0,o.Lk)("table",_,[e[9]||(e[9]=(0,o.Lk)("thead",{class:"bg-gray-50"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"#"),(0,o.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"ชื่อหลักสูตร"),(0,o.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"รหัส"),(0,o.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"ราคา"),(0,o.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"สถานะ"),(0,o.Lk)("th",{scope:"col",class:"w-20 px-3 py-3.5 text-center text-sm font-semibold text-gray-900"},"เครื่องมือ")])],-1)),(0,o.Lk)("tbody",F,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.listItems,((s,n)=>((0,o.uX)(),(0,o.CE)("tr",{key:s.id},[(0,o.Lk)("td",T,(0,i.v_)(n+1),1),(0,o.Lk)("td",A,[(0,o.Lk)("a",{href:"/lesson/detail/"+s.id,class:"text-gray-700 hover:text-indigo-600"},[(0,o.bF)(K,{title:s.name,chcek:s.ref},null,8,["title","chcek"])],8,E),(0,o.Lk)("p",M,[(0,o.bF)(B,{check:s.id},null,8,["check"])])]),(0,o.Lk)("td",X,(0,i.v_)(s.slug),1),(0,o.Lk)("td",P,[(0,o.bF)(q,{regular:s.regular_price,sale:s.sale_price},null,8,["regular","sale"])]),(0,o.Lk)("td",D,[(0,o.bF)($,{check:s.status},null,8,["check"])]),(0,o.Lk)("td",W,[(0,o.bF)(G,{title:"สร้างสำเนาข้อมูล",size:"12"},{default:(0,o.k6)((()=>[this.master?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t=>r.cloneChildData(s.id),type:"button",class:"mr-2 inline-flex justify-center rounded-md border border-indigo-700 bg-indigo-600 px-2 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,o.bF)(z,{icon:["fas","copy"],class:"text-white mt-[3px] mr-2 text-md"}),e[6]||(e[6]=(0,o.Lk)("span",null,"Clone Data",-1))],8,I)):(0,o.Q3)("",!0)])),_:2},1024),(0,o.Lk)("button",{onClick:e=>t.$router.push("/lesson/edit/"+s.id),type:"button",class:"mr-2 inline-flex justify-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,o.bF)(z,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),e[7]||(e[7]=(0,o.Lk)("span",null,"แก้ไข",-1))],8,Q),(0,o.Lk)("button",{onClick:t=>r.deleteData(s.id),type:"button",class:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,o.bF)(z,{icon:["fas","trash-can"],class:"text-black mt-[3px] mr-2 text-md"}),e[8]||(e[8]=(0,o.Lk)("span",null,"ลบ",-1))],8,j)])])))),128))])])])])])])])])])])):(0,o.Q3)("",!0)],64)}var z=s(59911),K=s.n(z),B=s(40475),q=s(75435),$=s(49170),G=s(77066),N=s(39833),O=s(87431),H=s(12055),J={data(){const t=(0,r.lq)(),e=B.A.get("session");return{PageName:t.meta.title,PageIcon:t.meta.icon,PagePath:t.meta.path,ParentName:t.meta.parent,ParentPage:t.meta.page,school:e.current.id,accessToken:e.token,login:e.login,listItems:[],loading_sources:!0,pages:0,current:0,total:0,next:!0,prev:!1,MasterText:e.MasterText,endpoint:"",master:e.master}},components:{Loader:q.A,Tooltip:$.m,CourseIcon:G.A,StatusLabel:N.A,CourseStat:H.A,Price:O.A},methods:{async getData(){if(console.log("getData",this.login),this.login)try{this.loading_sources=!1;const t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/"+this.endpoint+"/school/"+this.school,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}}),e=await t.json();if(console.log("Get School",e),this.listItems=e.data,null!==e.data){this.listItems.sort((function(t,e){return t.order<e.order?-1:1})),this.loading_sources=!0,this.pages=e.pages,this.current=e.currentPage,this.total=e.totalCount,this.next=e.nextState,this.prev=e.preState;const t=B.A.get("session"),s=t.category;if("undefined"!==typeof s&&s.length>0)this.categoryData=s;else{const t=await this.getCategoryData();if(t.success){let e={category:t.data};B.A.update("session",e),this.categoryData=t.data}}}else this.loading_sources=!0}catch(t){console.log(t)}},async getCategoryData(){if(this.login)try{const t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/catagories/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}}),e=await t.json();return console.log("Category",e),e}catch(t){console.log(t)}},async deleteData(t){if(this.login)try{this.loading_sources=!1,console.log("id",t);const e=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/"+this.endpoint+"/"+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}});console.log(e),this.loading_sources=!0,await this.getData()}catch(e){console.log(e)}},async cloneChildData(t){if(this.login)try{this.master?this.endpoint="mcourses":this.endpoint="courses",this.loading_sources=!1;const e=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/mcourses/"+t+"/cloneCourse/",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}}),s=await e.json();s.success&&this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:500,icon:"success",title:"แจ้งเตือน",text:"สร้างหลักสูตร Cloning เรียบร้อยแล้ว"}).then((()=>{this.loading_sources=!0}))}catch(e){console.log(e)}},updated(){K().replace()},toggleMaster(){if(this.master){let t={master:!1,MasterText:"Master Mode"};B.A.update("session",t),this.MasterText="Master Mode",location.reload()}else{let t={master:!0,MasterText:"Child Mode"};B.A.update("session",t),this.MasterText="Child Mode",location.reload()}}},async mounted(){try{this.master?this.endpoint="mcourses":this.endpoint="courses",await this.getData()}catch(t){console.log(Error)}},setup(){}},R=s(64621);const U=(0,R.A)(J,[["render",S]]);var V=U,Y={name:"Lesson Index",components:{Index:V},data(){return{login:B.A.get("session","login")}},methods:{},setup(){const t=(0,r.lq)(),e=t.meta.title;(0,a.K7)(e)}};const Z=(0,R.A)(Y,[["render",n]]);var tt=Z},77066:function(t,e,s){s.d(e,{A:function(){return m}});var o=s(20641),n=s(90033);const a={key:0},r={key:1},i={key:2};function l(t,e,s,l,c,u){const d=(0,o.g2)("font-awesome-icon"),p=(0,o.g2)("Tooltip");return(0,o.uX)(),(0,o.CE)(o.FK,null,[t.ls.get("master")?((0,o.uX)(),(0,o.CE)("span",a,[(0,o.bF)(p,{title:"Master ของหลักสูตรอื่น"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{icon:["fas","lock"],class:"text-rose-400"})])),_:1}),(0,o.eW)((0,n.v_)(s.title),1)])):(0,o.Q3)("",!0),t.ls.get("master")||"none"==s.chcek?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",r,[(0,o.bF)(p,{title:"เชื่อมโยงกับ Master แล้ว"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{icon:["fas","link"],class:"text-green-600"})])),_:1}),(0,o.eW)((0,n.v_)(s.title),1)])),t.ls.get("master")||"none"!==s.chcek?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",i,[(0,o.bF)(p,{title:"ไม่เชื่อมโยงกับ Master ใดๆแล้ว"},{default:(0,o.k6)((()=>[(0,o.bF)(d,{icon:["fas","link-slash"],class:"text-rose-400"})])),_:1}),(0,o.eW)((0,n.v_)(s.title),1)]))],64)}var c=s(49170),u=s(43684),d={props:["order","title","chcek"],components:{Tooltip:c.m},data(){return{master:u.ls.get("master")}}},p=s(64621);const g=(0,p.A)(d,[["render",l]]);var m=g},12055:function(t,e,s){s.d(e,{A:function(){return g}});var o=s(20641);const n={class:"bg-gray-600 text-[12px] text-white rounded mr-2 pl-1 pr-1 pt-1 pb-1"},a={class:"bg-gray-600 text-[12px] text-white rounded mr-2 pl-1 pr-1 pt-1 pb-1"},r={class:"bg-gray-600 text-[12px] text-white rounded mr-2 pl-1 pr-1 pt-1 pb-1"};function i(t,e,s,i,l,c){const u=(0,o.g2)("font-awesome-icon"),d=(0,o.g2)("Tooltip");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(d,{title:"จำนวนบทเรียน",size:"12"},{default:(0,o.k6)((()=>[(0,o.Lk)("span",n,[e[0]||(e[0]=(0,o.eW)(" 0 ")),(0,o.bF)(u,{icon:["fas","book"],class:"text-white mr-2"})])])),_:1}),(0,o.bF)(d,{title:"แบบทดสอบ",size:"12"},{default:(0,o.k6)((()=>[(0,o.Lk)("span",a,[e[1]||(e[1]=(0,o.eW)(" 0 ")),(0,o.bF)(u,{icon:["fas","square-check"],class:"text-white mr-2"})])])),_:1}),(0,o.bF)(d,{title:"ผู้ลงทะเบียน",size:"12"},{default:(0,o.k6)((()=>[(0,o.Lk)("span",r,[e[2]||(e[2]=(0,o.eW)(" 0 ")),(0,o.bF)(u,{icon:["fas","user"],class:"text-white mr-2"})])])),_:1})],64)}var l=s(49170),c=s(43684),u={props:["title","chcek"],components:{Tooltip:l.m},data(){return{master:c.ls.get("master")}}},d=s(64621);const p=(0,d.A)(u,[["render",i]]);var g=p},87431:function(t,e,s){s.d(e,{A:function(){return c}});var o=s(20641),n=s(90033);function a(t,e,s,a,r,i){return(0,o.uX)(),(0,o.CE)("span",null,(0,n.v_)(i.formatPrice(this.regular_price))+" ฿ / "+(0,n.v_)(i.formatPrice(this.sale_price))+" ฿ ",1)}var r={props:["regular","sale"],components:{},data(){return{regular_price:this.regular,sale_price:this.sale||"0"}},methods:{formatPrice(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}}},i=s(64621);const l=(0,i.A)(r,[["render",a]]);var c=l},39833:function(t,e,s){s.d(e,{A:function(){return p}});var o=s(20641),n=s(90033);const a={key:0,class:"text-xs font-medium bg-emerald-600 pl-2 pr-2 pt-1 pb-1 ml-5 text-white"},r={key:1,class:"text-xs font-medium bg-rose-600 pl-2 pr-2 pt-1 pb-1 ml-5 text-white"};function i(t,e,s,i,l,c){const u=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[s.check?((0,o.uX)(),(0,o.CE)("span",a,[(0,o.bF)(u,{icon:["fas","check"],class:"text-white"}),(0,o.eW)(" "+(0,n.v_)(c.translate("general-public")),1)])):(0,o.Q3)("",!0),s.check?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",r,[(0,o.bF)(u,{icon:["fas","times"],class:"text-white"}),(0,o.eW)(" "+(0,n.v_)(c.translate("general-unpublic")),1)]))],64)}var l=s(93426),c={props:["check"],components:{},data(){return{}},methods:{translate:l.Tl}},u=s(64621);const d=(0,u.A)(c,[["render",i]]);var p=d}}]);
//# sourceMappingURL=4479.910642d2.js.map