"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[4691],{64691:function(e,t,s){s.r(t),s.d(t,{default:function(){return _}});var n=s(20641);function o(e,t,s,o,a,r){const l=(0,n.g2)("Authen"),i=(0,n.g2)("Dashboard");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(l),this.login?((0,n.uX)(),(0,n.Wv)(i,{key:0})):(0,n.Q3)("",!0)],64)}var a=s(52968),r=s(75220),l=s(53751);const i={key:0,class:"text-center"},u={class:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8"},c={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},d={class:"mt-2"},g={class:"mt-2"};function m(e,t,s,o,a,r){const m=(0,n.g2)("Loader"),p=(0,n.g2)("Subhead");return(0,n.uX)(),(0,n.CE)(n.FK,null,[a.loading_sources?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",i,[(0,n.bF)(m)])),(0,n.bF)(p,{navigation:[{name:"ลงทะเบียน",link:"/enroll/new",style:"plus",type:"button",class:"primary-btn"}],onToggleStatus:e.toggleStatus},null,8,["onToggleStatus"]),(0,n.Lk)("div",u,[t[6]||(t[6]=(0,n.Lk)("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[(0,n.Lk)("h2",{class:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900"},"เข้าสู่ระบบ BQCLP's LIMs"),(0,n.Lk)("p",{class:"mt-5 text-center text-gray-500"},"ลูกค้าผู้ส่งตัวอย่าง")],-1)),(0,n.Lk)("div",c,[(0,n.Lk)("form",{class:"space-y-6",onSubmit:t[2]||(t[2]=(0,l.D$)(((...e)=>r.login&&r.login(...e)),["prevent"]))},[(0,n.Lk)("div",null,[t[3]||(t[3]=(0,n.Lk)("label",{for:"email",class:"block text-sm font-medium leading-6 text-gray-900"},"Username",-1)),(0,n.Lk)("div",d,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),id:"username",name:"username",type:"text",autocomplete:"username",required:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[l.Jo,a.username]])])]),(0,n.Lk)("div",null,[t[4]||(t[4]=(0,n.Lk)("div",{class:"flex items-center justify-between"},[(0,n.Lk)("label",{for:"password",class:"block text-sm font-medium leading-6 text-gray-900"},"Password"),(0,n.Lk)("div",{class:"text-sm"},[(0,n.Lk)("a",{href:"#",class:"font-semibold text-indigo-600 hover:text-indigo-500"},"Forgot password?")])],-1)),(0,n.Lk)("div",g,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),id:"password",name:"password",type:"password",autocomplete:"current-password",required:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[l.Jo,a.password]])])]),t[5]||(t[5]=(0,n.Lk)("div",null,[(0,n.Lk)("button",{type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"Sign in")],-1))],32)])])],64)}var p=s(59911),f=s.n(p),h=s(75435),b=s(40475),y=s(87814),x={inject:["apiServer","saltSecret"],data(){return{accessToken:b.A.get("session","token"),listItems:[],loading_sources:!0,username:"",password:""}},components:{Loader:h.A,Subhead:y.A},methods:{async login(){try{const e=await fetch("https://sea-turtle-app-hit8g.ondigitalocean.app/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({users_code:this.username,pass_word:this.password})});if(!e.ok)throw new Error("Failed to authenticate user");const t=await e.json(),{success:s,result:n}=t;if(!s)throw new Error("Invalid username or password");{console.log(n);const e={uss_id:n.uss_id,user_login:n.uss_login,user_image:n.uss_image,user_name:n.uss_name,user_profile:n.uss_name+" ("+n.uss_name+")"},t=b.A.get("bqclp");t?b.A.update("bqclp",e):b.A.set("bqclp",e),window.location.href="/"}}catch(e){console.error("Error accessing API:",e)}},updated(){f().replace()}},async mounted(){try{await this.getAccess()}catch(e){console.log(Error)}},setup(){}},k=s(64621);const v=(0,k.A)(x,[["render",m]]);var w=v,A=s(74284),L={name:"Home",components:{Dashboard:w,Authen:A.A},data(){return{login:b.A.get("session","login")}},methods:{},mounted(){},setup(){const e=(0,r.lq)(),t=e.meta.title;(0,a.K7)(t),console.log("Dashboard")}};const C=(0,k.A)(L,[["render",o]]);var _=C},87814:function(e,t,s){s.d(t,{A:function(){return F}});var n=s(20641),o=s(90033),a=s(53751);const r={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},l={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},i={class:"min-w-0 flex-1"},u={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},c={key:0,class:"text-sm text-gray-500"},d={class:"mt-5 flex xl:mt-0 xl:ml-4"},g={class:"flex items-center space-x-2"},m={class:"text-sm text-gray-400"},p=["onUpdate:modelValue","placeholder","onChange"],f={value:"",disabled:""},h=["value"],b=["onClick"],y={class:"text-sm hidden sm:inline-block ml-1"},x=["onClick"],k={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,s,v,w,A){const L=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)("header",r,[(0,n.Lk)("div",l,[(0,n.Lk)("div",i,[(0,n.Lk)("h1",u,[(0,n.bF)(L,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,n.eW)(" "+(0,o.v_)(s.pageTitle?s.pageTitle:this.PageName),1)]),s.subhead?((0,n.uX)(),(0,n.CE)("p",c,(0,o.v_)(s.subhead),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",d,[(0,n.Lk)("div",g,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.navigation,((t,s)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:s},["select"===t.type?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("label",m,(0,o.v_)(t.placeholder),1),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:s=>e.$emit("toggleStatus",t.value)},[(0,n.Lk)("option",f,"-- "+(0,o.v_)(t.placeholder)+" --",1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.options,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.value},(0,o.v_)(e.name),9,h)))),128))],40,p),[[a.u1,t.value]])],64)):"call-function"===t.type?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[!1!==t.visible?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:s=>e.$emit(t.function),type:"button",class:(0,o.C4)(A.getClasses(t.class))},[(0,n.bF)(L,{icon:["fas",`${t.style}`],class:(0,o.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,n.Lk)("span",y,(0,o.v_)(t.name),1)],10,b)):(0,n.Q3)("",!0)],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[!1!==t.visible?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:e=>A.handleNavigationClick(t),type:"button",class:(0,o.C4)(A.getClasses(t.class))},[(0,n.bF)(L,{icon:["fas",`${t.style}`],class:(0,o.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,n.Lk)("span",k,(0,o.v_)(t.name),1)],10,x)):(0,n.Q3)("",!0)],64))],64)))),128))])])])])}s(44114);var w=s(75220),A=s(52968),L=s(23264),C=s(93426),_={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,w.lq)();return console.log("Translate",(0,C.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,C.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,A.K7)((0,C.iX)())},methods:{getClasses(e){const t=(0,L.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},E=s(64621);const X=(0,E.A)(_,[["render",v]]);var F=X},74284:function(e,t,s){s.d(t,{A:function(){return d}});var n=s(20641);function o(e,t,s,o,a,r){return(0,n.uX)(),(0,n.CE)("div")}var a=s(75220),r=s(63084),l=s(40475),i={name:"Authen",data(){return{configs:l.A.get("configs"),session:l.A.get("session")}},created(){r.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const e=(0,a.lq)(),t=e.meta.auth,s=e.name,n=l.A.get("session");let o=n.token,i=n.login,u=n.current;r.A.log("hasLogin",i),r.A.log("Page -> Auth:",t),r.A.log("User -> Token:",o),r.A.log("User -> Login:",i),"frontend"===this.session.interface?r.A.log("Front-End"):"backend"===this.session.interface&&(r.A.log("Back-End"),i?("Login"==s||void 0==u?(r.A.log("Not Login Again"),this.$router.replace({path:"/"})):(r.A.log("Has School Active"),t?(r.A.log("This page is : Authen Request"),""===o||null===o||void 0==o?r.A.log("Your Cannot Access"):r.A.log("Your Can Access")):r.A.log("This page is : No Authen Request")),r.A.log("Login")):(r.A.log("Not Login"),"Login"!=s?(window.location.href="/member/login",r.A.log("Not Login Page",s)):r.A.log("Login Page",s)))}},setup(){}},u=s(64621);const c=(0,u.A)(i,[["render",o]]);var d=c},23264:function(e,t,s){function n(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}s.d(t,{c:function(){return n}})}}]);
//# sourceMappingURL=4691.4ea7e6a5.js.map