{"version":3,"file":"js/4785.acbefe3f.js","mappings":"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","sources":["webpack://node-backend/./src/extensions/modules/elearning/lesson/view/course/Public.vue","webpack://node-backend/./src/extensions/modules/elearning/lesson/component/course/frontend/Public.vue","webpack://node-backend/./src/extensions/modules/elearning/lesson/component/course/frontend/Public.vue?5a5f","webpack://node-backend/./src/extensions/modules/elearning/lesson/view/course/Public.vue?389d"],"sourcesContent":["\n<template>\n    <component :is=\"componentName\" />\n    </template>\n    \n    <script>\n    import { useTitle } from 'vue-page-title';\n    import { useRoute } from 'vue-router';\n    import storageManager from '@/plugins/storage';\n    import Frontend from '../../component/course/frontend/Public.vue';\n    \n    export default {\n    name: 'Lesson Public',\n    components: {\n        Frontend,\n    },\n    data() {\n        return {\n            session: storageManager.get('session')\n        };\n    },\n    setup() {\n        const route = useRoute();\n        const routeName = route.meta.title;\n        useTitle(routeName);\n    },\n    computed: {\n        componentName() {\n            return 'Frontend';\n        }\n    }\n    };\n    </script>\n        ","<template>\n    <div class=\"bg-gray-100\">\n\n        <!-- Authentication Modal -->\n        <div v-if=\"!isAuthenticated\" class=\"fixed inset-0 bg-gray-600 bg-opacity-75 flex justify-center items-center z-[9999]\">\n            <div class=\"bg-white p-8 rounded-lg w-full md:w-1/4 min-w-min md:min-w-0\" style=\"min-width: 200px;\"> <!-- Enhanced styling for larger modal with full width on mobile -->\n                <!-- Big Alert Icon -->\n                <div class=\"flex justify-center mb-4\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-16 w-16 text-red-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                </svg>\n                </div>\n                <!-- Warning Text -->\n                <div class=\"text-center mb-4 text-lg font-medium text-gray-800\">\n                หน้านี้มีการจำกัดการเข้าถึง <br/>โปรดกรอกรหัสผ่านเพื่อดำเนินการต่อไป\n                </div>\n                <!-- Authentication Form -->\n                <div class=\"text-center\">\n                <div v-if=\"authError\" class=\"text-red-500 mb-4\">รหัสผ่านไม่ถูกต้อง</div>\n                <input type=\"password\" v-model=\"inputPassword\" placeholder=\"กรอกรหัสผ่าน\" class=\"border p-2 rounded w-full\">\n                <button @click=\"checkPassword\" class=\"bg-blue-500 text-white p-2 rounded mt-4 w-full\">ดูข้อมูล</button>\n                </div>\n            </div>\n        </div>\n\n        <!-- Main Content -->\n        <div v-if=\"isAuthenticated\" class=\"mx-auto max-w-2xl px-4 pb-12 pt-8 sm:px-6 sm:pb-12 sm:pt-6 lg:grid lg:max-w-7xl lg:gap-x-8 lg:px-8\">\n            <div class=\"lg:flex lg:items-center lg:justify-between\">\n                <EnrollDashboard\n                :pageTitle=\"courseData.name\"\n                :courseData=\"courseData\"\n                :isPublic=\"true\"\n                />\n            </div>\n        </div>\n    </div>\n  </template>\n\n  \n    \n<script>\nimport { ref } from 'vue';\nimport EnrollDashboard   from '@/extensions/modules/elearning/lesson/component/course/resource/EnrollDashboard.vue';\nimport storageManager from '@/plugins/storage';\nimport requestClient from '@/plugins/requestClient';\nconst Request = new requestClient(false);\nexport default {\n    data() {\n        const session = storageManager.get('session')\n\n\n    return {\n        dataItem: this.$route.params.id,\n        accessToken: session.token,\n        login: session.login,\n        configs: storageManager.get('configs'),\n        session: session,\n            courseData: [],\n            // Existing data properties...\n    isAuthenticated: false,\n    inputPassword: '',\n    authError: false,\n        };\n        \n    },\n    components: {\n      EnrollDashboard,\n    },\n    methods: {\n        checkPassword() {\n            if (this.inputPassword === '767241') {\n            this.isAuthenticated = true;\n            this.authError = false;\n            sessionStorage.setItem('isAuthenticated', 'true'); // Store authentication status\n            } else {\n            this.authError = true;\n            }\n        },\n        processingData(rawdata) {\n        const formattedData = {\n          players: [],\n          categories: [],\n          document: [],\n          exam: [],\n          course: null,\n        };\n\n        const seenCategoryIds     = new Set();\n        const seenDocumentIds     = new Set();\n        const seenExamIds         = new Set();\n        const seenPlayerIds       = new Set();\n        const playerParentItems   = [];\n        const playerParentChild   = [];\n        const playerParentFolder  = [];\n\n        rawdata.forEach((entry) => {\n\n          // Player Data Format\n          if (Array.isArray(entry.player)) {\n            entry.player.forEach((player) => {\n              if (!seenPlayerIds.has(player._id)) {\n                formattedData.players.push(player);\n                seenPlayerIds.add(player._id);\n              }\n            });\n          } else if (entry.player && !seenPlayerIds.has(entry.player._id)) {\n            formattedData.players.push(entry.player);\n            seenPlayerIds.add(entry.player._id);\n          }\n\n          // Category Data Format\n          if (Array.isArray(entry.category)) {\n            entry.category.forEach((category) => {\n              if (!seenCategoryIds.has(category._id)) {\n                formattedData.categories.push(category);\n                seenCategoryIds.add(category._id);\n              }\n            });\n          } else if (entry.category && !seenCategoryIds.has(entry.category._id)) {\n            formattedData.categories.push(entry.category);\n            seenCategoryIds.add(entry.category._id);\n          }\n\n          // Document Data Format\n          if (Array.isArray(entry.document)) {\n            entry.document.forEach((document) => {\n              if (!seenDocumentIds.has(document._id)) {\n                formattedData.document.push(document);\n                seenDocumentIds.add(document._id);\n              }\n            });\n          } else if (entry.document && !seenDocumentIds.has(entry.document._id)) {\n            formattedData.document.push(entry.document);\n            seenDocumentIds.add(entry.document._id);\n          }\n          // Exam Data Format\n          if (Array.isArray(entry.exam)) {\n            entry.exam.forEach((exam) => {\n              if (!seenExamIds.has(exam._id)) {\n                formattedData.exam.push(exam);\n                seenExamIds.add(exam._id);\n              }\n            });\n          } else if (entry.exam && !seenExamIds.has(entry.exam._id)) {\n            formattedData.exam.push(entry.exam);\n            seenExamIds.add(entry.exam._id);\n          }\n          // Course Data Format\n          if (!formattedData.course) {\n            formattedData.course = entry.course;\n          }\n        });\n\n        formattedData.players.forEach(element => {\n          if (element.type !== \"folder\" && element.mode === \"sub\") {\n            playerParentChild.push(element);\n          }\n        });\n        formattedData.players.forEach(element => {\n          if(element.mode!=\"sub\")\n          ref(playerParentItems.push(element));\n        });\n        \n        playerParentItems.forEach(element => {\n          let key = element._id\n          playerParentFolder[key]=[];\n          playerParentChild.forEach(element2 => {\n            \n            if(element2.root===element._id){\n              playerParentFolder[key].push(element2);\n            }\n          });\n        });\n        // Return an object with all the processed data\n        return {\n          formattedData,\n          playerParentItems,\n          playerParentChild,\n          playerParentFolder\n        };\n      },\n        async getQueryData() {\n        try {\n          let RestReturn = null;\n          const pipeline = [\n            {\n              $match: {\n                $expr: {\n                  $eq: [\"$_id\", { $toObjectId: this.dataItem }],\n                },\n              },\n            },\n            {\n              $lookup: {\n                from: \"player\",\n                let: { courseIdStr: { $toString: { $ifNull: [\"$$ROOT.master\", \"$_id\"] } } },\n                pipeline: [\n                  {\n                    $match: {\n                      $expr: {\n                        $eq: [\"$$courseIdStr\", \"$courseId\"],\n                      },\n                    },\n                  },\n                ],\n                as: \"players\"\n              }\n            },\n            {\n              $addFields: {\n                playersCount: { $size: \"$players\" }\n              }\n            },\n            {\n              $lookup: {\n                from: \"exam\",\n                let: { courseIdStr: { $toString: { $ifNull: [\"$$ROOT.master\", \"$_id\"] } } },\n                pipeline: [\n                  {\n                    $match: {\n                      $expr: {\n                        $eq: [\"$$courseIdStr\", \"$courseId\"],\n                      },\n                    },\n                  },\n                ],\n                as: \"exams\"\n              }\n            },\n            {\n              $addFields: {\n                examsCount: { $size: \"$exams\" }\n              }\n            },\n            {\n              $lookup: {\n                from: \"document\",\n                let: { courseIdStr: { $toString: { $ifNull: [\"$$ROOT.master\", \"$_id\"] } } },\n                pipeline: [\n                  {\n                    $match: {\n                      $expr: {\n                        $eq: [\"$$courseIdStr\", \"$courseId\"],\n                      },\n                    },\n                  },\n                ],\n                as: \"documents\"\n              }\n            },\n            {\n              $addFields: {\n                documentsCount: { $size: \"$documents\" }\n              }\n            },\n            {\n    \"$lookup\": {\n      \"from\": \"enroll\",\n      \"let\": { \"courseIdStr\": { \"$toString\": { \"$ifNull\": [\"$$ROOT._id\", \"$_id\"] } } },\n      \"pipeline\": [\n        {\n          \"$match\": {\n            \"$expr\": {\n              \"$eq\": [\"$$courseIdStr\", \"$courseID\"]\n            }\n          }\n        },\n        {\n          \"$group\": {\n            \"_id\": null,\n            \"count\": { \"$sum\": 1 }\n          }\n        },\n        {\n          \"$project\": {\n            \"_id\": 0,\n            \"count\": 1\n          }\n        }\n      ],\n      \"as\": \"enrollsCountArray\"\n    }\n  },\n  {\n    \"$addFields\": {\n      \"enrollsCount\": {\n        \"$ifNull\": [ { \"$arrayElemAt\": [\"$enrollsCountArray.count\", 0] }, 0 ]\n      }\n    }\n  },\n            {\n                \"$lookup\": {\n                  \"from\": \"form\",\n                  \"let\": { \"courseIdStr\": { \"$toString\": { \"$ifNull\": [\"$$ROOT._id\", \"$_id\"] } } },\n                  \"pipeline\": [\n                    {\n                      \"$match\": {\n                        \"$expr\": {\n                          \"$eq\": [\"$$courseIdStr\", \"$courseID\"]\n                        }\n                      }\n                    },\n                    {\n                      \"$group\": {\n                        \"_id\": null,\n                        \"count\": { \"$sum\": 1 }\n                      }\n                    },\n                    {\n                      \"$project\": {\n                        \"_id\": 0,\n                        \"count\": 1\n                      }\n                    }\n                  ],\n                  \"as\": \"formsCountArray\"\n                }\n              },\n              {\n                \"$addFields\": {\n                  \"formsCount\": { \n                    \"$ifNull\": [ { \"$arrayElemAt\": [\"$formsCountArray.count\", 0] }, 0 ] \n                  }\n                }\n              },\n            {\n              $lookup: {\n                from: \"category\",\n                let: { categoryCodes: { $ifNull: [\"$$ROOT.category\", []] } },\n                pipeline: [\n                  {\n                    $match: {\n                      $expr: {\n                        $in: [\"$code\", \"$$categoryCodes\"],\n                      },\n                    },\n                  },\n                ],\n                as: \"categories\",\n              },\n            },\n            {\n              $group: {\n                _id: \"$_id\",\n                // Summary fields\n                material: { $first: \"$playersCount\" },\n                document: { $first: \"$documentsCount\" },\n                contest: { $first: \"$examsCount\" },\n                enroll: { $first: \"$enrollsCount\" },\n                form: { $first: \"$formsCount\" },\n                course: { $first: \"$$ROOT\" },\n                category: { $first: \"$categories\" },\n                //player: { $first: \"$players\" },\n                //document: { $first: \"$documents\" },\n                exam: { $first: \"$exams\" },\n                //enrolls: { $first: \"$enrolls\" },\n                \n              },\n            },\n          ];\n\n\n          const requestData = {\n            pipeline\n          };\n          const resAPI = await Request.POST(`course/aggregate`, requestData, this.configs.key);\n\n          if(resAPI.status===200) {\n\n            RestReturn = resAPI.data;\n\n            if (RestReturn && RestReturn.length > 0) {\n              const returnData      = this.processingData(RestReturn);\n              this.masterDataRecord = returnData;\n              //this.resetData();\n              this.courseApiData = RestReturn;\n              //this.aggregateAndMapCountsToTabs();\n              // Assign Data\n              this.playerData   = returnData.formattedData.players ?? null;\n              this.courseData   = returnData.formattedData.course ?? null;\n              this.courseData.categories   = returnData.formattedData.categories ?? null;\n              this.examData     = returnData.formattedData.exam ?? null;\n              this.documentData = returnData.formattedData.document ?? null;\n\n              this.playerParent = returnData.playerParentItems;\n              this.playerChild  = returnData.playerParentChild;\n              this.playerFolder = returnData.playerParentFolder;\n\n              if(this.masterDataRecord) {\n                this.playerData.sort(function(a,b){return a.order < b.order ? -1 : 1});\n                this.playerParent.sort(function(a,b){return a.order < b.order ? -1 : 1});\n                this.playerChild.sort(function(a,b){return a.order < b.order ? -1 : 1});\n              }\n\n              this.playerCount        = this.playerData.length;\n              this.playerParentCount  = this.playerParent.length\n              this.playerChildCount   = this.playerChild.length\n\n              this.courseCategory = this.courseData.categories;\n              this.principles     = this.courseData.principles;\n              this.objective      = this.courseData.objective;\n              this.target         = this.courseData.target;\n              this.structure      = this.courseData.structure;\n              this.description    = this.courseData.description;\n              this.cover          = this.courseData.cover\n              this.mode           = this.courseData.mode\n              this.display        = this.courseData.display\n              this.type           = this.courseData.type\n              this.ref            = this.courseData.master\n              this.playerRef      = this.courseData.playerRef ?? this.courseData.master\n              this.examRef        = this.courseData.examRef ?? this.courseData.master\n              this.status         = this.courseData.status ?? true\n              this.visibility     = this.courseData.visibility ?? true\n              this.examCount      = this.examData.length ?? 0;\n              this.documentCount  = this.documentData.length ?? 0;\n\n              this.$setPageTitle(\"รายละเอียด / \" + this.courseData.name);\n            }\n          }\n        } catch (error) {\n          //debug.log(error)\n        }\n      },\n    },\n    async mounted () {\n      try {\n        this.isAuthenticated = sessionStorage.getItem('isAuthenticated') === 'true';\n        await this.getQueryData();\n      } catch (error) {\n        console.error(Error);\n      }\n    },\n};\n</script>\n\n<style>\n/* Your component's styles go here */\n</style>\n","import { render } from \"./Public.vue?vue&type=template&id=96741ae4\"\nimport script from \"./Public.vue?vue&type=script&lang=js\"\nexport * from \"./Public.vue?vue&type=script&lang=js\"\n\nimport \"./Public.vue?vue&type=style&index=0&id=96741ae4&lang=css\"\n\nimport exportComponent from \"../../../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Public.vue?vue&type=template&id=ce8eade6\"\nimport script from \"./Public.vue?vue&type=script&lang=js\"\nexport * from \"./Public.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_resolveDynamicComponent","$options","componentName","class","key","style","_createElementBlock","_hoisted_1","$data","isAuthenticated","_createCommentVNode","_hoisted_2","_createElementVNode","_hoisted_3","xmlns","fill","viewBox","stroke","d","_createTextVNode","_hoisted_4","authError","_hoisted_5","type","_cache","$event","inputPassword","placeholder","onClick","args","checkPassword","_hoisted_6","_hoisted_7","_createVNode","_component_EnrollDashboard","pageTitle","courseData","name","isPublic","Request","requestClient","data","session","storageManager","get","dataItem","this","$route","params","id","accessToken","token","login","configs","components","EnrollDashboard","methods","sessionStorage","setItem","processingData","rawdata","formattedData","players","categories","document","exam","course","seenCategoryIds","Set","seenDocumentIds","seenExamIds","seenPlayerIds","playerParentItems","playerParentChild","playerParentFolder","forEach","entry","Array","isArray","player","has","_id","push","add","category","element","mode","ref","element2","root","getQueryData","RestReturn","pipeline","$match","$expr","$eq","$toObjectId","$lookup","from","let","courseIdStr","$toString","$ifNull","as","$addFields","playersCount","$size","examsCount","documentsCount","categoryCodes","$in","$group","material","$first","contest","enroll","form","requestData","resAPI","POST","status","length","returnData","masterDataRecord","courseApiData","playerData","examData","documentData","playerParent","playerChild","playerFolder","sort","a","b","order","playerCount","playerParentCount","playerChildCount","courseCategory","principles","objective","target","structure","description","cover","display","master","playerRef","examRef","visibility","examCount","documentCount","$setPageTitle","error","mounted","getItem","console","Error","__exports__","Frontend","setup","route","useRoute","routeName","meta","title","useTitle","computed","render"],"sourceRoot":""}