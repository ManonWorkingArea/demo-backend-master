{"version":3,"file":"js/5525.74f67641.js","mappings":"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","sources":["webpack://node-backend/./src/extensions/modules/elearning/lesson/component/course/Webcam.vue","webpack://node-backend/./src/extensions/modules/elearning/lesson/component/course/Webcam.vue?e278","webpack://node-backend/./src/extensions/modules/elearning/lesson/view/course/Webcam.vue","webpack://node-backend/./src/extensions/modules/elearning/lesson/view/course/Webcam.vue?6fd3"],"sourcesContent":["<template>\n  <div class=\"relative\" :data-content=\"'กำลังอัพโหลดไฟล์วีดีโอ กรุณารอสักครู่.....'\" :class=\"[(activeBlock?'isblock' : 'isunblock')]\">\n    <div class=\"aspect-w-16 aspect-h-9\">\n      <div class=\"absolute inset-0 flex justify-center items-center\">\n        <div class=\"w-full h-full bg-gray-900\">\n          <video ref=\"videoElement\" autoplay playsinline class=\"w-full h-full object-cover\"></video>\n          <video v-if=\"videoURL\" :src=\"videoURL\" controls webkit-playsinline playsinline class=\"absolute top-0 left-0 w-full h-full object-cover\"></video>\n        </div>\n      </div>\n    </div>\n    <div class=\"relative bottom-0 left-0 w-full p-4 bg-gray-900 bg-opacity-75 flex justify-center\">\n      <button @click=\"activateCamera\" :disabled=\"recording || cameraActive\" class=\"py-2 px-4 bg-blue-500 text-white rounded hover:bg-blue-600 mr-2\">1.เปิดกล้อง</button>\n      <button @click=\"startRecording\" :disabled=\"recording || !cameraActive\" class=\"py-2 px-4 bg-red-500 text-white rounded hover:bg-red-600 mr-2\">\n        <span v-if=\"!recording\">2.บันทึกวีดีโอ</span>\n        <span v-else>\n        กำลังบันทึก...\n        </span>\n      </button>\n      <!-- <button @click=\"stopRecording\" :disabled=\"!recording\" class=\"py-2 px-4 bg-yellow-500 text-white rounded hover:bg-yellow-600 mr-2\">หยุด</button> -->\n      <!-- <button @click=\"sendBase64\" class=\"py-2 px-4 bg-green-500 text-white rounded hover:bg-green-600\">ส่ง</button> -->\n      <button @click=\"uploadRecordedVideo\" class=\"py-2 px-4 bg-green-500 text-white rounded hover:bg-green-600\">3.ส่งวีดีโอ</button>\n\n    </div>\n    <!-- <div class=\"absolute bottom-0 left-0 w-full p-4 bg-gray-900 bg-opacity-75\" v-if=\"videoBase64 !== null\">\n      <h3 class=\"text-xl font-bold text-white mb-2\">Base64 Representation:</h3>\n      <textarea readonly v-model=\"videoBase64\" class=\"w-full bg-gray-100 p-2\"></textarea>\n    </div> -->\n    <div class=\"absolute top-0 left-0 w-full p-2\" v-if=\"recording\">\n      <div class=\"bg-red-500 text-white text-sm font-bold px-4 py-2 rounded-full inline-flex items-center\">\n        <i class=\"fas fa-circle red-icon mr-1\"></i> Recording...\n      </div>\n    </div>\n    <div class=\"absolute top-0 right-0 m-2 text-white font-bold code-overlay\" v-if=\"recording\">{{ currentDateTime }}</div>\n    <div class=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-4xl font-bold code-overlay\" v-if=\"showCode\">{{ code }}</div>\n  </div>\n</template>\n\n<script>\nimport { S3 } from \"@aws-sdk/client-s3\";\nimport { PutObjectCommand } from \"@aws-sdk/client-s3\";\nimport storageManager from \"@/plugins/storage\";\nexport default {\n  data() {\n    const session = storageManager.get(\"configs\");\n    const schoolSession = session;\n    const s3Client = new S3({\n      forcePathStyle: false,\n      endpoint: schoolSession.s3EndpointDefault,\n      region: schoolSession.s3Region,\n      ResponseContentEncoding: \"utf-8\",\n      credentials: {\n        accessKeyId: schoolSession.s3Key,\n        secretAccessKey: schoolSession.s3Secret,\n      },\n    });\n\n    return {\n\n      activeBlock: false,\n\n      uploadedFiles: [],\n      S3: s3Client,\n      schoolSession: schoolSession,\n      outputfile: [],\n      errorText: \"\",\n      successText: \"\",\n      previewImages: [],\n      uploadedFileUrl: '',\n\n\n      videoElement: null,\n      recording: false,\n      videoBase64: null,\n      mediaRecorder: null,\n      recordedChunks: [],\n      cameraActive: false,\n      videoURL: null,\n      mediaStream: null,\n      currentDateTime: '',\n      showCode: false,\n      code: null,\n      preview: false\n    };\n  },\n  mounted() {\n    this.videoElement = this.$refs.videoElement;\n    setInterval(this.updateDateTime, 1000); // Update date and time every second\n  },\n  methods: {\n    async captureImage() {\n      const video = this.$refs.videoElement;\n      const canvas = document.createElement('canvas');\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      const context = canvas.getContext('2d');\n      context.drawImage(video, 0, 0, canvas.width, canvas.height);\n\n      // Convert canvas to Blob\n      canvas.toBlob(async (blob) => {\n        try {\n          this.activeBlock = true; // Assuming you want to block UI during upload\n          const uniqueId = Date.now() + '-' + Math.floor(Math.random() * 10000000000);\n          const file_extension = 'png'; // Or 'jpeg', depending on the desired format\n          const newFileName = `verified_image/${uniqueId}.${file_extension}`; // Modified key\n\n          const uploadParams = {\n            Bucket: this.schoolSession.s3Bucket,\n            Key: newFileName,\n            Body: blob,\n            ACL: \"public-read\", // Ensure the file is publicly accessible\n          };\n\n          // Perform the upload\n          await this.S3.send(new PutObjectCommand(uploadParams));\n\n          // Construct the URL to access the uploaded image\n          const uploadedImageUrl = `${this.schoolSession.s3Endpoint}${newFileName}`;\n          console.log(\"Image uploaded successfully:\", uploadedImageUrl);\n\n          // Emit an event with the image URL for the parent component\n          this.$emit('imageUploaded', uploadedImageUrl);\n\n          this.activeBlock = false; // Unblock UI\n        } catch (error) {\n          console.error(\"Error uploading image:\", error);\n          this.activeBlock = false; // Ensure UI is unblocked in case of error\n        }\n      }, 'image/png'); // Or 'image/jpeg'\n    },\n    async uploadRecordedVideo() {\n      if (!this.videoBlob || this.videoBlob.size === 0) {\n        console.error('No video to upload or video is empty.');\n        return;\n      }\n\n      try {\n        await this.uploadVideo(this.videoBlob);\n        console.log('Upload successful');\n        this.successText = \"Video uploaded successfully\";\n      } catch (error) {\n        console.error('Upload failed:', error);\n        this.errorText = \"Error uploading video\";\n      }\n    },\n    async uploadVideo(blob) {\n      try {\n        this.activeBlock = true;\n        const uniqueId = Date.now() + '-' + Math.floor(Math.random() * 10000000000); // Generate unique identifier\n        const file_extension = 'mp4';\n        const newFileName = `${uniqueId}.${file_extension}`; // New unique filename\n\n        const uploadParams = {\n          Bucket: this.schoolSession.s3Bucket,\n          Key: \"verified/\" + newFileName,\n          Body: blob,\n          ACL: \"public-read\",\n        };\n\n        const data = await this.S3.send(new PutObjectCommand(uploadParams));\n\n        this.uploadedFileUrl = `${this.schoolSession.s3Endpoint}verified/${newFileName}`; // Store or process the URL as needed\n\n        console.log(\"Video uploaded successfully:\", data);\n        this.successText = \"Video uploaded successfully\";\n        this.activeBlock = false;\n        this.$emit('webcam-recorder', this.uploadedFileUrl);\n        // Optionally, emit an event or call another method to handle the successful upload\n      } catch (error) {\n        console.error(\"Error uploading video:\", error);\n        this.errorText = \"Error uploading video\";\n      }\n    },\n    sendBase64() {\n      this.convertToBase64();\n    },\n    async activateCamera() {\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });\n        this.videoElement.srcObject = stream;\n        this.mediaStream = stream;\n        this.cameraActive = true;\n        console.log('Camera activated');\n      } catch (error) {\n        console.error('Error accessing webcam:', error);\n      }\n    },\n    startRecording() {\n      if (!this.cameraActive) {\n        console.error('Camera is not active.');\n        return;\n      }\n\n      this.recordedChunks = [];\n      this.videoURL = null;\n      try {\n        this.mediaRecorder = new MediaRecorder(this.mediaStream);\n        this.mediaRecorder.ondataavailable = this.handleDataAvailable;\n        this.mediaRecorder.start();\n        this.recording = true;\n        this.showCode = true;\n        this.preview = false;\n        this.generateRandomCode();\n        console.log('Recording started');\n        setTimeout(this.stopRecording, 5000); // Stop recording after 5 seconds\n      } catch (error) {\n        console.error('Error starting recording:', error);\n      }\n    },\n    stopRecording() {\n      if (this.mediaRecorder && this.recording) {\n        this.mediaRecorder.stop();\n        this.recording = false;\n        this.showCode = false;\n        console.log('Recording stopped');\n        \n        // Ensure the MediaRecorder has stopped before creating the blob\n        this.mediaRecorder.onstop = () => {\n          const videoBlob = new Blob(this.recordedChunks, { type: 'video/mp4' });\n          console.log('Blob size:', videoBlob.size); // Log the blob size for debugging\n          \n          if (videoBlob.size > 0) {\n            this.videoBlob = videoBlob; // Save the blob for later use if it contains data\n            this.previewRecording(); // Update the preview with the new blob\n          } else {\n            console.error('No video data available to upload.');\n          }\n        };\n      }\n    },\n\n    handleDataAvailable(event) {\n      if (event.data.size > 0) {\n        this.recordedChunks.push(event.data);\n        this.previewRecording();\n      }\n    },\n    async previewRecording() {\n      const blob = new Blob(this.recordedChunks, { type: 'video/mp4' });\n      this.videoURL = URL.createObjectURL(blob);\n      console.log('Preview updated');\n    },\n    async convertToBase64() {\n      if (this.recordedChunks.length === 0) {\n        console.error('No video data available.');\n        return;\n      }\n\n      const blob = new Blob(this.recordedChunks, { type: 'video/mp4' });\n      const base64String = await this.blobToBase64(blob);\n      this.videoBase64 = base64String;\n      this.$emit('webcam-recorder', this.videoBase64);\n      console.log('Video converted to Base64');\n    },\n    blobToBase64(blob) {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(blob);\n        reader.onloadend = () => resolve(reader.result);\n        reader.onerror = error => reject(error);\n      });\n    },\n    updateDateTime() {\n      const now = new Date();\n      this.currentDateTime = now.toLocaleString();\n    },\n    generateRandomCode() {\n      const randomCode = Math.floor(1000 + Math.random() * 9000);\n      this.code = randomCode.toString();\n    }\n  }\n};\n</script>\n\n<style>\n  .red-icon {\n    color: red;\n    margin-right: 5px;\n  }\n  .code-overlay {\n    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n  }\n  \n</style>\n","import { render } from \"./Webcam.vue?vue&type=template&id=fe7d44ac\"\nimport script from \"./Webcam.vue?vue&type=script&lang=js\"\nexport * from \"./Webcam.vue?vue&type=script&lang=js\"\n\nimport \"./Webcam.vue?vue&type=style&index=0&id=fe7d44ac&lang=css\"\n\nimport exportComponent from \"../../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\nimport {useTitle} \tfrom 'vue-page-title';\nimport {useRoute} \tfrom 'vue-router'\n\nimport Edit \t\tfrom '../../component/course/Webcam';\nimport storageManager from '@/plugins/storage';\n\nexport default {\n\tname: 'Lesson Streaming',\n\tcomponents: {\n\t\t\n\t\tEdit\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tlogin: storageManager.get('session','login'),\n\t\t}\n\t},\n\tmethods: {\n\t},\n\tsetup() {\n        const route     = useRoute();\n        const routeName = route.meta.title;\n        useTitle(routeName);\n    },\n};\n</script>\n\n<template>\n\n<Edit v-if=\"this.login\"/>\n</template>","import { render } from \"./Webcam.vue?vue&type=template&id=f3d06592\"\nimport script from \"./Webcam.vue?vue&type=script&lang=js\"\nexport * from \"./Webcam.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../../../node_modules/@vue/cli-service/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","ref","autoplay","playsinline","key","_createElementBlock","_normalizeClass","$data","activeBlock","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","videoURL","src","controls","_hoisted_5","_createCommentVNode","_hoisted_6","onClick","_cache","args","$options","activateCamera","disabled","recording","cameraActive","_hoisted_7","startRecording","_hoisted_10","_hoisted_9","_hoisted_8","uploadRecordedVideo","_hoisted_11","_createTextVNode","_hoisted_12","_toDisplayString","currentDateTime","showCode","_hoisted_13","code","data","session","storageManager","get","schoolSession","s3Client","S3","forcePathStyle","endpoint","s3EndpointDefault","region","s3Region","ResponseContentEncoding","credentials","accessKeyId","s3Key","secretAccessKey","s3Secret","uploadedFiles","outputfile","errorText","successText","previewImages","uploadedFileUrl","videoElement","videoBase64","mediaRecorder","recordedChunks","mediaStream","preview","mounted","this","$refs","setInterval","updateDateTime","methods","captureImage","video","canvas","document","createElement","width","videoWidth","height","videoHeight","context","getContext","drawImage","toBlob","async","uniqueId","Date","now","Math","floor","random","file_extension","newFileName","uploadParams","Bucket","s3Bucket","Key","Body","blob","ACL","send","PutObjectCommand","uploadedImageUrl","s3Endpoint","console","log","$emit","error","videoBlob","size","uploadVideo","sendBase64","convertToBase64","stream","navigator","mediaDevices","getUserMedia","audio","srcObject","MediaRecorder","ondataavailable","handleDataAvailable","start","generateRandomCode","setTimeout","stopRecording","stop","onstop","Blob","type","previewRecording","event","push","URL","createObjectURL","length","base64String","blobToBase64","Promise","resolve","reject","reader","FileReader","readAsDataURL","onloadend","result","onerror","toLocaleString","randomCode","toString","__exports__","render","login","_createBlock","_component_Edit","name","components","Edit","setup","route","useRoute","routeName","meta","title","useTitle"],"sourceRoot":""}