"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[6019],{6019:function(e,t,s){s.r(t),s.d(t,{default:function(){return se}});var a=s(20641);function o(e,t,s,o,n,l){const i=(0,a.g2)("Authen"),c=(0,a.g2)("fileImport");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(i),this.login?((0,a.uX)(),(0,a.Wv)(c,{key:0})):(0,a.Q3)("",!0)],64)}var n=s(52968),l=s(75220),i=(s(44114),s(90033));const c={key:0,class:"text-center"},r={key:1,class:"flex-1 bg-white"},d={class:"pt-8"},g={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},u={class:"sm:hidden","aria-label":"Back"},m={href:"#",class:"flex items-center text-sm font-medium text-gray-500 hover:text-gray-700"},h={class:"hidden sm:flex","aria-label":"Breadcrumb"},f={role:"list",class:"flex items-center space-x-4"},x={class:"flex"},p={href:"/",class:"text-sm font-medium text-gray-500 hover:text-gray-700"},k={class:"flex items-center"},v=["href"],b={class:"flex items-center"},L={class:"ml-4 text-sm font-medium text-gray-400"},y={class:"mt-2 md:flex md:items-center md:justify-between pb-5"},A={class:"min-w-0 flex-1"},w={class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight"},C={class:"mt-4 flex flex-shrink-0 md:mt-0 md:ml-4"},P={key:2,class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5 border-t"},_={class:"mt-8"},F={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},E={class:"mt-8 flex flex-col"},T={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},j={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},N={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},X={class:"p-4"},I=["href"],q={class:"text-gray-400"},B={class:"text-gray-400"},D={class:"text-gray-400"},S={class:"bg-gray-100 border-t-2 border-gray-200 py-2 px-4 flex justify-between items-center"},W=["onClick"],K={href:"#",class:"text-black-500 font-medium"},Q={href:"#",class:"text-black-500 font-medium"},$={href:"/school/add",class:"bg-white rounded-lg shadow-md overflow-hidden flex flex-col items-center justify-center cursor-pointer"},z={class:"w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center hover:opacity-70"};function R(e,t,s,o,n,l){const R=(0,a.g2)("Loader"),U=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)(a.FK,null,[n.loading_sources?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(R)])),n.loading_sources?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("div",d,[(0,a.Lk)("div",g,[(0,a.Lk)("div",null,[(0,a.Lk)("div",null,[(0,a.Lk)("nav",u,[(0,a.Lk)("a",m,[(0,a.bF)(U,{icon:["fas","chevron-left"],class:"text-gray-200 mr-2"}),t[1]||(t[1]=(0,a.eW)(" Back "))])]),(0,a.Lk)("nav",h,[(0,a.Lk)("ol",f,[(0,a.Lk)("li",null,[(0,a.Lk)("div",x,[(0,a.Lk)("a",p,[(0,a.bF)(U,{icon:["fas","home"]})])])]),(0,a.Lk)("li",null,[(0,a.Lk)("div",k,[(0,a.bF)(U,{icon:["fas","chevron-right"],class:"text-gray-200"}),(0,a.Lk)("a",{href:"/"+n.ParentPage,class:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700"},(0,i.v_)(n.ParentName),9,v)])]),(0,a.Lk)("li",null,[(0,a.Lk)("div",b,[(0,a.bF)(U,{icon:["fas","chevron-right"],class:"text-gray-200"}),(0,a.Lk)("span",L,(0,i.v_)(n.PageName),1)])])])])]),(0,a.Lk)("div",y,[(0,a.Lk)("div",A,[(0,a.Lk)("h2",w,[(0,a.bF)(U,{icon:["fas",n.PageIcon],class:"text-gray-500 text-[24px]"},null,8,["icon"]),(0,a.eW)(" "+(0,i.v_)(n.PageName),1)])]),(0,a.Lk)("div",C,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/school/add")),type:"button",class:"ml-3 inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,a.bF)(U,{icon:["fas","plus"],class:"text-gray-200 mr-2"}),t[2]||(t[2]=(0,a.eW)(" เพิ่มโรงเรียน"))])])])])])])])):(0,a.Q3)("",!0),n.loading_sources?((0,a.uX)(),(0,a.CE)("div",P,[(0,a.Lk)("div",_,[(0,a.Lk)("div",F,[(0,a.Lk)("div",E,[(0,a.Lk)("div",T,[(0,a.Lk)("div",j,[(0,a.Lk)("div",N,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.listItems.data,(s=>((0,a.uX)(),(0,a.CE)("div",{key:s.code,class:"bg-white rounded-lg shadow-md overflow-hidden"},[t[6]||(t[6]=(0,a.Lk)("img",{class:"w-full h-48 object-cover",src:"https://picsum.photos/seed/picsum/200/300",alt:"Placeholder image"},null,-1)),(0,a.Lk)("div",X,[(0,a.Lk)("a",{href:"/school/detail/"+s.id,class:"font-bold text-gray-600 hover:underline"},(0,i.v_)(s.name),9,I),(0,a.Lk)("p",q,"Code: "+(0,i.v_)(s.code),1),(0,a.Lk)("p",B,"Website: "+(0,i.v_)(s.website),1),(0,a.Lk)("p",D,"Phone: "+(0,i.v_)(s.phone),1)]),(0,a.Lk)("div",S,[(0,a.Lk)("a",{href:"javascript:void(0);",onClick:t=>e.$router.push("/school/edit/"+s.id),class:"text-black-500 hover:text-gray-900 font-medium"},[(0,a.bF)(U,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),t[3]||(t[3]=(0,a.Lk)("span",null,"แก้ไข",-1))],8,W),(0,a.Lk)("a",K,[(0,a.bF)(U,{icon:["fas","user-tie"],class:"text-black mt-[3px] mr-2 text-md"}),t[4]||(t[4]=(0,a.Lk)("span",null,"ผู้ดูแล",-1))]),(0,a.Lk)("a",Q,[(0,a.bF)(U,{icon:["fas","trash-can"],class:"text-black mt-[3px] mr-2 text-md"}),t[5]||(t[5]=(0,a.Lk)("span",null,"ลบ",-1))])])])))),128)),(0,a.Lk)("a",$,[(0,a.Lk)("div",z,[(0,a.bF)(U,{icon:["fas","plus"],class:"text-3xl"})]),t[7]||(t[7]=(0,a.Lk)("p",{class:"text-gray-500 mt-2 text-center"},"Add new school",-1))])])])])])])])])):(0,a.Q3)("",!0)],64)}var U=s(59911),Y=s.n(U),G=s(75435),H=s(40475),J={inject:["apiServer"],data(){const e=(0,l.lq)();return{PageName:e.meta.title,PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page,accessToken:H.A.get("session","token"),listItems:[],loading_sources:!0,pages:0,current:0,total:0,next:!0,prev:!1}},components:{Loader:G.A},methods:{async getData(){if(H.A.get("session","login"))try{this.loading_sources=!1;const e=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/branchs/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}}),t=await e.json();console.log(t),this.listItems=t,this.loading_sources=!0,this.pages=t.pages,this.current=t.currentPage,this.total=t.totalCount,this.next=t.nextState,this.prev=t.preState}catch(e){console.log(e)}},async deleteData(e){if(H.A.get("session","login"))try{this.loading_sources=!1,console.log("id",e);const t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/branchs/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}});console.log(await t),this.loading_sources=!0,await this.getData()}catch(t){console.log(t)}},updated(){Y().replace()}},async mounted(){try{await this.getData()}catch(e){console.log(Error)}},setup(){}},M=s(64621);const O=(0,M.A)(J,[["render",R]]);var V=O,Z=s(74284),ee={name:"TransactionSingle",components:{fileImport:V,Authen:Z.A},data(){return{login:H.A.get("session","login")}},methods:{},mounted(){},setup(){const e=(0,l.lq)(),t=e.meta.title;(0,n.K7)(t)}};const te=(0,M.A)(ee,[["render",o]]);var se=te},74284:function(e,t,s){s.d(t,{A:function(){return g}});var a=s(20641);function o(e,t,s,o,n,l){return(0,a.uX)(),(0,a.CE)("div")}var n=s(75220),l=s(63084),i=s(40475),c={name:"Authen",data(){return{configs:i.A.get("configs"),session:i.A.get("session")}},created(){l.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const e=(0,n.lq)(),t=e.meta.auth,s=e.name,a=i.A.get("session");let o=a.token,c=a.login,r=a.current;l.A.log("hasLogin",c),l.A.log("Page -> Auth:",t),l.A.log("User -> Token:",o),l.A.log("User -> Login:",c),"frontend"===this.session.interface?l.A.log("Front-End"):"backend"===this.session.interface&&(l.A.log("Back-End"),c?("Login"==s||void 0==r?(l.A.log("Not Login Again"),this.$router.replace({path:"/"})):(l.A.log("Has School Active"),t?(l.A.log("This page is : Authen Request"),""===o||null===o||void 0==o?l.A.log("Your Cannot Access"):l.A.log("Your Can Access")):l.A.log("This page is : No Authen Request")),l.A.log("Login")):(l.A.log("Not Login"),"Login"!=s?(window.location.href="/member/login",l.A.log("Not Login Page",s)):l.A.log("Login Page",s)))}},setup(){}},r=s(64621);const d=(0,r.A)(c,[["render",o]]);var g=d}}]);
//# sourceMappingURL=6019.b8472f62.js.map