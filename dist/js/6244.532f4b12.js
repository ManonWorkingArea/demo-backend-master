"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[6244],{56244:function(e,t,o){o.r(t),o.d(t,{default:function(){return fe}});var n=o(20641);function a(e,t,o,a,i,r){return(0,n.uX)(),(0,n.Wv)((0,n.$y)(r.componentName))}var i=o(52968),r=o(75220),s=o(40475);function c(e,t,o,a,i,r){const s=(0,n.g2)("OrderCode"),c=(0,n.g2)("Currency"),d=(0,n.g2)("ShopAction"),l=(0,n.g2)("CatalogMode");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",null,[t[0]||(t[0]=(0,n.Lk)("h1",null,[(0,n.Lk)("strong",null,"OrderCode")],-1)),(0,n.bF)(s)]),(0,n.Lk)("div",null,[t[1]||(t[1]=(0,n.Lk)("h1",null,[(0,n.Lk)("strong",null,"Currency")],-1)),(0,n.bF)(c)]),(0,n.Lk)("div",null,[t[2]||(t[2]=(0,n.Lk)("h1",null,[(0,n.Lk)("strong",null,"Shop Actions")],-1)),(0,n.bF)(d)]),(0,n.Lk)("div",null,[t[3]||(t[3]=(0,n.Lk)("h1",null,[(0,n.Lk)("strong",null,"Shop Catalog Mode")],-1)),(0,n.bF)(l)])],64)}var d=o(53751),l=o(90033);const u=["onUpdate:modelValue","onChange"],g=["onUpdate:modelValue"],m={key:1},p=["onUpdate:modelValue"],h=["onUpdate:modelValue"],f=["onClick"],y={key:0,class:"error"},k=["disabled"];function C(e,t,o,a,i,r){return(0,n.uX)(),(0,n.CE)("div",null,[t[9]||(t[9]=(0,n.Lk)("h1",null,"Store Configuration",-1)),(0,n.Lk)("form",{onSubmit:t[2]||(t[2]=(0,d.D$)(((...e)=>r.saveConfig&&r.saveConfig(...e)),["prevent"]))},[(0,n.Lk)("div",null,[t[3]||(t[3]=(0,n.Lk)("label",{for:"numDigits"},"Total Number of Digits:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"numDigits","onUpdate:modelValue":t[0]||(t[0]=e=>i.config.custom_order_code.numDigits=e),type:"number",min:"1",placeholder:"Enter total number of digits",required:""},null,512),[[d.Jo,i.config.custom_order_code.numDigits,void 0,{number:!0}]])]),(0,n.Lk)("div",null,[t[7]||(t[7]=(0,n.Lk)("label",{for:"groups"},"Groups Configuration:",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.config.custom_order_code.groups,((e,o)=>((0,n.uX)(),(0,n.CE)("div",{key:o,class:"group-config"},[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t=>e.type=t,onChange:t=>r.updateGroupDigit(e)},t[4]||(t[4]=[(0,n.Lk)("option",{value:"text"},"Text",-1),(0,n.Lk)("option",{value:"year"},"Year",-1),(0,n.Lk)("option",{value:"month"},"Month",-1),(0,n.Lk)("option",{value:"auto"},"Auto Number",-1)]),40,u),[[d.u1,e.type]]),"text"===e.type?(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:0,"onUpdate:modelValue":t=>e.value=t,type:"text",placeholder:"Enter text"},null,8,g)),[[d.Jo,e.value]]):(0,n.Q3)("",!0),"year"===e.type?((0,n.uX)(),(0,n.CE)("div",m,[t[6]||(t[6]=(0,n.Lk)("label",null,"Year Format:",-1)),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t=>e.format=t},t[5]||(t[5]=[(0,n.Lk)("option",{value:"4"},"4 Digits",-1),(0,n.Lk)("option",{value:"2"},"2 Digits",-1)]),8,p),[[d.u1,e.format]])])):(0,n.Q3)("",!0),"year"!==e.type&&"month"!==e.type?(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:2,"onUpdate:modelValue":t=>e.digits=t,type:"number",min:"1",placeholder:"Digits"},null,8,h)),[[d.Jo,e.digits,void 0,{number:!0}]]):(0,n.Q3)("",!0),(0,n.Lk)("button",{onClick:e=>r.removeGroup(o)},"Remove",8,f)])))),128)),(0,n.Lk)("button",{type:"button",onClick:t[1]||(t[1]=(...e)=>r.addGroup&&r.addGroup(...e))},"Add Group")]),r.totalGroupDigits>i.config.custom_order_code.numDigits?((0,n.uX)(),(0,n.CE)("div",y," The sum of group digits exceeds the total number of digits. ")):(0,n.Q3)("",!0),(0,n.Lk)("button",{type:"submit",disabled:r.totalGroupDigits>i.config.custom_order_code.numDigits},"Save Configuration",8,k)],32),t[10]||(t[10]=(0,n.Lk)("hr",null,null,-1)),(0,n.Lk)("div",null,[t[8]||(t[8]=(0,n.Lk)("h2",null,"Sample Order Codes",-1)),(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,(0,l.v_)(r.generateOrderCode(1)),1)])])])}o(44114),o(98992),o(8872);var _=o(40471);const v=new _.A(!1),b=s.A.get("configs"),L=s.A.get("session");var w={data(){return{config:{custom_order_code:{numDigits:10,groups:[{type:"text",value:"A",digits:1},{type:"year",format:"4",digits:4},{type:"month",digits:2},{type:"auto",digits:3}],autoNumber:1}},configId:null}},computed:{totalGroupDigits(){return this.config.custom_order_code.groups.reduce(((e,t)=>"year"===t.type?e+parseInt(t.format):"month"===t.type?e+2:e+t.digits),0)}},methods:{async saveConfig(){this.configId?await this.updateConfig():await this.addConfig()},async addConfig(){try{const e=await v.POST("shop_config/",{data:{custom_order_code:this.config.custom_order_code,unit:L.current._id||b.siteID}},b.key);200===e.status&&(this.configId=e.data._id,alert("Configuration saved!"))}catch(e){console.error("Error adding configuration:",e)}},async updateConfig(){try{const e=await v.PUT(`shop_config/${this.configId}`,{data:{custom_order_code:this.config.custom_order_code,_id:void 0}},b.key);200===e.status&&alert("Configuration updated!")}catch(e){console.error("Error updating configuration:",e)}},async loadConfig(){try{const e=await v.POST("shop_config/query",{method:"find",args:[{unit:L.current._id||b.siteID}]},b.key);if(200===e.status&&e.data.length>0){const t=e.data[0];this.config.custom_order_code=t.custom_order_code,this.configId=t._id}}catch(e){console.error("Error loading configuration:",e)}},addGroup(){this.config.custom_order_code.groups.push({type:"text",value:"",digits:1})},removeGroup(e){this.config.custom_order_code.groups.splice(e,1)},updateGroupDigit(e){"year"===e.type&&(e.format="4"),"month"===e.type&&(e.digits=2)},generateOrderCode(e){const t=new Date;let o="",n=this.config.custom_order_code.autoNumber+e-1;for(const a of this.config.custom_order_code.groups)if("text"===a.type)o+=a.value.padEnd(a.digits," ");else if("year"===a.type){const e="4"===a.format?t.getFullYear().toString():t.getFullYear().toString().slice(-2);o+=e}else"month"===a.type?o+=("0"+(t.getMonth()+1)).slice(-2):"auto"===a.type&&(o+=n.toString().padStart(a.digits,"0"));return o}},mounted(){this.loadConfig()}},I=o(64621);const E=(0,I.A)(w,[["render",C],["__scopeId","data-v-17669220"]]);var M=E;const S={key:0,class:"message"};function D(e,t,o,a,i,r){return(0,n.uX)(),(0,n.CE)("div",null,[t[8]||(t[8]=(0,n.Lk)("h1",null,"Currency Configuration",-1)),(0,n.Lk)("form",{onSubmit:t[3]||(t[3]=(0,d.D$)(((...e)=>r.saveCurrencyConfig&&r.saveCurrencyConfig(...e)),["prevent"]))},[(0,n.Lk)("div",null,[t[4]||(t[4]=(0,n.Lk)("label",{for:"currencyName"},"Currency Name:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"currencyName","onUpdate:modelValue":t[0]||(t[0]=e=>i.currency.name=e),type:"text",placeholder:"Enter currency name",required:""},null,512),[[d.Jo,i.currency.name]])]),(0,n.Lk)("div",null,[t[5]||(t[5]=(0,n.Lk)("label",{for:"currencyCode"},"Currency Code:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"currencyCode","onUpdate:modelValue":t[1]||(t[1]=e=>i.currency.code=e),type:"text",placeholder:"Enter currency code",required:""},null,512),[[d.Jo,i.currency.code]])]),(0,n.Lk)("div",null,[t[6]||(t[6]=(0,n.Lk)("label",{for:"currencySymbol"},"Currency Symbol:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"currencySymbol","onUpdate:modelValue":t[2]||(t[2]=e=>i.currency.symbol=e),type:"text",placeholder:"Enter currency symbol",required:""},null,512),[[d.Jo,i.currency.symbol]])]),t[7]||(t[7]=(0,n.Lk)("button",{type:"submit"},"Save Configuration",-1))],32),i.message?((0,n.uX)(),(0,n.CE)("div",S,(0,l.v_)(i.message),1)):(0,n.Q3)("",!0)])}const x=new _.A(!1),A=s.A.get("configs"),X=s.A.get("session");var T={data(){return{currency:{name:"",code:"",symbol:""},configId:null,message:""}},methods:{async saveCurrencyConfig(){this.configId?await this.updateCurrencyConfig():await this.addCurrencyConfig()},async addCurrencyConfig(){try{const e=await x.POST("shop_config/",{data:{currency:this.currency,unit:X.current._id||A.siteID}},A.key);200===e.status&&(this.configId=e.data._id,this.message="Currency configuration saved!")}catch(e){console.error("Error adding currency configuration:",e),this.message="Error saving configuration"}},async updateCurrencyConfig(){try{const e=await x.PUT(`shop_config/${this.configId}`,{data:{currency:this.currency,_id:void 0}},A.key);200===e.status&&(this.message="Currency configuration updated!")}catch(e){console.error("Error updating currency configuration:",e),this.message="Error updating configuration"}},async loadCurrencyConfig(){try{const e=await x.POST("shop_config/query",{method:"find",args:[{unit:X.current._id||A.siteID}]},A.key);if(200===e.status&&e.data.length>0){const t=e.data[0];this.currency=t.currency||{name:"",code:"",symbol:""},this.configId=t._id}}catch(e){console.error("Error loading currency configuration:",e)}}},mounted(){this.loadCurrencyConfig()}};const V=(0,I.A)(T,[["render",D],["__scopeId","data-v-88e00526"]]);var O=V;const U={class:"shop-actions-container"},F={class:"group-list"},B={class:"action-list"},K={class:"action-content"},P={class:"custom-select-wrapper"},$=["onClick"],G={key:0,class:"custom-select-dropdown"},N=["onUpdate:modelValue"],q={key:0,class:"group-item"},Q=["onClick"],J=["onClick"],Y=["onClick"];function H(e,t,o,a,i,r){return(0,n.uX)(),(0,n.CE)("div",U,[t[1]||(t[1]=(0,n.Lk)("h1",null,"Shop Actions",-1)),(0,n.Lk)("ul",F,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.actions,((e,o)=>((0,n.uX)(),(0,n.CE)("li",{key:o,class:"group-item"},[(0,n.Lk)("strong",null,(0,l.v_)(e.name),1),(0,n.Lk)("ul",B,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.items,((e,o)=>((0,n.uX)(),(0,n.CE)("li",{key:o,class:"action-item"},[(0,n.Lk)("div",K,[(0,n.Lk)("strong",null,(0,l.v_)(e.name),1),(0,n.Lk)("div",P,[(0,n.Lk)("div",{class:"custom-select",onClick:t=>r.toggleSelect(e.key)},[(0,n.Lk)("span",null,(0,l.v_)(r.getSelectedItemName(e.key)),1),i.dropdownVisible[e.key]?((0,n.uX)(),(0,n.CE)("div",G,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t=>i.searchKeyword[e.key]=t,placeholder:"Search...",onClick:t[0]||(t[0]=(0,d.D$)((()=>{}),["stop"]))},null,8,N),[[d.Jo,i.searchKeyword[e.key]]]),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.filteredFlowOptions(e.key),(t=>((0,n.uX)(),(0,n.CE)("li",{key:t._id},["group"===t.type?((0,n.uX)(),(0,n.CE)("div",q,[(0,n.Lk)("strong",null,(0,l.v_)(t.name),1),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.items||[],(t=>((0,n.uX)(),(0,n.CE)("li",{key:t._id,onClick:(0,d.D$)((o=>r.selectItem(e.key,t)),["stop"])},(0,l.v_)(t.name)+" ("+(0,l.v_)(t.steps?.length||0)+" steps) ",9,Q)))),128))])])):((0,n.uX)(),(0,n.CE)("div",{key:1,onClick:(0,d.D$)((o=>r.selectItem(e.key,t)),["stop"])},(0,l.v_)(t.name)+" ("+(0,l.v_)(t.steps?.length||0)+" steps) ",9,J))])))),128))])])):(0,n.Q3)("",!0)],8,$)])]),r.isItemSelected(e.key)?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:t=>r.editItem(e.key),class:"edit-button"},"Edit",8,Y)):(0,n.Q3)("",!0)])))),128))])])))),128))])])}o(54520),o(72577),o(81454);const R=new _.A(!1),W=s.A.get("configs"),j=s.A.get("session");var z={data(){return{actions:[{name:"Stock Management",key:"stock_management",items:[{name:"Stock Movement",key:"stock_movement"},{name:"Change Status",key:"change_status"}]},{name:"Cart Management",key:"cart_management",items:[{name:"Add To Cart",key:"add_to_cart"},{name:"Complete Order",key:"complete_order"}]},{name:"Checkout",key:"checkout",items:[{name:"Place Order",key:"place_order"},{name:"Before Checkout",key:"before_checkout"},{name:"After Checkout",key:"after_checkout"}]}],flowOptions:[],selectedItems:{},dropdownVisible:{},searchKeyword:{},configId:null}},methods:{async fetchFlowData(){try{const e=await R.POST("flow/query",{method:"find",args:[{unit:j.current._id||W.siteID}]},W.key);200===e.status&&(this.flowOptions=e.data)}catch(e){console.error("Error fetching flow data:",e)}},async loadConfig(){try{const e=await R.POST("shop_config/query",{method:"find",args:[{unit:j.current._id||W.siteID}]},W.key);if(200===e.status&&e.data.length>0){const t=e.data[0];t.action_flow&&(this.selectedItems={...t.action_flow}),this.configId=t._id}}catch(e){console.error("Error loading configuration:",e)}},toggleSelect(e){this.dropdownVisible={...this.dropdownVisible,[e]:!this.dropdownVisible[e]},this.searchKeyword={...this.searchKeyword,[e]:""}},selectItem(e,t){this.selectedItems={...this.selectedItems,[e]:t._id},this.dropdownVisible={...this.dropdownVisible,[e]:!1},this.saveConfig()},getSelectedItemName(e){const t=this.selectedItems[e],o=this.flowOptions.find((e=>e._id===t));return o?o.name:"Select an item"},filteredFlowOptions(e){const t=this.searchKeyword[e]?.toLowerCase()||"";return this.flowOptions.map((e=>{if("group"===e.type){const o=e.items?.filter((e=>e.name.toLowerCase().includes(t)))||[];return{...e,items:o}}return e})).filter((e=>e.name.toLowerCase().includes(t)||e.items?.length>0))},async saveConfig(){if(this.configId)try{const e=await R.PUT(`shop_config/${this.configId}`,{data:{action_flow:this.selectedItems,unit:j.current._id||W.siteID}},W.key);200!==e.status&&console.error("Error saving config:",e)}catch(e){console.error("Error saving config:",e)}},isItemSelected(e){return null!=this.selectedItems[e]},editItem(e){const t=this.selectedItems[e];t&&this.$router.push(`/setup/workflow?itemid=${t}&back=/shop/config`)}},async mounted(){await this.loadConfig(),await this.fetchFlowData()}};const Z=(0,I.A)(z,[["render",H],["__scopeId","data-v-4d1fb39c"]]);var ee=Z;const te={key:0},oe={key:0},ne={key:0,class:"message"};function ae(e,t,o,a,i,r){return(0,n.uX)(),(0,n.CE)("div",null,[t[11]||(t[11]=(0,n.Lk)("h1",null,"Catalog Mode Configuration",-1)),(0,n.Lk)("form",{onSubmit:t[4]||(t[4]=(0,d.D$)(((...e)=>r.saveCatalogModeConfig&&r.saveCatalogModeConfig(...e)),["prevent"]))},[(0,n.Lk)("div",null,[t[5]||(t[5]=(0,n.Lk)("label",{for:"catalogMode"},"Catalog Mode:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"catalogMode","onUpdate:modelValue":t[0]||(t[0]=e=>i.catalogMode=e),type:"checkbox"},null,512),[[d.lH,i.catalogMode]])]),i.catalogMode?((0,n.uX)(),(0,n.CE)("div",te,[(0,n.Lk)("div",null,[t[6]||(t[6]=(0,n.Lk)("label",{for:"callMeButton"},"Call Me Button:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"callMeButton","onUpdate:modelValue":t[1]||(t[1]=e=>i.callMeButton=e),type:"checkbox"},null,512),[[d.lH,i.callMeButton]])]),i.callMeButton?((0,n.uX)(),(0,n.CE)("div",oe,[t[7]||(t[7]=(0,n.Lk)("label",{for:"buttonText"},"Button Text:",-1)),(0,n.bo)((0,n.Lk)("input",{id:"buttonText","onUpdate:modelValue":t[2]||(t[2]=e=>i.buttonText=e),type:"text",placeholder:"Enter button text"},null,512),[[d.Jo,i.buttonText]])])):(0,n.Q3)("",!0),(0,n.Lk)("div",null,[t[9]||(t[9]=(0,n.Lk)("label",{for:"contactMethod"},"Contact Method:",-1)),(0,n.bo)((0,n.Lk)("select",{id:"contactMethod","onUpdate:modelValue":t[3]||(t[3]=e=>i.contactMethod=e)},t[8]||(t[8]=[(0,n.Lk)("option",{value:"lineid"},"Line ID",-1),(0,n.Lk)("option",{value:"contactform"},"Contact Form",-1),(0,n.Lk)("option",{value:"email"},"Email",-1)]),512),[[d.u1,i.contactMethod]])])])):(0,n.Q3)("",!0),t[10]||(t[10]=(0,n.Lk)("button",{type:"submit"},"Save Configuration",-1))],32),i.message?((0,n.uX)(),(0,n.CE)("div",ne,(0,l.v_)(i.message),1)):(0,n.Q3)("",!0)])}const ie=new _.A(!1),re=s.A.get("configs"),se=s.A.get("session");var ce={data(){return{catalogMode:!1,callMeButton:!1,buttonText:"",contactMethod:"lineid",configId:null,message:""}},methods:{async saveCatalogModeConfig(){this.configId?await this.updateCatalogModeConfig():await this.addCatalogModeConfig()},async addCatalogModeConfig(){try{const e=await ie.POST("shop_config/",{data:{catalog_mode:this.catalogMode,call_me_button:this.callMeButton,button_text:this.buttonText,contact_method:this.contactMethod,unit:se.current._id||re.siteID}},re.key);200===e.status&&(this.configId=e.data._id,this.message="Catalog mode configuration saved!")}catch(e){console.error("Error adding catalog mode configuration:",e),this.message="Error saving configuration"}},async updateCatalogModeConfig(){try{const e=await ie.PUT(`shop_config/${this.configId}`,{data:{catalog_mode:this.catalogMode,call_me_button:this.callMeButton,button_text:this.buttonText,contact_method:this.contactMethod,_id:void 0}},re.key);200===e.status&&(this.message="Catalog mode configuration updated!")}catch(e){console.error("Error updating catalog mode configuration:",e),this.message="Error updating configuration"}},async loadCatalogModeConfig(){try{const e=await ie.POST("shop_config/query",{method:"find",args:[{unit:se.current._id||re.siteID}]},re.key);if(200===e.status&&e.data.length>0){const t=e.data[0];this.catalogMode=t.catalog_mode||!1,this.callMeButton=t.call_me_button||!1,this.buttonText=t.button_text||"",this.contactMethod=t.contact_method||"lineid",this.configId=t._id}}catch(e){console.error("Error loading catalog mode configuration:",e)}}},mounted(){this.loadCatalogModeConfig()}};const de=(0,I.A)(ce,[["render",ae],["__scopeId","data-v-011b4cd5"]]);var le=de,ue={components:{OrderCode:M,Currency:O,ShopAction:ee,CatalogMode:le}};const ge=(0,I.A)(ue,[["render",c]]);var me=ge,pe={name:"Shipping Detail",components:{Backend:me,Frontend:me},data(){return{session:s.A.get("session")}},setup(){const e=(0,r.lq)(),t=e.meta.title;(0,i.K7)(t)},computed:{componentName(){return"backend"===this.session.interface?"Backend":"frontend"===this.session.interface?"Frontend":(console.error("Invalid interface:",this.session.interface),null)}}};const he=(0,I.A)(pe,[["render",a]]);var fe=he}}]);
//# sourceMappingURL=6244.532f4b12.js.map