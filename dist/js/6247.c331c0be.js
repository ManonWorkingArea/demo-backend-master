"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[6247],{48505:function(t,e,s){s.d(e,{A:function(){return d}});var a=s(20641);function o(t,e,s,o,i,n){const l=(0,a.g2)("Builder");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(l,{onUpdateLayout:n.updateData,builderData:this.rows,getBuilder:n.getData,backUrl:"/application/view/"+this.$route.params.id},null,8,["onUpdateLayout","builderData","getBuilder","backUrl"])])}s(98992),s(72577),s(81454);var i=s(40475),n=s(62524),l={data(){return{configs:i.A.get("configs"),session:i.A.get("session"),dataItem:this.$route.params.slug,accessSession:[],selectSession:!1,rows:[],formData:[],applicationData:[]}},components:{Builder:n.A},methods:{changeSession(){this.selectSession=!0},async getData(){if(i.A.get("session","login"))try{this.activeBlock=!0;let t=this.$route.params.id,e=this.$route.params.form;const s=await fetch("https://gateway.cloudrestfulapi.com/api/application/"+t,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}}),a=await s.json();return Array.isArray(a.form)?this.formData=a.form.find((t=>t.name===e)):console.error("RestReturn.form is not an array"),this.applicationData=a,console.log(this.formData),this.rows=this.formData,this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"ดึงข้อมูลหน้าเว็บ",text:"ดึงข้อมูลหน้าเว็บนี้ สำเร็จแล้ว"}),this.activeBlock=!1,this.rows}catch(t){console.log(t)}},async updateData(t){try{let e=this.$route.params.form;this.applicationData.form=this.applicationData.form.map((s=>s.name===e?{...s,builder:t}:s)),console.log(this.applicationData.form);const s=await fetch(`https://gateway.cloudrestfulapi.com/api/application/${this.$route.params.id}`,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{form:this.applicationData.form}})}),a=await s.json();console.log(a),200===s.status&&this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"บันทึกข้อมูลหน้าเว็บ",text:"บันทึกข้อมูลสำหรับหน้าเว็บนี้ สำเร็จแล้ว"})}catch(e){console.error(e)}}},async mounted(){try{this.accessSession=i.A.get("session","current"),await this.getData()}catch(t){console.log(Error)}},setup(){}},r=s(64621);const c=(0,r.A)(l,[["render",o]]);var d=c},26247:function(t,e,s){s.r(e),s.d(e,{default:function(){return G}});var a=s(20641);function o(t,e,s,o,i,n){return(0,a.uX)(),(0,a.Wv)((0,a.$y)(n.componentName))}var i=s(52968),n=s(75220),l=s(40475),r=s(48505),c=s(90033);const d={key:0,class:"text-center"},u={class:"flex border-b border-gray-200 bg-white","aria-label":"Breadcrumb"},p={role:"list",class:"mx-auto flex w-full max-w-screen-xl space-x-4 px-4 sm:px-6 lg:px-8"},m={class:"flex"},h={class:"flex items-center"},g={class:"flex"},f={class:"flex items-center"},x={class:"bg-gray-50"},y={class:"mx-auto max-w-2xl pb-24 pt-4 sm:px-6 sm:pt-8 lg:max-w-7xl lg:px-8"},k={class:"space-y-2 px-4 sm:flex sm:items-baseline sm:justify-between sm:space-y-0 sm:px-0"},v={class:"flex sm:items-baseline sm:space-x-4"},w={class:"text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl"};function b(t,e,s,o,i,n){const l=(0,a.g2)("Loader"),r=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[i.loading_sources?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bF)(l)])),(0,a.Lk)("nav",u,[(0,a.Lk)("ol",p,[e[3]||(e[3]=(0,a.Fv)('<li class="flex"><div class="flex items-center"><a href="#" class="text-gray-400 hover:text-gray-500"><svg class="h-5 w-5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z" clip-rule="evenodd"></path></svg><span class="sr-only">Home</span></a></div></li>',1)),(0,a.Lk)("li",m,[(0,a.Lk)("div",h,[e[1]||(e[1]=(0,a.Lk)("svg",{class:"h-full w-6 flex-shrink-0 text-gray-200",viewBox:"0 0 24 44",preserveAspectRatio:"none",fill:"currentColor","aria-hidden":"true"},[(0,a.Lk)("path",{d:"M.293 0l22 22-22 22h1.414l22-22-22-22H.293z"})],-1)),(0,a.bF)(r,{to:"/application/home/",class:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700"},{default:(0,a.k6)((()=>e[0]||(e[0]=[(0,a.eW)(" แบบฟอร์มทั้งหมด ")]))),_:1})])]),(0,a.Lk)("li",g,[(0,a.Lk)("div",f,[e[2]||(e[2]=(0,a.Lk)("svg",{class:"h-full w-6 flex-shrink-0 text-gray-200",viewBox:"0 0 24 44",preserveAspectRatio:"none",fill:"currentColor","aria-hidden":"true"},[(0,a.Lk)("path",{d:"M.293 0l22 22-22 22h1.414l22-22-22-22H.293z"})],-1)),(0,a.bF)(r,{to:"/application/view/"+i.assetData._id,class:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700"},{default:(0,a.k6)((()=>[(0,a.eW)((0,c.v_)(i.assetData.name),1)])),_:1},8,["to"])])]),e[4]||(e[4]=(0,a.Fv)('<li class="flex"><div class="flex items-center"><svg class="h-full w-6 flex-shrink-0 text-gray-200" viewBox="0 0 24 44" preserveAspectRatio="none" fill="currentColor" aria-hidden="true"><path d="M.293 0l22 22-22 22h1.414l22-22-22-22H.293z"></path></svg><a href="#" class="ml-4 text-sm font-medium text-gray-500 hover:text-gray-700" aria-current="page">แบบฟอร์ม A</a></div></li>',1))])]),(0,a.Lk)("div",x,[(0,a.Lk)("main",y,[(0,a.Lk)("div",k,[(0,a.Lk)("div",v,[(0,a.Lk)("h1",w,"เอกสารการสมัคร #"+(0,c.v_)(i.userApply._id),1)]),e[5]||(e[5]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},[(0,a.eW)("ลงทะเบียนเมื่อ "),(0,a.Lk)("time",{datetime:"2021-03-22",class:"font-medium text-gray-900"},"March 22, 2021")],-1))]),e[6]||(e[6]=(0,a.Lk)("section",{"aria-labelledby":"products-heading",class:"mt-6"},[(0,a.Lk)("div",{class:"mt-3 grid grid-cols-4"},[(0,a.Lk)("div",{class:"border-b border-t border-gray-200 bg-white shadow-sm sm:rounded-lg sm:border"},[(0,a.Lk)("div",{class:"px-4 py-4 sm:px-4 lg:p-4"},[(0,a.Lk)("div",{class:""},[(0,a.Lk)("label",{for:"cover-photo",class:"block text-sm font-bold leading-6 text-gray-900"},"Document A"),(0,a.Lk)("p",{class:"text-sm font-medium text-gray-500"},"คำอธิบายเกี่ยวกับเอกสารนี้"),(0,a.Lk)("div",{class:"mt-3 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10"},[(0,a.Lk)("div",{class:"text-center"},[(0,a.Lk)("svg",{class:"mx-auto h-12 w-12 text-gray-300",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[(0,a.Lk)("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})]),(0,a.Lk)("div",{class:"mt-4 flex text-sm leading-6 text-gray-600"},[(0,a.Lk)("label",{for:"file-upload",class:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500"},[(0,a.Lk)("span",null,"Upload a file"),(0,a.Lk)("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only"})]),(0,a.Lk)("p",{class:"pl-1"},"or drag and drop")]),(0,a.Lk)("p",{class:"text-xs leading-5 text-gray-600"},"PNG, JPG, GIF up to 10MB")])])])]),(0,a.Lk)("div",{class:"border-t border-gray-200 px-4 py-4 sm:px-4 lg:p-4"},[(0,a.Lk)("h4",{class:"sr-only"},"Status"),(0,a.Lk)("p",{class:"text-sm font-medium text-gray-900"},[(0,a.eW)("เอกสารที่อัพโหลดแล้ว "),(0,a.Lk)("time",{datetime:"2021-03-23"},"March 23, 2021")]),(0,a.Lk)("div",{class:"mt-6","aria-hidden":"true"},[(0,a.Lk)("ul",{role:"list",class:"grid grid-cols-2 gap-x-4 gap-y-4 sm:grid-cols-3 sm:gap-x-4 lg:grid-cols-3 xl:gap-x-4"},[(0,a.Lk)("li",{class:"relative"},[(0,a.Lk)("div",{class:"group aspect-h-7 aspect-w-10 block w-full overflow-hidden rounded-lg bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100"},[(0,a.Lk)("img",{src:"https://images.unsplash.com/photo-1582053433976-25c00369fc93?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=512&q=80",alt:"",class:"pointer-events-none object-cover group-hover:opacity-75"}),(0,a.Lk)("button",{type:"button",class:"absolute inset-0 focus:outline-none"},[(0,a.Lk)("span",{class:"sr-only"},"View details for IMG_4985.HEIC")])]),(0,a.Lk)("p",{class:"pointer-events-none mt-2 block truncate text-sm font-medium text-gray-900"},"IMG_4985.HEIC"),(0,a.Lk)("p",{class:"pointer-events-none block text-sm font-medium text-gray-500"},"3.9 MB")])])])])]),(0,a.Lk)("div",{class:"border-b border-t border-gray-200 bg-white shadow-sm sm:rounded-lg sm:border"},[(0,a.Lk)("div",{class:"px-4 py-4 sm:px-4 lg:p-4"},[(0,a.Lk)("div",{class:""},[(0,a.Lk)("label",{for:"cover-photo",class:"block text-sm font-bold leading-6 text-gray-900"},"Document B"),(0,a.Lk)("p",{class:"text-sm font-medium text-gray-500"},"คำอธิบายเกี่ยวกับเอกสารนี้"),(0,a.Lk)("div",{class:"mt-3 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10"},[(0,a.Lk)("div",{class:"text-center"},[(0,a.Lk)("svg",{class:"mx-auto h-12 w-12 text-gray-300",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[(0,a.Lk)("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})]),(0,a.Lk)("div",{class:"mt-4 flex text-sm leading-6 text-gray-600"},[(0,a.Lk)("label",{for:"file-upload",class:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500"},[(0,a.Lk)("span",null,"Upload a file"),(0,a.Lk)("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only"})]),(0,a.Lk)("p",{class:"pl-1"},"or drag and drop")]),(0,a.Lk)("p",{class:"text-xs leading-5 text-gray-600"},"PNG, JPG, GIF up to 10MB")])])])]),(0,a.Lk)("div",{class:"border-t border-gray-200 px-4 py-4 sm:px-4 lg:p-4"},[(0,a.Lk)("h4",{class:"sr-only"},"Status"),(0,a.Lk)("p",{class:"text-sm font-medium text-gray-900"},[(0,a.eW)("เอกสารที่อัพโหลดแล้ว "),(0,a.Lk)("time",{datetime:"2021-03-23"},"March 23, 2021")]),(0,a.Lk)("div",{class:"mt-6","aria-hidden":"true"},[(0,a.Lk)("ul",{role:"list",class:"grid grid-cols-2 gap-x-4 gap-y-4 sm:grid-cols-3 sm:gap-x-4 lg:grid-cols-3 xl:gap-x-4"},[(0,a.Lk)("li",{class:"relative"},[(0,a.Lk)("div",{class:"group aspect-h-7 aspect-w-10 block w-full overflow-hidden rounded-lg bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100"},[(0,a.Lk)("img",{src:"https://images.unsplash.com/photo-1582053433976-25c00369fc93?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=512&q=80",alt:"",class:"pointer-events-none object-cover group-hover:opacity-75"}),(0,a.Lk)("button",{type:"button",class:"absolute inset-0 focus:outline-none"},[(0,a.Lk)("span",{class:"sr-only"},"View details for IMG_4985.HEIC")])]),(0,a.Lk)("p",{class:"pointer-events-none mt-2 block truncate text-sm font-medium text-gray-900"},"IMG_4985.HEIC"),(0,a.Lk)("p",{class:"pointer-events-none block text-sm font-medium text-gray-500"},"3.9 MB")])])])])]),(0,a.Lk)("div",{class:"border-b border-t border-gray-200 bg-white shadow-sm sm:rounded-lg sm:border"},[(0,a.Lk)("div",{class:"px-4 py-4 sm:px-4 lg:p-4"},[(0,a.Lk)("div",{class:""},[(0,a.Lk)("label",{for:"cover-photo",class:"block text-sm font-bold leading-6 text-gray-900"},"Document C"),(0,a.Lk)("p",{class:"text-sm font-medium text-gray-500"},"คำอธิบายเกี่ยวกับเอกสารนี้"),(0,a.Lk)("div",{class:"mt-3 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10"},[(0,a.Lk)("div",{class:"text-center"},[(0,a.Lk)("svg",{class:"mx-auto h-12 w-12 text-gray-300",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[(0,a.Lk)("path",{"fill-rule":"evenodd",d:"M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z","clip-rule":"evenodd"})]),(0,a.Lk)("div",{class:"mt-4 flex text-sm leading-6 text-gray-600"},[(0,a.Lk)("label",{for:"file-upload",class:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500"},[(0,a.Lk)("span",null,"Upload a file"),(0,a.Lk)("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only"})]),(0,a.Lk)("p",{class:"pl-1"},"or drag and drop")]),(0,a.Lk)("p",{class:"text-xs leading-5 text-gray-600"},"PNG, JPG, GIF up to 10MB")])])])]),(0,a.Lk)("div",{class:"border-t border-gray-200 px-4 py-4 sm:px-4 lg:p-4"},[(0,a.Lk)("h4",{class:"sr-only"},"Status"),(0,a.Lk)("p",{class:"text-sm font-medium text-gray-900"},[(0,a.eW)("เอกสารที่อัพโหลดแล้ว "),(0,a.Lk)("time",{datetime:"2021-03-23"},"March 23, 2021")]),(0,a.Lk)("div",{class:"mt-6","aria-hidden":"true"},[(0,a.Lk)("ul",{role:"list",class:"grid grid-cols-2 gap-x-4 gap-y-4 sm:grid-cols-3 sm:gap-x-4 lg:grid-cols-3 xl:gap-x-4"},[(0,a.Lk)("li",{class:"relative"},[(0,a.Lk)("div",{class:"group aspect-h-7 aspect-w-10 block w-full overflow-hidden rounded-lg bg-gray-100 focus-within:ring-2 focus-within:ring-indigo-500 focus-within:ring-offset-2 focus-within:ring-offset-gray-100"},[(0,a.Lk)("img",{src:"https://images.unsplash.com/photo-1582053433976-25c00369fc93?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=512&q=80",alt:"",class:"pointer-events-none object-cover group-hover:opacity-75"}),(0,a.Lk)("button",{type:"button",class:"absolute inset-0 focus:outline-none"},[(0,a.Lk)("span",{class:"sr-only"},"View details for IMG_4985.HEIC")])]),(0,a.Lk)("p",{class:"pointer-events-none mt-2 block truncate text-sm font-medium text-gray-900"},"IMG_4985.HEIC"),(0,a.Lk)("p",{class:"pointer-events-none block text-sm font-medium text-gray-500"},"3.9 MB")])])])])])])],-1)),e[7]||(e[7]=(0,a.Fv)('<section aria-labelledby="summary-heading" class="mt-16"><h2 id="summary-heading" class="sr-only">Information to Upload Document in System</h2><div class="bg-gray-100 px-4 py-6 sm:rounded-lg sm:px-6"><div class="overflow-hidden"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg font-medium leading-6 text-gray-900">Upload Document</h3><div class="mt-4"><p class="text-gray-600">To upload your document:</p><ol class="list-decimal list-inside mt-2 text-gray-700"><li>Click on the &quot;Choose File&quot; button.</li><li>Select the document you want to upload from your device.</li><li>Review the document details.</li><li>Allowed File Types: PDF, DOCX, JPG, PNG.</li><li>File Size Limit: Maximum 10MB.</li><li>Click &quot;Upload&quot; to proceed.</li></ol></div></div></div></div></section>',1))])])],64)}s(44114),s(98992),s(72577),s(3949);var L=s(59911),D=s.n(L),A=s(75435),I=s(95093),M=s.n(I);M()().format();var B={data(){return{login:l.A.get("session","login"),configs:l.A.get("configs"),session:l.A.get("session"),assetData:[],userApply:[],dataItem:this.$route.params.id,loading_sources:!0,documentTypeOptions:[".jpg",".jpeg",".png",".gif",".doc",".docx",".pdf",".xls",".xlsx"],isFormOpen:!1,formTitle:"",formAction:"",form:{name:"",slug:"",description:""},editIndex:-1,currentSection:"",sections:["status","form","document"]}},components:{Loader:A.A},methods:{updateDocumentType(){this.form.documentType.length>1&&(this.form.documentType=[this.form.documentType[this.form.documentType.length-1]])},capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)},closeForm(){this.isFormOpen=!1},openForm(t,e){this.isFormOpen=!0,this.currentSection=e,"add"===t?(this.formTitle="Add Item",this.formAction="Add",this.form="form"===e?{name:"",slug:"",description:"",type:"form",default:!1,builder:[]}:{name:"",slug:"",description:"",default:!1}):"edit"===t&&(this.formTitle="Edit Item",this.formAction="Save")},saveItem(){"Add"===this.formAction?this.assetData[this.currentSection].push({...this.form}):"Save"===this.formAction&&(this.assetData[this.currentSection][this.editIndex]={...this.form}),this.updateData(),this.isFormOpen=!1},editItem(t,e){this.openForm("edit",e),this.form={...this.assetData[e][t]},this.editIndex=t},removeItem(t,e){this.assetData[e].splice(t,1),this.updateData()},moveItemUp(t,e){t>0&&this.swapItems(t,t-1,e)},moveItemDown(t,e){t<this.assetData[e].length-1&&this.swapItems(t,t+1,e)},swapItems(t,e,s){[this.assetData[s][t],this.assetData[s][e]]=[this.assetData[s][e],this.assetData[s][t]],this.updateData()},makeDefault(t,e){"form"===e?this.assetData.form.forEach(((e,s)=>{e.default=s===t})):"status"===e?this.assetData.status.forEach(((e,s)=>{e.default=s===t})):"document"===e&&this.assetData.document.forEach(((e,s)=>{e.default=s===t})),this.updateData()},dateTime(t){return M()(t).format("DD/MM/YYYY hh:mm:ss")},async getUserData(){if(l.A.get("session","login"))try{this.loading_sources=!1;const t=await fetch("https://gateway.cloudrestfulapi.com/api/apply/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{userID:this.session.userID,applicationID:this.dataItem}]}]})}),e=await t.json();if(200===t.status)return e[0];this.loading_sources=!0}catch(t){console.log(t)}},async getData(){if(l.A.get("session","login"))try{let t=this.$route.params.id;this.loading_sources=!1;const e=await fetch("https://gateway.cloudrestfulapi.com/api/application/"+t,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}}),s=await e.json();console.log("RestReturn",s),200===e.status&&(this.assetData=s,this.userApply=await this.getUserData(),console.log(this.userApply),this.loading_sources=!0),this.loading_sources=!0}catch(t){console.log(t)}},async updateData(){try{const t=await fetch("https://gateway.cloudrestfulapi.com/api/application/"+this.assetData._id,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{form:this.assetData.form,document:this.assetData.document,status:this.assetData.status},options:{}})}),e=await t.json();console.log(e),200===t.status&&this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"บันทึกข้อมูลหน้าเว็บ",text:"บันทึกข้อมูลสำหรับหน้าเว็บนี้ สำเร็จแล้ว"})}catch(t){console.error(t)}},async applyApplication(){let t=null;if(this.login)try{this.activeBlock=!0;const e=this.assetData.status.find((t=>!0===t.firstItem));console.log(e);const s=this.assetData.status.findIndex((t=>t.slug===e.slug));if(-1!==s&&s<this.assetData.status.length-1){const a=this.assetData.status.slice(s+1).find((t=>!0===t.submit&&"user"===t.action));console.log("Next status:",a);const o=await fetch("https://gateway.cloudrestfulapi.com/api/apply/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{userID:this.session.userID,applicationID:this.dataItem,form:[],document:[],assign:!1,status:e.slug,next:a?a.slug:void 0},options:{}})});t=await o.json(),console.log("finalRes",t),200===o.status&&(this.activeBlock=!1,this.$swal({icon:"success",title:"ลงทะเบียนเรียบร้อยแล้ว",text:"ระบบกำลังดึงข้อมูลหลักสูตรของคุณ กรุณารอสักครู่",showCancelButton:!1,confirmButtonText:"OK"}).then((()=>{this.userApply=t})))}else console.log("No status found after 'register'.")}catch(e){console.log(e)}else console.log("not Logic")},async actionApplication(t){try{const e=this.assetData.status.findIndex((e=>e.slug===t)),s=this.assetData.status.slice(e+1).find((e=>e.slug!==t&&"user"===e.action));s?console.log("Next status:",s):console.log("No next status found.");const a=await fetch("https://gateway.cloudrestfulapi.com/api/apply/"+this.userApply._id,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{status:t,next:s?s.slug:""},options:{}})}),o=await a.json();console.log("finalRes",o),this.userApply=o}catch(e){console.log(e)}},updated(){D().replace()}},async mounted(){try{await this.getData()}catch(t){console.log(Error)}},setup(){},computed:{firstStatusItem(){return this.assetData.status&&this.assetData.status.length>0?this.assetData.status[0].slug:null},getNextStatusName(){const t=this.assetData.status.findIndex((t=>t.slug===this.userApply.next));return-1!==t&&t<this.assetData.status.length-1?this.assetData.status[t].name:""}},watch:{userApply(t){console.log("userApply updated:",t)}}},C=s(64621);const T=(0,C.A)(B,[["render",b]]);var j=T,S={name:"Lesson Index",components:{BackendIndex:r.A,FrontendIndex:j},data(){return{session:l.A.get("session")}},setup(){const t=(0,n.lq)(),e=t.meta.title;(0,i.K7)(e)},computed:{componentName(){return"backend"===this.session.interface?"BackendIndex":"frontend"===this.session.interface?"FrontendIndex":(console.error("Invalid interface:",this.session.interface),null)}}};const F=(0,C.A)(S,[["render",o]]);var G=F}}]);
//# sourceMappingURL=6247.c331c0be.js.map