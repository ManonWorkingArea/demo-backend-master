(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[690],{20690:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return vr}});var s=r(20641);function o(e,t,r,o,n,a){const i=(0,s.g2)("Config");return this.login?((0,s.uX)(),(0,s.Wv)(i,{key:0})):(0,s.Q3)("",!0)}var n=r(52968),a=r(75220),i=(r(44114),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(98992),r(54520),r(72577),r(3949),r(81454),r(37550),r(14603),r(47566),r(98721),r(90033)),l=r(53751),c=r(50953),u=r(40475),d=r(25953);const p={class:"bg-white min-h-screen"},m={class:"bg-white border-b border-gray-200 px-6 py-4"},g={class:"flex items-center justify-between"},f={class:"flex items-center space-x-3"},v={class:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center"},b={class:"flex items-center space-x-3"},y=["disabled"],x=["disabled"],k={class:"px-6 py-4 bg-gray-50 border-b border-gray-200"},h={class:"grid grid-cols-2 md:grid-cols-6 gap-4"},L={class:"bg-white rounded-lg p-3 shadow-sm"},w={class:"flex items-center"},_={class:"w-6 h-6 bg-blue-100 rounded-lg flex items-center justify-center mr-2"},C={class:"text-lg font-semibold text-gray-900"},F={class:"bg-white rounded-lg p-3 shadow-sm"},I={class:"flex items-center"},E={class:"w-6 h-6 bg-green-100 rounded-lg flex items-center justify-center mr-2"},S={class:"text-lg font-semibold text-gray-900"},$={class:"bg-white rounded-lg p-3 shadow-sm"},O={class:"flex items-center"},j={class:"w-6 h-6 bg-amber-100 rounded-lg flex items-center justify-center mr-2"},P={class:"text-lg font-semibold text-gray-900"},T={class:"bg-white rounded-lg p-3 shadow-sm"},R={class:"flex items-center"},D={class:"w-6 h-6 bg-purple-100 rounded-lg flex items-center justify-center mr-2"},U={class:"text-lg font-semibold text-gray-900"},K={class:"bg-white rounded-lg p-3 shadow-sm"},q={class:"flex items-center"},N={class:"w-6 h-6 bg-red-100 rounded-lg flex items-center justify-center mr-2"},W={class:"text-lg font-semibold text-gray-900"},A={class:"bg-white rounded-lg p-3 shadow-sm"},V={class:"flex items-center"},B={class:"w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center mr-2"},X={class:"text-lg font-semibold text-gray-900"},z={class:"bg-white border-b border-gray-200"},J={class:"px-6 flex space-x-8"},M=["onClick"],Q={class:"ml-2 bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs"},H={class:"ml-2 bg-green-100 text-green-600 px-2 py-0.5 rounded-full text-xs"},G={class:"px-6 py-4"},Y={key:0,class:"space-y-6"},Z={class:"bg-white rounded-lg border border-gray-200 p-6"},ee={class:"flex items-center justify-between mb-4"},te={class:"flex items-center space-x-3"},re={class:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center"},se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},oe={class:"flex items-start justify-between mb-3"},ne={class:"flex items-center space-x-3"},ae={class:"text-sm font-medium text-gray-900"},ie={class:"text-xs text-gray-500"},le={class:"flex items-center space-x-1"},ce=["onClick"],ue=["onClick","disabled","title"],de={class:"space-y-2"},pe={class:"flex items-center justify-between text-xs"},me={class:"font-medium"},ge={class:"flex items-center justify-between text-xs"},fe={class:"flex items-center space-x-2"},ve={class:"font-mono text-xs"},be={class:"flex items-center justify-between text-xs"},ye={class:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"},xe={class:"flex items-start space-x-3"},ke={key:1,class:"space-y-6"},he={class:"bg-white rounded-lg border border-gray-200 p-6"},Le={class:"text-lg font-medium text-gray-900 mb-4"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_e={class:"p-4 border border-gray-200 rounded-lg"},Ce=["disabled"],Fe={class:"p-4 border border-gray-200 rounded-lg"},Ie={class:"bg-white rounded-lg border border-gray-200 p-6"},Ee={class:"text-lg font-medium text-gray-900 mb-4"},Se={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},$e={class:"bg-white rounded-lg border border-gray-200 p-6"},Oe={class:"text-lg font-medium text-gray-900 mb-4"},je={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Pe={class:"space-y-2"},Te={class:"text-sm text-gray-600"},Re={class:"font-medium"},De={class:"space-y-2"},Ue={class:"flex justify-between items-center"},Ke={class:"font-medium text-green-600"},qe={class:"flex justify-between items-center"},Ne={class:"font-medium text-red-600"},We={class:"flex justify-between items-center"},Ae={class:"font-medium text-amber-600"},Ve={class:"space-y-2"},Be={class:"flex justify-between items-center"},Xe={class:"font-medium"},ze={class:"flex justify-between items-center"},Je={class:"font-medium text-green-600"},Me={class:"flex justify-between items-center"},Qe={class:"font-medium text-red-600"},He={class:"flex justify-between items-center pt-2 border-t border-gray-200"},Ge={class:"flex items-center space-x-2"},Ye={class:"w-16 bg-gray-200 rounded-full h-2"},Ze={class:"font-medium text-sm"},et={key:2},tt={class:"bg-white rounded-lg border border-gray-200 p-4 mb-4"},rt={class:"flex flex-wrap items-center gap-4"},st={class:"flex items-center space-x-2"},ot={class:"flex items-center space-x-2"},nt={class:"flex items-center space-x-2"},at={key:0,class:"text-center py-8"},it={key:1,class:"text-center py-12"},lt={class:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4"},ct={key:2,class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6"},ut={class:"p-4 border-b border-gray-50"},dt={class:"flex items-start space-x-4"},pt={class:"flex-shrink-0"},mt={class:"flex-1 min-w-0"},gt={class:"flex items-start justify-between"},ft={class:"text-base font-medium text-gray-900 truncate group-hover:text-blue-600 transition-colors"},vt={class:"mt-1 text-sm text-gray-500 line-clamp-2"},bt={class:"flex items-center space-x-2 ml-4"},yt=["onClick"],xt=["onClick"],kt={class:"px-4 py-3 bg-gray-50 bg-opacity-50"},ht={class:"grid grid-cols-2 gap-3 text-sm"},Lt={class:"space-y-2"},wt={class:"flex items-center justify-between"},_t={class:"px-2 py-0.5 bg-gray-100 rounded text-xs font-mono text-gray-700"},Ct={class:"flex items-center justify-between"},Ft={class:"space-y-2"},It={key:0,class:"flex items-center justify-between"},Et={class:"flex items-center space-x-1.5"},St=["onClick"],$t={class:"flex items-center justify-between"},Ot={class:"flex items-center bg-white rounded-lg border border-gray-200"},jt=["onClick","disabled"],Pt={class:"px-2 py-0.5 text-xs font-medium text-gray-700"},Tt=["onClick","disabled"],Rt={class:"px-4 py-3 bg-gray-50 flex items-center justify-end space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200"},Dt=["onClick"],Ut=["onClick"],Kt=["onClick"],qt={key:0,class:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4"},Nt={class:"bg-white w-full max-w-2xl shadow-xl border border-gray-200 rounded-lg overflow-hidden"},Wt={class:"bg-white border-b border-gray-200 px-6 py-4"},At={class:"flex items-center justify-between"},Vt={class:"text-lg font-medium text-gray-900"},Bt={class:"px-6 py-4 max-h-[70vh] overflow-y-auto"},Xt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Jt=["value"],Mt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Qt={class:"flex items-center"},Ht={class:"flex items-center"},Gt={class:"flex items-center"},Yt={class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"},Zt={key:1,class:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4"},er={class:"bg-white w-full max-w-lg shadow-xl border border-gray-200 rounded-lg overflow-hidden"},tr={class:"bg-white border-b border-gray-200 px-6 py-4"},rr={class:"flex items-center justify-between"},sr={class:"text-lg font-medium text-gray-900"},or={class:"px-6 py-4"},nr=["disabled"],ar={class:"grid grid-cols-2 gap-4"},ir={class:"flex items-center space-x-2"},lr={class:"flex items-center"},cr={class:"bg-gray-50 px-6 py-4 flex justify-end space-x-3"};var ur={__name:"BuillderItem",setup(e){const t=(0,s.nI)(),o=(0,c.KR)(u.A.get("configs")),n=(0,c.KR)([]),a=(0,c.KR)(!1),ur=(0,c.KR)(!1),dr=(0,c.KR)(!1),pr=(0,c.KR)(new Map),mr=(0,c.KR)("all"),gr=(0,c.KR)(""),fr=(0,c.KR)(""),vr=(0,c.KR)(""),br=(0,c.KR)(!1),yr=(0,c.KR)(!1),xr=(0,c.KR)(null),kr=(0,c.KR)([]),hr=(0,c.KR)(!1),Lr=(0,c.KR)(null),wr=(0,c.KR)({name:"",type:"",description:"",category:"",icon:"",status:!0,pin:!1,isFolder:!1,sort_order:0}),_r=(0,c.KR)({name:"",displayName:"",description:"",icon:"",color:"#6b7280",sortOrder:0,active:!0}),Cr=(0,s.EW)((()=>n.value.filter((e=>!0===e.isFolder&&!1!==e.status)).map((e=>({name:e.category,displayName:e.name,description:e.description,icon:e.icon||"folder",color:"#6b7280",sortOrder:e.sort_order||0,active:e.status,_id:e._id}))).sort(((e,t)=>(e.sortOrder||0)-(t.sortOrder||0))))),Fr=(0,c.KR)(new Map),Ir=(0,c.KR)(!1);async function Er(){if(!Ir.value)try{0;try{const t=["TextInput","TextArea","Button","Image","Video","Audio","List","Table","Form","Card","Modal","Tabs","Accordion"];for(const s of t)try{await r(91254)(`./${s}.vue`),Fr.value.set(s,{exists:!0,path:`/src/interface/template/builder/element/${s}.vue`,discoveryMethod:"predefined"})}catch(e){}return void(Ir.value=!0)}catch(t){console.log("Dynamic import not available, using fallback")}Ir.value=!0}catch(t){console.error("Error initializing component registry:",t),Ir.value=!0}}const Sr=(0,s.EW)((()=>{const e=n.value.length,t=n.value.filter((e=>!0===e.status)).length,r=n.value.filter((e=>!0===e.pin)).length,s=new Set(n.value.map((e=>e.category))).size,o=n.value.filter((e=>!0===e.isFolder)).length,a=n.value.filter((e=>!0!==e.isFolder)).length,i=Mr();return{total:e,active:t,pinned:r,categories:s,folders:o,elements:a,components:i}})),$r=(0,s.EW)((()=>{let e=[...n.value];if("all"!==mr.value&&"manage"!==mr.value&&"categories"!==mr.value&&(e=e.filter((e=>e.category===mr.value))),""!==gr.value){const t="true"===gr.value;e=e.filter((e=>e.status===t))}if(""!==fr.value&&("folder"===fr.value?e=e.filter((e=>!0===e.isFolder)):"element"===fr.value&&(e=e.filter((e=>!0!==e.isFolder)))),e=e.filter((e=>!0!==e.isFolder)),vr.value){const t=vr.value.toLowerCase();e=e.filter((e=>e.name.toLowerCase().includes(t)||e.type.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)))}return e.sort(((e,t)=>(e.sort_order||0)-(t.sort_order||0)))}));function Or(e){return n.value.filter((t=>t.category===e))}async function jr(){try{a.value=!0,await Er();const e={method:"find",args:[{}],sort:{sort_order:1,created_at:-1},paging:{page:1,limit:1e3}},t=await fetch("https://gateway.cloudrestfulapi.com/api/builder_item/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":o.value.key},body:JSON.stringify(e)});if(!t.ok)throw new Error(`API Error: ${t.status}`);{const e=await t.json();n.value=e.data||[],console.log("Loaded builder items:",n.value.length),setTimeout((()=>{ss()}),500)}}catch(e){console.error("Error loading items:",e),Gr("error","เกิดข้อผิดพลาดในการโหลดข้อมูล")}finally{a.value=!1}}async function Pr(){if(confirm("คุณต้องการ Import Master Data จาก builderItems.js หรือไม่?\n\nข้อมูลที่มีอยู่จะไม่ถูกลบ แต่จะอัปเดตหากมี type ซ้ำกัน"))try{ur.value=!0,Gr("info","เริ่มต้น Import Master Data...");const r=await(0,d.I2)(),s=Tr(r);console.log("Converted items:",s.length);let n=0,a=0,i=0;for(const c of s)try{const e=await Rr(c.type);if(e){const r={name:c.name,type:c.type,description:c.description,category:c.category,icon:c.icon,status:c.status,pin:c.pin,isFolder:c.isFolder,sort_order:c.sort_order,updated_at:(new Date).toISOString()},s=await t.appContext.config.globalProperties.$Request.PUT(`builder_item/${e._id}`,{data:r,options:{}},o.value.key);200===s.status&&(i++,console.log(`Updated item: ${c.type}`))}else{const e={...c,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},r=await t.appContext.config.globalProperties.$Request.POST("builder_item",{data:e,options:{}},o.value.key);200===r.status&&(n++,console.log(`Created item: ${c.type}`))}}catch(e){console.error(`Error importing item ${c.type}:`,e),a++}const l=[];n>0&&l.push(`สร้างใหม่: ${n}`),i>0&&l.push(`อัปเดต: ${i}`),a>0&&l.push(`ข้อผิดพลาด: ${a}`),Gr("success",`Import เสร็จสิ้น! ${l.join(", ")}`),await jr()}catch(e){console.error("Error importing master data:",e),Gr("error","เกิดข้อผิดพลาดในการ Import Master Data")}finally{ur.value=!1}}function Tr(e){const t=[];let r=1;return e.forEach((e=>{const s={id:e.id,name:e.name,description:e.description,icon:e.icon,type:e.type||"folder",category:e.category,isFolder:!0,pin:!1,status:!0,sort_order:r++,parent:null,mobile:!0,tablet:!0,laptop:!0,desktop:!0,position:"relative",customClass:"",customId:""};t.push(s),e.children&&Array.isArray(e.children)&&e.children.forEach((s=>{const o={...s,sort_order:r++,parent:e.id,isFolder:!1,pin:s.pin||!1,status:void 0===s.status||s.status,mobile:void 0===s.mobile||s.mobile,tablet:void 0===s.tablet||s.tablet,laptop:void 0===s.laptop||s.laptop,desktop:void 0===s.desktop||s.desktop,position:s.position||"relative",customClass:s.customClass||"",customId:s.customId||"",elements:s.elements||[],options:s.options||[]};t.push(o)}))})),t}async function Rr(e){try{const t={method:"findOne",args:[{type:e}]},r=await fetch("https://gateway.cloudrestfulapi.com/api/builder_item/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":o.value.key},body:JSON.stringify(t)});if(r.ok){const e=await r.json();return e.data||null}return null}catch(t){return console.error("Error finding existing item:",t),null}}async function Dr(){try{const e={name:wr.value.name,type:wr.value.type,description:wr.value.description,category:wr.value.category,icon:wr.value.icon,status:wr.value.status,pin:wr.value.pin,isFolder:wr.value.isFolder,sort_order:wr.value.sort_order,updated_at:(new Date).toISOString()};if(br.value){e.created_at=(new Date).toISOString();const r=await t.appContext.config.globalProperties.$Request.POST("builder_item",{data:e,options:{}},o.value.key);200===r.status&&(Gr("success","เพิ่ม Builder Item สำเร็จแล้ว"),Xr(),jr())}else{const r=await t.appContext.config.globalProperties.$Request.PUT(`builder_item/${xr.value._id}`,{data:e,options:{}},o.value.key);200===r.status&&(Gr("success","แก้ไข Builder Item สำเร็จแล้ว"),Xr(),jr())}}catch(e){console.error("Error saving item:",e),Gr("error","เกิดข้อผิดพลาดในการบันทึก")}}async function Ur(e){if(confirm(`คุณต้องการลบ "${e.name}" หรือไม่?`))try{const r=await t.appContext.config.globalProperties.$Request.DELETE(`builder_item/${e._id}`,o.value.key);200===r.status&&(Gr("success","ลบ Builder Item สำเร็จแล้ว"),jr())}catch(r){console.error("Error deleting item:",r),Gr("error","เกิดข้อผิดพลาดในการลบ")}}async function Kr(e){try{const r={name:`${e.name} (Copy)`,type:e.type,description:e.description,category:e.category,icon:e.icon,status:e.status,pin:e.pin,isFolder:e.isFolder,sort_order:e.sort_order,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()},s=await t.appContext.config.globalProperties.$Request.POST("builder_item",{data:r,options:{}},o.value.key);200===s.status&&(Gr("success","คัดลอก Builder Item สำเร็จแล้ว"),jr())}catch(r){console.error("Error duplicating item:",r),Gr("error","เกิดข้อผิดพลาดในการคัดลอก")}}async function qr(e){try{const r={name:e.name,type:e.type,description:e.description,category:e.category,icon:e.icon,status:!e.status,pin:e.pin,isFolder:e.isFolder,sort_order:e.sort_order,updated_at:(new Date).toISOString()},s=await t.appContext.config.globalProperties.$Request.PUT(`builder_item/${e._id}`,{data:r,options:{}},o.value.key);200===s.status&&(e.status=!e.status,Gr("success",`${e.status?"เปิด":"ปิด"}ใช้งาน "${e.name}" แล้ว`))}catch(r){console.error("Error toggling status:",r),Gr("error","เกิดข้อผิดพลาดในการเปลี่ยนสถานะ")}}async function Nr(e){try{const r={name:e.name,type:e.type,description:e.description,category:e.category,icon:e.icon,status:e.status,pin:!e.pin,isFolder:e.isFolder,sort_order:e.sort_order,updated_at:(new Date).toISOString()},s=await t.appContext.config.globalProperties.$Request.PUT(`builder_item/${e._id}`,{data:r,options:{}},o.value.key);200===s.status&&(e.pin=!e.pin,Gr("success",`${e.pin?"Pin":"Unpin"} "${e.name}" แล้ว`))}catch(r){console.error("Error toggling pin:",r),Gr("error","เกิดข้อผิดพลาดในการเปลี่ยน Pin")}}async function Wr(e){if(0===e)return;const t=$r.value[e],r=$r.value[e-1],s=t.sort_order||e;t.sort_order=r.sort_order||e-1,r.sort_order=s,await Vr(t),await Vr(r),await jr()}async function Ar(e){if(e===$r.value.length-1)return;const t=$r.value[e],r=$r.value[e+1],s=t.sort_order||e;t.sort_order=r.sort_order||e+1,r.sort_order=s,await Vr(t),await Vr(r),await jr()}async function Vr(e){try{const r={name:e.name,type:e.type,description:e.description,category:e.category,icon:e.icon,status:e.status,pin:e.pin,isFolder:e.isFolder,sort_order:e.sort_order,updated_at:(new Date).toISOString()};await t.appContext.config.globalProperties.$Request.PUT(`builder_item/${e._id}`,{data:r,options:{}},o.value.key)}catch(r){console.error("Error updating sort order:",r)}}function Br(e){xr.value=e,wr.value={...e},yr.value=!0}function Xr(){br.value=!1,yr.value=!1,xr.value=null,wr.value={name:"",type:"",description:"",category:"",icon:"",status:!0,pin:!1,isFolder:!1,sort_order:0}}function zr(e){const t=kr.value.find((t=>t.name===e));return t?.displayName||e}function Jr(e){const t=Cr.value.find((t=>t.name===e));return t?.color||"#6b7280"}function Mr(){const e=n.value.filter((e=>!e.isFolder&&"folder"!==e.type)).length,t=Array.from(pr.value.values()).filter((e=>e.exists)).length,r=e-t;return{total:e,existing:t,missing:r,percentage:e>0?Math.round(t/e*100):0}}function Qr(e){return pr.value.get(e)||{exists:!1,path:null}}function Hr(e){e&&(Gr("info",`ไฟล์ component: ${e}`),console.log("Component file path:",e))}function Gr(e,r){const s=t.appContext.config.globalProperties.$Toast({type:e,message:r});setTimeout((()=>{s.hide()}),2e3)}async function Yr(){try{const e={metadata:{title:"Builder Items Export",exportDate:(new Date).toISOString(),version:"1.0.0",totalItems:n.value.length,totalCategories:kr.value.length},categories:kr.value,items:n.value},t=`builder_items_${(new Date).toISOString().split("T")[0]}.json`,r=JSON.stringify(e,null,2),s=new Blob([r],{type:"application/json"}),o=document.createElement("a");o.href=URL.createObjectURL(s),o.download=t,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),Gr("success",`ส่งออกข้อมูลสำเร็จ: ${t}`)}catch(e){console.error("Error exporting data:",e),Gr("error","เกิดข้อผิดพลาดในการส่งออกข้อมูล")}}async function Zr(){if(confirm("คุณต้องการเปิดใช้งาน Builder Items ทั้งหมดหรือไม่?"))try{let r=0,s=0;for(const a of n.value)if(!a.status)try{const e={name:a.name,type:a.type,description:a.description,category:a.category,icon:a.icon,status:!0,pin:a.pin,isFolder:a.isFolder,sort_order:a.sort_order,updated_at:(new Date).toISOString()},s=await t.appContext.config.globalProperties.$Request.PUT(`builder_item/${a._id}`,{data:e,options:{}},o.value.key);200===s.status&&(a.status=!0,r++)}catch(e){console.error(`Error enabling item ${a.name}:`,e),s++}r>0?Gr("success",`เปิดใช้งานสำเร็จ ${r} รายการ${s>0?`, ข้อผิดพลาด ${s} รายการ`:""}`):Gr("info","ไม่มีรายการที่ต้องเปิดใช้งาน")}catch(e){console.error("Error in bulk enable:",e),Gr("error","เกิดข้อผิดพลาดในการเปิดใช้งานแบบกลุ่ม")}}async function es(){if(confirm("คุณต้องการปิดใช้งาน Builder Items ทั้งหมดหรือไม่?\n\nการทำเช่นนี้อาจส่งผลต่อการทำงานของ Builder System"))try{let r=0,s=0;for(const a of n.value)if(a.status)try{const e={name:a.name,type:a.type,description:a.description,category:a.category,icon:a.icon,status:!1,pin:a.pin,isFolder:a.isFolder,sort_order:a.sort_order,updated_at:(new Date).toISOString()},s=await t.appContext.config.globalProperties.$Request.PUT(`builder_item/${a._id}`,{data:e,options:{}},o.value.key);200===s.status&&(a.status=!1,r++)}catch(e){console.error(`Error disabling item ${a.name}:`,e),s++}r>0?Gr("success",`ปิดใช้งานสำเร็จ ${r} รายการ${s>0?`, ข้อผิดพลาด ${s} รายการ`:""}`):Gr("info","ไม่มีรายการที่ต้องปิดใช้งาน")}catch(e){console.error("Error in bulk disable:",e),Gr("error","เกิดข้อผิดพลาดในการปิดใช้งานแบบกลุ่ม")}}async function ts(){if(confirm("คุณต้องการจัดเรียงลำดับใหม่ตามหมวดหมู่หรือไม่?\n\nการทำเช่นนี้จะเปลี่ยนลำดับการแสดงผลทั้งหมด"))try{const r=["content","form","lesson","nav","dashboard"];let s=1,a=0,i=0;const l=[...n.value].sort(((e,t)=>{const s=r.indexOf(e.category),o=r.indexOf(t.category);return s!==o?(-1===s?999:s)-(-1===o?999:o):e.isFolder!==t.isFolder?e.isFolder?-1:1:e.name.localeCompare(t.name)}));for(const n of l)try{const e={name:n.name,type:n.type,description:n.description,category:n.category,icon:n.icon,status:n.status,pin:n.pin,isFolder:n.isFolder,sort_order:s++,updated_at:(new Date).toISOString()},r=await t.appContext.config.globalProperties.$Request.PUT(`builder_item/${n._id}`,{data:e,options:{}},o.value.key);200===r.status&&a++}catch(e){console.error(`Error updating sort order for item ${n.name}:`,e),i++}a>0?(Gr("success",`จัดเรียงลำดับสำเร็จ ${a} รายการ${i>0?`, ข้อผิดพลาด ${i} รายการ`:""}`),await jr()):Gr("error","ไม่สามารถจัดเรียงลำดับได้")}catch(e){console.error("Error resetting sort order:",e),Gr("error","เกิดข้อผิดพลาดในการจัดเรียงลำดับ")}}async function rs(e){try{if(Ir.value||await Er(),Fr.value.has(e)){const t=Fr.value.get(e);return console.log(`Component ${e} found in registry:`,t.discoveryMethod),t}try{await r(28416)(`./${e}.vue`);const t={exists:!0,path:`/src/interface/template/builder/element/${e}.vue`,discoveryMethod:"dynamic"};return Fr.value.set(e,t),console.log(`Component ${e} discovered dynamically and cached`),t}catch(t){const r={exists:!1,path:null,discoveryMethod:"failed"};return Fr.value.set(e,r),console.log(`Component ${e} not found, cached negative result`),r}}catch(s){return console.error(`Error checking component for ${e}:`,s),{exists:!1,path:null,discoveryMethod:"error"}}}async function ss(){try{dr.value=!0,pr.value.clear();const e=n.value.filter((e=>!e.isFolder&&"folder"!==e.type));for(const t of e){const e=await rs(t.type);pr.value.set(t.type,e)}console.log("Component check completed:",pr.value),Gr("success",`เช็คไฟล์ component เสร็จสิ้น: ${e.length} รายการ`)}catch(e){console.error("Error checking components:",e),Gr("error","เกิดข้อผิดพลาดในการเช็คไฟล์ component")}finally{dr.value=!1}}async function os(){try{const e={name:_r.value.displayName,description:_r.value.description,icon:_r.value.icon,color:_r.value.color,sort_order:_r.value.sortOrder,status:_r.value.active,isFolder:!0,type:_r.value.name,updated_at:(new Date).toISOString()};let r=null;if(Lr.value&&Lr.value._id&&(r=n.value.find((e=>e._id===Lr.value._id))),r||(r=n.value.find((e=>e.isFolder&&e.type===_r.value.name))),Lr.value&&r){const s=await t.appContext.config.globalProperties.$Request.PUT(`builder_item/${r._id}`,{data:e,options:{}},o.value.key);200===s.status&&(Gr("success","แก้ไขหมวดหมู่สำเร็จแล้ว"),ls(),await jr(),await ns())}else{e.created_at=(new Date).toISOString(),e.isFolder=!0,e.status=!0;const r=await t.appContext.config.globalProperties.$Request.POST("builder_item",{data:e,options:{}},o.value.key);200===r.status&&(Gr("success","เพิ่มหมวดหมู่สำเร็จแล้ว"),ls(),await jr(),await ns())}}catch(e){console.error("Error saving category:",e),Gr("error","เกิดข้อผิดพลาดในการบันทึกหมวดหมู่")}}async function ns(){try{const e={method:"find",args:[{isFolder:!0}],sort:{sort_order:1,created_at:-1},paging:{page:1,limit:100}},t=await fetch("https://gateway.cloudrestfulapi.com/api/builder_item/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":o.value.key},body:JSON.stringify(e)});if(t.ok){const e=await t.json(),r=(e.data||[]).map((e=>({name:e.type,displayName:e.name,description:e.description||"",icon:e.icon||"folder",color:e.color||"#6b7280",sortOrder:e.sort_order||0,active:!1!==e.status,_id:e._id})));kr.value=r,console.log("Loaded categories:",kr.value.length)}}catch(e){console.error("Error loading categories:",e),kr.value=[]}}function as(){return!1}function is(){return!1}function ls(){hr.value=!1,Lr.value=null,_r.value={name:"",displayName:"",description:"",icon:"",color:"#6b7280",sortOrder:0,active:!0}}function cs(e){let t=kr.value.find((t=>t.name===e.name));t||(t=e),t&&(Lr.value=t,_r.value={name:t.name,displayName:t.displayName,description:t.description||"",icon:t.icon||"folder",color:t.color||"#6b7280",sortOrder:t.sortOrder||0,active:!1!==t.active},hr.value=!0)}async function us(e){const r=Or(e.name);if(r.length>0)Gr("warning",`ไม่สามารถลบได้ เนื่องจากมี ${r.length} รายการใช้หมวดหมู่นี้อยู่`);else if(is(e.name))Gr("warning","ไม่สามารถลบหมวดหมู่เริ่มต้นได้");else if(confirm(`คุณต้องการลบหมวดหมู่ "${e.displayName||e.name}" หรือไม่?`))try{const r=n.value.find((t=>t.isFolder&&t.type===e.name));if(r){const e=await t.appContext.config.globalProperties.$Request.DELETE(`builder_item/${r._id}`,o.value.key);200===e.status&&(Gr("success","ลบหมวดหมู่ (Folder) สำเร็จแล้ว"),await jr())}}catch(s){console.error("Error deleting folder category:",s),Gr("error","เกิดข้อผิดพลาดในการลบหมวดหมู่")}}function ds(){xr.value=null,wr.value={name:"",type:"",description:"",category:"content",icon:"folder",status:!0,pin:!1,isFolder:!0,sort_order:0},br.value=!0}return(0,s.sV)((()=>{jr()})),(0,s.sV)((()=>{ns(),jr()})),(0,s.wB)(Cr,(e=>{e.length>0&&!e.some((e=>e.name===mr.value))&&(mr.value=e[0].name)}),{immediate:!0}),(e,t)=>{const r=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("div",p,[(0,s.Lk)("div",m,[(0,s.Lk)("div",g,[(0,s.Lk)("div",f,[(0,s.Lk)("div",v,[(0,s.bF)(r,{icon:["fas","cubes"],class:"h-4 w-4 text-white"})]),t[23]||(t[23]=(0,s.Lk)("div",null,[(0,s.Lk)("h1",{class:"text-xl font-semibold text-gray-900"},"จัดการ Builder Items"),(0,s.Lk)("p",{class:"text-sm text-gray-500"},"จัดการองค์ประกอบสำหรับ Builder System")],-1))]),(0,s.Lk)("div",b,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>br.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors"},[(0,s.bF)(r,{icon:["fas","plus"],class:"mr-2 h-4 w-4"}),t[24]||(t[24]=(0,s.eW)(" เพิ่ม Item "))]),(0,s.Lk)("button",{onClick:Pr,disabled:ur.value,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[(0,s.bF)(r,{icon:ur.value?["fas","spinner"]:["fas","download"],class:(0,i.C4)(["mr-2 h-4 w-4",{"animate-spin":ur.value}])},null,8,["icon","class"]),(0,s.eW)(" "+(0,i.v_)(ur.value?"กำลัง Import...":"Import Master Data"),1)],8,y),(0,s.Lk)("button",{onClick:jr,class:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors"},[(0,s.bF)(r,{icon:["fas","sync-alt"],class:"mr-2 h-4 w-4"}),t[25]||(t[25]=(0,s.eW)(" รีเฟรช "))]),(0,s.Lk)("button",{onClick:ss,disabled:dr.value,class:"inline-flex items-center px-4 py-2 bg-purple-600 text-white text-sm font-medium rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[(0,s.bF)(r,{icon:dr.value?["fas","spinner"]:["fas","search"],class:(0,i.C4)(["mr-2 h-4 w-4",{"animate-spin":dr.value}])},null,8,["icon","class"]),(0,s.eW)(" "+(0,i.v_)(dr.value?"กำลังเช็ค...":"เช็ค Components"),1)],8,x)])])]),(0,s.Lk)("div",k,[(0,s.Lk)("div",h,[(0,s.Lk)("div",L,[(0,s.Lk)("div",w,[(0,s.Lk)("div",_,[(0,s.bF)(r,{icon:["fas","cubes"],class:"h-3 w-3 text-blue-600"})]),(0,s.Lk)("div",null,[t[26]||(t[26]=(0,s.Lk)("p",{class:"text-xs font-medium text-gray-600"},"รวมทั้งหมด",-1)),(0,s.Lk)("p",C,(0,i.v_)(Sr.value.total),1)])])]),(0,s.Lk)("div",F,[(0,s.Lk)("div",I,[(0,s.Lk)("div",E,[(0,s.bF)(r,{icon:["fas","check-circle"],class:"h-3 w-3 text-green-600"})]),(0,s.Lk)("div",null,[t[27]||(t[27]=(0,s.Lk)("p",{class:"text-xs font-medium text-gray-600"},"ใช้งานได้",-1)),(0,s.Lk)("p",S,(0,i.v_)(Sr.value.active),1)])])]),(0,s.Lk)("div",$,[(0,s.Lk)("div",O,[(0,s.Lk)("div",j,[(0,s.bF)(r,{icon:["fas","thumbtack"],class:"h-3 w-3 text-amber-600"})]),(0,s.Lk)("div",null,[t[28]||(t[28]=(0,s.Lk)("p",{class:"text-xs font-medium text-gray-600"},"Pinned",-1)),(0,s.Lk)("p",P,(0,i.v_)(Sr.value.pinned),1)])])]),(0,s.Lk)("div",T,[(0,s.Lk)("div",R,[(0,s.Lk)("div",D,[(0,s.bF)(r,{icon:["fas","folder"],class:"h-3 w-3 text-purple-600"})]),(0,s.Lk)("div",null,[t[29]||(t[29]=(0,s.Lk)("p",{class:"text-xs font-medium text-gray-600"},"หมวดหมู่",-1)),(0,s.Lk)("p",U,(0,i.v_)(Sr.value.categories),1)])])]),(0,s.Lk)("div",K,[(0,s.Lk)("div",q,[(0,s.Lk)("div",N,[(0,s.bF)(r,{icon:["fas","folder-open"],class:"h-3 w-3 text-red-600"})]),(0,s.Lk)("div",null,[t[30]||(t[30]=(0,s.Lk)("p",{class:"text-xs font-medium text-gray-600"},"โฟลเดอร์",-1)),(0,s.Lk)("p",W,(0,i.v_)(Sr.value.folders),1)])])]),(0,s.Lk)("div",A,[(0,s.Lk)("div",V,[(0,s.Lk)("div",B,[(0,s.bF)(r,{icon:["fas","puzzle-piece"],class:"h-3 w-3 text-indigo-600"})]),(0,s.Lk)("div",null,[t[31]||(t[31]=(0,s.Lk)("p",{class:"text-xs font-medium text-gray-600"},"Elements",-1)),(0,s.Lk)("p",X,(0,i.v_)(Sr.value.elements),1)])])])])]),(0,s.Lk)("div",z,[(0,s.Lk)("nav",J,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Cr.value,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e.name,onClick:t=>mr.value=e.name,class:(0,i.C4)(["py-4 px-1 border-b-2 font-medium text-sm transition-colors",mr.value===e.name?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[(0,s.bF)(r,{icon:["fas",e.icon||"folder"],class:"mr-2"},null,8,["icon"]),(0,s.eW)(" "+(0,i.v_)(e.displayName||e.name)+" ",1),(0,s.Lk)("span",Q,(0,i.v_)(Or(e.name).length),1)],10,M)))),128)),(0,s.Lk)("button",{onClick:t[1]||(t[1]=e=>mr.value="categories"),class:(0,i.C4)(["py-4 px-1 border-b-2 font-medium text-sm transition-colors","categories"===mr.value?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[(0,s.bF)(r,{icon:["fas","tags"],class:"mr-2"}),t[32]||(t[32]=(0,s.eW)(" จัดการหมวดหมู่ ")),(0,s.Lk)("span",H,(0,i.v_)(Cr.value.length),1)],2),(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>mr.value="manage"),class:(0,i.C4)(["py-4 px-1 border-b-2 font-medium text-sm transition-colors","manage"===mr.value?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[(0,s.bF)(r,{icon:["fas","cogs"],class:"mr-2"}),t[33]||(t[33]=(0,s.eW)(" จัดการ "))],2)])]),(0,s.Lk)("div",G,["categories"===mr.value?((0,s.uX)(),(0,s.CE)("div",Y,[(0,s.Lk)("div",Z,[(0,s.Lk)("div",ee,[(0,s.Lk)("div",te,[(0,s.Lk)("div",re,[(0,s.bF)(r,{icon:["fas","tags"],class:"h-4 w-4 text-white"})]),t[34]||(t[34]=(0,s.Lk)("div",null,[(0,s.Lk)("h3",{class:"text-lg font-medium text-gray-900"},"จัดการหมวดหมู่ Builder Items"),(0,s.Lk)("p",{class:"text-sm text-gray-500"},"เพิ่ม แก้ไข และลบหมวดหมู่สำหรับจัดกลุ่ม Builder Items"),(0,s.Lk)("p",{class:"text-sm text-gray-500"},"จัดการ Folder Items ที่ใช้เป็นหมวดหมู่ในระบบ")],-1))]),(0,s.Lk)("button",{onClick:ds,class:"inline-flex items-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors"},[(0,s.bF)(r,{icon:["fas","plus"],class:"mr-2 h-4 w-4"}),t[35]||(t[35]=(0,s.eW)(" เพิ่มหมวดหมู่ (Folder) "))])]),(0,s.Lk)("div",se,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Cr.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e._id||e.name,class:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[(0,s.Lk)("div",oe,[(0,s.Lk)("div",ne,[(0,s.Lk)("div",{class:"w-10 h-10 rounded-lg flex items-center justify-center text-white",style:(0,i.Tr)({backgroundColor:e.color||"#6b7280"})},[(0,s.bF)(r,{icon:["fas",e.icon||"folder"],class:"h-5 w-5"},null,8,["icon"])],4),(0,s.Lk)("div",null,[(0,s.Lk)("h4",ae,(0,i.v_)(e.displayName||e.name),1),(0,s.Lk)("p",ie,"Type: "+(0,i.v_)(e.name),1)])]),(0,s.Lk)("div",le,[(0,s.Lk)("button",{onClick:t=>cs(e),class:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"แก้ไข"},[(0,s.bF)(r,{icon:["fas","edit"],class:"h-3 w-3"})],8,ce),(0,s.Lk)("button",{onClick:t=>us(e),disabled:Or(e.name).length>0||is(e.name),class:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-30 disabled:cursor-not-allowed",title:Or(e.name).length>0||is(e.name)?"ไม่สามารถลบได้":"ลบ"},[(0,s.bF)(r,{icon:["fas","trash"],class:"h-3 w-3"})],8,ue)])]),(0,s.Lk)("div",de,[(0,s.Lk)("div",pe,[t[36]||(t[36]=(0,s.Lk)("span",{class:"text-gray-500"},"จำนวน Items:",-1)),(0,s.Lk)("span",me,(0,i.v_)(Or(e.name).length),1)]),(0,s.Lk)("div",ge,[t[37]||(t[37]=(0,s.Lk)("span",{class:"text-gray-500"},"สีหมวดหมู่:",-1)),(0,s.Lk)("div",fe,[(0,s.Lk)("div",{class:"w-4 h-4 rounded border border-gray-300",style:(0,i.Tr)({backgroundColor:e.color||"#6b7280"})},null,4),(0,s.Lk)("span",ve,(0,i.v_)(e.color||"#6b7280"),1)])]),(0,s.Lk)("div",be,[t[38]||(t[38]=(0,s.Lk)("span",{class:"text-gray-500"},"สถานะ:",-1)),(0,s.Lk)("span",{class:(0,i.C4)(["px-2 py-1 rounded-full text-xs font-medium",e.active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},(0,i.v_)(e.active?"ใช้งาน":"ปิดใช้งาน"),3)])])])))),128))]),(0,s.Lk)("div",ye,[(0,s.Lk)("div",xe,[(0,s.bF)(r,{icon:["fas","info-circle"],class:"h-5 w-5 text-blue-600 mt-0.5"}),t[39]||(t[39]=(0,s.Lk)("div",null,[(0,s.Lk)("h4",{class:"text-sm font-medium text-blue-900"},"หมายเหตุ"),(0,s.Lk)("p",{class:"text-sm text-blue-700 mt-1"},[(0,s.eW)(" หมวดหมู่เริ่มต้น (content, form, lesson, nav, dashboard) ไม่สามารถลบได้ แต่สามารถแก้ไขชื่อแสดงผลและสีได้ หมวดหมู่คือ Folder Items ที่มี isFolder: true"),(0,s.Lk)("br"),(0,s.eW)(" - เพิ่มหมวดหมู่ = เพิ่ม Folder Item ใหม่"),(0,s.Lk)("br"),(0,s.eW)(" - แก้ไขหมวดหมู่ = แก้ไข Folder Item"),(0,s.Lk)("br"),(0,s.eW)(" - ลบหมวดหมู่ = ลบ Folder Item ")])],-1))])])])])):(0,s.Q3)("",!0),"manage"===mr.value?((0,s.uX)(),(0,s.CE)("div",ke,[(0,s.Lk)("div",he,[(0,s.Lk)("h3",Le,[(0,s.bF)(r,{icon:["fas","download"],class:"mr-2 text-blue-500"}),t[40]||(t[40]=(0,s.eW)(" Import/Export ข้อมูล "))]),(0,s.Lk)("div",we,[(0,s.Lk)("div",_e,[t[41]||(t[41]=(0,s.Lk)("h4",{class:"font-medium text-gray-900 mb-2"},"Import Master Data",-1)),t[42]||(t[42]=(0,s.Lk)("p",{class:"text-sm text-gray-600 mb-4"},"นำเข้าข้อมูล Builder Items จาก builderItems.js",-1)),(0,s.Lk)("button",{onClick:Pr,disabled:ur.value,class:"w-full inline-flex items-center justify-center px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[(0,s.bF)(r,{icon:ur.value?["fas","spinner"]:["fas","download"],class:(0,i.C4)(["mr-2 h-4 w-4",{"animate-spin":ur.value}])},null,8,["icon","class"]),(0,s.eW)(" "+(0,i.v_)(ur.value?"กำลัง Import...":"Import Master Data"),1)],8,Ce)]),(0,s.Lk)("div",Fe,[t[44]||(t[44]=(0,s.Lk)("h4",{class:"font-medium text-gray-900 mb-2"},"Export ข้อมูล",-1)),t[45]||(t[45]=(0,s.Lk)("p",{class:"text-sm text-gray-600 mb-4"},"ส่งออกข้อมูลปัจจุบันเป็นไฟล์ JSON",-1)),(0,s.Lk)("button",{onClick:Yr,class:"w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors"},[(0,s.bF)(r,{icon:["fas","upload"],class:"mr-2 h-4 w-4"}),t[43]||(t[43]=(0,s.eW)(" Export JSON "))])])])]),(0,s.Lk)("div",Ie,[(0,s.Lk)("h3",Ee,[(0,s.bF)(r,{icon:["fas","tasks"],class:"mr-2 text-purple-500"}),t[46]||(t[46]=(0,s.eW)(" การจัดการแบบกลุ่ม "))]),(0,s.Lk)("div",Se,[(0,s.Lk)("button",{onClick:Zr,class:"p-4 border border-green-200 rounded-lg hover:bg-green-50 transition-colors text-left"},[(0,s.bF)(r,{icon:["fas","check-circle"],class:"text-green-500 mb-2"}),t[47]||(t[47]=(0,s.Lk)("h4",{class:"font-medium text-gray-900 mb-1"},"เปิดใช้งานทั้งหมด",-1)),t[48]||(t[48]=(0,s.Lk)("p",{class:"text-sm text-gray-600"},"เปิดใช้งาน Builder Items ทั้งหมด",-1))]),(0,s.Lk)("button",{onClick:es,class:"p-4 border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-left"},[(0,s.bF)(r,{icon:["fas","times-circle"],class:"text-red-500 mb-2"}),t[49]||(t[49]=(0,s.Lk)("h4",{class:"font-medium text-gray-900 mb-1"},"ปิดใช้งานทั้งหมด",-1)),t[50]||(t[50]=(0,s.Lk)("p",{class:"text-sm text-gray-600"},"ปิดใช้งาน Builder Items ทั้งหมด",-1))]),(0,s.Lk)("button",{onClick:ts,class:"p-4 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors text-left"},[(0,s.bF)(r,{icon:["fas","sort-numeric-down"],class:"text-blue-500 mb-2"}),t[51]||(t[51]=(0,s.Lk)("h4",{class:"font-medium text-gray-900 mb-1"},"จัดเรียงลำดับใหม่",-1)),t[52]||(t[52]=(0,s.Lk)("p",{class:"text-sm text-gray-600"},"จัดเรียงลำดับตามหมวดหมู่",-1))])])]),(0,s.Lk)("div",$e,[(0,s.Lk)("h3",Oe,[(0,s.bF)(r,{icon:["fas","chart-bar"],class:"mr-2 text-indigo-500"}),t[53]||(t[53]=(0,s.eW)(" สถิติการใช้งาน "))]),(0,s.Lk)("div",je,[(0,s.Lk)("div",null,[t[54]||(t[54]=(0,s.Lk)("h4",{class:"font-medium text-gray-900 mb-3"},"จำนวนตามหมวดหมู่",-1)),(0,s.Lk)("div",Pe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Cr.value,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e._id,class:"flex justify-between items-center"},[(0,s.Lk)("span",Te,(0,i.v_)(e.displayName),1),(0,s.Lk)("span",Re,(0,i.v_)(Or(e.name).length),1)])))),128))])]),(0,s.Lk)("div",null,[t[58]||(t[58]=(0,s.Lk)("h4",{class:"font-medium text-gray-900 mb-3"},"สถานะการใช้งาน",-1)),(0,s.Lk)("div",De,[(0,s.Lk)("div",Ue,[t[55]||(t[55]=(0,s.Lk)("span",{class:"text-sm text-gray-600"},"ใช้งานได้",-1)),(0,s.Lk)("span",Ke,(0,i.v_)(Sr.value.active),1)]),(0,s.Lk)("div",qe,[t[56]||(t[56]=(0,s.Lk)("span",{class:"text-sm text-gray-600"},"ปิดใช้งาน",-1)),(0,s.Lk)("span",Ne,(0,i.v_)(Sr.value.total-Sr.value.active),1)]),(0,s.Lk)("div",We,[t[57]||(t[57]=(0,s.Lk)("span",{class:"text-sm text-gray-600"},"Pin ไว้",-1)),(0,s.Lk)("span",Ae,(0,i.v_)(Sr.value.pinned),1)])])]),(0,s.Lk)("div",null,[t[63]||(t[63]=(0,s.Lk)("h4",{class:"font-medium text-gray-900 mb-3"},"สถานะ Component Files",-1)),(0,s.Lk)("div",Ve,[(0,s.Lk)("div",Be,[t[59]||(t[59]=(0,s.Lk)("span",{class:"text-sm text-gray-600"},"Elements ทั้งหมด",-1)),(0,s.Lk)("span",Xe,(0,i.v_)(Sr.value.components.total),1)]),(0,s.Lk)("div",ze,[t[60]||(t[60]=(0,s.Lk)("span",{class:"text-sm text-gray-600"},"มี Component",-1)),(0,s.Lk)("span",Je,(0,i.v_)(Sr.value.components.existing),1)]),(0,s.Lk)("div",Me,[t[61]||(t[61]=(0,s.Lk)("span",{class:"text-sm text-gray-600"},"ไม่มี Component",-1)),(0,s.Lk)("span",Qe,(0,i.v_)(Sr.value.components.missing),1)]),(0,s.Lk)("div",He,[t[62]||(t[62]=(0,s.Lk)("span",{class:"text-sm text-gray-600"},"ความครบถ้วน",-1)),(0,s.Lk)("div",Ge,[(0,s.Lk)("div",Ye,[(0,s.Lk)("div",{class:"bg-green-600 h-2 rounded-full transition-all duration-300",style:(0,i.Tr)({width:`${Sr.value.components.percentage}%`})},null,4)]),(0,s.Lk)("span",Ze,(0,i.v_)(Sr.value.components.percentage)+"%",1)])])])])])])])):"categories"!==mr.value&&"manage"!==mr.value?((0,s.uX)(),(0,s.CE)("div",et,[(0,s.Lk)("div",tt,[(0,s.Lk)("div",rt,[(0,s.Lk)("div",st,[t[65]||(t[65]=(0,s.Lk)("label",{class:"text-sm font-medium text-gray-700"},"สถานะ:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>gr.value=e),class:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},t[64]||(t[64]=[(0,s.Lk)("option",{value:""},"ทั้งหมด",-1),(0,s.Lk)("option",{value:"true"},"ใช้งานได้",-1),(0,s.Lk)("option",{value:"false"},"ปิดใช้งาน",-1)]),512),[[l.u1,gr.value]])]),(0,s.Lk)("div",ot,[t[67]||(t[67]=(0,s.Lk)("label",{class:"text-sm font-medium text-gray-700"},"ประเภท:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>fr.value=e),class:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},t[66]||(t[66]=[(0,s.Lk)("option",{value:""},"ทั้งหมด",-1),(0,s.Lk)("option",{value:"folder"},"โฟลเดอร์",-1),(0,s.Lk)("option",{value:"element"},"องค์ประกอบ",-1)]),512),[[l.u1,fr.value]])]),(0,s.Lk)("div",nt,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>vr.value=e),type:"text",placeholder:"ค้นหา...",class:"border border-gray-300 rounded-md px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 w-64"},null,512),[[l.Jo,vr.value]])])])]),a.value?((0,s.uX)(),(0,s.CE)("div",at,[(0,s.bF)(r,{icon:["fas","spinner"],class:"h-8 w-8 text-gray-400 animate-spin"}),t[68]||(t[68]=(0,s.Lk)("p",{class:"text-gray-500 mt-2"},"กำลังโหลดข้อมูล...",-1))])):0===$r.value.length?((0,s.uX)(),(0,s.CE)("div",it,[(0,s.Lk)("div",lt,[(0,s.bF)(r,{icon:["fas","cube"],class:"h-8 w-8 text-gray-400"})]),t[69]||(t[69]=(0,s.Lk)("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"ไม่พบข้อมูล",-1)),t[70]||(t[70]=(0,s.Lk)("p",{class:"text-sm text-gray-500"},"ไม่มี Builder Item ที่ตรงกับเงื่อนไขการค้นหา",-1))])):((0,s.uX)(),(0,s.CE)("div",ct,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)($r.value,((e,o)=>((0,s.uX)(),(0,s.CE)("div",{key:e._id||e.id,class:"bg-white rounded-xl border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden group"},[(0,s.Lk)("div",ut,[(0,s.Lk)("div",dt,[(0,s.Lk)("div",pt,[(0,s.Lk)("div",{class:"w-12 h-12 rounded-lg flex items-center justify-center transition-colors duration-300",style:(0,i.Tr)({backgroundColor:`${Jr(e.category)}15`,color:Jr(e.category)})},[(0,s.bF)(r,{icon:["fas",e.icon||"cube"],class:"h-6 w-6"},null,8,["icon"])],4)]),(0,s.Lk)("div",mt,[(0,s.Lk)("div",gt,[(0,s.Lk)("div",null,[(0,s.Lk)("h3",ft,(0,i.v_)(e.name),1),(0,s.Lk)("p",vt,(0,i.v_)(e.description||"ไม่มีคำอธิบาย"),1)]),(0,s.Lk)("div",bt,[(0,s.Lk)("button",{onClick:t=>qr(e),class:(0,i.C4)(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2",e.status?"bg-green-500 focus:ring-green-500":"bg-gray-200 focus:ring-gray-500"])},[(0,s.Lk)("span",{class:(0,i.C4)(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",e.status?"translate-x-5":"translate-x-0"])},null,2)],10,yt),(0,s.Lk)("button",{onClick:t=>Nr(e),class:(0,i.C4)(["p-1.5 rounded-lg transition-all duration-200",e.pin?"text-amber-600 bg-amber-50 hover:bg-amber-100":"text-gray-400 hover:bg-gray-50"])},[(0,s.bF)(r,{icon:["fas","thumbtack"],class:"h-4 w-4"})],10,xt)])])])])]),(0,s.Lk)("div",kt,[(0,s.Lk)("div",ht,[(0,s.Lk)("div",Lt,[(0,s.Lk)("div",wt,[t[71]||(t[71]=(0,s.Lk)("span",{class:"text-gray-600"},"Type:",-1)),(0,s.Lk)("code",_t,(0,i.v_)(e.type),1)]),(0,s.Lk)("div",Ct,[t[72]||(t[72]=(0,s.Lk)("span",{class:"text-gray-600"},"หมวดหมู่:",-1)),(0,s.Lk)("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",style:(0,i.Tr)({backgroundColor:`${Jr(e.category)}15`,color:Jr(e.category)})},(0,i.v_)(zr(e.category)),5)])]),(0,s.Lk)("div",Ft,[e.isFolder?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",It,[t[73]||(t[73]=(0,s.Lk)("span",{class:"text-gray-600"},"Component:",-1)),(0,s.Lk)("div",Et,[(0,s.Lk)("span",{class:(0,i.C4)(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",Qr(e.type).exists?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},[(0,s.bF)(r,{icon:["fas",Qr(e.type).exists?"check-circle":"times-circle"],class:"w-3 h-3 mr-1"},null,8,["icon"]),(0,s.eW)(" "+(0,i.v_)(Qr(e.type).exists?"มี":"ไม่มี"),1)],2),Qr(e.type).exists?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t=>Hr(Qr(e.type).path),class:"text-blue-500 hover:text-blue-700 transition-colors",title:"ดูไฟล์ component"},[(0,s.bF)(r,{icon:["fas","external-link-alt"],class:"w-3 h-3"})],8,St)):(0,s.Q3)("",!0)])])),(0,s.Lk)("div",$t,[t[74]||(t[74]=(0,s.Lk)("span",{class:"text-gray-600"},"ลำดับ:",-1)),(0,s.Lk)("div",Ot,[(0,s.Lk)("button",{onClick:e=>Wr(o),disabled:0===o,class:"px-1.5 py-0.5 text-gray-400 hover:text-blue-600 disabled:opacity-30 disabled:cursor-not-allowed border-r border-gray-200"},[(0,s.bF)(r,{icon:["fas","chevron-up"],class:"h-3 w-3"})],8,jt),(0,s.Lk)("span",Pt,(0,i.v_)(e.sort_order||o+1),1),(0,s.Lk)("button",{onClick:e=>Ar(o),disabled:o===$r.value.length-1,class:"px-1.5 py-0.5 text-gray-400 hover:text-blue-600 disabled:opacity-30 disabled:cursor-not-allowed border-l border-gray-200"},[(0,s.bF)(r,{icon:["fas","chevron-down"],class:"h-3 w-3"})],8,Tt)])])])])]),(0,s.Lk)("div",Rt,[(0,s.Lk)("button",{onClick:t=>Br(e),class:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium rounded-lg text-blue-700 bg-blue-50 hover:bg-blue-100 transition-colors",title:"แก้ไข"},[(0,s.bF)(r,{icon:["fas","edit"],class:"h-3.5 w-3.5 mr-1"}),t[75]||(t[75]=(0,s.eW)(" แก้ไข "))],8,Dt),(0,s.Lk)("button",{onClick:t=>Kr(e),class:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium rounded-lg text-green-700 bg-green-50 hover:bg-green-100 transition-colors",title:"คัดลอก"},[(0,s.bF)(r,{icon:["fas","copy"],class:"h-3.5 w-3.5 mr-1"}),t[76]||(t[76]=(0,s.eW)(" คัดลอก "))],8,Ut),(0,s.Lk)("button",{onClick:t=>Ur(e),class:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100 transition-colors",title:"ลบ"},[(0,s.bF)(r,{icon:["fas","trash"],class:"h-3.5 w-3.5 mr-1"}),t[77]||(t[77]=(0,s.eW)(" ลบ "))],8,Kt)])])))),128))]))])):(0,s.Q3)("",!0)]),br.value||yr.value?((0,s.uX)(),(0,s.CE)("div",qt,[(0,s.Lk)("div",Nt,[(0,s.Lk)("div",Wt,[(0,s.Lk)("div",At,[(0,s.Lk)("h3",Vt,(0,i.v_)(br.value?"เพิ่ม Builder Item":"แก้ไข Builder Item"),1),(0,s.Lk)("button",{onClick:Xr,class:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md p-1"},[(0,s.bF)(r,{icon:["fas","times"],class:"h-5 w-5"})])])]),(0,s.Lk)("div",Bt,[(0,s.Lk)("form",{onSubmit:(0,l.D$)(Dr,["prevent"]),class:"space-y-4"},[(0,s.Lk)("div",Xt,[(0,s.Lk)("div",null,[t[78]||(t[78]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ชื่อ Item",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>wr.value.name=e),type:"text",required:"",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[l.Jo,wr.value.name]])]),(0,s.Lk)("div",null,[t[79]||(t[79]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>wr.value.type=e),type:"text",required:"",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[l.Jo,wr.value.type]])])]),(0,s.Lk)("div",null,[t[80]||(t[80]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"คำอธิบาย",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>wr.value.description=e),rows:"3",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[l.Jo,wr.value.description]])]),(0,s.Lk)("div",zt,[(0,s.Lk)("div",null,[t[82]||(t[82]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"หมวดหมู่",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>wr.value.category=e),required:"",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[81]||(t[81]=(0,s.Lk)("option",{value:""},"เลือกหมวดหมู่",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Cr.value,(e=>((0,s.uX)(),(0,s.CE)("option",{key:e._id,value:e.name},(0,i.v_)(e.displayName),9,Jt)))),128))],512),[[l.u1,wr.value.category]])]),(0,s.Lk)("div",null,[t[83]||(t[83]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Icon",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>wr.value.icon=e),type:"text",placeholder:"ชื่อ icon (เช่น cube, image)",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[l.Jo,wr.value.icon]])])]),(0,s.Lk)("div",Mt,[(0,s.Lk)("div",Qt,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>wr.value.status=e),type:"checkbox",class:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[l.lH,wr.value.status]]),t[84]||(t[84]=(0,s.Lk)("label",{class:"ml-2 text-sm text-gray-700"},"ใช้งานได้",-1))]),(0,s.Lk)("div",Ht,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>wr.value.pin=e),type:"checkbox",class:"h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500"},null,512),[[l.lH,wr.value.pin]]),t[85]||(t[85]=(0,s.Lk)("label",{class:"ml-2 text-sm text-gray-700"},"Pin ไว้",-1))]),(0,s.Lk)("div",Gt,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>wr.value.isFolder=e),type:"checkbox",class:"h-4 w-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"},null,512),[[l.lH,wr.value.isFolder]]),t[86]||(t[86]=(0,s.Lk)("label",{class:"ml-2 text-sm text-gray-700"},"เป็นโฟลเดอร์",-1))])]),(0,s.Lk)("div",null,[t[87]||(t[87]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ลำดับการแสดงผล",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>wr.value.sort_order=e),type:"number",min:"0",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[l.Jo,wr.value.sort_order]])])],32)]),(0,s.Lk)("div",Yt,[(0,s.Lk)("button",{onClick:Xr,type:"button",class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors"}," ยกเลิก "),(0,s.Lk)("button",{onClick:Dr,type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"},(0,i.v_)(br.value?"เพิ่ม":"บันทึก"),1)])])])):(0,s.Q3)("",!0),hr.value?((0,s.uX)(),(0,s.CE)("div",Zt,[(0,s.Lk)("div",er,[(0,s.Lk)("div",tr,[(0,s.Lk)("div",rr,[(0,s.Lk)("h3",sr,(0,i.v_)(Lr.value?"แก้ไขหมวดหมู่":"เพิ่มหมวดหมู่ใหม่"),1),(0,s.Lk)("button",{onClick:ls,class:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md p-1"},[(0,s.bF)(r,{icon:["fas","times"],class:"h-5 w-5"})])])]),(0,s.Lk)("div",or,[(0,s.Lk)("form",{onSubmit:(0,l.D$)(os,["prevent"]),class:"space-y-4"},[(0,s.Lk)("div",null,[t[88]||(t[88]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ชื่อหมวดหมู่ (Key)",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>_r.value.name=e),type:"text",required:"",disabled:Lr.value&&as(Lr.value.name),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"เช่น custom_category"},null,8,nr),[[l.Jo,_r.value.name]]),t[89]||(t[89]=(0,s.Lk)("p",{class:"text-xs text-gray-500 mt-1"},"ใช้สำหรับระบบ (ภาษาอังกฤษ, ไม่มีช่องว่าง)",-1))]),(0,s.Lk)("div",null,[t[90]||(t[90]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ชื่อแสดงผล",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>_r.value.displayName=e),type:"text",required:"",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"เช่น หมวดหมู่พิเศษ"},null,512),[[l.Jo,_r.value.displayName]])]),(0,s.Lk)("div",null,[t[91]||(t[91]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"คำอธิบาย",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[17]||(t[17]=e=>_r.value.description=e),rows:"3",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"อธิบายหมวดหมู่นี้"},null,512),[[l.Jo,_r.value.description]])]),(0,s.Lk)("div",ar,[(0,s.Lk)("div",null,[t[92]||(t[92]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Icon",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>_r.value.icon=e),type:"text",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"เช่น star, cog"},null,512),[[l.Jo,_r.value.icon]]),t[93]||(t[93]=(0,s.Lk)("p",{class:"text-xs text-gray-500 mt-1"},"ชื่อ FontAwesome icon",-1))]),(0,s.Lk)("div",null,[t[94]||(t[94]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"สี",-1)),(0,s.Lk)("div",ir,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>_r.value.color=e),type:"color",class:"w-12 h-10 border border-gray-300 rounded-md cursor-pointer"},null,512),[[l.Jo,_r.value.color]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>_r.value.color=e),type:"text",class:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"#6b7280"},null,512),[[l.Jo,_r.value.color]])])])]),(0,s.Lk)("div",null,[t[95]||(t[95]=(0,s.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"ลำดับการแสดงผล",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>_r.value.sortOrder=e),type:"number",min:"0",class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"},null,512),[[l.Jo,_r.value.sortOrder]])]),(0,s.Lk)("div",lr,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>_r.value.active=e),type:"checkbox",class:"h-4 w-4 text-green-600 border-gray-300 rounded focus:ring-green-500"},null,512),[[l.lH,_r.value.active]]),t[96]||(t[96]=(0,s.Lk)("label",{class:"ml-2 text-sm text-gray-700"},"เปิดใช้งาน",-1))])],32)]),(0,s.Lk)("div",cr,[(0,s.Lk)("button",{onClick:ls,type:"button",class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors"}," ยกเลิก "),(0,s.Lk)("button",{onClick:os,type:"submit",class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},(0,i.v_)(Lr.value?"บันทึก":"เพิ่ม"),1)])])])):(0,s.Q3)("",!0)])}}},dr=r(64621);const pr=(0,dr.A)(ur,[["__scopeId","data-v-37acb62e"]]);var mr=pr,gr={name:"GeneralConfig",components:{Config:mr},data(){return{login:u.A.get("session","login")}},methods:{showAlert(){this.$swal("Hello Vue world!!!")}},setup(){const e=(0,a.lq)(),t=e.meta.title;(0,n.K7)(t)}};const fr=(0,dr.A)(gr,[["render",o]]);var vr=fr},25953:function(e,t,r){"use strict";r.d(t,{Aj:function(){return u},I2:function(){return i},MI:function(){return o},uQ:function(){return l}});r(44114),r(17642),r(58004),r(33853),r(45876),r(32475),r(15024),r(31698),r(98992),r(54520),r(72577),r(3949),r(8872);var s=r(40475);async function o(){const e=new Set,t=await i();function r(t){t.forEach((t=>{t.children&&Array.isArray(t.children)&&t.children.length>0?r(t.children):t.type&&"folder"!==t.type&&e.add(t.type)}))}return r(t),console.log("All item types:",Array.from(e)),Array.from(e)}async function n(e){const t={method:"find",args:[{}],sort:{sort_order:1,created_at:-1},paging:{page:1,limit:1e3}},r=await fetch("https://gateway.cloudrestfulapi.com/api/builder_item/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":e},body:JSON.stringify(t)});if(!r.ok)throw new Error(`API Error: ${r.status}`);const s=await r.json();return s.data||[]}function a(e){const t={};e.forEach((e=>{t[e.id]={...e,children:[]}}));const r=[];return e.forEach((e=>{e.parent&&t[e.parent]?t[e.parent].children.push(t[e.id]):e.parent||r.push(t[e.id])})),r}async function i(){try{const e=s.A.get("configs"),t=e?.key;if(!t)throw new Error("ไม่พบ client-token-key ใน configs");const r=await n(t);return a(r)}catch(e){return console.error("โหลด builder items ไม่สำเร็จ",e),[]}}async function l(e){const t=await i(),r=t.find((t=>t.category===e&&t.isFolder));return r&&Array.isArray(r.children)?r.children:[]}function c(e){return e.reduce(((e,t)=>(e.push(t),t.children&&t.children.length&&(e=e.concat(c(t.children))),e)),[])}async function u(){try{const e=await i(),t=c(e);return t.filter((e=>!0===e.pin))}catch(e){return console.error("โหลด quick access items ไม่สำเร็จ",e),[]}}},28416:function(e,t,r){var s={"./address.vue":[20663,3533],"./authen.vue":[75210,578],"./button.vue":[78287,6805],"./checkbox.vue":[59244,9198],"./checkout_payment.vue":[78182,8614],"./column.vue":[96062,411],"./datetime.vue":[55429,958],"./enroll_counter.vue":[13178,2288],"./gallery.vue":[35070,7615],"./header.vue":[61964,6730],"./hidden.vue":[70448,1405],"./html.vue":[89037,9814],"./iframe_internal.vue":[28515,8777],"./image.vue":[2942,3700,5850,5372,5350],"./input.vue":[36095,2129],"./lesson_categories.vue":[86576,9630],"./lesson_categories_dropdown.vue":[65139,5284],"./lesson_widget_usage.vue":[43358,1490],"./navigation.vue":[35823,683],"./news_ticker.vue":[12550,1051],"./note.vue":[89651,57],"./order_counter.vue":[82201,368],"./paragraph.vue":[41347,3700,5850,5372,7830,9331],"./popup.vue":[9140,7767],"./preview.vue":[36607,3700,5850,5372,9217],"./radiobox.vue":[40229,6353],"./row.vue":[49081,7313],"./select.vue":[4784,8029],"./slideshow.vue":[59109,3700,5850,5372,2733],"./table.vue":[68398,8961],"./textarea.vue":[43715,1859],"./upload.vue":[56178,4854],"./user_nav.vue":[52069,2646],"./user_profile.vue":[30161,8274],"./usernav.vue":[83443,157],"./video.vue":[88076,3700,5850,5372,4928],"./youtube.vue":[71751,1046]};function o(e){if(!r.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((function(){return r(o)}))}o.keys=function(){return Object.keys(s)},o.id=28416,e.exports=o},91254:function(e,t,r){var s={"./address.vue":[20663,3533],"./authen.vue":[75210,578],"./button.vue":[78287,6805],"./checkbox.vue":[59244,9198],"./checkout_payment.vue":[78182,8614],"./column.vue":[96062,411],"./datetime.vue":[55429,958],"./enroll_counter.vue":[13178,2288],"./gallery.vue":[35070,7615],"./header.vue":[61964,6730],"./hidden.vue":[70448,1405],"./html.vue":[89037,9814],"./iframe_internal.vue":[28515,8777],"./image.vue":[2942,3700,5850,5372,5350],"./input.vue":[36095,2129],"./lesson_categories.vue":[86576,9630],"./lesson_categories_dropdown.vue":[65139,5284],"./lesson_widget_usage.vue":[43358,1490],"./navigation.vue":[35823,683],"./news_ticker.vue":[12550,1051],"./note.vue":[89651,57],"./order_counter.vue":[82201,368],"./paragraph.vue":[41347,3700,5850,5372,7830,9331],"./popup.vue":[9140,7767],"./preview.vue":[36607,3700,5850,5372,9217],"./radiobox.vue":[40229,6353],"./row.vue":[49081,7313],"./select.vue":[4784,8029],"./slideshow.vue":[59109,3700,5850,5372,2733],"./table.vue":[68398,8961],"./textarea.vue":[43715,1859],"./upload.vue":[56178,4854],"./user_nav.vue":[52069,2646],"./user_profile.vue":[30161,8274],"./usernav.vue":[83443,157],"./video.vue":[88076,3700,5850,5372,4928],"./youtube.vue":[71751,1046]};function o(e){if(!r.o(s,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=s[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((function(){return r(o)}))}o.keys=function(){return Object.keys(s)},o.id=91254,e.exports=o},97080:function(e,t,r){"use strict";var s=r(94402).has;e.exports=function(e){return s(e),e}},83789:function(e,t,r){"use strict";var s=r(79306),o=r(28551),n=r(69565),a=r(91291),i=r(1767),l="Invalid size",c=RangeError,u=TypeError,d=Math.max,p=function(e,t){this.set=e,this.size=d(t,0),this.has=s(e.has),this.keys=s(e.keys)};p.prototype={getIterator:function(){return i(o(n(this.keys,this.set)))},includes:function(e){return n(this.has,this.set,e)}},e.exports=function(e){o(e);var t=+e.size;if(t!==t)throw new u(l);var r=a(t);if(r<0)throw new c(l);return new p(e,r)}},40507:function(e,t,r){"use strict";var s=r(69565);e.exports=function(e,t,r){var o,n,a=r?e:e.iterator,i=e.next;while(!(o=s(i,a)).done)if(n=t(o.value),void 0!==n)return n}},89286:function(e,t,r){"use strict";var s=r(94402),o=r(38469),n=s.Set,a=s.add;e.exports=function(e){var t=new n;return o(e,(function(e){a(t,e)})),t}},83440:function(e,t,r){"use strict";var s=r(97080),o=r(94402),n=r(89286),a=r(25170),i=r(83789),l=r(38469),c=r(40507),u=o.has,d=o.remove;e.exports=function(e){var t=s(this),r=i(e),o=n(t);return a(t)<=r.size?l(t,(function(e){r.includes(e)&&d(o,e)})):c(r.getIterator(),(function(e){u(t,e)&&d(o,e)})),o}},94402:function(e,t,r){"use strict";var s=r(79504),o=Set.prototype;e.exports={Set:Set,add:s(o.add),has:s(o.has),remove:s(o["delete"]),proto:o}},68750:function(e,t,r){"use strict";var s=r(97080),o=r(94402),n=r(25170),a=r(83789),i=r(38469),l=r(40507),c=o.Set,u=o.add,d=o.has;e.exports=function(e){var t=s(this),r=a(e),o=new c;return n(t)>r.size?l(r.getIterator(),(function(e){d(t,e)&&u(o,e)})):i(t,(function(e){r.includes(e)&&u(o,e)})),o}},64449:function(e,t,r){"use strict";var s=r(97080),o=r(94402).has,n=r(25170),a=r(83789),i=r(38469),l=r(40507),c=r(9539);e.exports=function(e){var t=s(this),r=a(e);if(n(t)<=r.size)return!1!==i(t,(function(e){if(r.includes(e))return!1}),!0);var u=r.getIterator();return!1!==l(u,(function(e){if(o(t,e))return c(u,"normal",!1)}))}},53838:function(e,t,r){"use strict";var s=r(97080),o=r(25170),n=r(38469),a=r(83789);e.exports=function(e){var t=s(this),r=a(e);return!(o(t)>r.size)&&!1!==n(t,(function(e){if(!r.includes(e))return!1}),!0)}},28527:function(e,t,r){"use strict";var s=r(97080),o=r(94402).has,n=r(25170),a=r(83789),i=r(40507),l=r(9539);e.exports=function(e){var t=s(this),r=a(e);if(n(t)<r.size)return!1;var c=r.getIterator();return!1!==i(c,(function(e){if(!o(t,e))return l(c,"normal",!1)}))}},38469:function(e,t,r){"use strict";var s=r(79504),o=r(40507),n=r(94402),a=n.Set,i=n.proto,l=s(i.forEach),c=s(i.keys),u=c(new a).next;e.exports=function(e,t,r){return r?o({iterator:c(e),next:u},t):l(e,t)}},84916:function(e,t,r){"use strict";var s=r(97751),o=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},n=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};e.exports=function(e,t){var r=s("Set");try{(new r)[e](o(0));try{return(new r)[e](o(-1)),!1}catch(i){if(!t)return!0;try{return(new r)[e](n(-1/0)),!1}catch(l){var a=new r;return a.add(1),a.add(2),t(a[e](n(1/0)))}}}catch(l){return!1}}},25170:function(e,t,r){"use strict";var s=r(46706),o=r(94402);e.exports=s(o.proto,"size","get")||function(e){return e.size}},83650:function(e,t,r){"use strict";var s=r(97080),o=r(94402),n=r(89286),a=r(83789),i=r(40507),l=o.add,c=o.has,u=o.remove;e.exports=function(e){var t=s(this),r=a(e).getIterator(),o=n(t);return i(r,(function(e){c(t,e)?u(o,e):l(o,e)})),o}},44204:function(e,t,r){"use strict";var s=r(97080),o=r(94402).add,n=r(89286),a=r(83789),i=r(40507);e.exports=function(e){var t=s(this),r=a(e).getIterator(),l=n(t);return i(r,(function(e){o(l,e)})),l}},17642:function(e,t,r){"use strict";var s=r(46518),o=r(83440),n=r(84916),a=!n("difference",(function(e){return 0===e.size}));s({target:"Set",proto:!0,real:!0,forced:a},{difference:o})},58004:function(e,t,r){"use strict";var s=r(46518),o=r(79039),n=r(68750),a=r(84916),i=!a("intersection",(function(e){return 2===e.size&&e.has(1)&&e.has(2)}))||o((function(){return"3,2"!==String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))}));s({target:"Set",proto:!0,real:!0,forced:i},{intersection:n})},33853:function(e,t,r){"use strict";var s=r(46518),o=r(64449),n=r(84916),a=!n("isDisjointFrom",(function(e){return!e}));s({target:"Set",proto:!0,real:!0,forced:a},{isDisjointFrom:o})},45876:function(e,t,r){"use strict";var s=r(46518),o=r(53838),n=r(84916),a=!n("isSubsetOf",(function(e){return e}));s({target:"Set",proto:!0,real:!0,forced:a},{isSubsetOf:o})},32475:function(e,t,r){"use strict";var s=r(46518),o=r(28527),n=r(84916),a=!n("isSupersetOf",(function(e){return!e}));s({target:"Set",proto:!0,real:!0,forced:a},{isSupersetOf:o})},15024:function(e,t,r){"use strict";var s=r(46518),o=r(83650),n=r(84916);s({target:"Set",proto:!0,real:!0,forced:!n("symmetricDifference")},{symmetricDifference:o})},31698:function(e,t,r){"use strict";var s=r(46518),o=r(44204),n=r(84916);s({target:"Set",proto:!0,real:!0,forced:!n("union")},{union:o})}}]);
//# sourceMappingURL=690.b43efa26.js.map