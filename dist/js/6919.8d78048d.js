"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[6919],{56919:function(e,t,s){s.r(t),s.d(t,{default:function(){return Jt}});var a=s(20641);function o(e,t,s,o,l,i){return(0,a.uX)(),(0,a.Wv)((0,a.$y)(i.componentName))}var l=s(52968),i=s(75220),r=s(40475),n=s(90033);const d={key:0,class:"text-center"},c={key:2,class:"flex-1 pb-8 bg-gray-100 pb-5"},m={class:"mx-auto left-5"},h={class:"tab-folder flex border-gray-400 bg-gray-500 pt-5 pl-2 md:pl-6"},u=["onClick"],p={class:"flex items-center"},g={class:"text-sm text-gray-600 hidden md:block"},f={key:0,class:"absolute bottom-0 left-0 w-full"},v={class:"mx-auto px-6 sm:px-6 lg:px-6"};function b(e,t,s,o,l,i){const r=(0,a.g2)("Loader"),b=(0,a.g2)("Subhead"),w=(0,a.g2)("font-awesome-icon"),y=(0,a.g2)("Template"),k=(0,a.g2)("User"),x=(0,a.g2)("Email"),L=(0,a.g2)("Menu"),T=(0,a.g2)("Config");return(0,a.uX)(),(0,a.CE)(a.FK,null,[l.loading_sources?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",d,[(0,a.bF)(r)])),l.loading_sources?((0,a.uX)(),(0,a.Wv)(b,{key:1,navigation:[{name:"หน้าเว็บ",link:"/cms/content#page",style:"globe",class:"primary-btn",visible:!0,type:"button"}],onOpenPopup:e.openPopup},null,8,["onOpenPopup"])):(0,a.Q3)("",!0),l.loading_sources?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",m,[(0,a.Lk)("div",h,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.tabs,(e=>((0,a.uX)(),(0,a.CE)("div",{class:(0,n.C4)(["tab-folder-item cursor-pointer py-2 px-3 text-gray-700 hover:text-blue-600 transition-colors duration-200 bg-opacity-100 relative rounded-t-lg bg-gray-100 mr-1",{"bg-gray-100 text-blue-600":l.selectedTab===e.codeName,"bg-gray-100 bg-opacity-30":l.selectedTab!==e.codeName}]),key:e.codeName,onClick:t=>i.selectTab(e.codeName)},[(0,a.Lk)("div",p,[(0,a.bF)(w,{icon:["fas",e.icon],class:"mr-1 hidden md:block"},null,8,["icon"]),(0,a.Lk)("div",null,(0,n.v_)(e.name),1)]),(0,a.Lk)("div",g,(0,n.v_)(e.subText),1),l.selectedTab===e.codeName?((0,a.uX)(),(0,a.CE)("div",f)):(0,a.Q3)("",!0)],10,u)))),128))]),(0,a.Lk)("div",v,["template"===l.selectedTab?((0,a.uX)(),(0,a.Wv)(y,{key:0,itemType:l.selectedTab},null,8,["itemType"])):(0,a.Q3)("",!0),"user"===l.selectedTab?((0,a.uX)(),(0,a.Wv)(k,{key:1,itemType:l.selectedTab},null,8,["itemType"])):(0,a.Q3)("",!0),"email"===l.selectedTab?((0,a.uX)(),(0,a.Wv)(x,{key:2,itemType:l.selectedTab},null,8,["itemType"])):(0,a.Q3)("",!0),"menu"===l.selectedTab?((0,a.uX)(),(0,a.Wv)(L,{key:3,itemType:l.selectedTab},null,8,["itemType"])):(0,a.Q3)("",!0),"config"===l.selectedTab?((0,a.uX)(),(0,a.Wv)(T,{key:4,itemType:l.selectedTab},null,8,["itemType"])):(0,a.Q3)("",!0)])])])):(0,a.Q3)("",!0)],64)}s(98992),s(37550);var w=s(75435),y=s(87814),k=s(53751);const x={class:"my-5"},L={class:"px-2 pb-4 flex justify-between items-center"},T={class:"flex flex-col md:flex-row border-b"},C={class:"w-full md:w-9/12 p-2 order-2 md:order-1"},I={class:"bg-white shadow"},P={class:"w-full md:w-3/12 p-2 order-1 md:order-2"},$={class:"relative bg-white shadow p-5"},E={class:"flex"},_={class:"w-1/2 pr-2"},X={class:"w-1/2 pl-2"},F={key:0,class:"panel shadow"},D={class:"p-2 flex justify-between items-center"},S=["onClick"],O={class:"flex flex-col md:flex-row border-b"},A={class:"w-full md:w-9/12 p-2 order-2 md:order-1"},N={class:"bg-white shadow py-10"},Q={class:"w-full md:w-3/12 p-2 order-1 md:order-2"},H={class:"relative bg-white shadow p-5"},K={class:"flex"},U={class:"w-1/2 pr-2"},W={class:"w-1/2 pl-2"},B={key:0,class:"panel shadow"},R={class:"p-2 flex justify-between items-center"},V=["onClick"],q={class:"flex flex-col md:flex-row border-b"},j={class:"w-full md:w-9/12 p-2 order-2 md:order-1"},J={class:"bg-white shadow"},M={class:"w-full md:w-3/12 p-2 order-1 md:order-2"},G={class:"relative bg-white shadow p-5"},z={class:"flex"},Y={class:"w-1/2 pr-2"},Z={class:"w-1/2 pl-2"},ee={key:0,class:"panel shadow"},te={class:"p-2 flex justify-between items-center"},se=["onClick"],ae={class:"flex flex-col md:flex-row border-b"},oe={class:"w-full md:w-9/12 p-2 order-2 md:order-1"},le={class:"bg-white shadow"},ie={class:"w-full md:w-3/12 p-2 order-1 md:order-2"},re={class:"relative bg-white shadow p-5"},ne={class:"flex"},de={class:"w-1/2 pr-2"},ce={class:"w-1/2 pl-2"},me={key:0,class:"panel shadow"},he={class:"p-2 flex justify-between items-center"},ue=["onClick"];function pe(e,t,s,o,l,i){const r=(0,a.g2)("Render"),d=(0,a.g2)("Navigation");return(0,a.uX)(),(0,a.CE)("div",x,[(0,a.Lk)("div",L,[t[18]||(t[18]=(0,a.Lk)("div",null,[(0,a.Lk)("h1",{class:"text-lg font-bold"},"Header"),(0,a.Lk)("p",{class:"mt-2 text-gray-600"},"This is the main body content section.")],-1)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.saveConfig&&i.saveConfig(...e)),class:"bg-blue-500 text-white px-4 py-2 rounded"},t[17]||(t[17]=[(0,a.Lk)("i",{class:"fa fa-save"},null,-1),(0,a.eW)(" บันทึกข้อมูล ")]))]),(0,a.Lk)("div",T,[(0,a.Lk)("div",C,[(0,a.Lk)("header",I,[l.load_hostname?((0,a.uX)(),(0,a.Wv)(r,{key:l.selectedItems.header,dataItem:l.selectedItems.header,mode:"id"},null,8,["dataItem"])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",P,[(0,a.Lk)("header",$,[t[20]||(t[20]=(0,a.Lk)("h1",{class:"text-lg font-bold"},"Header Section",-1)),(0,a.Lk)("div",E,[(0,a.Lk)("div",_,[(0,a.Lk)("p",null,(0,n.v_)(i.getPageTitle(l.selectedItems.header)),1)]),(0,a.Lk)("div",X,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.searchTerms.header=e),onFocus:t[2]||(t[2]=e=>{l.showPanels.header=!0,i.filterOptions("header")}),onInput:t[3]||(t[3]=e=>i.filterOptions("header")),class:"w-full border rounded p-2",placeholder:"ค้นหา Header..."},null,544),[[k.Jo,l.searchTerms.header]]),l.showPanels.header?((0,a.uX)(),(0,a.CE)("div",F,[(0,a.Lk)("div",D,[t[19]||(t[19]=(0,a.Lk)("h2",{class:"font-bold"},"Header Options",-1)),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.hidePanel("header")),class:"text-red-500"},"ปิด")]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.filteredLists.header,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,onClick:(0,k.D$)((t=>i.selectPage(e,"header")),["stop"]),class:"p-2 hover:bg-gray-200 cursor-pointer"},(0,n.v_)(e.title),9,S)))),128))])):(0,a.Q3)("",!0)])])])])]),(0,a.Lk)("div",O,[(0,a.Lk)("div",A,[(0,a.Lk)("header",N,[l.load_hostname?((0,a.uX)(),(0,a.Wv)(d,{key:l.selectedItems.navigator,data:l.menuData,mode:"id"},null,8,["data"])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Q,[(0,a.Lk)("header",H,[t[22]||(t[22]=(0,a.Lk)("h1",{class:"text-lg font-bold"},"navigator Section",-1)),(0,a.Lk)("div",K,[(0,a.Lk)("div",U,[(0,a.Lk)("p",null,(0,n.v_)(i.getPageTitle(l.selectedItems.navigator)),1)]),(0,a.Lk)("div",W,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>l.searchTerms.navigator=e),onFocus:t[6]||(t[6]=e=>{l.showPanels.navigator=!0,i.filterOptions("navigator")}),onInput:t[7]||(t[7]=e=>i.filterOptions("navigator")),class:"w-full border rounded p-2",placeholder:"ค้นหา navigator..."},null,544),[[k.Jo,l.searchTerms.navigator]]),l.showPanels.navigator?((0,a.uX)(),(0,a.CE)("div",B,[(0,a.Lk)("div",R,[t[21]||(t[21]=(0,a.Lk)("h2",{class:"font-bold"},"navigator Options",-1)),(0,a.Lk)("button",{onClick:t[8]||(t[8]=e=>i.hidePanel("navigator")),class:"text-red-500"},"ปิด")]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.filteredLists.navigator,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,onClick:(0,k.D$)((t=>i.selectPage(e,"navigator")),["stop"]),class:"p-2 hover:bg-gray-200 cursor-pointer"},(0,n.v_)(e.title),9,V)))),128))])):(0,a.Q3)("",!0)])])])])]),(0,a.Lk)("div",q,[(0,a.Lk)("div",j,[(0,a.Lk)("header",J,[l.load_hostname?((0,a.uX)(),(0,a.Wv)(r,{key:l.selectedItems.homepage,dataItem:l.selectedItems.homepage,mode:"id"},null,8,["dataItem"])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",M,[(0,a.Lk)("header",G,[t[24]||(t[24]=(0,a.Lk)("h1",{class:"text-lg font-bold"},"Home Section",-1)),(0,a.Lk)("div",z,[(0,a.Lk)("div",Y,[(0,a.Lk)("p",null,(0,n.v_)(i.getPageTitle(l.selectedItems.homepage)),1)]),(0,a.Lk)("div",Z,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>l.searchTerms.homepage=e),onFocus:t[10]||(t[10]=e=>{l.showPanels.homepage=!0,i.filterOptions("homepage")}),onInput:t[11]||(t[11]=e=>i.filterOptions("homepage")),class:"w-full border rounded p-2",placeholder:"ค้นหา Home..."},null,544),[[k.Jo,l.searchTerms.homepage]]),l.showPanels.homepage?((0,a.uX)(),(0,a.CE)("div",ee,[(0,a.Lk)("div",te,[t[23]||(t[23]=(0,a.Lk)("h2",{class:"font-bold"},"Home Options",-1)),(0,a.Lk)("button",{onClick:t[12]||(t[12]=e=>i.hidePanel("homepage")),class:"text-red-500"},"ปิด")]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.filteredLists.homepage,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,onClick:(0,k.D$)((t=>i.selectPage(e,"homepage")),["stop"]),class:"p-2 hover:bg-gray-200 cursor-pointer"},(0,n.v_)(e.title),9,se)))),128))])):(0,a.Q3)("",!0)])])])])]),(0,a.Lk)("div",ae,[(0,a.Lk)("div",oe,[(0,a.Lk)("header",le,[l.load_hostname?((0,a.uX)(),(0,a.Wv)(r,{key:l.selectedItems.footer,dataItem:l.selectedItems.footer,mode:"id"},null,8,["dataItem"])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",ie,[(0,a.Lk)("header",re,[t[26]||(t[26]=(0,a.Lk)("h1",{class:"text-lg font-bold"},"Footer Section",-1)),(0,a.Lk)("div",ne,[(0,a.Lk)("div",de,[(0,a.Lk)("p",null,(0,n.v_)(i.getPageTitle(l.selectedItems.footer)),1)]),(0,a.Lk)("div",ce,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>l.searchTerms.footer=e),onFocus:t[14]||(t[14]=e=>{l.showPanels.footer=!0,i.filterOptions("footer")}),onInput:t[15]||(t[15]=e=>i.filterOptions("footer")),class:"w-full border rounded p-2",placeholder:"ค้นหา Footer..."},null,544),[[k.Jo,l.searchTerms.footer]]),l.showPanels.footer?((0,a.uX)(),(0,a.CE)("div",me,[(0,a.Lk)("div",he,[t[25]||(t[25]=(0,a.Lk)("h2",{class:"font-bold"},"Footer Options",-1)),(0,a.Lk)("button",{onClick:t[16]||(t[16]=e=>i.hidePanel("footer")),class:"text-red-500"},"ปิด")]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.filteredLists.footer,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,onClick:(0,k.D$)((t=>i.selectPage(e,"footer")),["stop"]),class:"p-2 hover:bg-gray-200 cursor-pointer"},(0,n.v_)(e.title),9,ue)))),128))])):(0,a.Q3)("",!0)])])])])])])}s(54520),s(72577);var ge=s(21810),fe=s(97132),ve={name:"ThemeComponent",data(){const e=r.A.get("session","token"),t=r.A.get("session");return{accessToken:e,session:t,configs:r.A.get("configs"),hostkey:this.$Key,loading_sources:!0,load_hostname:!1,limitItem:50,limitOptions:[10,20,50,100,200,500,1e3,2e3],currentPage:1,totalPages:0,totalItems:0,searchTerm:"",navigatorData:[],pageList:[],menuData:{icon:"list",description:"Web Menu",type:"navigation",name:"เมนู",mobile:!0,tablet:!0,laptop:!0,desktop:!0,position:"relative",customClass:"",customId:"",uid:"1707689005824",menu:"",menuName:"DOA Menu",alignment:"center",display:"horizontal",fontColor:"text-gray-900",hoverColor:"text-orange-600",itemSpace:3,paddingTop:"5"},selectedItems:{header:"",navigator:"",homepage:"",footer:"",welcomeEmail:"",recoveryPassword:"",otp:"",general:""},theme:{homepage:"",header:"",subheader:"",footer:"",navigator:"",dashboard:"",checkout:"",login:"",resetpassword:"",changepassword:"",emailTemplates:{welcomeEmail:"",recoveryPassword:"",otp:"",general:""}},showPanels:{header:!1,navigator:!1,homepage:!1,footer:!1,welcomeEmail:!1,recoveryPassword:!1,otp:!1,general:!1},filteredLists:{header:[],navigator:[],homepage:[],footer:[],welcomeEmail:[],recoveryPassword:[],otp:[],general:[]},searchTerms:{header:"",navigator:"",homepage:"",footer:"",welcomeEmail:"",recoveryPassword:"",otp:"",general:""}}},components:{Render:ge.A,Navigation:fe.A},methods:{async fetchDataFromHostname(){try{const{data:e,status:t}=await this.$Request.GET(`hostname/${this.session.current._id}`,this.hostkey);200===t&&(this.load_hostname=!0,console.log("Data fetched from hostname:",e.theme),this.theme=e.theme,this.selectedItems.header=e.theme.header||"",this.selectedItems.navigator=e.theme.navigator||"",this.selectedItems.homepage=e.theme.homepage||"",this.selectedItems.footer=e.theme.footer||"",e.theme.navigator&&(this.menuData.menu=this.selectedItems.navigator))}catch(e){console.error("Error fetching data from hostname:",e)}},async getData(e=!1){try{e||(this.loading_sources=!1);const t=[{$match:{$and:[{owner:this.session.current._id},{type:{$in:["page","layout","menu"]}},{$or:[{title:{$regex:this.searchTerm,$options:"i"}},{slug:{$regex:this.searchTerm,$options:"i"}}]}]}},{$lookup:{from:"form",let:{postID:{$toString:"$_id"}},pipeline:[{$match:{$expr:{$eq:[{$toString:"$formID"},"$$postID"]}}},{$count:"formCount"}],as:"formCounts"}},{$addFields:{formCount:{$arrayElemAt:["$formCounts.formCount",0]}}},{$facet:{post:[{$skip:(this.currentPage-1)*this.limitItem},{$limit:this.limitItem}],totalCount:[{$count:"count"}]}}],s={pipeline:t},{data:a}=await this.$Request.POST("post/aggregate",s,this.configs.key);if(a){const t=a[0]?.totalCount?.[0]?.count||0;this.pageList=a[0].post,this.totalItems=t,this.totalPages=Math.ceil(t/this.limitItem),e||(this.loading_sources=!0)}}catch(t){console.log(t)}},updateConfig(){this.selectedItems.header&&(this.theme.header=this.selectedItems.header),this.selectedItems.navigator&&(this.theme.navigator=this.selectedItems.navigator),this.selectedItems.homepage&&(this.theme.homepage=this.selectedItems.homepage),this.selectedItems.footer&&(this.theme.footer=this.selectedItems.footer)},saveConfig(){this.updateThemeData(),console.log("Config saved")},getPageTitle(e){const t=this.pageList.find((t=>t._id===e));return t?t.title:"ไม่มีชื่อ"},filterOptions(e){const t=this.searchTerms[e],s=t?this.pageList.filter((e=>e.title.toLowerCase().includes(t.toLowerCase()))):[...this.pageList];this.filteredLists[e]=s},selectPage(e,t){e&&t?(this.selectedItems[t]=e._id,this.showPanels[t]=!1,this.updateConfig()):console.warn("Invalid page or type")},hidePanel(e){this.showPanels[e]=!1,this.searchTerms[e]=""},async updateThemeData(){try{const e={data:{theme:this.theme}},{data:t,status:s}=await this.$Request.PUT(`hostname/${this.session.current._id}`,e,this.hostkey);200===s&&(this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"อัปเดตข้อมูลธีม",text:"อัปเดตข้อมูลธีมสำเร็จแล้ว"}),console.log(t.data))}catch(e){console.error("Error updating theme data:",e)}}},mounted(){this.getData(),this.fetchDataFromHostname(),this.theme&&(this.selectedItems.header=this.theme.header||"",this.selectedItems.navigator=this.theme.navigator||"",this.selectedItems.homepage=this.theme.homepage||"",this.selectedItems.footer=this.theme.footer||"")}},be=s(64621);const we=(0,be.A)(ve,[["render",pe],["__scopeId","data-v-4c18cc43"]]);var ye=we;const ke={class:"my-5"};function xe(e,t,s,o,l,i){return(0,a.uX)(),(0,a.CE)("div",ke,t[0]||(t[0]=[(0,a.Fv)('<div class="px-2 pb-4" data-v-443042f2><h1 class="text-lg font-bold" data-v-443042f2>Header</h1><p class="mt-2 text-gray-600" data-v-443042f2>This is the main body content section.</p></div><div class="flex flex-col md:flex-row border-b" data-v-443042f2><div class="w-full md:w-9/12 p-2 order-2 md:order-1" data-v-443042f2><header class="bg-white shadow p-5" data-v-443042f2><h1 class="text-lg font-bold" data-v-443042f2>Login</h1><p class="mt-2 text-gray-600" data-v-443042f2>This is the main body content section.</p></header></div><div class="w-full md:w-3/12 p-2 order-1 md:order-2" data-v-443042f2><header class="bg-white shadow p-5" data-v-443042f2><h1 class="text-lg font-bold" data-v-443042f2>Header Config</h1><p class="mt-2 text-gray-600" data-v-443042f2>This is the main body content section.</p></header></div></div><div class="flex flex-col md:flex-row border-b" data-v-443042f2><div class="w-full md:w-9/12 p-2 order-2 md:order-1" data-v-443042f2><header class="bg-white shadow p-5" data-v-443042f2><h1 class="text-lg font-bold" data-v-443042f2>Reset Password</h1><p class="mt-2 text-gray-600" data-v-443042f2>This is the main body content section.</p></header></div><div class="w-full md:w-3/12 p-2 order-1 md:order-2" data-v-443042f2><header class="bg-white shadow p-5" data-v-443042f2><h1 class="text-lg font-bold" data-v-443042f2>Header Config</h1><p class="mt-2 text-gray-600" data-v-443042f2>This is the main body content section.</p></header></div></div><div class="flex flex-col md:flex-row border-b" data-v-443042f2><div class="w-full md:w-9/12 p-2 order-2 md:order-1" data-v-443042f2><header class="bg-white shadow p-5" data-v-443042f2><h1 class="text-lg font-bold" data-v-443042f2>Forgot Password</h1><p class="mt-2 text-gray-600" data-v-443042f2>This is the main body content section.</p></header></div><div class="w-full md:w-3/12 p-2 order-1 md:order-2" data-v-443042f2><header class="bg-white shadow p-5" data-v-443042f2><h1 class="text-lg font-bold" data-v-443042f2>Header Config</h1><p class="mt-2 text-gray-600" data-v-443042f2>This is the main body content section.</p></header></div></div><div class="flex flex-col md:flex-row border-b" data-v-443042f2><div class="w-full md:w-9/12 p-2 order-2 md:order-1" data-v-443042f2><header class="bg-white shadow p-5" data-v-443042f2><h1 class="text-lg font-bold" data-v-443042f2>Dashboard</h1><p class="mt-2 text-gray-600" data-v-443042f2>This is the main body content section.</p></header></div><div class="w-full md:w-3/12 p-2 order-1 md:order-2" data-v-443042f2><header class="bg-white shadow p-5" data-v-443042f2><h1 class="text-lg font-bold" data-v-443042f2>Header Config</h1><p class="mt-2 text-gray-600" data-v-443042f2>This is the main body content section.</p></header></div></div>',5)]))}var Le={name:"ThemeComponent"};const Te=(0,be.A)(Le,[["render",xe],["__scopeId","data-v-443042f2"]]);var Ce=Te;const Ie={class:"my-5"},Pe={class:"px-2 pb-4 flex justify-between items-center"},$e={class:"flex flex-col md:flex-row"},Ee={class:"w-full md:w-9/12 p-2 order-2 md:order-1 border border-gray-200"},_e={class:"shadow"},Xe={class:"w-full md:w-3/12 p-2 order-1 md:order-2 border border-gray-200"},Fe={class:"relative bg-white shadow p-5"},De={class:"flex"},Se={class:"w-1/2 pr-2"},Oe={class:"w-1/2 pl-2"},Ae={key:0,class:"panel shadow"},Ne={class:"p-2 flex justify-between items-center"},Qe=["onClick"],He={class:"flex flex-col md:flex-row"},Ke={class:"w-full md:w-9/12 p-2 order-2 md:order-1 border border-gray-200"},Ue={class:"shadow"},We={class:"w-full md:w-3/12 p-2 order-1 md:order-2 border border-gray-200"},Be={class:"relative bg-white shadow p-5"},Re={class:"flex"},Ve={class:"w-1/2 pr-2"},qe={class:"w-1/2 pl-2"},je={key:0,class:"panel shadow"},Je={class:"p-2 flex justify-between items-center"},Me=["onClick"],Ge={class:"flex flex-col md:flex-row"},ze={class:"w-full md:w-9/12 p-2 order-2 md:order-1 border border-gray-200"},Ye={class:"shadow"},Ze={class:"w-full md:w-3/12 p-2 order-1 md:order-2 border border-gray-200"},et={class:"relative bg-white shadow p-5"},tt={class:"flex"},st={class:"w-1/2 pr-2"},at={class:"w-1/2 pl-2"},ot={key:0,class:"panel shadow"},lt={class:"p-2 flex justify-between items-center"},it=["onClick"],rt={class:"flex flex-col md:flex-row"},nt={class:"w-full md:w-9/12 p-2 order-2 md:order-1 border border-gray-200"},dt={class:"shadow"},ct={class:"w-full md:w-3/12 p-2 order-1 md:order-2 border border-gray-200"},mt={class:"relative bg-white shadow p-5"},ht={class:"flex"},ut={class:"w-1/2 pr-2"},pt={class:"w-1/2 pl-2"},gt={key:0,class:"panel shadow"},ft={class:"p-2 flex justify-between items-center"},vt=["onClick"];function bt(e,t,s,o,l,i){const r=(0,a.g2)("Render");return(0,a.uX)(),(0,a.CE)("div",Ie,[(0,a.Lk)("div",Pe,[t[18]||(t[18]=(0,a.Lk)("div",null,[(0,a.Lk)("h1",{class:"text-lg font-bold"},"Header"),(0,a.Lk)("p",{class:"mt-2 text-gray-600"},"This is the main body content section.")],-1)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.saveConfig&&i.saveConfig(...e)),class:"bg-blue-500 text-white px-4 py-2 rounded"},t[17]||(t[17]=[(0,a.Lk)("i",{class:"fa fa-save"},null,-1),(0,a.eW)(" บันทึกข้อมูล ")]))]),(0,a.Lk)("div",$e,[(0,a.Lk)("div",Ee,[(0,a.Lk)("header",_e,[l.load_hostname?((0,a.uX)(),(0,a.Wv)(r,{key:l.selectedItems.welcomeEmail,dataItem:l.selectedItems.welcomeEmail,mode:"id"},null,8,["dataItem"])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Xe,[(0,a.Lk)("header",Fe,[t[20]||(t[20]=(0,a.Lk)("h1",{class:"text-lg font-bold"},"welcomeEmail Section",-1)),(0,a.Lk)("div",De,[(0,a.Lk)("div",Se,[(0,a.Lk)("p",null,(0,n.v_)(i.getPageTitle(l.selectedItems.welcomeEmail)),1)]),(0,a.Lk)("div",Oe,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.searchTerms.welcomeEmail=e),onFocus:t[2]||(t[2]=e=>{l.showPanels.welcomeEmail=!0,i.filterOptions("welcomeEmail")}),onInput:t[3]||(t[3]=e=>i.filterOptions("welcomeEmail")),class:"w-full border rounded p-2",placeholder:"ค้นหา welcomeEmail..."},null,544),[[k.Jo,l.searchTerms.welcomeEmail]]),l.showPanels.welcomeEmail?((0,a.uX)(),(0,a.CE)("div",Ae,[(0,a.Lk)("div",Ne,[t[19]||(t[19]=(0,a.Lk)("h2",{class:"font-bold"},"welcomeEmail Options",-1)),(0,a.Lk)("button",{onClick:t[4]||(t[4]=e=>i.hidePanel("welcomeEmail")),class:"text-red-500"},"ปิด")]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.filteredLists.welcomeEmail,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,onClick:(0,k.D$)((t=>i.selectPage(e,"welcomeEmail")),["stop"]),class:"p-2 hover:bg-gray-200 cursor-pointer"},(0,n.v_)(e.title),9,Qe)))),128))])):(0,a.Q3)("",!0)])])])])]),(0,a.Lk)("div",He,[(0,a.Lk)("div",Ke,[(0,a.Lk)("header",Ue,[l.load_hostname?((0,a.uX)(),(0,a.Wv)(r,{key:l.selectedItems.recoveryPassword,dataItem:l.selectedItems.recoveryPassword,mode:"id"},null,8,["dataItem"])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",We,[(0,a.Lk)("header",Be,[t[22]||(t[22]=(0,a.Lk)("h1",{class:"text-lg font-bold"},"recoveryPassword Section",-1)),(0,a.Lk)("div",Re,[(0,a.Lk)("div",Ve,[(0,a.Lk)("p",null,(0,n.v_)(i.getPageTitle(l.selectedItems.recoveryPassword)),1)]),(0,a.Lk)("div",qe,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>l.searchTerms.recoveryPassword=e),onFocus:t[6]||(t[6]=e=>{l.showPanels.recoveryPassword=!0,i.filterOptions("recoveryPassword")}),onInput:t[7]||(t[7]=e=>i.filterOptions("recoveryPassword")),class:"w-full border rounded p-2",placeholder:"ค้นหา recoveryPassword..."},null,544),[[k.Jo,l.searchTerms.recoveryPassword]]),l.showPanels.recoveryPassword?((0,a.uX)(),(0,a.CE)("div",je,[(0,a.Lk)("div",Je,[t[21]||(t[21]=(0,a.Lk)("h2",{class:"font-bold"},"recoveryPassword Options",-1)),(0,a.Lk)("button",{onClick:t[8]||(t[8]=e=>i.hidePanel("recoveryPassword")),class:"text-red-500"},"ปิด")]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.filteredLists.recoveryPassword,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,onClick:(0,k.D$)((t=>i.selectPage(e,"recoveryPassword")),["stop"]),class:"p-2 hover:bg-gray-200 cursor-pointer"},(0,n.v_)(e.title),9,Me)))),128))])):(0,a.Q3)("",!0)])])])])]),(0,a.Lk)("div",Ge,[(0,a.Lk)("div",ze,[(0,a.Lk)("header",Ye,[l.load_hostname?((0,a.uX)(),(0,a.Wv)(r,{key:l.selectedItems.general,dataItem:l.selectedItems.general,mode:"id"},null,8,["dataItem"])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",Ze,[(0,a.Lk)("header",et,[t[24]||(t[24]=(0,a.Lk)("h1",{class:"text-lg font-bold"},"general Section",-1)),(0,a.Lk)("div",tt,[(0,a.Lk)("div",st,[(0,a.Lk)("p",null,(0,n.v_)(i.getPageTitle(l.selectedItems.general)),1)]),(0,a.Lk)("div",at,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>l.searchTerms.general=e),onFocus:t[10]||(t[10]=e=>{l.showPanels.general=!0,i.filterOptions("general")}),onInput:t[11]||(t[11]=e=>i.filterOptions("general")),class:"w-full border rounded p-2",placeholder:"ค้นหา general..."},null,544),[[k.Jo,l.searchTerms.general]]),l.showPanels.general?((0,a.uX)(),(0,a.CE)("div",ot,[(0,a.Lk)("div",lt,[t[23]||(t[23]=(0,a.Lk)("h2",{class:"font-bold"},"general Options",-1)),(0,a.Lk)("button",{onClick:t[12]||(t[12]=e=>i.hidePanel("general")),class:"text-red-500"},"ปิด")]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.filteredLists.general,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,onClick:(0,k.D$)((t=>i.selectPage(e,"general")),["stop"]),class:"p-2 hover:bg-gray-200 cursor-pointer"},(0,n.v_)(e.title),9,it)))),128))])):(0,a.Q3)("",!0)])])])])]),(0,a.Lk)("div",rt,[(0,a.Lk)("div",nt,[(0,a.Lk)("header",dt,[l.load_hostname?((0,a.uX)(),(0,a.Wv)(r,{key:l.selectedItems.otp,dataItem:l.selectedItems.otp,mode:"id"},null,8,["dataItem"])):(0,a.Q3)("",!0)])]),(0,a.Lk)("div",ct,[(0,a.Lk)("header",mt,[t[26]||(t[26]=(0,a.Lk)("h1",{class:"text-lg font-bold"},"otp Section",-1)),(0,a.Lk)("div",ht,[(0,a.Lk)("div",ut,[(0,a.Lk)("p",null,(0,n.v_)(i.getPageTitle(l.selectedItems.otp)),1)]),(0,a.Lk)("div",pt,[(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=e=>l.searchTerms.otp=e),onFocus:t[14]||(t[14]=e=>{l.showPanels.otp=!0,i.filterOptions("otp")}),onInput:t[15]||(t[15]=e=>i.filterOptions("otp")),class:"w-full border rounded p-2",placeholder:"ค้นหา otp..."},null,544),[[k.Jo,l.searchTerms.otp]]),l.showPanels.otp?((0,a.uX)(),(0,a.CE)("div",gt,[(0,a.Lk)("div",ft,[t[25]||(t[25]=(0,a.Lk)("h2",{class:"font-bold"},"otp Options",-1)),(0,a.Lk)("button",{onClick:t[16]||(t[16]=e=>i.hidePanel("otp")),class:"text-red-500"},"ปิด")]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.filteredLists.otp,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,onClick:(0,k.D$)((t=>i.selectPage(e,"otp")),["stop"]),class:"p-2 hover:bg-gray-200 cursor-pointer"},(0,n.v_)(e.title),9,vt)))),128))])):(0,a.Q3)("",!0)])])])])])])}var wt={name:"ThemeComponent",data(){const e=r.A.get("session","token"),t=r.A.get("session");return{accessToken:e,session:t,configs:r.A.get("configs"),hostkey:this.$Key,loading_sources:!0,load_hostname:!1,limitItem:50,limitOptions:[10,20,50,100,200,500,1e3,2e3],currentPage:1,totalPages:0,totalItems:0,searchTerm:"",navigatorData:[],pageList:[],menuData:{icon:"list",description:"Web Menu",type:"navigation",name:"เมนู",mobile:!0,tablet:!0,laptop:!0,desktop:!0,position:"relative",customClass:"",customId:"",uid:"1707689005824",menu:"",menuName:"DOA Menu",alignment:"center",display:"horizontal",fontColor:"text-gray-900",hoverColor:"text-orange-600",itemSpace:3,paddingTop:"5"},selectedItems:{welcomeEmail:"",recoveryPassword:"",otp:"",general:""},theme:{homepage:"",header:"",subheader:"",footer:"",navigator:"",dashboard:"",checkout:"",login:"",resetpassword:"",changepassword:"",emailTemplates:{welcomeEmail:"",recoveryPassword:"",otp:"",general:""}},showPanels:{welcomeEmail:!1,recoveryPassword:!1,otp:!1,general:!1},filteredLists:{welcomeEmail:[],recoveryPassword:[],otp:[],general:[]},searchTerms:{welcomeEmail:"",recoveryPassword:"",otp:"",general:""}}},components:{Render:ge.A},methods:{async fetchDataFromHostname(){try{const{data:e,status:t}=await this.$Request.GET(`hostname/${this.session.current._id}`,this.hostkey);200===t&&(this.load_hostname=!0,console.log("Data fetched from hostname:",e.theme),this.theme=e.theme,this.selectedItems.welcomeEmail=e.theme.emailTemplates.welcomeEmail||"",this.selectedItems.recoveryPassword=e.theme.emailTemplates.recoveryPassword||"",this.selectedItems.otp=e.theme.emailTemplates.otp||"",this.selectedItems.general=e.theme.emailTemplates.general||"",e.theme.navigator&&(this.menuData.menu=this.selectedItems.navigator))}catch(e){console.error("Error fetching data from hostname:",e)}},async getData(e=!1){try{e||(this.loading_sources=!1);const t=[{$match:{$and:[{owner:this.session.current._id},{type:{$in:["page","layout","menu"]}},{$or:[{title:{$regex:this.searchTerm,$options:"i"}},{slug:{$regex:this.searchTerm,$options:"i"}}]}]}},{$lookup:{from:"form",let:{postID:{$toString:"$_id"}},pipeline:[{$match:{$expr:{$eq:[{$toString:"$formID"},"$$postID"]}}},{$count:"formCount"}],as:"formCounts"}},{$addFields:{formCount:{$arrayElemAt:["$formCounts.formCount",0]}}},{$facet:{post:[{$skip:(this.currentPage-1)*this.limitItem},{$limit:this.limitItem}],totalCount:[{$count:"count"}]}}],s={pipeline:t},{data:a}=await this.$Request.POST("post/aggregate",s,this.configs.key);if(a){const t=a[0]?.totalCount?.[0]?.count||0;this.pageList=a[0].post,this.totalItems=t,this.totalPages=Math.ceil(t/this.limitItem),e||(this.loading_sources=!0)}}catch(t){console.log(t)}},updateConfig(){this.selectedItems.welcomeEmail&&(this.theme.emailTemplates.welcomeEmail=this.selectedItems.welcomeEmail),this.selectedItems.recoveryPassword&&(this.theme.emailTemplates.recoveryPassword=this.selectedItems.recoveryPassword),this.selectedItems.general&&(this.theme.emailTemplates.general=this.selectedItems.general),this.selectedItems.otp&&(this.theme.emailTemplates.otp=this.selectedItems.otp)},saveConfig(){this.updateThemeData(),console.log("Config saved")},getPageTitle(e){const t=this.pageList.find((t=>t._id===e));return t?t.title:"ไม่มีชื่อ"},filterOptions(e){const t=this.searchTerms[e],s=t?this.pageList.filter((e=>e.title.toLowerCase().includes(t.toLowerCase()))):[...this.pageList];this.filteredLists[e]=s},selectPage(e,t){e&&t?(this.selectedItems[t]=e._id,this.showPanels[t]=!1,this.updateConfig()):console.warn("Invalid page or type")},hidePanel(e){this.showPanels[e]=!1,this.searchTerms[e]=""},async updateThemeData(){try{const e={data:{theme:this.theme}},{data:t,status:s}=await this.$Request.PUT(`hostname/${this.session.current._id}`,e,this.hostkey);200===s&&(this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"อัปเดตข้อมูลธีม",text:"อัปเดตข้อมูลธีมสำเร็จแล้ว"}),console.log(t.data))}catch(e){console.error("Error updating theme data:",e)}}},mounted(){this.getData(),this.fetchDataFromHostname(),this.theme&&(this.selectedItems.welcomeEmail=this.theme.emailTemplates.welcomeEmail||"",this.selectedItems.recoveryPassword=this.theme.emailTemplates.recoveryPassword||"",this.selectedItems.otp=this.theme.emailTemplates.otp||"",this.selectedItems.general=this.theme.emailTemplates.general||"")}};const yt=(0,be.A)(wt,[["render",bt],["__scopeId","data-v-2928b10a"]]);var kt=yt;const xt={class:"my-5"};function Lt(e,t,s,o,l,i){return(0,a.uX)(),(0,a.CE)("div",xt,t[0]||(t[0]=[(0,a.Fv)('<div class="px-2 pb-4" data-v-1047d326><h1 class="text-lg font-bold" data-v-1047d326>Header</h1><p class="mt-2 text-gray-600" data-v-1047d326>This is the main body content section.</p></div><div class="flex flex-col md:flex-row border-b" data-v-1047d326><div class="w-full md:w-9/12 p-2 order-2 md:order-1" data-v-1047d326><header class="bg-white shadow p-5" data-v-1047d326><h1 class="text-lg font-bold" data-v-1047d326>Header</h1><p class="mt-2 text-gray-600" data-v-1047d326>This is the main body content section.</p></header></div><div class="w-full md:w-3/12 p-2 order-1 md:order-2" data-v-1047d326><header class="bg-white shadow p-5" data-v-1047d326><h1 class="text-lg font-bold" data-v-1047d326>Header Config</h1><p class="mt-2 text-gray-600" data-v-1047d326>This is the main body content section.</p></header></div></div><div class="flex flex-col md:flex-row border-b" data-v-1047d326><div class="w-full md:w-9/12 p-2 order-2 md:order-1" data-v-1047d326><header class="bg-white shadow p-5" data-v-1047d326><h1 class="text-lg font-bold" data-v-1047d326>Header</h1><p class="mt-2 text-gray-600" data-v-1047d326>This is the main body content section.</p></header></div><div class="w-full md:w-3/12 p-2 order-1 md:order-2" data-v-1047d326><header class="bg-white shadow p-5" data-v-1047d326><h1 class="text-lg font-bold" data-v-1047d326>Header Config</h1><p class="mt-2 text-gray-600" data-v-1047d326>This is the main body content section.</p></header></div></div><div class="flex flex-col md:flex-row border-b" data-v-1047d326><div class="w-full md:w-9/12 p-2 order-2 md:order-1" data-v-1047d326><header class="bg-white shadow p-5" data-v-1047d326><h1 class="text-lg font-bold" data-v-1047d326>Header</h1><p class="mt-2 text-gray-600" data-v-1047d326>This is the main body content section.</p></header></div><div class="w-full md:w-3/12 p-2 order-1 md:order-2" data-v-1047d326><header class="bg-white shadow p-5" data-v-1047d326><h1 class="text-lg font-bold" data-v-1047d326>Header Config</h1><p class="mt-2 text-gray-600" data-v-1047d326>This is the main body content section.</p></header></div></div>',4)]))}var Tt={name:"ThemeComponent"};const Ct=(0,be.A)(Tt,[["render",Lt],["__scopeId","data-v-1047d326"]]);var It=Ct;const Pt={class:"my-5"},$t={class:"flex flex-col md:flex-row border-b"},Et={class:"w-full md:w-9/12 p-2 order-2 md:order-1"},_t={class:"bg-white shadow p-5"},Xt={class:"mt-4"},Ft={class:"mt-2 flex items-center space-x-4"},Dt={class:"inline-flex items-center"},St={class:"inline-flex items-center"},Ot={key:0,class:"ml-4"},At={class:"w-full md:w-3/12 p-2 order-1 md:order-2"},Nt={class:"bg-white shadow p-5"},Qt={class:"mt-4"};function Ht(e,t,s,o,l,i){return(0,a.uX)(),(0,a.CE)("div",Pt,[(0,a.Lk)("div",$t,[(0,a.Lk)("div",Et,[(0,a.Lk)("header",_t,[t[8]||(t[8]=(0,a.Lk)("h1",{class:"text-lg font-bold"},"เลือกธีม",-1)),t[9]||(t[9]=(0,a.Lk)("p",{class:"mt-2 text-gray-600"},"เลือกรูปแบบธีมสำหรับหน้าเว็บของคุณ",-1)),(0,a.Lk)("div",Xt,[t[7]||(t[7]=(0,a.Lk)("span",{class:"block text-sm font-medium text-gray-700"},"ธีมปัจจุบัน:",-1)),(0,a.Lk)("div",Ft,[(0,a.Lk)("div",null,[(0,a.Lk)("label",Dt,[(0,a.bo)((0,a.Lk)("input",{type:"radio",class:"form-radio",name:"themeSelection",value:"builder","onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedTheme=e)},null,512),[[k.XL,l.selectedTheme]]),t[4]||(t[4]=(0,a.Lk)("span",{class:"ml-2"},"Builder",-1))])]),(0,a.Lk)("div",null,[(0,a.Lk)("label",St,[(0,a.bo)((0,a.Lk)("input",{type:"radio",class:"form-radio",name:"themeSelection",value:"built-in","onUpdate:modelValue":t[1]||(t[1]=e=>l.selectedTheme=e)},null,512),[[k.XL,l.selectedTheme]]),t[5]||(t[5]=(0,a.Lk)("span",{class:"ml-2"},"Built-in",-1))])]),"built-in"===l.selectedTheme?((0,a.uX)(),(0,a.CE)("div",Ot,[(0,a.bo)((0,a.Lk)("select",{id:"built-in-theme-select","onUpdate:modelValue":t[2]||(t[2]=e=>l.selectedBuiltInTheme=e),class:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},t[6]||(t[6]=[(0,a.Lk)("option",{value:"default"},"Default",-1),(0,a.Lk)("option",{value:"netflix"},"Netflix Style",-1)]),512),[[k.u1,l.selectedBuiltInTheme]])])):(0,a.Q3)("",!0)])])])]),(0,a.Lk)("div",At,[(0,a.Lk)("header",Nt,[t[10]||(t[10]=(0,a.Lk)("h1",{class:"text-lg font-bold"},"ตั้งค่าธีม",-1)),t[11]||(t[11]=(0,a.Lk)("p",{class:"mt-2 text-gray-600"},"กำหนดค่าการแสดงผลของธีมที่เลือก",-1)),(0,a.Lk)("div",Qt,[(0,a.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>i.saveConfiguration&&i.saveConfiguration(...e)),class:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 transition ease-in-out duration-150"}," บันทึกการตั้งค่า ")])])])])])}var Kt={name:"Config",data(){const e=r.A.get("session","token"),t=r.A.get("session"),s=r.A.get("configs");return{accessToken:e,session:t,configs:s,hostkey:this.$Key,selectedTheme:"builder",selectedBuiltInTheme:"default",currentFullTheme:{}}},methods:{async fetchThemeSettings(){if(!this.session||!this.session.current||!this.session.current._id)return console.error("Session data is not available."),void this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"error",title:"ข้อผิดพลาด",text:"ไม่สามารถโหลดข้อมูลผู้ใช้ได้"});try{console.log("Fetching theme settings for hostname ID:",this.session.current._id);const{data:e,status:t}=await this.$Request.GET(`hostname/${this.session.current._id}`,this.hostkey);200===t&&e&&e.theme?(console.log("Theme settings fetched:",e.theme),this.currentFullTheme={...e.theme},this.selectedTheme=this.currentFullTheme.type||"builder","built-in"===this.currentFullTheme.type&&(this.selectedBuiltInTheme=this.currentFullTheme.style||"default")):(this.currentFullTheme={},console.warn("Could not fetch theme settings or theme data is missing, status:",t),this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"warning",title:"ไม่พบข้อมูล",text:"ไม่พบการตั้งค่าธีมปัจจุบัน หรือข้อมูลไม่สมบูรณ์ จะใช้ค่าเริ่มต้น"}))}catch(e){this.currentFullTheme={},console.error("Error fetching theme settings:",e),this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"error",title:"เกิดข้อผิดพลาด",text:"ไม่สามารถโหลดการตั้งค่าธีมได้"})}},saveConfiguration(){this.updateThemeSettings()},async updateThemeSettings(){if(!this.session||!this.session.current||!this.session.current._id)return console.error("Session data is not available for update."),void this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"error",title:"ข้อผิดพลาด",text:"ข้อมูลผู้ใช้ไม่พร้อมสำหรับการอัปเดต"});console.log("Updating theme settings...");const e={...this.currentFullTheme};e.type=this.selectedTheme,console.log("Selected Theme for update:",e.type),"built-in"===this.selectedTheme?(e.style=this.selectedBuiltInTheme,console.log("Selected Built-in Style for update:",e.style)):(delete e.style,console.log("Theme type is not built-in, style property removed if existed."));try{const t={data:{theme:e}};console.log("Payload for update:",JSON.stringify(t,null,2));const{data:s,status:a}=await this.$Request.PUT(`hostname/${this.session.current._id}`,t,this.hostkey);if(200!==a)throw new Error(`Failed to update theme settings, status: ${a}`);this.currentFullTheme={...e},this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"อัปเดตสำเร็จ",text:"การตั้งค่าธีมถูกบันทึกแล้ว"}),console.log("Theme settings updated successfully:",s)}catch(t){console.error("Error updating theme settings:",t),this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"error",title:"อัปเดตไม่สำเร็จ",text:"ไม่สามารถบันทึกการตั้งค่าธีมได้"})}},handleSidebarAction(e){console.log("Sidebar action triggered for:",e),"theme_settings"===e?this.saveConfiguration():alert("ปุ่มใน Sidebar ถูกคลิกสำหรับ: "+e)}},mounted(){this.fetchThemeSettings()}};const Ut=(0,be.A)(Kt,[["render",Ht],["__scopeId","data-v-1ad974be"]]);var Wt=Ut,Bt={data(){const e=r.A.get("session","token"),t=r.A.get("session");return{configs:r.A.get("configs"),hostkey:this.$Key,accessToken:e,session:t,loading_sources:!0,activeTab:"home",tabs:[{codeName:"template",name:"Template",componentName:"Component4",icon:"list",subText:"ปรับแต่งธีม"},{codeName:"user",name:"User",componentName:"Component1",icon:"file-alt",subText:"ปรับแต่งหน้าผู้ใช้งาน"},{codeName:"email",name:"Email",componentName:"Component2",icon:"pencil-ruler",subText:"ปรับอีเมล์เทมเพลต"},{codeName:"menu",name:"Menu",componentName:"Component3",icon:"list",subText:"เมนูหน้าเว็บ"},{codeName:"config",name:"การตั้งค่า",componentName:"Component5",icon:"cog",subText:"ตั้งค่าทั่วไป"}],selectedTab:"template"}},components:{Loader:w.A,Subhead:y.A,Template:ye,User:Ce,Email:kt,Menu:It,Config:Wt},methods:{selectTab(e){this.selectedTab=e,window.location.hash=`#${e}`}},async mounted(){try{const e=window.location.hash;if(e){const t=e.replace("#","");this.tabs.some((e=>e.codeName===t))&&(this.selectedTab=t)}}catch(e){console.log(Error)}}};const Rt=(0,be.A)(Bt,[["render",b],["__scopeId","data-v-ddaaa492"]]);var Vt=Rt,qt={name:"Page Item",components:{Backend:Vt,Frontend:Vt},data(){return{session:r.A.get("session")}},setup(){const e=(0,i.lq)(),t=e.meta.title;(0,l.K7)(t)},computed:{componentName(){return"backend"===this.session.interface?"Backend":"frontend"===this.session.interface?"Frontend":(console.error("Invalid interface:",this.session.interface),null)}}};const jt=(0,be.A)(qt,[["render",o]]);var Jt=jt},87814:function(e,t,s){s.d(t,{A:function(){return E}});var a=s(20641),o=s(90033),l=s(53751);const i={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},r={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},n={class:"min-w-0 flex-1"},d={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},c={key:0,class:"text-sm text-gray-500"},m={class:"mt-5 flex xl:mt-0 xl:ml-4"},h={class:"flex items-center space-x-2"},u={class:"text-sm text-gray-400"},p=["onUpdate:modelValue","placeholder","onChange"],g={value:"",disabled:""},f=["value"],v=["onClick"],b={class:"text-sm hidden sm:inline-block ml-1"},w=["onClick"],y={class:"text-sm hidden sm:inline-block ml-1"};function k(e,t,s,k,x,L){const T=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("header",i,[(0,a.Lk)("div",r,[(0,a.Lk)("div",n,[(0,a.Lk)("h1",d,[(0,a.bF)(T,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,a.eW)(" "+(0,o.v_)(s.pageTitle?s.pageTitle:this.PageName),1)]),s.subhead?((0,a.uX)(),(0,a.CE)("p",c,(0,o.v_)(s.subhead),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",m,[(0,a.Lk)("div",h,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.navigation,((t,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},["select"===t.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("label",u,(0,o.v_)(t.placeholder),1),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:s=>e.$emit("toggleStatus",t.value)},[(0,a.Lk)("option",g,"-- "+(0,o.v_)(t.placeholder)+" --",1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.options,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:t,value:e.value},(0,o.v_)(e.name),9,f)))),128))],40,p),[[l.u1,t.value]])],64)):"call-function"===t.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[!1!==t.visible?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:s=>e.$emit(t.function),type:"button",class:(0,o.C4)(L.getClasses(t.class))},[(0,a.bF)(T,{icon:["fas",`${t.style}`],class:(0,o.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,a.Lk)("span",b,(0,o.v_)(t.name),1)],10,v)):(0,a.Q3)("",!0)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[!1!==t.visible?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e=>L.handleNavigationClick(t),type:"button",class:(0,o.C4)(L.getClasses(t.class))},[(0,a.bF)(T,{icon:["fas",`${t.style}`],class:(0,o.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,a.Lk)("span",y,(0,o.v_)(t.name),1)],10,w)):(0,a.Q3)("",!0)],64))],64)))),128))])])])])}s(44114);var x=s(75220),L=s(52968),T=s(23264),C=s(93426),I={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,x.lq)();return console.log("Translate",(0,C.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,C.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,L.K7)((0,C.iX)())},methods:{getClasses(e){const t=(0,T.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},P=s(64621);const $=(0,P.A)(I,[["render",k]]);var E=$},23264:function(e,t,s){function a(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}s.d(t,{c:function(){return a}})}}]);
//# sourceMappingURL=6919.8d78048d.js.map