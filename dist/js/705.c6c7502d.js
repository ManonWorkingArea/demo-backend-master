"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[705],{10705:function(e,s,t){t.r(s),t.d(s,{default:function(){return Y}});var o=t(20641);function n(e,s,t,n,a,i){const r=(0,o.g2)("Add");return this.login?((0,o.uX)(),(0,o.Wv)(r,{key:0})):(0,o.Q3)("",!0)}var a=t(52968),i=t(75220),r=(t(44114),t(90033)),l=t(53751);const c={class:"py-2 border-gray-800"},d={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 xl:flex xl:items-center xl:justify-between"},u={class:"min-w-0 flex-1"},g={class:"mt-2 text-xl font-bold leading-7 text-gray-700 sm:truncate sm:text-1xl sm:tracking-tight"},h={class:"mt-5 flex xl:mt-0 xl:ml-4"},m={class:"hidden sm:block"},p={class:"flex-1 bg-gray-100 pt-2 pb-5 border-t"},f={class:"mt-8"},x={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},y={class:"space-y-6 sm:px-6 lg:col-span-9 lg:px-0"},w={"aria-labelledby":"payment-details-heading"},b={class:"divide-y divide-gray-200 overflow-hidden rounded-lg bg-white shadow mb-8"},k={class:"px-4 py-5 sm:p-6"},v=["innerHTML"],L={class:"divide-y divide-gray-200 overflow-hidden rounded-lg bg-white shadow mb-8"},D={class:"px-4 py-5 sm:px-6 relative"},A={id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},C={class:"absolute top-3 right-3"},I={class:"px-4 py-5 sm:p-6"},T={class:"col-span-4 sm:col-span-2 pb-4 border-dashed border-[1px] p-4 mb-3"},q=["onSubmit"],B={class:"mt-1 flex rounded-md shadow-sm"},j={class:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},P={key:0,class:"flex items-center"},E=["id","value"],F=["for"],S={key:1,class:"flex items-center"},$=["id","value"],O=["for"],W=["onUpdate:modelValue","name","id","autocomplete"],_={class:"mt-3"},z={class:"flex items-center"},X=["onClick"],N=["onClick"],Q={class:"bg-gray-50 px-4 py-4 sm:px-6 text-right"};function U(e,s,t,n,a,i){const U=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("header",c,[(0,o.Lk)("div",d,[(0,o.Lk)("div",u,[(0,o.Lk)("h1",g,[(0,o.bF)(U,{icon:["fas",a.PageIcon],class:"text-gray-500 text-[24px]"},null,8,["icon"]),(0,o.eW)(" "+(0,r.v_)(a.PageName),1)])]),(0,o.Lk)("div",h,[(0,o.Lk)("span",m,[(0,o.Lk)("button",{onClick:s[0]||(s[0]=s=>e.$router.push("/lesson/exam/detail/"+this.examID)),type:"button",class:"ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-gray-50"},[(0,o.bF)(U,{icon:["fas","chevron-left"],class:"text-black text-[12px] mr-2"}),s[6]||(s[6]=(0,o.eW)(" ย้อนกลับ "))])])])])]),(0,o.Lk)("div",p,[(0,o.Lk)("div",f,[(0,o.Lk)("div",x,[(0,o.Lk)("div",y,[(0,o.Lk)("section",w,[(0,o.Lk)("div",b,[s[7]||(s[7]=(0,o.Lk)("div",{class:"px-4 py-5 sm:px-6"},[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"โจทย์"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"เพิ่มคำตอบด้วยการกดปุ่ม เพิ่มตัวเลือก กรอกคำตอบและบันทึกข้อมูล")],-1)),(0,o.Lk)("div",k,[(0,o.Lk)("div",{innerHTML:a.qustionData.detail},null,8,v)])])]),(0,o.Lk)("section",{"aria-labelledby":"payment-details-heading",class:(0,r.C4)(["relative pt-4",[a.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,o.Lk)("div",L,[(0,o.Lk)("div",D,[(0,o.Lk)("h2",A,"คำตอบ : "+(0,r.v_)(a.answerCounter),1),(0,o.Lk)("span",C,[(0,o.Lk)("button",{onClick:s[1]||(s[1]=(...e)=>i.addAnswerData&&i.addAnswerData(...e)),type:"button",class:"ml-3 inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(U,{icon:["fas","square-plus"],class:"text-gray-200 pr-3"}),s[8]||(s[8]=(0,o.eW)(" เพิ่มคำตอบ "))])])]),(0,o.Lk)("div",I,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.answerList,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"col-span-4 sm:col-span-6"},[(0,o.Lk)("div",T,[(0,o.Lk)("form",{onSubmit:(0,l.D$)((s=>i.updateAnswerData(e.id)),["prevent"])},[(0,o.Lk)("div",B,[(0,o.Lk)("span",j,[e.isTrueAnswer?((0,o.uX)(),(0,o.CE)("div",P,[(0,o.Lk)("input",{id:e.id,name:"isTrueAnswer",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",value:e.id,onChange:s[2]||(s[2]=e=>i.onChange(e)),checked:""},null,40,E),(0,o.Lk)("label",{for:e.id,class:"ml-3 block text-sm font-medium text-gray-700"},"คำตอบที่ถูก",8,F)])):(0,o.Q3)("",!0),e.isTrueAnswer?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("input",{id:e.id,name:"isTrueAnswer",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",value:e.id,onChange:s[3]||(s[3]=e=>i.onChange(e))},null,40,$),(0,o.Lk)("label",{for:e.id,class:"ml-3 block text-sm font-medium text-gray-700"},"คำตอบที่ถูก",8,O)]))]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":s=>a.values[e.id]=s,type:"text",name:e.id,id:e.id,autocomplete:e.id,class:"block w-full min-w-0 flex-1 rounded-none rounded-r-md border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,8,W),[[l.Jo,a.values[e.id]]])]),(0,o.Lk)("div",_,[(0,o.Lk)("div",z,[(0,o.Lk)("button",{onClick:s=>i.updateAnswerData(e.id),type:"button",class:"ml-2 mr-2 rounded-md border border-transparent bg-indigo-600 px-2 py-1 text-xs font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(U,{icon:["fas","save"],class:"text-gray-200 pr-2"}),s[9]||(s[9]=(0,o.eW)(" บันทึก "))],8,X),(0,o.Lk)("button",{onClick:s=>i.deleteAnswer(this.examID,this.questionID,e.id),type:"button",class:"rounded-md border border-transparent bg-gray-800 px-2 py-1 text-xs font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(U,{icon:["fas","trash"],class:"text-gray-200 pr-2"}),s[10]||(s[10]=(0,o.eW)(" ลบ "))],8,N)])])],40,q)])])))),128))]),(0,o.Lk)("div",Q,[(0,o.Lk)("button",{onClick:s[4]||(s[4]=s=>e.$router.push("/lesson/exam/detail/"+this.examID)),type:"button",class:"inline-flex items-center rounded-md border border-gray-300 bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," ยกเลิก "),(0,o.Lk)("button",{onClick:s[5]||(s[5]=(...e)=>i.saveAllAnswer&&i.saveAllAnswer(...e)),type:"button",class:"ml-3 inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(U,{icon:["fas","save"],class:"pr-2 pl-2"}),s[11]||(s[11]=(0,o.eW)("บันทึกข้อมูล "))])])])],2)])])])])],64)}t(98992),t(3949);var H=t(40475),J={name:"ContactUs",inject:["apiServer"],data(){const e=(0,i.lq)();return console.log("exam",this.$route.params.exam),console.log("question",this.$route.params.question),{PageName:e.meta.title,PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page,accessSession:[],exam:this.$route.params.id,activeBlock:!1,schoolData:[],qustionData:[],answerList:[],values:{},loading_sources:!0,answerCounter:"",dataItem:this.$route.params.id,examID:this.$route.params.exam,questionID:this.$route.params.question,accessToken:H.A.get("session","token"),login:H.A.get("session","login")}},components:{},methods:{sort(){this.answerList=this.answerList.sort(((e,s)=>e.order-s.order))},async getData(){if(this.login)try{this.loading_sources=!1;const s=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/exams/getFullQuestion/"+this.examID+"/"+this.questionID+"/false",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}}),t=await s.json();for(var e of(this.qustionData=t.data.questionInfo,this.answerList=t.data.answerInfos,this.answerCounter=t.data.answerInfos.length,Object.keys(this.answerList)))console.log(e+" -> "+this.answerList[e].id),this.values[this.answerList[e].id]=this.answerList[e].detail;console.log(this.answerList),this.sort(),this.loading_sources=!0}catch(s){console.log(s)}},async addAnswerData(){if(this.login)try{this.activeBlock=!0;const e=H.A.get("session","token"),s=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/exams/answers/"+this.examID+"/"+this.questionID,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify({questionId:this.questionID,order:("0"+this.answerCounter++).slice(-2)})}),t=await s.json();if(t.success){console.log(t);const e=await this.getData();console.log(e),this.activeBlock=!1}}catch(e){console.log(e)}},async saveAllAnswer(){if(this.login)try{this.answerList.forEach((e=>{console.log("Answer",e.id),console.log(e.id+" -> "+this.values[e.id]),this.updateAnswerData(e.id)}))}catch(e){console.log(e)}},async updateAnswerData(e){if(this.login)try{const s=H.A.get("session","token");this.activeBlock=!0;const t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/exams/answers/"+this.examID+"/"+this.questionID+"/"+e,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s},body:JSON.stringify({detail:this.values[e]})}),o=await t.json();o.success&&(this.activeBlock=!1),console.log(o)}catch(s){console.log(s)}},async correctAnswerData(e){if(this.login)try{this.activeBlock=!0,console.log(e+" -> "+this.values[e]);const s=H.A.get("session","token"),t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/exams/answers/setTrue/"+this.examID+"/"+this.questionID+"/"+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}),o=await t.json();if(o.success){this.activeBlock=!1,console.log(o);const e=await this.getData();console.log(e)}}catch(s){console.log(s)}},async incorrectAnswerData(e){if(this.login)try{console.log(e+" -> "+this.values[e]);const s=H.A.get("session","token"),t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/exams/answers/setFalse/"+this.examID+"/"+this.questionID+"/"+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+s}}),o=await t.json();if(o.success){console.log(o);const e=await this.getData();console.log(e)}}catch(s){console.log(s)}},async deleteAnswer(e,s,t){if(this.login)try{console.log("exam",e),console.log("question",s),console.log("answer",t),this.$swal({title:"ต้องการลบข้อมูลนี้ ?",text:"หลังจากลบแล้วจะไม่สามารถกู้คืนข้อมูลนี้ได้อีก !",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"ตกลง ลบเลย",cancelButtonText:"ยกเลิก",closeOnConfirm:!1,closeOnCancel:!1}).then((o=>{o.isConfirmed?(console.log("Delete"),this.confirmDeleteAnswer(e,s,t)):console.log("Cancel")}))}catch(o){console.log(o)}},async confirmDeleteAnswer(e,s,t){if(this.login)try{const o=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/exams/answers/"+e+"/"+s+"/"+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}}),n=await o.json();if(n.success){const e=await this.getData();console.log("answerReturn",e)}}catch(o){console.log(o)}},onChange(e){var s=e.target.value;console.log(s),this.correctAnswerData(s)}},setup(){},async mounted(){try{await this.getData();const e=H.A.get("session","access");this.accessSession=e.current}catch(e){console.log(Error)}}},K=t(64621);const M=(0,K.A)(J,[["render",U]]);var V=M,G={name:"Home",components:{Add:V},data(){return{login:H.A.get("session","login")}},methods:{},setup(){const e=(0,i.lq)(),s=e.meta.title;(0,a.K7)(s)}};const R=(0,K.A)(G,[["render",n]]);var Y=R}}]);
//# sourceMappingURL=705.c6c7502d.js.map