"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[7143],{77143:function(t,e,a){a.r(e),a.d(e,{default:function(){return vt}});var s=a(20641);function n(t,e,a,n,o,l){const i=(0,s.g2)("Authen"),r=(0,s.g2)("Dashboard");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(i),this.login?((0,s.uX)(),(0,s.Wv)(r,{key:0})):(0,s.Q3)("",!0)],64)}var o=a(52968),l=a(75220),i=a(90033),r=a(53751);const c={key:0,class:"text-center"},d={key:0,class:"loading-overlay"},u={class:"loading-text"},g={class:"processing-count"},m={key:0},p={class:"flex-1 pt-5 bg-white"},h={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6 space-x-4"},y=["onClick"],b={class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5"},f={class:"mt-8"},x={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},k={class:"text-2xl font-bold text-gray-900"},v={class:"mt-8 flex flex-col"},L={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},C={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},w={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},P={class:"min-w-full divide-y divide-gray-300"},A={class:"bg-gray-100"},I={class:"hidden md:table-row p-0 m-0 bg-gray-50 border-b border-gray-200"},$={colspan:"4",class:"p-3 m-0"},E={class:"flex items-center"},S={key:0,class:""},Q={key:0,class:"text-left ml-2 text-gray-500"},T={class:"text-black font-semibold"},X={key:1,class:"text-left mt-2"},_={colspan:"3",class:"p-3 m-0"},F={class:"flex items-center justify-end"},D=["value"],M={class:"table-row md:hidden p-0 m-0 border-b border-gray-200"},N={colspan:"3",class:"p-3 m-0 text-center"},j={class:"mb-4 mx-auto max-w-full"},K={key:0,class:"mt-2 text-gray-500"},U={class:"text-black font-semibold"},q={key:1,class:"mt-2"},B={class:"flex justify-center"},H={class:"py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},W={class:"px-3 py-4 text-md text-gray-700 font-semibold"},R=["innerHTML"],O=["innerHTML"],V={class:"hidden md:table-cell px-3 py-4 text-sm text-gray-500"},J=["innerHTML"],z={class:"hidden md:table-cell px-3 py-4 text-sm text-gray-500"},Y=["innerHTML"],G=["innerHTML"],Z={class:"hidden md:table-cell px-3 py-4 text-sm text-gray-500"},tt={class:"hidden md:table-cell px-3 py-4 text-sm text-gray-500"},et={class:"relative py-4 pl-3 pr-4 text-right text-md font-medium sm:pr-6"},at={class:"flex"},st=["onClick"],nt=["onClick"],ot={class:"p-0 m-0 bg-gray-50"},lt={colspan:"7",class:"p-3 m-0"},it={class:"text-center"};function rt(t,e,a,n,o,l){const rt=(0,s.g2)("Loader"),ct=(0,s.g2)("Subhead"),dt=(0,s.g2)("Pagination"),ut=(0,s.g2)("router-link"),gt=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)(s.FK,null,[o.loading_sources?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",c,[(0,s.bF)(rt)])),(0,s.Lk)("div",null,[(0,s.bF)(ct,{navigation:[{name:"ย้อนกลับ",link:"/lesson/detail/"+this.dataItem,style:"chevron-left",class:"default-btn",visible:!0,type:"button"}]},null,8,["navigation"]),(0,s.Lk)("div",null,[o.isShowingOverlay?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("div",u,(0,i.v_)(o.loadingMessage),1),(0,s.Lk)("div",g,(0,i.v_)(o.processingCount),1)])):(0,s.Q3)("",!0)]),o.loading_sources?((0,s.uX)(),(0,s.CE)("div",m,[(0,s.Lk)("div",p,[(0,s.Lk)("div",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.applicationData.status,((t,e)=>((0,s.uX)(),(0,s.CE)("button",{key:e,class:(0,i.C4)({"bg-gray-100 text-black":t===l.activeStatus,"bg-gray-200 text-gray-700":t!==l.activeStatus,"px-6 py-4 rounded-t-md text-lg":!0}),onClick:e=>l.navigateToItem(t)},(0,i.v_)(t.name),11,y)))),128))])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",b,[(0,s.Lk)("div",f,[(0,s.Lk)("div",x,[(0,s.Lk)("h1",k,"ใบสมัคร : "+(0,i.v_)(o.applicationData.name),1),(0,s.Lk)("div",v,[(0,s.Lk)("div",L,[(0,s.Lk)("div",C,[(0,s.Lk)("div",w,[(0,s.Lk)("table",P,[(0,s.Lk)("thead",A,[(0,s.Lk)("tr",I,[(0,s.Lk)("td",$,[(0,s.Lk)("div",E,[(0,s.bo)((0,s.Lk)("input",{id:"search",type:"text",class:"px-4 py-2 rounded-md border-gray-300 bg-white focus:outline-none",placeholder:"ค้นหา...","onUpdate:modelValue":e[0]||(e[0]=t=>o.searchQuery=t)},null,512),[[r.Jo,o.searchQuery]]),o.searchQuery.length>0?((0,s.uX)(),(0,s.CE)("div",S,[o.searchQuery.length>0?((0,s.uX)(),(0,s.CE)("div",Q,[e[6]||(e[6]=(0,s.eW)(" ผลการค้นหา ")),(0,s.Lk)("span",T,(0,i.v_)(o.totalItems),1),e[7]||(e[7]=(0,s.eW)(" รายการ (s) "))])):((0,s.uX)(),(0,s.CE)("div",X," ไม่พบข้อมูล "))])):(0,s.Q3)("",!0),o.searchQuery.length>0?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:e[1]||(e[1]=(...t)=>l.clearSearchQuery&&l.clearSearchQuery(...t)),type:"button",class:"ml-2 text-blue-500 hover:underline focus:outline-none"}," Clear ")):(0,s.Q3)("",!0)])]),(0,s.Lk)("td",_,[(0,s.Lk)("div",F,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>o.limitItem=t),onChange:e[3]||(e[3]=(...t)=>l.handleLimitChange&&l.handleLimitChange(...t)),class:"block w-24 py-2 px-2 text-sm font-medium bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.limitOptions,(t=>((0,s.uX)(),(0,s.CE)("option",{key:t,value:t},(0,i.v_)(t),9,D)))),128))],544),[[r.u1,o.limitItem]]),(0,s.bF)(dt,{"current-page":o.currentPage,"total-items":o.totalItems,"total-pages":o.totalPages,"limit-items":o.limitItem,"data-loading":o.loading,"display-mode":"nav",onPageChanged:l.handlePageChanged,class:"ml-2"},null,8,["current-page","total-items","total-pages","limit-items","data-loading","onPageChanged"])])])]),(0,s.Lk)("tr",M,[(0,s.Lk)("td",N,[(0,s.Lk)("div",j,[(0,s.bo)((0,s.Lk)("input",{id:"search",type:"text",class:"w-full px-4 py-2 rounded-sm border-gray-300 bg-white focus:outline-none",placeholder:"ค้นหา...","onUpdate:modelValue":e[4]||(e[4]=t=>o.searchQuery=t)},null,512),[[r.Jo,o.searchQuery]]),o.searchQuery.length>0?((0,s.uX)(),(0,s.CE)("div",K,[e[8]||(e[8]=(0,s.eW)(" ผลการค้นหา ")),(0,s.Lk)("span",U,(0,i.v_)(o.totalItems),1),e[9]||(e[9]=(0,s.eW)(" รายการ (s) "))])):((0,s.uX)(),(0,s.CE)("div",q," ไม่พบข้อมูล ")),o.searchQuery.length>0?((0,s.uX)(),(0,s.CE)("button",{key:2,onClick:e[5]||(e[5]=(...t)=>l.clearSearchQuery&&l.clearSearchQuery(...t)),type:"button",class:"ml-2 text-blue-500 hover:underline focus:outline-none"}," Clear ")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",B,[(0,s.bF)(dt,{"current-page":o.currentPage,"total-items":o.totalItems,"total-pages":o.totalPages,"limit-items":o.limitItem,"data-loading":o.loading,"display-mode":"nav",onPageChanged:l.handlePageChanged},null,8,["current-page","total-items","total-pages","limit-items","data-loading","onPageChanged"])])])]),e[10]||(e[10]=(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"#"),(0,s.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"ชื่อ-นามสกุล"),(0,s.Lk)("th",{scope:"col",class:"hidden md:table-cell px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"Citizen ID"),(0,s.Lk)("th",{scope:"col",class:"hidden md:table-cell px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"การติดต่อ"),(0,s.Lk)("th",{scope:"col",class:"hidden md:table-cell px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"ลงทะเบียน"),(0,s.Lk)("th",{scope:"col",class:"hidden md:table-cell px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"วันที่ลงทะเบียน"),(0,s.Lk)("th",{scope:"col",class:"w-20 px-3 py-3.5 text-center text-sm font-semibold text-gray-900"},"เครื่องมือ")],-1))]),(0,s.Lk)("tbody",{class:(0,i.C4)(["divide-y divide-gray-200 bg-white relative",[o.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.listItems,((a,n)=>((0,s.uX)(),(0,s.CE)("tr",{key:a._id},[(0,s.Lk)("td",H,(0,i.v_)((o.currentPage-1)*o.limitItem+n+1),1),(0,s.Lk)("td",W,[(0,s.bF)(ut,{to:"/application/detail/"+a._id+"?back=/application/apply/647395e2dab7b3743c87f0c6/send",class:"text-gray-700 hover:text-indigo-600"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",{innerHTML:a.user.firstname+" "+a.user.lastname},null,8,R),e[11]||(e[11]=(0,s.Lk)("br",null,null,-1)),(0,s.Lk)("span",{class:"text-sm font-normal text-gray-500",innerHTML:a.user._id},null,8,O)])),_:2},1032,["to"])]),(0,s.Lk)("td",V,[(0,s.bF)(gt,{icon:["fas","id-card"],class:"text-gray-500 mt-[3px] mr-1 text-md"}),(0,s.Lk)("span",{innerHTML:a.user.citizen},null,8,J)]),(0,s.Lk)("td",z,[(0,s.bF)(gt,{icon:["fas","phone"],class:"text-gray-500 mt-[3px] mr-2 text-md"}),(0,s.Lk)("span",{innerHTML:a.user.phone},null,8,Y),e[12]||(e[12]=(0,s.Lk)("br",null,null,-1)),(0,s.bF)(gt,{icon:["fas","envelope"],class:"text-gray-500 mt-[3px] mr-2 text-md"}),(0,s.Lk)("span",{innerHTML:a.user.email},null,8,G)]),(0,s.Lk)("td",Z,[e[13]||(e[13]=(0,s.Lk)("span",{class:"font-semibold text-blue-500"},null,-1)),(0,s.bF)(gt,{icon:["fas","book"],class:"text-gray-500 mt-[3px] ml-2 text-md"})]),(0,s.Lk)("td",tt,(0,i.v_)(l.formatThaidate(a.user.createdAt)),1),(0,s.Lk)("td",et,[(0,s.Lk)("div",at,[(0,s.Lk)("button",{onClick:e=>t.deleteData(a.apply._id),type:"button",class:"mr-2 inline-flex justify-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,s.bF)(gt,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),e[14]||(e[14]=(0,s.Lk)("span",null,"รับเคส",-1))],8,st),(0,s.Lk)("button",{onClick:e=>t.deleteData(a.apply._id),type:"button",class:"mr-2 hidden md:inline-flex inline-flex justify-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,s.bF)(gt,{icon:["fas","trash-can"],class:"text-black mt-[3px] mr-2 text-md"}),e[15]||(e[15]=(0,s.Lk)("span",null,"ลบ",-1))],8,nt)])])])))),128)),(0,s.Lk)("tr",ot,[(0,s.Lk)("td",lt,[(0,s.Lk)("div",it,[(0,s.bF)(dt,{"current-page":o.currentPage,"total-items":o.totalItems,"total-pages":o.totalPages,"limit-items":o.limitItem,"data-loading":o.loading,"display-mode":"summary",onPageChanged:l.handlePageChanged},null,8,["current-page","total-items","total-pages","limit-items","data-loading","onPageChanged"])])])])],2)])])])])])])])])])],64)}a(44114),a(98992),a(54520),a(72577),a(14603),a(47566),a(98721);var ct=a(40475),dt=a(75435),ut=a(87814),gt=a(38558),mt=a(9964),pt={data(){const t=ct.A.get("session");return{dataItem:this.$route.params.id,dataStatus:this.$route.params.status,school:t.current.id,login:t.login,applicationData:[],listItems:[],categoryData:[],loading_sources:!0,endpoint:"",master:t.master,accessToken:ct.A.get("session","token"),configs:ct.A.get("configs"),session:ct.A.get("session"),limitItem:100,limitOptions:[10,50,100,200,500,1e3,2e3],currentPage:1,totalPages:0,totalItems:0,loading:!1,showingOverlay:!1,searchQuery:"",statusFilter:"all",isCreatingUser:!1,isShowingOverlay:!1,loadingMessage:"",processingCount:"",debounceTimer:null,activeBlock:!1}},components:{Loader:dt.A,Subhead:ut.A,Pagination:gt.A},methods:{navigateToItem(t){const e=`/application/apply/${this.applicationData._id}/${t.slug}`;this.$router.push(e)},formatThaidate(t){return mt.A.toThaiDatetime(t,"short")},handleLimitChange(){const t=ct.A.get("session");t.limitItem=this.limitItem,ct.A.set("session",t),this.currentPage=1,t.currentPage=this.currentPage,ct.A.set("session",t);const e=new URLSearchParams(window.location.search);e.set("page",t.currentPage);const a=`${window.location.pathname}?${e.toString()}`;window.history.replaceState({},"",a),console.log("getdata","handleLimitChange"),this.getData()},handlePageChanged(t){if(t!==this.currentPage){window.scrollTo(0,0),this.currentPage=t;const e=ct.A.get("session");e.currentPage=this.currentPage,ct.A.set("session",e),console.log("getdata","handlePageChanged"),this.getData()}},clearSearchQuery(){this.searchQuery="";const t=ct.A.get("session");t.searchQuery="",ct.A.set("session",t),console.log("getdata","clearSearchQuery"),this.getData()},async callAPI(t){try{const e=`https://faas-sgp1-18bc02ac.doserverless.co/api/v1/web/fn-3bf765c8-bb4f-4bac-ba41-9698000f7334/default/getstudentdata?id=${t}`,a=await fetch(e),s=await a.json();console.log(s)}catch(e){console.log(e)}},async getCourse(){try{const t=await fetch(`https://gateway.cloudrestfulapi.com/api/application/${this.dataItem}`,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}}),e=await t.json();200===t.status&&(this.applicationData=e,console.log(e))}catch(t){console.error(t)}},async getData(){try{if(this.login){this.loading=!0,this.activeBlock=!0;const t=[{applicationID:this.dataItem,status:this.dataStatus}];"all"!==this.statusFilter&&t.push({status:this.statusFilter});const e=[{$match:{$and:t}},{$addFields:{userIdObj:{$convert:{input:"$userID",to:"objectId",onError:null}}}},{$lookup:{from:"user",localField:"userIdObj",foreignField:"_id",as:"user"}},{$project:{_id:1,user:{$cond:[{$isArray:"$user"},{$arrayElemAt:["$user",0]},"$user"]},applicationID:1,form:1,document:1,status:1,next:1,createdAt:1,updatedAt:1}},{$facet:{user:[{$unwind:"$user"},{$replaceRoot:{newRoot:"$user"}}],apply:[{$skip:(this.currentPage-1)*this.limitItem},{$limit:this.limitItem}],totalCount:[{$count:"count"}]}}],a={method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({pipeline:e})},s=await fetch("https://gateway.cloudrestfulapi.com/api/apply/aggregate",a),n=await s.json();if(n){const t=n[0]?.totalCount?.[0]?.count||0,e={data:n[0].apply,total:t,paging:{page:this.currentPage,limit:this.limitItem,totalPages:Math.ceil(t/this.limitItem)}};this.listItems=e.data,this.totalItems=e.total,this.totalPages=e.paging.totalPages,console.log("data",this.listItems),this.loading=!1,this.activeBlock=!1}}}catch(t){console.log(t)}},toggleStatus(t){console.log("Toggle Status",t),this.statusFilter=t,this.getData()}},async mounted(){try{const t=new URLSearchParams(window.location.search),e=t.get("page");if(e&&/^\d+$/.test(e))this.currentPage=parseInt(e);else{const t=ct.A.get("session");if(t&&t.currentPage){this.currentPage=t.currentPage;const e=new URLSearchParams(window.location.search);e.set("page",t.currentPage);const a=`${window.location.pathname}?${e.toString()}`;window.history.replaceState({},"",a)}}const a=ct.A.get("session");a&&a.searchQuery&&(this.searchQuery=a.searchQuery);const s=a.limitItem;s&&(this.limitItem=s),await this.getData(),await this.getCourse()}catch(t){console.log(Error)}},setup(){},watch:{searchQuery(){clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((()=>{this.getData();const t=ct.A.get("session");t.searchQuery=this.searchQuery,ct.A.set("session",t),this.currentPage=1;const e=new URLSearchParams(window.location.search);e.set("page",t.currentPage);const a=`${window.location.pathname}?${e.toString()}`;window.history.replaceState({},"",a)}),500)},$route(t,e){t.params.status!==e.params.status&&(this.dataStatus=t.params.status,this.getData(t.params.status).then((()=>{console.log("Data fetched successfully.")})).catch((t=>{console.error(t)})))}},computed:{filteredListItems(){return"All"===this.selectedStatus?this.listItems:this.listItems.filter((t=>t.status===this.selectedStatus))},activeStatus(){const t=this.$route.params.status;return this.applicationData.status.find((e=>e.slug===t))}}},ht=a(64621);const yt=(0,ht.A)(pt,[["render",rt]]);var bt=yt,ft=a(74284),xt={name:"Home",components:{Dashboard:bt,Authen:ft.A},data(){return{login:ct.A.get("session","login")}},methods:{},mounted(){},setup(){const t=(0,l.lq)(),e=t.meta.title;(0,o.K7)(e),console.log("Dashboard")}};const kt=(0,ht.A)(xt,[["render",n]]);var vt=kt},87814:function(t,e,a){a.d(e,{A:function(){return E}});var s=a(20641),n=a(90033),o=a(53751);const l={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},i={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},r={class:"min-w-0 flex-1"},c={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},d={key:0,class:"text-sm text-gray-500"},u={class:"mt-5 flex xl:mt-0 xl:ml-4"},g={class:"flex items-center space-x-2"},m={class:"text-sm text-gray-400"},p=["onUpdate:modelValue","placeholder","onChange"],h={value:"",disabled:""},y=["value"],b=["onClick"],f={class:"text-sm hidden sm:inline-block ml-1"},x=["onClick"],k={class:"text-sm hidden sm:inline-block ml-1"};function v(t,e,a,v,L,C){const w=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("header",l,[(0,s.Lk)("div",i,[(0,s.Lk)("div",r,[(0,s.Lk)("h1",c,[(0,s.bF)(w,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,s.eW)(" "+(0,n.v_)(a.pageTitle?a.pageTitle:this.PageName),1)]),a.subhead?((0,s.uX)(),(0,s.CE)("p",d,(0,n.v_)(a.subhead),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",u,[(0,s.Lk)("div",g,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.navigation,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},["select"===e.type?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("label",m,(0,n.v_)(e.placeholder),1),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t=>e.value=t,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:e.placeholder,onChange:a=>t.$emit("toggleStatus",e.value)},[(0,s.Lk)("option",h,"-- "+(0,n.v_)(e.placeholder)+" --",1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.options,((t,e)=>((0,s.uX)(),(0,s.CE)("option",{key:e,value:t.value},(0,n.v_)(t.name),9,y)))),128))],40,p),[[o.u1,e.value]])],64)):"call-function"===e.type?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[!1!==e.visible?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:a=>t.$emit(e.function),type:"button",class:(0,n.C4)(C.getClasses(e.class))},[(0,s.bF)(w,{icon:["fas",`${e.style}`],class:(0,n.C4)({"text-gray-500 mr-2":"icon-btn"===e.class,"text-white":"primary-btn"===e.class})},null,8,["icon","class"]),(0,s.Lk)("span",f,(0,n.v_)(e.name),1)],10,b)):(0,s.Q3)("",!0)],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[!1!==e.visible?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t=>C.handleNavigationClick(e),type:"button",class:(0,n.C4)(C.getClasses(e.class))},[(0,s.bF)(w,{icon:["fas",`${e.style}`],class:(0,n.C4)({"text-gray-500 mr-2":"icon-btn"===e.class,"text-white":"primary-btn"===e.class})},null,8,["icon","class"]),(0,s.Lk)("span",k,(0,n.v_)(e.name),1)],10,x)):(0,s.Q3)("",!0)],64))],64)))),128))])])])])}a(44114);var L=a(75220),C=a(52968),w=a(23264),P=a(93426),A={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const t=(0,L.lq)();return console.log("Translate",(0,P.Tl)("router-"+t.meta.parent+"-"+t.meta.key)),{PageName:(0,P.iX)(),PageIcon:t.meta.icon,PagePath:t.meta.path,ParentName:t.meta.parent,ParentPage:t.meta.page}},setup(){(0,C.K7)((0,P.iX)())},methods:{getClasses(t){const e=(0,w.c)(t);return`${e}`},handleNavigationClick(t){t.function?this.$emit(t.eventName||t.function):this.$router.push(t.link)}}},I=a(64621);const $=(0,I.A)(A,[["render",v]]);var E=$},38558:function(t,e,a){a.d(e,{A:function(){return E}});var s=a(20641),n=a(90033);const o={class:"flex flex-col justify-center items-center h-full"},l={key:0,class:"flex flex-wrap justify-center"},i=["disabled"],r={key:0,class:"font-medium"},c=["disabled"],d=["onClick","disabled"],u={key:1,class:"font-medium"},g=["disabled"],m=["disabled"],p={key:1,class:"text-sm text-gray-400 text-center"},h={class:"font-medium"},y={class:"text-gray-600"},b={class:"font-medium"},f={class:"text-gray-600"},x={class:"font-medium"},k={class:"text-gray-600"},v={class:"font-medium"},L={class:"text-gray-600"};function C(t,e,a,C,w,P){const A=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("div",o,["nav"===a.displayMode||"full"===a.displayMode?((0,s.uX)(),(0,s.CE)("ul",l,[(0,s.Lk)("li",{class:(0,n.C4)({"opacity-50 cursor-not-allowed":1===w.activePage})},[(0,s.Lk)("button",{onClick:e[0]||(e[0]=t=>P.handleButtonClick(w.activePage-1)),disabled:a.dataLoading||w.buttonClicked,class:"block px-2 py-2 rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[(0,s.bF)(A,{icon:["fas","chevron-left"],class:"text-gray-700 pl-1 pr-1 text-md"})],8,i)],2),w.activePage>2?((0,s.uX)(),(0,s.CE)("li",r,[(0,s.Lk)("button",{onClick:e[1]||(e[1]=t=>P.handleButtonClick(1)),disabled:a.dataLoading||w.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"}," หน้าแรก ",8,c)])):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(P.pages,(t=>((0,s.uX)(),(0,s.CE)("li",{key:t,class:(0,n.C4)([{"bg-indigo-100 ml-1 mr-1 rounded-md border-indigo-500 text-indigo-600 font-semibold":w.activePage===t},"font-medium"])},[(0,s.Lk)("button",{onClick:e=>P.handleButtonClick(t),disabled:a.dataLoading||w.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"},(0,n.v_)(t.toString().padStart(2,"0")),9,d)],2)))),128)),w.activePage<a.totalPages-1?((0,s.uX)(),(0,s.CE)("li",u,[(0,s.Lk)("button",{onClick:e[2]||(e[2]=t=>P.handleButtonClick(a.totalPages)),disabled:a.dataLoading||w.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"}," หน้าสุดท้าย ",8,g)])):(0,s.Q3)("",!0),(0,s.Lk)("li",{class:(0,n.C4)({"opacity-50 cursor-not-allowed":w.activePage===a.totalPages})},[(0,s.Lk)("button",{onClick:e[3]||(e[3]=t=>P.handleButtonClick(w.activePage+1)),disabled:a.dataLoading||w.buttonClicked,class:"block px-2 py-2 rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[(0,s.bF)(A,{icon:["fas","chevron-right"],class:"text-gray-700 pl-1 pr-1 text-md"})],8,m)],2)])):(0,s.Q3)("",!0),"summary"===a.displayMode||"full"===a.displayMode?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.eW)((0,n.v_)(P.translate("paging-display"))+" ",1),(0,s.Lk)("span",h,[(0,s.Lk)("span",y,(0,n.v_)(P.startItem),1)]),(0,s.eW)(" "+(0,n.v_)(P.translate("paging-to"))+" ",1),(0,s.Lk)("span",b,[(0,s.Lk)("span",f,(0,n.v_)(P.endItem),1)]),e[4]||(e[4]=(0,s.eW)(" / ")),(0,s.Lk)("span",x,[(0,s.Lk)("span",k,(0,n.v_)(P.formatNumber(a.totalPages)),1)]),(0,s.eW)(" "+(0,n.v_)(P.translate("paging-page"))+" | "+(0,n.v_)(P.translate("paging-from"))+" ",1),(0,s.Lk)("span",v,[(0,s.Lk)("span",L,(0,n.v_)(P.formatNumber(a.totalItems)),1)]),(0,s.eW)(" "+(0,n.v_)(P.translate("paging-item")),1)])):(0,s.Q3)("",!0)])}a(44114),a(14603),a(47566),a(98721);var w=a(9964),P=a(93426),A={props:{currentPage:{type:Number,required:!0},dataLoading:{type:Boolean,required:!0},displayMode:{type:String,required:!0,default:"full"},totalPages:{type:Number,required:!0},totalItems:{type:Number,required:!0},limitItems:{type:Number,required:!0}},data(){return{activePage:this.currentPage,buttonClicked:!1}},computed:{pages(){if(window.innerWidth>=600){const t=Math.max(this.activePage-2,1),e=Math.min(this.activePage+2,this.totalPages);let a=[];for(let s=t;s<=e;s++)a.push(s);return a}{let t=Math.max(this.activePage-1,1),e=Math.min(t+2,this.totalPages);e-t<2&&(t=Math.max(e-2,1));let a=[];for(let s=t;s<=e;s++)a.push(s);return a}},startItem(){return(this.activePage-1)*this.limitItems+1},endItem(){return Math.min(this.activePage*this.limitItems,this.totalItems)}},methods:{translate:P.Tl,formatNumber(t){return w.A.formatNumber(t,"short")},goToPage(t){if(t<1||t>this.totalPages)return;const e=new URLSearchParams(window.location.search),a=e.get("searchQuery");let s="";t>1&&a?s=`?page=${t}&searchQuery=${a}`:t>1?s=`?page=${t}`:a&&(s=`?searchQuery=${a}`);const n=`${window.location.pathname}${s||""}`;window.history.pushState({path:n},"",n),this.activePage=t,this.$emit("page-changed",t)},handleButtonClick(t){this.buttonClicked||(this.buttonClicked=!0,this.goToPage(t),setTimeout((()=>{this.buttonClicked=!1}),1e3))}},watch:{currentPage(t){this.activePage=t},activePage(t){this.$emit("page-changed",t)},$route(){}},created(){const t=new URLSearchParams(window.location.search),e=t.get("page");if(e){const t=parseInt(e);isNaN(t)||this.goToPage(t)}}},I=a(64621);const $=(0,I.A)(A,[["render",C]]);var E=$},74284:function(t,e,a){a.d(e,{A:function(){return u}});var s=a(20641);function n(t,e,a,n,o,l){return(0,s.uX)(),(0,s.CE)("div")}var o=a(75220),l=a(63084),i=a(40475),r={name:"Authen",data(){return{configs:i.A.get("configs"),session:i.A.get("session")}},created(){l.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const t=(0,o.lq)(),e=t.meta.auth,a=t.name,s=i.A.get("session");let n=s.token,r=s.login,c=s.current;l.A.log("hasLogin",r),l.A.log("Page -> Auth:",e),l.A.log("User -> Token:",n),l.A.log("User -> Login:",r),"frontend"===this.session.interface?l.A.log("Front-End"):"backend"===this.session.interface&&(l.A.log("Back-End"),r?("Login"==a||void 0==c?(l.A.log("Not Login Again"),this.$router.replace({path:"/"})):(l.A.log("Has School Active"),e?(l.A.log("This page is : Authen Request"),""===n||null===n||void 0==n?l.A.log("Your Cannot Access"):l.A.log("Your Can Access")):l.A.log("This page is : No Authen Request")),l.A.log("Login")):(l.A.log("Not Login"),"Login"!=a?(window.location.href="/member/login",l.A.log("Not Login Page",a)):l.A.log("Login Page",a)))}},setup(){}},c=a(64621);const d=(0,c.A)(r,[["render",n]]);var u=d},23264:function(t,e,a){function s(t){switch(t){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}a.d(e,{c:function(){return s}})}}]);
//# sourceMappingURL=7143.85a37c66.js.map