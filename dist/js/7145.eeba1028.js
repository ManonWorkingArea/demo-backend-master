(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[7145],{18840:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return xs}});var o=s(20641);function l(e,t,s,l,i,a){const r=(0,o.g2)("Authen"),n=(0,o.g2)("Dashboard");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(r),this.login?((0,o.uX)(),(0,o.Wv)(n,{key:0})):(0,o.Q3)("",!0)],64)}var i=s(52968),a=s(75220),r=s(53751),n=s(90033);const d={class:"flex-1 pb-8"},c={class:"mt-8"},u={class:"flex-1 bg-gray-100"},g={class:"mt-8"},m={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},p={class:"space-y-6 sm:px-6 lg:col-span-9 lg:px-0"},b={class:"shadow sm:overflow-hidden sm:rounded-md"},f={class:"bg-white py-6 px-4 sm:p-6"},h={id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},k={class:"mt-6 flex gap-6"},y={class:"w-2/5 bg-gray-200/80 rounded-lg"},v={class:"p-3 bg-white bg-opacity-80 rounded-lg"},x={class:"w-3/5"},L={class:"grid grid-cols-1 md:grid-cols-1 gap-6"},w={class:"w-2/5 bg-gray-200/80 rounded-lg"},C={class:"p-3 bg-white bg-opacity-80 rounded-lg"},_={class:"w-3/5"},S={class:"grid grid-cols-1 md:grid-cols-1 gap-6"},F={class:"mt-6 flex gap-6"},A={class:"w-2/5 bg-gray-200/80 rounded-lg"},E={class:"p-3 bg-white bg-opacity-80 rounded-lg"},B={class:"w-3/5"},D={class:"grid grid-cols-1 md:grid-cols-1 gap-6"},M={class:"w-2/5 bg-gray-200/80 rounded-lg"},U={class:"p-3 bg-white bg-opacity-80 rounded-lg"},P={class:"w-3/5"},X={class:"grid grid-cols-1 md:grid-cols-1 gap-6"},W={class:"mt-6 grid grid-cols-4 gap-6"},T={class:"col-span-4"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},R={class:"col-span-4"},$={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},O={class:"col-span-4"},j={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2 mb-5"},V=["value"],J={class:"w-full h-30 relative text-center object-cover pt-10"},N={class:"flex flex-col items-center justify-center"},z={class:"relative text-center w-1/2"},K={class:"absolute w-full text-xs pt-2 text-white"},Q={class:"absolute w-full bg-gray-200 h-[6px] bottom-0"},q={class:"p-4"},H={class:"font-bold text-gray-600"},G={class:"text-xs text-gray-400"},Y={class:"text-xs text-gray-400"},Z={class:"grid grid-cols-4 md:grid-cols-4 gap-6"},ee={class:"col-span-4"},te={class:"grid grid-cols-4 md:grid-cols-4 gap-6"},se={class:"mt-6 grid grid-cols-4 gap-6"},oe={class:"col-span-4"},le={class:"grid grid-cols-3 md:grid-cols-3 gap-6"},ie={class:"col-span-4"},ae={class:"grid grid-cols-3 md:grid-cols-3 gap-6"},re={class:"mt-5 grid grid-cols-4 gap-6"},ne={class:"col-span-4 sm:col-span-4"},de={class:"grid grid-cols-1 lg:grid-cols-2 gap-1 justify-evenly"},ce={class:"w-26 h-12"},ue={class:"flex items-start"},ge={class:"flex h-5 items-center"},me={class:"w-26 h-12"},pe={class:"flex items-start"},be={class:"flex h-5 items-center"},fe={class:"mt-6 grid grid-cols-8 gap-6"},he={class:"col-span-4"},ke={class:"grid grid-cols-1 md:grid-cols-1 gap-6"},ye={class:"space-y-3"},ve={class:"mt-2"},xe={class:"grid grid-cols-3 gap-3 sm:grid-cols-5"},Le=["onClick"],we=["value"],Ce={class:"col-span-4"},_e={class:"grid grid-cols-1 md:grid-cols-1 gap-6"},Se={class:"space-y-3"},Fe={class:"mt-2"},Ae={class:"grid grid-cols-3 gap-3 sm:grid-cols-5"},Ee=["onClick"],Be=["value"],De={class:"col-span-4"},Me={class:"grid grid-cols-1 md:grid-cols-1 gap-6"},Ue={class:"space-y-3"},Pe={class:"mt-2"},Xe={class:"grid grid-cols-3 gap-3 sm:grid-cols-5"},We=["onClick"],Te=["value"],Ie={class:"mt-5"},Re={class:"col-span-4"},$e={class:"grid grid-cols-1 md:grid-cols-1 gap-6"},Oe={class:"space-y-3"},je={class:"mt-2"},Ve={class:"grid grid-cols-3 gap-3 sm:grid-cols-5"},Je=["onClick"],Ne=["value"],ze={class:"mt-5"},Ke={class:"col-span-4"},Qe={class:"grid grid-cols-1 md:grid-cols-1 gap-6"},qe={class:"space-y-3"},He={class:"mt-2"},Ge={class:"mt-5"},Ye={class:"mt-2"},Ze={class:"mt-5"},et={class:"col-span-4"},tt={class:"grid grid-cols-1 md:grid-cols-1 gap-6"},st={class:"space-y-3"},ot={class:"mt-2"},lt={class:"mt-5"},it=["value"],at={class:"mt-2"},rt={class:"mt-5"},nt=["value"],dt={class:"mt-2"},ct={class:"mt-5"},ut=["value"],gt={class:"mt-2"},mt={class:"mt-5"},pt={class:"mt-2"},bt={class:"mt-5"},ft=["value"],ht={class:"mt-5 grid grid-cols-3 gap-4"},kt=["value"],yt={class:"ml-2"},vt={class:"font-medium block"},xt={class:"text-gray-500 text-sm block"},Lt={class:"mt-6"},wt={class:"text-lg text-gray-600 font-bold mb-2"},Ct={class:"ml-2"},_t={class:"text-md font-semibold mb-4 mt-4 text-gray-500"},St={class:"grid grid-cols-3 gap-4"},Ft=["name","value","checked"],At={class:"block text-blue-900 text-md font-semibold"},Et={class:"font-normal text-gray-500 mr-1"},Bt={class:"block text-gray-400 text-sm"},Dt={class:"mt-6"},Mt={class:"text-lg text-gray-600 font-bold mb-2"},Ut={class:"ml-2"},Pt={class:"text-md font-semibold mb-4 mt-4 text-gray-500"},Xt={class:"grid grid-cols-3 gap-4"},Wt=["name","value","checked"],Tt={class:"block text-blue-900 text-md font-semibold"},It={class:"font-normal text-gray-500 mr-1"},Rt={class:"block text-gray-500 text-sm"},$t={class:"pt-3 w-full"},Ot={class:"mt-1 grid grid-cols-3 gap-4"},jt=["id","value"],Vt=["for"],Jt={class:"block text-gray-700 text-md font-semibold"},Nt={class:"block text-gray-500 text-sm"},zt={class:"bg-gray-50 px-4 py-3 text-right sm:px-6 border-t"},Kt={type:"submit",class:"inline-flex justify-center rounded-md border border-transparent bg-gray-800 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"};function Qt(e,t,s,l,i,a){const Qt=(0,o.g2)("FileBrowser"),qt=(0,o.g2)("Subhead"),Ht=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[i.FileBrowserOpen?((0,o.uX)(),(0,o.Wv)(Qt,{key:0,isWindowsOpen:!0,callbackFunction:"cover",allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:a.changeFileTrigger,onFileBrowserCallback:a.selectFileTrigger},null,8,["onFileBrowserTrigger","onFileBrowserCallback"])):(0,o.Q3)("",!0),(0,o.bF)(qt,{navigation:[{name:"ปรับแต่งเมนู",link:"/school/menu/"+this.dataItem,style:"list",class:"primary-btn",visible:!0,type:"button"},{name:"ย้อนกลับ",link:"/school/dashboard",style:"chevron-left",class:"primary-btn",visible:!0,type:"button"}]},null,8,["navigation"]),(0,o.Lk)("main",d,[(0,o.Lk)("div",c,[(0,o.Lk)("div",u,[(0,o.Lk)("div",g,[(0,o.Lk)("div",m,[(0,o.Lk)("div",p,[(0,o.Lk)("form",{onSubmit:t[43]||(t[43]=(0,r.D$)(((...e)=>a.updateData&&a.updateData(...e)),["prevent"]))},[(0,o.Lk)("section",{"aria-labelledby":"payment-details-heading",class:(0,n.C4)(["relative",[i.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,o.Lk)("div",b,[(0,o.Lk)("div",f,[(0,o.Lk)("div",null,[(0,o.Lk)("h2",h,"โลโก้และกราฟิก - "+(0,n.v_)(this.type),1),t[44]||(t[44]=(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Customize your website's visual elements with ease using Logo & Graphic Setting.",-1))]),(0,o.Lk)("div",k,[(0,o.Lk)("div",y,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>a.OpenFileBrowser("siteLogo")),style:(0,n.Tr)([{"background-image":"url("+this.siteLogo+")"},{"background-size":"cover","background-position":"center"}]),type:"button",class:"relative bg-cover block w-full h-full rounded-lg border-2 border-dashed border-gray-300 p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.Lk)("div",v,[(0,o.bF)(Ht,{icon:["fas","cloud-upload"],class:"mx-auto h-12 w-12 text-gray-600"}),t[45]||(t[45]=(0,o.Lk)("span",{class:"mt-2 block text-sm font-semibold text-gray-600"},"เปลี่ยนโลโก้",-1))])],4)]),(0,o.Lk)("div",x,[(0,o.Lk)("div",L,[(0,o.Lk)("div",null,[t[46]||(t[46]=(0,o.Lk)("label",{for:"siteLogo",class:"block text-sm font-semibold text-gray-700"},"Website Logo",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.siteLogo=e),type:"text",name:"siteLogo",id:"siteLogo",autocomplete:"siteLogo",readonly:"",class:(0,n.C4)([a.getClasses("input-plaintext"),"mt-1 block w-full rounded-md py-2 px-3"])},null,2),[[r.Jo,i.siteLogo]]),t[47]||(t[47]=(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Please upload a logo image file in JPEG or PNG format, with a recommended file size of 200x200 pixels or larger.",-1))])])]),(0,o.Lk)("div",w,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>a.OpenFileBrowser("loginLogo")),style:(0,n.Tr)([{"background-image":"url("+this.loginLogo+")"},{"background-size":"cover","background-position":"center"}]),type:"button",class:"relative bg-cover block w-full h-full rounded-lg border-2 border-dashed border-gray-300 p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.Lk)("div",C,[(0,o.bF)(Ht,{icon:["fas","cloud-upload"],class:"mx-auto h-12 w-12 text-gray-600"}),t[48]||(t[48]=(0,o.Lk)("span",{class:"mt-2 block text-sm font-semibold text-gray-600"},"เปลี่ยนโลโก้ Login",-1))])],4)]),(0,o.Lk)("div",_,[(0,o.Lk)("div",S,[(0,o.Lk)("div",null,[t[49]||(t[49]=(0,o.Lk)("label",{for:"loginLogo",class:"block text-sm font-semibold text-gray-700"},"Login Logo",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>i.loginLogo=e),type:"text",name:"loginLogo",id:"loginLogo",autocomplete:"loginLogo",readonly:"",class:(0,n.C4)([a.getClasses("input-plaintext"),"mt-1 block w-full rounded-md py-2 px-3"])},null,2),[[r.Jo,i.loginLogo]]),t[50]||(t[50]=(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Please upload a logo image file in JPEG or PNG format, with a recommended file size of 200x200 pixels or larger.",-1))])])])]),(0,o.Lk)("div",F,[(0,o.Lk)("div",A,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>a.OpenFileBrowser("loginBg")),style:(0,n.Tr)([{"background-image":"url("+this.loginBg+")"},{"background-size":"cover","background-position":"center"}]),type:"button",class:"relative bg-cover block w-full h-full rounded-lg border-2 border-dashed border-gray-300 p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.Lk)("div",E,[(0,o.bF)(Ht,{icon:["fas","cloud-upload"],class:"mx-auto h-12 w-12 text-gray-600"}),t[51]||(t[51]=(0,o.Lk)("span",{class:"mt-2 block text-sm font-semibold text-gray-600"},"เปลี่ยน Login Bg",-1))])],4)]),(0,o.Lk)("div",B,[(0,o.Lk)("div",D,[(0,o.Lk)("div",null,[t[52]||(t[52]=(0,o.Lk)("label",{for:"loginBg",class:"block text-sm font-semibold text-gray-700"},"Login Background",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.loginBg=e),type:"text",name:"loginBg",id:"loginBg",autocomplete:"loginBg",readonly:"",class:(0,n.C4)([a.getClasses("input-plaintext"),"mt-1 block w-full rounded-md py-2 px-3"])},null,2),[[r.Jo,i.loginBg]]),t[53]||(t[53]=(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Upload a JPEG/PNG image (max 5MB) for website background.",-1))])])]),(0,o.Lk)("div",M,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=e=>a.OpenFileBrowser("siteFavicon")),style:(0,n.Tr)([{"background-image":"url("+this.siteFavicon+")"},{"background-size":"cover","background-position":"center"}]),type:"button",class:"relative bg-cover block w-full h-full rounded-lg border-2 border-dashed border-gray-300 p-6 text-center hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.Lk)("div",U,[(0,o.bF)(Ht,{icon:["fas","cloud-upload"],class:"mx-auto h-12 w-12 text-gray-600"}),t[54]||(t[54]=(0,o.Lk)("span",{class:"mt-2 block text-sm font-semibold text-gray-600"},"เปลี่ยนไอค่อน Favicon",-1))])],4)]),(0,o.Lk)("div",P,[(0,o.Lk)("div",X,[(0,o.Lk)("div",null,[t[55]||(t[55]=(0,o.Lk)("label",{for:"siteFavicon",class:"block text-sm font-semibold text-gray-700"},"Favicon",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.siteFavicon=e),type:"text",name:"siteFavicon",id:"siteFavicon",autocomplete:"siteFavicon",readonly:"",class:(0,n.C4)([a.getClasses("input-plaintext"),"mt-1 block w-full rounded-md py-2 px-3"])},null,2),[[r.Jo,i.siteFavicon]]),t[56]||(t[56]=(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Upload a 16x16 pixel image file in ICO or PNG format.",-1))])])])]),t[104]||(t[104]=(0,o.Lk)("div",{class:"border-b border-1 border-dashed border-gray-300 mb-10 mt-10"},null,-1)),t[105]||(t[105]=(0,o.Lk)("div",{class:"mt-6"},[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"ข้อมูลระบบ"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Manage your website's system information and settings with ease using System Information Config.")],-1)),(0,o.Lk)("div",W,[(0,o.Lk)("div",T,[(0,o.Lk)("div",I,[(0,o.Lk)("div",null,[t[57]||(t[57]=(0,o.Lk)("label",{for:"id",class:"block text-sm font-medium text-gray-700"},"Site ID",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.id=e),type:"text",name:"id",id:"id",autocomplete:"id",readonly:"",class:(0,n.C4)([a.getClasses("input-plaintext"),"mt-1 text-gray-300 block w-full rounded-md py-2 px-3"])},null,2),[[r.Jo,i.id]])])])]),(0,o.Lk)("div",R,[(0,o.Lk)("div",$,[(0,o.Lk)("div",null,[t[58]||(t[58]=(0,o.Lk)("label",{for:"siteName",class:"block text-sm font-medium text-gray-700"},"Site Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.siteName=e),type:"text",name:"siteName",id:"siteName",autocomplete:"siteName",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.siteName]])]),(0,o.Lk)("div",null,[t[59]||(t[59]=(0,o.Lk)("label",{for:"hostname",class:"block text-sm font-medium text-gray-700"},"Hostname",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>i.hostname=e),type:"text",name:"hostname",id:"hostname",autocomplete:"hostname",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.hostname]])])])]),t[67]||(t[67]=(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"เลือก Space สำหรับเก็บไฟล์",-1)),(0,o.Lk)("div",O,[(0,o.Lk)("div",j,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.spaceList,(e=>((0,o.uX)(),(0,o.CE)("label",{key:e._id,class:"cursor-pointer"},[(0,o.bo)((0,o.Lk)("input",{type:"radio",value:e._id,"onUpdate:modelValue":t[11]||(t[11]=e=>i.spaceId=e),class:"hidden"},null,8,V),[[r.XL,i.spaceId]]),(0,o.Lk)("div",{class:(0,n.C4)(["bg-white rounded-lg shadow-md overflow-hidden border border-gray-300",{["border-4 border-green-500"]:a.isSpaceSelected(e._id)}])},[(0,o.Lk)("div",J,[(0,o.Lk)("div",N,[(0,o.Lk)("div",z,[(0,o.Lk)("div",K,(0,n.v_)(this.calculateDiskUsagePercentage(e.size/1024,e.spaceSize))+"%",1),(0,o.bF)(Ht,{icon:["fas","hdd"],class:"text-blue-600 text-[60px] mb-4"}),(0,o.Lk)("div",Q,[(0,o.Lk)("div",{class:(0,n.C4)(["absolute bottom-0",{"bg-green-500":this.calculateDiskUsagePercentage(e.size/1024,e.spaceSize)<50,"bg-blue-500":this.calculateDiskUsagePercentage(e.size/1024,e.spaceSize)>=50&&this.calculateDiskUsagePercentage(e.size/1024,e.spaceSize)<70,"bg-orange-500":this.calculateDiskUsagePercentage(e.size/1024,e.spaceSize)>=70&&this.calculateDiskUsagePercentage(e.size/1024,e.spaceSize)<90,"bg-red-500":this.calculateDiskUsagePercentage(e.size/1024,e.spaceSize)>=90}]),style:(0,n.Tr)(["width:"+Math.min(this.calculateDiskUsagePercentage(e.size/1024,e.spaceSize),100)+"%;",{height:"6px"}])},null,6)])])])]),(0,o.Lk)("div",q,[(0,o.Lk)("p",H,(0,n.v_)(e.name),1),(0,o.Lk)("p",G,(0,n.v_)(this.formatBytes(e.size))+" / "+(0,n.v_)(e.spaceSize)+" GB",1),(0,o.Lk)("p",Y,(0,n.v_)(e.count)+" Files",1)])],2)])))),128))]),(0,o.Lk)("div",Z,[(0,o.Lk)("div",null,[t[60]||(t[60]=(0,o.Lk)("label",{for:"s3Key",class:"block text-sm font-medium text-gray-700"},"s3Key",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>i.s3Key=e),type:"text",name:"s3Key",id:"s3Key",autocomplete:"s3Key",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.s3Key]])]),(0,o.Lk)("div",null,[t[61]||(t[61]=(0,o.Lk)("label",{for:"s3Endpoint",class:"block text-sm font-medium text-gray-700"},"s3Endpoint",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>i.s3Endpoint=e),type:"text",name:"s3Endpoint",id:"s3Endpoint",autocomplete:"s3Endpoint",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.s3Endpoint]])]),(0,o.Lk)("div",null,[t[62]||(t[62]=(0,o.Lk)("label",{for:"s3Hosting",class:"block text-sm font-medium text-gray-700"},"s3Hosting",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>i.s3Hosting=e),type:"text",name:"s3Hosting",id:"s3Hosting",autocomplete:"s3Hosting",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.s3Hosting]])]),(0,o.Lk)("div",null,[t[63]||(t[63]=(0,o.Lk)("label",{for:"s3Secret",class:"block text-sm font-medium text-gray-700"},"s3Secret",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.s3Secret=e),type:"text",name:"s3Secret",id:"s3Secret",autocomplete:"s3Secret",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.s3Secret]])])])]),(0,o.Lk)("div",ee,[(0,o.Lk)("div",te,[(0,o.Lk)("div",null,[t[64]||(t[64]=(0,o.Lk)("label",{for:"s3Region",class:"block text-sm font-medium text-gray-700"},"s3Region",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>i.s3Region=e),type:"text",name:"s3Region",id:"s3Region",autocomplete:"s3Region",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.s3Region]])]),(0,o.Lk)("div",null,[t[65]||(t[65]=(0,o.Lk)("label",{for:"s3EndpointDefault",class:"block text-sm font-medium text-gray-700"},"s3EndpointDefault",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>i.s3EndpointDefault=e),type:"text",name:"s3EndpointDefault",id:"s3EndpointDefault",autocomplete:"s3EndpointDefault",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.s3EndpointDefault]])]),(0,o.Lk)("div",null,[t[66]||(t[66]=(0,o.Lk)("label",{for:"s3Bucket",class:"block text-sm font-medium text-gray-700"},"s3Bucket",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>i.s3Bucket=e),type:"text",name:"s3Bucket",id:"s3Bucket",autocomplete:"s3Bucket",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.s3Bucket]])])])])]),t[106]||(t[106]=(0,o.Lk)("div",{class:"border-b border-1 border-dashed border-gray-300 mb-10 mt-10"},null,-1)),t[107]||(t[107]=(0,o.Lk)("div",{class:"mt-6"},[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"ข้อมูล Email Service (Sendlayer)"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Manage your website's system information and settings with ease using System Information Config.")],-1)),(0,o.Lk)("div",se,[(0,o.Lk)("div",oe,[(0,o.Lk)("div",le,[(0,o.Lk)("div",null,[t[68]||(t[68]=(0,o.Lk)("label",{for:"email_url",class:"block text-sm font-medium text-gray-700"},"API Endpoint",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>i.email_url=e),type:"text",name:"email_url",id:"email_url",autocomplete:"email_url",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.email_url]])]),(0,o.Lk)("div",null,[t[69]||(t[69]=(0,o.Lk)("label",{for:"email_key",class:"block text-sm font-medium text-gray-700"},"API Key",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>i.email_key=e),type:"text",name:"email_key",id:"email_key",autocomplete:"email_key",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.email_key]])]),(0,o.Lk)("div",null,[t[70]||(t[70]=(0,o.Lk)("label",{for:"email_provider",class:"block text-sm font-medium text-gray-700"},"Provider Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[21]||(t[21]=e=>i.email_provider=e),type:"text",name:"email_provider",id:"email_provider",autocomplete:"email_provider",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.email_provider]])])])]),(0,o.Lk)("div",ie,[(0,o.Lk)("div",ae,[(0,o.Lk)("div",null,[t[71]||(t[71]=(0,o.Lk)("label",{for:"email_from_email",class:"block text-sm font-medium text-gray-700"},"From Email",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[22]||(t[22]=e=>i.email_from_email=e),type:"text",name:"email_from_email",id:"email_from_email",autocomplete:"email_from_email",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.email_from_email]])]),(0,o.Lk)("div",null,[t[72]||(t[72]=(0,o.Lk)("label",{for:"email_from_name",class:"block text-sm font-medium text-gray-700"},"From Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[23]||(t[23]=e=>i.email_from_name=e),type:"text",name:"email_from_name",id:"email_from_name",autocomplete:"s3Endpoint",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.email_from_name]])])])])]),t[108]||(t[108]=(0,o.Lk)("div",{class:"border-b border-1 border-dashed border-gray-300 mb-10 mt-10"},null,-1)),(0,o.Lk)("div",null,[t[75]||(t[75]=(0,o.Lk)("div",null,[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"Theme"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Customize your website's visual elements with ease using Logo & Graphic Setting.")],-1)),(0,o.Lk)("div",re,[(0,o.Lk)("div",ne,[(0,o.Lk)("div",de,[(0,o.Lk)("div",ce,[(0,o.Lk)("div",ue,[(0,o.Lk)("div",ge,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[24]||(t[24]=e=>i.siteTheme=e),id:"theme1",value:"yes",type:"radio",class:"h-4 w-4 cursor-pointer rounded-full border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[r.XL,i.siteTheme]])]),t[73]||(t[73]=(0,o.Lk)("div",{class:"ml-3 text-sm w-[90%]"},[(0,o.Lk)("label",{for:"theme1",class:"font-bold text-gray-900"},"ใช้ Custom Theme"),(0,o.Lk)("p",{class:"invisible lg:visible text-[16px] text-gray-500 truncate"},"ดึงข้อมูลบางส่วนจาก Theme ของเว็บไซต์")],-1))])]),(0,o.Lk)("div",me,[(0,o.Lk)("div",pe,[(0,o.Lk)("div",be,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[25]||(t[25]=e=>i.siteTheme=e),id:"theme2",value:"no",type:"radio",class:"h-4 w-4 cursor-pointer rounded-full border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[r.XL,i.siteTheme]])]),t[74]||(t[74]=(0,o.Lk)("div",{class:"ml-3 text-sm w-[90%]"},[(0,o.Lk)("label",{for:"theme2",class:"font-bold text-gray-900"},"ไม่ใช้ Custom Theme"),(0,o.Lk)("p",{class:"invisible lg:visible text-[16px] text-gray-500 truncate"},"ดึงข้อมูลจาก System ทั้งหมด")],-1))])])])])])]),t[109]||(t[109]=(0,o.Lk)("div",{class:"border-b border-1 border-dashed border-gray-300 mb-10 mt-10"},null,-1)),t[110]||(t[110]=(0,o.Lk)("div",{class:"mt-6"},[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"Header Option"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Manage your website's system information and settings with ease using System Information Config.")],-1)),(0,o.Lk)("div",fe,[(0,o.Lk)("div",he,[(0,o.Lk)("div",ke,[(0,o.Lk)("div",ye,[t[76]||(t[76]=(0,o.Lk)("legend",{class:"text-base font-semibold leading-6 text-gray-900"},"เลือกตำแหน่ง Header",-1)),(0,o.Lk)("div",ve,[(0,o.Lk)("div",xe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.layoutOption,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:(0,n.C4)([i.selectedlayout===e.value?"cursor-pointer ring-2 ring-indigo-600 ring-offset-2 bg-indigo-600 text-white hover:bg-indigo-500":"cursor-pointer ring-1 ring-inset ring-gray-300 bg-white text-gray-900 hover:bg-gray-50","cursor-pointer flex items-center justify-center rounded-md py-3 px-3 text-sm font-semibold sm:flex-1"]),onClick:t=>i.selectedlayout=e.value},[(0,o.bo)((0,o.Lk)("input",{type:"radio",class:"sr-only",value:e.value,"onUpdate:modelValue":t[26]||(t[26]=e=>i.selectedlayout=e)},null,8,we),[[r.XL,i.selectedlayout]]),(0,o.eW)(" "+(0,n.v_)(e.label),1)],10,Le)))),128))])])])]),t[77]||(t[77]=(0,o.Lk)("div",{class:"border-b border-1 border-dashed border-gray-300 mt-5"},null,-1))]),(0,o.Lk)("div",Ce,[(0,o.Lk)("div",_e,[(0,o.Lk)("div",Se,[t[78]||(t[78]=(0,o.Lk)("legend",{class:"text-base font-semibold leading-6 text-gray-900"},"เลือกตำแหน่ง Header",-1)),(0,o.Lk)("div",Fe,[(0,o.Lk)("div",Ae,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.layoutPositions,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:(0,n.C4)([i.selectedposition===e.value?"cursor-pointer ring-2 ring-indigo-600 ring-offset-2 bg-indigo-600 text-white hover:bg-indigo-500":"cursor-pointer ring-1 ring-inset ring-gray-300 bg-white text-gray-900 hover:bg-gray-50","cursor-pointer flex items-center justify-center rounded-md py-3 px-3 text-sm font-semibold sm:flex-1"]),onClick:t=>i.selectedposition=e.value},[(0,o.bo)((0,o.Lk)("input",{type:"radio",class:"sr-only",value:e.value,"onUpdate:modelValue":t[27]||(t[27]=e=>i.selectedposition=e)},null,8,Be),[[r.XL,i.selectedposition]]),(0,o.eW)(" "+(0,n.v_)(e.label),1)],10,Ee)))),128))])])])]),t[79]||(t[79]=(0,o.Lk)("div",{class:"border-b border-1 border-dashed border-gray-300 mt-5"},null,-1))]),(0,o.Lk)("div",De,[(0,o.Lk)("div",Me,[(0,o.Lk)("div",Ue,[t[81]||(t[81]=(0,o.Lk)("legend",{class:"text-base font-semibold leading-6 text-gray-900"},"ตั้งค่า Logo",-1)),(0,o.Lk)("div",Pe,[(0,o.Lk)("div",Xe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.logoType,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:(0,n.C4)([i.selectedlogotype===e.value?"cursor-pointer ring-2 ring-indigo-600 ring-offset-2 bg-indigo-600 text-white hover:bg-indigo-500":"cursor-pointer ring-1 ring-inset ring-gray-300 bg-white text-gray-900 hover:bg-gray-50","cursor-pointer flex items-center justify-center rounded-md py-3 px-3 text-sm font-semibold sm:flex-1"]),onClick:t=>i.selectedlogotype=e.value},[(0,o.bo)((0,o.Lk)("input",{type:"radio",class:"sr-only",value:e.value,"onUpdate:modelValue":t[28]||(t[28]=e=>i.selectedlogotype=e)},null,8,Te),[[r.XL,i.selectedlogotype]]),(0,o.eW)(" "+(0,n.v_)(e.label),1)],10,We)))),128))]),(0,o.Lk)("div",Ie,[t[80]||(t[80]=(0,o.Lk)("label",{for:"logosize",class:"block text-sm font-semibold text-gray-700"},[(0,o.eW)("ขนาดโลโก้ "),(0,o.Lk)("span",{class:"font-normal"},"( h-10 )")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[29]||(t[29]=e=>i.logosize=e),type:"text",name:"logosize",id:"logosize",autocomplete:"h-10",class:"mt-1 block w-28 rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.logosize]])])])])])]),(0,o.Lk)("div",Re,[(0,o.Lk)("div",$e,[(0,o.Lk)("div",Oe,[t[83]||(t[83]=(0,o.Lk)("legend",{class:"text-base font-semibold leading-6 text-gray-900"},"ตั้งค่า User Menu",-1)),(0,o.Lk)("div",je,[(0,o.Lk)("div",Ve,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.userMenu,((e,s)=>((0,o.uX)(),(0,o.CE)("div",{key:s,class:(0,n.C4)([i.usermenutype===e.value?"cursor-pointer ring-2 ring-indigo-600 ring-offset-2 bg-indigo-600 text-white hover:bg-indigo-500":"cursor-pointer ring-1 ring-inset ring-gray-300 bg-white text-gray-900 hover:bg-gray-50","cursor-pointer flex items-center justify-center rounded-md py-3 px-3 text-sm font-semibold sm:flex-1"]),onClick:t=>i.usermenutype=e.value},[(0,o.bo)((0,o.Lk)("input",{type:"radio",class:"sr-only",value:e.value,"onUpdate:modelValue":t[30]||(t[30]=e=>i.usermenutype=e)},null,8,Ne),[[r.XL,i.usermenutype]]),(0,o.eW)(" "+(0,n.v_)(e.label),1)],10,Je)))),128))]),(0,o.Lk)("div",ze,[t[82]||(t[82]=(0,o.Lk)("label",{for:"usermenuendpoint",class:"block text-sm font-semibold text-gray-700"},[(0,o.eW)("Endpoint "),(0,o.Lk)("span",{class:"font-normal"},"( user )")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[31]||(t[31]=e=>i.usermenuendpoint=e),type:"text",name:"usermenuendpoint",id:"usermenuendpoint",autocomplete:"h-10",class:"mt-1 block w-28 rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.usermenuendpoint]])])])])])]),(0,o.Lk)("div",Ke,[(0,o.Lk)("div",Qe,[(0,o.Lk)("div",qe,[t[86]||(t[86]=(0,o.Lk)("legend",{class:"text-base font-semibold leading-6 text-gray-900"},"ตั้งค่า Topbar Header",-1)),(0,o.Lk)("div",He,[(0,o.Lk)("div",Ge,[t[84]||(t[84]=(0,o.Lk)("label",{for:"topbarRight",class:"block text-sm font-semibold text-gray-700"},[(0,o.eW)("Right Text "),(0,o.Lk)("span",{class:"font-normal"})],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[32]||(t[32]=e=>i.topbarRight=e),type:"text",name:"topbarRight",id:"topbarRight",autocomplete:"h-10",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.topbarRight]])])]),(0,o.Lk)("div",Ye,[(0,o.Lk)("div",Ze,[t[85]||(t[85]=(0,o.Lk)("label",{for:"topbarRightUrl",class:"block text-sm font-semibold text-gray-700"},[(0,o.eW)("Right Text URL "),(0,o.Lk)("span",{class:"font-normal"})],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[33]||(t[33]=e=>i.topbarRightUrl=e),type:"text",name:"topbarRightUrl",id:"topbarRightUrl",autocomplete:"h-10",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.topbarRightUrl]])])])])])]),(0,o.Lk)("div",et,[(0,o.Lk)("div",tt,[(0,o.Lk)("div",st,[t[96]||(t[96]=(0,o.Lk)("legend",{class:"text-base font-semibold leading-6 text-gray-900"},"ตั้งค่า User",-1)),(0,o.Lk)("div",ot,[(0,o.Lk)("div",lt,[t[88]||(t[88]=(0,o.Lk)("label",{for:"userLogin",class:"block text-sm font-semibold text-gray-700"},[(0,o.eW)("User Login "),(0,o.Lk)("span",{class:"font-normal"})],-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[34]||(t[34]=e=>i.userLogin=e),id:"userLogin",name:"userLogin",autocomplete:"h-10",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},[t[87]||(t[87]=(0,o.Lk)("option",{value:""},"Select User Login Component",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.loginComponentMap,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:t},(0,n.v_)(e),9,it)))),128))],512),[[r.u1,i.userLogin]])])]),(0,o.Lk)("div",at,[(0,o.Lk)("div",rt,[t[90]||(t[90]=(0,o.Lk)("label",{for:"userRegister",class:"block text-sm font-semibold text-gray-700"},[(0,o.eW)("User Register "),(0,o.Lk)("span",{class:"font-normal"})],-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[35]||(t[35]=t=>e.userRegister=t),id:"userRegister",name:"userRegister",autocomplete:"h-10",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},[t[89]||(t[89]=(0,o.Lk)("option",{value:""},"Select User Register Component",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.RegisterMap,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:t},(0,n.v_)(e),9,nt)))),128))],512),[[r.u1,e.userRegister]])])]),(0,o.Lk)("div",dt,[(0,o.Lk)("div",ct,[t[92]||(t[92]=(0,o.Lk)("label",{for:"userForgot",class:"block text-sm font-semibold text-gray-700"},[(0,o.eW)("User Forgot "),(0,o.Lk)("span",{class:"font-normal"})],-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[36]||(t[36]=t=>e.userForgot=t),id:"userForgot",name:"userForgot",autocomplete:"h-10",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},[t[91]||(t[91]=(0,o.Lk)("option",{value:""},"Select User Forgot Component",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.ForgotMap,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:t},(0,n.v_)(e),9,ut)))),128))],512),[[r.u1,e.userForgot]])])]),(0,o.Lk)("div",gt,[(0,o.Lk)("div",mt,[t[93]||(t[93]=(0,o.Lk)("label",{for:"userDashboard",class:"block text-sm font-semibold text-gray-700"},[(0,o.eW)("User Dashboard "),(0,o.Lk)("span",{class:"font-normal"})],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[37]||(t[37]=e=>i.userDashboard=e),type:"text",name:"userDashboard",id:"userDashboard",autocomplete:"h-10",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,512),[[r.Jo,i.userDashboard]])])]),(0,o.Lk)("div",pt,[(0,o.Lk)("div",bt,[t[95]||(t[95]=(0,o.Lk)("label",{for:"userDetail",class:"block text-sm font-semibold text-gray-700"},[(0,o.eW)("User Detail "),(0,o.Lk)("span",{class:"font-normal"})],-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[38]||(t[38]=e=>i.userDetail=e),id:"userDetail",name:"userDetail",autocomplete:"h-10",class:"mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},[t[94]||(t[94]=(0,o.Lk)("option",{value:""},"Select User Detail Component",-1)),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.studentComponentMap,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:t},(0,n.v_)(e),9,ft)))),128))],512),[[r.u1,i.userDetail]])])])])])])]),t[111]||(t[111]=(0,o.Lk)("div",{class:"border-b border-1 border-dashed border-gray-300 mb-10 mt-10"},null,-1)),(0,o.Lk)("div",null,[t[97]||(t[97]=(0,o.Lk)("div",null,[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"สีของเว็บไซต์"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Customize your website's visual elements with ease using Logo & Graphic Setting.")],-1)),(0,o.Lk)("div",ht,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.colorOptions,((e,s)=>((0,o.uX)(),(0,o.CE)("label",{key:s,class:(0,n.C4)(["flex items-center p-2 border border-gray-200 rounded-md cursor-pointer",{["border-blue-900 border-1"]:i.selectedDesign===e.value}])},[(0,o.bo)((0,o.Lk)("input",{type:"radio",name:"design-selector",value:e.value,"onUpdate:modelValue":t[39]||(t[39]=e=>i.selectedDesign=e),class:"hidden"},null,8,kt),[[r.XL,i.selectedDesign]]),(0,o.Lk)("div",{class:(0,n.C4)(["flex items-center justify-center w-8 h-8 rounded-md",e.value])},null,2),(0,o.Lk)("div",yt,[(0,o.Lk)("span",vt,(0,n.v_)(e.color),1),(0,o.Lk)("span",xt,(0,n.v_)(e.description),1)])],2)))),128))])]),t[112]||(t[112]=(0,o.Lk)("div",{class:"border-b border-1 border-dashed border-gray-300 mb-10 mt-10"},null,-1)),t[113]||(t[113]=(0,o.Lk)("div",{class:"mt-6"},[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"รายชื่อโมดูลที่มีในระบบ"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Enabling and Disabling Plugins in a System Configuration")],-1)),(0,o.Lk)("div",Lt,[(0,o.Lk)("div",null,[(0,o.Lk)("h2",wt,[(0,o.bF)(Ht,{icon:["fas","folder-open"],class:"mx-auto"}),t[98]||(t[98]=(0,o.eW)(" Default Plugins ")),t[99]||(t[99]=(0,o.Lk)("small",{class:"font-normal text-gray-600"},"(ไม่สามารถแก้ไขได้)",-1))]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.groupedDefaultPlugins,(e=>((0,o.uX)(),(0,o.CE)(o.FK,{key:e.groupName},[(0,o.Lk)("div",Ct,[(0,o.Lk)("h3",_t,[(0,o.bF)(Ht,{icon:["fas","file"],class:"mx-auto"}),(0,o.eW)(" "+(0,n.v_)(e.groupName),1)]),(0,o.Lk)("div",St,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.plugins,(e=>((0,o.uX)(),(0,o.CE)("label",{key:e.value,class:"flex items-center space-x-2 align-middle"},[(0,o.Lk)("input",{type:"checkbox",name:e.value,value:e.value,checked:e.checked,onChange:t[40]||(t[40]=(...e)=>a.onPluginChange&&a.onPluginChange(...e)),class:"h-5 w-5 mb-6 text-indigo-500 focus:ring-indigo-400 border-gray-300 rounded ml-1"},null,40,Ft),(0,o.Lk)("div",null,[(0,o.Lk)("span",At,[(0,o.eW)((0,n.v_)(e.name)+" ",1),(0,o.Lk)("small",Et,"("+(0,n.v_)(e.value)+")",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.role,((e,t)=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:"inline-block bg-indigo-100 rounded-sm px-1 py-1 text-xs font-medium text-gray-700 mr-1 mb-1"},(0,n.v_)(e),1)))),128))]),(0,o.Lk)("span",Bt,(0,n.v_)(e.description),1)])])))),128))])]),t[100]||(t[100]=(0,o.Lk)("div",{class:"border-b border-1 border-dashed border-gray-300 mb-5 mt-5"},null,-1))],64)))),128))]),(0,o.Lk)("div",Dt,[(0,o.Lk)("h2",Mt,[(0,o.bF)(Ht,{icon:["fas","folder-open"],class:"mx-auto"}),t[101]||(t[101]=(0,o.eW)(" Optional Plugins ")),t[102]||(t[102]=(0,o.Lk)("small",{class:"font-normal text-gray-600"},"(เลือกใช้งานตามความต้องการ)",-1))]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.groupedOptionalPlugins,((e,s)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:s},[(0,o.Lk)("div",Ut,[(0,o.Lk)("h3",Pt,[(0,o.bF)(Ht,{icon:["fas","file"],class:"mx-auto"}),(0,o.eW)(" "+(0,n.v_)(e.groupName),1)]),(0,o.Lk)("div",Xt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.plugins,(e=>((0,o.uX)(),(0,o.CE)("label",{key:e.value,class:"flex items-center space-x-2 align-middle"},[(0,o.Lk)("input",{type:"checkbox",name:e.value,value:e.value,checked:e.checked,onChange:t[41]||(t[41]=(...e)=>a.onPluginChange&&a.onPluginChange(...e)),class:"h-5 w-5 mb-6 text-indigo-500 focus:ring-indigo-400 border-gray-300 rounded ml-1"},null,40,Wt),(0,o.Lk)("div",null,[(0,o.Lk)("span",Tt,[(0,o.eW)((0,n.v_)(e.name)+" ",1),(0,o.Lk)("small",It,"("+(0,n.v_)(e.value)+")",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.role,((e,t)=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:"inline-block bg-indigo-100 rounded-sm px-1 py-1 text-xs font-medium text-gray-700 mr-1 mb-1"},(0,n.v_)(e),1)))),128))]),(0,o.Lk)("span",Rt,(0,n.v_)(e.description),1)])])))),128))])]),t[103]||(t[103]=(0,o.Lk)("div",{class:"border-b border-1 border-dashed border-gray-300 mb-10 mt-5"},null,-1))],64)))),128))])]),t[114]||(t[114]=(0,o.Lk)("div",{class:"mt-6"},[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"ตั้งค่า Dashboard"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"Shortlisting and configuring the active plugins for display on the dashboard.")],-1)),(0,o.Lk)("div",$t,[(0,o.Lk)("fieldset",null,[(0,o.Lk)("div",Ot,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.filteredPlugins,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.value,class:"flex items-center"},[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:e.value,value:e.value,"onUpdate:modelValue":t[42]||(t[42]=e=>i.defaultPlugin=e),class:"focus:ring-gray-900 h-5 w-5 mb-6 text-gray-900 border-gray-300 text-indigo-600 focus:ring-indigo-500 border-gray-300"},null,8,jt),[[r.XL,i.defaultPlugin]]),(0,o.Lk)("label",{for:e.value,class:"ml-3"},[(0,o.Lk)("span",Jt,[(0,o.eW)((0,n.v_)(e.name)+" ",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.role,((e,t)=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:"inline-block bg-indigo-100 rounded-sm px-1 py-1 text-xs font-medium text-gray-700 mr-1 mb-1"},(0,n.v_)(e),1)))),128))]),(0,o.Lk)("span",Nt,(0,n.v_)(e.description),1)],8,Vt)])))),128))])])])]),(0,o.Lk)("div",zt,[(0,o.Lk)("button",Kt,[(0,o.bF)(Ht,{icon:["fas","save"],class:"pr-2 pl-2"}),t[115]||(t[115]=(0,o.eW)("บันทึกข้อมูล"))])])])],2)],32)])])])])])])],64)}s(44114),s(98992),s(54520),s(72577),s(3949),s(81454);var qt=s(59911),Ht=s.n(qt),Gt=s(40687),Yt=s(87814),Zt=s(94486),es=s(23264),ts=s(40475);const ss=s(87596),os={},ls={};ss.keys().forEach((e=>{const t=ss(e),s=e.replace(/^\.\//,"").replace(/\.\w+$/,"").split("/").pop();os[s]=t.default||t;const o=s.split("-"),l=o.length>1?o[1]:s;ls[l]=s})),console.log("studentDetailMap",ls);const is=s(92770),as={},rs={};is.keys().forEach((e=>{const t=is(e),s=e.replace(/^\.\//,"").replace(/\.\w+$/,"").split("/").pop();as[s]=t.default||t;const o=s.split("-"),l=o.length>1?o[1]:s;rs[l]=s})),console.log("LoginMap",rs);const ns=s(87734),ds={},cs={};ns.keys().forEach((e=>{const t=ns(e),s=e.replace(/^\.\//,"").replace(/\.\w+$/,"").split("/").pop();ds[s]=t.default||t;const o=s.split("-"),l=o.length>1?o[1]:s;cs[l]=s})),console.log("ForgotMap",cs);const us=s(87734),gs={},ms={};us.keys().forEach((e=>{const t=us(e),s=e.replace(/^\.\//,"").replace(/\.\w+$/,"").split("/").pop();gs[s]=t.default||t;const o=s.split("-"),l=o.length>1?o[1]:s;ms[l]=s})),console.log("RegisterMap",ms);var ps={name:"Blank",data(){const e=ts.A.get("configs");return{hostkey:this.$Key,routeName:this.routeName,pluginNamesArray:[],hostname:"",siteName:"",siteLogo:"",siteFavicon:"",siteStyle:"",loginLogo:"",loginBg:"",sitePlugin:"",siteTheme:"",id:"",s3Key:"",s3Endpoint:"",s3Hosting:"",s3Secret:"",s3Region:"",s3EndpointDefault:"",s3Bucket:"",activeBlock:!1,FileBrowserOpen:!1,defaultPlugin:null,selectedDesign:this.siteStyle,type:e.siteType,dataItem:this.$route.params.id,selectedlayout:"",selectedposition:"",selectedlogotype:"",usermenutype:"",usermenuendpoint:"",logosize:"",topbarRight:"",topbarRightUrl:"",userDashboard:"",userLogin:"",userDetail:"",spaceList:[],spaceId:null,email_from_email:"",email_from_name:"",email_provider:"",email_url:"",email_key:"",studentComponentMap:ls,loginComponentMap:rs,RegisterMap:ms,ForgotMap:cs,logoType:[{label:"Image",value:"image"},{label:"Text",value:"text"}],userMenu:[{label:"Icon",value:"icon"},{label:"Text",value:"text"}],layoutPositions:[{label:"Fixed",value:"fixed"},{label:"Relative",value:"relative"}],layoutOption:[{label:"Layout 1",value:"layout1"},{label:"Layout 2",value:"layout2"},{label:"Layout 3",value:"layout3"}],layoutLists:[{label:"Layout 1",value:"layout1",description:"โลโก้ซ้าย เมนูกลาง สมาชิกขวา"},{label:"layout 2",value:"layout2",description:"โลโก้บน-กลาง เมนู-สมาชิกล่าง"},{label:"Layout 3",value:"layout3",description:"โลโก้กลาง เมนูซ้าย สมาชิก ขวา"}],groupsName:[{code:"default",name:"ปลั๊กอินมาตรฐาน"},{code:"system",name:"จัดการระบบ"},{code:"origin",name:"ศูนย์กลางระบบ"},{code:"academy",name:"การเรียนออนไลน์"},{code:"ecommerce",name:"ขายของออนไลน์"},{code:"payment",name:"ระบบชำระเงิน"},{code:"blog",name:"เนื้อหา"}],colorOptions:[{color:"Mountain",description:"A rich, deep indigo",value:"bg-indigo-900",code:"indigo"},{color:"Ocean",description:"A cool, calming blue",value:"bg-blue-900",code:"blue"},{color:"Midnight",description:"A deep, dark blue, like the night sky",value:"bg-indigo-600",code:"indigo"},{color:"Sky",description:"A light, airy blue, like a clear sky",value:"bg-blue-700",code:"blue"},{color:"Sunset",description:"A warm, fiery red",value:"bg-red-900",code:"red"},{color:"Sunrise",description:"A soft, rosy pink",value:"bg-pink-900",code:"pink"},{color:"Desert Sun",description:"A warm, sandy yellow",value:"bg-yellow-900",code:"yellow"},{color:"Mustard",description:"Warm yellow with a hint of brown",value:"bg-yellow-700",code:"yellow"},{color:"Banana",description:"Bright, yellow, like bananas",value:"bg-yellow-600",code:"yellow"},{color:"Lemon",description:"Fresh, bright yellow, like a juicy lemon",value:"bg-yellow-500",code:"yellow"},{color:"Forest",description:"A deep green, reminiscent of a dense forest",value:"bg-green-800",code:"green"},{color:"Meadow",description:"A bright green, like a lush meadow on a sunny",value:"bg-green-700",code:"green"},{color:"Lime",description:"A bright, zesty green, like a freshly squeezed lime",value:"bg-green-600",code:"green"},{color:"Midnight",description:"A deep, dark black like a midnight sky",value:"bg-gray-900",code:"gray"},{color:"Charcoal",description:"A rich, dark black with gray undertones",value:"bg-gray-700",code:"gray"}]}},components:{FileBrowser:Gt.A,Subhead:Yt.A},methods:{formatBytes(e){var t=1024,s=3,o=t,l=t*t,i=t*t*t;return e<o?e+" Bytes":e<l?(e/o).toFixed(s)+" KB":e<i?(e/l).toFixed(s)+" MB":(e/i).toFixed(s)+" GB"},calculateDiskUsagePercentage(e,t){const s=1024*t*1024,o=e/s*100;return o.toFixed(2)},isSpaceSelected(e){return e===this.spaceId},getClasses(e){const t=(0,es.c)(e);return`${t}`},OpenFileBrowser(e){this.selectedImage=e,this.FileBrowserOpen=!0},changeFileTrigger(e){this.FileBrowserOpen=e},selectFileTrigger(e){console.log("selectFileTrigger"),void 0!=e&&("siteLogo"===this.selectedImage?(this.siteLogo=e.file,this.updataCover(e.file,"siteLogo")):"loginLogo"===this.selectedImage?(this.loginLogo=e.file,this.updataCover(e.file,"loginLogo")):"loginBg"===this.selectedImage?(this.loginBg=e.file,this.updataCover(e.file,"loginBg")):"siteFavicon"===this.selectedImage&&(this.siteFavicon=e.file,this.updataCover(e.file,"siteFavicon")))},async updataCover(e,t){console.log("cover",e),"siteLogo"===t?this.siteLogo=e:"loginLogo"===t?this.loginLogo=e:"loginBg"===t?this.loginBg=e:"siteFavicon"===t&&(this.siteFavicon=e)},async fetchData(){try{let e=this.$route.params.id;const t=await fetch("https://gateway.cloudrestfulapi.com/api/hostname/"+e,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.hostkey}}),s=await t.json(),o=s.layout;await this.getSpace(),this.hostname=s.hostname,this.siteName=s.siteName,this.siteLogo=s.siteLogo,this.siteFavicon=s.siteFavicon,this.siteStyle=s.siteStyle,this.siteTheme=s.siteTheme,this.selectedDesign=s.siteStyle,this.loginLogo=s.loginLogo,this.loginBg=s.loginBg,this.sitePlugin=s.plugins,this.defaultPlugin=s.defaultPlugin,this.id=s._id,this.s3Key=s.s3Key,this.s3Endpoint=s.s3Endpoint,this.s3Hosting=s.s3Hosting,this.s3Secret=s.s3Secret,this.s3Region=s.s3Region,this.s3EndpointDefault=s.s3EndpointDefault,this.s3Bucket=s.s3Bucket,this.spaceId=s.spaceId,this.selectedlayout=o?.selectedlayout??"",this.selectedposition=o?.selectedposition??"",this.selectedlogotype=o?.selectedlogotype??"",this.usermenutype=o?.usermenutype??"",this.usermenuendpoint=o?.usermenuendpoint??"",this.logosize=o?.logosize??"",this.topbarRight=o?.topbarRight??"",this.topbarRightUrl=o?.topbarRightUrl??"",this.userDashboard=o?.userDashboard??"",this.userLogin=o?.userLogin??"",this.userDetail=o?.userDetail??"",this.userRegister=o?.userRegister??"",this.userForgot=o?.userForgot??"",this.email_from_email=s.email_from_email??"",this.email_from_name=s.email_from_name??"",this.email_provider=s.email_provider??"",this.email_url=s.email_url??"",this.email_key=s.email_key??"";const l=ts.A.get("plugins");let i=[];if(l){const e=l;i=e.data.map((e=>{const t=Array.isArray(this.sitePlugin)?this.sitePlugin.includes(e.slug):this.sitePlugin.split(",").includes(e.slug);return{name:e.name,value:e.slug,dashboard:e.dashboard,description:e.description,default:e.default,role:e.role,groups:e.groups,checked:t}}))}this.pluginNamesArray=i}catch(e){console.error(e)}},async updateData(){try{this.activeBlock=!0;const e=await fetch("https://gateway.cloudrestfulapi.com/api/hostname/"+this.id,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({data:{hostname:this.hostname,siteName:this.siteName,siteLogo:this.siteLogo,siteFavicon:this.siteFavicon,siteStyle:this.selectedDesign,siteTheme:this.siteTheme,siteSubStyle:this.selectedDesign.match(/bg-(\w+)-\d+/)[1],loginLogo:this.loginLogo,loginBg:this.loginBg,plugins:this.sitePlugin,defaultPlugin:this.defaultPlugin,s3Key:this.s3Key,s3Endpoint:this.s3Endpoint,s3Hosting:this.s3Hosting,s3Secret:this.s3Secret,s3Region:this.s3Region,s3EndpointDefault:this.s3EndpointDefault,s3Bucket:this.s3Bucket,spaceId:this.spaceId,email_url:this.email_url,email_key:this.email_key,email_provider:this.email_provider,email_from_email:this.email_from_email,email_from_name:this.email_from_name,layout:{selectedlayout:this.selectedlayout,selectedposition:this.selectedposition,selectedlogotype:this.selectedlogotype,usermenutype:this.usermenutype,usermenuendpoint:this.usermenuendpoint,logosize:this.logosize,topbarRight:this.topbarRight,topbarRightUrl:this.topbarRightUrl,userDashboard:this.userDashboard,userLogin:this.userLogin,userDetail:this.userDetail,userRegister:this.userRegister,userForgot:this.userForgot}},options:{unique:"hostname"}})}),t=await e.json();this.activeBlock=!1,console.log((await(0,Zt.j)(!0)).siteName),console.log(t)}catch(e){console.error(e)}},async getSpace(){if(ts.A.get("session","login"))try{this.loading_sources=!1;let e=[{}];const t=[{$match:{$and:e}}],s={method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({pipeline:t})},o=await fetch("https://gateway.cloudrestfulapi.com/api/space/aggregate",s),l=await o.json(),i=async e=>{const t=e._id,s=await this.getSpaceData(t);return{...e,size:s[0]?.totalSize||"0",count:s[0]?.itemCount||"0"}},a=await Promise.all(l.map(i));console.log(a),this.spaceList=a,this.loading_sources=!0}catch(e){console.log(e)}},async getSpaceData(e){if(ts.A.get("session","login"))try{this.loading_sources=!1;const t=[{$match:{spaceId:e}},{$group:{_id:null,itemCount:{$sum:1},totalSize:{$sum:"$size"}}}],s={method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({pipeline:t})},o=await fetch("https://gateway.cloudrestfulapi.com/api/storage/aggregate",s),l=await o.json();return l}catch(t){return console.log(t),{itemCount:0,totalSize:0}}},onPluginChange(e){const t=e.target.name,s=e.target.checked;if(s)Array.isArray(this.sitePlugin)?this.sitePlugin.push(t):this.sitePlugin=[t];else if(Array.isArray(this.sitePlugin)){const e=this.sitePlugin.indexOf(t);-1!==e&&this.sitePlugin.splice(e,1)}console.log(this.sitePlugin)}},mounted(){this.fetchData()},updated(){Ht().replace()},computed:{defaultPlugins(){return this.pluginNamesArray.filter((e=>e.default))},groupedDefaultPlugins(){const e=[];return this.defaultPlugins.forEach((t=>{const s=t.groups,o=this.groupsName.find((e=>e.code===s)),l=o?o.name:s,i=e.findIndex((e=>e.groupName===l));i>=0?e[i].plugins.push(t):e.push({groupName:l,plugins:[t]})})),e},optionalPlugins(){return this.pluginNamesArray.filter((e=>!e.default))},groupedOptionalPlugins(){const e=[];return this.optionalPlugins.forEach((t=>{const s=t.groups,o=this.groupsName.find((e=>e.code===s)),l=o?o.name:s,i=e.findIndex((e=>e.groupName===l));i>=0?e[i].plugins.push(t):e.push({groupName:l,plugins:[t]})})),e},filteredPlugins(){return this.pluginNamesArray.filter((e=>e.dashboard))}}},bs=s(64621);const fs=(0,bs.A)(ps,[["render",Qt]]);var hs=fs,ks=s(74284),ys={name:"Home",components:{Dashboard:hs,Authen:ks.A},data(){return{login:ts.A.get("session","login")}},methods:{},mounted(){},setup(){const e=(0,a.lq)(),t=e.meta.title;(0,i.K7)(t),console.log("Dashboard")}};const vs=(0,bs.A)(ys,[["render",l]]);var xs=vs},66164:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var o=s(20641),l=s(90033),i=s(53751);const a={class:"bg-gray-50"},r={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},n={class:"sm:mx-auto sm:w-full sm:max-w-lg"},d=["src"],c={class:"mt-2 text-center text-sm text-gray-600"},u={class:"bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10"},g={class:"relative mt-2"},m={key:0,class:"col-span-2"},p={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},b={class:"w-full"},f=["disabled"];function h(e,t,s,h,k,y){const v=(0,o.g2)("router-link"),x=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",r,[(0,o.Lk)("div",n,[this.showModal?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("img",{key:0,class:"mx-auto h-16 w-auto",src:this.config.siteLogo,alt:"Your Company"},null,8,d)),t[4]||(t[4]=(0,o.Lk)("h2",{class:"mt-6 text-center text-2xl font-bold tracking-tight text-gray-900"},"ลืมรหัสผ่าน",-1)),(0,o.Lk)("p",c,[t[3]||(t[3]=(0,o.eW)(" หรือ ")),(0,o.bF)(v,{to:"/user/register",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)(" ลงทะเบียนสมาชิกใหม่ ")]))),_:1})])]),(0,o.Lk)("div",{class:(0,l.C4)(["mt-8 sm:mx-auto sm:w-full sm:max-w-md relative",[e.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,o.Lk)("div",u,[(0,o.Lk)("form",{class:"space-y-6",onSubmit:t[1]||(t[1]=(0,i.D$)(((...e)=>y.resetPassword&&y.resetPassword(...e)),["prevent"]))},[(0,o.Lk)("div",null,[(0,o.Lk)("div",g,[t[5]||(t[5]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("อีเมล์ที่ลงทะเบียน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>k.email=e),type:"text",placeholder:"อีเมล์ที่ลงทะเบียน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,k.email]])])]),t[8]||(t[8]=(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,"*หมายเหตุ*"),(0,o.Lk)("br"),(0,o.eW)(' กรอกเลขที่บัตรประชาชนที่ลงทะเบียนไว้ในระบบ หลังจากคลิ๊ก "ตั้งค่ารหัสผ่าน" เรียบร้อยแล้ว ระบบจะทำการสร้างรหัสผ่านเป็นเบอร์โทรที่ลงทะเบียนไว้ในระบบ หากจำเบอร์โทรไม่ได้ กรุณาแจ้งทีมงานที่ @doacer ')],-1)),(0,o.Lk)("div",null,[k.errorStage?((0,o.uX)(),(0,o.CE)("div",m,[(0,o.Lk)("div",p,[t[6]||(t[6]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",b,(0,l.v_)(k.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",{type:"submit",disabled:e.buttonDisabled,class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},[(0,o.bF)(x,{icon:["fas","refresh"],class:"mr-2"}),(0,o.eW)(" "+(0,l.v_)(k.buttonText),1)],8,f),(0,o.bF)(v,{to:"/user/login",class:"flex w-full justify-center rounded-md bg-gray-300 text-md font-semibold text-gray-700 shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 mt-4 py-2"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)(" ย้อนกลับ ")]))),_:1})])],32)])],2)])])}s(44114);var k=s(40475),y=s(25747),v={name:"Login",components:{},props:{showModal:{type:Boolean,default:!1}},data(){return{config:k.A.get("configs"),email:"",errorStage:!1,errorMessage:"",buttonText:"ส่งข้อมูลเพื่อขอรับรหัสผ่านใหม่"}},methods:{async resetPassword(){try{if(!this.email)return this.errorStage=!0,this.errorMessage="โปรดกรอกอีเมล์",void(this.activeBlock=!1);this.activeBlock=!0,this.errorStage=!1,this.buttonText="กำลังดำเนินการ...";const e=await fetch("https://gateway.cloudrestfulapi.com/api/user/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.config.key},body:JSON.stringify({method:"find",args:[{$and:[{email:this.email}]}]})}),t=await e.json();console.log(t);const s=t.length>0?t[0]:null;if(!t||0===t.length)return this.errorStage=!0,this.errorMessage="ไม่พบอีเมล์นี้ในระบบ กรุณาตรวจสอบหรือติดต่อทีมงาน",this.activeBlock=!1,this.buttonText="ส่งข้อมูลเพื่อขอรับรหัสผ่านใหม่",void(this.buttonDisabled=!1);{const e={email:s.email,name:s.firstname+""+s.lastname};await(0,y.Z)(e,"reset-password"),this.$swal({icon:"success",title:"การรีเซ็ตรหัสผ่านใหม่เรียบร้อยแล้ว",text:"ระบบได้ทำการรีเซ็ตและจัดส่งรหัสผ่านใหม่ให้ทางอีเมล์แล้ว กรุณาตรวจสอบอีเมล์และเข้าสู่ระบบด้วยวรหัสผ่านใหม่ เมื่อเข้าสู่ระบบครั้งแรก กรุณาเปลี่ยนรหัสผ่านใหม่อีกครั้งเพื่อความปลอดภัย",showCancelButton:!1,confirmButtonText:"ตกลง"}).then((()=>{this.$router.push("/user/login")}))}this.activeBlock=!1}catch(e){console.log(e),this.buttonText="ส่งข้อมูลเพื่อขอรับรหัสผ่านใหม่",this.buttonDisabled=!1}}}},x=s(64621);const L=(0,x.A)(v,[["render",h],["__scopeId","data-v-4d37d18e"]]);var w=L},49615:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var o=s(20641);function l(e,t,s,l,i,a){return(0,o.uX)(),(0,o.CE)("div",null," ...")}var i=s(40475),a={name:"Bypass",components:{},data(){return{configs:i.A.get("configs"),hostname:i.A.get("hostname"),username:"",password:"",errorStage:!1,errorMessage:"",newmember:!1,showForm:!1,activeBlock:!1,memberMode:"login",dataItem:this.$route.params.id}},mounted(){this.login()},methods:{async login(){try{this.activeBlock=!0;const{data:e,status:t}=await this.$Request.GET(`user/${this.dataItem}`,this.configs.key);if(200===t){if(null===e||""===e||void 0===e)return this.errorStage=!0,this.errorMessage="ไม่พบข้อมูลบัญชีผู้ใช้นี้",this.activeBlock=!1,void console.log("ไม่พบข้อมูลบัญชีผู้ใช้นี้",e);if("user"!=e.role)this.errorStage=!0,this.activeBlock=!1,this.errorMessage="ไม่มีสิทธิ์เข้าใช้งานเว็บไซต์นี้",console.log("ไม่มีสิทธิ์เข้าใช้งานเว็บไซต์นี้");else{const t=await this.$Request.POST("enroll/query",{method:"find",hidden:["userID"],args:[{$and:[{userID:e._id}]}]},this.configs.key),s=t.data;if(200===t.status){console.log("Access");let t=[],o="";const l={active:!0,token:e._id,refresh:"",login:!0,userID:e._id,user:e,loader:!1,role:e.role,nav:"normal-nav",layout:"frontend-layout",current:o,list:t,enroll:s,channel:"web"};i.A.update("session",l),window.location.href="/user/profile"}}}}catch(e){}}}},r=s(64621);const n=(0,r.A)(a,[["render",l],["__scopeId","data-v-8518c786"]]);var d=n},77948:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var o=s(20641),l=s(90033),i=s(53751);const a={class:"bg-gray-50"},r={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},n={class:"sm:mx-auto sm:w-full sm:max-w-lg"},d=["src"],c={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},u={class:"mt-2"},g={class:"mt-2 relative"},m=["type"],p={class:"flex items-center justify-between"},b={class:"text-sm"},f={key:0,class:"col-span-2"},h={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},k={class:"w-full"};function y(e,t,s,y,v,x){const L=(0,o.g2)("font-awesome-icon"),w=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",r,[(0,o.Lk)("div",n,[this.showModal?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("img",{key:0,class:"mx-auto h-24 w-auto",src:this.config.siteLogo,alt:"Your Company"},null,8,d)),t[4]||(t[4]=(0,o.Lk)("h2",{class:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900"},"เข้าสู่ระบบฝึกอบรม (HR)",-1)),t[5]||(t[5]=(0,o.Lk)("p",{class:"mt-2 text-center text-base text-gray-600"}," ใช้บัญชีสำหรับ K2 ในการล็อคอิน ",-1))]),(0,o.Lk)("div",c,[(0,o.Lk)("div",{class:(0,l.C4)(["bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10 relative",[v.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,o.Lk)("form",{class:"space-y-6",onSubmit:t[3]||(t[3]=(0,i.D$)(((...e)=>x.login&&x.login(...e)),["prevent"]))},[(0,o.Lk)("div",null,[t[6]||(t[6]=(0,o.Lk)("label",{for:"email",class:"block text-md font-semibold leading-6 text-gray-900"},"ชื่อผู้ใช้ในระบบ K2",-1)),(0,o.Lk)("div",u,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>v.username=e),id:"username",name:"username",type:"text",autocomplete:"username",required:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[i.Jo,v.username]])])]),(0,o.Lk)("div",null,[t[7]||(t[7]=(0,o.Lk)("label",{for:"password",class:"block text-md font-semibold leading-6 text-gray-900"},"รหัสผ่าน",-1)),(0,o.Lk)("div",g,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>v.password=e),id:"password",name:"password",type:v.passwordVisible?"text":"password",autocomplete:"current-password",required:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,m),[[i.hp,v.password]]),(0,o.Lk)("button",{type:"button",class:"absolute inset-y-0 right-0 flex items-center bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-2 border border-gray-400 rounded shadow m-1",onClick:t[2]||(t[2]=(...e)=>x.togglePasswordVisibility&&x.togglePasswordVisibility(...e))},[(0,o.bF)(L,{icon:v.passwordVisible?["fas","eye-slash"]:["fas","eye"],class:"text-black hover:text-gray-600 text-xs"},null,8,["icon"])])])]),(0,o.Lk)("div",p,[t[9]||(t[9]=(0,o.Lk)("div",{class:"flex items-center"},[(0,o.Lk)("input",{id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"}),(0,o.Lk)("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"},"จำฉันไว้")],-1)),(0,o.Lk)("div",b,[(0,o.bF)(w,{to:"/user/forgot",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)(" ลืมรหัสผ่าน ")]))),_:1})])]),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",f,[(0,o.Lk)("div",h,[t[10]||(t[10]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",k,(0,l.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),t[11]||(t[11]=(0,o.Lk)("button",{type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"เข้าสู่ระบบ",-1))])],32)],2)])])])}var v=s(40475),x={name:"Login",components:{},props:{showModal:{type:Boolean,default:!1}},data(){return{config:v.A.get("configs"),username:"",password:"",errorStage:!1,errorMessage:"",activeBlock:!1,passwordVisible:!1}},methods:{togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible},async login(){try{this.activeBlock=!0,this.errorStage=!1;const e=await fetch("https://faas-sgp1-18bc02ac.doserverless.co/api/v1/web/fn-34d16f42-4718-42b0-814e-08d23fecd2ce/default/login-fti-employee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})}),t=await e.json();if(console.log("getLogin",t),200===t.status){let e=[],s="";const o={active:!0,token:t.user._id,refresh:"",login:!0,userID:t.user._id,user:t.user,loader:!1,role:t.user.role,nav:"normal-nav",layout:"frontend-layout",current:s,list:e,enroll:t.enroll,mode:t.mode};v.A.update("session",o),console.log("session",o),this.showModal?window.location.reload():this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,icon:"success",title:"แจ้งเตือน",text:"เข้าสู่ระบบเรียบร้อยแล้ว"}).then((()=>{window.location.href="/user/employee"}))}else this.errorStage=!0,this.errorMessage=t;this.activeBlock=!1}catch(e){console.log(e)}}}},L=s(64621);const w=(0,L.A)(x,[["render",y]]);var C=w},38971:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ee}});var o=s(20641),l=s(90033),i=s(53751);const a={class:"bg-gray-50"},r={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},n={class:"sm:mx-auto sm:w-full sm:max-w-lg"},d=["src"],c={class:"mt-6 text-center text-2xl font-bold tracking-tight text-gray-900"},u={class:"mt-2 text-center text-sm text-gray-600"},g={key:0,class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md p-2"},m={class:"bg-white"},p={class:"grid grid-cols-1 gap-2 mt-4"},b={key:0,class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},f={class:"relative mt-2"},h={class:"relative mt-2"},k={class:"flex items-center justify-between"},y={class:"text-sm"},v={key:0,class:"col-span-2"},x={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},L={class:"w-full"},w={type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},C={class:"relative mt-2"},_={key:0,class:"col-span-2"},S={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},F={class:"w-full"},A={type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},E={key:1,class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},B={class:"relative mt-2"},D={class:"relative mt-2"},M={class:"flex items-center justify-between"},U={class:"text-sm"},P={key:0,class:"col-span-2"},X={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},W={class:"w-full"},T={type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},I={class:"relative mt-2"},R={key:0,class:"col-span-2"},$={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},O={class:"w-full"},j={type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"};function V(e,t,s,V,J,N){const z=(0,o.g2)("router-link"),K=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",r,[(0,o.Lk)("div",n,[this.showModal?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("img",{key:0,class:"mx-auto h-14 w-auto",src:this.configs.siteLogo,alt:"Your Company"},null,8,d)),(0,o.Lk)("h2",c,(0,l.v_)(J.newmember?"เข้าสูระบบสมาชิกใหม่":"เข้าสู่ระบบสมาชิกเก่า"),1),(0,o.Lk)("p",u,[t[19]||(t[19]=(0,o.eW)(" หรือ ")),(0,o.bF)(z,{to:"/user/register",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:(0,o.k6)((()=>t[18]||(t[18]=[(0,o.eW)(" ลงทะเบียนสมาชิกใหม่ ")]))),_:1})])]),J.showForm?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",m,[(0,o.Lk)("div",p,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>{J.newmember=!1,N.toggleForm()}),class:"flex flex-col items-center justify-center px-4 py-4 rounded-md bg-white border-2 border-indigo-600 text-indigo-600 font-semibold w-full sm:w-auto"},[(0,o.bF)(K,{icon:["fas","key"],class:"h-10 w-10 mb-2"}),t[20]||(t[20]=(0,o.Lk)("span",{class:"text-2xl leading-6 text-center"},"สมาชิกเก่า",-1)),t[21]||(t[21]=(0,o.Lk)("span",{class:"font-normal text-black leading-6 text-center"},"ลงทะเบียนตั้งแต่ปี 65-66",-1))]),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>{J.newmember=!0,N.toggleForm()}),class:"flex flex-col items-center justify-center px-4 py-4 rounded-md bg-white border-2 border-indigo-600 text-indigo-600 font-semibold w-full sm:w-auto"},[(0,o.bF)(K,{icon:["fas","key"],class:"h-10 w-10 mb-2"}),t[22]||(t[22]=(0,o.Lk)("span",{class:"text-2xl leading-6 text-center"},"สมาชิกใหม่",-1)),t[23]||(t[23]=(0,o.Lk)("span",{class:"font-normal text-black leading-6 text-center"},"ลงทะเบียนตั้งแต่ปี 67",-1))])])])])),J.showForm?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[J.newmember?((0,o.uX)(),(0,o.CE)("div",b,[(0,o.Lk)("div",{class:(0,l.C4)(["bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10 relative",[J.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},["login"===J.memberMode?((0,o.uX)(),(0,o.CE)("form",{key:0,class:"space-y-6",onSubmit:t[6]||(t[6]=(0,i.D$)(((...e)=>N.login&&N.login(...e)),["prevent"]))},[(0,o.Lk)("div",null,[(0,o.Lk)("div",f,[t[24]||(t[24]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("อีเมล์ "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>J.username=e),type:"text",placeholder:"อีเมล์",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.username]])])]),(0,o.Lk)("div",null,[(0,o.Lk)("div",h,[t[25]||(t[25]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("รหัสผ่าน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>J.password=e),type:"password",placeholder:"รหัสผ่าน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.password]])])]),(0,o.Lk)("div",k,[t[26]||(t[26]=(0,o.Lk)("div",{class:"flex items-center"},[(0,o.Lk)("input",{id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"}),(0,o.Lk)("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"},"จำฉันไว้")],-1)),(0,o.Lk)("div",y,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>N.resetPassword("reset")),class:"font-medium text-indigo-600 hover:text-indigo-500"}," ลืมรหัสผ่าน ")])]),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",v,[(0,o.Lk)("div",x,[t[27]||(t[27]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",L,(0,l.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",w,[(0,o.bF)(K,{icon:["fas","key"],class:"mr-2"}),t[28]||(t[28]=(0,o.eW)(" เข้าสู่ระบบ "))]),(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>{J.newmember=!1,N.toggleForm()}),class:"flex w-full justify-center rounded-md bg-gray-300 text-md font-semibold text-gray-700 shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 mt-4 py-2"},"ย้อนกลับ")])],32)):(0,o.Q3)("",!0),"reset"===J.memberMode?((0,o.uX)(),(0,o.CE)("form",{key:1,class:"space-y-6",onSubmit:t[9]||(t[9]=(0,i.D$)(((...e)=>N.reset&&N.reset(...e)),["prevent"]))},[(0,o.Lk)("div",null,[(0,o.Lk)("div",C,[t[29]||(t[29]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("อีเมล์ที่ลงทะเบียน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>J.username=e),type:"text",placeholder:"อีเมล์ที่ลงทะเบียน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.username]])])]),t[32]||(t[32]=(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,"*หมายเหตุ*"),(0,o.Lk)("br"),(0,o.eW)(' กรอกอีเมล์ที่ลงทะเบียนไว้ในระบบ หลังจากคลิ๊ก "ตั้งค่ารหัสผ่าน" เรียบร้อยแล้ว ระบบจะทำการสร้างรหัสผ่านเป็นเบอร์โทรที่ลงทะเบียนไว้ในระบบ หากจำเบอร์โทรไม่ได้ กรุณาแจ้งทีมงานที่ @doacer ')],-1)),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("div",S,[t[30]||(t[30]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",F,(0,l.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",A,[(0,o.bF)(K,{icon:["fas","refresh"],class:"mr-2"}),t[31]||(t[31]=(0,o.eW)(" ตั้งค่ารหัสผ่าน "))]),(0,o.Lk)("button",{onClick:t[8]||(t[8]=e=>N.resetPassword("login")),class:"flex w-full justify-center rounded-md bg-gray-300 text-md font-semibold text-gray-700 shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 mt-4 py-2"},"ย้อนกลับ")])],32)):(0,o.Q3)("",!0)],2)])):(0,o.Q3)("",!0),J.newmember?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",E,[(0,o.Lk)("div",{class:(0,l.C4)(["bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10 relative",[J.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},["login"===J.memberMode?((0,o.uX)(),(0,o.CE)("form",{key:0,class:"space-y-6",onSubmit:t[14]||(t[14]=(0,i.D$)(((...e)=>N.login&&N.login(...e)),["prevent"]))},[(0,o.Lk)("div",null,[(0,o.Lk)("div",B,[t[33]||(t[33]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("เลขที่ประจำตัวประชาชน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>J.username=e),type:"text",placeholder:"เลขที่ประจำตัวประชาชน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.username]])])]),(0,o.Lk)("div",null,[(0,o.Lk)("div",D,[t[34]||(t[34]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("รหัสผ่าน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>J.password=e),type:"password",placeholder:"รหัสผ่าน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.password]])])]),(0,o.Lk)("div",M,[t[35]||(t[35]=(0,o.Lk)("div",{class:"flex items-center"},[(0,o.Lk)("input",{id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"}),(0,o.Lk)("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"},"จำฉันไว้")],-1)),(0,o.Lk)("div",U,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=e=>N.resetPassword("reset")),class:"font-medium text-indigo-600 hover:text-indigo-500"}," ลืมรหัสผ่าน ")])]),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",P,[(0,o.Lk)("div",X,[t[36]||(t[36]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",W,(0,l.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",T,[(0,o.bF)(K,{icon:["fas","key"],class:"mr-2"}),t[37]||(t[37]=(0,o.eW)(" เข้าสู่ระบบ "))]),(0,o.Lk)("button",{onClick:t[13]||(t[13]=e=>{J.newmember=!1,N.toggleForm()}),class:"flex w-full justify-center rounded-md bg-gray-300 text-md font-semibold text-gray-700 shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 mt-4 py-2"},"ย้อนกลับ")])],32)):(0,o.Q3)("",!0),"reset"===J.memberMode?((0,o.uX)(),(0,o.CE)("form",{key:1,class:"space-y-6",onSubmit:t[17]||(t[17]=(0,i.D$)(((...e)=>N.reset&&N.reset(...e)),["prevent"]))},[(0,o.Lk)("div",null,[(0,o.Lk)("div",I,[t[38]||(t[38]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("เลขที่ประจำตัวประชาชน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>J.username=e),type:"text",placeholder:"เลขที่ประจำตัวประชาชน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.username]])])]),t[41]||(t[41]=(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,"*หมายเหตุ*"),(0,o.Lk)("br"),(0,o.eW)(' กรอกเลขที่บัตรประชาชนที่ลงทะเบียนไว้ในระบบ หลังจากคลิ๊ก "ตั้งค่ารหัสผ่าน" เรียบร้อยแล้ว ระบบจะทำการสร้างรหัสผ่านเป็นเบอร์โทรที่ลงทะเบียนไว้ในระบบ หากจำเบอร์โทรไม่ได้ กรุณาแจ้งทีมงานที่ @doacer ')],-1)),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",R,[(0,o.Lk)("div",$,[t[39]||(t[39]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",O,(0,l.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",j,[(0,o.bF)(K,{icon:["fas","refresh"],class:"mr-2"}),t[40]||(t[40]=(0,o.eW)(" ตั้งค่ารหัสผ่าน "))]),(0,o.Lk)("button",{onClick:t[16]||(t[16]=e=>N.resetPassword("login")),class:"flex w-full justify-center rounded-md bg-gray-300 text-md font-semibold text-gray-700 shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 mt-4 py-2"},"ย้อนกลับ")])],32)):(0,o.Q3)("",!0)],2)]))],64)):(0,o.Q3)("",!0)])])}s(64979);var J=s(40475),N=s(21396),z=s.n(N),K=s(63084),Q=s(40471),q=s(73288);const H=new Q.A(!1);var G={name:"Login",components:{},props:{showModal:{type:Boolean,default:!1}},data(){return{configs:J.A.get("configs"),hostname:J.A.get("hostname"),username:"",password:"",errorStage:!1,errorMessage:"",newmember:!1,showForm:!1,activeBlock:!1,memberMode:"login"}},methods:{toggleForm(){this.showForm=!this.showForm},resetPassword(e){this.memberMode=e},generateRandomString(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";const o=t.length;for(let l=0;l<e;l++)s+=t.charAt(Math.floor(Math.random()*o));return s},generateStateWithRedirect(e){const t={random:this.generateRandomString(12),redirect:e,siteID:this.configs.siteID};return btoa(JSON.stringify(t))},loginWithLine(){const e=this.configs.line?.client_id,t=encodeURIComponent(this.configs.line?.callback),s=this.generateStateWithRedirect("/user/profile"),o="profile openid",l="aggressive";window.location.href=`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${e}&redirect_uri=${t}&state=${s}&scope=${o}&bot_prompt=${l}`},isValidEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},transformUsername(e){const t=this.isValidEmail(e);e=t?e.toLowerCase().replace(/^\w/,(e=>e.toUpperCase())):e.replace(/^\w/,(e=>e.toUpperCase()));const s=e.replace(/^\w/,(e=>e.toLowerCase())),o=e.toLowerCase(),l=e.toUpperCase();return[e,s,o,l]},async login(){try{if(!this.username||!this.password)return this.errorStage=!0,this.errorMessage="โปรดกรอกชื่อผู้ใช้งานและรหัสผ่าน",void(this.activeBlock=!1);this.activeBlock=!0;const[e,t,s,o]=this.transformUsername(this.username),l=await H.POST("user/query",{method:"find",args:[{$or:[{username:e},{username:t},{username:s},{username:o}]}]},this.configs.key),i=l.data,a=i.length>0?i[0]:null;if(K.A.log("loginData",a),null===a||""===a||void 0===a)return this.errorStage=!0,this.errorMessage="ไม่พบข้อมูลบัญชีผู้ใช้นี้",void(this.activeBlock=!1);{const e=a.salt,t=z().SHA256(this.password+e).toString(),s=a.password;if(K.A.log(t,s),t===s)if("user"!=a.role)this.errorStage=!0,this.activeBlock=!1,this.errorMessage="ไม่มีสิทธิ์เข้าใช้งานเว็บไซต์นี้";else{const e=await H.POST("enroll/query",{method:"find",hidden:["userID"],args:[{$and:[{userID:a._id}]}]},this.configs.key),t=e.data;if(200===e.status){let e=[],s="";const o={active:!0,token:a._id,refresh:"",login:!0,userID:a._id,user:a,loader:!1,role:a.role,nav:"normal-nav",layout:"frontend-layout",current:s,list:e,enroll:t,channel:"web"};J.A.update("session",o),K.A.log("session",o),this.showModal?window.location.reload():this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:500,icon:"success",title:"แจ้งเตือน",text:"เข้าสู่ระบบเรียบร้อยแล้ว"}).then((()=>{a.req_reset?window.location.href="/user/reset":window.location.href="/user/profile"}))}}else this.errorStage=!0,this.activeBlock=!1,this.errorMessage="ชื่อผู้ใช้งานหรือรหัสผ่านไม่ถูกต้อง"}}catch(e){K.A.log(e)}},async reset(){try{this.errorStage=!1,this.activeBlock=!0;const[e,t,s,o]=this.transformUsername(this.username),l=await H.POST("user/query",{method:"find",args:[{$or:[{username:e},{username:t},{username:s},{username:o}]}]},this.configs.key),i=l.data,a=i.length>0?i[0]:null;if(null===a||""===a||void 0===a)return this.errorStage=!0,this.errorMessage="ไม่พบข้อมูลบัญชีผู้ใช้นี้",void(this.activeBlock=!1);{const e=z().lib.WordArray.random(16),t=z().SHA256(a.phone+e).toString(),s={data:{password:t,salt:e.toString()}},{status:o}=await H.PUT(`user/${a._id}`,s,this.configs.key);200===o&&(this.activeBlock=!1,q.A.prompt({title:"รีเซ็ตรหัสผ่านเรียบร้อยแล้ว",message:"คุณสามารถใช้เบอร์โทรที่ลงทะเบียนไว้ ในการเข้าสู่ระบบ !",confirm:async()=>{this.newmember=!1,this.memberMode="login"},cancel:()=>{}}))}}catch(e){K.A.log(e)}}}},Y=s(64621);const Z=(0,Y.A)(G,[["render",V],["__scopeId","data-v-434c8637"]]);var ee=Z},36532:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ee}});var o=s(20641),l=s(90033),i=s(53751);const a={class:"bg-gray-50"},r={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},n={class:"sm:mx-auto sm:w-full sm:max-w-lg"},d=["src"],c={class:"mt-6 text-center text-2xl font-bold tracking-tight text-gray-900"},u={class:"mt-2 text-center text-sm text-gray-600"},g={key:0,class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md p-2"},m={class:"bg-white"},p={class:"grid grid-cols-1 gap-2 mt-4"},b={key:0,class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},f={class:"relative mt-2"},h={class:"relative mt-2"},k={class:"flex items-center justify-between"},y={class:"text-sm"},v={key:0,class:"col-span-2"},x={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},L={class:"w-full"},w={type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},C={class:"relative mt-2"},_={key:0,class:"col-span-2"},S={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},F={class:"w-full"},A={type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},E={key:1,class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},B={class:"relative mt-2"},D={class:"relative mt-2"},M={class:"flex items-center justify-between"},U={class:"text-sm"},P={key:0,class:"col-span-2"},X={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},W={class:"w-full"},T={type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},I={class:"relative mt-2"},R={key:0,class:"col-span-2"},$={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},O={class:"w-full"},j={type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"};function V(e,t,s,V,J,N){const z=(0,o.g2)("router-link"),K=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",r,[(0,o.Lk)("div",n,[this.showModal?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("img",{key:0,class:"mx-auto h-14 w-auto",src:this.configs.siteLogo,alt:"Your Company"},null,8,d)),(0,o.Lk)("h2",c,(0,l.v_)(J.newmember?"เข้าสูระบบสมาชิกใหม่":"เข้าสู่ระบบสมาชิกเก่า"),1),(0,o.Lk)("p",u,[t[19]||(t[19]=(0,o.eW)(" หรือ ")),(0,o.bF)(z,{to:"/user/register",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:(0,o.k6)((()=>t[18]||(t[18]=[(0,o.eW)(" ลงทะเบียนสมาชิกใหม่ ")]))),_:1})])]),J.showForm?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",m,[(0,o.Lk)("div",p,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>{J.newmember=!1,N.toggleForm()}),class:"flex flex-col items-center justify-center px-4 py-4 rounded-md bg-white border-2 border-indigo-600 text-indigo-600 font-semibold w-full sm:w-auto"},[(0,o.bF)(K,{icon:["fas","key"],class:"h-10 w-10 mb-2"}),t[20]||(t[20]=(0,o.Lk)("span",{class:"text-2xl leading-6 text-center"},"สมาชิกเก่า",-1)),t[21]||(t[21]=(0,o.Lk)("span",{class:"font-normal text-black leading-6 text-center"},"ลงทะเบียนตั้งแต่ปี 65-66",-1))]),(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>{J.newmember=!0,N.toggleForm()}),class:"flex flex-col items-center justify-center px-4 py-4 rounded-md bg-white border-2 border-indigo-600 text-indigo-600 font-semibold w-full sm:w-auto"},[(0,o.bF)(K,{icon:["fas","key"],class:"h-10 w-10 mb-2"}),t[22]||(t[22]=(0,o.Lk)("span",{class:"text-2xl leading-6 text-center"},"สมาชิกใหม่",-1)),t[23]||(t[23]=(0,o.Lk)("span",{class:"font-normal text-black leading-6 text-center"},"ลงทะเบียนตั้งแต่ปี 67",-1))])])])])),J.showForm?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[J.newmember?((0,o.uX)(),(0,o.CE)("div",b,[(0,o.Lk)("div",{class:(0,l.C4)(["bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10 relative",[J.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},["login"===J.memberMode?((0,o.uX)(),(0,o.CE)("form",{key:0,class:"space-y-6",onSubmit:t[6]||(t[6]=(0,i.D$)(((...e)=>N.login&&N.login(...e)),["prevent"]))},[(0,o.Lk)("div",null,[(0,o.Lk)("div",f,[t[24]||(t[24]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("อีเมล์ "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>J.username=e),type:"text",placeholder:"อีเมล์",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.username]])])]),(0,o.Lk)("div",null,[(0,o.Lk)("div",h,[t[25]||(t[25]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("รหัสผ่าน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>J.password=e),type:"password",placeholder:"รหัสผ่าน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.password]])])]),(0,o.Lk)("div",k,[t[26]||(t[26]=(0,o.Lk)("div",{class:"flex items-center"},[(0,o.Lk)("input",{id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"}),(0,o.Lk)("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"},"จำฉันไว้")],-1)),(0,o.Lk)("div",y,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=e=>N.resetPassword("reset")),class:"font-medium text-indigo-600 hover:text-indigo-500"}," ลืมรหัสผ่าน ")])]),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",v,[(0,o.Lk)("div",x,[t[27]||(t[27]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",L,(0,l.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",w,[(0,o.bF)(K,{icon:["fas","key"],class:"mr-2"}),t[28]||(t[28]=(0,o.eW)(" เข้าสู่ระบบ "))]),(0,o.Lk)("button",{onClick:t[5]||(t[5]=e=>{J.newmember=!1,N.toggleForm()}),class:"flex w-full justify-center rounded-md bg-gray-300 text-md font-semibold text-gray-700 shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 mt-4 py-2"},"ย้อนกลับ")])],32)):(0,o.Q3)("",!0),"reset"===J.memberMode?((0,o.uX)(),(0,o.CE)("form",{key:1,class:"space-y-6",onSubmit:t[9]||(t[9]=(0,i.D$)(((...e)=>N.reset&&N.reset(...e)),["prevent"]))},[(0,o.Lk)("div",null,[(0,o.Lk)("div",C,[t[29]||(t[29]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("อีเมล์ที่ลงทะเบียน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>J.username=e),type:"text",placeholder:"อีเมล์ที่ลงทะเบียน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.username]])])]),t[32]||(t[32]=(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,"*หมายเหตุ*"),(0,o.Lk)("br"),(0,o.eW)(' กรอกอีเมล์ที่ลงทะเบียนไว้ในระบบ หลังจากคลิ๊ก "ตั้งค่ารหัสผ่าน" เรียบร้อยแล้ว ระบบจะทำการสร้างรหัสผ่านเป็นเบอร์โทรที่ลงทะเบียนไว้ในระบบ หากจำเบอร์โทรไม่ได้ กรุณาแจ้งทีมงานที่ @thesacred ')],-1)),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("div",S,[t[30]||(t[30]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",F,(0,l.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",A,[(0,o.bF)(K,{icon:["fas","refresh"],class:"mr-2"}),t[31]||(t[31]=(0,o.eW)(" ตั้งค่ารหัสผ่าน "))]),(0,o.Lk)("button",{onClick:t[8]||(t[8]=e=>N.resetPassword("login")),class:"flex w-full justify-center rounded-md bg-gray-300 text-md font-semibold text-gray-700 shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 mt-4 py-2"},"ย้อนกลับ")])],32)):(0,o.Q3)("",!0)],2)])):(0,o.Q3)("",!0),J.newmember?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",E,[(0,o.Lk)("div",{class:(0,l.C4)(["bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10 relative",[J.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},["login"===J.memberMode?((0,o.uX)(),(0,o.CE)("form",{key:0,class:"space-y-6",onSubmit:t[14]||(t[14]=(0,i.D$)(((...e)=>N.login&&N.login(...e)),["prevent"]))},[(0,o.Lk)("div",null,[(0,o.Lk)("div",B,[t[33]||(t[33]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("เลขที่ประจำตัวประชาชน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>J.username=e),type:"text",placeholder:"เลขที่ประจำตัวประชาชน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.username]])])]),(0,o.Lk)("div",null,[(0,o.Lk)("div",D,[t[34]||(t[34]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("รหัสผ่าน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>J.password=e),type:"password",placeholder:"รหัสผ่าน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.password]])])]),(0,o.Lk)("div",M,[t[35]||(t[35]=(0,o.Lk)("div",{class:"flex items-center"},[(0,o.Lk)("input",{id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"}),(0,o.Lk)("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"},"จำฉันไว้")],-1)),(0,o.Lk)("div",U,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=e=>N.resetPassword("reset")),class:"font-medium text-indigo-600 hover:text-indigo-500"}," ลืมรหัสผ่าน ")])]),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",P,[(0,o.Lk)("div",X,[t[36]||(t[36]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",W,(0,l.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",T,[(0,o.bF)(K,{icon:["fas","key"],class:"mr-2"}),t[37]||(t[37]=(0,o.eW)(" เข้าสู่ระบบ "))]),(0,o.Lk)("button",{onClick:t[13]||(t[13]=e=>{J.newmember=!1,N.toggleForm()}),class:"flex w-full justify-center rounded-md bg-gray-300 text-md font-semibold text-gray-700 shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 mt-4 py-2"},"ย้อนกลับ")])],32)):(0,o.Q3)("",!0),"reset"===J.memberMode?((0,o.uX)(),(0,o.CE)("form",{key:1,class:"space-y-6",onSubmit:t[17]||(t[17]=(0,i.D$)(((...e)=>N.reset&&N.reset(...e)),["prevent"]))},[(0,o.Lk)("div",null,[(0,o.Lk)("div",I,[t[38]||(t[38]=(0,o.Lk)("span",{class:"input-label"},[(0,o.eW)("เลขที่ประจำตัวประชาชน "),(0,o.Lk)("small",{class:"text-red-400"},"(*จำเป็นต้องกรอก)")],-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>J.username=e),type:"text",placeholder:"เลขที่ประจำตัวประชาชน",class:"w-full p-4 border border-gray-200 text-sm"},null,512),[[i.Jo,J.username]])])]),t[41]||(t[41]=(0,o.Lk)("div",null,[(0,o.Lk)("strong",null,"*หมายเหตุ*"),(0,o.Lk)("br"),(0,o.eW)(' กรอกเลขที่บัตรประชาชนที่ลงทะเบียนไว้ในระบบ หลังจากคลิ๊ก "ตั้งค่ารหัสผ่าน" เรียบร้อยแล้ว ระบบจะทำการสร้างรหัสผ่านเป็นเบอร์โทรที่ลงทะเบียนไว้ในระบบ หากจำเบอร์โทรไม่ได้ กรุณาแจ้งทีมงานที่ @thesacred ')],-1)),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",R,[(0,o.Lk)("div",$,[t[39]||(t[39]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",O,(0,l.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),(0,o.Lk)("button",j,[(0,o.bF)(K,{icon:["fas","refresh"],class:"mr-2"}),t[40]||(t[40]=(0,o.eW)(" ตั้งค่ารหัสผ่าน "))]),(0,o.Lk)("button",{onClick:t[16]||(t[16]=e=>N.resetPassword("login")),class:"flex w-full justify-center rounded-md bg-gray-300 text-md font-semibold text-gray-700 shadow-sm hover:bg-gray-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-600 mt-4 py-2"},"ย้อนกลับ")])],32)):(0,o.Q3)("",!0)],2)]))],64)):(0,o.Q3)("",!0)])])}s(64979);var J=s(40475),N=s(21396),z=s.n(N),K=s(63084),Q=s(40471),q=s(73288);const H=new Q.A(!1);var G={name:"Login",components:{},props:{showModal:{type:Boolean,default:!1}},data(){return{configs:J.A.get("configs"),hostname:J.A.get("hostname"),username:"",password:"",errorStage:!1,errorMessage:"",newmember:!1,showForm:!1,activeBlock:!1,memberMode:"login"}},methods:{toggleForm(){this.showForm=!this.showForm},resetPassword(e){this.memberMode=e},generateRandomString(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";const o=t.length;for(let l=0;l<e;l++)s+=t.charAt(Math.floor(Math.random()*o));return s},generateStateWithRedirect(e){const t={random:this.generateRandomString(12),redirect:e,siteID:this.configs.siteID};return btoa(JSON.stringify(t))},loginWithLine(){const e=this.configs.line?.client_id,t=encodeURIComponent(this.configs.line?.callback),s=this.generateStateWithRedirect("/user/profile"),o="profile openid",l="aggressive";window.location.href=`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${e}&redirect_uri=${t}&state=${s}&scope=${o}&bot_prompt=${l}`},isValidEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},transformUsername(e){const t=this.isValidEmail(e);e=t?e.toLowerCase().replace(/^\w/,(e=>e.toUpperCase())):e.replace(/^\w/,(e=>e.toUpperCase()));const s=e.replace(/^\w/,(e=>e.toLowerCase())),o=e.toLowerCase(),l=e.toUpperCase();return[e,s,o,l]},async login(){try{if(!this.username||!this.password)return this.errorStage=!0,this.errorMessage="โปรดกรอกชื่อผู้ใช้งานและรหัสผ่าน",void(this.activeBlock=!1);this.activeBlock=!0;const[e,t,s,o]=this.transformUsername(this.username),l=await H.POST("user/query",{method:"find",args:[{$or:[{username:e},{username:t},{username:s},{username:o}]}]},this.configs.key),i=l.data,a=i.length>0?i[0]:null;if(K.A.log("loginData",a),null===a||""===a||void 0===a)return this.errorStage=!0,this.errorMessage="ไม่พบข้อมูลบัญชีผู้ใช้นี้",void(this.activeBlock=!1);{const e=a.salt,t=z().SHA256(this.password+e).toString(),s=a.password;if(K.A.log(t,s),t===s)if("user"!=a.role)this.errorStage=!0,this.activeBlock=!1,this.errorMessage="ไม่มีสิทธิ์เข้าใช้งานเว็บไซต์นี้";else{const e=await H.POST("enroll/query",{method:"find",hidden:["userID"],args:[{$and:[{userID:a._id}]}]},this.configs.key),t=e.data;if(200===e.status){let e=[],s="";const o={active:!0,token:a._id,refresh:"",login:!0,userID:a._id,user:a,loader:!1,role:a.role,nav:"normal-nav",layout:"frontend-layout",current:s,list:e,enroll:t,channel:"web"};J.A.update("session",o),K.A.log("session",o),this.showModal?window.location.reload():this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:500,icon:"success",title:"แจ้งเตือน",text:"เข้าสู่ระบบเรียบร้อยแล้ว"}).then((()=>{a.req_reset?window.location.href="/user/reset":window.location.href="/user/profile"}))}}else this.errorStage=!0,this.activeBlock=!1,this.errorMessage="ชื่อผู้ใช้งานหรือรหัสผ่านไม่ถูกต้อง"}}catch(e){K.A.log(e)}},async reset(){try{this.errorStage=!1,this.activeBlock=!0;const[e,t,s,o]=this.transformUsername(this.username),l=await H.POST("user/query",{method:"find",args:[{$or:[{username:e},{username:t},{username:s},{username:o}]}]},this.configs.key),i=l.data,a=i.length>0?i[0]:null;if(null===a||""===a||void 0===a)return this.errorStage=!0,this.errorMessage="ไม่พบข้อมูลบัญชีผู้ใช้นี้",void(this.activeBlock=!1);{const e=z().lib.WordArray.random(16),t=z().SHA256(a.phone+e).toString(),s={data:{password:t,salt:e.toString()}},{status:o}=await H.PUT(`user/${a._id}`,s,this.configs.key);200===o&&(this.activeBlock=!1,q.A.prompt({title:"รีเซ็ตรหัสผ่านเรียบร้อยแล้ว",message:"คุณสามารถใช้เบอร์โทรที่ลงทะเบียนไว้ ในการเข้าสู่ระบบ !",confirm:async()=>{this.newmember=!1,this.memberMode="login"},cancel:()=>{}}))}}catch(e){K.A.log(e)}}}},Y=s(64621);const Z=(0,Y.A)(G,[["render",V],["__scopeId","data-v-39cedc13"]]);var ee=Z},93671:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return B}});var o=s(20641),l=s(53751),i=s(90033);const a={class:"bg-gray-50"},r={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},n={class:"sm:mx-auto sm:w-full sm:max-w-lg"},d=["src"],c={class:"mt-2 text-center text-sm text-gray-600"},u={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},g={class:"bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10"},m={class:"mt-2"},p={class:"mt-2"},b={class:"flex items-center justify-between"},f={class:"text-sm"},h={key:0,class:"col-span-2"},k={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},y={class:"w-full"};function v(e,t,s,v,x,L){const w=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",r,[(0,o.Lk)("div",n,[this.showModal?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("img",{key:0,class:"mx-auto h-24 w-auto",src:this.configs.siteLogo,alt:"Your Company"},null,8,d)),t[5]||(t[5]=(0,o.Lk)("h2",{class:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900"},"เข้าสู่ระบบสมาชิก",-1)),(0,o.Lk)("p",c,[t[4]||(t[4]=(0,o.eW)(" หรือ ")),(0,o.bF)(w,{to:"/user/register",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)(" ลงทะเบียนสมาชิกใหม่ ")]))),_:1})])]),(0,o.Lk)("div",u,[(0,o.Lk)("div",g,[(0,o.Lk)("form",{class:"space-y-6",onSubmit:t[2]||(t[2]=(0,l.D$)(((...e)=>L.login&&L.login(...e)),["prevent"]))},[(0,o.Lk)("div",null,[t[6]||(t[6]=(0,o.Lk)("label",{for:"email",class:"block text-md font-semibold leading-6 text-gray-900"},"อีเมล์",-1)),(0,o.Lk)("div",m,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>x.email=e),id:"email",name:"email",type:"email",autocomplete:"email",required:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[l.Jo,x.email]])])]),(0,o.Lk)("div",null,[t[7]||(t[7]=(0,o.Lk)("label",{for:"password",class:"block text-md font-semibold leading-6 text-gray-900"},"รหัสผ่าน",-1)),(0,o.Lk)("div",p,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>x.password=e),id:"password",name:"password",type:"password",autocomplete:"current-password",required:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[l.Jo,x.password]])])]),(0,o.Lk)("div",b,[t[9]||(t[9]=(0,o.Lk)("div",{class:"flex items-center"},[(0,o.Lk)("input",{id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"}),(0,o.Lk)("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"},"จำฉันไว้")],-1)),(0,o.Lk)("div",f,[(0,o.bF)(w,{to:"/user/forgot",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)(" ลืมรหัสผ่าน ")]))),_:1})])]),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",k,[t[10]||(t[10]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",y,(0,i.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),t[11]||(t[11]=(0,o.Lk)("button",{type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"เข้าสู่ระบบ",-1))])],32)])])])])}s(64979);var x=s(40475),L=s(21396),w=s.n(L),C=s(63084),_=s(40471);const S=new _.A(!1);var F={name:"Login",components:{},props:{showModal:{type:Boolean,default:!1}},data(){return{configs:x.A.get("configs"),hostname:x.A.get("hostname"),email:"",password:"",errorStage:!1,errorMessage:""}},methods:{generateRandomString(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";const o=t.length;for(let l=0;l<e;l++)s+=t.charAt(Math.floor(Math.random()*o));return s},generateStateWithRedirect(e){const t={random:this.generateRandomString(12),redirect:e,siteID:this.configs.siteID};return btoa(JSON.stringify(t))},loginWithLine(){const e=this.configs.line?.client_id,t=encodeURIComponent(this.configs.line?.callback),s=this.generateStateWithRedirect("/user/profile"),o="profile openid",l="aggressive";window.location.href=`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${e}&redirect_uri=${t}&state=${s}&scope=${o}&bot_prompt=${l}`},async signin(){try{this.activeBlock=!0;const e=await S.POST("signin",{username:this.email,password:this.password},this.configs.key),t=e.data,s=t.session?t.session.user:null;if(C.A.log("loginData",s),null===s||""===s||void 0===s)return this.errorStage=!0,this.errorMessage="ไม่พบข้อมูลบัญชีผู้ใช้นี้",void(this.activeBlock=!1);if("user"!==s.role)this.errorStage=!0,this.errorMessage="ไม่มีสิทธิ์เข้าใช้งานเว็บไซต์นี้";else{const e=await S.POST("enroll/query",{method:"find",hidden:["userID"],args:[{$and:[{userID:s._id}]}]},this.configs.key),t=e.data;if(200===e.status){let e=[],o="";const l={active:!0,token:s._id,refresh:"",login:!0,userID:s._id,user:s,loader:!1,role:s.role,nav:"normal-nav",layout:"frontend-layout",current:o,list:e,enroll:t,channel:"web"};x.A.update("session",l),C.A.log("session",l),this.showModal?window.location.reload():this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:500,icon:"success",title:"แจ้งเตือน",text:"เข้าสู่ระบบเรียบร้อยแล้ว"}).then((()=>{s.req_reset?window.location.href="/user/reset":window.location.href="/user/profile"}))}}this.activeBlock=!1}catch(e){C.A.log(e)}},async login(){try{this.activeBlock=!0;const e=await S.POST("user/query",{method:"find",args:[{$and:[{username:this.email}]}]},this.configs.key),t=e.data,s=t.length>0?t[0]:null;if(C.A.log("loginData",s),null===s||""===s||void 0===s)return this.errorStage=!0,this.errorMessage="ไม่พบข้อมูลบัญชีผู้ใช้นี้",void(this.activeBlock=!1);{const e=s.salt,t=w().SHA256(this.password+e).toString(),o=s.password;if(C.A.log(t,o),t===o)if("user"!=s.role)this.errorStage=!0,this.errorMessage="ไม่มีสิทธิ์เข้าใช้งานเว็บไซต์นี้";else{const e=await S.POST("enroll/query",{method:"find",hidden:["userID"],args:[{$and:[{userID:s._id}]}]},this.configs.key),t=e.data;if(200===e.status){let e=[],o="";const l={active:!0,token:s._id,refresh:"",login:!0,userID:s._id,user:s,loader:!1,role:s.role,nav:"normal-nav",layout:"frontend-layout",current:o,list:e,enroll:t,channel:"web"};x.A.update("session",l),C.A.log("session",l),this.showModal?window.location.reload():this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:500,icon:"success",title:"แจ้งเตือน",text:"เข้าสู่ระบบเรียบร้อยแล้ว"}).then((()=>{s.req_reset?window.location.href="/user/reset":window.location.href="/user/profile"}))}}else this.errorStage=!0,this.errorMessage="ชื่อผู้ใช้งานหรือรหัสผ่านไม่ถูกต้อง"}this.activeBlock=!1}catch(e){C.A.log(e)}}}},A=s(64621);const E=(0,A.A)(F,[["render",v]]);var B=E},95760:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return B}});var o=s(20641),l=s(53751),i=s(90033);const a={class:"bg-gray-50"},r={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},n={class:"sm:mx-auto sm:w-full sm:max-w-lg"},d=["src"],c={class:"mt-2 text-center text-sm text-gray-600"},u={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},g={class:"bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10"},m={class:"mt-2"},p={class:"mt-2"},b={class:"flex items-center justify-between"},f={class:"text-sm"},h={key:0,class:"col-span-2"},k={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},y={class:"w-full"};function v(e,t,s,v,x,L){const w=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",a,[(0,o.Lk)("div",r,[(0,o.Lk)("div",n,[this.showModal?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("img",{key:0,class:"mx-auto h-24 w-auto",src:this.configs.siteLogo,alt:"Your Company"},null,8,d)),t[5]||(t[5]=(0,o.Lk)("h2",{class:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900"},"เข้าสู่ระบบสมาชิก",-1)),(0,o.Lk)("p",c,[t[4]||(t[4]=(0,o.eW)(" หรือ ")),(0,o.bF)(w,{to:"/user/register",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)(" ลงทะเบียนสมาชิกใหม่ ")]))),_:1})])]),(0,o.Lk)("div",u,[(0,o.Lk)("div",g,[(0,o.Lk)("form",{class:"space-y-6",onSubmit:t[2]||(t[2]=(0,l.D$)(((...e)=>L.login&&L.login(...e)),["prevent"]))},[(0,o.Lk)("div",null,[t[6]||(t[6]=(0,o.Lk)("label",{for:"email",class:"block text-md font-semibold leading-6 text-gray-900"},"อีเมล์",-1)),(0,o.Lk)("div",m,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>x.email=e),id:"email",name:"email",type:"email",autocomplete:"email",required:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[l.Jo,x.email]])])]),(0,o.Lk)("div",null,[t[7]||(t[7]=(0,o.Lk)("label",{for:"password",class:"block text-md font-semibold leading-6 text-gray-900"},"รหัสผ่าน",-1)),(0,o.Lk)("div",p,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>x.password=e),id:"password",name:"password",type:"password",autocomplete:"current-password",required:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[l.Jo,x.password]])])]),(0,o.Lk)("div",b,[t[9]||(t[9]=(0,o.Lk)("div",{class:"flex items-center"},[(0,o.Lk)("input",{id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"}),(0,o.Lk)("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"},"จำฉันไว้")],-1)),(0,o.Lk)("div",f,[(0,o.bF)(w,{to:"/user/forgot",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)(" ลืมรหัสผ่าน ")]))),_:1})])]),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.Lk)("div",k,[t[10]||(t[10]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",y,(0,i.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),t[11]||(t[11]=(0,o.Lk)("button",{type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"เข้าสู่ระบบ",-1))])],32)])])])])}s(64979);var x=s(40475),L=s(21396),w=s.n(L),C=s(63084),_=s(40471);const S=new _.A(!1);var F={name:"Login",components:{},props:{showModal:{type:Boolean,default:!1}},data(){return{configs:x.A.get("configs"),hostname:x.A.get("hostname"),email:"",password:"",errorStage:!1,errorMessage:""}},methods:{generateRandomString(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let s="";const o=t.length;for(let l=0;l<e;l++)s+=t.charAt(Math.floor(Math.random()*o));return s},generateStateWithRedirect(e){const t={random:this.generateRandomString(12),redirect:e,siteID:this.configs.siteID};return btoa(JSON.stringify(t))},loginWithLine(){const e=this.configs.line?.client_id,t=encodeURIComponent(this.configs.line?.callback),s=this.generateStateWithRedirect("/user/profile"),o="profile openid",l="aggressive";window.location.href=`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${e}&redirect_uri=${t}&state=${s}&scope=${o}&bot_prompt=${l}`},async login(){try{this.activeBlock=!0;const e=await S.POST("user/query",{method:"find",args:[{$and:[{username:this.email}]}]},this.configs.key),t=e.data,s=t.length>0?t[0]:null;if(C.A.log("loginData",s),null===s||""===s||void 0===s)return this.errorStage=!0,this.errorMessage="ไม่พบข้อมูลบัญชีผู้ใช้นี้",void(this.activeBlock=!1);{const e=s.salt,t=w().SHA256(this.password+e).toString(),o=s.password;if(C.A.log(t,o),t===o)if("user"!=s.role)this.errorStage=!0,this.errorMessage="ไม่มีสิทธิ์เข้าใช้งานเว็บไซต์นี้";else{const e=await S.POST("enroll/query",{method:"find",hidden:["userID"],args:[{$and:[{userID:s._id}]}]},this.configs.key),t=e.data;if(200===e.status){let e=[],o="";const l={active:!0,token:s._id,refresh:"",login:!0,userID:s._id,user:s,loader:!1,role:s.role,nav:"normal-nav",layout:"frontend-layout",current:o,list:e,enroll:t,channel:"web"};x.A.update("session",l),C.A.log("session",l),this.showModal?window.location.reload():this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:500,icon:"success",title:"แจ้งเตือน",text:"เข้าสู่ระบบเรียบร้อยแล้ว"}).then((()=>{s.req_reset?window.location.href="/user/reset":window.location.href="/user/profile"}))}}else this.errorStage=!0,this.errorMessage="ชื่อผู้ใช้งานหรือรหัสผ่านไม่ถูกต้อง"}this.activeBlock=!1}catch(e){C.A.log(e)}}}},A=s(64621);const E=(0,A.A)(F,[["render",v]]);var B=E},40687:function(e,t,s){"use strict";s.d(t,{A:function(){return f}});var o=s(20641),l=s(50953),i=s(90033),a=s(94232),r=s(10797),n=s(55372);const d={key:0,class:"fixed inset-0 overflow-y-auto"},c={class:"flex min-h-full items-center justify-center p-4 text-center"},u={class:"font-medium"},g={class:"bg-black w-8 h-8 right-2 top-2 leading-8 hover:bg-gray-500"},m={props:["isWindowsOpen","allowFileType","callbackFunction"],data(){return console.log("FileBrowser props:",this.isWindowsOpen,this.allowFileType,this.callbackFunction),{SessionList:[],loading_sources:!0,activeBlock:!1,schoolId:"",isOpen:this.isWindowsOpen,isAllow:this.allowFileType,isCallback:this.callbackFunction,mode:"popup"}},components:{FileManager:n.A},watch:{isWindowsOpen(e){console.log("isWindowsOpen changed to:",e),this.isOpen=e}},methods:{selectFileTrigger(e){this.selectFileTrigger=e,this.closeModal(),this.selectFile(e)},closeModal(){this.isOpen=!1,this.$emit("fileBrowserTrigger",!1)},selectFile(e){this.$emit("fileBrowserCallback",e)}},async mounted(){console.log("FileBrowser mounted with isOpen:",this.isOpen,"isWindowsOpen:",this.isWindowsOpen)},setup(){}};var p=Object.assign(m,{__name:"FileBrowser",setup(e){return(t,s)=>{const m=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.Wv)((0,l.R1)(a.O),{appear:"",show:t.isOpen,as:"template"},{default:(0,o.k6)((()=>[(0,o.bF)((0,l.R1)(r.lG),{as:"div",onClose:t.closeModal,class:"relative z-10"},{default:(0,o.k6)((()=>[(0,o.bF)((0,l.R1)(a._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,o.k6)((()=>s[1]||(s[1]=[(0,o.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)]))),_:1}),t.loading_sources?((0,o.uX)(),(0,o.CE)("div",d,[(0,o.Lk)("div",c,[(0,o.bF)((0,l.R1)(a._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:(0,o.k6)((()=>[(0,o.bF)((0,l.R1)(r.Lj),{class:(0,i.C4)(["w-[60rem] z-40 transform overflow-hidden bg-white p-3 text-left align-middle shadow-xl transition-all blocking relative",[t.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},{default:(0,o.k6)((()=>[(0,o.bF)((0,l.R1)(r.L3),{as:"h3",class:"text-lg pb-2 font-bold leading-6 text-gray-900 border-b"},{default:(0,o.k6)((()=>[s[3]||(s[3]=(0,o.eW)("เลือกไฟล์ (Select File) ")),(0,o.Lk)("p",u,[s[2]||(s[2]=(0,o.eW)("อนุญาติเฉพาะไฟล์ ")),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.allowFileType,(e=>((0,o.uX)(),(0,o.CE)("span",{key:e.code,class:"text-xs font-medium bg-indigo-600 pl-2 pr-2 pt-1 mr-1 rounded text-white"},(0,i.v_)(e),1)))),128))]),(0,o.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>t.closeModal&&t.closeModal(...e)),type:"button",class:"z-50 absolute top-2 right-2"},[(0,o.Lk)("div",g,[(0,o.bF)(m,{icon:["fas","times"],class:"text-white mt-[7px] font-sm"})])])])),_:1}),(0,o.Lk)("div",null,[(0,o.bF)(n.A,{onSelectFileTrigger:t.selectFileTrigger,Mode:t.mode,AllowFile:t.isAllow,CallbackFunc:t.isCallback},null,8,["onSelectFileTrigger","Mode","AllowFile","CallbackFunc"])])])),_:1},8,["class"])])),_:1})])])):(0,o.Q3)("",!0)])),_:1},8,["onClose"])])),_:1},8,["show"])}}});const b=p;var f=b},74284:function(e,t,s){"use strict";s.d(t,{A:function(){return u}});var o=s(20641);function l(e,t,s,l,i,a){return(0,o.uX)(),(0,o.CE)("div")}var i=s(75220),a=s(63084),r=s(40475),n={name:"Authen",data(){return{configs:r.A.get("configs"),session:r.A.get("session")}},created(){a.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const e=(0,i.lq)(),t=e.meta.auth,s=e.name,o=r.A.get("session");let l=o.token,n=o.login,d=o.current;a.A.log("hasLogin",n),a.A.log("Page -> Auth:",t),a.A.log("User -> Token:",l),a.A.log("User -> Login:",n),"frontend"===this.session.interface?a.A.log("Front-End"):"backend"===this.session.interface&&(a.A.log("Back-End"),n?("Login"==s||void 0==d?(a.A.log("Not Login Again"),this.$router.replace({path:"/"})):(a.A.log("Has School Active"),t?(a.A.log("This page is : Authen Request"),""===l||null===l||void 0==l?a.A.log("Your Cannot Access"):a.A.log("Your Can Access")):a.A.log("This page is : No Authen Request")),a.A.log("Login")):(a.A.log("Not Login"),"Login"!=s?(window.location.href="/member/login",a.A.log("Not Login Page",s)):a.A.log("Login Page",s)))}},setup(){}},d=s(64621);const c=(0,d.A)(n,[["render",l]]);var u=c},87734:function(e,t,s){var o={"./Forgot-DOA.vue":31359,"./Forgot-SACRED.vue":86539,"./Forgot-STD.vue":66164};function l(e){var t=i(e);return s(t)}function i(e){if(!s.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}l.keys=function(){return Object.keys(o)},l.resolve=i,e.exports=l,l.id=87734},92770:function(e,t,s){var o={"./Bypass.vue":49615,"./Login-AD.vue":77948,"./Login-DOA.vue":38971,"./Login-SACRED.vue":36532,"./Login-STD.vue":93671,"./Login.vue":95760};function l(e){var t=i(e);return s(t)}function i(e){if(!s.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}l.keys=function(){return Object.keys(o)},l.resolve=i,e.exports=l,l.id=92770}}]);
//# sourceMappingURL=7145.eeba1028.js.map