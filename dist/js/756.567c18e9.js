"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[756],{48505:function(t,e,s){s.d(e,{A:function(){return c}});var a=s(20641);function i(t,e,s,i,o,n){const l=(0,a.g2)("Builder");return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.bF)(l,{onUpdateLayout:n.updateData,builderData:this.rows,getBuilder:n.getData,backUrl:"/application/view/"+this.$route.params.id},null,8,["onUpdateLayout","builderData","getBuilder","backUrl"])])}s(98992),s(72577),s(81454);var o=s(40475),n=s(62524),l={data(){return{configs:o.A.get("configs"),session:o.A.get("session"),dataItem:this.$route.params.slug,accessSession:[],selectSession:!1,rows:[],formData:[],applicationData:[]}},components:{Builder:n.A},methods:{changeSession(){this.selectSession=!0},async getData(){if(o.A.get("session","login"))try{this.activeBlock=!0;let t=this.$route.params.id,e=this.$route.params.form;const s=await fetch("https://gateway.cloudrestfulapi.com/api/application/"+t,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}}),a=await s.json();return Array.isArray(a.form)?this.formData=a.form.find((t=>t.name===e)):console.error("RestReturn.form is not an array"),this.applicationData=a,console.log(this.formData),this.rows=this.formData,this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"ดึงข้อมูลหน้าเว็บ",text:"ดึงข้อมูลหน้าเว็บนี้ สำเร็จแล้ว"}),this.activeBlock=!1,this.rows}catch(t){console.log(t)}},async updateData(t){try{let e=this.$route.params.form;this.applicationData.form=this.applicationData.form.map((s=>s.name===e?{...s,builder:t}:s)),console.log(this.applicationData.form);const s=await fetch(`https://gateway.cloudrestfulapi.com/api/application/${this.$route.params.id}`,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{form:this.applicationData.form}})}),a=await s.json();console.log(a),200===s.status&&this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"บันทึกข้อมูลหน้าเว็บ",text:"บันทึกข้อมูลสำหรับหน้าเว็บนี้ สำเร็จแล้ว"})}catch(e){console.error(e)}}},async mounted(){try{this.accessSession=o.A.get("session","current"),await this.getData()}catch(t){console.log(Error)}},setup(){}},r=s(64621);const d=(0,r.A)(l,[["render",i]]);var c=d},20756:function(t,e,s){s.r(e),s.d(e,{default:function(){return N}});var a=s(20641);function i(t,e,s,i,o,n){return(0,a.uX)(),(0,a.Wv)((0,a.$y)(n.componentName))}var o=s(52968),n=s(75220),l=s(40475),r=s(48505),d=s(90033);const c={key:0,class:"text-center"},m={class:"flex border-b border-gray-200 bg-white","aria-label":"Breadcrumb"},g={role:"list",class:"mx-auto flex w-full max-w-screen-xl space-x-4 px-4 sm:px-6 lg:px-8"},u={class:"flex"},p={class:"flex items-center"},f={class:"flex"},h={class:"flex items-center"},x={class:"bg-gray-50"},y={class:"mx-auto max-w-2xl pb-24 pt-4 sm:px-6 sm:pt-8 lg:max-w-7xl lg:px-8"},v={class:"space-y-2 px-4 sm:flex sm:items-baseline sm:justify-between sm:space-y-0 sm:px-0"},b={class:"flex sm:items-baseline sm:space-x-4"},k={class:"text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl"};function w(t,e,s,i,o,n){const l=(0,a.g2)("Loader"),r=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)(a.FK,null,[o.loading_sources?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",c,[(0,a.bF)(l)])),(0,a.Lk)("nav",m,[(0,a.Lk)("ol",g,[e[3]||(e[3]=(0,a.Fv)('<li class="flex"><div class="flex items-center"><a href="#" class="text-gray-400 hover:text-gray-500"><svg class="h-5 w-5 flex-shrink-0" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M9.293 2.293a1 1 0 011.414 0l7 7A1 1 0 0117 11h-1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-6H3a1 1 0 01-.707-1.707l7-7z" clip-rule="evenodd"></path></svg><span class="sr-only">Home</span></a></div></li>',1)),(0,a.Lk)("li",u,[(0,a.Lk)("div",p,[e[1]||(e[1]=(0,a.Lk)("svg",{class:"h-full w-6 flex-shrink-0 text-gray-200",viewBox:"0 0 24 44",preserveAspectRatio:"none",fill:"currentColor","aria-hidden":"true"},[(0,a.Lk)("path",{d:"M.293 0l22 22-22 22h1.414l22-22-22-22H.293z"})],-1)),(0,a.bF)(r,{to:"/application/home/",class:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700"},{default:(0,a.k6)((()=>e[0]||(e[0]=[(0,a.eW)(" แบบฟอร์มทั้งหมด ")]))),_:1})])]),(0,a.Lk)("li",f,[(0,a.Lk)("div",h,[e[2]||(e[2]=(0,a.Lk)("svg",{class:"h-full w-6 flex-shrink-0 text-gray-200",viewBox:"0 0 24 44",preserveAspectRatio:"none",fill:"currentColor","aria-hidden":"true"},[(0,a.Lk)("path",{d:"M.293 0l22 22-22 22h1.414l22-22-22-22H.293z"})],-1)),(0,a.bF)(r,{to:"/application/view/"+o.assetData._id,class:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700"},{default:(0,a.k6)((()=>[(0,a.eW)((0,d.v_)(o.assetData.name),1)])),_:1},8,["to"])])]),e[4]||(e[4]=(0,a.Fv)('<li class="flex"><div class="flex items-center"><svg class="h-full w-6 flex-shrink-0 text-gray-200" viewBox="0 0 24 44" preserveAspectRatio="none" fill="currentColor" aria-hidden="true"><path d="M.293 0l22 22-22 22h1.414l22-22-22-22H.293z"></path></svg><a href="#" class="ml-4 text-sm font-medium text-gray-500 hover:text-gray-700" aria-current="page">แบบฟอร์ม A</a></div></li>',1))])]),(0,a.Lk)("div",x,[(0,a.Lk)("main",y,[(0,a.Lk)("div",v,[(0,a.Lk)("div",b,[(0,a.Lk)("h1",k,"แบบฟอร์ม #"+(0,d.v_)(o.userApply._id),1)]),e[5]||(e[5]=(0,a.Lk)("p",{class:"text-sm text-gray-600"},[(0,a.eW)("ลงทะเบียนเมื่อ "),(0,a.Lk)("time",{datetime:"2021-03-22",class:"font-medium text-gray-900"},"March 22, 2021")],-1))]),e[6]||(e[6]=(0,a.Lk)("ul",{role:"list",class:"mt-8 grid grid-cols-1 gap-x-3 gap-y-3 lg:grid-cols-4 xl:gap-x-3"},[(0,a.Lk)("li",{class:"bg-white overflow-hidden rounded-xl border border-gray-200"},[(0,a.Lk)("div",{class:"flex items-center gap-x-4 border-b border-gray-900/5 bg-gray-50 p-3"},[(0,a.Lk)("div",{class:"text-sm font-bold leading-6 text-gray-900"},"From A")]),(0,a.Lk)("dl",{class:"-my-3 divide-y divide-gray-100 px-6 py-4 text-sm leading-6"},[(0,a.Lk)("div",{class:"flex justify-between gap-x-4 py-3"},[(0,a.Lk)("dt",{class:"text-gray-500"},"Last invoice"),(0,a.Lk)("dd",{class:"text-gray-700"},[(0,a.Lk)("time",{datetime:"2022-12-13"},"December 13, 2022")])]),(0,a.Lk)("div",{class:"flex justify-between gap-x-4 py-3"},[(0,a.Lk)("dt",{class:"text-gray-500"},"Amount"),(0,a.Lk)("dd",{class:"flex items-start gap-x-2"},[(0,a.Lk)("div",{class:"font-medium text-gray-900"},"$2,000.00"),(0,a.Lk)("div",{class:"rounded-md py-1 px-2 text-xs font-medium ring-1 ring-inset text-red-700 bg-red-50 ring-red-600/10"},"Overdue")])])])]),(0,a.Lk)("li",{class:"bg-white overflow-hidden rounded-xl border border-gray-200"},[(0,a.Lk)("div",{class:"flex items-center gap-x-4 border-b border-gray-900/5 bg-gray-50 p-3"},[(0,a.Lk)("div",{class:"text-sm font-bold leading-6 text-gray-900"},"Form B")]),(0,a.Lk)("dl",{class:"-my-3 divide-y divide-gray-100 px-6 py-4 text-sm leading-6"},[(0,a.Lk)("div",{class:"flex justify-between gap-x-4 py-3"},[(0,a.Lk)("dt",{class:"text-gray-500"},"Last invoice"),(0,a.Lk)("dd",{class:"text-gray-700"},[(0,a.Lk)("time",{datetime:"2023-01-22"},"January 22, 2023")])]),(0,a.Lk)("div",{class:"flex justify-between gap-x-4 py-3"},[(0,a.Lk)("dt",{class:"text-gray-500"},"Amount"),(0,a.Lk)("dd",{class:"flex items-start gap-x-2"},[(0,a.Lk)("div",{class:"font-medium text-gray-900"},"$14,000.00"),(0,a.Lk)("div",{class:"rounded-md py-1 px-2 text-xs font-medium ring-1 ring-inset text-green-700 bg-green-50 ring-green-600/20"},"Paid")])])])]),(0,a.Lk)("li",{class:"bg-white overflow-hidden rounded-xl border border-gray-200"},[(0,a.Lk)("div",{class:"flex items-center gap-x-4 border-b border-gray-900/5 bg-gray-50 p-3"},[(0,a.Lk)("div",{class:"text-sm font-bold leading-6 text-gray-900"},"Form C")]),(0,a.Lk)("dl",{class:"-my-3 divide-y divide-gray-100 px-6 py-4 text-sm leading-6"},[(0,a.Lk)("div",{class:"flex justify-between gap-x-4 py-3"},[(0,a.Lk)("dt",{class:"text-gray-500"},"Last invoice"),(0,a.Lk)("dd",{class:"text-gray-700"},[(0,a.Lk)("time",{datetime:"2023-01-23"},"January 23, 2023")])]),(0,a.Lk)("div",{class:"flex justify-between gap-x-4 py-3"},[(0,a.Lk)("dt",{class:"text-gray-500"},"Amount"),(0,a.Lk)("dd",{class:"flex items-start gap-x-2"},[(0,a.Lk)("div",{class:"font-medium text-gray-900"},"$7,600.00"),(0,a.Lk)("div",{class:"rounded-md py-1 px-2 text-xs font-medium ring-1 ring-inset text-green-700 bg-green-50 ring-green-600/20"},"Paid")])])])])],-1)),e[7]||(e[7]=(0,a.Fv)('<section aria-labelledby="products-heading" class="mt-6"><h2 id="products-heading" class="sr-only">Products purchased</h2><div class="space-y-8"><div class="border-b border-t border-gray-200 bg-white shadow-sm sm:rounded-lg sm:border"><form class="px-4 py-6 sm:px-6 lg:p-8"><div class="space-y-12"><div class="border-b border-gray-900/10 pb-12"><h2 class="text-base font-semibold leading-7 text-gray-900">Profile</h2><p class="mt-1 text-sm leading-6 text-gray-600">This information will be displayed publicly so be careful what you share.</p><div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"><div class="sm:col-span-4"><label for="username" class="block text-sm font-medium leading-6 text-gray-900">Username</label><div class="mt-2"><div class="flex rounded-md shadow-sm ring-1 ring-inset ring-gray-300 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-600 sm:max-w-md"><span class="flex select-none items-center pl-3 text-gray-500 sm:text-sm">workcation.com/</span><input type="text" name="username" id="username" autocomplete="username" class="block flex-1 border-0 bg-transparent py-1.5 pl-1 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm sm:leading-6" placeholder="janesmith"></div></div></div><div class="col-span-full"><label for="about" class="block text-sm font-medium leading-6 text-gray-900">About</label><div class="mt-2"><textarea id="about" name="about" rows="3" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></textarea></div><p class="mt-3 text-sm leading-6 text-gray-600">Write a few sentences about yourself.</p></div><div class="col-span-full"><label for="photo" class="block text-sm font-medium leading-6 text-gray-900">Photo</label><div class="mt-2 flex items-center gap-x-3"><svg class="h-12 w-12 text-gray-300" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" clip-rule="evenodd"></path></svg><button type="button" class="rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">Change</button></div></div><div class="col-span-full"><label for="cover-photo" class="block text-sm font-medium leading-6 text-gray-900">Cover photo</label><div class="mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10"><div class="text-center"><svg class="mx-auto h-12 w-12 text-gray-300" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 6a2.25 2.25 0 012.25-2.25h16.5A2.25 2.25 0 0122.5 6v12a2.25 2.25 0 01-2.25 2.25H3.75A2.25 2.25 0 011.5 18V6zM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0021 18v-1.94l-2.69-2.689a1.5 1.5 0 00-2.12 0l-.88.879.97.97a.75.75 0 11-1.06 1.06l-5.16-5.159a1.5 1.5 0 00-2.12 0L3 16.061zm10.125-7.81a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0z" clip-rule="evenodd"></path></svg><div class="mt-4 flex text-sm leading-6 text-gray-600"><label for="file-upload" class="relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500"><span>Upload a file</span><input id="file-upload" name="file-upload" type="file" class="sr-only"></label><p class="pl-1">or drag and drop</p></div><p class="text-xs leading-5 text-gray-600">PNG, JPG, GIF up to 10MB</p></div></div></div></div></div><div class="border-b border-gray-900/10 pb-12"><h2 class="text-base font-semibold leading-7 text-gray-900">Personal Information</h2><p class="mt-1 text-sm leading-6 text-gray-600">Use a permanent address where you can receive mail.</p><div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"><div class="sm:col-span-3"><label for="first-name" class="block text-sm font-medium leading-6 text-gray-900">First name</label><div class="mt-2"><input type="text" name="first-name" id="first-name" autocomplete="given-name" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></div></div><div class="sm:col-span-3"><label for="last-name" class="block text-sm font-medium leading-6 text-gray-900">Last name</label><div class="mt-2"><input type="text" name="last-name" id="last-name" autocomplete="family-name" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></div></div><div class="sm:col-span-4"><label for="email" class="block text-sm font-medium leading-6 text-gray-900">Email address</label><div class="mt-2"><input id="email" name="email" type="email" autocomplete="email" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></div></div><div class="sm:col-span-3"><label for="country" class="block text-sm font-medium leading-6 text-gray-900">Country</label><div class="mt-2"><select id="country" name="country" autocomplete="country-name" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:max-w-xs sm:text-sm sm:leading-6"><option>United States</option><option>Canada</option><option>Mexico</option></select></div></div><div class="col-span-full"><label for="street-address" class="block text-sm font-medium leading-6 text-gray-900">Street address</label><div class="mt-2"><input type="text" name="street-address" id="street-address" autocomplete="street-address" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></div></div><div class="sm:col-span-2 sm:col-start-1"><label for="city" class="block text-sm font-medium leading-6 text-gray-900">City</label><div class="mt-2"><input type="text" name="city" id="city" autocomplete="address-level2" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></div></div><div class="sm:col-span-2"><label for="region" class="block text-sm font-medium leading-6 text-gray-900">State / Province</label><div class="mt-2"><input type="text" name="region" id="region" autocomplete="address-level1" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></div></div><div class="sm:col-span-2"><label for="postal-code" class="block text-sm font-medium leading-6 text-gray-900">ZIP / Postal code</label><div class="mt-2"><input type="text" name="postal-code" id="postal-code" autocomplete="postal-code" class="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"></div></div></div></div><div class="border-b border-gray-900/10 pb-12"><h2 class="text-base font-semibold leading-7 text-gray-900">Notifications</h2><p class="mt-1 text-sm leading-6 text-gray-600">We&#39;ll always let you know about important changes, but you pick what else you want to hear about.</p><div class="mt-10 space-y-10"><fieldset><legend class="text-sm font-semibold leading-6 text-gray-900">By Email</legend><div class="mt-6 space-y-6"><div class="relative flex gap-x-3"><div class="flex h-6 items-center"><input id="comments" name="comments" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"></div><div class="text-sm leading-6"><label for="comments" class="font-medium text-gray-900">Comments</label><p class="text-gray-500">Get notified when someones posts a comment on a posting.</p></div></div><div class="relative flex gap-x-3"><div class="flex h-6 items-center"><input id="candidates" name="candidates" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"></div><div class="text-sm leading-6"><label for="candidates" class="font-medium text-gray-900">Candidates</label><p class="text-gray-500">Get notified when a candidate applies for a job.</p></div></div><div class="relative flex gap-x-3"><div class="flex h-6 items-center"><input id="offers" name="offers" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"></div><div class="text-sm leading-6"><label for="offers" class="font-medium text-gray-900">Offers</label><p class="text-gray-500">Get notified when a candidate accepts or rejects an offer.</p></div></div></div></fieldset><fieldset><legend class="text-sm font-semibold leading-6 text-gray-900">Push Notifications</legend><p class="mt-1 text-sm leading-6 text-gray-600">These are delivered via SMS to your mobile phone.</p><div class="mt-6 space-y-6"><div class="flex items-center gap-x-3"><input id="push-everything" name="push-notifications" type="radio" class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600"><label for="push-everything" class="block text-sm font-medium leading-6 text-gray-900">Everything</label></div><div class="flex items-center gap-x-3"><input id="push-email" name="push-notifications" type="radio" class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600"><label for="push-email" class="block text-sm font-medium leading-6 text-gray-900">Same as email</label></div><div class="flex items-center gap-x-3"><input id="push-nothing" name="push-notifications" type="radio" class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600"><label for="push-nothing" class="block text-sm font-medium leading-6 text-gray-900">No push notifications</label></div></div></fieldset></div></div></div><div class="mt-6 flex items-center justify-end gap-x-6"><button type="button" class="text-sm font-semibold leading-6 text-gray-900">Cancel</button><button type="submit" class="rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Save</button></div></form></div></div></section>',1))])])],64)}s(44114),s(98992),s(72577),s(3949);var D=s(59911),L=s.n(D),A=s(75435),I=s(95093),C=s.n(I);C()().format();var j={data(){return{login:l.A.get("session","login"),configs:l.A.get("configs"),session:l.A.get("session"),assetData:[],userApply:[],dataItem:this.$route.params.id,loading_sources:!0,documentTypeOptions:[".jpg",".jpeg",".png",".gif",".doc",".docx",".pdf",".xls",".xlsx"],isFormOpen:!1,formTitle:"",formAction:"",form:{name:"",slug:"",description:""},editIndex:-1,currentSection:"",sections:["status","form","document"]}},components:{Loader:A.A},methods:{updateDocumentType(){this.form.documentType.length>1&&(this.form.documentType=[this.form.documentType[this.form.documentType.length-1]])},capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)},closeForm(){this.isFormOpen=!1},openForm(t,e){this.isFormOpen=!0,this.currentSection=e,"add"===t?(this.formTitle="Add Item",this.formAction="Add",this.form="form"===e?{name:"",slug:"",description:"",type:"form",default:!1,builder:[]}:{name:"",slug:"",description:"",default:!1}):"edit"===t&&(this.formTitle="Edit Item",this.formAction="Save")},saveItem(){"Add"===this.formAction?this.assetData[this.currentSection].push({...this.form}):"Save"===this.formAction&&(this.assetData[this.currentSection][this.editIndex]={...this.form}),this.updateData(),this.isFormOpen=!1},editItem(t,e){this.openForm("edit",e),this.form={...this.assetData[e][t]},this.editIndex=t},removeItem(t,e){this.assetData[e].splice(t,1),this.updateData()},moveItemUp(t,e){t>0&&this.swapItems(t,t-1,e)},moveItemDown(t,e){t<this.assetData[e].length-1&&this.swapItems(t,t+1,e)},swapItems(t,e,s){[this.assetData[s][t],this.assetData[s][e]]=[this.assetData[s][e],this.assetData[s][t]],this.updateData()},makeDefault(t,e){"form"===e?this.assetData.form.forEach(((e,s)=>{e.default=s===t})):"status"===e?this.assetData.status.forEach(((e,s)=>{e.default=s===t})):"document"===e&&this.assetData.document.forEach(((e,s)=>{e.default=s===t})),this.updateData()},dateTime(t){return C()(t).format("DD/MM/YYYY hh:mm:ss")},async getUserData(){if(l.A.get("session","login"))try{this.loading_sources=!1;const t=await fetch("https://gateway.cloudrestfulapi.com/api/apply/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{userID:this.session.userID,applicationID:this.dataItem}]}]})}),e=await t.json();if(200===t.status)return e[0];this.loading_sources=!0}catch(t){console.log(t)}},async getData(){if(l.A.get("session","login"))try{let t=this.$route.params.id;this.loading_sources=!1;const e=await fetch("https://gateway.cloudrestfulapi.com/api/application/"+t,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}}),s=await e.json();console.log("RestReturn",s),200===e.status&&(this.assetData=s,this.userApply=await this.getUserData(),console.log(this.userApply),this.loading_sources=!0),this.loading_sources=!0}catch(t){console.log(t)}},async updateData(){try{const t=await fetch("https://gateway.cloudrestfulapi.com/api/application/"+this.assetData._id,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{form:this.assetData.form,document:this.assetData.document,status:this.assetData.status},options:{}})}),e=await t.json();console.log(e),200===t.status&&this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:3e3,icon:"success",title:"บันทึกข้อมูลหน้าเว็บ",text:"บันทึกข้อมูลสำหรับหน้าเว็บนี้ สำเร็จแล้ว"})}catch(t){console.error(t)}},async applyApplication(){let t=null;if(this.login)try{this.activeBlock=!0;const e=this.assetData.status.find((t=>!0===t.firstItem));console.log(e);const s=this.assetData.status.findIndex((t=>t.slug===e.slug));if(-1!==s&&s<this.assetData.status.length-1){const a=this.assetData.status.slice(s+1).find((t=>!0===t.submit&&"user"===t.action));console.log("Next status:",a);const i=await fetch("https://gateway.cloudrestfulapi.com/api/apply/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{userID:this.session.userID,applicationID:this.dataItem,form:[],document:[],assign:!1,status:e.slug,next:a?a.slug:void 0},options:{}})});t=await i.json(),console.log("finalRes",t),200===i.status&&(this.activeBlock=!1,this.$swal({icon:"success",title:"ลงทะเบียนเรียบร้อยแล้ว",text:"ระบบกำลังดึงข้อมูลหลักสูตรของคุณ กรุณารอสักครู่",showCancelButton:!1,confirmButtonText:"OK"}).then((()=>{this.userApply=t})))}else console.log("No status found after 'register'.")}catch(e){console.log(e)}else console.log("not Logic")},async actionApplication(t){try{const e=this.assetData.status.findIndex((e=>e.slug===t)),s=this.assetData.status.slice(e+1).find((e=>e.slug!==t&&"user"===e.action));s?console.log("Next status:",s):console.log("No next status found.");const a=await fetch("https://gateway.cloudrestfulapi.com/api/apply/"+this.userApply._id,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{status:t,next:s?s.slug:""},options:{}})}),i=await a.json();console.log("finalRes",i),this.userApply=i}catch(e){console.log(e)}},updated(){L().replace()}},async mounted(){try{await this.getData()}catch(t){console.log(Error)}},setup(){},computed:{firstStatusItem(){return this.assetData.status&&this.assetData.status.length>0?this.assetData.status[0].slug:null},getNextStatusName(){const t=this.assetData.status.findIndex((t=>t.slug===this.userApply.next));return-1!==t&&t<this.assetData.status.length-1?this.assetData.status[t].name:""}},watch:{userApply(t){console.log("userApply updated:",t)}}},S=s(64621);const T=(0,S.A)(j,[["render",w]]);var B=T,F={name:"Lesson Index",components:{BackendIndex:r.A,FrontendIndex:B},data(){return{session:l.A.get("session")}},setup(){const t=(0,n.lq)(),e=t.meta.title;(0,o.K7)(e)},computed:{componentName(){return"backend"===this.session.interface?"BackendIndex":"frontend"===this.session.interface?"FrontendIndex":(console.error("Invalid interface:",this.session.interface),null)}}};const $=(0,S.A)(F,[["render",i]]);var N=$}}]);
//# sourceMappingURL=756.567c18e9.js.map