"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[7930],{47930:function(e,t,a){a.d(t,{A:function(){return qo}});var s=a(20641),o=a(90033),l=a(53751);const i={class:"bg-gray-50 flex cms-container"},n={class:"hidden lg:flex lg:w-64 lg:flex-col"},r={class:"flex-1 flex flex-col min-w-0"},d={class:"lg:hidden bg-white border-b border-gray-200 px-4 py-3"},c={class:"flex items-center justify-between"},u={class:"flex items-center gap-3"},p={class:"text-lg font-semibold text-gray-900"},m={class:"flex items-center gap-2"},g={class:"bg-white border-b border-gray-200"},h={class:"flex-1 p-2 pb-4 overflow-visible bg-gray-100"},y={class:"flex flex-col h-full"},b={class:"hidden xl:flex xl:w-80 xl:flex-col"};function x(e,t,a,x,f,k){const v=(0,s.g2)("ContentLeftSidebar"),L=(0,s.g2)("router-link"),C=(0,s.g2)("Subhead"),w=(0,s.g2)("ContentFormMain"),D=(0,s.g2)("FileBrowser"),F=(0,s.g2)("ContentRightSidebar");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("div",n,[(0,s.bF)(v,{"post-id":this.postData._id,slug:this.postData.slug,"user-name":f.session?.current?.name||"ผู้ใช้","content-analytics":f.contentAnalytics,"content-validation":f.contentValidation,onGoBack:k.goBack,onImportData:k.importData,onExportData:k.exportData,onManageTemplates:k.manageTemplates,onOpenMediaLibrary:k.openMediaLibrary},null,8,["post-id","slug","user-name","content-analytics","content-validation","onGoBack","onImportData","onExportData","onManageTemplates","onOpenMediaLibrary"])]),(0,s.Lk)("div",r,[(0,s.Lk)("div",d,[(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>k.toggleMobileSidebar&&k.toggleMobileSidebar(...e)),class:"p-2 rounded-lg hover:bg-gray-100 transition-colors"},t[32]||(t[32]=[(0,s.Lk)("i",{class:"fas fa-bars text-gray-600"},null,-1)])),(0,s.Lk)("h1",p,(0,o.v_)(k.pageTitle),1)]),(0,s.Lk)("div",m,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=(0,l.D$)(((...e)=>k.updatePost&&k.updatePost(...e)),["prevent"])),type:"button",class:"bg-blue-600 hover:bg-blue-700 text-white font-medium px-3 py-2 rounded-lg transition-colors text-sm flex items-center gap-1"},t[33]||(t[33]=[(0,s.Lk)("i",{class:"fas fa-save text-xs"},null,-1),(0,s.eW)(" บันทึก ")])),(0,s.bF)(L,{to:f.redirectLink,class:"bg-gray-600 hover:bg-gray-700 text-white font-medium px-3 py-2 rounded-lg transition-colors text-sm flex items-center gap-1"},{default:(0,s.k6)((()=>t[34]||(t[34]=[(0,s.Lk)("i",{class:"fas fa-arrow-left text-xs"},null,-1),(0,s.eW)(" กลับ ")]))),_:1},8,["to"])])])]),(0,s.Lk)("div",g,[(0,s.bF)(C,{pageTitle:k.pageTitle,navigation:[{name:"บันทึกข้อมูล",function:"updatePost",style:"save",class:"primary-btn",visible:!0,type:"button"},{name:"ย้อนกลับ",function:"goBack",style:"chevron-left",class:"default-btn",visible:!0,type:"button"}],onGoBack:k.goBack,onUpdatePost:k.updatePost,onDebugSaveData:k.debugSaveData,onCheckApiConnection:k.checkApiConnection},null,8,["pageTitle","onGoBack","onUpdatePost","onDebugSaveData","onCheckApiConnection"])]),(0,s.Lk)("div",h,[(0,s.bF)(w,{title:f.postData.title,slug:f.postData.slug,"is-editing":f.editing,hostname:f.session.current.hostname,"parent-slug":f.parentData?.slug,"content-type":f.postData.type,display:f.postData.display,"is-post-type":"post"===f.postData.type,"is-comment":f.postData.isComment,"is-counter":f.postData.isCounter,"is-menu":f.postData.isMenu,"seo-image":f.postData.seo?.image,"seo-title":f.postData.seo?.title,"seo-description":f.postData.seo?.description,"seo-keywords":f.postData.seo?.keywords,action:f.postData.action,destination:f.postData.destination,next:f.postData.next,"post-id":f.postData._id,"custom-fields":f.postData.customFields,"custom-data":f.postData.customData,"parent-id":"post"===a.type?f.dataItem:"","parent-data":f.parentData,configs:f.configs,type:a.type,"onUpdate:title":t[2]||(t[2]=e=>f.postData.title=e),onOnTitleInput:k.onTitleInput,onOnTitleBlur:t[3]||(t[3]=e=>"add"===a.mode&&f.postData.title&&k.updateSlug),"onEdit:slug":t[4]||(t[4]=e=>f.editing=e),"onUpdate:slug":t[5]||(t[5]=e=>f.postData.slug=e),onUpdateSlug:k.updateSlug,onHandleSlugInput:k.handleSlugInput,"onUpdate:contentType":t[6]||(t[6]=e=>f.postData.type=e),"onUpdate:display":t[7]||(t[7]=e=>f.postData.display=e),"onUpdate:isComment":t[8]||(t[8]=e=>f.postData.isComment=e),"onUpdate:isCounter":t[9]||(t[9]=e=>f.postData.isCounter=e),"onUpdate:isMenu":t[10]||(t[10]=e=>f.postData.isMenu=e),onOpenSeoFileBrowser:k.OpenSEOFileBrowser,"onUpdate:seoTitle":t[11]||(t[11]=e=>f.postData.seo.title=e),"onUpdate:seoDescription":t[12]||(t[12]=e=>f.postData.seo.description=e),onRemoveKeyword:k.removeKeyword,onAddKeyword:k.addKeyword,"onUpdate:action":t[13]||(t[13]=e=>f.postData.action=e),"onUpdate:destination":t[14]||(t[14]=e=>f.postData.destination=e),"onUpdate:next":t[15]||(t[15]=e=>f.postData.next=e),"onUpdate:customFields":t[16]||(t[16]=e=>f.postData.customFields=e),"onUpdate:customData":t[17]||(t[17]=e=>f.postData.customData=e),onOpenCustomImageBrowser:k.OpenCustomImageBrowser},null,8,["title","slug","is-editing","hostname","parent-slug","content-type","display","is-post-type","is-comment","is-counter","is-menu","seo-image","seo-title","seo-description","seo-keywords","action","destination","next","post-id","custom-fields","custom-data","parent-id","parent-data","configs","type","onOnTitleInput","onUpdateSlug","onHandleSlugInput","onOpenSeoFileBrowser","onRemoveKeyword","onAddKeyword","onOpenCustomImageBrowser"]),f.FileBrowserOpen?((0,s.uX)(),(0,s.Wv)(D,{key:0,class:"z-[9999]",isWindowsOpen:!0,callbackFunction:"cover",allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:k.changeFileTrigger,onFileBrowserCallback:k.selectFileTrigger},null,8,["onFileBrowserTrigger","onFileBrowserCallback"])):(0,s.Q3)("",!0),f.SEOFileBrowserOpen?((0,s.uX)(),(0,s.Wv)(D,{key:1,class:"z-[9999]",isWindowsOpen:!0,callbackFunction:"cover",allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:k.changeSEOFileTrigger,onFileBrowserCallback:k.selectSEOFileTrigger},null,8,["onFileBrowserTrigger","onFileBrowserCallback"])):(0,s.Q3)("",!0),f.CustomImageBrowserOpen?((0,s.uX)(),(0,s.Wv)(D,{key:2,class:"z-[9999]",isWindowsOpen:!0,callbackFunction:"cover",allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:k.changeCustomImageFileTrigger,onFileBrowserCallback:k.selectCustomImageFileTrigger},null,8,["onFileBrowserTrigger","onFileBrowserCallback"])):(0,s.Q3)("",!0)])]),f.isMobileSidebarOpen?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:t[18]||(t[18]=(...e)=>k.closeMobileSidebar&&k.closeMobileSidebar(...e))})):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,o.C4)(["fixed top-0 left-0 bottom-0 w-80 bg-white z-50 transform transition-transform duration-300 lg:hidden",{"translate-x-0":f.isMobileSidebarOpen,"-translate-x-full":!f.isMobileSidebarOpen}])},[(0,s.Lk)("div",y,[(0,s.bF)(v,{"post-id":this.postData._id,slug:this.postData.slug,"user-name":f.session?.current?.name||"ผู้ใช้","content-analytics":f.contentAnalytics,"content-validation":f.contentValidation,onGoBack:k.goBack,onImportData:k.importData,onExportData:k.exportData,onManageTemplates:k.manageTemplates,onOpenMediaLibrary:k.openMediaLibrary},null,8,["post-id","slug","user-name","content-analytics","content-validation","onGoBack","onImportData","onExportData","onManageTemplates","onOpenMediaLibrary"])])],2),(0,s.Lk)("div",b,[(0,s.bF)(F,{"feature-image":f.postData.feature_image,"publish-status":!!f.postData.status,"require-auth":f.postData.authen,"use-admin-page":f.postData.useAdminPage,"use-password":f.postData.usePassword,"admin-password":f.postData.adminPassword,"enable-analytics":f.postData.enableAnalytics,"enable-export":f.postData.enableExport,"export-csv":f.exportFormats.csv,"export-excel":f.exportFormats.excel,"is-template":f.postData.isTemplate,layout:f.postData.layout,"page-id":f.postData.pageID,"page-password":f.postData.password,"is-password-modal-open":f.isPasswordModalOpen,"is-post-type":"post"===a.type&&f.dataItem||"post"===f.postData.type,"content-type":"post"===a.type&&f.dataItem?"post":f.postData.type,"created-date":f.postData.createdAt?new Date(f.postData.createdAt).toLocaleDateString("th-TH"):"-","updated-date":f.postData.updatedAt?new Date(f.postData.updatedAt).toLocaleDateString("th-TH"):"-","view-count":f.postData.views||0,onOpenFileBrowser:k.OpenFileBrowser,"onUpdate:publishStatus":t[19]||(t[19]=e=>f.postData.status=e?"draft":""),"onUpdate:requireAuth":t[20]||(t[20]=e=>f.postData.authen=e),"onUpdate:useAdminPage":t[21]||(t[21]=e=>f.postData.useAdminPage=e),"onUpdate:usePassword":t[22]||(t[22]=e=>f.postData.usePassword=e),"onUpdate:adminPassword":t[23]||(t[23]=e=>f.postData.adminPassword=e),"onUpdate:enableAnalytics":t[24]||(t[24]=e=>f.postData.enableAnalytics=e),"onUpdate:enableExport":t[25]||(t[25]=e=>f.postData.enableExport=e),"onUpdate:exportCsv":t[26]||(t[26]=e=>f.exportFormats.csv=e),"onUpdate:exportExcel":t[27]||(t[27]=e=>f.exportFormats.excel=e),"onUpdate:isTemplate":t[28]||(t[28]=e=>f.postData.isTemplate=e),"onUpdate:layout":t[29]||(t[29]=e=>f.postData.layout=e),"onUpdate:pageId":t[30]||(t[30]=e=>f.postData.pageID=e),"onUpdate:pagePassword":t[31]||(t[31]=e=>f.postData.password=e),onGenerateRandomPassword:k.generateRandomPassword,onTogglePasswordModal:k.togglePasswordModal,onResetPassword:k.resetPassword,onUpdatePost:k.updatePost,onDeleteContent:e.deleteContent,onDuplicateContent:k.duplicateContent,onExportContent:k.exportContent,onImportContent:k.importContent},null,8,["feature-image","publish-status","require-auth","use-admin-page","use-password","admin-password","enable-analytics","enable-export","export-csv","export-excel","is-template","layout","page-id","page-password","is-password-modal-open","is-post-type","content-type","created-date","updated-date","view-count","onOpenFileBrowser","onGenerateRandomPassword","onTogglePasswordModal","onResetPassword","onUpdatePost","onDeleteContent","onDuplicateContent","onExportContent","onImportContent"])])])}a(44114),a(98992),a(54520),a(3949),a(81454),a(14603),a(47566),a(98721);var f=a(87814),k=a(40475),v=a(40687),L=a(57146),C=a(30554);const w={class:"flex flex-col flex-grow bg-white border-r border-gray-200 min-h-screen"},D={class:"flex items-center justify-between px-4 py-4 border-b border-gray-200 flex-shrink-0"},F={class:"px-4 py-3 border-b border-gray-200"},T={class:"space-y-1 text-xs"},S={class:"flex justify-between"},I={class:"font-medium"},E={class:"flex justify-between"},P={class:"font-medium"},U={class:"flex justify-between"},$={class:"flex justify-between"},A={class:"px-4 py-4 border-b border-gray-200"},O={class:"mb-3"},B={class:"flex items-center justify-between mb-1"},_={class:"w-full bg-gray-200 rounded-full h-1.5"},V={class:"space-y-1.5"},X={class:"flex items-center gap-2"},M={class:"flex items-center gap-2"},j={class:"flex items-center gap-2"},R={class:"flex items-center gap-2"},q={class:"flex items-center gap-2"},Q={class:"px-4 py-4 border-b border-gray-200"},K={class:"space-y-1"},N={class:"px-4 py-4 border-b border-gray-200"},W={class:"space-y-1"},J={class:"mt-auto px-4 py-4 flex-shrink-0"},H={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},z={class:"flex-1 min-w-0"},G={class:"text-sm font-medium text-gray-900 truncate"};function Y(e,t,a,l,i,n){const r=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",D,[t[6]||(t[6]=(0,s.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"จัดการเนื้อหา",-1)),(0,s.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$emit("goBack")),class:"bg-gray-600 hover:bg-gray-700 text-white p-2 rounded-lg transition-colors duration-200",title:"กลับไปหน้าหลัก"},t[5]||(t[5]=[(0,s.Lk)("i",{class:"fas fa-arrow-left text-sm"},null,-1)]))]),(0,s.Lk)("div",F,[t[11]||(t[11]=(0,s.Lk)("h3",{class:"text-xs font-medium text-gray-700 mb-2"},"Analytics",-1)),(0,s.Lk)("div",T,[(0,s.Lk)("div",S,[t[7]||(t[7]=(0,s.Lk)("span",{class:"text-gray-600"},"คำ:",-1)),(0,s.Lk)("span",I,(0,o.v_)(a.contentAnalytics.wordCount),1)]),(0,s.Lk)("div",E,[t[8]||(t[8]=(0,s.Lk)("span",{class:"text-gray-600"},"เวลาอ่าน:",-1)),(0,s.Lk)("span",P,(0,o.v_)(a.contentAnalytics.readingTime)+" นาที",1)]),(0,s.Lk)("div",U,[t[9]||(t[9]=(0,s.Lk)("span",{class:"text-gray-600"},"SEO:",-1)),(0,s.Lk)("span",{class:(0,o.C4)(["font-medium",a.contentAnalytics.seoScore>=70?"text-green-600":a.contentAnalytics.seoScore>=40?"text-yellow-600":"text-red-600"])},(0,o.v_)(a.contentAnalytics.seoScore)+"% ",3)]),(0,s.Lk)("div",$,[t[10]||(t[10]=(0,s.Lk)("span",{class:"text-gray-600"},"อ่านง่าย:",-1)),(0,s.Lk)("span",{class:(0,o.C4)(["font-medium",a.contentAnalytics.readabilityScore>=70?"text-green-600":a.contentAnalytics.readabilityScore>=40?"text-yellow-600":"text-red-600"])},(0,o.v_)(a.contentAnalytics.readabilityScore)+"% ",3)])])]),(0,s.Lk)("div",A,[t[18]||(t[18]=(0,s.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"คุณภาพเนื้อหา",-1)),(0,s.Lk)("div",O,[(0,s.Lk)("div",B,[t[12]||(t[12]=(0,s.Lk)("span",{class:"text-xs text-gray-600"},"คะแนนรวม",-1)),(0,s.Lk)("span",{class:(0,o.C4)(["text-xs font-bold",a.contentValidation.score>=80?"text-green-600":a.contentValidation.score>=60?"text-yellow-600":"text-red-600"])},(0,o.v_)(a.contentValidation.score)+"% ",3)]),(0,s.Lk)("div",_,[(0,s.Lk)("div",{class:(0,o.C4)(["h-1.5 rounded-full",a.contentValidation.score>=80?"bg-green-500":a.contentValidation.score>=60?"bg-yellow-500":"bg-red-500"]),style:(0,o.Tr)({width:a.contentValidation.score+"%"})},null,6)])]),(0,s.Lk)("div",V,[(0,s.Lk)("div",X,[(0,s.Lk)("i",{class:(0,o.C4)(["fas text-xs",a.contentValidation.hasTitle?"fa-check-circle text-green-500":"fa-times-circle text-red-500"])},null,2),t[13]||(t[13]=(0,s.Lk)("span",{class:"text-xs text-gray-700"},"ชื่อเรื่องเหมาะสม",-1))]),(0,s.Lk)("div",M,[(0,s.Lk)("i",{class:(0,o.C4)(["fas text-xs",a.contentValidation.hasSlug?"fa-check-circle text-green-500":"fa-times-circle text-red-500"])},null,2),t[14]||(t[14]=(0,s.Lk)("span",{class:"text-xs text-gray-700"},"URL เหมาะสม",-1))]),(0,s.Lk)("div",j,[(0,s.Lk)("i",{class:(0,o.C4)(["fas text-xs",a.contentValidation.hasContent?"fa-check-circle text-green-500":"fa-times-circle text-red-500"])},null,2),t[15]||(t[15]=(0,s.Lk)("span",{class:"text-xs text-gray-700"},"เนื้อหาเพียงพอ",-1))]),(0,s.Lk)("div",R,[(0,s.Lk)("i",{class:(0,o.C4)(["fas text-xs",a.contentValidation.hasImage?"fa-check-circle text-green-500":"fa-times-circle text-red-500"])},null,2),t[16]||(t[16]=(0,s.Lk)("span",{class:"text-xs text-gray-700"},"มีรูปภาพ",-1))]),(0,s.Lk)("div",q,[(0,s.Lk)("i",{class:(0,o.C4)(["fas text-xs",a.contentValidation.hasSEO?"fa-check-circle text-green-500":"fa-times-circle text-red-500"])},null,2),t[17]||(t[17]=(0,s.Lk)("span",{class:"text-xs text-gray-700"},"ตั้งค่า SEO",-1))])])]),(0,s.Lk)("div",Q,[t[22]||(t[22]=(0,s.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"ลิงก์ด่วน",-1)),(0,s.Lk)("div",K,[(0,s.bF)(r,{to:"/cms/builder/"+a.postId,class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},{default:(0,s.k6)((()=>t[19]||(t[19]=[(0,s.Lk)("i",{class:"fas fa-palette text-blue-500 w-4"},null,-1),(0,s.Lk)("span",null,"เปิด Page Builder",-1)]))),_:1},8,["to"]),(0,s.bF)(r,{to:"/preview/"+a.slug,target:"_blank",class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},{default:(0,s.k6)((()=>t[20]||(t[20]=[(0,s.Lk)("i",{class:"fas fa-external-link-alt text-green-500 w-4"},null,-1),(0,s.Lk)("span",null,"ดูตัวอย่าง",-1)]))),_:1},8,["to"]),(0,s.bF)(r,{to:"/cms/content",class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},{default:(0,s.k6)((()=>t[21]||(t[21]=[(0,s.Lk)("i",{class:"fas fa-list text-purple-500 w-4"},null,-1),(0,s.Lk)("span",null,"กลับไปรายการ",-1)]))),_:1})])]),(0,s.Lk)("div",N,[t[27]||(t[27]=(0,s.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"เครื่องมือ",-1)),(0,s.Lk)("div",W,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$emit("importData")),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[23]||(t[23]=[(0,s.Lk)("i",{class:"fas fa-download text-blue-500 w-4"},null,-1),(0,s.Lk)("span",null,"นำเข้าข้อมูล",-1)])),(0,s.Lk)("button",{onClick:t[2]||(t[2]=t=>e.$emit("exportData")),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[24]||(t[24]=[(0,s.Lk)("i",{class:"fas fa-upload text-green-500 w-4"},null,-1),(0,s.Lk)("span",null,"ส่งออกข้อมูล",-1)])),(0,s.Lk)("button",{onClick:t[3]||(t[3]=t=>e.$emit("manageTemplates")),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[25]||(t[25]=[(0,s.Lk)("i",{class:"fas fa-copy text-purple-500 w-4"},null,-1),(0,s.Lk)("span",null,"จัดการเทมเพลต",-1)])),(0,s.Lk)("button",{onClick:t[4]||(t[4]=t=>e.$emit("openMediaLibrary")),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[26]||(t[26]=[(0,s.Lk)("i",{class:"fas fa-images text-pink-500 w-4"},null,-1),(0,s.Lk)("span",null,"คลังสื่อ",-1)]))])]),(0,s.Lk)("div",J,[(0,s.Lk)("div",H,[t[29]||(t[29]=(0,s.Lk)("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[(0,s.Lk)("i",{class:"fas fa-user text-white text-sm"})],-1)),(0,s.Lk)("div",z,[(0,s.Lk)("p",G,(0,o.v_)(a.userName),1),t[28]||(t[28]=(0,s.Lk)("p",{class:"text-xs text-gray-500"},"ผู้ดูแลระบบ",-1))])])])])}var Z={name:"ContentLeftSidebar",props:{postId:{type:String,default:""},slug:{type:String,default:""},userName:{type:String,default:"ผู้ใช้"},contentAnalytics:{type:Object,default:()=>({wordCount:0,readingTime:0,seoScore:0,readabilityScore:0})},contentValidation:{type:Object,default:()=>({hasTitle:!1,hasSlug:!1,hasContent:!1,hasImage:!1,hasSEO:!1,score:0})}},emits:["goBack","importData","exportData","manageTemplates","openMediaLibrary"]},ee=a(64621);const te=(0,ee.A)(Z,[["render",Y]]);var ae=te;const se={class:"flex flex-col flex-grow bg-white border-l border-gray-200 min-h-screen"},oe={class:"px-4 py-4 border-b border-gray-200"},le={class:"relative aspect-video bg-gray-100 rounded-lg overflow-hidden"},ie={key:0,class:"text-center"},ne=["src"],re={key:2,class:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity"},de={class:"px-4 py-4 border-b border-gray-200"},ce={class:"space-y-2"},ue={class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer"},pe={class:"text-xs text-gray-500"},me={class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer"},ge={key:0,class:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors cursor-pointer"},he={class:"text-xs text-gray-500"},ye={key:1,class:"ml-6 space-y-2 border-l-2 border-blue-200 pl-3"},be={class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer"},xe={key:0,class:"ml-6"},fe={class:"flex gap-2"},ke={class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer"},ve={class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer"},Le={key:1,class:"ml-6 space-y-1"},Ce={class:"space-y-1 mb-2"},we={class:"flex items-center gap-2"},De={class:"flex items-center gap-2"},Fe={key:2,class:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer"},Te={class:"px-4 py-4 border-b border-gray-200"},Se={class:"text-sm font-medium text-gray-700 mb-3"},Ie={class:"space-y-3"},Ee={key:0},Pe={class:"grid grid-cols-3 gap-1"},Ue={key:1},$e={class:"p-3 bg-gray-50 rounded-lg"},Ae={class:"space-y-1 text-xs text-gray-600"},Oe={for:"pageID",class:"block text-xs font-medium text-gray-700 mb-1"},Be={key:2},_e={class:"block text-xs font-medium text-gray-700 mb-1"},Ve={class:"relative"},Xe={class:"px-4 py-4 border-b border-gray-200"},Me={class:"space-y-1.5 text-xs text-gray-600"},je={class:"flex justify-between"},Re={class:"flex justify-between"},qe={class:"flex justify-between"},Qe={class:"px-4 py-4 border-b border-gray-200"},Ke={class:"space-y-2"},Ne={class:"pt-2 border-t border-gray-200"},We={class:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-gray-50 text-gray-700 font-medium border border-gray-300 rounded-lg transition-colors text-sm cursor-pointer"};function Je(e,t,a,i,n,r){return(0,s.uX)(),(0,s.CE)("div",se,[(0,s.Lk)("div",oe,[t[42]||(t[42]=(0,s.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"รูปภาพหลัก",-1)),(0,s.Lk)("div",le,[(0,s.Lk)("div",{class:"absolute inset-0 flex items-center justify-center cursor-pointer hover:bg-gray-200 transition-colors",onClick:t[0]||(t[0]=t=>e.$emit("openFileBrowser"))},[a.featureImage?((0,s.uX)(),(0,s.CE)("img",{key:1,src:a.featureImage,alt:"Featured Image",class:"w-full h-full object-cover"},null,8,ne)):((0,s.uX)(),(0,s.CE)("div",ie,t[40]||(t[40]=[(0,s.Lk)("i",{class:"fas fa-image text-gray-400 text-lg mb-1"},null,-1),(0,s.Lk)("p",{class:"text-xs text-gray-500"},"คลิกเพื่อเลือกรูปภาพ",-1)]))),a.featureImage?((0,s.uX)(),(0,s.CE)("div",re,t[41]||(t[41]=[(0,s.Lk)("i",{class:"fas fa-edit text-white text-lg"},null,-1)]))):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",de,[t[56]||(t[56]=(0,s.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"การเผยแพร่",-1)),(0,s.Lk)("div",ce,[(0,s.Lk)("label",ue,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=e=>n.localPublishStatus=e),onChange:t[2]||(t[2]=t=>e.$emit("update:publishStatus",n.localPublishStatus)),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,544),[[l.lH,n.localPublishStatus]]),(0,s.Lk)("div",null,[t[43]||(t[43]=(0,s.Lk)("div",{class:"text-sm font-medium text-gray-900"},"เผยแพร่",-1)),(0,s.Lk)("div",pe,(0,o.v_)(n.localIsPostType?"แสดงบทความนี้ต่อสาธารณะ":"แสดงหน้านี้ต่อสาธารณะ"),1)])]),(0,s.Lk)("label",me,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>n.localRequireAuth=e),onChange:t[4]||(t[4]=t=>e.$emit("update:requireAuth",n.localRequireAuth)),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,544),[[l.lH,n.localRequireAuth]]),t[44]||(t[44]=(0,s.Lk)("div",null,[(0,s.Lk)("div",{class:"text-sm font-medium text-gray-900"},"สำหรับสมาชิก"),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"ต้องเข้าสู่ระบบเพื่อดู")],-1))]),"form"===n.localContentType?((0,s.uX)(),(0,s.CE)("label",ge,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.localUseAdminPage=e),onChange:t[6]||(t[6]=t=>e.$emit("update:useAdminPage",n.localUseAdminPage)),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,544),[[l.lH,n.localUseAdminPage]]),(0,s.Lk)("div",null,[t[45]||(t[45]=(0,s.Lk)("div",{class:"text-sm font-medium text-gray-900"},"ใช้งาน Admin Page",-1)),(0,s.Lk)("div",he,(0,o.v_)(n.localIsPostType?"เปิดใช้ฟีเจอร์ผู้ดูแลสำหรับบทความ":"เปิดใช้ฟีเจอร์ผู้ดูแลระบบ"),1)])])):(0,s.Q3)("",!0),n.localUseAdminPage?((0,s.uX)(),(0,s.CE)("div",ye,[(0,s.Lk)("label",be,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.localUsePassword=e),onChange:t[8]||(t[8]=t=>e.$emit("update:usePassword",n.localUsePassword)),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,544),[[l.lH,n.localUsePassword]]),t[46]||(t[46]=(0,s.Lk)("div",{class:"flex-1"},[(0,s.Lk)("div",{class:"text-sm font-medium text-gray-900"},"ใช้รหัสผ่าน"),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"ป้องกันการเข้าถึงด้วยรหัสผ่าน")],-1))]),n.localUsePassword?((0,s.uX)(),(0,s.CE)("div",xe,[(0,s.Lk)("div",fe,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>n.localAdminPassword=e),onInput:t[10]||(t[10]=t=>e.$emit("update:adminPassword",n.localAdminPassword)),class:"flex-1 px-2 py-1.5 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-600",placeholder:"กรอกรหัสผ่าน Admin..."},null,544),[[l.Jo,n.localAdminPassword]]),(0,s.Lk)("button",{onClick:t[11]||(t[11]=t=>e.$emit("generateRandomPassword")),type:"button",class:"px-2 py-1.5 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",title:"สุ่มรหัสผ่าน"},t[47]||(t[47]=[(0,s.Lk)("i",{class:"fas fa-random"},null,-1)]))])])):(0,s.Q3)("",!0),(0,s.Lk)("label",ke,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>n.localEnableAnalytics=e),onChange:t[13]||(t[13]=t=>e.$emit("update:enableAnalytics",n.localEnableAnalytics)),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,544),[[l.lH,n.localEnableAnalytics]]),t[48]||(t[48]=(0,s.Lk)("div",null,[(0,s.Lk)("div",{class:"text-sm font-medium text-gray-900"},"ใช้ Analytics Dashboard"),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"แสดงสถิติและการวิเคราะห์")],-1))]),(0,s.Lk)("label",ve,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>n.localEnableExport=e),onChange:t[15]||(t[15]=t=>e.$emit("update:enableExport",n.localEnableExport)),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,544),[[l.lH,n.localEnableExport]]),t[49]||(t[49]=(0,s.Lk)("div",{class:"flex-1"},[(0,s.Lk)("div",{class:"text-sm font-medium text-gray-900"},"ใช้ Export"),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"ส่งออกข้อมูลเป็น CSV และ Excel")],-1))]),n.localEnableExport?((0,s.uX)(),(0,s.CE)("div",Le,[t[54]||(t[54]=(0,s.Lk)("div",{class:"text-xs font-medium text-gray-700 mb-1"},"รูปแบบการส่งออก:",-1)),(0,s.Lk)("div",Ce,[(0,s.Lk)("label",we,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=e=>n.localExportCSV=e),onChange:t[17]||(t[17]=t=>e.$emit("update:exportCSV",n.localExportCSV)),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,544),[[l.lH,n.localExportCSV]]),t[50]||(t[50]=(0,s.Lk)("i",{class:"fas fa-file-csv text-green-600"},null,-1)),t[51]||(t[51]=(0,s.Lk)("span",{class:"text-xs text-gray-700"},"CSV",-1))]),(0,s.Lk)("label",De,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=e=>n.localExportExcel=e),onChange:t[19]||(t[19]=t=>e.$emit("update:exportExcel",n.localExportExcel)),class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,544),[[l.lH,n.localExportExcel]]),t[52]||(t[52]=(0,s.Lk)("i",{class:"fas fa-file-excel text-blue-600"},null,-1)),t[53]||(t[53]=(0,s.Lk)("span",{class:"text-xs text-gray-700"},"Excel",-1))])])])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),n.localIsPostType?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("label",Fe,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[20]||(t[20]=e=>n.localIsTemplate=e),onChange:t[21]||(t[21]=t=>e.$emit("update:isTemplate",n.localIsTemplate)),type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,544),[[l.lH,n.localIsTemplate]]),t[55]||(t[55]=(0,s.Lk)("div",null,[(0,s.Lk)("div",{class:"text-sm font-medium text-gray-900"},"เทมเพลต"),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"ใช้เป็นแม่แบบ")],-1))]))])]),(0,s.Lk)("div",Te,[(0,s.Lk)("h3",Se,(0,o.v_)(n.localIsPostType?"ตั้งค่าบทความ":"ตั้งค่าหน้า"),1),(0,s.Lk)("div",Ie,[n.localIsPostType?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ee,[t[66]||(t[66]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-2"},"Layout",-1)),(0,s.Lk)("div",Pe,[(0,s.Lk)("label",{class:(0,o.C4)(["relative flex flex-col items-center p-2 cursor-pointer border-2 rounded-md hover:bg-gray-50 transition-colors text-center",{"border-blue-500 bg-blue-50":"standard"===n.localLayout,"border-gray-300":"standard"!==n.localLayout}])},[(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[22]||(t[22]=e=>n.localLayout=e),value:"standard",onChange:t[23]||(t[23]=t=>e.$emit("update:layout",n.localLayout)),class:"sr-only"},null,544),[[l.XL,n.localLayout]]),t[57]||(t[57]=(0,s.Lk)("i",{class:"fas fa-file-alt text-blue-600 mb-1"},null,-1)),t[58]||(t[58]=(0,s.Lk)("div",{class:"text-xs font-medium text-gray-900"},"Standard",-1)),t[59]||(t[59]=(0,s.Lk)("div",{class:"text-xs text-gray-500"},"มาตรฐาน",-1))],2),(0,s.Lk)("label",{class:(0,o.C4)(["relative flex flex-col items-center p-2 cursor-pointer border-2 rounded-md hover:bg-gray-50 transition-colors text-center",{"border-blue-500 bg-blue-50":"full"===n.localLayout,"border-gray-300":"full"!==n.localLayout}])},[(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[24]||(t[24]=e=>n.localLayout=e),value:"full",onChange:t[25]||(t[25]=t=>e.$emit("update:layout",n.localLayout)),class:"sr-only"},null,544),[[l.XL,n.localLayout]]),t[60]||(t[60]=(0,s.Lk)("i",{class:"fas fa-expand text-green-600 mb-1"},null,-1)),t[61]||(t[61]=(0,s.Lk)("div",{class:"text-xs font-medium text-gray-900"},"Full",-1)),t[62]||(t[62]=(0,s.Lk)("div",{class:"text-xs text-gray-500"},"เต็มจอ",-1))],2),(0,s.Lk)("label",{class:(0,o.C4)(["relative flex flex-col items-center p-2 cursor-pointer border-2 rounded-md hover:bg-gray-50 transition-colors text-center",{"border-blue-500 bg-blue-50":"block"===n.localLayout,"border-gray-300":"block"!==n.localLayout}])},[(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[26]||(t[26]=e=>n.localLayout=e),value:"block",onChange:t[27]||(t[27]=t=>e.$emit("update:layout",n.localLayout)),class:"sr-only"},null,544),[[l.XL,n.localLayout]]),t[63]||(t[63]=(0,s.Lk)("i",{class:"fas fa-th-large text-purple-600 mb-1"},null,-1)),t[64]||(t[64]=(0,s.Lk)("div",{class:"text-xs font-medium text-gray-900"},"Block",-1)),t[65]||(t[65]=(0,s.Lk)("div",{class:"text-xs text-gray-500"},"บล็อก",-1))],2)])])),n.localIsPostType?((0,s.uX)(),(0,s.CE)("div",Ue,[(0,s.Lk)("div",$e,[t[70]||(t[70]=(0,s.Lk)("div",{class:"text-xs font-medium text-gray-700 mb-2"},"ข้อมูลบทความ",-1)),(0,s.Lk)("div",Ae,[t[67]||(t[67]=(0,s.Lk)("div",null,"ประเภท: บทความย่อย (Post)",-1)),t[68]||(t[68]=(0,s.Lk)("div",null,"จัดการโดย: หน้าหลัก",-1)),t[69]||(t[69]=(0,s.Lk)("div",null,"การแสดงผล: ตามหน้าหลัก",-1)),(0,s.Lk)("div",null,"Content Type: "+(0,o.v_)(n.localContentType),1)])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[(0,s.Lk)("label",Oe,(0,o.v_)(n.localIsPostType?"Post ID (CSS)":"Page ID (CSS)"),1),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[28]||(t[28]=e=>n.localPageID=e),onInput:t[29]||(t[29]=t=>e.$emit("update:pageID",n.localPageID)),type:"text",id:"pageID",class:"w-full px-2 py-1.5 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-600 focus:border-transparent",placeholder:"กรอก CSS ID..."},null,544),[[l.Jo,n.localPageID]])]),n.localIsPasswordModalOpen||n.localPagePassword?((0,s.uX)(),(0,s.CE)("div",Be,[(0,s.Lk)("label",_e,(0,o.v_)(n.localIsPostType?"รหัสผ่านบทความ":"รหัสผ่านหน้า"),1),(0,s.Lk)("div",Ve,[(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[30]||(t[30]=e=>n.localPagePassword=e),onInput:t[31]||(t[31]=t=>e.$emit("update:pagePassword",n.localPagePassword)),class:"w-full px-2 py-1.5 pr-12 border border-gray-300 rounded text-xs focus:outline-none focus:ring-1 focus:ring-blue-600 focus:border-transparent",placeholder:"กรอกรหัสผ่าน..."},null,544),[[l.Jo,n.localPagePassword]]),(0,s.Lk)("button",{onClick:t[32]||(t[32]=t=>e.$emit("generateRandomPassword")),class:"absolute right-1 top-0.5 px-1.5 py-1 bg-gray-600 text-white text-xs rounded hover:bg-gray-700 transition-colors"},t[71]||(t[71]=[(0,s.Lk)("i",{class:"fas fa-random"},null,-1)]))])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Xe,[t[75]||(t[75]=(0,s.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"ข้อมูลเพิ่มเติม",-1)),(0,s.Lk)("div",Me,[(0,s.Lk)("div",je,[t[72]||(t[72]=(0,s.Lk)("span",null,"สร้างเมื่อ:",-1)),(0,s.Lk)("span",null,(0,o.v_)(a.createdDate),1)]),(0,s.Lk)("div",Re,[t[73]||(t[73]=(0,s.Lk)("span",null,"แก้ไขล่าสุด:",-1)),(0,s.Lk)("span",null,(0,o.v_)(a.updatedDate),1)]),(0,s.Lk)("div",qe,[t[74]||(t[74]=(0,s.Lk)("span",null,"จำนวนผู้เยี่ยมชม:",-1)),(0,s.Lk)("span",null,(0,o.v_)(a.viewCount),1)])])]),(0,s.Lk)("div",Qe,[t[84]||(t[84]=(0,s.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"การดำเนินการ",-1)),(0,s.Lk)("div",Ke,[(0,s.Lk)("button",{onClick:t[33]||(t[33]=t=>e.$emit("updatePost")),type:"button",class:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors text-sm"},[t[76]||(t[76]=(0,s.Lk)("i",{class:"fas fa-save text-xs"},null,-1)),(0,s.eW)(" "+(0,o.v_)(n.localIsPostType?"บันทึกบทความ":"บันทึกข้อมูล"),1)]),n.localPagePassword?((0,s.uX)(),(0,s.CE)("button",{key:1,onClick:t[35]||(t[35]=t=>e.$emit("resetPassword")),type:"button",class:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-gray-50 text-gray-700 font-medium border border-gray-300 rounded-lg transition-colors text-sm"},t[78]||(t[78]=[(0,s.Lk)("i",{class:"fas fa-unlock text-xs"},null,-1),(0,s.eW)(" ลบรหัสผ่าน ")]))):((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:t[34]||(t[34]=t=>e.$emit("togglePasswordModal")),type:"button",class:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-gray-50 text-gray-700 font-medium border border-gray-300 rounded-lg transition-colors text-sm"},t[77]||(t[77]=[(0,s.Lk)("i",{class:"fas fa-lock text-xs"},null,-1),(0,s.eW)(" ป้องกันด้วยรหัสผ่าน ")]))),(0,s.Lk)("button",{onClick:t[36]||(t[36]=t=>e.$emit("deleteContent")),type:"button",class:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-red-50 text-red-600 font-medium border border-red-300 rounded-lg transition-colors text-sm"},[t[79]||(t[79]=(0,s.Lk)("i",{class:"fas fa-trash text-xs"},null,-1)),(0,s.eW)(" "+(0,o.v_)(n.localIsPostType?"ลบบทความนี้":"ลบหน้านี้"),1)]),(0,s.Lk)("div",Ne,[(0,s.Lk)("button",{onClick:t[37]||(t[37]=t=>e.$emit("duplicateContent")),type:"button",class:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-gray-50 text-gray-700 font-medium border border-gray-300 rounded-lg transition-colors text-sm mb-2"},[t[80]||(t[80]=(0,s.Lk)("i",{class:"fas fa-copy text-xs"},null,-1)),(0,s.eW)(" "+(0,o.v_)(n.localIsPostType?"คัดลอกบทความ":"คัดลอกเนื้อหา"),1)]),(0,s.Lk)("button",{onClick:t[38]||(t[38]=t=>e.$emit("exportContent")),type:"button",class:"w-full inline-flex items-center justify-center gap-2 px-3 py-2 bg-white hover:bg-gray-50 text-gray-700 font-medium border border-gray-300 rounded-lg transition-colors text-sm mb-2"},t[81]||(t[81]=[(0,s.Lk)("i",{class:"fas fa-download text-xs"},null,-1),(0,s.eW)(" ส่งออกเนื้อหา ")])),(0,s.Lk)("label",We,[t[82]||(t[82]=(0,s.Lk)("i",{class:"fas fa-upload text-xs"},null,-1)),t[83]||(t[83]=(0,s.eW)(" นำเข้าเนื้อหา ")),(0,s.Lk)("input",{type:"file",accept:".json",onChange:t[39]||(t[39]=(...e)=>r.handleImportFile&&r.handleImportFile(...e)),class:"hidden"},null,32)])])])])])}var He={name:"ContentRightSidebar",props:{featureImage:{type:String,default:""},publishStatus:{type:Boolean,default:!1},requireAuth:{type:Boolean,default:!1},useAdminPage:{type:Boolean,default:!1},usePassword:{type:Boolean,default:!1},adminPassword:{type:String,default:""},enableAnalytics:{type:Boolean,default:!1},enableExport:{type:Boolean,default:!1},exportCSV:{type:Boolean,default:!1},exportExcel:{type:Boolean,default:!1},isTemplate:{type:Boolean,default:!1},layout:{type:String,default:"standard"},pageID:{type:String,default:""},pagePassword:{type:String,default:""},isPasswordModalOpen:{type:Boolean,default:!1},createdDate:{type:String,default:"-"},updatedDate:{type:String,default:"-"},viewCount:{type:Number,default:0},isPostType:{type:Boolean,default:!1},contentType:{type:String,default:"page"}},data(){return{localPublishStatus:this.publishStatus,localRequireAuth:this.requireAuth,localUseAdminPage:this.useAdminPage,localUsePassword:this.usePassword,localAdminPassword:this.adminPassword,localEnableAnalytics:this.enableAnalytics,localEnableExport:this.enableExport,localExportCSV:this.exportCSV,localExportExcel:this.exportExcel,localIsTemplate:this.isTemplate,localLayout:this.layout,localPageID:this.pageID,localPagePassword:this.pagePassword,localIsPasswordModalOpen:this.isPasswordModalOpen,localIsPostType:this.isPostType,localContentType:this.contentType}},watch:{publishStatus(e){this.localPublishStatus=e},requireAuth(e){this.localRequireAuth=e},useAdminPage(e){this.localUseAdminPage=e},usePassword(e){this.localUsePassword=e},adminPassword(e){this.localAdminPassword=e},enableAnalytics(e){this.localEnableAnalytics=e},enableExport(e){this.localEnableExport=e},exportCSV(e){this.localExportCSV=e},exportExcel(e){this.localExportExcel=e},isTemplate(e){this.localIsTemplate=e},layout(e){this.localLayout=e},pageID(e){this.localPageID=e},pagePassword(e){this.localPagePassword=e},isPasswordModalOpen(e){this.localIsPasswordModalOpen=e},isPostType(e){this.localIsPostType=e},contentType(e){this.localContentType=e}},emits:["openFileBrowser","update:publishStatus","update:requireAuth","update:useAdminPage","update:usePassword","update:adminPassword","update:enableAnalytics","update:enableExport","update:exportCSV","update:exportExcel","update:isTemplate","update:layout","update:pageID","update:pagePassword","generateRandomPassword","togglePasswordModal","resetPassword","updatePost","deleteContent","duplicateContent","exportContent","importContent"],methods:{handleImportFile(e){e.target.files.length>0&&this.$emit("importContent",e.target.files[0])}}};const ze=(0,ee.A)(He,[["render",Je]]);var Ge=ze;const Ye={class:"mx-auto max-w-full px-2 sm:px-3 lg:px-4 mb-3"},Ze={class:"bg-white rounded-md shadow-sm border border-gray-200 p-3"},et={class:"space-y-3"},tt={class:"flex items-center h-[40px] bg-gray-50 rounded border border-gray-200 p-2"},at={class:"hidden md:block text-gray-700 text-xs"},st={class:"text-gray-400"},ot={key:0},lt={class:"pl-0 ml-0 text-green-600 font-medium text-xs"},it={class:"mx-auto max-w-full px-2 sm:px-3 lg:px-4"},nt={class:"max-w-full mx-auto space-y-3"},rt={key:0,"aria-labelledby":"applicant-information-title"},dt={class:"bg-white shadow-sm rounded-md border border-gray-200"},ct={class:"p-3"},ut={class:"grid grid-cols-2 md:grid-cols-4 gap-2"},pt=["checked","disabled"],mt={class:"text-xs font-medium text-gray-700"},gt={key:0,class:"text-xs text-gray-500"},ht=["disabled"],yt=["disabled"],bt=["disabled"],xt={key:0,class:"mt-3 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-800"},ft={key:1},kt={key:2},vt={class:"bg-white shadow-sm rounded-md border border-gray-200"},Lt={class:"p-3"},Ct={class:"mb-4"},wt={class:"grid grid-cols-2 gap-2"},Dt=["disabled"],Ft=["disabled"],Tt={class:"grid grid-cols-1 gap-2"},St={class:"flex items-start gap-2 p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors"},It=["checked"],Et={class:"flex items-start gap-2 p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors"},Pt=["checked"],Ut={class:"flex items-start gap-2 p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors"},$t=["checked"],At={key:3,"aria-labelledby":"seo-settings-title"},Ot={class:"bg-white shadow-sm rounded-md border border-gray-200"},Bt={class:"p-3"},_t={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},Vt={class:"lg:col-span-1 flex flex-col"},Xt={class:"relative w-full flex-1"},Mt={class:"h-full"},jt={key:0,class:"text-center"},Rt=["src"],qt={key:2,class:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity rounded"},Qt={class:"mt-4 p-3 bg-gray-50 rounded border"},Kt={class:"space-y-1"},Nt={class:"text-blue-600 text-sm font-medium truncate"},Wt={class:"text-green-600 text-xs"},Jt={class:"text-gray-600 text-xs leading-relaxed"},Ht={class:"lg:col-span-2 flex flex-col"},zt={class:"space-y-4 flex-1"},Gt={class:"flex justify-between text-xs text-gray-500 mt-1"},Yt={class:"flex justify-between text-xs text-gray-500 mt-1"},Zt={class:"border border-gray-300 rounded p-1.5 flex flex-wrap gap-1 min-h-[2rem]"},ea=["onClick"],ta={key:4},aa={key:5},sa={key:6},oa={class:"bg-white shadow-sm rounded-md border border-gray-200"},la={class:"p-4 text-center"},ia={class:"text-gray-500 mb-3 text-xs"},na={key:0},ra={key:1},da={key:2},ca={key:3},ua={key:0},pa={key:1},ma={key:2},ga={key:3},ha={key:7},ya={class:"bg-white shadow-sm rounded-md border border-gray-200"},ba={class:"p-3"},xa={class:"space-y-3"},fa={key:0},ka={class:"space-y-2"},va={class:"flex items-start gap-2 p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors"},La=["checked"],Ca={class:"flex items-start gap-2 p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors"},wa=["checked"];function Da(e,t,a,i,n,r){const d=(0,s.g2)("CustomFieldsManager"),c=(0,s.g2)("CustomFieldRenderer"),u=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",Ye,[(0,s.Lk)("div",Ze,[(0,s.Lk)("div",et,[(0,s.Lk)("div",null,[t[43]||(t[43]=(0,s.Lk)("label",{for:"title",class:"block text-xs font-medium text-gray-700 mb-1"},"ชื่อเนื้อหา",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.localTitle=e),type:"text",name:"title",id:"title",autocomplete:"title",class:"block w-full rounded border border-gray-300 py-2 px-3 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-sm",placeholder:"กรอกชื่อเนื้อหา...",onKeyup:t[1]||(t[1]=(0,l.jR)((t=>e.$emit("onTitleInput")),["enter"])),onInput:t[2]||(t[2]=t=>e.$emit("update:title",n.localTitle)),onBlur:t[3]||(t[3]=t=>e.$emit("onTitleBlur"))},null,544),[[l.Jo,n.localTitle]])]),(0,s.Lk)("div",null,[t[50]||(t[50]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"URL Slug",-1)),(0,s.Lk)("div",tt,[t[48]||(t[48]=(0,s.Lk)("span",{class:"text-gray-500 mr-2 border-r border-gray-300 pr-2"},[(0,s.Lk)("i",{class:"fas fa-home text-xs"})],-1)),t[49]||(t[49]=(0,s.Lk)("span",{class:"text-green-500 mr-1"},[(0,s.Lk)("i",{class:"fas fa-lock text-xs"})],-1)),(0,s.Lk)("p",at,[t[44]||(t[44]=(0,s.eW)(" https://")),(0,s.Lk)("span",st,(0,o.v_)(a.hostname),1),t[45]||(t[45]=(0,s.eW)("/")),a.parentSlug?((0,s.uX)(),(0,s.CE)("span",ot,(0,o.v_)(a.parentSlug)+"/",1)):(0,s.Q3)("",!0)]),!a.isEditing&&a.slug?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("p",lt,(0,o.v_)(a.slug),1),(0,s.Lk)("button",{onClick:t[4]||(t[4]=t=>e.$emit("edit:slug",!0)),class:"ml-1 p-1 hover:bg-gray-200 rounded"},t[46]||(t[46]=[(0,s.Lk)("i",{class:"w-3 h-3 fas fa-pencil-alt text-gray-500"},null,-1)]))],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.localSlug=e),onInput:t[6]||(t[6]=t=>{e.$emit("update:slug",n.localSlug),e.$emit("handleSlugInput")}),onKeyup:t[7]||(t[7]=(0,l.jR)((t=>e.$emit("updateSlug")),["enter"])),onBlur:t[8]||(t[8]=t=>e.$emit("updateSlug")),type:"text",class:"slug-input p-1 rounded border border-gray-300 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs",placeholder:"กรอก URL slug..."},null,544),[[l.Jo,n.localSlug]]),(0,s.Lk)("button",{onClick:t[9]||(t[9]=t=>e.$emit("updateSlug")),class:"ml-1 p-1 hover:bg-gray-200 rounded"},t[47]||(t[47]=[(0,s.Lk)("i",{class:"w-3 h-3 fas fa-save text-gray-500"},null,-1)]))],64))])])])])]),(0,s.Lk)("div",it,[(0,s.Lk)("div",nt,["post"==a.contentType||n.localIsPostType?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("section",rt,[(0,s.Lk)("div",dt,[(0,s.Lk)("div",ct,[t[59]||(t[59]=(0,s.Lk)("h2",{class:"text-sm font-semibold text-gray-900 mb-3"},"ประเภทเนื้อหา",-1)),(0,s.Lk)("div",ut,[(0,s.Lk)("label",{class:(0,o.C4)(["relative flex flex-col items-center justify-center p-3 cursor-pointer border-2 rounded-md hover:bg-gray-50 transition-colors",{"border-blue-500 bg-blue-50":"page"===a.contentType||"post"===a.contentType,"border-gray-300":"page"!==a.contentType&&"post"!==a.contentType}])},[t[51]||(t[51]=(0,s.Lk)("img",{src:"https://vue-project.sgp1.digitaloceanspaces.com/ui-icon/pagepng.png",alt:"Page",class:"w-8 h-8 mb-1"},null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[10]||(t[10]=e=>n.localContentType=e),value:"page",class:"hidden",checked:"post"===a.contentType,disabled:"post"===a.contentType||n.localIsPostType,onChange:t[11]||(t[11]=t=>e.$emit("update:contentType",n.localContentType))},null,40,pt),[[l.XL,n.localContentType]]),(0,s.Lk)("span",mt,(0,o.v_)(n.localIsPostType?"Post":"Page"),1),n.localIsPostType?((0,s.uX)(),(0,s.CE)("span",gt,"บทความย่อย")):(0,s.Q3)("",!0)],2),(0,s.Lk)("label",{class:(0,o.C4)(["relative flex flex-col items-center justify-center p-3 cursor-pointer border-2 rounded-md hover:bg-gray-50 transition-colors",{"border-blue-500 bg-blue-50":"form"===a.contentType,"border-gray-300":"form"!==a.contentType,"opacity-50 cursor-not-allowed":n.localIsPostType}])},[t[52]||(t[52]=(0,s.Lk)("img",{src:"https://vue-project.sgp1.digitaloceanspaces.com/ui-icon/formpng.png",alt:"Form",class:"w-8 h-8 mb-1"},null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[12]||(t[12]=e=>n.localContentType=e),value:"form",class:"hidden",disabled:"post"===a.contentType||n.localIsPostType,onChange:t[13]||(t[13]=t=>e.$emit("update:contentType",n.localContentType))},null,40,ht),[[l.XL,n.localContentType]]),t[53]||(t[53]=(0,s.Lk)("span",{class:"text-xs font-medium text-gray-700"},"Form",-1))],2),(0,s.Lk)("label",{class:(0,o.C4)(["relative flex flex-col items-center justify-center p-3 cursor-pointer border-2 rounded-md hover:bg-gray-50 transition-colors",{"border-blue-500 bg-blue-50":"layout"===a.contentType,"border-gray-300":"layout"!==a.contentType,"opacity-50 cursor-not-allowed":n.localIsPostType}])},[t[54]||(t[54]=(0,s.Lk)("img",{src:"https://vue-project.sgp1.digitaloceanspaces.com/ui-icon/layoutpng.png",alt:"Layout",class:"w-8 h-8 mb-1"},null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[14]||(t[14]=e=>n.localContentType=e),value:"layout",class:"hidden",disabled:"post"===a.contentType||n.localIsPostType,onChange:t[15]||(t[15]=t=>e.$emit("update:contentType",n.localContentType))},null,40,yt),[[l.XL,n.localContentType]]),t[55]||(t[55]=(0,s.Lk)("span",{class:"text-xs font-medium text-gray-700"},"Layout",-1))],2),(0,s.Lk)("label",{class:(0,o.C4)(["relative flex flex-col items-center justify-center p-3 cursor-pointer border-2 rounded-md hover:bg-gray-50 transition-colors",{"border-blue-500 bg-blue-50":"menu"===a.contentType,"border-gray-300":"menu"!==a.contentType,"opacity-50 cursor-not-allowed":n.localIsPostType}])},[t[56]||(t[56]=(0,s.Lk)("img",{src:"https://vue-project.sgp1.digitaloceanspaces.com/ui-icon/absolutepng.png",alt:"Menu",class:"w-8 h-8 mb-1"},null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[16]||(t[16]=e=>n.localContentType=e),value:"menu",class:"hidden",disabled:"post"===a.contentType||n.localIsPostType,onChange:t[17]||(t[17]=t=>e.$emit("update:contentType",n.localContentType))},null,40,bt),[[l.XL,n.localContentType]]),t[57]||(t[57]=(0,s.Lk)("span",{class:"text-xs font-medium text-gray-700"},"Menu",-1))],2)]),n.localIsPostType?((0,s.uX)(),(0,s.CE)("div",xt,t[58]||(t[58]=[(0,s.Lk)("i",{class:"fas fa-info-circle mr-1"},null,-1),(0,s.eW)(" นี่คือบทความย่อย (Post) ที่อยู่ภายใต้หน้าหลัก ประเภทเนื้อหาถูกกำหนดเป็น Post โดยอัตโนมัติ ")]))):(0,s.Q3)("",!0)])])])),n.localIsPostType||"post"===a.contentType?((0,s.uX)(),(0,s.CE)("section",ft,t[60]||(t[60]=[(0,s.Fv)('<div class="bg-white shadow-sm rounded-md border border-gray-200"><div class="p-3"><h2 class="text-sm font-semibold text-gray-900 mb-3">ข้อมูลบทความ</h2><div class="p-3 bg-blue-50 border border-blue-200 rounded"><div class="flex items-center gap-2 mb-2"><i class="fas fa-file-alt text-blue-600"></i><span class="text-sm font-medium text-blue-900">บทความย่อย (Post)</span></div><div class="space-y-1 text-xs text-blue-800"><div>• ประเภทเนื้อหา: Post</div><div>• จัดการโดยหน้าหลัก</div><div>• การแสดงผล: ตามการตั้งค่าของหน้าหลัก</div><div>• สามารถมี Custom Fields ได้ตามที่หน้าหลักกำหนด</div></div></div></div></div>',1)]))):(0,s.Q3)("",!0),"page"!==a.contentType||n.localIsPostType?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("section",kt,[(0,s.Lk)("div",vt,[(0,s.Lk)("div",Lt,[t[72]||(t[72]=(0,s.Lk)("h2",{class:"text-sm font-semibold text-gray-900 mb-3"},"การแสดงผลหน้า",-1)),(0,s.Lk)("div",Ct,[t[67]||(t[67]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-2"},"รูปแบบการแสดงผล",-1)),(0,s.Lk)("div",wt,[(0,s.Lk)("label",{class:(0,o.C4)(["relative flex flex-col items-center justify-center p-3 cursor-pointer border-2 rounded-md hover:bg-gray-50 transition-colors",{"border-blue-500 bg-blue-50":"single"===a.display,"border-gray-300":"single"!==a.display}])},[t[61]||(t[61]=(0,s.Lk)("img",{src:"https://vue-project.sgp1.digitaloceanspaces.com/ui-icon/singlepng.png",alt:"Single Page",class:"w-8 h-8 mb-1"},null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[18]||(t[18]=e=>n.localDisplay=e),value:"single",class:"hidden",disabled:n.localIsPostType,onChange:t[19]||(t[19]=t=>e.$emit("update:display",n.localDisplay))},null,40,Dt),[[l.XL,n.localDisplay]]),t[62]||(t[62]=(0,s.Lk)("span",{class:"text-xs font-medium text-gray-700"},"หน้าเดี่ยว",-1)),t[63]||(t[63]=(0,s.Lk)("span",{class:"text-xs text-gray-500 text-center mt-0.5"},"หน้าเว็บปกติ",-1))],2),(0,s.Lk)("label",{class:(0,o.C4)(["relative flex flex-col items-center justify-center p-3 cursor-pointer border-2 rounded-md hover:bg-gray-50 transition-colors",{"border-blue-500 bg-blue-50":"group"===a.display,"border-gray-300":"group"!==a.display}])},[t[64]||(t[64]=(0,s.Lk)("img",{src:"https://vue-project.sgp1.digitaloceanspaces.com/ui-icon/grouppng.png",alt:"Group Page",class:"w-8 h-8 mb-1"},null,-1)),(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":t[20]||(t[20]=e=>n.localDisplay=e),value:"group",class:"hidden",disabled:n.localIsPostType,onChange:t[21]||(t[21]=t=>e.$emit("update:display",n.localDisplay))},null,40,Ft),[[l.XL,n.localDisplay]]),t[65]||(t[65]=(0,s.Lk)("span",{class:"text-xs font-medium text-gray-700"},"หน้ารวม",-1)),t[66]||(t[66]=(0,s.Lk)("span",{class:"text-xs text-gray-500 text-center mt-0.5"},"หน้าสำหรับรวมบทความ",-1))],2)])]),(0,s.Lk)("div",null,[t[71]||(t[71]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-2"},"ตัวเลือกเพิ่มเติม",-1)),(0,s.Lk)("div",Tt,[(0,s.Lk)("label",St,[(0,s.Lk)("input",{checked:n.localIsComment,onChange:t[22]||(t[22]=e=>r.handleCheckboxChange("isComment",e.target.checked)),type:"checkbox",class:"mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,40,It),t[68]||(t[68]=(0,s.Lk)("div",null,[(0,s.Lk)("div",{class:"text-xs font-medium text-gray-900"},"ความคิดเห็น"),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"เปิดใช้ระบบความคิดเห็น")],-1))]),(0,s.Lk)("label",Et,[(0,s.Lk)("input",{checked:n.localIsCounter,onChange:t[23]||(t[23]=e=>r.handleCheckboxChange("isCounter",e.target.checked)),type:"checkbox",class:"mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,40,Pt),t[69]||(t[69]=(0,s.Lk)("div",null,[(0,s.Lk)("div",{class:"text-xs font-medium text-gray-900"},"นับผู้เยี่ยมชม"),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"แสดงจำนวนผู้เยี่ยมชม")],-1))]),(0,s.Lk)("label",Ut,[(0,s.Lk)("input",{checked:n.localIsMenu,onChange:t[24]||(t[24]=e=>r.handleCheckboxChange("isMenu",e.target.checked)),type:"checkbox",class:"mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,40,$t),t[70]||(t[70]=(0,s.Lk)("div",null,[(0,s.Lk)("div",{class:"text-xs font-medium text-gray-900"},"แสดงในเมนู"),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"รวมในเมนูนำทาง")],-1))])])])])])])),"page"!==a.contentType&&"form"!==a.contentType||n.localIsPostType?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("section",At,[(0,s.Lk)("div",Ot,[(0,s.Lk)("div",Bt,[t[84]||(t[84]=(0,s.Lk)("h2",{id:"seo-settings-title",class:"text-sm font-semibold text-gray-900 mb-3"}," SEO Settings ",-1)),(0,s.Lk)("div",_t,[(0,s.Lk)("div",Vt,[t[76]||(t[76]=(0,s.Lk)("label",{for:"seo-image",class:"block text-xs font-medium text-gray-700 mb-2"}," SEO Image ",-1)),(0,s.Lk)("div",Xt,[(0,s.Lk)("div",Mt,[(0,s.Lk)("div",{class:"w-full h-full min-h-[200px] lg:min-h-[280px] bg-gray-200 flex items-center justify-center rounded cursor-pointer hover:bg-gray-300 transition-colors",onClick:t[25]||(t[25]=t=>e.$emit("openSEOFileBrowser"))},[a.seoImage?((0,s.uX)(),(0,s.CE)("img",{key:1,src:a.seoImage,alt:"SEO Image",class:"w-full h-full object-cover rounded"},null,8,Rt)):((0,s.uX)(),(0,s.CE)("div",jt,t[73]||(t[73]=[(0,s.Lk)("i",{class:"fas fa-image text-gray-400 text-2xl mb-3"},null,-1),(0,s.Lk)("p",{class:"text-sm text-gray-500 mb-1"},"คลิกเพื่อเลือกรูปภาพ",-1),(0,s.Lk)("p",{class:"text-xs text-gray-400"},"แนะนำ: 1200x630px",-1),(0,s.Lk)("p",{class:"text-xs text-gray-400"},"สำหรับการแชร์โซเชียล",-1)]))),a.seoImage?((0,s.uX)(),(0,s.CE)("div",qt,t[74]||(t[74]=[(0,s.Lk)("span",{class:"text-white bg-black bg-opacity-60 px-3 py-2 rounded text-sm"},[(0,s.Lk)("i",{class:"fas fa-edit text-white text-sm mr-1"}),(0,s.eW)(" เปลี่ยนรูปภาพ ")],-1)]))):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",Qt,[t[75]||(t[75]=(0,s.Lk)("h4",{class:"text-xs font-medium text-gray-700 mb-2"},[(0,s.Lk)("i",{class:"fas fa-eye mr-1"}),(0,s.eW)(" ตัวอย่างใน Google ")],-1)),(0,s.Lk)("div",Kt,[(0,s.Lk)("div",Nt,(0,o.v_)(a.seoTitle||a.title||"ชื่อเรื่อง..."),1),(0,s.Lk)("div",Wt,(0,o.v_)(a.hostname||"yoursite.com")+"/"+(0,o.v_)(a.slug||"url-slug"),1),(0,s.Lk)("div",Jt,(0,o.v_)(a.seoDescription||"คำอธิบายสำหรับ SEO จะแสดงที่นี่..."),1)])])]),(0,s.Lk)("div",Ht,[(0,s.Lk)("div",zt,[(0,s.Lk)("div",null,[t[78]||(t[78]=(0,s.Lk)("label",{for:"seo-title",class:"block text-xs font-medium text-gray-700 mb-1"}," SEO Title ",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[26]||(t[26]=e=>n.localSeoTitle=e),onInput:t[27]||(t[27]=t=>e.$emit("update:seoTitle",n.localSeoTitle)),type:"text",id:"seo-title",class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs",placeholder:"Enter a custom title for SEO"},null,544),[[l.Jo,n.localSeoTitle]]),(0,s.Lk)("div",Gt,[t[77]||(t[77]=(0,s.Lk)("span",null,"แนะนำ: 30-60 ตัวอักษร",-1)),(0,s.Lk)("span",{class:(0,o.C4)(n.localSeoTitle&&n.localSeoTitle.length>=30&&n.localSeoTitle.length<=60?"text-green-600":"text-red-500")},(0,o.v_)(n.localSeoTitle?n.localSeoTitle.length:0)+"/60 ",3)])]),(0,s.Lk)("div",null,[t[80]||(t[80]=(0,s.Lk)("label",{for:"seo-description",class:"block text-xs font-medium text-gray-700 mb-1"}," Meta Description ",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[28]||(t[28]=e=>n.localSeoDescription=e),onInput:t[29]||(t[29]=t=>e.$emit("update:seoDescription",n.localSeoDescription)),id:"seo-description",rows:"3",class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs resize-none",placeholder:"Enter a brief description for SEO"},null,544),[[l.Jo,n.localSeoDescription]]),(0,s.Lk)("div",Yt,[t[79]||(t[79]=(0,s.Lk)("span",null,"แนะนำ: 120-160 ตัวอักษร",-1)),(0,s.Lk)("span",{class:(0,o.C4)(n.localSeoDescription&&n.localSeoDescription.length>=120&&n.localSeoDescription.length<=160?"text-green-600":"text-red-500")},(0,o.v_)(n.localSeoDescription?n.localSeoDescription.length:0)+"/160 ",3)])]),(0,s.Lk)("div",null,[t[82]||(t[82]=(0,s.Lk)("label",{for:"seo-keywords",class:"block text-xs font-medium text-gray-700 mb-1"}," Keywords ",-1)),(0,s.Lk)("div",Zt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.seoKeywords,((a,l)=>((0,s.uX)(),(0,s.CE)("span",{key:l,class:"inline-flex items-center gap-1 px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs"},[(0,s.eW)((0,o.v_)(a)+" ",1),(0,s.Lk)("button",{onClick:t=>e.$emit("removeKeyword",l),class:"text-blue-500 hover:text-red-500 transition-colors"},t[81]||(t[81]=[(0,s.Lk)("i",{class:"fas fa-times text-xs"},null,-1)]),8,ea)])))),128)),(0,s.bo)((0,s.Lk)("input",{id:"seo-keywords","onUpdate:modelValue":t[30]||(t[30]=e=>n.newKeyword=e),onKeyup:t[31]||(t[31]=(0,l.jR)((t=>{e.$emit("addKeyword",n.newKeyword),n.newKeyword=""}),["enter"])),placeholder:"Add a keyword",class:"border-none focus:outline-none flex-grow text-xs min-w-0 bg-transparent"},null,544),[[l.Jo,n.newKeyword]])]),t[83]||(t[83]=(0,s.Lk)("p",{class:"mt-1 text-xs text-gray-500"},[(0,s.Lk)("i",{class:"fas fa-info-circle mr-1"}),(0,s.eW)(" Press Enter to add a keyword. แนะนำ: 3-5 keywords ")],-1))])])])])])])])),"page"!==a.contentType||"group"!==n.localDisplay||n.localIsPostType?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("section",ta,[(0,s.bF)(d,{"custom-fields":a.customFields,"onUpdate:customFields":t[32]||(t[32]=t=>e.$emit("update:customFields",t))},null,8,["custom-fields"])])),n.localIsPostType?((0,s.uX)(),(0,s.CE)("section",aa,[(0,s.bF)(c,{type:a.contentType,"parent-id":a.parentId,"parent-data":a.parentData,"custom-data":a.customData,configs:a.configs,"onUpdate:customData":t[33]||(t[33]=t=>e.$emit("update:customData",t)),onOpenImageBrowser:t[34]||(t[34]=t=>e.$emit("openCustomImageBrowser",t))},null,8,["type","parent-id","parent-data","custom-data","configs"])])):(0,s.Q3)("",!0),a.contentType&&""!==a.contentType?((0,s.uX)(),(0,s.CE)("section",sa,[(0,s.Lk)("div",oa,[(0,s.Lk)("div",la,[t[86]||(t[86]=(0,s.Lk)("div",{class:"mx-auto w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mb-3"},[(0,s.Lk)("i",{class:"fas fa-palette text-blue-600 text-lg"})],-1)),t[87]||(t[87]=(0,s.Lk)("h3",{class:"text-sm font-semibold text-gray-900 mb-1"},"ออกแบบเนื้อหา",-1)),(0,s.Lk)("p",ia,["page"===a.contentType?((0,s.uX)(),(0,s.CE)("span",na,"ใช้เครื่องมือสร้างหน้าเว็บเพื่อปรับแต่งเลย์เอาต์และเนื้อหา")):"form"===a.contentType?((0,s.uX)(),(0,s.CE)("span",ra,"ออกแบบแบบฟอร์มด้วยเครื่องมือลากวาง")):"layout"===a.contentType?((0,s.uX)(),(0,s.CE)("span",da,"ออกแบบเลย์เอาต์สำหรับเว็บไซต์")):"menu"===a.contentType?((0,s.uX)(),(0,s.CE)("span",ca,"จัดการรายการเมนูและการจัดเรียง")):(0,s.Q3)("",!0)]),(0,s.bF)(u,{to:"/cms/builder/"+a.postId,class:"inline-flex items-center gap-1 bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-md transition-colors text-xs"},{default:(0,s.k6)((()=>[t[85]||(t[85]=(0,s.Lk)("i",{class:"fas fa-palette text-xs"},null,-1)),"page"===a.contentType?((0,s.uX)(),(0,s.CE)("span",ua,"เริ่มออกแบบ")):"form"===a.contentType?((0,s.uX)(),(0,s.CE)("span",pa,"สร้างฟอร์ม")):"layout"===a.contentType?((0,s.uX)(),(0,s.CE)("span",ma,"ออกแบบเลย์เอาต์")):"menu"===a.contentType?((0,s.uX)(),(0,s.CE)("span",ga,"จัดการเมนู")):(0,s.Q3)("",!0)])),_:1},8,["to"])])])])):(0,s.Q3)("",!0),"form"!==a.contentType||n.localIsPostType?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("section",ha,[(0,s.Lk)("div",ya,[(0,s.Lk)("div",ba,[t[96]||(t[96]=(0,s.Lk)("h2",{class:"text-sm font-semibold text-gray-900 mb-3"},"ตั้งค่าแบบฟอร์ม",-1)),(0,s.Lk)("div",xa,[(0,s.Lk)("div",null,[t[89]||(t[89]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"การดำเนินการหลังส่งฟอร์ม",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[35]||(t[35]=e=>n.localAction=e),onChange:t[36]||(t[36]=t=>e.$emit("update:action",n.localAction)),class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs"},t[88]||(t[88]=[(0,s.Lk)("option",{value:"standard"},"แสดงข้อความขอบคุณ",-1),(0,s.Lk)("option",{value:"redirect"},"เปลี่ยนหน้า",-1),(0,s.Lk)("option",{value:"email"},"ส่งอีเมล",-1),(0,s.Lk)("option",{value:"download"},"ดาวน์โหลดไฟล์",-1)]),544),[[l.u1,n.localAction]])]),(0,s.Lk)("div",null,[t[91]||(t[91]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"ปลายทางข้อมูล",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[37]||(t[37]=e=>n.localDestination=e),onChange:t[38]||(t[38]=t=>e.$emit("update:destination",n.localDestination)),class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs"},t[90]||(t[90]=[(0,s.Lk)("option",{value:"database"},"ฐานข้อมูล",-1),(0,s.Lk)("option",{value:"email"},"อีเมล",-1),(0,s.Lk)("option",{value:"webhook"},"Webhook",-1),(0,s.Lk)("option",{value:"file"},"ไฟล์ CSV",-1)]),544),[[l.u1,n.localDestination]])]),"redirect"===a.action?((0,s.uX)(),(0,s.CE)("div",fa,[t[92]||(t[92]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"หน้าถัดไป",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[39]||(t[39]=e=>n.localNext=e),onInput:t[40]||(t[40]=t=>e.$emit("update:next",n.localNext)),type:"text",class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs",placeholder:"URL หรือ slug ของหน้าถัดไป"},null,544),[[l.Jo,n.localNext]])])):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[t[95]||(t[95]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-2"},"ตัวเลือกเพิ่มเติม",-1)),(0,s.Lk)("div",ka,[(0,s.Lk)("label",va,[(0,s.Lk)("input",{checked:n.localIsComment,onChange:t[41]||(t[41]=e=>r.handleCheckboxChange("isComment",e.target.checked)),type:"checkbox",class:"mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,40,La),t[93]||(t[93]=(0,s.Lk)("div",null,[(0,s.Lk)("div",{class:"text-xs font-medium text-gray-900"},"ต้องลงทะเบียน"),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"ผู้ใช้ต้องเข้าสู่ระบบก่อนกรอกฟอร์ม")],-1))]),(0,s.Lk)("label",Ca,[(0,s.Lk)("input",{checked:n.localIsCounter,onChange:t[42]||(t[42]=e=>r.handleCheckboxChange("isCounter",e.target.checked)),type:"checkbox",class:"mt-0.5 rounded border-gray-300 text-blue-600 focus:ring-blue-600"},null,40,wa),t[94]||(t[94]=(0,s.Lk)("div",null,[(0,s.Lk)("div",{class:"text-xs font-medium text-gray-900"},"จำกัดการส่งฟอร์ม"),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"ผู้ใช้ส่งได้เพียงครั้งเดียว")],-1))])])])])])])]))])])])}const Fa={class:"bg-white shadow-sm rounded-md border border-gray-200"},Ta={class:"p-3"},Sa={class:"flex items-center justify-between mb-3"},Ia={key:0,class:"text-center py-8 text-gray-500"},Ea={key:1,class:"space-y-3"},Pa={class:"flex items-center justify-between mb-2"},Ua={class:"flex items-center gap-2"},$a={class:"flex items-center gap-1"},Aa={class:"font-medium text-sm text-gray-900"},Oa={class:"flex items-center gap-1"},Ba={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"},_a={class:"flex items-center gap-1"},Va=["onClick"],Xa=["onClick"],Ma=["onClick"],ja=["onClick","disabled"],Ra=["onClick","disabled"],qa={key:0,class:"text-xs text-gray-600 mb-2"},Qa={key:0,class:"mb-1"},Ka={class:"flex items-center gap-4"},Na={key:0},Wa={key:1},Ja={key:1,class:"space-y-3 border-t border-gray-200 pt-3"},Ha={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},za=["onUpdate:modelValue"],Ga=["onUpdate:modelValue"],Ya=["onUpdate:modelValue"],Za=["onUpdate:modelValue"],es=["onUpdate:modelValue"],ts={key:0,class:"space-y-2"},as={class:"space-y-2"},ss=["onUpdate:modelValue"],os=["onUpdate:modelValue"],ls=["onClick"],is=["onClick"],ns={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},rs={key:0},ds=["onUpdate:modelValue"],cs={key:1},us=["onUpdate:modelValue"],ps={class:"flex items-center gap-4"},ms={class:"flex items-center gap-2"},gs=["onUpdate:modelValue"],hs={key:0,class:"flex items-center gap-2"},ys=["onUpdate:modelValue"],bs={key:1,class:"flex items-center gap-2"},xs=["onUpdate:modelValue"],fs={class:"flex items-center justify-end gap-2 pt-2 border-t border-gray-200"},ks=["onClick"],vs={key:2,class:"mt-4 pt-4 border-t border-gray-200"},Ls={class:"grid grid-cols-2 md:grid-cols-3 gap-2"},Cs={key:3,class:"mt-4 pt-4 border-t border-gray-200"},ws={class:"flex items-center justify-between text-xs text-gray-600"},Ds={class:"flex items-center gap-4"},Fs={class:"flex items-center gap-2"},Ts={class:"text-purple-600 hover:text-purple-700 cursor-pointer",title:"Import Fields"};function Ss(e,t,a,i,n,r){return(0,s.uX)(),(0,s.CE)("div",Fa,[(0,s.Lk)("div",Ta,[(0,s.Lk)("div",Sa,[t[11]||(t[11]=(0,s.Lk)("h2",{class:"text-sm font-semibold text-gray-900"},[(0,s.Lk)("i",{class:"fas fa-cogs text-purple-600 mr-2"}),(0,s.eW)(" Custom Fields Management ")],-1)),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.addNewField&&r.addNewField(...e)),type:"button",class:"inline-flex items-center gap-1 bg-purple-600 hover:bg-purple-700 text-white font-medium px-3 py-1.5 rounded-md transition-colors text-xs"},t[10]||(t[10]=[(0,s.Lk)("i",{class:"fas fa-plus text-xs"},null,-1),(0,s.eW)(" เพิ่ม Field ")]))]),0===n.localCustomFields.length?((0,s.uX)(),(0,s.CE)("div",Ia,t[12]||(t[12]=[(0,s.Lk)("i",{class:"fas fa-layer-group text-3xl mb-3 text-gray-300"},null,-1),(0,s.Lk)("p",{class:"text-sm"},"ยังไม่มี Custom Fields",-1),(0,s.Lk)("p",{class:"text-xs mt-1"},'คลิก "เพิ่ม Field" เพื่อเริ่มต้น',-1)]))):((0,s.uX)(),(0,s.CE)("div",Ea,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.localCustomFields,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,o.C4)(["border border-gray-200 rounded-lg p-3 hover:border-purple-300 transition-colors",{"border-purple-400 bg-purple-50":n.editingField===e.id}])},[(0,s.Lk)("div",Pa,[(0,s.Lk)("div",Ua,[(0,s.Lk)("div",$a,[(0,s.Lk)("i",{class:(0,o.C4)([r.getFieldIcon(e.type),"text-purple-600 text-sm"])},null,2),(0,s.Lk)("span",Aa,(0,o.v_)(e.label||`Field ${a+1}`),1)]),(0,s.Lk)("div",Oa,[(0,s.Lk)("span",{class:(0,o.C4)(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium","main"===e.position?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"])},(0,o.v_)("main"===e.position?"Main":"Sidebar"),3),e.required?((0,s.uX)(),(0,s.CE)("span",Ba," Required ")):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",_a,[(0,s.Lk)("button",{onClick:t=>r.editField(e.id),type:"button",class:"p-1.5 text-gray-500 hover:text-purple-600 hover:bg-purple-100 rounded transition-colors",title:"แก้ไข"},t[13]||(t[13]=[(0,s.Lk)("i",{class:"fas fa-edit text-xs"},null,-1)]),8,Va),(0,s.Lk)("button",{onClick:t=>r.duplicateField(e.id),type:"button",class:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-100 rounded transition-colors",title:"คัดลอก"},t[14]||(t[14]=[(0,s.Lk)("i",{class:"fas fa-copy text-xs"},null,-1)]),8,Xa),(0,s.Lk)("button",{onClick:t=>r.deleteField(e.id),type:"button",class:"p-1.5 text-gray-500 hover:text-red-600 hover:bg-red-100 rounded transition-colors",title:"ลบ"},t[15]||(t[15]=[(0,s.Lk)("i",{class:"fas fa-trash text-xs"},null,-1)]),8,Ma),(0,s.Lk)("button",{onClick:e=>r.moveField(a,a-1),disabled:0===a,type:"button",class:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"ย้ายขึ้น"},t[16]||(t[16]=[(0,s.Lk)("i",{class:"fas fa-chevron-up text-xs"},null,-1)]),8,ja),(0,s.Lk)("button",{onClick:e=>r.moveField(a,a+1),disabled:a===n.localCustomFields.length-1,type:"button",class:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"ย้ายลง"},t[17]||(t[17]=[(0,s.Lk)("i",{class:"fas fa-chevron-down text-xs"},null,-1)]),8,Ra)])]),n.editingField!==e.id?((0,s.uX)(),(0,s.CE)("div",qa,[e.description?((0,s.uX)(),(0,s.CE)("div",Qa,(0,o.v_)(e.description),1)):(0,s.Q3)("",!0),(0,s.Lk)("div",Ka,[(0,s.Lk)("span",null,[t[18]||(t[18]=(0,s.eW)("Type: ")),(0,s.Lk)("strong",null,(0,o.v_)(r.getFieldTypeLabel(e.type)),1)]),e.placeholder?((0,s.uX)(),(0,s.CE)("span",Na,'Placeholder: "'+(0,o.v_)(e.placeholder)+'"',1)):(0,s.Q3)("",!0),e.defaultValue?((0,s.uX)(),(0,s.CE)("span",Wa,'Default: "'+(0,o.v_)(e.defaultValue)+'"',1)):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0),n.editingField===e.id?((0,s.uX)(),(0,s.CE)("div",Ja,[(0,s.Lk)("div",Ha,[(0,s.Lk)("div",null,[t[19]||(t[19]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Label",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.label=t,type:"text",class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-purple-600 focus:outline-none focus:ring-1 focus:ring-purple-600 text-xs",placeholder:"Field Label"},null,8,za),[[l.Jo,e.label]])]),(0,s.Lk)("div",null,[t[20]||(t[20]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Field Name",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.name=t,type:"text",class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-purple-600 focus:outline-none focus:ring-1 focus:ring-purple-600 text-xs font-mono",placeholder:"field_name"},null,8,Ga),[[l.Jo,e.name]])]),(0,s.Lk)("div",null,[t[22]||(t[22]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Type",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t=>e.type=t,class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-purple-600 focus:outline-none focus:ring-1 focus:ring-purple-600 text-xs"},t[21]||(t[21]=[(0,s.Fv)('<option value="input">Text Input</option><option value="textarea">Textarea</option><option value="datetime">Date/Time</option><option value="radio">Radio Buttons</option><option value="checkbox">Checkbox</option><option value="image">Image Upload</option>',6)]),8,Ya),[[l.u1,e.type]])]),(0,s.Lk)("div",null,[t[24]||(t[24]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Position",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t=>e.position=t,class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-purple-600 focus:outline-none focus:ring-1 focus:ring-purple-600 text-xs"},t[23]||(t[23]=[(0,s.Lk)("option",{value:"main"},"Main Content",-1),(0,s.Lk)("option",{value:"sidebar"},"Sidebar",-1)]),8,Za),[[l.u1,e.position]])])]),(0,s.Lk)("div",null,[t[25]||(t[25]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Description",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t=>e.description=t,rows:"2",class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-purple-600 focus:outline-none focus:ring-1 focus:ring-purple-600 text-xs resize-none",placeholder:"Field description..."},null,8,es),[[l.Jo,e.description]])]),"radio"===e.type||"checkbox"===e.type?((0,s.uX)(),(0,s.CE)("div",ts,[t[28]||(t[28]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700"},"Options",-1)),(0,s.Lk)("div",as,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.options,((a,o)=>((0,s.uX)(),(0,s.CE)("div",{key:o,class:"flex items-center gap-2"},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.value=e,type:"text",class:"flex-1 rounded border border-gray-300 py-1 px-2 text-xs focus:border-purple-600 focus:outline-none focus:ring-1 focus:ring-purple-600",placeholder:"Option value"},null,8,ss),[[l.Jo,a.value]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e=>a.label=e,type:"text",class:"flex-1 rounded border border-gray-300 py-1 px-2 text-xs focus:border-purple-600 focus:outline-none focus:ring-1 focus:ring-purple-600",placeholder:"Option label"},null,8,os),[[l.Jo,a.label]]),(0,s.Lk)("button",{onClick:t=>r.removeOption(e.id,o),type:"button",class:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 rounded transition-colors"},t[26]||(t[26]=[(0,s.Lk)("i",{class:"fas fa-times text-xs"},null,-1)]),8,ls)])))),128)),(0,s.Lk)("button",{onClick:t=>r.addOption(e.id),type:"button",class:"inline-flex items-center gap-1 text-purple-600 hover:text-purple-700 text-xs"},t[27]||(t[27]=[(0,s.Lk)("i",{class:"fas fa-plus text-xs"},null,-1),(0,s.eW)(" Add Option ")]),8,is)])])):(0,s.Q3)("",!0),(0,s.Lk)("div",ns,[["input","textarea"].includes(e.type)?((0,s.uX)(),(0,s.CE)("div",rs,[t[29]||(t[29]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Placeholder",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.placeholder=t,type:"text",class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-purple-600 focus:outline-none focus:ring-1 focus:ring-purple-600 text-xs",placeholder:"Placeholder text"},null,8,ds),[[l.Jo,e.placeholder]])])):(0,s.Q3)("",!0),["image"].includes(e.type)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",cs,[t[30]||(t[30]=(0,s.Lk)("label",{class:"block text-xs font-medium text-gray-700 mb-1"},"Default Value",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.defaultValue=t,type:"text",class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-purple-600 focus:outline-none focus:ring-1 focus:ring-purple-600 text-xs",placeholder:"Default value"},null,8,us),[[l.Jo,e.defaultValue]])]))]),(0,s.Lk)("div",ps,[(0,s.Lk)("label",ms,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.required=t,type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-600"},null,8,gs),[[l.lH,e.required]]),t[31]||(t[31]=(0,s.Lk)("span",{class:"text-xs text-gray-700"},"Required Field",-1))]),"input"===e.type?((0,s.uX)(),(0,s.CE)("label",hs,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.validation.unique=t,type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-600"},null,8,ys),[[l.lH,e.validation.unique]]),t[32]||(t[32]=(0,s.Lk)("span",{class:"text-xs text-gray-700"},"Unique Values",-1))])):(0,s.Q3)("",!0),["input","textarea"].includes(e.type)?((0,s.uX)(),(0,s.CE)("label",bs,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t=>e.searchable=t,type:"checkbox",class:"rounded border-gray-300 text-purple-600 focus:ring-purple-600"},null,8,xs),[[l.lH,e.searchable]]),t[33]||(t[33]=(0,s.Lk)("span",{class:"text-xs text-gray-700"},"Searchable",-1))])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",fs,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.cancelEditField&&r.cancelEditField(...e)),type:"button",class:"px-3 py-1.5 text-gray-600 hover:text-gray-700 hover:bg-gray-100 rounded transition-colors text-xs"}," Cancel "),(0,s.Lk)("button",{onClick:t=>r.saveField(e.id),type:"button",class:"px-3 py-1.5 bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors text-xs"}," Save Field ",8,ks)])])):(0,s.Q3)("",!0)],2)))),128))])),0===n.localCustomFields.length?((0,s.uX)(),(0,s.CE)("div",vs,[t[40]||(t[40]=(0,s.Lk)("h3",{class:"text-xs font-medium text-gray-700 mb-2"},"Quick Templates",-1)),(0,s.Lk)("div",Ls,[(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>r.addTemplateFields("contact")),type:"button",class:"p-2 text-left border border-gray-200 rounded hover:border-purple-300 hover:bg-purple-50 transition-colors"},t[34]||(t[34]=[(0,s.Lk)("i",{class:"fas fa-address-book text-purple-600 mb-1"},null,-1),(0,s.Lk)("div",{class:"text-xs font-medium"},"Contact Form",-1),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"Name, Email, Phone",-1)])),(0,s.Lk)("button",{onClick:t[3]||(t[3]=e=>r.addTemplateFields("blog")),type:"button",class:"p-2 text-left border border-gray-200 rounded hover:border-purple-300 hover:bg-purple-50 transition-colors"},t[35]||(t[35]=[(0,s.Lk)("i",{class:"fas fa-blog text-purple-600 mb-1"},null,-1),(0,s.Lk)("div",{class:"text-xs font-medium"},"Blog Post",-1),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"Author, Category, Tags",-1)])),(0,s.Lk)("button",{onClick:t[4]||(t[4]=e=>r.addTemplateFields("news")),type:"button",class:"p-2 text-left border border-gray-200 rounded hover:border-purple-300 hover:bg-purple-50 transition-colors"},t[36]||(t[36]=[(0,s.Lk)("i",{class:"fas fa-newspaper text-purple-600 mb-1"},null,-1),(0,s.Lk)("div",{class:"text-xs font-medium"},"News Article",-1),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"Reporter, Source, Date",-1)])),(0,s.Lk)("button",{onClick:t[5]||(t[5]=e=>r.addTemplateFields("event")),type:"button",class:"p-2 text-left border border-gray-200 rounded hover:border-purple-300 hover:bg-purple-50 transition-colors"},t[37]||(t[37]=[(0,s.Lk)("i",{class:"fas fa-calendar text-purple-600 mb-1"},null,-1),(0,s.Lk)("div",{class:"text-xs font-medium"},"Event",-1),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"Date, Location, Price",-1)])),(0,s.Lk)("button",{onClick:t[6]||(t[6]=e=>r.addTemplateFields("product")),type:"button",class:"p-2 text-left border border-gray-200 rounded hover:border-purple-300 hover:bg-purple-50 transition-colors"},t[38]||(t[38]=[(0,s.Lk)("i",{class:"fas fa-shopping-bag text-purple-600 mb-1"},null,-1),(0,s.Lk)("div",{class:"text-xs font-medium"},"Product",-1),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"Price, SKU, Gallery",-1)])),(0,s.Lk)("button",{onClick:t[7]||(t[7]=e=>r.addTemplateFields("team")),type:"button",class:"p-2 text-left border border-gray-200 rounded hover:border-purple-300 hover:bg-purple-50 transition-colors"},t[39]||(t[39]=[(0,s.Lk)("i",{class:"fas fa-users text-purple-600 mb-1"},null,-1),(0,s.Lk)("div",{class:"text-xs font-medium"},"Team Member",-1),(0,s.Lk)("div",{class:"text-xs text-gray-500"},"Position, Bio, Social",-1)]))])])):(0,s.Q3)("",!0),n.localCustomFields.length>0?((0,s.uX)(),(0,s.CE)("div",Cs,[(0,s.Lk)("div",ws,[(0,s.Lk)("div",Ds,[(0,s.Lk)("span",null,[t[41]||(t[41]=(0,s.eW)("Total Fields: ")),(0,s.Lk)("strong",null,(0,o.v_)(n.localCustomFields.length),1)]),(0,s.Lk)("span",null,[t[42]||(t[42]=(0,s.eW)("Main: ")),(0,s.Lk)("strong",null,(0,o.v_)(n.localCustomFields.filter((e=>"main"===e.position)).length),1)]),(0,s.Lk)("span",null,[t[43]||(t[43]=(0,s.eW)("Sidebar: ")),(0,s.Lk)("strong",null,(0,o.v_)(n.localCustomFields.filter((e=>"sidebar"===e.position)).length),1)])]),(0,s.Lk)("div",Fs,[(0,s.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>r.exportFields&&r.exportFields(...e)),type:"button",class:"text-purple-600 hover:text-purple-700",title:"Export Fields"},t[44]||(t[44]=[(0,s.Lk)("i",{class:"fas fa-download"},null,-1)])),(0,s.Lk)("label",Ts,[t[45]||(t[45]=(0,s.Lk)("i",{class:"fas fa-upload"},null,-1)),(0,s.Lk)("input",{type:"file",accept:".json",onChange:t[9]||(t[9]=(...e)=>r.importFields&&r.importFields(...e)),class:"hidden"},null,32)])])])])):(0,s.Q3)("",!0)])])}a(72577);var Is={name:"CustomFieldsManager",props:{customFields:{type:Array,default:()=>[]}},data(){return{localCustomFields:[],editingField:null,fieldIdCounter:1}},watch:{customFields:{handler(e){JSON.stringify(e)!==JSON.stringify(this.localCustomFields)&&(this.localCustomFields=JSON.parse(JSON.stringify(e)),this.fieldIdCounter=Math.max(...e.map((e=>e.id||0)),0)+1)},deep:!0,immediate:!0}},methods:{emitUpdate(){this.$emit("update:customFields",JSON.parse(JSON.stringify(this.localCustomFields)))},addNewField(){const e={id:this.fieldIdCounter++,name:"",label:"",type:"input",position:"main",description:"",placeholder:"",defaultValue:"",required:!1,searchable:!1,options:[],validation:{unique:!1,min:null,max:null,pattern:""}};this.localCustomFields.push(e),this.editField(e.id),this.emitUpdate()},editField(e){this.editingField=e},cancelEditField(){this.editingField=null},saveField(e){const t=this.localCustomFields.find((t=>t.id===e));if(t){if(!t.name&&t.label&&(t.name=this.slugify(t.label).replace(/-/g,"_")),!t.label||!t.name)return void this.$toast?.error("กรุณากรอก Label และ Field Name");const a=this.localCustomFields.find((a=>a.id!==e&&a.name===t.name));if(a)return void this.$toast?.error("Field Name ซ้ำกัน กรุณาใช้ชื่ออื่น")}this.editingField=null,this.emitUpdate(),this.$toast?.success("บันทึก Field สำเร็จ")},deleteField(e){this.$swal({title:"ลบ Field นี้?",text:"การกระทำนี้ไม่สามารถย้อนกลับได้",type:"warning",showCancelButton:!0,confirmButtonText:"ลบ",cancelButtonText:"ยกเลิก",confirmButtonColor:"#ef4444"}).then((t=>{t.isConfirmed&&(this.localCustomFields=this.localCustomFields.filter((t=>t.id!==e)),this.emitUpdate(),this.$toast?.success("ลบ Field สำเร็จ"))}))},duplicateField(e){const t=this.localCustomFields.find((t=>t.id===e));if(t){const e={...JSON.parse(JSON.stringify(t)),id:this.fieldIdCounter++,name:t.name+"_copy",label:t.label+" (Copy)"};this.localCustomFields.push(e),this.emitUpdate(),this.$toast?.success("คัดลอก Field สำเร็จ")}},moveField(e,t){if(t<0||t>=this.localCustomFields.length)return;const a=this.localCustomFields.splice(e,1)[0];this.localCustomFields.splice(t,0,a),this.emitUpdate()},addOption(e){const t=this.localCustomFields.find((t=>t.id===e));t&&(t.options||(t.options=[]),t.options.push({value:"",label:""}),this.emitUpdate())},removeOption(e,t){const a=this.localCustomFields.find((t=>t.id===e));a&&a.options&&(a.options.splice(t,1),this.emitUpdate())},getFieldIcon(e){const t={input:"fas fa-font",textarea:"fas fa-align-left",datetime:"fas fa-calendar-alt",radio:"fas fa-dot-circle",checkbox:"fas fa-check-square",image:"fas fa-image"};return t[e]||"fas fa-question"},getFieldTypeLabel(e){const t={input:"Text Input",textarea:"Textarea",datetime:"Date/Time",radio:"Radio Buttons",checkbox:"Checkbox",image:"Image Upload"};return t[e]||e},addTemplateFields(e){const t={contact:[{id:this.fieldIdCounter++,name:"full_name",label:"ชื่อ-นามสกุล",type:"input",position:"main",required:!0,placeholder:"กรอกชื่อ-นามสกุล"},{id:this.fieldIdCounter++,name:"email",label:"อีเมล",type:"input",position:"main",required:!0,placeholder:"example@email.com"},{id:this.fieldIdCounter++,name:"phone",label:"เบอร์โทรศัพท์",type:"input",position:"sidebar",placeholder:"0XX-XXX-XXXX"}],blog:[{id:this.fieldIdCounter++,name:"author",label:"ผู้เขียน",type:"input",position:"sidebar",required:!0,placeholder:"ชื่อผู้เขียน"},{id:this.fieldIdCounter++,name:"category",label:"หมวดหมู่",type:"radio",position:"sidebar",required:!0,options:[{value:"technology",label:"เทคโนโลยี"},{value:"lifestyle",label:"ไลฟ์สไตล์"},{value:"business",label:"ธุรกิจ"},{value:"education",label:"การศึกษา"},{value:"health",label:"สุขภาพ"}]},{id:this.fieldIdCounter++,name:"tags",label:"แท็ก",type:"input",position:"sidebar",placeholder:"แยกด้วยเครื่องหมายจุลภาค",description:"แท็กสำหรับการค้นหาและจัดหมวดหมู่"},{id:this.fieldIdCounter++,name:"excerpt",label:"บทสรุป",type:"textarea",position:"main",placeholder:"เขียนบทสรุปสั้นๆ ของบทความ...",description:"ข้อความสรุปที่จะแสดงในหน้ารายการบทความ"},{id:this.fieldIdCounter++,name:"reading_time",label:"เวลาอ่าน (นาที)",type:"input",position:"sidebar",placeholder:"5",description:"ระยะเวลาโดยประมาณในการอ่านบทความ"},{id:this.fieldIdCounter++,name:"featured_image_alt",label:"คำอธิบายรูปภาพหลัก",type:"input",position:"main",placeholder:"อธิบายเนื้อหาของรูปภาพ",description:"สำหรับการเข้าถึงและ SEO"}],news:[{id:this.fieldIdCounter++,name:"reporter",label:"ผู้สื่อข่าว",type:"input",position:"sidebar",required:!0,placeholder:"ชื่อผู้สื่อข่าว"},{id:this.fieldIdCounter++,name:"news_source",label:"แหล่งข่าว",type:"input",position:"sidebar",placeholder:"หน่วยงาน หรือ บริษัท",description:"แหล่งที่มาของข่าว"},{id:this.fieldIdCounter++,name:"publish_date",label:"วันที่เผยแพร่",type:"datetime",position:"sidebar",required:!0,description:"วันที่และเวลาที่ต้องการเผยแพร่ข่าว"},{id:this.fieldIdCounter++,name:"news_category",label:"ประเภทข่าว",type:"radio",position:"sidebar",required:!0,options:[{value:"breaking",label:"ข่าวด่วน"},{value:"politics",label:"การเมือง"},{value:"economy",label:"เศรษฐกิจ"},{value:"society",label:"สังคม"},{value:"sports",label:"กีฬา"},{value:"entertainment",label:"บันเทิง"}]},{id:this.fieldIdCounter++,name:"location",label:"สถานที่เกิดเหตุ",type:"input",position:"main",placeholder:"จังหวัด หรือ พื้นที่ที่เกิดเหตุการณ์"},{id:this.fieldIdCounter++,name:"urgency_level",label:"ระดับความสำคัญ",type:"radio",position:"sidebar",options:[{value:"low",label:"ต่ำ"},{value:"medium",label:"ปานกลาง"},{value:"high",label:"สูง"},{value:"urgent",label:"เร่งด่วน"}],defaultValue:"medium"},{id:this.fieldIdCounter++,name:"related_links",label:"ลิงก์ที่เกี่ยวข้อง",type:"textarea",position:"main",placeholder:"URL ของข่าวที่เกี่ยวข้อง (แยกด้วย Enter)",description:"ลิงก์ไปยังข่าวหรือเอกสารที่เกี่ยวข้อง"}],event:[{id:this.fieldIdCounter++,name:"event_date",label:"วันที่จัดงาน",type:"datetime",position:"main",required:!0},{id:this.fieldIdCounter++,name:"location",label:"สถานที่",type:"input",position:"main",placeholder:"สถานที่จัดงาน"},{id:this.fieldIdCounter++,name:"price",label:"ราคาบัตร",type:"input",position:"sidebar",placeholder:"0.00"}],product:[{id:this.fieldIdCounter++,name:"price",label:"ราคา",type:"input",position:"sidebar",required:!0,placeholder:"0.00"},{id:this.fieldIdCounter++,name:"sku",label:"รหัสสินค้า",type:"input",position:"sidebar",placeholder:"SKU-001"},{id:this.fieldIdCounter++,name:"gallery",label:"แกลเลอรี่",type:"image",position:"main"}],team:[{id:this.fieldIdCounter++,name:"position",label:"ตำแหน่ง",type:"input",position:"sidebar",placeholder:"ตำแหน่งงาน"},{id:this.fieldIdCounter++,name:"bio",label:"ประวัติ",type:"textarea",position:"main",placeholder:"เล่าเกี่ยวกับตัวเอง..."},{id:this.fieldIdCounter++,name:"social_links",label:"Social Media",type:"textarea",position:"sidebar",placeholder:"Facebook, Twitter, LinkedIn..."}]};if(t[e]){const a=t[e].map((e=>({...e,description:e.description||"",defaultValue:e.defaultValue||"",searchable:!1,options:e.options||[],validation:{unique:!1,min:null,max:null,pattern:""}})));this.localCustomFields.push(...a),this.emitUpdate(),this.$toast?.success(`เพิ่ม ${this.getTemplateLabel(e)} template สำเร็จ`)}},getTemplateLabel(e){const t={contact:"Contact Form",blog:"Blog Post",news:"News Article",event:"Event",product:"Product",team:"Team Member"};return t[e]||e},exportFields(){const e={timestamp:(new Date).toISOString(),fields:this.localCustomFields,metadata:{version:"1.0",type:"custom-fields"}},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`custom-fields-${Date.now()}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),this.$toast?.success("ส่งออก Fields สำเร็จ")},importFields(e){const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=e=>{try{const t=JSON.parse(e.target.result);if(t.fields&&Array.isArray(t.fields)){const e=t.fields.map((e=>({...e,id:this.fieldIdCounter++})));this.localCustomFields.push(...e),this.emitUpdate(),this.$toast?.success(`นำเข้า ${e.length} fields สำเร็จ`)}else this.$toast?.error("รูปแบบไฟล์ไม่ถูกต้อง")}catch(t){console.error("Import error:",t),this.$toast?.error("เกิดข้อผิดพลาดในการนำเข้า")}},a.readAsText(t),e.target.value=""},slugify(e){if(!e||"string"!==typeof e)return"";e=e.trim().toLowerCase();for(var t="àáãäâèéëêìíïîòóöôùúüûñç·/_,:;",a="aaaaaeeeeiiiioooouuuunc------",s=0,o=t.length;s<o;s++)e=e.replace(new RegExp(t.charAt(s),"g"),a.charAt(s));e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");var l=e.lastIndexOf(".");return-1!==l&&(e=e.substring(0,l)),e}},emits:["update:customFields"]};const Es=(0,ee.A)(Is,[["render",Ss]]);var Ps=Es;const Us={key:0,class:"bg-white shadow-sm rounded-md border border-gray-200"},$s={class:"p-3"},As={class:"flex items-center justify-between mb-3"},Os={class:"text-xs text-gray-500"},Bs={key:0,class:"flex items-center justify-center py-8"},_s={key:1,class:"text-center py-8 text-red-600"},Vs={class:"text-sm"},Xs={key:2,class:"text-center py-8 text-gray-500"},Ms={key:3,class:"space-y-4"},js={key:0},Rs={class:"space-y-3"},qs=["for"],Qs={key:0,class:"text-red-500"},Ks={key:0,class:"text-xs text-gray-500 mb-1"},Ns=["id","onUpdate:modelValue","placeholder","required"],Ws=["id","onUpdate:modelValue","placeholder","required"],Js=["id","onUpdate:modelValue","required"],Hs={key:4,class:"space-y-1"},zs=["name","value","onUpdate:modelValue","required"],Gs={class:"text-xs text-gray-700"},Ys={key:5,class:"flex items-center gap-2 p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors cursor-pointer"},Zs=["id","onUpdate:modelValue"],eo={class:"text-xs text-gray-700"},to={key:6,class:"space-y-2"},ao={class:"flex items-center gap-2"},so=["id","onUpdate:modelValue","placeholder"],oo=["onClick"],lo={key:0,class:"relative w-32 h-20 bg-gray-100 rounded overflow-hidden"},io=["src","alt"],no=["onClick"],ro={key:7,class:"text-xs text-red-600 mt-1"},co={key:1,class:"pt-4 border-t border-gray-200"},uo={class:"space-y-3"},po=["for"],mo={key:0,class:"text-red-500"},go={key:0,class:"text-xs text-gray-500 mb-1"},ho=["id","onUpdate:modelValue","placeholder","required"],yo=["id","onUpdate:modelValue","placeholder","required"],bo=["id","onUpdate:modelValue","required"],xo={key:4,class:"space-y-1"},fo=["name","value","onUpdate:modelValue","required"],ko={class:"text-xs text-gray-700"},vo={key:5,class:"flex items-center gap-2 p-1.5 bg-gray-50 rounded hover:bg-gray-100 transition-colors cursor-pointer"},Lo=["id","onUpdate:modelValue"],Co={class:"text-xs text-gray-700"},wo={key:6,class:"space-y-2"},Do={class:"flex items-center gap-2"},Fo=["id","onUpdate:modelValue","placeholder"],To=["onClick"],So={key:0,class:"relative w-24 h-16 bg-gray-100 rounded overflow-hidden"},Io=["src","alt"],Eo=["onClick"],Po={key:7,class:"text-xs text-red-600 mt-1"},Uo={class:"pt-4 border-t border-gray-200"},$o={class:"flex items-center justify-between text-xs text-gray-600"};function Ao(e,t,a,i,n,r){return r.shouldShowCustomFields?((0,s.uX)(),(0,s.CE)("div",Us,[(0,s.Lk)("div",$s,[(0,s.Lk)("div",As,[t[13]||(t[13]=(0,s.Lk)("h2",{class:"text-sm font-semibold text-gray-900"},[(0,s.Lk)("i",{class:"fas fa-clipboard-list text-blue-600 mr-2"}),(0,s.eW)(" ข้อมูลเพิ่มเติม ")],-1)),(0,s.Lk)("div",Os,(0,o.v_)(n.customFields.length)+" fields ",1)]),n.loading?((0,s.uX)(),(0,s.CE)("div",Bs,t[14]||(t[14]=[(0,s.Lk)("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),(0,s.Lk)("span",{class:"ml-3 text-sm text-gray-600"},"กำลังโหลดฟิลด์...",-1)]))):n.error?((0,s.uX)(),(0,s.CE)("div",_s,[t[15]||(t[15]=(0,s.Lk)("i",{class:"fas fa-exclamation-triangle text-2xl mb-2"},null,-1)),(0,s.Lk)("p",Vs,(0,o.v_)(n.error),1)])):0===n.customFields.length?((0,s.uX)(),(0,s.CE)("div",Xs,t[16]||(t[16]=[(0,s.Lk)("i",{class:"fas fa-inbox text-3xl mb-3 text-gray-300"},null,-1),(0,s.Lk)("p",{class:"text-sm"},"ไม่มีฟิลด์เพิ่มเติม",-1),(0,s.Lk)("p",{class:"text-xs mt-1"},"หน้าหลักยังไม่ได้กำหนด Custom Fields",-1)]))):((0,s.uX)(),(0,s.CE)("div",Ms,[r.mainFields.length>0?((0,s.uX)(),(0,s.CE)("div",js,[t[19]||(t[19]=(0,s.Lk)("h3",{class:"text-xs font-medium text-gray-700 mb-3"},"ข้อมูลหลัก",-1)),(0,s.Lk)("div",Rs,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.mainFields,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"space-y-1"},[(0,s.Lk)("label",{for:`field_${e.id}`,class:"block text-xs font-medium text-gray-700"},[(0,s.eW)((0,o.v_)(e.label)+" ",1),e.required?((0,s.uX)(),(0,s.CE)("span",Qs,"*")):(0,s.Q3)("",!0)],8,qs),e.description?((0,s.uX)(),(0,s.CE)("p",Ks,(0,o.v_)(e.description),1)):(0,s.Q3)("",!0),"input"===e.type?(0,s.bo)(((0,s.uX)(),(0,s.CE)("input",{key:1,id:`field_${e.id}`,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,type:"text",placeholder:e.placeholder,required:e.required,class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs",onInput:t[0]||(t[0]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,Ns)),[[l.Jo,n.localCustomData[e.name]]]):"textarea"===e.type?(0,s.bo)(((0,s.uX)(),(0,s.CE)("textarea",{key:2,id:`field_${e.id}`,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,placeholder:e.placeholder,required:e.required,rows:"3",class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs resize-none",onInput:t[1]||(t[1]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,Ws)),[[l.Jo,n.localCustomData[e.name]]]):"datetime"===e.type?(0,s.bo)(((0,s.uX)(),(0,s.CE)("input",{key:3,id:`field_${e.id}`,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,type:"datetime-local",required:e.required,class:"block w-full rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs",onInput:t[2]||(t[2]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,Js)),[[l.Jo,n.localCustomData[e.name]]]):"radio"===e.type?((0,s.uX)(),(0,s.CE)("div",Hs,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.options,(a=>((0,s.uX)(),(0,s.CE)("label",{key:a.value,class:"flex items-center gap-2 p-2 bg-gray-50 rounded hover:bg-gray-100 transition-colors cursor-pointer"},[(0,s.bo)((0,s.Lk)("input",{name:`field_${e.id}`,value:a.value,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,type:"radio",required:e.required,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600",onChange:t[3]||(t[3]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,zs),[[l.XL,n.localCustomData[e.name]]]),(0,s.Lk)("span",Gs,(0,o.v_)(a.label),1)])))),128))])):"checkbox"===e.type?((0,s.uX)(),(0,s.CE)("label",Ys,[(0,s.bo)((0,s.Lk)("input",{id:`field_${e.id}`,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600",onChange:t[4]||(t[4]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,Zs),[[l.lH,n.localCustomData[e.name]]]),(0,s.Lk)("span",eo,(0,o.v_)(e.label),1)])):"image"===e.type?((0,s.uX)(),(0,s.CE)("div",to,[(0,s.Lk)("div",ao,[(0,s.bo)((0,s.Lk)("input",{id:`field_${e.id}`,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,type:"text",placeholder:e.placeholder||"URL รูปภาพ",class:"flex-1 rounded border border-gray-300 py-1.5 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs",onInput:t[5]||(t[5]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,so),[[l.Jo,n.localCustomData[e.name]]]),(0,s.Lk)("button",{onClick:t=>r.openImageBrowser(e.name),type:"button",class:"px-3 py-1.5 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 transition-colors"},t[17]||(t[17]=[(0,s.Lk)("i",{class:"fas fa-image"},null,-1)]),8,oo)]),n.localCustomData[e.name]?((0,s.uX)(),(0,s.CE)("div",lo,[(0,s.Lk)("img",{src:n.localCustomData[e.name],alt:e.label,class:"w-full h-full object-cover"},null,8,io),(0,s.Lk)("button",{onClick:t=>{n.localCustomData[e.name]="",r.emitUpdate()},class:"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors"},t[18]||(t[18]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]),8,no)])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),n.fieldErrors[e.name]?((0,s.uX)(),(0,s.CE)("p",ro,(0,o.v_)(n.fieldErrors[e.name]),1)):(0,s.Q3)("",!0)])))),128))])])):(0,s.Q3)("",!0),r.sidebarFields.length>0?((0,s.uX)(),(0,s.CE)("div",co,[t[22]||(t[22]=(0,s.Lk)("h3",{class:"text-xs font-medium text-gray-700 mb-3"},"ข้อมูลเพิ่มเติม",-1)),(0,s.Lk)("div",uo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(r.sidebarFields,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"space-y-1"},[(0,s.Lk)("label",{for:`field_${e.id}`,class:"block text-xs font-medium text-gray-700"},[(0,s.eW)((0,o.v_)(e.label)+" ",1),e.required?((0,s.uX)(),(0,s.CE)("span",mo,"*")):(0,s.Q3)("",!0)],8,po),e.description?((0,s.uX)(),(0,s.CE)("p",go,(0,o.v_)(e.description),1)):(0,s.Q3)("",!0),"input"===e.type?(0,s.bo)(((0,s.uX)(),(0,s.CE)("input",{key:1,id:`field_${e.id}`,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,type:"text",placeholder:e.placeholder,required:e.required,class:"block w-full rounded border border-gray-300 py-1 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs",onInput:t[6]||(t[6]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,ho)),[[l.Jo,n.localCustomData[e.name]]]):"textarea"===e.type?(0,s.bo)(((0,s.uX)(),(0,s.CE)("textarea",{key:2,id:`field_${e.id}`,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,placeholder:e.placeholder,required:e.required,rows:"2",class:"block w-full rounded border border-gray-300 py-1 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs resize-none",onInput:t[7]||(t[7]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,yo)),[[l.Jo,n.localCustomData[e.name]]]):"datetime"===e.type?(0,s.bo)(((0,s.uX)(),(0,s.CE)("input",{key:3,id:`field_${e.id}`,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,type:"datetime-local",required:e.required,class:"block w-full rounded border border-gray-300 py-1 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs",onInput:t[8]||(t[8]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,bo)),[[l.Jo,n.localCustomData[e.name]]]):"radio"===e.type?((0,s.uX)(),(0,s.CE)("div",xo,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.options,(a=>((0,s.uX)(),(0,s.CE)("label",{key:a.value,class:"flex items-center gap-2 p-1.5 bg-gray-50 rounded hover:bg-gray-100 transition-colors cursor-pointer"},[(0,s.bo)((0,s.Lk)("input",{name:`field_${e.id}`,value:a.value,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,type:"radio",required:e.required,class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600",onChange:t[9]||(t[9]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,fo),[[l.XL,n.localCustomData[e.name]]]),(0,s.Lk)("span",ko,(0,o.v_)(a.label),1)])))),128))])):"checkbox"===e.type?((0,s.uX)(),(0,s.CE)("label",vo,[(0,s.bo)((0,s.Lk)("input",{id:`field_${e.id}`,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,type:"checkbox",class:"rounded border-gray-300 text-blue-600 focus:ring-blue-600",onChange:t[10]||(t[10]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,Lo),[[l.lH,n.localCustomData[e.name]]]),(0,s.Lk)("span",Co,(0,o.v_)(e.label),1)])):"image"===e.type?((0,s.uX)(),(0,s.CE)("div",wo,[(0,s.Lk)("div",Do,[(0,s.bo)((0,s.Lk)("input",{id:`field_${e.id}`,"onUpdate:modelValue":t=>n.localCustomData[e.name]=t,type:"text",placeholder:e.placeholder||"URL รูปภาพ",class:"flex-1 rounded border border-gray-300 py-1 px-2 shadow-sm focus:border-blue-600 focus:outline-none focus:ring-1 focus:ring-blue-600 text-xs",onInput:t[11]||(t[11]=(...e)=>r.emitUpdate&&r.emitUpdate(...e))},null,40,Fo),[[l.Jo,n.localCustomData[e.name]]]),(0,s.Lk)("button",{onClick:t=>r.openImageBrowser(e.name),type:"button",class:"px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700 transition-colors"},t[20]||(t[20]=[(0,s.Lk)("i",{class:"fas fa-image"},null,-1)]),8,To)]),n.localCustomData[e.name]?((0,s.uX)(),(0,s.CE)("div",So,[(0,s.Lk)("img",{src:n.localCustomData[e.name],alt:e.label,class:"w-full h-full object-cover"},null,8,Io),(0,s.Lk)("button",{onClick:t=>{n.localCustomData[e.name]="",r.emitUpdate()},class:"absolute top-0.5 right-0.5 w-4 h-4 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors"},t[21]||(t[21]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]),8,Eo)])):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0),n.fieldErrors[e.name]?((0,s.uX)(),(0,s.CE)("p",Po,(0,o.v_)(n.fieldErrors[e.name]),1)):(0,s.Q3)("",!0)])))),128))])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Uo,[(0,s.Lk)("div",$o,[(0,s.Lk)("span",null,[t[23]||(t[23]=(0,s.eW)("ข้อมูลที่กรอก: ")),(0,s.Lk)("strong",null,(0,o.v_)(Object.keys(n.localCustomData).filter((e=>n.localCustomData[e])).length)+"/"+(0,o.v_)(n.customFields.length),1)]),(0,s.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>r.validateAllFields&&r.validateAllFields(...e)),type:"button",class:"text-blue-600 hover:text-blue-700"},t[24]||(t[24]=[(0,s.Lk)("i",{class:"fas fa-check-circle mr-1"},null,-1),(0,s.eW)(" ตรวจสอบข้อมูล ")]))])])]))])])):(0,s.Q3)("",!0)}var Oo={name:"CustomFieldRenderer",props:{type:{type:String,default:"page",validator:e=>["page","post"].includes(e)},parentId:{type:String,default:""},parentData:{type:Object,default:()=>({})},customData:{type:Object,default:()=>({})},configs:{type:Object,required:!0}},data(){return{loading:!1,error:null,customFields:[],localCustomData:{...this.customData},fieldErrors:{},currentImageField:null}},computed:{shouldShowCustomFields(){return"post"===this.type&&(this.parentId||this.parentData._id)},mainFields(){return this.customFields.filter((e=>"main"===e.position))},sidebarFields(){return this.customFields.filter((e=>"sidebar"===e.position))}},watch:{parentId:{handler(e){e&&this.shouldShowCustomFields&&this.loadParentCustomFields()},immediate:!0},parentData:{handler(e){e&&e.customFields&&this.shouldShowCustomFields&&(this.customFields=e.customFields||[],this.initializeCustomData())},deep:!0,immediate:!0},customData:{handler(e){this.localCustomData={...e}},deep:!0}},methods:{async loadParentCustomFields(){if(this.parentId&&this.shouldShowCustomFields){this.loading=!0,this.error=null;try{console.log("Loading parent custom fields for ID:",this.parentId);const{data:e}=await this.$Request.GET(`post/${this.parentId}`,this.configs.key);e&&e.customFields?(this.customFields=e.customFields,this.initializeCustomData(),console.log("Loaded custom fields:",this.customFields)):(this.customFields=[],console.log("No custom fields found in parent"))}catch(e){console.error("Error loading parent custom fields:",e),this.error="ไม่สามารถโหลดฟิลด์เพิ่มเติมได้",this.customFields=[]}finally{this.loading=!1}}},initializeCustomData(){this.customFields.forEach((e=>{e.name in this.localCustomData||("checkbox"===e.type?this.localCustomData[e.name]=!1:e.defaultValue?this.localCustomData[e.name]=e.defaultValue:this.localCustomData[e.name]="")})),this.emitUpdate()},emitUpdate(){this.$emit("update:customData",{...this.localCustomData})},validateAllFields(){this.fieldErrors={};let e=!1;return this.customFields.forEach((t=>{const a=this.localCustomData[t.name];if(t.required&&(!a||"string"===typeof a&&""===a.trim())&&(this.fieldErrors[t.name]=`${t.label} จำเป็นต้องกรอก`,e=!0),t.validation&&t.validation.unique,t.validation&&a&&(t.validation.min&&a.length<t.validation.min&&(this.fieldErrors[t.name]=`${t.label} ต้องมีอย่างน้อย ${t.validation.min} ตัวอักษร`,e=!0),t.validation.max&&a.length>t.validation.max&&(this.fieldErrors[t.name]=`${t.label} ต้องไม่เกิน ${t.validation.max} ตัวอักษร`,e=!0)),t.validation&&t.validation.pattern&&a){const s=new RegExp(t.validation.pattern);s.test(a)||(this.fieldErrors[t.name]=`${t.label} รูปแบบไม่ถูกต้อง`,e=!0)}})),e?this.$toast?.error("กรุณาตรวจสอบข้อมูลที่กรอก"):this.$toast?.success("ข้อมูลถูกต้องทั้งหมด"),!e},openImageBrowser(e){this.currentImageField=e,this.$emit("openImageBrowser",e)},handleImageSelected(e){this.currentImageField&&(this.localCustomData[this.currentImageField]=e,this.emitUpdate(),this.currentImageField=null)},validate(){return this.validateAllFields()},getValidationStatus(){const e=this.customFields.filter((e=>e.required)),t=e.filter((e=>{const t=this.localCustomData[e.name];return t&&("string"!==typeof t||""!==t.trim())}));return{isValid:e.length===t.length,totalRequired:e.length,filledRequired:t.length,totalFields:this.customFields.length,filledFields:Object.keys(this.localCustomData).filter((e=>this.localCustomData[e])).length}}},mounted(){console.log("CustomFieldRenderer mounted:",{type:this.type,parentId:this.parentId,shouldShow:this.shouldShowCustomFields}),this.shouldShowCustomFields&&(this.parentData&&this.parentData.customFields?(this.customFields=this.parentData.customFields,this.initializeCustomData()):this.parentId&&this.loadParentCustomFields())},emits:["update:customData","openImageBrowser"]};const Bo=(0,ee.A)(Oo,[["render",Ao]]);var _o=Bo,Vo={name:"ContentFormMain",components:{CustomFieldsManager:Ps,CustomFieldRenderer:_o},props:{title:{type:String,default:""},slug:{type:String,default:""},isEditing:{type:Boolean,default:!1},hostname:{type:String,default:""},parentSlug:{type:String,default:""},contentType:{type:String,default:"page"},display:{type:String,default:"single"},isPostType:{type:Boolean,default:!1},isComment:{type:Boolean,default:!1},isCounter:{type:Boolean,default:!1},isMenu:{type:Boolean,default:!1},seoImage:{type:String,default:""},seoTitle:{type:String,default:""},seoDescription:{type:String,default:""},seoKeywords:{type:Array,default:()=>[]},action:{type:String,default:"standard"},destination:{type:String,default:"database"},next:{type:String,default:""},postId:{type:String,default:""},customFields:{type:Array,default:()=>[]},customData:{type:Object,default:()=>({})},parentId:{type:String,default:""},parentData:{type:Object,default:()=>({})},configs:{type:Object,required:!0},type:{type:String,default:"page"}},data(){return{newKeyword:"",localTitle:this.title,localSlug:this.slug,localContentType:this.contentType,localDisplay:this.display,localIsPostType:this.isPostType,localIsComment:this.isComment,localIsCounter:this.isCounter,localIsMenu:this.isMenu,localSeoTitle:this.seoTitle,localSeoDescription:this.seoDescription,localAction:this.action,localDestination:this.destination,localNext:this.next}},watch:{title(e){this.localTitle=e},slug(e){this.localSlug=e},contentType(e){this.localContentType=e},display(e){this.localDisplay=e},isComment(e){this.localIsComment=e},isCounter(e){this.localIsCounter=e},isMenu(e){this.localIsMenu=e},seoTitle(e){this.localSeoTitle=e},seoDescription(e){this.localSeoDescription=e},action(e){this.localAction=e},destination(e){this.localDestination=e},next(e){this.localNext=e},isPostType(e){this.localIsPostType=e}},methods:{handleCheckboxChange(e,t){this[`local${e.charAt(0).toUpperCase()+e.slice(1)}`]=t,this.$emit(`update:${e}`,t)},slugify(e){if(!e||"string"!==typeof e)return"";e=e.trim().toLowerCase();for(var t="àáãäâèéëêìíïîòóöôùúüûñç·/_,:;",a="aaaaaeeeeiiiioooouuuunc------",s=0,o=t.length;s<o;s++)e=e.replace(new RegExp(t.charAt(s),"g"),a.charAt(s));e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");var l=e.lastIndexOf(".");return-1!==l&&(e=e.substring(0,l)),e},markDirty(){console.log("Content marked as dirty")}},emits:["update:title","onTitleInput","onTitleBlur","edit:slug","update:slug","updateSlug","handleSlugInput","update:contentType","update:display","update:isComment","update:isCounter","update:isMenu","openSEOFileBrowser","update:seoTitle","update:seoDescription","removeKeyword","addKeyword","update:action","update:destination","update:next","update:customFields","update:customData","openCustomImageBrowser"]};const Xo=(0,ee.A)(Vo,[["render",Da]]);var Mo=Xo,jo={name:"Edit",props:{mode:{type:String,default:"add",validator:e=>["add","edit"].includes(e)},type:{type:String,default:"page",validator:e=>["page","post"].includes(e)},initialData:{type:Object,default:()=>({})}},inject:["apiServer"],data(){const e=k.A.get("configs"),t=e,a=new L.S3({forcePathStyle:!1,endpoint:t.s3EndpointDefault,region:t.s3Region,ResponseContentEncoding:"utf-8",credentials:{accessKeyId:t.s3Key,secretAccessKey:t.s3Secret}});return{S3:a,schoolSession:t,dataItem:this.$route.params.id,configs:k.A.get("configs"),session:k.A.get("session"),parentData:"",postData:"edit"===this.mode?this.initialData:{title:"",slug:"",pageID:"",content:"",display:"",type:"",next:"",course:"",action:"",isComment:"",isCounter:"",isMenu:"",password:"",status:"",isTemplate:"",authen:"",parent:"",destination:"",feature_image:"",owner:"",builder:[],useAdminPage:!1,adminPassword:"",enableAnalytics:!1,enableExport:!1,seo:{title:"",description:"",keywords:[],image:""},layout:"standard",customFields:[],customData:{}},activeBlock:!1,editing:void 0,FileBrowserOpen:!1,SEOFileBrowserOpen:!1,CustomImageBrowserOpen:!1,destination:"form",defaultCollectionOptions:["form","message"],defaultFormActions:["standard","course"],defaultFormNext:["standard","course","order"],parentList:[],searchTerm:"",showDropdown:!1,isPasswordModalOpen:!1,newKeyword:"",mceOptions:{image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:e=>this.customFilePickerCallback(e),content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"},redirectLink:"",slugDebounceTimer:null,sidebarStats:{total:0,published:0,draft:0,favorites:0},recentActivities:[{id:1,type:"edit",title:'แก้ไข "หน้าแรก"',time:"2 นาทีที่แล้ว",icon:"fas fa-edit",iconColor:"text-blue-600",bgColor:"bg-blue-100"},{id:2,type:"create",title:'สร้าง "เกี่ยวกับเรา"',time:"1 ชั่วโมงที่แล้ว",icon:"fas fa-plus",iconColor:"text-green-600",bgColor:"bg-green-100"}],systemStatus:{storage:{used:2.4,total:10,percentage:24},connection:"normal",lastSync:"เมื่อไม่นานนี้"},quickFilters:{published:24,draft:8,favorites:5,recent:12},isMobileSidebarOpen:!1,contentAnalytics:{readingTime:0,wordCount:0,charCount:0,seoScore:0,readabilityScore:0,socialPreview:{facebook:"",twitter:"",linkedin:""}},contentTags:[],newTag:"",contentCategories:["general","news","blog","product","service"],selectedCategory:"general",contentStatus:"draft",relatedContent:[],contentValidation:{hasTitle:!1,hasSlug:!1,hasContent:!1,hasImage:!1,hasSEO:!1,score:0},contentSchedule:{isScheduled:!1,publishDate:"",unpublishDate:""},socialSharing:{facebook:!0,twitter:!0,linkedin:!1,pinterest:!1},analyticsData:{totalViews:0,uniqueVisitors:0,avgTimeOnPage:"0:00",bounceRate:"0%",sources:{google:0,direct:0,social:0},devices:{desktop:0,mobile:0,tablet:0},peakHours:"กำลังวิเคราะห์..."},showDetailedAnalytics:!1,exportDataType:"analytics",exportFormats:{csv:!1,excel:!1}}},components:{Subhead:f.A,FileBrowser:v.A,ContentLeftSidebar:ae,ContentRightSidebar:Ge,ContentFormMain:Mo},computed:{filteredParentList(){return this.parentList.filter((e=>e.name.toLowerCase().includes(this.searchTerm.toLowerCase())))},pageTitle(){if("add"===this.mode)return"เพิ่มเนื้อหาใหม่";if("edit"===this.mode){if("page"===this.postData.type)return`${this.postData.title}`;if("post"===this.postData.type)return`${this.parentData?.title||""} / ${this.postData.title}`}return this.postData.title}},methods:{togglePasswordModal(){this.isPasswordModalOpen=!this.isPasswordModalOpen},resetPassword(){this.postData.password="",this.isPasswordModalOpen=!1},generateRandomPassword(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*";let t="";for(let a=0;a<8;a++)t+=e.charAt(Math.floor(Math.random()*e.length));this.postData.useAdminPage&&this.postData.usePassword?this.postData.adminPassword=t:(this.postData.password=t,this.postData.usePassword=!0)},customFilePickerCallback(e){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.onchange=async()=>{var a=t.files[0],s=new FileReader;s.onload=async function(){},s.readAsDataURL(a);const o=a.name.split("."),l=o[o.length-1],i=this.slugify(a.name),n={Bucket:this.schoolSession.s3Bucket,Key:"upload/"+a.name,Body:a,ACL:"public-read"};try{const t=await this.S3.send(new C.w(n));a.status=!0,a.outputLink=this.schoolSession.s3Endpoint+"upload/"+i+"."+l,e(a.outputLink,{title:a.name}),console.log("Success",a.outputLink,t)}catch(r){console.error("Error uploading file:",r)}},t.click()},openFileManager(){this.showFileManagerModal=!0},closeFileManager(){this.showFileManagerModal=!1},selectFile(e){this.filePickerCallback&&this.filePickerCallback(e.url,{text:e.url,title:e.name}),this.closeFileManager()},slugify(e){if(!e||"string"!==typeof e)return"";e=e.trim().toLowerCase();for(var t="àáãäâèéëêìíïîòóöôùúüûñç·/_,:;",a="aaaaaeeeeiiiioooouuuunc------",s=0,o=t.length;s<o;s++)e=e.replace(new RegExp(t.charAt(s),"g"),a.charAt(s));e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");var l=e.lastIndexOf(".");return-1!==l&&(e=e.substring(0,l)),e},async checkSlugExists(e){console.log("Session",this.session.current._id);try{const t={method:"find",args:[{$and:[{owner:this.session.current._id},{slug:e}]}]},{data:a}=await this.$Request.POST("post/query",t,this.configs.key);return a.length>0}catch(t){return console.log(t),!1}},updateSlug(){const e=this.slugify(this.postData.slug);let t=1;const a=async e=>{const s=await this.checkSlugExists(e);s?(e=`${e}-${t}`,t++,a(e)):(console.log("Slug is available",e),this.postData.slug=e,this.editing=!1)};a(e)},debouncedSlugUpdate(){this.slugDebounceTimer&&clearTimeout(this.slugDebounceTimer),this.slugDebounceTimer=setTimeout((()=>{this.updateSlug()}),1e3)},handleSlugInput(){this.editing&&this.debouncedSlugUpdate()},onTitleInput(){let e=this.slugify(this.postData.title),t=1;const a=async e=>{const s=await this.checkSlugExists(e);s?(e=`${e}-${t}`,t++,a(e)):(console.log("Slug is available",e),this.postData.slug=e)};a(e)},OpenFileBrowser(e){this.selectedSlideItemIndex=e,this.FileBrowserOpen=!0},changeFileTrigger(e){this.FileBrowserOpen=e},OpenSEOFileBrowser(e){this.selectedSlideItemIndex=e,this.SEOFileBrowserOpen=!0},changeSEOFileTrigger(e){this.SEOFileBrowserOpen=e},selectSEOFileTrigger(e){console.log("selectSEOFileTrigger"),void 0!=e&&(this.selectSeoCover=e,console.log("selectFileReturnFunction",e.file),this.postData.seo.image=e.file,this.selectedSlideItemIndex=void 0)},selectFileTrigger(e){console.log("selectFileTrigger"),void 0!=e&&(this.selectCourseCover=e,console.log("selectFileReturnFunction",e.file),this.postData.feature_image=e.file,this.selectedSlideItemIndex=void 0)},selectParent(e){console.log("Selected parent:",e),this.postData.parent=e,this.showDropdown=!1},addKeyword(){const e=this.newKeyword.trim();e&&!this.postData.seo.keywords.includes(e)&&this.postData.seo.keywords.push(e),this.newKeyword=""},removeKeyword(e){this.postData.seo.keywords.splice(e,1)},async getPost(){try{if(console.log("Getting post data for ID:",this.dataItem),!this.dataItem)throw new Error("Post ID is missing");const{data:e}=await this.$Request.GET(`post/${this.dataItem}`,this.configs.key);if(console.log("Raw post data:",e),!e)throw new Error("No data received from server");const t={title:e.seo&&e.seo.title?e.seo.title:"",description:e.seo&&e.seo.description?e.seo.description:"",keywords:e.seo&&Array.isArray(e.seo.keywords)?e.seo.keywords:[],image:e.seo&&e.seo.image?e.seo.image:""};this.postData={...e,seo:t,content:e.content||"",display:e.display||"single",next:e.next||"",course:e.course||"",action:e.action||"",destination:e.destination||"",feature_image:e.feature_image||"",pageID:e.pageID||"",isComment:Boolean(e.isComment),isCounter:Boolean(e.isCounter),isMenu:Boolean(e.isMenu),isTemplate:Boolean(e.isTemplate),authen:Boolean(e.authen),useAdminPage:Boolean(e.useAdminPage),usePassword:Boolean(e.usePassword),enableAnalytics:Boolean(e.enableAnalytics),enableExport:Boolean(e.enableExport),customFields:Array.isArray(e.customFields)?e.customFields:[],customData:e.customData||{}},e.exportFormats&&(this.exportFormats={csv:Boolean(e.exportFormats.csv),excel:Boolean(e.exportFormats.excel)}),console.log("Processed post data:",this.postData)}catch(e){console.error("Error fetching post data:",e),this.$swal({title:"ข้อผิดพลาด",text:"ไม่สามารถโหลดข้อมูลได้ กรุณาลองใหม่อีกครั้ง",type:"error",confirmButtonText:"ตกลง"}).then((()=>{this.$router.push("/cms/content")}))}},async updatePost(){if(this.postData.title&&""!==this.postData.title.trim())if(this.postData.slug&&""!==this.postData.slug.trim())if(this.postData.type&&""!==this.postData.type.trim())try{this.activeBlock=!0,this.isSaving=!0;const e={title:this.postData.title.trim(),slug:this.postData.slug.trim(),content:this.postData.content||"",display:this.postData.display||"single",type:"add"===this.mode&&"post"===this.type&&this.dataItem?"post":this.postData.type,next:this.postData.next||"",course:this.postData.course||"",action:this.postData.action||"",isComment:Boolean(this.postData.isComment),isCounter:Boolean(this.postData.isCounter),isMenu:Boolean(this.postData.isMenu),password:this.postData.usePassword&&this.postData.password||"",status:this.postData.status||"draft",isTemplate:Boolean(this.postData.isTemplate),authen:Boolean(this.postData.authen),destination:this.postData.destination||"",feature_image:this.postData.feature_image||"",pageID:this.postData.pageID||"",owner:this.session.current._id,parent:"add"===this.mode&&"post"===this.type&&this.dataItem?this.dataItem:this.postData.parent?._id||this.postData.parent||"",builder:this.postData.builder||[],layout:this.postData.layout||"standard",useAdminPage:Boolean(this.postData.useAdminPage),adminPassword:this.postData.useAdminPage&&this.postData.usePassword&&this.postData.adminPassword||"",enableAnalytics:Boolean(this.postData.enableAnalytics),enableExport:Boolean(this.postData.enableExport),usePassword:Boolean(this.postData.usePassword),exportFormats:{csv:Boolean(this.exportFormats.csv),excel:Boolean(this.exportFormats.excel)},seo:{title:this.postData.seo&&this.postData.seo.title?this.postData.seo.title.trim():"",description:this.postData.seo&&this.postData.seo.description?this.postData.seo.description.trim():"",keywords:this.postData.seo&&Array.isArray(this.postData.seo.keywords)?this.postData.seo.keywords:[],image:this.postData.seo&&this.postData.seo.image?this.postData.seo.image:""},customFields:this.postData.customFields||[],customData:this.postData.customData||{}},t={data:e,options:{uniqueFields:[["slug"]]}};console.log("Saving data:",t);const a="edit"===this.mode?`post/${this.dataItem}`:"post",s="edit"===this.mode?"PUT":"POST",o=await this.$Request[s](a,t,this.configs.key);if(console.log("Response:",o),200!==o.status||!o.data)throw new Error("Invalid response from server");this.activeBlock=!1,this.isSaving=!1,this.isDirty=!1,"add"===this.mode&&(this.postData={...this.postData,...o.data}),this.$swal({title:"บันทึกข้อมูลเรียบร้อยแล้ว",text:"คุณต้องการที่จะดำเนินการอย่างไร?",type:"success",showCancelButton:!0,confirmButtonColor:"#0054b4",confirmButtonText:"กลับไปหน้าหลัก",cancelButtonText:"แก้ไขต่อ",closeOnConfirm:!1,closeOnCancel:!1}).then((e=>{if(e.isConfirmed){const e="add"===this.mode&&"post"===this.type?`/cms/posts/${this.dataItem}`:"/cms/pages/";this.$router.replace(e)}else"add"===this.mode&&this.$router.replace(`/cms/edit/${o.data._id}`)}))}catch(e){if(this.activeBlock=!1,this.isSaving=!1,console.error("Save error:",e),e.response){const t=e.response.data;"duplicate"===t.message&&t.fields?.includes("slug")?this.$swal({title:"ข้อผิดพลาด",text:"URL Slug ซ้ำกัน กรุณาใช้ slug อื่น",type:"error",confirmButtonText:"ตกลง"}):"validation_failed"===t.message?this.$swal({title:"ข้อผิดพลาด",text:"ข้อมูลไม่ถูกต้อง กรุณาตรวจสอบและลองใหม่",type:"error",confirmButtonText:"ตกลง"}):401===e.response.status?this.$swal({title:"ข้อผิดพลาด",text:"ไม่มีสิทธิ์ในการบันทึกข้อมูล กรุณาเข้าสู่ระบบใหม่",type:"error",confirmButtonText:"ตกลง"}):403===e.response.status?this.$swal({title:"ข้อผิดพลาด",text:"ไม่มีสิทธิ์ในการแก้ไขข้อมูลนี้",type:"error",confirmButtonText:"ตกลง"}):this.$swal({title:"ข้อผิดพลาด",text:t.message||"เกิดข้อผิดพลาดในการบันทึกข้อมูล",type:"error",confirmButtonText:"ตกลง"})}else e.request?this.$swal({title:"ข้อผิดพลาด",text:"ไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์ได้ กรุณาตรวจสอบการเชื่อมต่ออินเทอร์เน็ต",type:"error",confirmButtonText:"ตกลง"}):this.$swal({title:"ข้อผิดพลาด",text:"เกิดข้อผิดพลาดที่ไม่ทราบสาเหตุ กรุณาลองใหม่อีกครั้ง",type:"error",confirmButtonText:"ตกลง"})}else this.$swal({title:"ข้อผิดพลาด",text:"กรุณาเลือกประเภทเนื้อหา",type:"error",confirmButtonText:"ตกลง"});else this.$swal({title:"ข้อผิดพลาด",text:"กรุณากรอก URL Slug",type:"error",confirmButtonText:"ตกลง"});else this.$swal({title:"ข้อผิดพลาด",text:"กรุณากรอกชื่อเนื้อหา",type:"error",confirmButtonText:"ตกลง"})},async getParentData(){try{const e="post"===this.type?this.dataItem:this.postData.parent,{data:t}=await this.$Request.GET(`post/${e}`,this.configs.key);console.log("Parent Data:",t),this.parentData=t}catch(e){console.error("Error fetching parent data:",e)}},applyQuickFilter(e){this.$router.push({path:"/cms/content",query:{filter:e}})},viewAllActivities(){this.$router.push("/cms/activities")},clickActivity(e){console.log("Navigate to activity:",e)},async importData(){try{const e=document.createElement("input");e.type="file",e.accept=".json,.csv,.xlsx",e.onchange=e=>{const t=e.target.files[0];t&&(console.log("Importing file:",t.name),this.processImportFile(t))},e.click()}catch(e){console.error("Import error:",e)}},async exportData(){try{console.log("Exporting data...");const e={timestamp:(new Date).toISOString(),data:this.postData};this.downloadJSON(e,`content_export_${Date.now()}.json`),this.$toast?.success("ส่งออกข้อมูลสำเร็จ")}catch(e){console.error("Export error:",e),this.$toast?.error("เกิดข้อผิดพลาดในการส่งออก")}},processImportFile(e){const t=new FileReader;t.onload=e=>{try{const t=JSON.parse(e.target.result);console.log("Imported data:",t),this.$toast?.success("นำเข้าข้อมูลสำเร็จ")}catch(t){console.error("Parse error:",t),this.$toast?.error("รูปแบบไฟล์ไม่ถูกต้อง")}},t.readAsText(e)},downloadJSON(e,t){const a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),o=document.createElement("a");o.href=s,o.download=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},manageTemplates(){this.$router.push("/cms/templates")},openMediaLibrary(){this.$router.push("/cms/media")},refreshSystemStatus(){console.log("Refreshing system status..."),this.systemStatus.lastSync="ล่าสุด",this.systemStatus.connection="normal",setTimeout((()=>{this.systemStatus.lastSync="เมื่อไม่นานนี้"}),3e3)},toggleMobileSidebar(){this.isMobileSidebarOpen=!this.isMobileSidebarOpen},closeMobileSidebar(){this.isMobileSidebarOpen=!1},calculateContentAnalytics(){const e=this.postData.content||"",t=this.postData.title||"",a=this.postData.seo?.description||"";this.contentAnalytics.wordCount=e.split(/\s+/).filter((e=>e.length>0)).length,this.contentAnalytics.charCount=e.length,this.contentAnalytics.readingTime=Math.ceil(this.contentAnalytics.wordCount/200);let s=0;t.length>=30&&t.length<=60&&(s+=20),a.length>=120&&a.length<=160&&(s+=20),this.postData.seo?.keywords?.length>=1&&(s+=15),this.postData.feature_image&&(s+=15),this.postData.slug&&this.postData.slug.length>0&&(s+=15),e.length>=300&&(s+=15),this.contentAnalytics.seoScore=s;const o=this.contentAnalytics.wordCount/Math.max(1,e.split(/[.!?]+/).length);this.contentAnalytics.readabilityScore=o<=15?90:o<=20?70:o<=25?50:30},validateContent(){this.contentValidation.hasTitle=this.postData.title&&this.postData.title.length>=3,this.contentValidation.hasSlug=this.postData.slug&&this.postData.slug.length>=3,this.contentValidation.hasContent=this.postData.content&&this.postData.content.length>=50,this.contentValidation.hasImage=!!this.postData.feature_image,this.contentValidation.hasSEO=!(!this.postData.seo?.title&&!this.postData.seo?.description);const e=Object.values(this.contentValidation).filter((e=>"boolean"===typeof e)),t=e.filter((e=>e)).length;this.contentValidation.score=Math.round(t/e.length*100)},addTag(){const e=this.newTag.trim().toLowerCase();e&&!this.contentTags.includes(e)&&(this.contentTags.push(e),this.markDirty()),this.newTag=""},removeTag(e){this.contentTags.splice(e,1),this.markDirty()},scheduleContent(){this.contentSchedule.isScheduled=!0,this.markDirty()},unscheduleContent(){this.contentSchedule.isScheduled=!1,this.contentSchedule.publishDate="",this.contentSchedule.unpublishDate="",this.markDirty()},async duplicateContent(){try{const e=JSON.parse(JSON.stringify(this.postData));e.title=`${e.title} (Copy)`,e.slug=`${e.slug}-copy`,delete e._id;const t={data:e,options:{uniqueFields:[["slug"]]}},{data:a}=await this.$Request.POST("post",t,this.configs.key);this.$toast?.success("คัดลอกเนื้อหาสำเร็จ"),this.$router.push(`/cms/edit/${a._id}`)}catch(e){console.error("Duplication failed:",e),this.$toast?.error("เกิดข้อผิดพลาดในการคัดลอก")}},exportContent(){const e={content:this.postData,metadata:{exportDate:(new Date).toISOString(),version:"1.0",type:"cms-content"}};this.downloadJSON(e,`content-${this.postData.slug||"untitled"}-${Date.now()}.json`)},async importContent(e){try{const t=new FileReader;t.onload=e=>{try{const t=JSON.parse(e.target.result);t.content&&(this.postData={...this.postData,...t.content},this.markDirty(),this.$toast?.success("นำเข้าเนื้อหาสำเร็จ"))}catch(t){this.$toast?.error("รูปแบบไฟล์ไม่ถูกต้อง")}},t.readAsText(e)}catch(t){this.$toast?.error("เกิดข้อผิดพลาดในการนำเข้า")}},exportAnalytics(e){try{let t={};switch(this.exportDataType){case"analytics":t={"หน้า":this.postData.title||"ไม่มีชื่อ",URL:this.postData.slug||"","จำนวนผู้เยี่ยมชม":this.analyticsData.totalViews,"ผู้เยี่ยมชมไม่ซ้ำ":this.analyticsData.uniqueVisitors,"เวลาเฉลี่ยบนหน้า":this.analyticsData.avgTimeOnPage,"Bounce Rate":this.analyticsData.bounceRate,"เวลาที่เข้าชมบ่อยสุด":this.analyticsData.peakHours,"วันที่ส่งออก":(new Date).toLocaleString("th-TH")};break;case"visitors":t={"หน้า":this.postData.title||"ไม่มีชื่อ","แหล่งที่มา Google":this.analyticsData.sources.google+"%","แหล่งที่มาโดยตรง":this.analyticsData.sources.direct+"%","แหล่งที่มา Social Media":this.analyticsData.sources.social+"%","อุปกรณ์ Desktop":this.analyticsData.devices.desktop+"%","อุปกรณ์ Mobile":this.analyticsData.devices.mobile+"%","อุปกรณ์ Tablet":this.analyticsData.devices.tablet+"%","วันที่ส่งออก":(new Date).toLocaleString("th-TH")};break;case"comments":t={"หน้า":this.postData.title||"ไม่มีชื่อ","เปิดใช้ความคิดเห็น":this.postData.isComment?"ใช่":"ไม่","จำนวนความคิดเห็น":Math.floor(50*Math.random()),"ความคิดเห็นที่รออนุมัติ":Math.floor(10*Math.random()),"ความคิดเห็นที่ถูกบล็อก":Math.floor(5*Math.random()),"วันที่ส่งออก":(new Date).toLocaleString("th-TH")};break;case"forms":t={"หน้า":this.postData.title||"ไม่มีชื่อ","ประเภทหน้า":this.postData.type,"การดำเนินการฟอร์ม":this.postData.action||"ไม่ได้ตั้งค่า","ปลายทางข้อมูล":this.postData.destination||"ไม่ได้ตั้งค่า","จำนวนการส่งฟอร์ม":Math.floor(100*Math.random()),"อัตราการแปลง":(20*Math.random()+5).toFixed(2)+"%","วันที่ส่งออก":(new Date).toLocaleString("th-TH")};break;case"all":t={"หน้า":this.postData.title||"ไม่มีชื่อ",URL:this.postData.slug||"","ประเภทหน้า":this.postData.type,"สถานะ":this.postData.status?"เผยแพร่":"ไม่เผยแพร่","จำนวนผู้เยี่ยมชม":this.analyticsData.totalViews,"ผู้เยี่ยมชมไม่ซ้ำ":this.analyticsData.uniqueVisitors,"เวลาเฉลี่ยบนหน้า":this.analyticsData.avgTimeOnPage,"Bounce Rate":this.analyticsData.bounceRate,"แหล่งที่มา Google":this.analyticsData.sources.google+"%","แหล่งที่มาโดยตรง":this.analyticsData.sources.direct+"%","แหล่งที่มา Social Media":this.analyticsData.sources.social+"%","อุปกรณ์ Desktop":this.analyticsData.devices.desktop+"%","อุปกรณ์ Mobile":this.analyticsData.devices.mobile+"%","อุปกรณ์ Tablet":this.analyticsData.devices.tablet+"%","เปิดใช้ความคิดเห็น":this.postData.isComment?"ใช่":"ไม่","เวลาที่เข้าชมบ่อยสุด":this.analyticsData.peakHours,"วันที่ส่งออก":(new Date).toLocaleString("th-TH")};break;default:t={"ข้อผิดพลาด":"ไม่พบประเภทข้อมูลที่เลือก","วันที่ส่งออก":(new Date).toLocaleString("th-TH")}}"csv"===e?this.exportToCSV(t):"excel"===e&&this.exportToExcel(t),this.$toast?.success(`ส่งออกข้อมูล${this.getDataTypeLabel()} ${e.toUpperCase()} สำเร็จ`)}catch(t){console.error("Export error:",t),this.$toast?.error("เกิดข้อผิดพลาดในการส่งออก")}},getDataTypeLabel(){const e={analytics:"การวิเคราะห์",visitors:"ผู้เยี่ยมชม",comments:"ความคิดเห็น",forms:"ฟอร์ม",all:"ทั้งหมด"};return e[this.exportDataType]||""},exportToCSV(e){const t=Object.keys(e),a=Object.values(e),s=[t.join(","),a.map((e=>`"${e}"`)).join(",")].join("\n"),o=new Blob(["\ufeff"+s],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),i=URL.createObjectURL(o);l.setAttribute("href",i),l.setAttribute("download",`${this.exportDataType}_${this.postData.slug||"page"}_${Date.now()}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},exportToExcel(e){const t=Object.keys(e),a=Object.values(e);let s=`\n        <table border="1">\n          <thead>\n            <tr>${t.map((e=>`<th>${e}</th>`)).join("")}</tr>\n          </thead>\n          <tbody>\n            <tr>${a.map((e=>`<td>${e}</td>`)).join("")}</tr>\n          </tbody>\n        </table>\n      `;const o=new Blob([s],{type:"application/vnd.ms-excel"}),l=document.createElement("a"),i=URL.createObjectURL(o);l.setAttribute("href",i),l.setAttribute("download",`${this.exportDataType}_${this.postData.slug||"page"}_${Date.now()}.xls`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)},async loadAnalyticsData(){try{const{data:e}=await this.$Request.GET(`analytics/page/${this.dataItem}`,this.configs.key);this.analyticsData={totalViews:e.totalViews||0,uniqueVisitors:e.uniqueVisitors||0,avgTimeOnPage:e.avgTimeOnPage||"0:00",bounceRate:e.bounceRate||"0%",sources:e.sources||{google:0,direct:0,social:0},devices:e.devices||{desktop:0,mobile:0,tablet:0},peakHours:e.peakHours||"กำลังวิเคราะห์..."}}catch(e){console.error("Failed to load analytics data:",e),this.analyticsData={totalViews:Math.floor(1e3*Math.random())+100,uniqueVisitors:Math.floor(500*Math.random())+50,avgTimeOnPage:"2:34",bounceRate:Math.floor(50*Math.random())+25+"%",sources:{google:Math.floor(50*Math.random())+30,direct:Math.floor(30*Math.random())+20,social:Math.floor(20*Math.random())+10},devices:{desktop:Math.floor(40*Math.random())+40,mobile:Math.floor(40*Math.random())+35,tablet:Math.floor(20*Math.random())+5},peakHours:"14:00 - 16:00 น."}}},clearPassword(){this.postData.password="",this.postData.usePassword=!1},exportSelectedData(){const e=["csv","excel"].filter((e=>this.exportFormats[e]));e.forEach((e=>this.exportAnalytics(e)))},async checkApiConnection(){try{console.log("Checking API connection..."),console.log("API Server:",this.apiServer),console.log("Configs:",this.configs),console.log("Session:",this.session);const e=await this.$Request.GET("test",this.configs.key);return console.log("API Test Response:",e),!0}catch(e){return console.error("API Connection Error:",e),!1}},async debugSaveData(){console.log("=== DEBUG SAVE DATA ==="),console.log("Mode:",this.mode),console.log("Type:",this.type),console.log("Data Item:",this.dataItem),console.log("Post Data:",JSON.stringify(this.postData,null,2)),console.log("Session Current:",this.session?.current),console.log("Configs Key:",this.configs?.key),console.log("======================")},goBack(){"add"===this.mode&&"post"===this.type&&this.dataItem?this.$router.push(`/cms/pages/${this.dataItem}`):"post"===this.postData.type&&this.postData.parent?this.$router.push(`/cms/pages/${this.postData.parent}`):this.$router.push(this.redirectLink||"/cms/pages")},OpenCustomImageBrowser(e){this.currentCustomImageField=e,this.CustomImageBrowserOpen=!0},changeCustomImageFileTrigger(e){this.CustomImageBrowserOpen=e},selectCustomImageFileTrigger(e){console.log("selectCustomImageFileTrigger"),void 0!=e&&this.currentCustomImageField&&(console.log("selectFileReturnFunction",e.file),this.postData.customData={...this.postData.customData,[this.currentCustomImageField]:e.file},this.currentCustomImageField=null,this.selectedSlideItemIndex=void 0,this.markDirty())},markDirty(){console.log("Content has been modified")}},setup(){},watch:{"postData.title":{handler(){this.markDirty(),this.validateContent(),this.calculateContentAnalytics()}},"postData.content":{handler(){this.markDirty(),this.validateContent(),this.calculateContentAnalytics()}},"postData.seo":{handler(){this.markDirty(),this.validateContent(),this.calculateContentAnalytics()},deep:!0},"postData.feature_image":{handler(){this.markDirty(),this.validateContent()}},"postData.slug":{handler(){this.markDirty(),this.validateContent()}},"postData.hasAdminResult":{handler(e){e&&"edit"===this.mode&&this.loadAnalyticsData(),this.markDirty()}},"postData.usePassword":{handler(e){e||(this.postData.password=""),this.markDirty()}},"postData.useAdminPage":{handler(e){e&&"edit"===this.mode&&this.postData.enableAnalytics&&this.loadAnalyticsData(),e||(this.postData.usePassword=!1,this.postData.enableAnalytics=!1,this.postData.enableExport=!1,this.postData.adminPassword=""),this.markDirty()}},"postData.enableAnalytics":{handler(e){e&&this.postData.useAdminPage&&"edit"===this.mode&&this.loadAnalyticsData(),this.markDirty()}},"postData.layout":{handler(){this.markDirty(),this.validateContent()}},"postData.customFields":{handler(){this.markDirty()},deep:!0}},beforeUnmount(){this.slugDebounceTimer&&clearTimeout(this.slugDebounceTimer)},async mounted(){try{if(console.log("=== ContentForm Mounted ==="),console.log("Mode:",this.mode),console.log("Type:",this.type),console.log("Route params:",this.$route.params),console.log("Initial data:",this.initialData),!this.session||!this.session.current||!this.session.current._id)return console.error("Session data is missing"),void this.$swal({title:"ข้อผิดพลาด",text:"ไม่พบข้อมูลการเข้าสู่ระบบ กรุณาเข้าสู่ระบบใหม่",type:"error",confirmButtonText:"ตกลง"}).then((()=>{this.$router.push("/login")}));if(!this.configs||!this.configs.key)return console.error("Config data is missing"),void this.$swal({title:"ข้อผิดพลาด",text:"ไม่พบการตั้งค่าระบบ กรุณาตรวจสอบการตั้งค่า",type:"error",confirmButtonText:"ตกลง"});this.postData.seo||(this.postData.seo={title:"",description:"",keywords:[],image:""}),"edit"===this.mode?(await this.getPost(),"post"===this.postData.type&&await this.getParentData(),this.postData.hasAdminResult&&await this.loadAnalyticsData()):"add"===this.mode&&"post"===this.type&&await this.getParentData();const e=this.$route.hash;e?this.redirectLink=`/cms/pages${e}`:"post"===this.postData.type&&this.postData.parent?this.redirectLink=`/cms/pages/${this.postData.parent}`:this.redirectLink="/cms/pages","post"===this.type&&this.dataItem&&(this.postData.type="post",this.postData.display="single"),this.validateContent(),this.calculateContentAnalytics(),console.log("=== ContentForm Initialized Successfully ===")}catch(e){console.error("Error in mounted():",e),this.$swal({title:"ข้อผิดพลาด",text:"เกิดข้อผิดพลาดในการโหลดหน้า กรุณาลองใหม่อีกครั้ง",type:"error",confirmButtonText:"ตกลง"})}}};const Ro=(0,ee.A)(jo,[["render",x],["__scopeId","data-v-6960fd9d"]]);var qo=Ro},40687:function(e,t,a){a.d(t,{A:function(){return y}});var s=a(20641),o=a(50953),l=a(90033),i=a(94232),n=a(10797),r=a(55372);const d={key:0,class:"fixed inset-0 overflow-y-auto"},c={class:"flex min-h-full items-center justify-center p-4 text-center"},u={class:"font-medium"},p={class:"bg-black w-8 h-8 right-2 top-2 leading-8 hover:bg-gray-500"},m={props:["isWindowsOpen","allowFileType","callbackFunction"],data(){return console.log("FileBrowser props:",this.isWindowsOpen,this.allowFileType,this.callbackFunction),{SessionList:[],loading_sources:!0,activeBlock:!1,schoolId:"",isOpen:this.isWindowsOpen,isAllow:this.allowFileType,isCallback:this.callbackFunction,mode:"popup"}},components:{FileManager:r.A},watch:{isWindowsOpen(e){console.log("isWindowsOpen changed to:",e),this.isOpen=e}},methods:{selectFileTrigger(e){this.selectFileTrigger=e,this.closeModal(),this.selectFile(e)},closeModal(){this.isOpen=!1,this.$emit("fileBrowserTrigger",!1)},selectFile(e){this.$emit("fileBrowserCallback",e)}},async mounted(){console.log("FileBrowser mounted with isOpen:",this.isOpen,"isWindowsOpen:",this.isWindowsOpen)},setup(){}};var g=Object.assign(m,{__name:"FileBrowser",setup(e){return(t,a)=>{const m=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.Wv)((0,o.R1)(i.O),{appear:"",show:t.isOpen,as:"template"},{default:(0,s.k6)((()=>[(0,s.bF)((0,o.R1)(n.lG),{as:"div",onClose:t.closeModal,class:"relative z-10"},{default:(0,s.k6)((()=>[(0,s.bF)((0,o.R1)(i._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,s.k6)((()=>a[1]||(a[1]=[(0,s.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)]))),_:1}),t.loading_sources?((0,s.uX)(),(0,s.CE)("div",d,[(0,s.Lk)("div",c,[(0,s.bF)((0,o.R1)(i._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:(0,s.k6)((()=>[(0,s.bF)((0,o.R1)(n.Lj),{class:(0,l.C4)(["w-[60rem] z-40 transform overflow-hidden bg-white p-3 text-left align-middle shadow-xl transition-all blocking relative",[t.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},{default:(0,s.k6)((()=>[(0,s.bF)((0,o.R1)(n.L3),{as:"h3",class:"text-lg pb-2 font-bold leading-6 text-gray-900 border-b"},{default:(0,s.k6)((()=>[a[3]||(a[3]=(0,s.eW)("เลือกไฟล์ (Select File) ")),(0,s.Lk)("p",u,[a[2]||(a[2]=(0,s.eW)("อนุญาติเฉพาะไฟล์ ")),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.allowFileType,(e=>((0,s.uX)(),(0,s.CE)("span",{key:e.code,class:"text-xs font-medium bg-indigo-600 pl-2 pr-2 pt-1 mr-1 rounded text-white"},(0,l.v_)(e),1)))),128))]),(0,s.Lk)("button",{onClick:a[0]||(a[0]=(...e)=>t.closeModal&&t.closeModal(...e)),type:"button",class:"z-50 absolute top-2 right-2"},[(0,s.Lk)("div",p,[(0,s.bF)(m,{icon:["fas","times"],class:"text-white mt-[7px] font-sm"})])])])),_:1}),(0,s.Lk)("div",null,[(0,s.bF)(r.A,{onSelectFileTrigger:t.selectFileTrigger,Mode:t.mode,AllowFile:t.isAllow,CallbackFunc:t.isCallback},null,8,["onSelectFileTrigger","Mode","AllowFile","CallbackFunc"])])])),_:1},8,["class"])])),_:1})])])):(0,s.Q3)("",!0)])),_:1},8,["onClose"])])),_:1},8,["show"])}}});const h=g;var y=h},87814:function(e,t,a){a.d(t,{A:function(){return I}});var s=a(20641),o=a(90033),l=a(53751);const i={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},n={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},r={class:"min-w-0 flex-1"},d={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},c={key:0,class:"text-sm text-gray-500"},u={class:"mt-5 flex xl:mt-0 xl:ml-4"},p={class:"flex items-center space-x-2"},m={class:"text-sm text-gray-400"},g=["onUpdate:modelValue","placeholder","onChange"],h={value:"",disabled:""},y=["value"],b=["onClick"],x={class:"text-sm hidden sm:inline-block ml-1"},f=["onClick"],k={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,a,v,L,C){const w=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("header",i,[(0,s.Lk)("div",n,[(0,s.Lk)("div",r,[(0,s.Lk)("h1",d,[(0,s.bF)(w,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,s.eW)(" "+(0,o.v_)(a.pageTitle?a.pageTitle:this.PageName),1)]),a.subhead?((0,s.uX)(),(0,s.CE)("p",c,(0,o.v_)(a.subhead),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",u,[(0,s.Lk)("div",p,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.navigation,((t,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},["select"===t.type?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("label",m,(0,o.v_)(t.placeholder),1),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:a=>e.$emit("toggleStatus",t.value)},[(0,s.Lk)("option",h,"-- "+(0,o.v_)(t.placeholder)+" --",1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.options,((e,t)=>((0,s.uX)(),(0,s.CE)("option",{key:t,value:e.value},(0,o.v_)(e.name),9,y)))),128))],40,g),[[l.u1,t.value]])],64)):"call-function"===t.type?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[!1!==t.visible?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:a=>e.$emit(t.function),type:"button",class:(0,o.C4)(C.getClasses(t.class))},[(0,s.bF)(w,{icon:["fas",`${t.style}`],class:(0,o.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,s.Lk)("span",x,(0,o.v_)(t.name),1)],10,b)):(0,s.Q3)("",!0)],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[!1!==t.visible?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e=>C.handleNavigationClick(t),type:"button",class:(0,o.C4)(C.getClasses(t.class))},[(0,s.bF)(w,{icon:["fas",`${t.style}`],class:(0,o.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,s.Lk)("span",k,(0,o.v_)(t.name),1)],10,f)):(0,s.Q3)("",!0)],64))],64)))),128))])])])])}a(44114);var L=a(75220),C=a(52968),w=a(23264),D=a(93426),F={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,L.lq)();return console.log("Translate",(0,D.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,D.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,C.K7)((0,D.iX)())},methods:{getClasses(e){const t=(0,w.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},T=a(64621);const S=(0,T.A)(F,[["render",v]]);var I=S},23264:function(e,t,a){function s(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}a.d(t,{c:function(){return s}})}}]);
//# sourceMappingURL=7930.270cd3a8.js.map