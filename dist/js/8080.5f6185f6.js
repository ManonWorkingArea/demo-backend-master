"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[8080],{4310:function(e,t,s){s.r(t),s.d(t,{default:function(){return oo}});var o=s(20641);function a(e,t,s,a,l,r){const i=(0,o.g2)("List");return this.login?((0,o.uX)(),(0,o.Wv)(i,{key:0})):(0,o.Q3)("",!0)}var l=s(52968),r=s(75220),i=(s(44114),s(90033)),n=s(53751);const c={class:"hidden lg:flex lg:flex-col transition-all duration-300 lg:w-64"},d={class:"flex flex-col flex-grow bg-white border-r border-gray-200 h-full"},u={class:"px-4 py-4 border-b border-gray-200"},g={class:"space-y-2"},m={class:"flex items-center justify-between p-2 bg-blue-50 rounded-lg stats-card"},h={class:"text-sm font-semibold text-blue-600"},p={class:"flex items-center justify-between p-2 bg-green-50 rounded-lg stats-card"},f={class:"text-sm font-semibold text-green-600"},x={class:"px-4 py-4 border-b border-gray-200"},b={class:"space-y-1"},y={class:"flex-1 text-left"},k={class:"flex items-center"},v={class:"text-xs"},L={class:"mb-4"},w={class:"space-y-2"},C={class:"mb-4"},T={class:"flex space-x-2"},$={class:"mb-4"},P={class:"flex space-x-2"},I={class:"px-4 py-4 border-b border-gray-200"},A={class:"space-y-2"},M=["disabled"],D=["disabled"],S={class:"text-sm font-medium text-gray-700 mb-3"},E={class:"space-y-2"},F={class:"px-4 py-4 border-b border-gray-200"},_={class:"space-y-2"},Q={key:0},O={class:"px-4 py-4 border-b border-gray-200"},X={class:"space-y-2"},U={class:"flex items-center cursor-pointer text-sm"},R={class:"flex items-center cursor-pointer text-sm"},q={class:"flex-1 flex flex-col min-w-0 h-full"},B={class:"lg:hidden bg-white border-b border-gray-200 px-3 py-2 flex-shrink-0"},N={class:"flex items-center justify-between"},V={class:"flex-1"},j={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},z={class:"bg-white rounded-md shadow-sm p-4 w-96"},H={class:"mb-4"},W={class:"flex justify-between items-center"},K={class:"flex items-center justify-between mb-4"},J={class:"mb-4 p-3 bg-gray-50 rounded-lg"},G={class:"flex items-center"},Y=["src"],Z={class:"font-medium text-gray-900"},ee={class:"text-sm text-gray-500"},te={class:"space-y-2"},se={key:2,class:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},oe={class:"fixed inset-0 overflow-hidden"},ae={class:"absolute inset-0 overflow-hidden"},le={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10"},re={class:"pointer-events-auto w-screen max-w-md"},ie={class:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl"},ne={class:"px-4 sm:px-6"},ce={class:"flex items-start justify-between"},de={class:"ml-3 flex h-7 items-center"},ue={class:"relative mt-6 flex-1 px-4 sm:px-6"},ge={class:"space-y-4"},me={class:"bg-white border-0 border-gray-200"},he={key:3,class:"loading-overlay"},pe={class:"loading-text"},fe={class:"processing-count"},xe={class:"flex-1 bg-gray-100"},be={class:"h-full flex flex-col"},ye={class:"flex-1 flex flex-col min-h-0"},ke={class:"bg-white shadow ring-1 ring-black ring-opacity-5 flex-1 flex flex-col m-2 min-h-0"},ve={class:"bg-gray-100 flex-shrink-0"},Le={class:"p-2 lg:p-2"},we={class:"flex justify-between flex-col lg:flex-row"},Ce={class:"flex flex-col lg:flex-row mb-2 lg:w-1/2 lg:mr-2 lg:mb-0"},Te={key:0},$e={class:"ml-1 text-left text-gray-500 text-xs lg:text-sm"},Pe={class:"text-black font-semibold"},Ie={class:"flex flex-col mb-2 lg:mb-0 lg:flex-row items-center"},Ae=["value"],Me={class:"p-2 lg:p-3"},De={class:"flex items-center justify-between"},Se={class:"flex items-center"},Ee={class:"text-xs lg:text-sm text-orange-800 font-medium"},Fe={class:"flex items-center space-x-1 lg:space-x-2"},_e={class:"border-t bg-gray-50 border-gray-300 flex-shrink-0 lg:block hidden"},Qe={class:"flex text-sm text-gray-900"},Oe={class:"w-6/12 md:w-2/12 py-2 pl-4 text-left"},Xe={class:"flex items-center cursor-pointer"},Ue={class:"w-6/12 md:w-2/12 py-2 pl-4 text-left"},Re={class:"flex items-center cursor-pointer"},qe={class:"border-b border-t bg-gray-200 border-gray-300 flex-shrink-0"},Be={class:"flex text-sm font-semibold text-gray-900"},Ne=["checked","indeterminate"],Ve={ref:"scrollContainer",class:"bg-white relative table-scroll-container flex-1"},je=["onMouseenter"],ze=["checked","onChange"],He={class:"w-12 py-2 flex items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200 relative flex-shrink-0"},We={class:"text-gray-600 font-semibold text-xs relative z-10"},Ke={class:"w-full md:w-3/12 py-2 pl-3"},Je={class:"flex items-center"},Ge={class:"relative mr-2 flex-shrink-0"},Ye={class:"w-10 h-10 rounded-lg bg-gray-200 flex items-center justify-center shadow-sm ring-1 ring-white group-hover:ring-blue-200 transition-all duration-300 relative overflow-hidden"},Ze=["src","onError","onLoad"],et=["title"],tt={class:"ml-1 flex-1 min-w-0"},st={class:"flex items-center gap-1"},ot=["innerHTML"],at={class:"flex items-center gap-2 mt-1"},lt=["innerHTML"],rt={key:0,class:"fas fa-check-circle text-green-500 text-xs",title:"อีเมลยืนยันแล้ว"},it={class:"mt-2 space-y-1 md:hidden"},nt={class:"flex items-center text-sm"},ct=["innerHTML"],dt={class:"flex items-center text-sm"},ut=["innerHTML"],gt={class:"flex items-center text-sm"},mt=["innerHTML"],ht={class:"hidden md:block md:w-2/12 py-3 pl-4"},pt=["onClick"],ft=["innerHTML"],xt={class:"hidden md:block md:w-2/12 py-3 pl-4 pr-3"},bt={class:"space-y-1"},yt={class:"flex items-center"},kt=["innerHTML"],vt=["href"],Lt={class:"flex items-center"},wt=["innerHTML"],Ct=["href"],Tt={class:"hidden md:block w-1/12 py-3 pl-4 pr-3"},$t={class:"flex flex-col items-center"},Pt={class:"font-semibold text-blue-600 text-lg"},It={class:"w-full bg-gray-200 rounded-full h-1.5 mt-1"},At={class:"hidden md:block w-2/12 py-3 pl-4 pr-3"},Mt={class:"text-sm text-gray-600"},Dt={class:"text-xs text-gray-400"},St={class:"hidden md:block w-2/12 py-3 pl-4 pr-3"},Et={class:"flex items-center space-x-1 opacity-60 group-hover:opacity-100 transition-opacity duration-200"},Ft=["onClick"],_t=["onClick"],Qt=["onClick"],Ot={class:"md:hidden p-2 border-b border-gray-300 bg-blue-50"},Xt={class:"w-full"},Ut=["onClick"],Rt={key:0,class:"flex justify-center items-center py-6 border-b border-gray-200"},qt={key:1,class:"flex justify-center items-center py-6 border-b border-gray-200"},Bt={key:2,class:"flex justify-center items-center py-6 border-b border-gray-200"},Nt={class:"flex items-center gap-2 text-green-600"},Vt={class:"text-sm font-medium"},jt={key:1,class:"text-center py-16 px-4"},zt={class:"max-w-md mx-auto"},Ht={class:"text-gray-500 mb-6"},Wt={class:"flex flex-col sm:flex-row gap-3 justify-center"},Kt={class:"lg:hidden fixed bottom-0 left-0 right-0 bg-gray-100 border-t border-gray-300 p-2 z-20 shadow-md"},Jt={class:"flex items-center justify-between w-full"},Gt=["value"],Yt={class:"hidden lg:block p-2 text-center flex-shrink-0 border-t border-gray-200 mb-4"},Zt={key:0,class:"mb-2 text-sm text-gray-600"},es={class:"flex flex-col h-full"},ts={class:"flex items-center justify-between px-4 py-4 border-b border-gray-200"},ss={class:"px-4 py-4 border-b border-gray-200"},os={class:"space-y-2"},as={class:"flex items-center justify-between p-2 bg-blue-50 rounded-lg stats-card"},ls={class:"text-sm font-semibold text-blue-600"},rs={class:"flex items-center justify-between p-2 bg-green-50 rounded-lg stats-card"},is={class:"text-sm font-semibold text-green-600"},ns={class:"px-4 py-4 border-b border-gray-200"},cs={class:"space-y-1"},ds={class:"flex-1 text-left"},us={class:"flex items-center"},gs={class:"text-xs"},ms={key:0,class:"text-center"};function hs(e,t,s,a,l,r){const hs=(0,o.g2)("router-link"),ps=(0,o.g2)("AddUserModal"),fs=(0,o.g2)("batch-progress"),xs=(0,o.g2)("Subhead"),bs=(0,o.g2)("Pagination"),ys=(0,o.g2)("font-awesome-icon"),ks=(0,o.g2)("Loader");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",{class:(0,i.C4)(["bg-gray-50 flex list-container",[s.headerType&&`with-${s.headerType}`,s.customClass]]),style:{"min-height":"calc(100vh - 140px)"}},[(0,o.Lk)("div",c,[(0,o.Lk)("div",d,[t[89]||(t[89]=(0,o.Lk)("div",{class:"flex items-center px-4 py-4 border-b border-gray-200 flex-shrink-0"},[(0,o.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"จัดการผู้เรียน")],-1)),(0,o.Lk)("div",u,[t[64]||(t[64]=(0,o.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"สถิติรวม",-1)),(0,o.Lk)("div",g,[(0,o.Lk)("div",m,[t[62]||(t[62]=(0,o.Lk)("div",{class:"flex items-center gap-2"},[(0,o.Lk)("div",{class:"w-2 h-2 bg-blue-500 rounded-full"}),(0,o.Lk)("span",{class:"text-sm text-gray-700"},"ทั้งหมด")],-1)),(0,o.Lk)("span",h,(0,i.v_)(l.totalItems),1)]),(0,o.Lk)("div",p,[t[63]||(t[63]=(0,o.Lk)("div",{class:"flex items-center gap-2"},[(0,o.Lk)("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),(0,o.Lk)("span",{class:"text-sm text-gray-700"},"หน้าปัจจุบัน")],-1)),(0,o.Lk)("span",f,(0,i.v_)(l.listItems.length),1)])])]),(0,o.Lk)("div",x,[t[71]||(t[71]=(0,o.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"เครื่องมือ",-1)),(0,o.Lk)("nav",b,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.getData&&r.getData(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[65]||(t[65]=[(0,o.Lk)("i",{class:"fas fa-sync-alt text-sm w-4"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"รีเฟรชข้อมูล",-1)])),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>r.togglePanel&&r.togglePanel(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[66]||(t[66]=[(0,o.Lk)("i",{class:"fas fa-cogs text-sm w-4"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"เครื่องมือขั้นสูง",-1)])),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.safeToggleAdvancedFilter&&r.safeToggleAdvancedFilter(...e)),class:(0,i.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200",[l.showAdvancedFilter?"bg-blue-50 text-blue-600":""]])},[t[67]||(t[67]=(0,o.Lk)("i",{class:"fas fa-filter text-sm w-4"},null,-1)),t[68]||(t[68]=(0,o.Lk)("span",{class:"flex-1 text-left"},"ตัวกรองขั้นสูง",-1)),(0,o.Lk)("i",{class:(0,i.C4)([l.showAdvancedFilter?"fas fa-chevron-up":"fas fa-chevron-down","text-xs"])},null,2)],2),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.safeToggleBulkMode&&r.safeToggleBulkMode(...e)),class:(0,i.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200",[l.bulkActionMode?"bg-orange-50 text-orange-600":""]])},t[69]||(t[69]=[(0,o.Lk)("i",{class:"fas fa-check-square text-sm w-4"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"จัดการหลายรายการ",-1)]),2),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>r.toggleLazyMode&&r.toggleLazyMode(...e)),class:(0,i.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200",[l.lazy?"bg-green-50 text-green-600":"bg-red-50 text-red-600"]])},[t[70]||(t[70]=(0,o.Lk)("i",{class:"fas fa-rocket text-sm w-4"},null,-1)),(0,o.Lk)("span",y,(0,i.v_)(l.lazy?"Progressive Loading (เปิด)":"แสดงทั้งหมด (ปิด)"),1),(0,o.Lk)("div",k,[(0,o.Lk)("span",v,(0,i.v_)(l.lazy?"ON":"OFF"),1)])],2)])]),(0,o.bo)((0,o.Lk)("div",{class:(0,i.C4)(["px-4 py-4 border-b border-gray-200 bg-blue-50",{hidden:!l.showAdvancedFilter}])},[t[76]||(t[76]=(0,o.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"ตัวกรองขั้นสูง",-1)),(0,o.Lk)("div",L,[t[72]||(t[72]=(0,o.Lk)("label",{class:"block text-xs font-medium text-gray-600 mb-2"},"ช่วงวันที่ลงทะเบียน",-1)),(0,o.Lk)("div",w,[(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=e=>l.filterOptions.dateRange.start=e),class:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"เริ่มต้น"},null,512),[[n.Jo,l.filterOptions.dateRange.start]]),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=e=>l.filterOptions.dateRange.end=e),class:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"สิ้นสุด"},null,512),[[n.Jo,l.filterOptions.dateRange.end]])])]),(0,o.Lk)("div",C,[t[73]||(t[73]=(0,o.Lk)("label",{class:"block text-xs font-medium text-gray-600 mb-2"},"จำนวนหลักสูตร",-1)),(0,o.Lk)("div",T,[(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=e=>l.filterOptions.enrollmentCount.min=e),class:"w-1/2 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"ต่ำสุด",min:"0"},null,512),[[n.Jo,l.filterOptions.enrollmentCount.min]]),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=e=>l.filterOptions.enrollmentCount.max=e),class:"w-1/2 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"สูงสุด",min:"0"},null,512),[[n.Jo,l.filterOptions.enrollmentCount.max]])])]),(0,o.Lk)("div",$,[t[75]||(t[75]=(0,o.Lk)("label",{class:"block text-xs font-medium text-gray-600 mb-2"},"รูปโปรไฟล์",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.filterOptions.hasAvatar=e),class:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},t[74]||(t[74]=[(0,o.Lk)("option",{value:null},"ทั้งหมด",-1),(0,o.Lk)("option",{value:!0},"มีรูปโปรไฟล์",-1),(0,o.Lk)("option",{value:!1},"ไม่มีรูปโปรไฟล์",-1)]),512),[[n.u1,l.filterOptions.hasAvatar]])]),(0,o.Lk)("div",P,[(0,o.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>r.applyAdvancedFilter&&r.applyAdvancedFilter(...e)),class:"flex-1 px-3 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"}," กรองข้อมูล "),(0,o.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>r.clearAdvancedFilter&&r.clearAdvancedFilter(...e)),class:"px-3 py-1 text-xs bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors"}," ล้าง ")])],2),[[n.aG,l.showAdvancedFilter]]),(0,o.Lk)("div",I,[t[80]||(t[80]=(0,o.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"เครื่องมือส่งออก",-1)),(0,o.Lk)("div",A,[(0,o.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>r.exportToCSV&&r.exportToCSV(...e)),disabled:l.exportLoading,class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200 disabled:opacity-50"},t[77]||(t[77]=[(0,o.Lk)("i",{class:"fas fa-file-csv text-sm w-4 text-green-600"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"ส่งออก CSV",-1)]),8,M),(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>r.exportToExcel&&r.exportToExcel(...e)),disabled:l.exportLoading,class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200 disabled:opacity-50"},t[78]||(t[78]=[(0,o.Lk)("i",{class:"fas fa-file-excel text-sm w-4 text-green-700"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"ส่งออก Excel",-1)]),8,D),(0,o.Lk)("button",{onClick:t[14]||(t[14]=e=>r.generateReport("summary")),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[79]||(t[79]=[(0,o.Lk)("i",{class:"fas fa-chart-bar text-sm w-4 text-blue-600"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"รายงานสถิติ",-1)]))])]),(0,o.bo)((0,o.Lk)("div",{class:(0,i.C4)(["px-4 py-4 border-b border-gray-200 bg-orange-50",{hidden:!l.showBulkActions}])},[(0,o.Lk)("h3",S," การดำเนินการหลายรายการ ("+(0,i.v_)(l.selectedItems.length)+") ",1),(0,o.Lk)("div",E,[(0,o.Lk)("button",{onClick:t[15]||(t[15]=(...e)=>r.bulkSendEmail&&r.bulkSendEmail(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-orange-600 hover:bg-orange-100 rounded-lg transition-colors duration-200"},t[81]||(t[81]=[(0,o.Lk)("i",{class:"fas fa-envelope text-sm w-4"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"ส่งอีเมล",-1)])),(0,o.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>r.bulkDeleteItems&&r.bulkDeleteItems(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-red-600 hover:bg-red-100 rounded-lg transition-colors duration-200"},t[82]||(t[82]=[(0,o.Lk)("i",{class:"fas fa-trash text-sm w-4"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"ลบรายการ",-1)]))])],2),[[n.aG,l.showBulkActions]]),(0,o.Lk)("div",F,[t[85]||(t[85]=(0,o.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"การดำเนินการ",-1)),(0,o.Lk)("div",_,[(0,o.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>r.openAddUserModal&&r.openAddUserModal(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-green-600 hover:bg-green-100 hover:text-green-900 rounded-lg transition-colors duration-200"},t[83]||(t[83]=[(0,o.Lk)("i",{class:"fas fa-user-plus text-sm w-4"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"เพิ่มผู้เรียนใหม่",-1)])),(0,o.bF)(hs,{to:"/lesson/detail/"+l.dataItem,class:(0,i.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200",e.sidebarCollapsed?"justify-center px-2":""]),title:e.sidebarCollapsed?"ย้อนกลับ":""},{default:(0,o.k6)((()=>[t[84]||(t[84]=(0,o.Lk)("i",{class:"fas fa-chevron-left text-sm w-4"},null,-1)),e.sidebarCollapsed?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("span",Q,"ย้อนกลับ"))])),_:1},8,["to","class","title"])])]),(0,o.Lk)("div",O,[t[88]||(t[88]=(0,o.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"ตัวเลือกการแสดงผล",-1)),(0,o.Lk)("div",X,[(0,o.Lk)("label",U,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[18]||(t[18]=e=>l.layoutVisibility.order=e),class:"mr-2 rounded-sm border-gray-400"},null,512),[[n.lH,l.layoutVisibility.order]]),t[86]||(t[86]=(0,o.eW)(" แสดงคำสั่งซื้อ "))]),(0,o.Lk)("label",R,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=e=>l.layoutVisibility.enroll=e),class:"mr-2 rounded-sm border-gray-400"},null,512),[[n.lH,l.layoutVisibility.enroll]]),t[87]||(t[87]=(0,o.eW)(" แสดงการเรียน "))])])])])]),(0,o.Lk)("div",q,[(0,o.Lk)("div",B,[(0,o.Lk)("div",N,[t[91]||(t[91]=(0,o.Lk)("h1",{class:"text-base font-semibold text-gray-900"},"จัดการผู้เรียน",-1)),(0,o.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>r.toggleMobileSidebar&&r.toggleMobileSidebar(...e)),class:"p-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},t[90]||(t[90]=[(0,o.Lk)("i",{class:"fas fa-bars text-sm"},null,-1)]))])]),(0,o.Lk)("div",V,[l.showPasswordChangeModal?((0,o.uX)(),(0,o.CE)("div",j,[(0,o.Lk)("div",z,[t[94]||(t[94]=(0,o.Lk)("h2",{class:"text-2xl font-semibold mb-4"},"เปลี่ยนรหัสผ่านสมาชิก",-1)),(0,o.Lk)("form",{onSubmit:t[23]||(t[23]=(0,n.D$)(((...e)=>r.changePassword&&r.changePassword(...e)),["prevent"]))},[(0,o.Lk)("div",H,[t[92]||(t[92]=(0,o.Lk)("label",{for:"newPassword",class:"block text-sm font-medium text-gray-700"},"ระบุรหัสผ่านใหม่",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"newPassword","onUpdate:modelValue":t[21]||(t[21]=e=>l.newPassword=e),class:"mt-1 p-2 w-full border rounded-md",required:""},null,512),[[n.Jo,l.newPassword]])]),(0,o.Lk)("div",W,[(0,o.Lk)("button",{class:"text-sm text-gray-500 cursor-pointer hover:underline",onClick:t[22]||(t[22]=(...e)=>r.closePasswordChangeModal&&r.closePasswordChangeModal(...e))}," ยกเลิก "),t[93]||(t[93]=(0,o.Lk)("button",{type:"submit",class:"bg-indigo-500 text-white px-4 py-2 rounded-md"}," เปลี่ยนรหัส ",-1))])],32)])])):(0,o.Q3)("",!0),(0,o.bF)(ps,{showModal:l.showAddUserModal,onClose:r.closeAddUserModal,onSubmit:r.handleAddUserSubmit},null,8,["showModal","onClose","onSubmit"]),l.showQuickActions&&l.quickActionTarget?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:t[31]||(t[31]=(...e)=>r.hideQuickActions&&r.hideQuickActions(...e))},[(0,o.Lk)("div",{class:"bg-white rounded-lg shadow-lg p-6 w-96 max-w-md",onClick:t[30]||(t[30]=(0,n.D$)((()=>{}),["stop"]))},[(0,o.Lk)("div",K,[t[96]||(t[96]=(0,o.Lk)("h3",{class:"text-lg font-semibold text-gray-900"},"การดำเนินการเร็ว",-1)),(0,o.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>r.hideQuickActions&&r.hideQuickActions(...e)),class:"text-gray-400 hover:text-gray-600"},t[95]||(t[95]=[(0,o.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,o.Lk)("div",J,[(0,o.Lk)("div",G,[(0,o.Lk)("img",{src:l.quickActionTarget.avatar_img,class:"w-12 h-12 rounded-lg mr-3",alt:"Profile"},null,8,Y),(0,o.Lk)("div",null,[(0,o.Lk)("p",Z,(0,i.v_)(l.quickActionTarget.firstname)+" "+(0,i.v_)(l.quickActionTarget.lastname),1),(0,o.Lk)("p",ee,(0,i.v_)(l.quickActionTarget.email),1)])])]),(0,o.Lk)("div",te,[(0,o.Lk)("button",{onClick:t[25]||(t[25]=e=>r.quickSendMessage("welcome")),class:"w-full flex items-center gap-3 px-4 py-3 text-left bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors duration-200"},t[97]||(t[97]=[(0,o.Lk)("i",{class:"fas fa-envelope text-blue-600"},null,-1),(0,o.Lk)("div",null,[(0,o.Lk)("p",{class:"font-medium text-gray-900"},"ส่งข้อความต้อนรับ"),(0,o.Lk)("p",{class:"text-sm text-gray-500"},"ส่งอีเมลต้อนรับผู้เรียนใหม่")],-1)])),(0,o.Lk)("button",{onClick:t[26]||(t[26]=e=>r.quickSendMessage("reminder")),class:"w-full flex items-center gap-3 px-4 py-3 text-left bg-yellow-50 hover:bg-yellow-100 rounded-lg transition-colors duration-200"},t[98]||(t[98]=[(0,o.Lk)("i",{class:"fas fa-bell text-yellow-600"},null,-1),(0,o.Lk)("div",null,[(0,o.Lk)("p",{class:"font-medium text-gray-900"},"ส่งการแจ้งเตือน"),(0,o.Lk)("p",{class:"text-sm text-gray-500"},"แจ้งเตือนงานที่ค้างอยู่")],-1)])),(0,o.Lk)("button",{onClick:t[27]||(t[27]=t=>{e.$router.push("/student/detail/"+l.quickActionTarget._id),r.hideQuickActions()}),class:"w-full flex items-center gap-3 px-4 py-3 text-left bg-green-50 hover:bg-green-100 rounded-lg transition-colors duration-200"},t[99]||(t[99]=[(0,o.Lk)("i",{class:"fas fa-user-edit text-green-600"},null,-1),(0,o.Lk)("div",null,[(0,o.Lk)("p",{class:"font-medium text-gray-900"},"แก้ไขข้อมูล"),(0,o.Lk)("p",{class:"text-sm text-gray-500"},"ดูและแก้ไขรายละเอียดผู้เรียน")],-1)])),(0,o.Lk)("button",{onClick:t[28]||(t[28]=e=>{r.openPasswordChangeModal(l.quickActionTarget._id),r.hideQuickActions()}),class:"w-full flex items-center gap-3 px-4 py-3 text-left bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors duration-200"},t[100]||(t[100]=[(0,o.Lk)("i",{class:"fas fa-key text-purple-600"},null,-1),(0,o.Lk)("div",null,[(0,o.Lk)("p",{class:"font-medium text-gray-900"},"เปลี่ยนรหัสผ่าน"),(0,o.Lk)("p",{class:"text-sm text-gray-500"},"ตั้งรหัสผ่านใหม่ให้ผู้เรียน")],-1)])),(0,o.Lk)("button",{onClick:t[29]||(t[29]=e=>{r.quickEnrollStudent("default"),r.hideQuickActions()}),class:"w-full flex items-center gap-3 px-4 py-3 text-left bg-indigo-50 hover:bg-indigo-100 rounded-lg transition-colors duration-200"},t[101]||(t[101]=[(0,o.Lk)("i",{class:"fas fa-graduation-cap text-indigo-600"},null,-1),(0,o.Lk)("div",null,[(0,o.Lk)("p",{class:"font-medium text-gray-900"},"ลงทะเบียนเรียน"),(0,o.Lk)("p",{class:"text-sm text-gray-500"},"เพิ่มหลักสูตรให้ผู้เรียน")],-1)]))])])])):(0,o.Q3)("",!0),l.open?((0,o.uX)(),(0,o.CE)("div",se,[t[104]||(t[104]=(0,o.Lk)("div",{class:"fixed inset-0"},null,-1)),(0,o.Lk)("div",oe,[(0,o.Lk)("div",ae,[(0,o.Lk)("div",le,[(0,o.Lk)("div",re,[(0,o.Lk)("div",ie,[(0,o.Lk)("div",ne,[(0,o.Lk)("div",ce,[t[103]||(t[103]=(0,o.Lk)("h2",{class:"text-base font-semibold leading-6 text-gray-900",id:"slide-over-title"}," Panel title ",-1)),(0,o.Lk)("div",de,[(0,o.Lk)("button",{onClick:t[32]||(t[32]=(...e)=>r.closePanel&&r.closePanel(...e)),type:"button",class:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},t[102]||(t[102]=[(0,o.Lk)("span",{class:"absolute -inset-2.5"},null,-1),(0,o.Lk)("span",{class:"sr-only"},"Close panel",-1),(0,o.Lk)("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[(0,o.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),(0,o.Lk)("div",ue,[(0,o.Lk)("ul",ge,[(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"text-blue-600 hover:underline",onClick:t[33]||(t[33]=(...t)=>e.renderBilling&&e.renderBilling(...t))}," Render Billing ")]),(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"text-blue-600 hover:underline",onClick:t[34]||(t[34]=t=>e.renderEnroll())}," Render Enroll ")]),(0,o.Lk)("li",null,[(0,o.Lk)("button",{class:"text-blue-600 hover:underline",onClick:t[35]||(t[35]=(...t)=>e.renderProfile&&e.renderProfile(...t))}," Render Profile ")])])])])])])])])])):(0,o.Q3)("",!0),(0,o.bF)(fs,{processName:l.processName,progressText:l.progressText,progressTotal:l.progressTotal,progressCurrent:l.progressCurrent,isVisible:l.isProcessing,startTime:l.startTime,endTime:l.endTime,onClose:r.closeProgress},null,8,["processName","progressText","progressTotal","progressCurrent","isVisible","startTime","endTime","onClose"]),(0,o.Lk)("div",me,[(0,o.bF)(xs,{navigation:[{name:"เพิ่มผู้เรียน",function:"openAddUserModal",style:"user-plus",class:"success-btn",visible:!0,type:"button"},{name:"Export",function:"exportToCSV",style:"download",class:"primary-btn",visible:!0,type:"button"},{name:null,function:"togglePanel",style:"cogs",class:"default-btn",visible:!0,type:"button"},{name:null,function:"getData",style:"refresh",class:"default-btn",visible:!0,type:"button"},{name:"ย้อนกลับ",link:"/lesson/detail/"+this.dataItem,style:"chevron-left",class:"default-btn",visible:!0,type:"button"}],onOpenAddUserModal:r.openAddUserModal,onExportToCSV:r.exportToCSV,onTogglePanel:r.togglePanel,onGetData:r.getData},null,8,["navigation","onOpenAddUserModal","onExportToCSV","onTogglePanel","onGetData"])]),l.isShowingOverlay?((0,o.uX)(),(0,o.CE)("div",he,[(0,o.Lk)("div",pe,(0,i.v_)(l.loadingMessage),1),(0,o.Lk)("div",fe,(0,i.v_)(l.processingCount),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",xe,[(0,o.Lk)("div",be,[(0,o.Lk)("div",ye,[(0,o.Lk)("div",ke,[(0,o.Lk)("div",ve,[(0,o.Lk)("div",Le,[(0,o.Lk)("div",we,[(0,o.Lk)("div",Ce,[(0,o.bo)((0,o.Lk)("input",{id:"search",type:"text",class:"px-3 py-1.5 lg:px-4 lg:py-2 rounded-md border-gray-300 bg-white focus:outline-none w-full lg:w-48 text-sm",placeholder:"ค้นหา...","onUpdate:modelValue":t[36]||(t[36]=e=>l.searchQuery=e),onKeydown:t[37]||(t[37]=(...e)=>r.handleSearchKeydown&&r.handleSearchKeydown(...e))},null,544),[[n.Jo,l.searchQuery]]),l.searchQuery.length>0?((0,o.uX)(),(0,o.CE)("div",Te,[(0,o.Lk)("div",$e,[t[105]||(t[105]=(0,o.eW)(" ผลการค้นหา ")),(0,o.Lk)("span",Pe,(0,i.v_)(l.totalItems),1),t[106]||(t[106]=(0,o.eW)(" รายการ (s) ")),l.searchQuery.length>0?((0,o.uX)(),(0,o.CE)("button",{key:0,type:"button",class:"mt-1 lg:mt-2 text-blue-500 hover:underline focus:outline-none text-xs",onClick:t[38]||(t[38]=(...e)=>r.clearSearchQuery&&r.clearSearchQuery(...e))}," Clear ")):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ie,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[39]||(t[39]=e=>l.limitItem=e),onChange:t[40]||(t[40]=(...e)=>r.handleLimitChange&&r.handleLimitChange(...e)),class:"px-3 py-1.5 lg:px-4 lg:py-2 rounded-md border-gray-300 bg-white focus:outline-none w-full lg:w-24 lg:mr-2 text-sm"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.limitOptions,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,i.v_)(e),9,Ae)))),128))],544),[[n.u1,l.limitItem]]),(0,o.bF)(bs,{"current-page":l.currentPage,"total-items":l.totalItems,"total-pages":l.totalPages,"limit-items":l.limitItem,"data-loading":l.loading,"display-mode":"nav",onPageChanged:r.handlePageChanged,class:"mt-2 lg:mt-0"},null,8,["current-page","total-items","total-pages","limit-items","data-loading","onPageChanged"])])])])]),(0,o.bo)((0,o.Lk)("div",{class:(0,i.C4)(["bg-orange-100 border-b border-orange-200 flex-shrink-0",{hidden:!l.showBulkActions}])},[(0,o.Lk)("div",Me,[(0,o.Lk)("div",De,[(0,o.Lk)("div",Se,[t[107]||(t[107]=(0,o.Lk)("i",{class:"fas fa-info-circle text-orange-600 mr-2"},null,-1)),(0,o.Lk)("span",Ee," เลือกแล้ว "+(0,i.v_)(l.selectedItems.length)+" รายการ ",1)]),(0,o.Lk)("div",Fe,[(0,o.Lk)("button",{onClick:t[41]||(t[41]=(...e)=>r.bulkSendEmail&&r.bulkSendEmail(...e)),class:"px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"},t[108]||(t[108]=[(0,o.Lk)("i",{class:"fas fa-envelope mr-1"},null,-1),(0,o.eW)(" ส่งอีเมล ")])),(0,o.Lk)("button",{onClick:t[42]||(t[42]=(...e)=>r.exportToCSV&&r.exportToCSV(...e)),class:"px-2 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors"},t[109]||(t[109]=[(0,o.Lk)("i",{class:"fas fa-download mr-1"},null,-1),(0,o.eW)(" ส่งออก ")])),(0,o.Lk)("button",{onClick:t[43]||(t[43]=(...e)=>r.bulkDeleteItems&&r.bulkDeleteItems(...e)),class:"px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors"},t[110]||(t[110]=[(0,o.Lk)("i",{class:"fas fa-trash mr-1"},null,-1),(0,o.eW)(" ลบ ")])),(0,o.Lk)("button",{onClick:t[44]||(t[44]=e=>{l.selectedItems=[],l.showBulkActions=!1}),class:"px-2 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600 transition-colors"},t[111]||(t[111]=[(0,o.Lk)("i",{class:"fas fa-times mr-1"},null,-1),(0,o.eW)(" ยกเลิก ")]))])])])],2),[[n.aG,l.showBulkActions]]),(0,o.Lk)("div",_e,[(0,o.Lk)("div",Qe,[(0,o.Lk)("div",Oe,[(0,o.Lk)("label",Xe,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[45]||(t[45]=e=>l.layoutVisibility.order=e),class:"mr-1 rounded-sm border-gray-400"},null,512),[[n.lH,l.layoutVisibility.order]]),t[112]||(t[112]=(0,o.eW)(" คำสั่งซื้อ "))])]),(0,o.Lk)("div",Ue,[(0,o.Lk)("label",Re,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[46]||(t[46]=e=>l.layoutVisibility.enroll=e),class:"mr-1 rounded-sm border-gray-400"},null,512),[[n.lH,l.layoutVisibility.enroll]]),t[113]||(t[113]=(0,o.eW)(" การเรียน "))])])])]),(0,o.Lk)("div",qe,[(0,o.Lk)("div",Be,[(0,o.bo)((0,o.Lk)("div",{class:(0,i.C4)(["w-10 py-2 pl-2 text-center flex-shrink-0",{hidden:!l.bulkActionMode}])},[(0,o.Lk)("input",{type:"checkbox",onChange:t[47]||(t[47]=(...e)=>r.selectAllItems&&r.selectAllItems(...e)),checked:l.selectedItems.length===l.listItems.length&&l.listItems.length>0,indeterminate:l.selectedItems.length>0&&l.selectedItems.length<l.listItems.length,class:"rounded border-gray-400 w-3 h-3"},null,40,Ne)],2),[[n.aG,l.bulkActionMode]]),t[114]||(t[114]=(0,o.Fv)('<div class="w-12 py-2 pl-2 text-center flex-shrink-0">#</div><div class="flex-1 md:w-3/12 py-2 pl-3 text-left">ชื่อ-นามสกุล</div><div class="hidden md:block md:w-2/12 py-2 pl-3 text-left">Citizen ID</div><div class="hidden md:block md:w-2/12 py-2 pl-3 text-left">การติดต่อ</div><div class="hidden md:block w-1/12 py-2 pl-3 text-left">หลักสูตร</div><div class="hidden md:block w-2/12 py-2 pl-3 text-left"> วันที่ลงทะเบียน </div><div class="hidden md:block w-2/12 py-2 pl-3 text-left">เครื่องมือ</div>',7))])]),(0,o.Lk)("div",Ve,[(0,o.Lk)("div",null,[l.listItems&&l.listItems.length>0?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.visibleItems,((s,a)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:`user-${s._id}-${l.bulkActionMode}`},[(0,o.Lk)("div",{class:(0,i.C4)(["flex border-b border-gray-200 text-sm hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 transition-all duration-300 group",l.selectedItems.includes(s._id)?"bg-blue-50 shadow-md":""]),onMouseenter:e=>l.showRowActions=s._id,onMouseleave:t[48]||(t[48]=e=>l.showRowActions=null)},[(0,o.bo)((0,o.Lk)("div",{class:(0,i.C4)(["w-10 py-2 flex items-center justify-center flex-shrink-0",{hidden:!l.bulkActionMode}])},[(0,o.Lk)("input",{type:"checkbox",checked:l.selectedItems.includes(s._id),onChange:e=>r.toggleItemSelection(s._id),class:"rounded border-gray-400 focus:ring-2 focus:ring-blue-500 transition-colors w-3 h-3"},null,40,ze)],2),[[n.aG,l.bulkActionMode]]),(0,o.Lk)("div",He,[(0,o.Lk)("span",We,(0,i.v_)(r.leadingZero((l.currentPage-1)*l.limitItem+a+1)),1),t[115]||(t[115]=(0,o.Lk)("div",{class:"absolute inset-0 bg-blue-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300"},null,-1))]),(0,o.Lk)("div",Ke,[(0,o.bF)(hs,{to:"/student/detail/"+s._id,class:"text-gray-700 hover:text-indigo-600 transition-colors duration-200 block"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Je,[(0,o.Lk)("div",Ge,[(0,o.Lk)("div",Ye,[s.avatar_img&&!l.imageLoadErrors[s._id]?((0,o.uX)(),(0,o.CE)("img",{key:0,src:s.avatar_img,class:"w-full h-full object-cover absolute inset-0",alt:"Profile Image",onError:e=>l.imageLoadErrors[s._id]=!0,onLoad:e=>l.imageLoadErrors[s._id]=!1},null,40,Ze)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("div",{class:(0,i.C4)(["w-full h-full flex items-center justify-center text-white font-semibold text-sm",r.getAvatarColor(s.firstname+s.lastname)])},(0,i.v_)(r.getInitials(s.firstname,s.lastname)),3),[[n.aG,!s.avatar_img||l.imageLoadErrors[s._id]]])]),(0,o.Lk)("div",{class:(0,i.C4)(["absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-1 border-white shadow-sm",r.getActivityStatus(s).class]),title:r.getActivityStatus(s).text},null,10,et)]),(0,o.Lk)("div",tt,[(0,o.Lk)("div",st,[(0,o.Lk)("span",{class:"font-medium text-gray-900 group-hover:text-indigo-700 transition-colors text-sm truncate",innerHTML:s.firstname+" "+s.lastname+(s.old_id?" ("+s.old_id+")":"")},null,8,ot),(0,o.Lk)("span",{class:(0,i.C4)(["px-1.5 py-0.5 text-xs font-medium rounded-full transition-all duration-200 flex-shrink-0",r.getStatusBadge(s).class])},(0,i.v_)(r.getStatusBadge(s).text),3)]),(0,o.Lk)("div",at,[(0,o.Lk)("span",{class:"text-sm font-normal text-gray-500 truncate",innerHTML:s.token},null,8,lt),s.email?((0,o.uX)(),(0,o.CE)("i",rt)):(0,o.Q3)("",!0)])])])])),_:2},1032,["to"]),(0,o.Lk)("div",it,[(0,o.Lk)("div",nt,[(0,o.bF)(ys,{icon:["fas","id-card"],class:"text-gray-400 mr-2 w-4 text-center"}),(0,o.Lk)("span",{innerHTML:s.citizen},null,8,ct)]),(0,o.Lk)("div",dt,[(0,o.bF)(ys,{icon:["fas","phone"],class:"text-gray-400 mr-2 w-4 text-center"}),(0,o.Lk)("span",{innerHTML:s.phone},null,8,ut)]),(0,o.Lk)("div",gt,[(0,o.bF)(ys,{icon:["fas","envelope"],class:"text-gray-400 mr-2 w-4 text-center"}),(0,o.Lk)("span",{innerHTML:s.email,class:"truncate"},null,8,mt)])])]),(0,o.Lk)("div",ht,[(0,o.Lk)("div",{class:"flex items-center group/copy cursor-pointer",onClick:e=>r.copyToClipboard(s.citizen)},[(0,o.bF)(ys,{icon:["fas","id-card"],class:"text-gray-400 mt-[3px] mr-2 text-sm group-hover/copy:text-blue-500 transition-colors"}),(0,o.Lk)("span",{innerHTML:s.citizen,class:"group-hover/copy:text-blue-600 transition-colors"},null,8,ft),t[116]||(t[116]=(0,o.Lk)("i",{class:"fas fa-copy text-xs text-gray-400 ml-2 opacity-0 group-hover/copy:opacity-100 transition-opacity"},null,-1))],8,pt)]),(0,o.Lk)("div",xt,[(0,o.Lk)("div",bt,[(0,o.Lk)("div",yt,[(0,o.bF)(ys,{icon:["fas","phone"],class:"text-gray-400 mt-[3px] mr-2 text-sm"}),(0,o.Lk)("span",{innerHTML:s.phone,class:"text-sm"},null,8,kt),(0,o.Lk)("a",{href:`tel:${s.phone}`,class:"ml-2 text-green-600 hover:text-green-700 opacity-0 group-hover:opacity-100 transition-opacity"},t[117]||(t[117]=[(0,o.Lk)("i",{class:"fas fa-phone-alt text-xs"},null,-1)]),8,vt)]),(0,o.Lk)("div",Lt,[(0,o.bF)(ys,{icon:["fas","envelope"],class:"text-gray-400 mt-[3px] mr-2 text-sm"}),(0,o.Lk)("span",{innerHTML:s.email,class:"text-sm"},null,8,wt),(0,o.Lk)("a",{href:`mailto:${s.email}`,class:"ml-2 text-blue-600 hover:text-blue-700 opacity-0 group-hover:opacity-100 transition-opacity"},t[118]||(t[118]=[(0,o.Lk)("i",{class:"fas fa-external-link-alt text-xs"},null,-1)]),8,Ct)])])]),(0,o.Lk)("div",Tt,[(0,o.Lk)("div",$t,[(0,o.Lk)("span",Pt,(0,i.v_)(s.enrollCount||0),1),(0,o.Lk)("div",It,[(0,o.Lk)("div",{class:"bg-blue-600 h-1.5 rounded-full transition-all duration-500",style:(0,i.Tr)({width:Math.min(20*(s.enrollCount||0),100)+"%"})},null,4)]),t[119]||(t[119]=(0,o.Lk)("span",{class:"text-xs text-gray-500 mt-1"},"หลักสูตร",-1))])]),(0,o.Lk)("div",At,[(0,o.Lk)("div",Mt,(0,i.v_)(r.formatThaidate(s?.info?.regdate||s.createdAt||new Date)),1),(0,o.Lk)("div",Dt,(0,i.v_)(r.getRelativeTime(s?.info?.regdate||s.createdAt)),1)]),(0,o.Lk)("div",St,[(0,o.Lk)("div",Et,[(0,o.Lk)("button",{onClick:t=>e.$router.push("/student/detail/"+s._id),type:"button",class:"inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white px-2 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200",title:"ดูรายละเอียด"},[(0,o.bF)(ys,{icon:["fas","eye"],class:"mr-1 text-sm"}),t[120]||(t[120]=(0,o.Lk)("span",null,"ดู",-1))],8,Ft),(0,o.Lk)("button",{onClick:e=>r.safeShowQuickActions(s),type:"button",class:"inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white px-2 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-indigo-50 hover:border-indigo-300 hover:text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all duration-200",title:"การดำเนินการเร็ว"},t[121]||(t[121]=[(0,o.Lk)("i",{class:"fas fa-ellipsis-v"},null,-1)]),8,_t),(0,o.Lk)("button",{onClick:e=>r.openPasswordChangeModal(s._id),type:"button",class:"inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white px-2 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-purple-50 hover:border-purple-300 hover:text-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 transition-all duration-200",title:"เปลี่ยนรหัสผ่าน"},t[122]||(t[122]=[(0,o.Lk)("i",{class:"fas fa-key text-sm"},null,-1)]),8,Qt)])])],42,je),(0,o.Lk)("div",Ot,[(0,o.Lk)("div",Xt,[(0,o.Lk)("button",{onClick:t=>e.$router.push("/student/detail/"+s._id),type:"button",class:"mr-2 inline-flex justify-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,o.bF)(ys,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),t[123]||(t[123]=(0,o.Lk)("span",null,"รายละเอียด",-1))],8,Ut)])])],64)))),128)),l.lazy?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[l.isLoadingMore?((0,o.uX)(),(0,o.CE)("div",Rt,t[124]||(t[124]=[(0,o.Lk)("div",{class:"flex items-center gap-3 text-blue-600"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),(0,o.Lk)("span",{class:"text-sm font-medium"},"กำลังโหลดข้อมูลเพิ่ม...")],-1)]))):r.hasMoreItems?((0,o.uX)(),(0,o.CE)("div",qt,[(0,o.Lk)("button",{onClick:t[49]||(t[49]=(...e)=>r.loadMoreItems&&r.loadMoreItems(...e)),class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200"},[t[125]||(t[125]=(0,o.Lk)("i",{class:"fas fa-plus mr-2"},null,-1)),(0,o.eW)(" โหลดเพิ่ม ("+(0,i.v_)(Math.min(l.loadMoreCount,l.listItems.length-l.currentDisplayCount))+" รายการ) ",1)])])):l.listItems.length>l.initialDisplayCount?((0,o.uX)(),(0,o.CE)("div",Bt,[(0,o.Lk)("div",Nt,[t[126]||(t[126]=(0,o.Lk)("i",{class:"fas fa-check-circle"},null,-1)),(0,o.Lk)("span",Vt,"แสดงครบทั้งหมด "+(0,i.v_)(l.listItems.length)+" รายการแล้ว",1)])])):(0,o.Q3)("",!0)],64)):(0,o.Q3)("",!0)],64)):((0,o.uX)(),(0,o.CE)("div",jt,[(0,o.Lk)("div",zt,[t[129]||(t[129]=(0,o.Lk)("div",{class:"mb-6"},[(0,o.Lk)("div",{class:"mx-auto h-24 w-24 bg-gray-100 rounded-full flex items-center justify-center"},[(0,o.Lk)("i",{class:"fas fa-users text-gray-400 text-3xl"})])],-1)),t[130]||(t[130]=(0,o.Lk)("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"ไม่มีข้อมูลผู้เรียน",-1)),(0,o.Lk)("p",Ht,(0,i.v_)(l.searchQuery?"ไม่พบผลการค้นหาที่ตรงกับคำที่ระบุ":"ยังไม่มีผู้เรียนในระบบ"),1),(0,o.Lk)("div",Wt,[l.searchQuery?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:t[50]||(t[50]=(...e)=>r.clearSearchQuery&&r.clearSearchQuery(...e)),class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"},t[127]||(t[127]=[(0,o.Lk)("i",{class:"fas fa-times mr-2"},null,-1),(0,o.eW)(" ล้างการค้นหา ")]))):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[51]||(t[51]=(...e)=>r.getData&&r.getData(...e)),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"},t[128]||(t[128]=[(0,o.Lk)("i",{class:"fas fa-sync-alt mr-2"},null,-1),(0,o.eW)(" รีเฟรชข้อมูล ")]))])])])),l.loading?((0,o.uX)(),(0,o.CE)(o.FK,{key:2},(0,o.pI)(5,(e=>(0,o.Lk)("div",{key:e,class:"flex border-b border-gray-200 text-sm animate-pulse"},t[131]||(t[131]=[(0,o.Fv)('<div class="py-2 flex items-center justify-center bg-gray-100 w-12"><div class="h-3 w-6 bg-gray-300 rounded"></div></div><div class="py-2 pl-3 w-4/12"><div class="flex items-center"><div class="w-10 h-10 bg-gray-300 rounded-lg mr-2 flex items-center justify-center"><div class="w-6 h-6 bg-gray-400 rounded animate-pulse"></div></div><div class="flex-1"><div class="h-3 bg-gray-300 rounded w-3/4 mb-1"></div><div class="h-2 bg-gray-300 rounded w-1/2"></div></div></div></div><div class="w-2/12 py-2 pl-3 hidden md:block"><div class="h-3 bg-gray-300 rounded w-24"></div></div><div class="w-4/12 py-2 pl-3 pr-2 hidden md:block"><div class="space-y-1"><div class="h-2 bg-gray-300 rounded w-20"></div><div class="h-2 bg-gray-300 rounded w-28"></div></div></div><div class="w-1/12 py-2 pl-3 pr-2 hidden md:block"><div class="h-3 bg-gray-300 rounded w-6 mx-auto"></div></div><div class="w-2/12 py-2 pl-3 pr-2 hidden md:block"><div class="h-2 bg-gray-300 rounded w-12 mb-1"></div><div class="h-2 bg-gray-300 rounded w-10"></div></div><div class="w-3/12 py-2 pl-3 pr-2 hidden md:block"><div class="flex space-x-1"><div class="h-6 w-6 bg-gray-300 rounded"></div><div class="h-6 w-6 bg-gray-300 rounded"></div><div class="h-6 w-6 bg-gray-300 rounded"></div></div></div>',7)])))),64)):(0,o.Q3)("",!0)])],512),(0,o.Lk)("div",Kt,[(0,o.Lk)("div",Jt,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[52]||(t[52]=e=>l.limitItem=e),onChange:t[53]||(t[53]=(...e)=>r.handleLimitChange&&r.handleLimitChange(...e)),class:"px-3 py-1.5 rounded-md border-gray-300 bg-white focus:outline-none text-xs w-auto"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.limitOptions,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e,value:e},(0,i.v_)(e),9,Gt)))),128))],544),[[n.u1,l.limitItem]]),(0,o.bF)(bs,{"current-page":l.currentPage,"total-items":l.totalItems,"total-pages":l.totalPages,"limit-items":l.limitItem,"data-loading":l.loading,"display-mode":"nav",onPageChanged:r.handlePageChanged,size:"small"},null,8,["current-page","total-items","total-pages","limit-items","data-loading","onPageChanged"])])]),(0,o.Lk)("div",Yt,[l.lazy?((0,o.uX)(),(0,o.CE)("div",Zt," แสดง "+(0,i.v_)(r.visibleItems.length)+" จาก "+(0,i.v_)(l.listItems.length)+" รายการ (หน้าที่ "+(0,i.v_)(l.currentPage)+", ทั้งหมด "+(0,i.v_)(l.totalItems)+" รายการ) ",1)):(0,o.Q3)("",!0),(0,o.bF)(bs,{"current-page":l.currentPage,"total-items":l.totalItems,"total-pages":l.totalPages,"limit-items":l.limitItem,"data-loading":l.loading,"display-mode":"summary",onPageChanged:r.handlePageChanged},null,8,["current-page","total-items","total-pages","limit-items","data-loading","onPageChanged"])])])])])])])]),l.showMobileSidebar?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t[61]||(t[61]=(...e)=>r.toggleMobileSidebar&&r.toggleMobileSidebar(...e))},[(0,o.Lk)("div",{class:"w-64 h-full bg-white transform transition-transform duration-300",onClick:t[60]||(t[60]=(0,n.D$)((()=>{}),["stop"]))},[(0,o.Lk)("div",es,[(0,o.Lk)("div",ts,[t[133]||(t[133]=(0,o.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"จัดการผู้เรียน",-1)),(0,o.Lk)("button",{onClick:t[54]||(t[54]=(...e)=>r.toggleMobileSidebar&&r.toggleMobileSidebar(...e)),class:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},t[132]||(t[132]=[(0,o.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,o.Lk)("div",ss,[t[136]||(t[136]=(0,o.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"สถิติรวม",-1)),(0,o.Lk)("div",os,[(0,o.Lk)("div",as,[t[134]||(t[134]=(0,o.Lk)("span",{class:"text-sm text-gray-700"},"ทั้งหมด",-1)),(0,o.Lk)("span",ls,(0,i.v_)(l.totalItems),1)]),(0,o.Lk)("div",rs,[t[135]||(t[135]=(0,o.Lk)("span",{class:"text-sm text-gray-700"},"หน้าปัจจุบัน",-1)),(0,o.Lk)("span",is,(0,i.v_)(l.listItems.length),1)])])]),(0,o.Lk)("div",ns,[t[142]||(t[142]=(0,o.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"เครื่องมือ",-1)),(0,o.Lk)("nav",cs,[(0,o.Lk)("button",{onClick:t[55]||(t[55]=e=>{r.openAddUserModal(),r.toggleMobileSidebar()}),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-green-600 hover:bg-green-100 hover:text-green-900 rounded-lg transition-colors duration-200"},t[137]||(t[137]=[(0,o.Lk)("i",{class:"fas fa-user-plus text-sm w-4"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"เพิ่มผู้เรียนใหม่",-1)])),(0,o.Lk)("button",{onClick:t[56]||(t[56]=e=>{r.getData,r.toggleMobileSidebar()}),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[138]||(t[138]=[(0,o.Lk)("i",{class:"fas fa-sync-alt text-sm w-4"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"รีเฟรชข้อมูล",-1)])),(0,o.Lk)("button",{onClick:t[57]||(t[57]=e=>{r.togglePanel,r.toggleMobileSidebar()}),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[139]||(t[139]=[(0,o.Lk)("i",{class:"fas fa-cogs text-sm w-4"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"เครื่องมือขั้นสูง",-1)])),(0,o.Lk)("button",{onClick:t[58]||(t[58]=e=>{r.safeToggleBulkMode,r.toggleMobileSidebar()}),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[140]||(t[140]=[(0,o.Lk)("i",{class:"fas fa-check-square text-sm w-4"},null,-1),(0,o.Lk)("span",{class:"flex-1 text-left"},"จัดการหลายรายการ",-1)])),(0,o.Lk)("button",{onClick:t[59]||(t[59]=(...e)=>r.toggleLazyMode&&r.toggleLazyMode(...e)),class:(0,i.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200",[l.lazy?"bg-green-50 text-green-600":"bg-red-50 text-red-600"]])},[t[141]||(t[141]=(0,o.Lk)("i",{class:"fas fa-rocket text-sm w-4"},null,-1)),(0,o.Lk)("span",ds,(0,i.v_)(l.lazy?"Progressive Loading (เปิด)":"แสดงทั้งหมด (ปิด)"),1),(0,o.Lk)("div",us,[(0,o.Lk)("span",gs,(0,i.v_)(l.lazy?"ON":"OFF"),1)])],2)])])])])])):(0,o.Q3)("",!0)],2),l.loading_sources?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",ms,[(0,o.bF)(ks)]))],64)}s(98992),s(54520),s(72577),s(3949),s(81454),s(14603),s(47566),s(98721);var ps=s(40475),fs=s(75435),xs=s(87814),bs=s(38558),ys=s(86530);const ks={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50"},vs={class:"bg-white rounded-lg shadow-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto add-user-modal"},Ls={class:"flex items-center justify-between mb-6"},ws={class:"mb-6"},Cs={class:"border-b border-gray-200"},Ts={class:"-mb-px flex space-x-8"},$s={class:"space-y-6"},Ps={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Is={class:"md:col-span-2"},As={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ms={class:"space-y-3"},Ds={class:"flex items-center"},Ss={class:"flex items-center"},Es={class:"space-y-6"},Fs={class:"mb-4"},_s={key:0,class:"mt-4"},Qs={class:"flex flex-wrap gap-2"},Os=["onClick"],Xs={class:"flex justify-between items-center mt-8 pt-6 border-t border-gray-200"},Us=["disabled"],Rs={key:0,class:"fas fa-user-plus"},qs={key:1,class:"fas fa-spinner fa-spin"};function Bs(e,t,s,a,l,r){const c=(0,o.g2)("TaxonomySelector");return s.showModal?((0,o.uX)(),(0,o.CE)("div",ks,[(0,o.Lk)("div",vs,[(0,o.Lk)("div",Ls,[t[17]||(t[17]=(0,o.Lk)("h2",{class:"text-xl font-semibold text-gray-900"},"เพิ่มผู้เรียนใหม่",-1)),(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.closeModal&&r.closeModal(...e)),class:"text-gray-400 hover:text-gray-600"},t[16]||(t[16]=[(0,o.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,o.Lk)("div",ws,[(0,o.Lk)("div",Cs,[(0,o.Lk)("nav",Ts,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>r.switchTab("general")),class:(0,i.C4)(["py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200","general"===l.activeTab?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},t[18]||(t[18]=[(0,o.Lk)("i",{class:"fas fa-user mr-2"},null,-1),(0,o.eW)(" รายละเอียดทั่วไป ")]),2),(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>r.switchTab("taxonomy")),class:(0,i.C4)(["py-2 px-1 border-b-2 font-medium text-sm transition-colors duration-200","taxonomy"===l.activeTab?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},t[19]||(t[19]=[(0,o.Lk)("i",{class:"fas fa-tags mr-2"},null,-1),(0,o.eW)(" หมวดหมู่ข้อมูล ")]),2)])])]),(0,o.Lk)("form",{onSubmit:t[13]||(t[13]=(0,n.D$)(((...e)=>r.submitForm&&r.submitForm(...e)),["prevent"])),class:"space-y-6"},[(0,o.bo)((0,o.Lk)("div",$s,[(0,o.Lk)("div",null,[t[25]||(t[25]=(0,o.Lk)("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ข้อมูลส่วนตัว",-1)),(0,o.Lk)("div",Ps,[(0,o.Lk)("div",null,[t[20]||(t[20]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ชื่อ *",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.formData.firstName=e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"กรุณากรอกชื่อ",required:""},null,512),[[n.Jo,l.formData.firstName]])]),(0,o.Lk)("div",null,[t[21]||(t[21]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"นามสกุล *",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.formData.lastName=e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"กรุณากรอกนามสกุล",required:""},null,512),[[n.Jo,l.formData.lastName]])]),(0,o.Lk)("div",null,[t[22]||(t[22]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"อีเมล *",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.formData.email=e),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"example@email.com",required:""},null,512),[[n.Jo,l.formData.email]])]),(0,o.Lk)("div",null,[t[23]||(t[23]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"หมายเลขโทรศัพท์",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.formData.phone=e),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"08XXXXXXXX"},null,512),[[n.Jo,l.formData.phone]])]),(0,o.Lk)("div",Is,[t[24]||(t[24]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"เลขบัตรประชาชน",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.formData.idCard=e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"X-XXXX-XXXXX-XX-X",maxlength:"17"},null,512),[[n.Jo,l.formData.idCard]])])])]),(0,o.Lk)("div",null,[t[28]||(t[28]=(0,o.Lk)("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ข้อมูลบัญชี",-1)),(0,o.Lk)("div",As,[(0,o.Lk)("div",null,[t[26]||(t[26]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"รหัสผ่านเริ่มต้น *",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>l.formData.password=e),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"กรุณากรอกรหัสผ่าน",required:""},null,512),[[n.Jo,l.formData.password]])]),(0,o.Lk)("div",null,[t[27]||(t[27]=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"ยืนยันรหัสผ่าน *",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>l.formData.confirmPassword=e),type:"password",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"กรุณายืนยันรหัสผ่าน",required:""},null,512),[[n.Jo,l.formData.confirmPassword]])])])]),(0,o.Lk)("div",null,[t[31]||(t[31]=(0,o.Lk)("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"ตัวเลือกเพิ่มเติม",-1)),(0,o.Lk)("div",Ms,[(0,o.Lk)("label",Ds,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>l.formData.sendWelcomeEmail=e),type:"checkbox",class:"rounded border-gray-300 text-green-600 focus:ring-green-500"},null,512),[[n.lH,l.formData.sendWelcomeEmail]]),t[29]||(t[29]=(0,o.Lk)("span",{class:"ml-2 text-sm text-gray-700"},"ส่งอีเมลต้อนรับไปยังผู้เรียน",-1))]),(0,o.Lk)("label",Ss,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>l.formData.forcePasswordChange=e),type:"checkbox",class:"rounded border-gray-300 text-green-600 focus:ring-green-500"},null,512),[[n.lH,l.formData.forcePasswordChange]]),t[30]||(t[30]=(0,o.Lk)("span",{class:"ml-2 text-sm text-gray-700"},"บังคับให้เปลี่ยนรหัสผ่านในการเข้าใช้งานครั้งแรก",-1))])])])],512),[[n.aG,"general"===l.activeTab]]),(0,o.bo)((0,o.Lk)("div",Es,[(0,o.Lk)("div",null,[t[35]||(t[35]=(0,o.Lk)("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"หมวดหมู่ข้อมูล",-1)),(0,o.Lk)("div",Fs,[t[32]||(t[32]=(0,o.Lk)("p",{class:"text-sm text-gray-600 mb-3"},"เลือกหมวดหมู่ที่เหมาะสมสำหรับผู้เรียนใหม่",-1)),(0,o.bF)(c,{modelValue:l.formData.taxonomyTerms,"onUpdate:modelValue":t[12]||(t[12]=e=>l.formData.taxonomyTerms=e),"content-type":"member","content-type-label":"สมาชิก","max-selections":10},null,8,["modelValue"])]),l.formData.taxonomyTerms&&l.formData.taxonomyTerms.length>0?((0,o.uX)(),(0,o.CE)("div",_s,[t[34]||(t[34]=(0,o.Lk)("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"หมวดหมู่ที่เลือก:",-1)),(0,o.Lk)("div",Qs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.formData.taxonomyTerms,(e=>((0,o.uX)(),(0,o.CE)("span",{key:e,class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},[(0,o.eW)((0,i.v_)(r.getTermDisplayName(e))+" ",1),(0,o.Lk)("button",{onClick:t=>r.removeTermFromSelection(e),class:"ml-1 text-green-600 hover:text-green-800"},t[33]||(t[33]=[(0,o.Lk)("i",{class:"fas fa-times text-xs"},null,-1)]),8,Os)])))),128))])])):(0,o.Q3)("",!0)])],512),[[n.aG,"taxonomy"===l.activeTab]])],32),(0,o.Lk)("div",Xs,[(0,o.Lk)("button",{type:"button",onClick:t[14]||(t[14]=(...e)=>r.closeModal&&r.closeModal(...e)),class:"px-6 py-2 text-sm text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"}," ยกเลิก "),(0,o.Lk)("button",{type:"button",onClick:t[15]||(t[15]=(...e)=>r.submitForm&&r.submitForm(...e)),disabled:l.isSubmitting,class:"px-6 py-2 text-sm text-white bg-green-600 rounded-md hover:bg-green-700 transition-colors flex items-center gap-2"},[l.isSubmitting?((0,o.uX)(),(0,o.CE)("i",qs)):((0,o.uX)(),(0,o.CE)("i",Rs)),t[36]||(t[36]=(0,o.eW)(" เพิ่มผู้เรียน "))],8,Us)])])])):(0,o.Q3)("",!0)}var Ns=s(63112),Vs=s(11480),js={name:"AddUserModal",components:{TaxonomySelector:Vs.A},setup(){const{taxonomy:e,state:t,loading:s,error:o,fetchTaxonomyData:a}=(0,Ns.Di)();return{taxonomy:e,taxonomyState:t,taxonomyLoading:s,taxonomyError:o,fetchTaxonomyData:a}},props:{showModal:{type:Boolean,default:!1}},data(){return{activeTab:"general",isSubmitting:!1,formData:{firstName:"",lastName:"",email:"",phone:"",idCard:"",password:"",confirmPassword:"",sendWelcomeEmail:!1,forcePasswordChange:!0,taxonomyTerms:[]}}},methods:{closeModal(){this.resetForm(),this.$emit("close")},submitForm(){if(this.formData.password!==this.formData.confirmPassword)return void alert("รหัสผ่านไม่ตรงกัน");if(!this.formData.firstName||!this.formData.lastName||!this.formData.email)return void alert("กรุณากรอกข้อมูลที่จำเป็น");const e={...this.formData,taxonomy_terms:this.formData.taxonomyTerms};this.$emit("submit",e),this.resetForm(),this.$emit("close")},resetForm(){this.activeTab="general",this.formData={firstName:"",lastName:"",email:"",phone:"",idCard:"",password:"",confirmPassword:"",sendWelcomeEmail:!1,forcePasswordChange:!0,taxonomyTerms:[]}},getTermDisplayName(e){if(!this.taxonomyState?.isReady)return`รายการ ${e}`;const t=this.taxonomyState.terms.find((t=>t._id===e));return t?t.customData?.name||t.customData?.ชื่อ||t.customData?.title||t.name||t.code||"ไม่มีชื่อ":`รายการ ${e}`},getTermGroupName(e){if(!this.taxonomyState?.isReady)return"ไม่ระบุกลุ่ม";const t=this.taxonomyState.terms.find((t=>t._id===e));if(!t||!t.taxonomy)return"ไม่ระบุกลุ่ม";const s=this.taxonomyState.groups.find((e=>e._id===t.taxonomy));return s&&(s.name||s.code)||"ไม่ระบุกลุ่ม"},removeTermFromSelection(e){this.formData.taxonomyTerms&&Array.isArray(this.formData.taxonomyTerms)&&(this.formData.taxonomyTerms=this.formData.taxonomyTerms.filter((t=>t!==e)),console.log(`🗑️ ลบ taxonomy term: ${e} ออกจากการเลือก`),console.log("📋 taxonomy terms ที่เหลือ:",this.formData.taxonomyTerms))},switchTab(e){this.activeTab=e}},async mounted(){try{console.log("🔄 กำลังโหลดระบบ Taxonomy สำหรับ AddUserModal..."),this.fetchTaxonomyData&&(await this.fetchTaxonomyData(!0),console.log("✅ โหลด Taxonomy เสร็จแล้ว"))}catch(e){console.error("Error loading taxonomy in AddUserModal:",e)}}},zs=s(64621);const Hs=(0,zs.A)(js,[["render",Bs],["__scopeId","data-v-6ab93453"]]);var Ws=Hs,Ks=s(9964),Js=s(21396),Gs=s.n(Js),Ys={props:{headerType:{type:String,default:null,validator:e=>["topbar","breadcrumb","full-admin",null].includes(e)},headerHeight:{type:[Number,String],default:null},customHeight:{type:String,default:null},customClass:{type:String,default:""}},data(){const e=ps.A.get("session"),t=ps.A.get("paging");return{open:!1,dataItem:this.$route.params.id,school:e.current.id,login:e.login,courseData:[],listItems:[],categoryData:[],loading_sources:!0,endpoint:"",master:e.master,accessToken:ps.A.get("session","token"),configs:ps.A.get("configs"),session:ps.A.get("session"),limitOptions:[1,10,50,100,200,500,1e3,2e3,3e3,4e3],totalPages:0,totalItems:0,limitItem:50,currentPage:1,searchQuery:"",debounceTimer:null,pagingInfo:t||{[this.$route.path]:{limitItem:50,currentPage:1,searchQuery:""}},showPasswordChangeModal:!1,newPassword:"",loading:!1,showingOverlay:!1,statusFilter:"all",isCreatingUser:!1,isShowingOverlay:!1,loadingMessage:"",processingCount:"",activeBlock:!1,scb:[],isProcessing:!1,processName:"",progressText:"",progressTotal:0,progressCurrent:0,startTime:null,endTime:null,layoutVisibility:{order:!0,enroll:!0},showMobileSidebar:!1,showAdvancedFilter:!1,showRowActions:null,copiedId:null,lazy:!0,initialDisplayCount:30,loadMoreCount:10,currentDisplayCount:30,isLoadingMore:!1,filterOptions:{dateRange:{start:null,end:null},enrollmentCount:{min:null,max:null},status:"all",hasAvatar:null,registrationSource:"all"},selectedItems:[],bulkActionMode:!1,showBulkActions:!1,exportLoading:!1,exportProgress:0,showQuickActions:!1,quickActionTarget:null,imageLoadErrors:{},showAddUserModal:!1}},components:{Loader:fs.A,Subhead:xs.A,Pagination:bs.A,BatchProgress:ys.A,AddUserModal:Ws},methods:{async batchProcessInChunks(){this.isProcessing=!0,this.processName="Processing Items",this.progressTotal=28779,this.progressCurrent=0,this.startTime=(new Date).toISOString(),this.endTime=null;const e=Math.ceil(this.totalItems/this.limitItem);let t=0;for(let s=1;s<=e;s++){await this.getData(s,this.limitItem,!0);for(const e of this.listItems){const s=await this.fetchAdditionalData(e);if(s&&s[0]){console.log("User",e._id),console.log("Form",s[0].formData["upload-33-13-13"].value[0]);const t=s[0].formData["upload-33-13-13"].value[0];await this.updateAvatarImg(e,t)}if(this.progressCurrent++,this.progressText=`Processing: ${this.progressCurrent}/${this.progressTotal}`,t++,t%100===0&&await this.delay(1e3),t>=28779)return this.progressText="Processed 200 items, stopping...",this.endTime=(new Date).toISOString(),void(this.isProcessing=!1)}}this.progressText="All Process: Done",this.endTime=(new Date).toISOString(),this.isProcessing=!1},delay(e){return new Promise((t=>setTimeout(t,e)))},async updateAvatarImg(e,t){const s={data:{avatar_img:t},options:{}};try{const{data:t,status:o}=await this.$Request.PUT(`user/${e._id}`,s,this.configs.key);200===o?console.log(`Avatar updated for user ${e._id} ${t}`):console.error(`Failed to update avatar for user ${e._id}`)}catch(o){console.error(`Error updating avatar for user ${e._id}:`,o)}},async fetchAdditionalData(e){try{const t=await this.$Request.POST("form/query",{method:"find",args:[{$and:[{userID:e._id}]}]},this.configs.key);return t.data}catch(t){return console.error("Error fetching additional data:",t),null}},openPasswordChangeModal(e){this.userIdForPasswordChange=e,this.showPasswordChangeModal=!0},closePasswordChangeModal(){this.showPasswordChangeModal=!1},openAddUserModal(){this.showAddUserModal=!0},closeAddUserModal(){this.showAddUserModal=!1},async handleAddUserSubmit(e){console.log("Form submitted:",e),console.log("Taxonomy terms selected:",e.taxonomy_terms)},async changePassword(){try{const e=this.userIdForPasswordChange;console.log(e);const t=Gs().lib.WordArray.random(16),s=Gs().SHA256(this.newPassword+t).toString(),{data:o,status:a}=await this.$Request.PUT(`user/${e}`,{data:{password:s,salt:t.toString(),req_reset:!0}},this.configs.key);console.log("Data:",o),console.log("Status:",a),200===a?(console.log("Password changed successfully!"),this.closePasswordChangeModal()):console.error("Failed to change password.")}catch(e){console.error("An error occurred while changing the password:",e)}},togglePanel(){this.open=!this.open},closePanel(){this.open=!1},leadingZero(e){return e<10?"0"+e:e.toString()},formatThaidate(e){return Ks.A.toThaiDatetime(e,"short")},updateURLParameters(){const e=new URLSearchParams(window.location.search);this.currentPage>1?e.set("page",this.currentPage):e.delete("page"),this.searchQuery?e.set("searchQuery",this.searchQuery):e.delete("searchQuery");const t=`${window.location.pathname}?${e.toString()}`;window.history.replaceState({},"",t)},handleLimitChange(){console.log(`🔄 Limit changed to: ${this.limitItem}`);const e=ps.A.get("paging")||{};e[this.$route.path]={limitItem:this.limitItem,currentPage:1,searchQuery:this.searchQuery},ps.A.set("paging",e),this.updateURLParameters(),this.getData()},handlePageChanged(e){if(e!==this.currentPage){window.scrollTo(0,0),this.currentPage=e;const t=ps.A.get("paging")||{};t[this.$route.path]={limitItem:this.limitItem,currentPage:this.currentPage,searchQuery:this.searchQuery},ps.A.set("paging",t),this.updateURLParameters(),this.getData()}},clearSearchQuery(){this.searchQuery="";const e=ps.A.get("paging")||{};e[this.$route.path]={limitItem:this.limitItem,currentPage:this.currentPage,searchQuery:this.searchQuery},ps.A.set("paging",e),this.updateURLParameters(),this.handleSearchKeydown({key:"Enter"}),this.getData()},handleSearchKeydown(e){clearTimeout(this.debounceTimer);const t=()=>{this.getData();const e=ps.A.get("paging")||{};e[this.$route.path]={limitItem:this.limitItem,currentPage:1,searchQuery:this.searchQuery},ps.A.set("paging",e),this.updateURLParameters(),this.handlePageChanged(1)};"Enter"===e.key&&this.searchQuery.length>=3?t():this.debounceTimer=setTimeout(t,500)},toggleStatus(e){console.log("Toggle Status",e),this.statusFilter=e,this.getData()},closeProgress(){this.isProcessing=!1},async batchProcess(){this.open=!1;let e=this.listItems.length,t=0;this.isProcessing=!0,this.processName="Render Billing",this.progressTotal=e,this.startTime=(new Date).toISOString(),this.endTime=null;for(const s of this.listItems)t++,this.progressText=`Processing : ${t}/${e}`,this.progressCurrent=t,await this.executeCustomQueries(s.order.ref,s.order._id);this.progressText="All Process : Done",this.endTime=(new Date).toISOString()},async getData(e=this.currentPage,t=this.limitItem,s=!1){const o=performance.now();console.log(`⏱️ getData started - Page: ${e}, Limit: ${t}, Silent: ${s}`),this.listItems=[],this.totalItems=0,s||(this.loading=!0,this.activeBlock=!0);try{let a=[{parent:this.session.current._id}];if(this.searchQuery&&a.push({$or:[{name:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{citizen:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{email:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{firstname:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{lastname:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{old_id:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{phone:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{token:{$regex:`.*${this.searchQuery}.*`,$options:"i"}}]}),this.filterOptions.dateRange.start||this.filterOptions.dateRange.end){const e={};this.filterOptions.dateRange.start&&(e.$gte=new Date(this.filterOptions.dateRange.start)),this.filterOptions.dateRange.end&&(e.$lte=new Date(this.filterOptions.dateRange.end)),a.push({createdAt:e})}null!==this.filterOptions.hasAvatar&&(this.filterOptions.hasAvatar?a.push({avatar_img:{$exists:!0,$nin:[null,""]}}):a.push({$or:[{avatar_img:{$exists:!1}},{avatar_img:null},{avatar_img:""}]})),"all"!==this.filterOptions.status&&a.push({status:this.filterOptions.status});const l=[{$match:{$and:a}},{$lookup:{from:"enroll",let:{userId:{$toString:"$_id"}},pipeline:[{$match:{$expr:{$eq:["$userID","$$userId"]}}},{$project:{_id:1}}],as:"enrolls"}},{$addFields:{enrollCount:{$size:"$enrolls"}}},{$unset:"enrolls"},...null!==this.filterOptions.enrollmentCount.min||null!==this.filterOptions.enrollmentCount.max?[{$match:{$and:[...null!==this.filterOptions.enrollmentCount.min?[{enrollCount:{$gte:parseInt(this.filterOptions.enrollmentCount.min)}}]:[],...null!==this.filterOptions.enrollmentCount.max?[{enrollCount:{$lte:parseInt(this.filterOptions.enrollmentCount.max)}}]:[]]}}]:[],{$facet:{paginatedData:[{$skip:(e-1)*t},{$limit:t},{$project:{user:"$$ROOT"}}],totalCount:[{$count:"count"}]}}],r=performance.now();console.log(`🔍 MongoDB query started - Pipeline stages: ${l.length}`);const{data:i}=await this.$Request.POST("user/aggregate",{pipeline:l},this.configs.key),n=performance.now(),c=(n-r).toFixed(2);if(console.log(`📊 MongoDB query completed - Time: ${c}ms, Data size: ${JSON.stringify(i).length} bytes`),i&&i.length>0){const a=i[0];if(a.paginatedData&&a.paginatedData.length>0){const l=a.paginatedData,r=a.totalCount[0].count,i=performance.now();console.log(`🔄 Data transformation started - Items to process: ${l.length}`);const n={data:l,total:r,paging:{page:e,limit:t,totalPages:Math.ceil(r/t)}};this.listItems=n.data.map((e=>{const t={...e.user};return Object.keys(t).forEach((e=>{const s=t[e];if("string"===typeof s){const o=s.toLowerCase(),a=this.searchQuery.toLowerCase(),l=o.indexOf(a);if(-1!==l&&a.length>0){const o=l+a.length,r=s.substring(0,l)+'<span class="text-red-500 font-bold">'+s.substring(l,o)+"</span>"+s.substring(o);t[e]=r}}})),t}));const d=performance.now(),u=(d-i).toFixed(2);console.log(`✨ Data transformation completed - Time: ${u}ms, Items processed: ${this.listItems.length}`),this.totalItems=n.total,this.totalPages=n.paging.totalPages,s||(this.loading=!1,this.activeBlock=!1);const g=performance.now(),m=(g-o).toFixed(2),h=c,p=(parseFloat(m)-parseFloat(c)-parseFloat(u)).toFixed(2);console.log(`✅ getData completed - Total: ${m}ms`),console.log("📈 Performance breakdown:"),console.log(`  🔗 Network + Overhead: ${p}ms`),console.log(`  🗄️  MongoDB Processing: ${h}ms`),console.log(`  🔄 Data Transformation: ${u}ms`),console.log(`  📊 Items: ${this.listItems.length}, Total Records: ${this.totalItems}`),this.lazy&&this.resetDisplayCount(),await this.$nextTick(),await new Promise((e=>{requestAnimationFrame((()=>{requestAnimationFrame((()=>{setTimeout(e,0)}))}))}));const f=performance.now(),x=(f-o).toFixed(2),b=(f-g).toFixed(2);console.log(`🏁 Final completion (including DOM render) - Total: ${x}ms`),console.log(`🎨 DOM Render Time: ${b}ms`),console.log("📈 Complete breakdown:"),console.log(`  🔗 Network + Overhead: ${p}ms`),console.log(`  🗄️  MongoDB Processing: ${h}ms`),console.log(`  🔄 Data Transformation: ${u}ms`),console.log(`  🎨 DOM Rendering: ${b}ms`),console.log(`  📊 Performance ratio: MongoDB(${(parseFloat(h)/parseFloat(x)*100).toFixed(1)}%) | Transform(${(parseFloat(u)/parseFloat(x)*100).toFixed(1)}%) | Render(${(parseFloat(b)/parseFloat(x)*100).toFixed(1)}%)`)}else console.error("Paginated data is missing or empty.")}else console.error("No data in 'restReturn' or 'restReturn' is empty.")}catch(a){console.log(a);const e=performance.now(),t=(e-o).toFixed(2);console.log(`❌ getData error - Time: ${t}ms, Error:`,a)}finally{s||(this.loading=!1,this.activeBlock=!1)}},toggleMobileSidebar(){this.showMobileSidebar=!this.showMobileSidebar},calculateHeaderHeight(){if(this.customHeight||this.headerHeight){if(this.headerHeight){const e="number"===typeof this.headerHeight?`${this.headerHeight}px`:this.headerHeight;document.documentElement.style.setProperty("--header-height",e)}return}if(!this.$el||"function"!==typeof this.$el.getBoundingClientRect){console.log("List Component: Element not ready yet, using default height");const e=window.innerWidth<=768?56:80;return void document.documentElement.style.setProperty("--header-height",`${e}px`)}let e=0;const t=["header",".header",".navbar",".topbar",".breadcrumb",".access-bar",'[class*="header"]','[class*="navbar"]','[class*="topbar"]','[role="banner"]'];if(t.forEach((t=>{try{const s=document.querySelectorAll(t);s.forEach((t=>{t&&this.isElementAbove(t)&&(e+=t.offsetHeight)}))}catch(s){console.warn(`Error checking element with selector ${t}:`,s)}})),0===e)switch(this.headerType){case"topbar":e=120;break;case"breadcrumb":e=140;break;case"full-admin":e=160;break;default:e=window.innerWidth<=768?56:80}e+=8,document.documentElement.style.setProperty("--header-height",`${e}px`),console.log(`List Component: Calculated header height = ${e}px`)},isElementAbove(e){if(!e||!this.$el)return!1;if("function"!==typeof this.$el.getBoundingClientRect)return console.warn("this.$el is not a valid DOM element"),!1;try{const t=e.getBoundingClientRect(),s=this.$el.getBoundingClientRect();return t.bottom<=s.top}catch(t){return console.warn("Error in isElementAbove:",t),!1}},toggleAdvancedFilter(){this.showAdvancedFilter=!this.showAdvancedFilter},applyAdvancedFilter(){this.currentPage=1,this.getData(),this.showAdvancedFilter=!1},clearAdvancedFilter(){this.filterOptions={dateRange:{start:null,end:null},enrollmentCount:{min:null,max:null},status:"all",hasAvatar:null,registrationSource:"all"},this.getData()},toggleBulkMode(){this.bulkActionMode=!this.bulkActionMode,this.selectedItems=[],this.showBulkActions=!1,this.$nextTick((()=>{console.log("Bulk mode toggled:",this.bulkActionMode)}))},toggleItemSelection(e){const t=this.selectedItems.indexOf(e);t>-1?this.selectedItems.splice(t,1):this.selectedItems.push(e),this.showBulkActions=this.selectedItems.length>0},selectAllItems(){this.selectedItems.length===this.listItems.length?this.selectedItems=[]:this.selectedItems=this.listItems.map((e=>e._id)),this.showBulkActions=this.selectedItems.length>0},async bulkDeleteItems(){if(confirm(`คุณต้องการลบรายการที่เลือก ${this.selectedItems.length} รายการใช่หรือไม่?`)){this.isProcessing=!0,this.processName="กำลังลบข้อมูล",this.progressTotal=this.selectedItems.length,this.progressCurrent=0;for(const t of this.selectedItems)try{await this.$Request.DELETE(`user/${t}`,{},this.configs.key),this.progressCurrent++,this.progressText=`ลบแล้ว: ${this.progressCurrent}/${this.progressTotal}`}catch(e){console.error(`Error deleting user ${t}:`,e)}this.isProcessing=!1,this.selectedItems=[],this.showBulkActions=!1,this.bulkActionMode=!1,await this.getData()}},async bulkSendEmail(){if(confirm(`คุณต้องการส่งอีเมลไปยัง ${this.selectedItems.length} คนใช่หรือไม่?`)){this.isProcessing=!0,this.processName="กำลังส่งอีเมล",this.progressTotal=this.selectedItems.length,this.progressCurrent=0;for(const t of this.selectedItems)try{const e=this.listItems.find((e=>e._id===t));e&&e.email&&(await this.$Request.POST("email/send",{to:e.email,subject:"การแจ้งเตือนจากระบบ",template:"notification",data:{name:e.firstname+" "+e.lastname}},this.configs.key),this.progressCurrent++,this.progressText=`ส่งแล้ว: ${this.progressCurrent}/${this.progressTotal}`)}catch(e){console.error(`Error sending email to user ${t}:`,e)}this.isProcessing=!1,this.selectedItems=[],this.showBulkActions=!1}},async exportToCSV(){this.exportLoading=!0,this.exportProgress=0;try{const e=await this.$Request.POST("user/export",{format:"csv",filters:this.getExportFilters(),selectedIds:this.selectedItems.length>0?this.selectedItems:null},this.configs.key),t=new Blob([e.data],{type:"text/csv"}),s=window.URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`students_${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(s)}catch(e){console.error("Export error:",e),alert("เกิดข้อผิดพลาดในการส่งออกข้อมูล")}finally{this.exportLoading=!1}},async exportToExcel(){this.exportLoading=!0;try{const e=await this.$Request.POST("user/export",{format:"excel",filters:this.getExportFilters(),selectedIds:this.selectedItems.length>0?this.selectedItems:null},this.configs.key),t=new Blob([e.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=window.URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`students_${(new Date).toISOString().split("T")[0]}.xlsx`,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(s)}catch(e){console.error("Export error:",e),alert("เกิดข้อผิดพลาดในการส่งออกข้อมูล")}finally{this.exportLoading=!1}},getExportFilters(){return{searchQuery:this.searchQuery,dateRange:this.filterOptions.dateRange,enrollmentCount:this.filterOptions.enrollmentCount,status:this.filterOptions.status,hasAvatar:this.filterOptions.hasAvatar,registrationSource:this.filterOptions.registrationSource}},showQuickActionsFor(e){this.quickActionTarget=e,this.showQuickActions=!0},hideQuickActions(){this.showQuickActions=!1,this.quickActionTarget=null},async quickEnrollStudent(e){if(this.quickActionTarget)try{await this.$Request.POST("enrollment/create",{userId:this.quickActionTarget._id,courseId:e},this.configs.key),alert("ลงทะเบียนเรียบร้อยแล้ว"),this.hideQuickActions(),await this.getData()}catch(t){console.error("Quick enroll error:",t),alert("เกิดข้อผิดพลาดในการลงทะเบียน")}},async quickSendMessage(e){if(this.quickActionTarget)try{await this.$Request.POST("message/send",{userId:this.quickActionTarget._id,template:e,data:{name:this.quickActionTarget.firstname+" "+this.quickActionTarget.lastname}},this.configs.key),alert("ส่งข้อความเรียบร้อยแล้ว"),this.hideQuickActions()}catch(t){console.error("Quick message error:",t),alert("เกิดข้อผิดพลาดในการส่งข้อความ")}},async generateReport(e){this.isProcessing=!0,this.processName="กำลังสร้างรายงาน";try{const t=await this.$Request.POST("reports/generate",{type:e,filters:this.getExportFilters(),dateRange:this.filterOptions.dateRange},this.configs.key);t.data.url&&window.open(t.data.url,"_blank")}catch(t){console.error("Report generation error:",t),alert("เกิดข้อผิดพลาดในการสร้างรายงาน")}finally{this.isProcessing=!1}},safeToggleBulkMode(){try{this.$nextTick((()=>{this.toggleBulkMode()}))}catch(e){console.error("Error toggling bulk mode:",e),this.bulkActionMode=!1,this.selectedItems=[],this.showBulkActions=!1}},safeToggleAdvancedFilter(){try{this.$nextTick((()=>{this.toggleAdvancedFilter()}))}catch(e){console.error("Error toggling advanced filter:",e),this.showAdvancedFilter=!1}},safeShowQuickActions(e){try{e&&e._id&&this.$nextTick((()=>{this.showQuickActionsFor(e)}))}catch(t){console.error("Error showing quick actions:",t),this.hideQuickActions()}},async copyToClipboard(e){try{await navigator.clipboard.writeText(e),this.copiedId=e,setTimeout((()=>{this.copiedId=null}),2e3),this.showToast("คัดลอกแล้ว!","success")}catch(t){console.error("ไม่สามารถคัดลอกได้:",t),this.showToast("ไม่สามารถคัดลอกได้","error")}},showToast(e,t="info"){const s=document.createElement("div");s.className="fixed top-4 right-4 z-50 px-4 py-2 rounded-lg text-white text-sm font-medium transition-all duration-300 "+("success"===t?"bg-green-500":"error"===t?"bg-red-500":"bg-blue-500"),s.textContent=e,document.body.appendChild(s),setTimeout((()=>{s.style.opacity="0",s.style.transform="translateY(-10px)",setTimeout((()=>{document.body.removeChild(s)}),300)}),2e3)},getRelativeTime(e){if(!e)return"";const t=new Date(e),s=new Date,o=s-t,a=Math.floor(o/864e5),l=Math.floor(o/36e5),r=Math.floor(o/6e4);return r<60?`${r} นาทีที่แล้ว`:l<24?`${l} ชั่วโมงที่แล้ว`:a<7?`${a} วันที่แล้ว`:a<30?`${Math.floor(a/7)} สัปดาห์ที่แล้ว`:a<365?`${Math.floor(a/30)} เดือนที่แล้ว`:`${Math.floor(a/365)} ปีที่แล้ว`},formatNumber(e){return new Intl.NumberFormat("th-TH").format(e)},getInitials(e,t){const s=e?e.charAt(0).toUpperCase():"",o=t?t.charAt(0).toUpperCase():"";return s+o||"U"},getAvatarColor(e){const t=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-yellow-500","bg-red-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-emerald-500"];let s=0;if(e)for(let o=0;o<e.length;o++)s=e.charCodeAt(o)+((s<<5)-s);return t[Math.abs(s)%t.length]},animateCount(e,t,s,o=1e3){const a=s-t,l=a/(o/16);let r=t;const i=setInterval((()=>{r+=l,r>=s&&(r=s,clearInterval(i)),e.textContent=Math.floor(r)}),16)},loadMoreItems(){this.lazy&&!this.isLoadingMore&&this.hasMoreItems&&(this.isLoadingMore=!0,console.log(`📦 Loading more items: ${this.currentDisplayCount} + ${this.loadMoreCount}`),setTimeout((()=>{const e=Math.min(this.currentDisplayCount+this.loadMoreCount,this.listItems.length);this.currentDisplayCount=e,this.isLoadingMore=!1,console.log(`✅ Loaded more items. Showing: ${this.currentDisplayCount}/${this.listItems.length}`)}),300))},setupScrollDetection(){this.lazy&&this.$nextTick((()=>{const e=()=>{const e=window.pageYOffset||document.documentElement.scrollTop,t=document.documentElement.scrollHeight,s=document.documentElement.clientHeight;if(t<=s)return;const o=(e+s)/t;(o>.8||t-e-s<200)&&this.hasMoreItems&&!this.isLoadingMore&&this.loadMoreItems()};window.addEventListener("scroll",e,{passive:!0}),this.scrollCleanup=()=>{window.removeEventListener("scroll",e)}}))},resetDisplayCount(){this.currentDisplayCount=this.initialDisplayCount,this.isLoadingMore=!1},toggleLazyMode(){this.lazy=!this.lazy,console.log("🔄 Lazy rendering: "+(this.lazy?"Enabled":"Disabled")),this.lazy?(this.resetDisplayCount(),this.$nextTick((()=>{this.setupScrollDetection()}))):this.scrollCleanup&&this.scrollCleanup()}},async mounted(){try{const e=ps.A.get("paging")||{},t=e[this.$route.path]||{};this.limitItem=t.limitItem||50,this.currentPage=t.currentPage||1,this.searchQuery=t.searchQuery||"",this.updateURLParameters(),await this.$nextTick(),setTimeout((()=>{if(this.$el&&"function"===typeof this.$el.getBoundingClientRect)this.calculateHeaderHeight(),window.addEventListener("resize",this.calculateHeaderHeight);else{console.warn("DOM element not ready, skipping header height calculation");const e=window.innerWidth<=768?56:80;document.documentElement.style.setProperty("--header-height",`${e}px`)}}),100),await this.getData(),this.lazy&&this.setupScrollDetection()}catch(e){console.error(e)}},beforeUnmount(){window.removeEventListener("resize",this.calculateHeaderHeight),this.scrollCleanup&&this.scrollCleanup()},setup(){},computed:{filteredListItems(){return"All"===this.selectedStatus?this.listItems:this.listItems.filter((e=>e.status===this.selectedStatus))},getStatusBadge(){return e=>{const t=e.enrollCount||0;return 0===t?{text:"ยังไม่เรียน",class:"bg-gray-100 text-gray-800 border border-gray-300"}:t<=2?{text:"เรียนน้อย",class:"bg-yellow-100 text-yellow-800 border border-yellow-300"}:t<=5?{text:"เรียนปานกลาง",class:"bg-blue-100 text-blue-800 border border-blue-300"}:{text:"เรียนเยอะ",class:"bg-green-100 text-green-800 border border-green-300"}}},getActivityStatus(){return e=>{const t=e.lastLogin||e.createdAt,s=Math.floor((new Date-new Date(t))/864e5);return s<=1?{text:"ออนไลน์",class:"bg-green-500",icon:"fas fa-circle"}:s<=7?{text:"ใช้งานล่าสุด",class:"bg-yellow-500",icon:"fas fa-circle"}:{text:"ไม่ได้ใช้งาน",class:"bg-gray-400",icon:"fas fa-circle"}}},visibleItems(){return this.lazy?this.listItems.slice(0,this.currentDisplayCount):this.listItems},hasMoreItems(){return this.lazy&&this.currentDisplayCount<this.listItems.length}}};const Zs=(0,zs.A)(Ys,[["render",hs]]);var eo=Zs,to={name:"Home",components:{List:eo},data(){return{login:ps.A.get("session","login")}},methods:{showAlert(){this.$swal("Hello Vue world!!!")}},setup(){const e=(0,r.lq)(),t=e.meta.title;(0,l.K7)(t)}};const so=(0,zs.A)(to,[["render",a]]);var oo=so},87814:function(e,t,s){s.d(t,{A:function(){return A}});var o=s(20641),a=s(90033),l=s(53751);const r={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},i={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},n={class:"min-w-0 flex-1"},c={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},d={key:0,class:"text-sm text-gray-500"},u={class:"mt-5 flex xl:mt-0 xl:ml-4"},g={class:"flex items-center space-x-2"},m={class:"text-sm text-gray-400"},h=["onUpdate:modelValue","placeholder","onChange"],p={value:"",disabled:""},f=["value"],x=["onClick"],b={class:"text-sm hidden sm:inline-block ml-1"},y=["onClick"],k={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,s,v,L,w){const C=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("header",r,[(0,o.Lk)("div",i,[(0,o.Lk)("div",n,[(0,o.Lk)("h1",c,[(0,o.bF)(C,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,o.eW)(" "+(0,a.v_)(s.pageTitle?s.pageTitle:this.PageName),1)]),s.subhead?((0,o.uX)(),(0,o.CE)("p",d,(0,a.v_)(s.subhead),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",u,[(0,o.Lk)("div",g,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.navigation,((t,s)=>((0,o.uX)(),(0,o.CE)(o.FK,{key:s},["select"===t.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.Lk)("label",m,(0,a.v_)(t.placeholder),1),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:s=>e.$emit("toggleStatus",t.value)},[(0,o.Lk)("option",p,"-- "+(0,a.v_)(t.placeholder)+" --",1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.options,((e,t)=>((0,o.uX)(),(0,o.CE)("option",{key:t,value:e.value},(0,a.v_)(e.name),9,f)))),128))],40,h),[[l.u1,t.value]])],64)):"call-function"===t.type?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[!1!==t.visible?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:s=>e.$emit(t.function),type:"button",class:(0,a.C4)(w.getClasses(t.class))},[(0,o.bF)(C,{icon:["fas",`${t.style}`],class:(0,a.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,o.Lk)("span",b,(0,a.v_)(t.name),1)],10,x)):(0,o.Q3)("",!0)],64)):((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[!1!==t.visible?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e=>w.handleNavigationClick(t),type:"button",class:(0,a.C4)(w.getClasses(t.class))},[(0,o.bF)(C,{icon:["fas",`${t.style}`],class:(0,a.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,o.Lk)("span",k,(0,a.v_)(t.name),1)],10,y)):(0,o.Q3)("",!0)],64))],64)))),128))])])])])}s(44114);var L=s(75220),w=s(52968),C=s(23264),T=s(93426),$={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,L.lq)();return console.log("Translate",(0,T.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,T.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,w.K7)((0,T.iX)())},methods:{getClasses(e){const t=(0,C.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},P=s(64621);const I=(0,P.A)($,[["render",v]]);var A=I},86530:function(e,t,s){s.d(t,{A:function(){return f}});var o=s(20641),a=s(90033);const l={key:0,class:"fixed top-0 left-0 w-full h-full flex flex-col justify-center items-center z-50"},r={class:"text-white text-center z-20"},i={class:"text-2xl text-green-500 font-bold mb-2"},n={class:"text-xl"},c={key:0,class:"mt-2"},d={class:"text-lg"},u={class:"fixed top-0 left-0 w-full h-1 bg-gray-600"};function g(e,t,s,g,m,h){return s.isVisible?((0,o.uX)(),(0,o.CE)("div",l,[t[1]||(t[1]=(0,o.Lk)("div",{class:"absolute w-full h-full bg-black bg-opacity-80"},null,-1)),(0,o.Lk)("div",r,[(0,o.Lk)("div",i,"## "+(0,a.v_)(s.processName)+" ##",1),(0,o.Lk)("div",n,(0,a.v_)(s.progressText),1),s.startTime&&s.endTime?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",d,"Usage Time : "+(0,a.v_)(h.calculateUsageTime(s.startTime,s.endTime)),1)])):(0,o.Q3)("",!0),s.startTime&&s.endTime?((0,o.uX)(),(0,o.CE)("button",{key:1,class:"mt-4 bg-blue-600 text-white px-4 py-2 rounded",onClick:t[0]||(t[0]=(...e)=>h.closeProgress&&h.closeProgress(...e))},"Close")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",u,[(0,o.Lk)("div",{style:(0,a.Tr)({width:h.progressBarWidth}),class:"h-full bg-green-500"},null,4)])])):(0,o.Q3)("",!0)}var m={props:{processName:String,progressText:String,progressTotal:Number,progressCurrent:Number,isVisible:Boolean,startTime:String,endTime:String},computed:{progressBarWidth(){return this.progressCurrent/this.progressTotal*100+"%"}},methods:{calculateUsageTime(e,t){const s=new Date(e),o=new Date(t),a=o-s,l=Math.floor(a/1e3),r=Math.floor(l/60),i=l%60;return`${r}m ${i}s`},closeProgress(){this.$emit("close")}}},h=s(64621);const p=(0,h.A)(m,[["render",g],["__scopeId","data-v-48124189"]]);var f=p},38558:function(e,t,s){s.d(t,{A:function(){return A}});var o=s(20641),a=s(90033);const l={class:"flex flex-col justify-center items-center h-full"},r={key:0,class:"flex flex-wrap justify-center"},i=["disabled"],n={key:0,class:"font-medium"},c=["disabled"],d=["onClick","disabled"],u={key:1,class:"font-medium"},g=["disabled"],m=["disabled"],h={key:1,class:"text-sm text-gray-400 text-center"},p={class:"font-medium"},f={class:"text-gray-600"},x={class:"font-medium"},b={class:"text-gray-600"},y={class:"font-medium"},k={class:"text-gray-600"},v={class:"font-medium"},L={class:"text-gray-600"};function w(e,t,s,w,C,T){const $=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)("div",l,["nav"===s.displayMode||"full"===s.displayMode?((0,o.uX)(),(0,o.CE)("ul",r,[(0,o.Lk)("li",{class:(0,a.C4)({"opacity-50 cursor-not-allowed":1===C.activePage})},[(0,o.Lk)("button",{onClick:t[0]||(t[0]=e=>T.handleButtonClick(C.activePage-1)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[(0,o.bF)($,{icon:["fas","chevron-left"],class:"text-gray-700 pl-1 pr-1 text-md"})],8,i)],2),C.activePage>2?((0,o.uX)(),(0,o.CE)("li",n,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=e=>T.handleButtonClick(1)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"}," หน้าแรก ",8,c)])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(T.pages,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,a.C4)([{"bg-indigo-100 ml-1 mr-1 rounded-md border-indigo-500 text-indigo-600 font-semibold":C.activePage===e},"font-medium"])},[(0,o.Lk)("button",{onClick:t=>T.handleButtonClick(e),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"},(0,a.v_)(e.toString().padStart(2,"0")),9,d)],2)))),128)),C.activePage<s.totalPages-1?((0,o.uX)(),(0,o.CE)("li",u,[(0,o.Lk)("button",{onClick:t[2]||(t[2]=e=>T.handleButtonClick(s.totalPages)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"}," หน้าสุดท้าย ",8,g)])):(0,o.Q3)("",!0),(0,o.Lk)("li",{class:(0,a.C4)({"opacity-50 cursor-not-allowed":C.activePage===s.totalPages})},[(0,o.Lk)("button",{onClick:t[3]||(t[3]=e=>T.handleButtonClick(C.activePage+1)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[(0,o.bF)($,{icon:["fas","chevron-right"],class:"text-gray-700 pl-1 pr-1 text-md"})],8,m)],2)])):(0,o.Q3)("",!0),"summary"===s.displayMode||"full"===s.displayMode?((0,o.uX)(),(0,o.CE)("div",h,[(0,o.eW)((0,a.v_)(T.translate("paging-display"))+" ",1),(0,o.Lk)("span",p,[(0,o.Lk)("span",f,(0,a.v_)(T.startItem),1)]),(0,o.eW)(" "+(0,a.v_)(T.translate("paging-to"))+" ",1),(0,o.Lk)("span",x,[(0,o.Lk)("span",b,(0,a.v_)(T.endItem),1)]),t[4]||(t[4]=(0,o.eW)(" / ")),(0,o.Lk)("span",y,[(0,o.Lk)("span",k,(0,a.v_)(T.formatNumber(s.totalPages)),1)]),(0,o.eW)(" "+(0,a.v_)(T.translate("paging-page"))+" | "+(0,a.v_)(T.translate("paging-from"))+" ",1),(0,o.Lk)("span",v,[(0,o.Lk)("span",L,(0,a.v_)(T.formatNumber(s.totalItems)),1)]),(0,o.eW)(" "+(0,a.v_)(T.translate("paging-item")),1)])):(0,o.Q3)("",!0)])}s(44114),s(14603),s(47566),s(98721);var C=s(9964),T=s(93426),$={props:{currentPage:{type:Number,required:!0},dataLoading:{type:Boolean,required:!0},displayMode:{type:String,required:!0,default:"full"},totalPages:{type:Number,required:!0},totalItems:{type:Number,required:!0},limitItems:{type:Number,required:!0}},data(){return{activePage:this.currentPage,buttonClicked:!1}},computed:{pages(){if(window.innerWidth>=600){const e=Math.max(this.activePage-2,1),t=Math.min(this.activePage+2,this.totalPages);let s=[];for(let o=e;o<=t;o++)s.push(o);return s}{let e=Math.max(this.activePage-1,1),t=Math.min(e+2,this.totalPages);t-e<2&&(e=Math.max(t-2,1));let s=[];for(let o=e;o<=t;o++)s.push(o);return s}},startItem(){return(this.activePage-1)*this.limitItems+1},endItem(){return Math.min(this.activePage*this.limitItems,this.totalItems)}},methods:{translate:T.Tl,formatNumber(e){return C.A.formatNumber(e,"short")},goToPage(e){if(e<1||e>this.totalPages)return;const t=new URLSearchParams(window.location.search),s=t.get("searchQuery");let o="";e>1&&s?o=`?page=${e}&searchQuery=${s}`:e>1?o=`?page=${e}`:s&&(o=`?searchQuery=${s}`);const a=`${window.location.pathname}${o||""}`;window.history.pushState({path:a},"",a),this.activePage=e,this.$emit("page-changed",e)},handleButtonClick(e){this.buttonClicked||(this.buttonClicked=!0,this.goToPage(e),setTimeout((()=>{this.buttonClicked=!1}),1e3))}},watch:{currentPage(e){this.activePage=e},activePage(e){this.$emit("page-changed",e)},$route(){}},created(){const e=new URLSearchParams(window.location.search),t=e.get("page");if(t){const e=parseInt(t);isNaN(e)||this.goToPage(e)}}},P=s(64621);const I=(0,P.A)($,[["render",w]]);var A=I},23264:function(e,t,s){function o(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}s.d(t,{c:function(){return o}})}}]);
//# sourceMappingURL=8080.5f6185f6.js.map