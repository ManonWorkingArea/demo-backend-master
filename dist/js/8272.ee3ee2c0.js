"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[8272],{48272:function(e,t,s){s.r(t),s.d(t,{default:function(){return $e}});var a=s(20641);function i(e,t,s,i,n,r){const o=(0,a.g2)("Authen"),l=(0,a.g2)("Dashboard");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(o),this.login?((0,a.uX)(),(0,a.Wv)(l,{key:0})):(0,a.Q3)("",!0)],64)}var n=s(52968),r=s(75220),o=(s(44114),s(90033)),l=s(53751);const c={key:0,class:"relative z-10","aria-labelledby":"slide-over-title",role:"dialog","aria-modal":"true"},d={class:"fixed inset-0 overflow-hidden"},u={class:"absolute inset-0 overflow-hidden"},g={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10"},m={class:"pointer-events-auto w-screen max-w-md"},h={class:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl"},p={class:"px-4 sm:px-6"},b={class:"flex items-start justify-between"},y={class:"ml-3 flex h-7 items-center"},f={class:"relative mt-6 flex-1 px-4 sm:px-6"},k={class:"space-y-4"},x={key:1,class:"text-center"},v={key:0,class:"loading-overlay"},L={class:"loading-text"},w={class:"processing-count"},C={class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5 border-t"},P={class:"mt-4"},T={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},$={class:"mt-5 bg-white shadow ring-1 ring-black ring-opacity-5 mb-5"},A={class:"bg-gray-100"},I={class:"p-2"},Q={class:"flex justify-between flex-col md:flex-row"},_={class:"flex flex-col md:flex-row mb-2 md:w-1/2 md:mr-2 md:mb-0"},E={key:0},S={class:"ml-1 text-left text-gray-500"},X={class:"text-black font-semibold"},F={class:"flex flex-col mb-2 md:mb-0 md:flex-row items-center"},N=["value"],M={class:"border-t bg-gray-50 border-gray-300"},D={class:"flex text-sm text-gray-900"},B={class:"w-6/12 md:w-2/12 py-2 pl-4 text-left"},U={class:"flex items-center cursor-pointer"},K={class:"w-6/12 md:w-2/12 py-2 pl-4 text-left"},R={class:"flex items-center cursor-pointer"},V={class:"flex border-b border-gray-200 text-sm hover:bg-gray-50"},W={class:"w-1/12 py-2 flex items-center justify-center bg-[#f2f2f2]"},j={class:"text-gray-600 font-semibold p-1"},H={class:"w-4/12 py-2 pl-4"},q={class:"flex items-center"},O=["src"],z={class:"ml-2"},G=["innerHTML"],J=["innerHTML"],Y={class:"w-2/12 py-2 pl-4 hidden md:block"},Z=["innerHTML"],ee={class:"w-4/12 py-2 pl-4 pr-3 hidden md:block"},te=["innerHTML"],se=["innerHTML"],ae={class:"w-1/12 py-2 pl-4 pr-3 hidden md:block"},ie={class:"font-semibold text-blue-500"},ne={class:"w-2/12 py-2 pl-4 pr-3 hidden md:block"},re={class:"w-3/12 py-2 pl-4 pr-3 hidden md:block"},oe=["onClick"],le={class:"md:hidden p-2 border-b border-gray-300 bg-blue-50"},ce={class:"w-full"},de=["onClick"],ue={key:1,class:"text-center p-5"},ge={class:"p-2 text-center"};function me(e,t,s,i,n,r){const me=(0,a.g2)("Loader"),he=(0,a.g2)("batch-progress"),pe=(0,a.g2)("Subhead"),be=(0,a.g2)("Pagination"),ye=(0,a.g2)("router-link"),fe=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)(a.FK,null,[n.open?((0,a.uX)(),(0,a.CE)("div",c,[t[13]||(t[13]=(0,a.Lk)("div",{class:"fixed inset-0"},null,-1)),(0,a.Lk)("div",d,[(0,a.Lk)("div",u,[(0,a.Lk)("div",g,[(0,a.Lk)("div",m,[(0,a.Lk)("div",h,[(0,a.Lk)("div",p,[(0,a.Lk)("div",b,[t[12]||(t[12]=(0,a.Lk)("h2",{class:"text-base font-semibold leading-6 text-gray-900",id:"slide-over-title"},"Panel title",-1)),(0,a.Lk)("div",y,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.closePanel&&r.closePanel(...e)),type:"button",class:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},t[11]||(t[11]=[(0,a.Lk)("span",{class:"absolute -inset-2.5"},null,-1),(0,a.Lk)("span",{class:"sr-only"},"Close panel",-1),(0,a.Lk)("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[(0,a.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),(0,a.Lk)("div",f,[(0,a.Lk)("ul",k,[(0,a.Lk)("li",null,[(0,a.Lk)("button",{class:"text-blue-600 hover:underline",onClick:t[1]||(t[1]=(...t)=>e.renderBilling&&e.renderBilling(...t))},"Render Billing")]),(0,a.Lk)("li",null,[(0,a.Lk)("button",{class:"text-blue-600 hover:underline",onClick:t[2]||(t[2]=t=>e.renderEnroll())},"Render Enroll")]),(0,a.Lk)("li",null,[(0,a.Lk)("button",{class:"text-blue-600 hover:underline",onClick:t[3]||(t[3]=(...t)=>e.renderProfile&&e.renderProfile(...t))},"Render Profile")])])])])])])])])])):(0,a.Q3)("",!0),n.loading_sources?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",x,[(0,a.bF)(me)])),(0,a.bF)(he,{processName:n.processName,progressText:n.progressText,progressTotal:n.progressTotal,progressCurrent:n.progressCurrent,isVisible:n.isProcessing,startTime:n.startTime,endTime:n.endTime,onClose:r.closeProgress},null,8,["processName","progressText","progressTotal","progressCurrent","isVisible","startTime","endTime","onClose"]),(0,a.Lk)("div",null,[(0,a.bF)(pe,{navigation:[{name:null,function:"getData",style:"refresh",class:"default-btn",visible:!0,type:"button"},{name:"ย้อนกลับ",link:"/",style:"chevron-left",class:"default-btn",visible:!0,type:"button"}],onGetData:r.getData},null,8,["onGetData"]),(0,a.Lk)("div",null,[n.isShowingOverlay?((0,a.uX)(),(0,a.CE)("div",v,[(0,a.Lk)("div",L,(0,o.v_)(n.loadingMessage),1),(0,a.Lk)("div",w,(0,o.v_)(n.processingCount),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",C,[(0,a.Lk)("div",P,[(0,a.Lk)("div",T,[(0,a.Lk)("div",$,[(0,a.Lk)("div",A,[(0,a.Lk)("div",I,[(0,a.Lk)("div",Q,[(0,a.Lk)("div",_,[(0,a.bo)((0,a.Lk)("input",{id:"search",type:"text",class:"px-4 py-2 rounded-md border-gray-300 bg-white focus:outline-none w-full md:w-48",placeholder:"ค้นหา...","onUpdate:modelValue":t[4]||(t[4]=e=>n.searchQuery=e),onKeydown:t[5]||(t[5]=(...e)=>r.handleSearchKeydown&&r.handleSearchKeydown(...e))},null,544),[[l.Jo,n.searchQuery]]),n.searchQuery.length>0?((0,a.uX)(),(0,a.CE)("div",E,[(0,a.Lk)("div",S,[t[14]||(t[14]=(0,a.eW)(" ผลการค้นหา ")),(0,a.Lk)("span",X,(0,o.v_)(n.totalItems),1),t[15]||(t[15]=(0,a.eW)(" รายการ (s) ")),n.searchQuery.length>0?((0,a.uX)(),(0,a.CE)("button",{key:0,type:"button",class:"mt-2 text-blue-500 hover:underline focus:outline-none",onClick:t[6]||(t[6]=(...e)=>r.clearSearchQuery&&r.clearSearchQuery(...e))}," Clear ")):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",F,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>n.limitItem=e),onChange:t[8]||(t[8]=(...e)=>r.handleLimitChange&&r.handleLimitChange(...e)),class:"px-4 py-2 rounded-md border-gray-300 bg-white focus:outline-none w-full md:w-24 md:mr-2"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.limitOptions,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,o.v_)(e),9,N)))),128))],544),[[l.u1,n.limitItem]]),(0,a.bF)(be,{"current-page":n.currentPage,"total-items":n.totalItems,"total-pages":n.totalPages,"limit-items":n.limitItem,"data-loading":n.loading,"display-mode":"nav",onPageChanged:r.handlePageChanged,class:"mt-2 md:mt-0"},null,8,["current-page","total-items","total-pages","limit-items","data-loading","onPageChanged"])])])])]),(0,a.Lk)("div",M,[(0,a.Lk)("div",D,[(0,a.Lk)("div",B,[(0,a.Lk)("label",U,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=e=>n.layoutVisibility.order=e),class:"mr-1 rounded-sm border-gray-400"},null,512),[[l.lH,n.layoutVisibility.order]]),t[16]||(t[16]=(0,a.eW)(" คำสั่งซื้อ "))])]),(0,a.Lk)("div",K,[(0,a.Lk)("label",R,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=e=>n.layoutVisibility.enroll=e),class:"mr-1 rounded-sm border-gray-400"},null,512),[[l.lH,n.layoutVisibility.enroll]]),t[17]||(t[17]=(0,a.eW)(" การเรียน "))])])])]),t[23]||(t[23]=(0,a.Fv)('<div class="border-b border-t bg-gray-200 border-gray-300"><div class="flex text-sm font-semibold text-gray-900"><div class="w-1/12 py-2 pl-2 text-center">#</div><div class="w-full md:w-4/12 py-2 pl-4 text-left">ชื่อ-นามสกุล</div><div class="hidden md:block w-2/12 py-2 pl-4 text-left">Citizen ID</div><div class="hidden md:block w-4/12 py-2 pl-4 text-left">การติดต่อ</div><div class="hidden md:block w-1/12 py-2 pl-4 text-left">หลักสูตร</div><div class="hidden md:block w-2/12 py-2 pl-4 text-left">วันที่ลงทะเบียน</div><div class="hidden md:block w-3/12 py-2 pl-4 text-left">เครื่องมือ</div></div></div>',1)),(0,a.Lk)("div",{class:(0,o.C4)(["bg-white min-h-[50px] relative",[n.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[n.listItems&&n.listItems.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:0},(0,a.pI)(n.listItems,((s,i)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s._id},[(0,a.Lk)("div",V,[(0,a.Lk)("div",W,[(0,a.Lk)("span",j,(0,o.v_)(r.leadingZero((n.currentPage-1)*n.limitItem+i+1)),1)]),(0,a.Lk)("div",H,[(0,a.bF)(ye,{to:"/student/detail/"+s.user._id+"?back=/lesson/detail/"+this.dataItem+"/enroll",class:"text-gray-700 hover:text-indigo-600"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",q,[(0,a.Lk)("img",{src:s.user.avatar_img,class:"w-10 h-10 mr-2 rounded-sm bg-gray-200",alt:"Profile Image"},null,8,O),(0,a.Lk)("div",z,[(0,a.Lk)("span",{innerHTML:s.user.firstname+" "+s.user.lastname+" ("+s.user.old_id+")"},null,8,G),t[18]||(t[18]=(0,a.Lk)("br",null,null,-1)),(0,a.Lk)("span",{class:"text-sm font-normal text-gray-500",innerHTML:s.user.token},null,8,J)])])])),_:2},1032,["to"])]),(0,a.Lk)("div",Y,[(0,a.bF)(fe,{icon:["fas","id-card"],class:"text-gray-500 mt-[3px] mr-1 text-sm"}),t[19]||(t[19]=(0,a.eW)()),(0,a.Lk)("span",{innerHTML:s.user.citizen},null,8,Z)]),(0,a.Lk)("div",ee,[(0,a.bF)(fe,{icon:["fas","phone"],class:"text-gray-500 mt-[3px] mr-2 text-sm"}),(0,a.Lk)("span",{innerHTML:s.user.phone},null,8,te),t[20]||(t[20]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(fe,{icon:["fas","envelope"],class:"text-gray-500 mt-[3px] mr-2 text-sm"}),(0,a.Lk)("span",{innerHTML:s.user.email},null,8,se)]),(0,a.Lk)("div",ae,[(0,a.Lk)("span",ie,(0,o.v_)(s.user.enroll&&s.user.enroll.length>0?s.user.enroll.length:"0"),1),(0,a.bF)(fe,{icon:["fas","book"],class:"text-gray-500 mt-[3px] ml-2 text-md"})]),(0,a.Lk)("div",ne,(0,o.v_)(s.user.createAt),1),(0,a.Lk)("div",re,[(0,a.Lk)("button",{onClick:t=>e.$router.push("/lesson/edit/"+s.user._id),type:"button",class:"mr-2 inline-flex justify-center rounded-md border border-gray-300 bg-white px-1 py-1 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,a.bF)(fe,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),t[21]||(t[21]=(0,a.Lk)("span",null,"แก้ไข",-1))],8,oe)])]),(0,a.Lk)("div",le,[(0,a.Lk)("div",ce,[(0,a.Lk)("button",{onClick:t=>e.$router.push("/lesson/edit/"+s.user._id),type:"button",class:"mr-2 inline-flex justify-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,a.bF)(fe,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),t[22]||(t[22]=(0,a.Lk)("span",null,"แก้ไข",-1))],8,de)])])],64)))),128)):((0,a.uX)(),(0,a.CE)("div",ue,"ไม่มีข้อมูล"))],2),(0,a.Lk)("div",ge,[(0,a.bF)(be,{"current-page":n.currentPage,"total-items":n.totalItems,"total-pages":n.totalPages,"limit-items":n.limitItem,"data-loading":n.loading,"display-mode":"summary",onPageChanged:r.handlePageChanged},null,8,["current-page","total-items","total-pages","limit-items","data-loading","onPageChanged"])])])])])])])],64)}s(98992),s(54520),s(3949),s(81454),s(14603),s(47566),s(98721);var he=s(40475),pe=s(75435),be=s(87814),ye=s(38558),fe=s(86530),ke=s(9964),xe={data(){const e=he.A.get("session"),t=he.A.get("paging");return{hostkey:this.$Key,open:!1,dataItem:this.$route.params.id,school:e.current.id,login:e.login,courseData:[],listItems:[],categoryData:[],loading_sources:!0,endpoint:"",master:e.master,accessToken:he.A.get("session","token"),configs:he.A.get("configs"),session:he.A.get("session"),limitOptions:[1,10,50,100,200,500,1e3,2e3,3e3,4e3],totalPages:0,totalItems:0,limitItem:50,currentPage:1,searchQuery:"",debounceTimer:null,pagingInfo:t||{[this.$route.path]:{limitItem:50,currentPage:1,searchQuery:""}},loading:!1,showingOverlay:!1,statusFilter:"all",isCreatingUser:!1,isShowingOverlay:!1,loadingMessage:"",processingCount:"",activeBlock:!1,scb:[],isProcessing:!1,processName:"",progressText:"",progressTotal:0,progressCurrent:0,startTime:null,endTime:null,layoutVisibility:{order:!0,enroll:!0}}},components:{Loader:pe.A,Subhead:be.A,Pagination:ye.A,BatchProgress:fe.A},methods:{togglePanel(){this.open=!this.open},closePanel(){this.open=!1},leadingZero(e){return e<10?"0"+e:e.toString()},formatThaidate(e){return ke.A.toThaiDatetime(e,"short")},updateURLParameters(){const e=new URLSearchParams(window.location.search);this.currentPage>1?e.set("page",this.currentPage):e.delete("page"),this.searchQuery?e.set("searchQuery",this.searchQuery):e.delete("searchQuery");const t=`${window.location.pathname}?${e.toString()}`;window.history.replaceState({},"",t)},handleLimitChange(){const e=he.A.get("paging")||{};e[this.$route.path]={limitItem:this.limitItem,currentPage:1,searchQuery:this.searchQuery},he.A.set("paging",e),this.updateURLParameters(),this.getData()},handlePageChanged(e){if(e!==this.currentPage){window.scrollTo(0,0),this.currentPage=e;const t=he.A.get("paging")||{};t[this.$route.path]={limitItem:this.limitItem,currentPage:this.currentPage,searchQuery:this.searchQuery},he.A.set("paging",t),this.updateURLParameters(),this.getData()}},clearSearchQuery(){this.searchQuery="";const e=he.A.get("paging")||{};e[this.$route.path]={limitItem:this.limitItem,currentPage:this.currentPage,searchQuery:this.searchQuery},he.A.set("paging",e),this.updateURLParameters(),this.handleSearchKeydown({key:"Enter"}),this.getData()},handleSearchKeydown(e){clearTimeout(this.debounceTimer);const t=()=>{this.getData();const e=he.A.get("paging")||{};e[this.$route.path]={limitItem:this.limitItem,currentPage:1,searchQuery:this.searchQuery},he.A.set("paging",e),this.updateURLParameters(),this.handlePageChanged(1)};"Enter"===e.key&&this.searchQuery.length>=3?t():this.debounceTimer=setTimeout(t,500)},toggleStatus(e){console.log("Toggle Status",e),this.statusFilter=e,this.getData()},closeProgress(){this.isProcessing=!1},async batchProcess(){this.open=!1;let e=this.listItems.length,t=0;this.isProcessing=!0,this.processName="Render Billing",this.progressTotal=e,this.startTime=(new Date).toISOString(),this.endTime=null;for(const s of this.listItems)t++,this.progressText=`Processing : ${t}/${e}`,this.progressCurrent=t,await this.executeCustomQueries(s.order.ref,s.order._id);this.progressText="All Process : Done",this.endTime=(new Date).toISOString()},async getData(){this.listItems=[],this.totalItems=0;try{let e=[{parent:this.configs.siteID,role:"superadmin"}];this.searchQuery&&e.push({$or:[{name:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{citizen:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{email:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{firstname:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{lastname:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{old_id:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{phone:{$regex:`.*${this.searchQuery}.*`,$options:"i"}},{token:{$regex:`.*${this.searchQuery}.*`,$options:"i"}}]});const t=[{$match:{$and:e}},{$facet:{table:[{$skip:(this.currentPage-1)*this.limitItem},{$limit:this.limitItem},{$project:{user:"$$ROOT"}}],count:[{$count:"count"}]}}],s={method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.hostkey},body:JSON.stringify({pipeline:t})},a=await fetch("https://gateway.cloudrestfulapi.com/api/user/aggregate",s),i=await a.json();if(i&&i.length>0){const e=i[0];if(e.table&&e.table.length>0){const t=e.table;if(e.count&&e.count.length>0){const s=e.count[0].count,a={data:t,total:s,paging:{page:this.currentPage,limit:this.limitItem,totalPages:Math.ceil(s/this.limitItem)}};this.listItems=a.data.map((e=>(console.log(e),Object.keys(e).forEach((t=>{if("string"===typeof e[t]){const s=e[t].toLowerCase(),a=this.searchQuery.toLowerCase(),i=s.indexOf(a);if(-1!==i&&a.length>0){const s=i+a.length,n=e[t].substring(0,i)+'<span class="text-red-500 font-bold">'+e[t].substring(i,s)+"</span>"+e[t].substring(s);e[t]=n}}})),e))),this.totalItems=a.total,this.totalPages=a.paging.totalPages,this.loading=!1,this.activeBlock=!1,console.log("formattedData",this.formattedData)}else console.error("Total count data is missing.")}else console.error("Paginated data is missing or empty.")}else console.error("No data in 'restReturn' or 'restReturn' is empty.")}catch(e){console.log(e)}finally{this.loading=!1,this.activeBlock=!1}}},async mounted(){try{const e=he.A.get("paging")||{},t=e[this.$route.path]||{};this.limitItem=t.limitItem||50,this.currentPage=t.currentPage||1,this.searchQuery=t.searchQuery||"",this.updateURLParameters(),await this.getData()}catch(e){console.error(e)}},setup(){},computed:{filteredListItems(){return"All"===this.selectedStatus?this.listItems:this.listItems.filter((e=>e.status===this.selectedStatus))}}},ve=s(64621);const Le=(0,ve.A)(xe,[["render",me]]);var we=Le,Ce=s(74284),Pe={name:"Home",components:{Dashboard:we,Authen:Ce.A},data(){return{login:he.A.get("session","login")}},methods:{},mounted(){},setup(){const e=(0,r.lq)(),t=e.meta.title;(0,n.K7)(t),console.log("Dashboard")}};const Te=(0,ve.A)(Pe,[["render",i]]);var $e=Te},87814:function(e,t,s){s.d(t,{A:function(){return I}});var a=s(20641),i=s(90033),n=s(53751);const r={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},o={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},l={class:"min-w-0 flex-1"},c={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},d={key:0,class:"text-sm text-gray-500"},u={class:"mt-5 flex xl:mt-0 xl:ml-4"},g={class:"flex items-center space-x-2"},m={class:"text-sm text-gray-400"},h=["onUpdate:modelValue","placeholder","onChange"],p={value:"",disabled:""},b=["value"],y=["onClick"],f={class:"text-sm hidden sm:inline-block ml-1"},k=["onClick"],x={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,s,v,L,w){const C=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("header",r,[(0,a.Lk)("div",o,[(0,a.Lk)("div",l,[(0,a.Lk)("h1",c,[(0,a.bF)(C,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,a.eW)(" "+(0,i.v_)(s.pageTitle?s.pageTitle:this.PageName),1)]),s.subhead?((0,a.uX)(),(0,a.CE)("p",d,(0,i.v_)(s.subhead),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",u,[(0,a.Lk)("div",g,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.navigation,((t,s)=>((0,a.uX)(),(0,a.CE)(a.FK,{key:s},["select"===t.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("label",m,(0,i.v_)(t.placeholder),1),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:s=>e.$emit("toggleStatus",t.value)},[(0,a.Lk)("option",p,"-- "+(0,i.v_)(t.placeholder)+" --",1),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.options,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:t,value:e.value},(0,i.v_)(e.name),9,b)))),128))],40,h),[[n.u1,t.value]])],64)):"call-function"===t.type?((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[!1!==t.visible?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:s=>e.$emit(t.function),type:"button",class:(0,i.C4)(w.getClasses(t.class))},[(0,a.bF)(C,{icon:["fas",`${t.style}`],class:(0,i.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,a.Lk)("span",f,(0,i.v_)(t.name),1)],10,y)):(0,a.Q3)("",!0)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:2},[!1!==t.visible?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:e=>w.handleNavigationClick(t),type:"button",class:(0,i.C4)(w.getClasses(t.class))},[(0,a.bF)(C,{icon:["fas",`${t.style}`],class:(0,i.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,a.Lk)("span",x,(0,i.v_)(t.name),1)],10,k)):(0,a.Q3)("",!0)],64))],64)))),128))])])])])}s(44114);var L=s(75220),w=s(52968),C=s(23264),P=s(93426),T={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,L.lq)();return console.log("Translate",(0,P.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,P.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,w.K7)((0,P.iX)())},methods:{getClasses(e){const t=(0,C.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},$=s(64621);const A=(0,$.A)(T,[["render",v]]);var I=A},86530:function(e,t,s){s.d(t,{A:function(){return b}});var a=s(20641),i=s(90033);const n={key:0,class:"fixed top-0 left-0 w-full h-full flex flex-col justify-center items-center z-50"},r={class:"text-white text-center z-20"},o={class:"text-2xl text-green-500 font-bold mb-2"},l={class:"text-xl"},c={key:0,class:"mt-2"},d={class:"text-lg"},u={class:"fixed top-0 left-0 w-full h-1 bg-gray-600"};function g(e,t,s,g,m,h){return s.isVisible?((0,a.uX)(),(0,a.CE)("div",n,[t[1]||(t[1]=(0,a.Lk)("div",{class:"absolute w-full h-full bg-black bg-opacity-80"},null,-1)),(0,a.Lk)("div",r,[(0,a.Lk)("div",o,"## "+(0,i.v_)(s.processName)+" ##",1),(0,a.Lk)("div",l,(0,i.v_)(s.progressText),1),s.startTime&&s.endTime?((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",d,"Usage Time : "+(0,i.v_)(h.calculateUsageTime(s.startTime,s.endTime)),1)])):(0,a.Q3)("",!0),s.startTime&&s.endTime?((0,a.uX)(),(0,a.CE)("button",{key:1,class:"mt-4 bg-blue-600 text-white px-4 py-2 rounded",onClick:t[0]||(t[0]=(...e)=>h.closeProgress&&h.closeProgress(...e))},"Close")):(0,a.Q3)("",!0)]),(0,a.Lk)("div",u,[(0,a.Lk)("div",{style:(0,i.Tr)({width:h.progressBarWidth}),class:"h-full bg-green-500"},null,4)])])):(0,a.Q3)("",!0)}var m={props:{processName:String,progressText:String,progressTotal:Number,progressCurrent:Number,isVisible:Boolean,startTime:String,endTime:String},computed:{progressBarWidth(){return this.progressCurrent/this.progressTotal*100+"%"}},methods:{calculateUsageTime(e,t){const s=new Date(e),a=new Date(t),i=a-s,n=Math.floor(i/1e3),r=Math.floor(n/60),o=n%60;return`${r}m ${o}s`},closeProgress(){this.$emit("close")}}},h=s(64621);const p=(0,h.A)(m,[["render",g],["__scopeId","data-v-48124189"]]);var b=p},38558:function(e,t,s){s.d(t,{A:function(){return I}});var a=s(20641),i=s(90033);const n={class:"flex flex-col justify-center items-center h-full"},r={key:0,class:"flex flex-wrap justify-center"},o=["disabled"],l={key:0,class:"font-medium"},c=["disabled"],d=["onClick","disabled"],u={key:1,class:"font-medium"},g=["disabled"],m=["disabled"],h={key:1,class:"text-sm text-gray-400 text-center"},p={class:"font-medium"},b={class:"text-gray-600"},y={class:"font-medium"},f={class:"text-gray-600"},k={class:"font-medium"},x={class:"text-gray-600"},v={class:"font-medium"},L={class:"text-gray-600"};function w(e,t,s,w,C,P){const T=(0,a.g2)("font-awesome-icon");return(0,a.uX)(),(0,a.CE)("div",n,["nav"===s.displayMode||"full"===s.displayMode?((0,a.uX)(),(0,a.CE)("ul",r,[(0,a.Lk)("li",{class:(0,i.C4)({"opacity-50 cursor-not-allowed":1===C.activePage})},[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>P.handleButtonClick(C.activePage-1)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[(0,a.bF)(T,{icon:["fas","chevron-left"],class:"text-gray-700 pl-1 pr-1 text-md"})],8,o)],2),C.activePage>2?((0,a.uX)(),(0,a.CE)("li",l,[(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>P.handleButtonClick(1)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"}," หน้าแรก ",8,c)])):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(P.pages,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e,class:(0,i.C4)([{"bg-indigo-100 ml-1 mr-1 rounded-md border-indigo-500 text-indigo-600 font-semibold":C.activePage===e},"font-medium"])},[(0,a.Lk)("button",{onClick:t=>P.handleButtonClick(e),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"},(0,i.v_)(e.toString().padStart(2,"0")),9,d)],2)))),128)),C.activePage<s.totalPages-1?((0,a.uX)(),(0,a.CE)("li",u,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>P.handleButtonClick(s.totalPages)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"}," หน้าสุดท้าย ",8,g)])):(0,a.Q3)("",!0),(0,a.Lk)("li",{class:(0,i.C4)({"opacity-50 cursor-not-allowed":C.activePage===s.totalPages})},[(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>P.handleButtonClick(C.activePage+1)),disabled:s.dataLoading||C.buttonClicked,class:"block px-2 py-2 rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[(0,a.bF)(T,{icon:["fas","chevron-right"],class:"text-gray-700 pl-1 pr-1 text-md"})],8,m)],2)])):(0,a.Q3)("",!0),"summary"===s.displayMode||"full"===s.displayMode?((0,a.uX)(),(0,a.CE)("div",h,[(0,a.eW)((0,i.v_)(P.translate("paging-display"))+" ",1),(0,a.Lk)("span",p,[(0,a.Lk)("span",b,(0,i.v_)(P.startItem),1)]),(0,a.eW)(" "+(0,i.v_)(P.translate("paging-to"))+" ",1),(0,a.Lk)("span",y,[(0,a.Lk)("span",f,(0,i.v_)(P.endItem),1)]),t[4]||(t[4]=(0,a.eW)(" / ")),(0,a.Lk)("span",k,[(0,a.Lk)("span",x,(0,i.v_)(P.formatNumber(s.totalPages)),1)]),(0,a.eW)(" "+(0,i.v_)(P.translate("paging-page"))+" | "+(0,i.v_)(P.translate("paging-from"))+" ",1),(0,a.Lk)("span",v,[(0,a.Lk)("span",L,(0,i.v_)(P.formatNumber(s.totalItems)),1)]),(0,a.eW)(" "+(0,i.v_)(P.translate("paging-item")),1)])):(0,a.Q3)("",!0)])}s(44114),s(14603),s(47566),s(98721);var C=s(9964),P=s(93426),T={props:{currentPage:{type:Number,required:!0},dataLoading:{type:Boolean,required:!0},displayMode:{type:String,required:!0,default:"full"},totalPages:{type:Number,required:!0},totalItems:{type:Number,required:!0},limitItems:{type:Number,required:!0}},data(){return{activePage:this.currentPage,buttonClicked:!1}},computed:{pages(){if(window.innerWidth>=600){const e=Math.max(this.activePage-2,1),t=Math.min(this.activePage+2,this.totalPages);let s=[];for(let a=e;a<=t;a++)s.push(a);return s}{let e=Math.max(this.activePage-1,1),t=Math.min(e+2,this.totalPages);t-e<2&&(e=Math.max(t-2,1));let s=[];for(let a=e;a<=t;a++)s.push(a);return s}},startItem(){return(this.activePage-1)*this.limitItems+1},endItem(){return Math.min(this.activePage*this.limitItems,this.totalItems)}},methods:{translate:P.Tl,formatNumber(e){return C.A.formatNumber(e,"short")},goToPage(e){if(e<1||e>this.totalPages)return;const t=new URLSearchParams(window.location.search),s=t.get("searchQuery");let a="";e>1&&s?a=`?page=${e}&searchQuery=${s}`:e>1?a=`?page=${e}`:s&&(a=`?searchQuery=${s}`);const i=`${window.location.pathname}${a||""}`;window.history.pushState({path:i},"",i),this.activePage=e,this.$emit("page-changed",e)},handleButtonClick(e){this.buttonClicked||(this.buttonClicked=!0,this.goToPage(e),setTimeout((()=>{this.buttonClicked=!1}),1e3))}},watch:{currentPage(e){this.activePage=e},activePage(e){this.$emit("page-changed",e)},$route(){}},created(){const e=new URLSearchParams(window.location.search),t=e.get("page");if(t){const e=parseInt(t);isNaN(e)||this.goToPage(e)}}},$=s(64621);const A=(0,$.A)(T,[["render",w]]);var I=A},74284:function(e,t,s){s.d(t,{A:function(){return u}});var a=s(20641);function i(e,t,s,i,n,r){return(0,a.uX)(),(0,a.CE)("div")}var n=s(75220),r=s(63084),o=s(40475),l={name:"Authen",data(){return{configs:o.A.get("configs"),session:o.A.get("session")}},created(){r.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const e=(0,n.lq)(),t=e.meta.auth,s=e.name,a=o.A.get("session");let i=a.token,l=a.login,c=a.current;r.A.log("hasLogin",l),r.A.log("Page -> Auth:",t),r.A.log("User -> Token:",i),r.A.log("User -> Login:",l),"frontend"===this.session.interface?r.A.log("Front-End"):"backend"===this.session.interface&&(r.A.log("Back-End"),l?("Login"==s||void 0==c?(r.A.log("Not Login Again"),this.$router.replace({path:"/"})):(r.A.log("Has School Active"),t?(r.A.log("This page is : Authen Request"),""===i||null===i||void 0==i?r.A.log("Your Cannot Access"):r.A.log("Your Can Access")):r.A.log("This page is : No Authen Request")),r.A.log("Login")):(r.A.log("Not Login"),"Login"!=s?(window.location.href="/member/login",r.A.log("Not Login Page",s)):r.A.log("Login Page",s)))}},setup(){}},c=s(64621);const d=(0,c.A)(l,[["render",i]]);var u=d},23264:function(e,t,s){function a(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}s.d(t,{c:function(){return a}})}}]);
//# sourceMappingURL=8272.ee3ee2c0.js.map