"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[8460],{8460:function(t,e,s){s.r(e),s.d(e,{default:function(){return K}});var l=s(20641);function a(t,e,s,a,n,o){return(0,l.uX)(),(0,l.Wv)((0,l.$y)(o.componentName))}var n=s(52968),o=s(75220),i=s(40475),r=s(90033);const c={class:"relative isolate pt-1"},d={class:"mx-auto max-w-7xl px-4 py-5 sm:px-6 lg:px-8"},g={class:"mx-auto flex max-w-2xl items-center justify-between gap-x-8 lg:mx-0 lg:max-w-none"},p={class:"flex items-center gap-x-6"},m={class:"text-sm leading-6 text-gray-500"},u={class:"mt-1 text-base font-semibold leading-6 text-gray-900"},x={class:"flex items-center gap-x-4 sm:gap-x-6"},f={class:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8 pt-0"},h={class:"mx-auto mb-5 grid grid-cols-1 gap-px bg-gray-900/5 sm:grid-cols-2 lg:grid-cols-3"},y={class:"flex flex-wrap items-baseline justify-between gap-x-4 gap-y-2 bg-white px-4 py-10 sm:px-6 xl:px-8"},k={class:"w-full flex-none text-3xl font-medium leading-10 tracking-tight text-gray-900"},b={class:"flex flex-wrap items-baseline justify-between gap-x-4 gap-y-2 bg-white px-4 py-10 sm:px-6 xl:px-8"},L={class:"w-full flex-none text-3xl font-medium leading-10 tracking-tight text-gray-900"},w={class:"flex flex-wrap items-baseline justify-between gap-x-4 gap-y-2 bg-white px-4 py-10 sm:px-6 xl:px-8"},v={class:"w-full flex-none text-3xl font-medium leading-10 tracking-tight text-gray-900"},E={class:"mx-auto grid max-w-2xl grid-cols-1 grid-rows-1 items-start gap-x-8 gap-y-8 lg:mx-0 lg:max-w-none lg:grid-cols-1"},_={class:"-mx-4 px-4 py-4 shadow-sm ring-1 ring-gray-900/5 sm:mx-0 sm:rounded-lg sm:px-4 sm:pb-14 lg:col-span-2 lg:row-span-2 lg:row-end-2 xl:px-8 xl:pb-10 xl:pt-8"},C={class:"mt-2 w-full whitespace-nowrap text-left text-sm leading-6"},A={class:"max-w-0 px-0 py-5 align-top"},j={class:"truncate text-gray-500"},T={class:"hidden py-5 pl-8 pr-0 text-right align-top tabular-nums text-gray-700 sm:table-cell"},F={class:"hidden py-5 pl-8 pr-0 text-right align-top tabular-nums text-gray-700 sm:table-cell"},B={class:"py-5 pl-8 pr-0 text-right align-top tabular-nums text-gray-700"};function D(t,e,s,a,n,o){const i=(0,l.g2)("font-awesome-icon"),D=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("header",c,[e[3]||(e[3]=(0,l.Lk)("div",{class:"absolute inset-0 -z-10 overflow-hidden","aria-hidden":"true"},[(0,l.Lk)("div",{class:"absolute left-16 top-full -mt-16 transform-gpu opacity-50 blur-3xl xl:left-1/2 xl:-ml-80"},[(0,l.Lk)("div",{class:"aspect-[1154/678] w-[72.125rem] bg-gradient-to-br from-[#FF80B5] to-[#9089FC]",style:{"clip-path":"polygon(100% 38.5%, 82.6% 100%, 60.2% 37.7%, 52.4% 32.1%, 47.5% 41.8%, 45.2% 65.6%, 27.5% 23.4%, 0.1% 35.3%, 17.9% 0%, 27.7% 23.4%, 76.2% 2.5%, 74.2% 56%, 100% 38.5%)"}})]),(0,l.Lk)("div",{class:"absolute inset-x-0 bottom-0 h-px bg-gray-900/5"})],-1)),(0,l.Lk)("div",d,[(0,l.Lk)("div",g,[(0,l.Lk)("div",p,[e[1]||(e[1]=(0,l.Lk)("span",{class:"relative inline-block"},[(0,l.Lk)("img",{class:"h-16 w-16 rounded-full",src:"https://vue-project.sgp1.digitaloceanspaces.com/Logo/default-avatarjpg.jpg",alt:""}),(0,l.Lk)("span",{class:"absolute right-0 top-0 block h-4 w-4 rounded-full bg-green-400 ring-2 ring-white"})],-1)),(0,l.Lk)("h1",null,[(0,l.Lk)("div",m,(0,r.v_)(this.profile.email),1),(0,l.Lk)("div",u,(0,r.v_)(this.profile.firstname)+" "+(0,r.v_)(this.profile.lastname),1)])]),(0,l.Lk)("div",x,[e[2]||(e[2]=(0,l.Lk)("a",{href:"#",class:"hidden text-sm font-semibold leading-6 text-gray-900 sm:block"},"Edit Profile",-1)),(0,l.Lk)("button",{onClick:e[0]||(e[0]=t=>o.logout()),type:"button",class:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},[(0,l.bF)(i,{icon:["fas","power-off"]})])])])])]),(0,l.Lk)("div",f,[(0,l.Lk)("dl",h,[(0,l.Lk)("div",y,[e[4]||(e[4]=(0,l.Lk)("dt",{class:"text-sm font-semibold leading-6 text-gray-700"},"หลักสูตรที่ลงทะเบียน",-1)),e[5]||(e[5]=(0,l.Lk)("dd",{class:"text-xs font-medium text-gray-700"},"Enroll",-1)),(0,l.Lk)("dd",k,(0,r.v_)(o.countTotalEnrollment),1)]),(0,l.Lk)("div",b,[e[6]||(e[6]=(0,l.Lk)("dt",{class:"text-sm font-semibold leading-6 text-gray-700"},"หลักสูตรที่เรียนจบแล้ว",-1)),e[7]||(e[7]=(0,l.Lk)("dd",{class:"text-xs font-medium text-rose-600"},"Complete",-1)),(0,l.Lk)("dd",L,(0,r.v_)(o.countCompleteEnrollments),1)]),(0,l.Lk)("div",w,[e[8]||(e[8]=(0,l.Lk)("dt",{class:"text-sm font-semibold leading-6 text-gray-700"},"หลักสูตรที่กำลังเรียน",-1)),e[9]||(e[9]=(0,l.Lk)("dd",{class:"text-xs font-medium text-gray-700"},"Processing",-1)),(0,l.Lk)("dd",v,(0,r.v_)(o.countProcessingEnrollments),1)])]),(0,l.Lk)("div",E,[(0,l.Lk)("div",_,[e[12]||(e[12]=(0,l.Lk)("h2",{class:"text-base font-semibold leading-6 text-gray-900"},"หลักสูตรที่ลงทะเบียน",-1)),(0,l.Lk)("table",C,[e[10]||(e[10]=(0,l.Lk)("colgroup",null,[(0,l.Lk)("col",{class:"w-full"}),(0,l.Lk)("col"),(0,l.Lk)("col"),(0,l.Lk)("col")],-1)),e[11]||(e[11]=(0,l.Lk)("thead",{class:"border-b border-gray-200 text-gray-900"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{scope:"col",class:"px-0 py-3 font-semibold"},"ชื่อหลักสูตร"),(0,l.Lk)("th",{scope:"col",class:"hidden py-3 pl-8 pr-0 text-right font-semibold sm:table-cell"},"เนื้อหา"),(0,l.Lk)("th",{scope:"col",class:"hidden py-3 pl-8 pr-0 text-right font-semibold sm:table-cell"},"เรียนแล้ว"),(0,l.Lk)("th",{scope:"col",class:"py-3 pl-8 pr-0 text-right font-semibold"},"สถานะ")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(this.enroll,(t=>((0,l.uX)(),(0,l.CE)("tr",{key:t._id,class:"border-b border-gray-100"},[(0,l.Lk)("td",A,[(0,l.bF)(D,{to:"/lesson/detail/"+t.course._id,class:"truncate font-semibold text-indigo-800 hover:text-black"},{default:(0,l.k6)((()=>[(0,l.eW)((0,r.v_)(t.course.name),1)])),_:2},1032,["to"]),(0,l.Lk)("div",j,[(0,l.bF)(i,{icon:["fas","calendar-alt"],class:"mr-1 h-3 w-3 flex-shrink-0 text-gray-400"}),(0,l.eW)(" "+(0,r.v_)(o.formatThaidate(t.createdAt)),1)])]),(0,l.Lk)("td",T,(0,r.v_)(t.analytics&&t.analytics.total?t.analytics.total+" %":"N/A"),1),(0,l.Lk)("td",F,(0,r.v_)(t.analytics&&t.analytics.percent?t.analytics.percent+" %":"N/A"),1),(0,l.Lk)("td",B,(0,r.v_)(t.analytics&&t.analytics.message?t.analytics.message:"N/A"),1)])))),128))])])])])])],64)}s(44114),s(98992),s(54520);var P=s(9964),S={name:"Student Profile",components:{},data(){return{config:i.A.get("configs"),profile:i.A.get("session","user"),session:i.A.get("session"),enroll:[]}},created(){this.profile.req_reset&&this.$router.push("/student/reset")},methods:{formatThaidate(t){return P.A.toThaiDatetime(t)},logout(){this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:500,icon:"success",title:"แจ้งเตือน",text:"ออกจากระบบเรียบร้อยแล้ว"}).then((()=>{i.A.delete("session"),window.location.href=""}))},countEnrollmentsByStatus(t=[],e){return t&&0!==t.length?t.filter((t=>t.analytics&&t.analytics.status&&t.analytics.status.trim()===e)).length:0},countTotalEnrollments(t=[]){return t?t.length:0},async getData(){try{this.activeBlock=!0;const t=await fetch("https://gateway.cloudrestfulapi.com/api/enroll/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{userID:this.session.userID}]}]})}),e=await t.json();for(let s=0;s<e.length;s++){const t=e[s],l=await fetch(`https://gateway.cloudrestfulapi.com/api/course/${t.courseID}`,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}}),a=await l.json();t.course=a}this.enroll=e,this.activeBlock=!1}catch(t){console.log(t)}}},async mounted(){try{await this.getData()}catch(t){console.log(Error)}},computed:{countPendingEnrollments(){return this.countEnrollmentsByStatus(this.enroll,"pending")},countProcessingEnrollments(){return this.countEnrollmentsByStatus(this.enroll,"processing")},countCompleteEnrollments(){return this.countEnrollmentsByStatus(this.enroll,"complete")},countTotalEnrollment(){return this.countTotalEnrollments(this.enroll)}}},N=s(64621);const $=(0,N.A)(S,[["render",D]]);var I=$,X={name:"Lesson Detail",components:{Frontend:I},data(){return{session:i.A.get("session")}},setup(){const t=(0,o.lq)(),e=t.meta.title;(0,n.K7)(e)},computed:{componentName(){return"Frontend"}}};const q=(0,N.A)(X,[["render",a]]);var K=q}}]);
//# sourceMappingURL=8460.8f87d557.js.map