"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[8693],{82670:function(e,t,s){s.r(t),s.d(t,{default:function(){return ks}});var a=s(20641);function r(e,t,s,r,l,o){return(0,a.uX)(),(0,a.Wv)((0,a.$y)(o.componentName))}var l=s(52968),o=s(75220),i=s(40475),n=(s(81454),s(90033)),c=s(53751);const d={class:"hidden lg:flex lg:w-80 lg:flex-col"},u={class:"flex flex-col flex-grow bg-white border-r border-gray-200 h-full"},g={class:"px-4 py-4 border-b border-gray-200"},x={class:"space-y-3"},b={class:"p-3 bg-blue-50 rounded-lg stats-card"},p={class:"flex items-center justify-between"},m={class:"text-sm font-semibold text-blue-600"},h={class:"p-3 bg-green-50 rounded-lg stats-card"},k={class:"flex items-center justify-between"},y={class:"text-sm font-semibold text-green-600"},f={class:"p-3 bg-purple-50 rounded-lg stats-card"},v={class:"flex items-center justify-between"},L={class:"text-sm font-semibold text-purple-600"},C={class:"p-3 bg-orange-50 rounded-lg stats-card"},w={class:"flex items-center justify-between"},P={class:"text-sm font-semibold text-orange-600"},U={class:"px-4 py-4 border-b border-gray-200"},_={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},D={class:"space-y-2"},E={class:"flex items-center"},S={class:"text-xs text-gray-400 w-4"},X={class:"font-medium text-gray-800 truncate ml-2 max-w-32"},T={class:"text-blue-600 font-semibold text-sm"},A={class:"px-4 py-4 border-b border-gray-200"},$={class:"space-y-2 max-h-48 overflow-y-auto"},j={class:"flex items-center justify-between"},M={class:"text-xs font-medium text-gray-700 truncate mr-2"},R={class:"text-xs text-green-600 font-semibold"},F={class:"px-4 py-3 border-b border-gray-200"},I={class:"mb-3"},H={class:"grid grid-cols-2 gap-1.5"},V={class:"space-y-2"},W={class:"px-4 py-4 border-b border-gray-200"},K={class:"space-y-2"},O={class:"mt-auto px-4 py-4 flex-shrink-0"},Q={class:"space-y-2"},Y={class:"flex items-center justify-between text-xs"},B={class:"text-gray-500"},q={class:"flex-1 flex flex-col min-w-0 h-full"},z={class:"lg:hidden bg-white border-b border-gray-200 px-4 py-3"},G={class:"flex items-center justify-between"},N={class:"lg:hidden bg-white border-b border-gray-200"},J={class:"px-4 py-2"},Z={class:"hidden lg:block border-b border-gray-200 bg-white"},ee={class:"px-4"},te={class:"flex -mb-px"},se={class:"flex-1 p-4 overflow-hidden"},ae={class:"h-full flex flex-col"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},le={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},oe={class:"space-y-2"},ie={class:"flex items-center"},ne={class:"text-xs text-gray-400 w-4"},ce={class:"font-medium text-gray-800 truncate ml-2 max-w-48"},de={class:"text-blue-600 font-semibold text-sm"},ue={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},ge={class:"space-y-2"},xe={class:"flex items-center"},be={class:"text-xs text-gray-400 w-4"},pe={class:"font-medium text-gray-800 truncate ml-2 max-w-48"},me={class:"text-green-600 font-semibold text-sm"},he={class:"bg-white rounded-lg shadow-lg flex-1 flex flex-col dashboard-table-section"},ke={class:"p-6 border-b border-gray-200 flex-shrink-0"},ye={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},fe={class:"flex items-center gap-3"},ve=["value"],Le={class:"dashboard-table-content"},Ce={key:0,class:"table-loading"},we={key:1,class:"table-empty"},Pe={key:2,class:"dashboard-table-wrapper"},Ue={class:"dashboard-table-scroll table-container"},_e={class:"min-w-full divide-y divide-gray-200"},De={class:"bg-white divide-y divide-gray-200"},Ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 align-top"},Se={class:"px-6 py-4"},Xe={class:"text-sm"},Te={class:"font-medium text-gray-900 mb-1"},Ae={class:"space-y-1 text-gray-500"},$e={class:"flex items-center"},je={class:"flex items-center"},Me={key:0},Re={key:1},Fe={class:"flex items-center"},Ie={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600 text-center align-top"},He={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600 text-center align-top"},Ve={key:0,class:"px-6 py-4 border-t border-gray-200 flex-shrink-0 dashboard-pagination"},We={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Ke={class:"text-sm text-gray-700"},Oe={key:0,class:"flex items-center gap-2"},Qe=["disabled"],Ye={class:"flex items-center gap-1"},Be={key:1,class:"px-2 text-gray-500"},qe=["onClick"],ze={key:2,class:"px-2 text-gray-500"},Ge=["disabled"],Ne={class:"h-full flex flex-col"},Je={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},Ze={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},et={class:"space-y-2"},tt={class:"flex items-center"},st={class:"text-xs text-gray-400 w-4"},at={class:"font-medium text-gray-800 truncate ml-2 max-w-32"},rt={class:"text-blue-600 font-semibold text-sm"},lt={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},ot={class:"space-y-2"},it={class:"flex items-center"},nt={class:"text-xs text-gray-400 w-4"},ct={class:"font-medium text-gray-800 truncate ml-2 max-w-32"},dt={class:"text-green-600 font-semibold text-sm"},ut={class:"bg-white rounded-lg shadow-lg flex-1 flex flex-col dashboard-table-section"},gt={class:"p-6 border-b border-gray-200 flex-shrink-0"},xt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},bt={class:"flex items-center gap-3"},pt=["value"],mt={class:"dashboard-table-content"},ht={key:0,class:"table-empty"},kt={key:1,class:"dashboard-table-wrapper"},yt={class:"dashboard-table-scroll table-container"},ft={class:"min-w-full divide-y divide-gray-200"},vt={class:"bg-white divide-y divide-gray-200"},Lt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ct={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},wt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Ut={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600"},_t={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600"},Dt={class:"px-6 py-4 whitespace-nowrap text-center"},Et={class:"flex items-center justify-center space-x-2"},St=["id","checked","onChange","disabled"],Xt=["for"],Tt={key:0,class:"flex items-center"},At={key:1,class:"text-xs text-gray-500"},$t={key:0,class:"px-6 py-4 border-t border-gray-200 flex-shrink-0 dashboard-pagination"},jt={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},Mt={class:"text-sm text-gray-700"},Rt={key:0,class:"flex items-center gap-2"},Ft=["disabled"],It={class:"flex items-center gap-1"},Ht={key:1,class:"px-2 text-gray-500"},Vt=["onClick"],Wt={key:2,class:"px-2 text-gray-500"},Kt=["disabled"],Ot={class:"flex flex-col h-full"},Qt={class:"flex items-center justify-between px-4 py-4 border-b border-gray-200"},Yt={class:"px-4 py-4 border-b border-gray-200"},Bt={class:"grid grid-cols-2 gap-2"},qt={class:"p-2 bg-blue-50 rounded-lg"},zt={class:"text-center"},Gt={class:"text-lg font-bold text-blue-600"},Nt={class:"p-2 bg-green-50 rounded-lg"},Jt={class:"text-center"},Zt={class:"text-lg font-bold text-green-600"},es={class:"p-2 bg-purple-50 rounded-lg"},ts={class:"text-center"},ss={class:"text-lg font-bold text-purple-600"},as={class:"p-2 bg-orange-50 rounded-lg"},rs={class:"text-center"},ls={class:"text-lg font-bold text-orange-600"},os={class:"px-4 py-4 border-b border-gray-200"},is={class:"space-y-1"},ns={class:"px-4 py-4 border-b border-gray-200"},cs={class:"space-y-2"};function ds(e,t,s,r,l,o){return(0,a.uX)(),(0,a.CE)("div",{class:(0,n.C4)(["bg-gray-50 flex overflow-hidden dashboard-container",[s.headerType&&`with-${s.headerType}`,s.customClass]]),style:(0,n.Tr)(s.customHeight?{height:s.customHeight,maxHeight:s.customHeight}:{})},[(0,a.Lk)("div",d,[(0,a.Lk)("div",u,[t[56]||(t[56]=(0,a.Lk)("div",{class:"flex items-center justify-between px-4 py-4 border-b border-gray-200 flex-shrink-0"},[(0,a.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"แดชบอร์ดหลักสูตร")],-1)),(0,a.bo)((0,a.Lk)("div",g,[t[38]||(t[38]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"สถิติรวม",-1)),(0,a.Lk)("div",x,[(0,a.Lk)("div",b,[(0,a.Lk)("div",p,[t[34]||(t[34]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-blue-500 rounded-full"}),(0,a.Lk)("span",{class:"text-xs text-gray-700"},"หลักสูตรทั้งหมด")],-1)),(0,a.Lk)("span",m,(0,n.v_)(l.totalCourses),1)])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",k,[t[35]||(t[35]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),(0,a.Lk)("span",{class:"text-xs text-gray-700"},"ผู้ลงทะเบียนทั้งหมด")],-1)),(0,a.Lk)("span",y,(0,n.v_)(l.totalEnrollments),1)])]),(0,a.Lk)("div",f,[(0,a.Lk)("div",v,[t[36]||(t[36]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-purple-500 rounded-full"}),(0,a.Lk)("span",{class:"text-xs text-gray-700"},"ผู้เรียนจบทั้งหมด")],-1)),(0,a.Lk)("span",L,(0,n.v_)(l.totalCompletions),1)])]),(0,a.Lk)("div",C,[(0,a.Lk)("div",w,[t[37]||(t[37]=(0,a.Lk)("div",{class:"flex items-center gap-2"},[(0,a.Lk)("div",{class:"w-2 h-2 bg-orange-500 rounded-full"}),(0,a.Lk)("span",{class:"text-xs text-gray-700"},"อัตราการเรียนจบเฉลี่ย")],-1)),(0,a.Lk)("span",P,(0,n.v_)(l.averageCompletionRate.toFixed(2))+"%",1)])])])],512),[[c.aG,"courses"===l.activeTab]]),(0,a.bo)((0,a.Lk)("div",U,[(0,a.Lk)("div",_,[t[39]||(t[39]=(0,a.Lk)("div",{class:"flex items-center justify-between mb-3"},[(0,a.Lk)("h3",{class:"text-sm font-semibold text-gray-700 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-medal text-yellow-500 mr-2 text-xs"}),(0,a.eW)(" หลักสูตรยอดนิยม 5 อันดับ ")]),(0,a.Lk)("span",{class:"text-xs text-gray-500"},"คน")],-1)),(0,a.Lk)("div",D,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.topEnrolledCourses.slice(0,5),((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:"flex justify-between items-center text-sm py-1"},[(0,a.Lk)("div",E,[(0,a.Lk)("span",S,(0,n.v_)(t+1)+".",1),(0,a.Lk)("span",X,(0,n.v_)(e.name),1)]),(0,a.Lk)("span",T,(0,n.v_)(e.enrollCount),1)])))),128))])])],512),[[c.aG,"courses"===l.activeTab]]),(0,a.bo)((0,a.Lk)("div",A,[t[40]||(t[40]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"ผู้ใช้งานยอดนิยม",-1)),(0,a.Lk)("div",$,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.topUsers.slice(0,3),(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.user._id,class:"p-2 bg-gray-50 rounded-lg"},[(0,a.Lk)("div",j,[(0,a.Lk)("span",M,(0,n.v_)(e.user.firstname)+" "+(0,n.v_)(e.user.lastname),1),(0,a.Lk)("span",R,(0,n.v_)(e.completedCount),1)])])))),128))])],512),[[c.aG,"users"===l.activeTab]]),(0,a.bo)((0,a.Lk)("div",F,[t[49]||(t[49]=(0,a.Lk)("div",{class:"flex items-center mb-3"},[(0,a.Lk)("i",{class:"fas fa-filter text-blue-500 mr-2 text-sm"}),(0,a.Lk)("h3",{class:"text-sm font-semibold text-gray-700"},"ตัวกรองข้อมูล")],-1)),(0,a.Lk)("div",I,[t[45]||(t[45]=(0,a.Lk)("label",{class:"block text-xs font-medium text-gray-600 mb-2"},"ช่วงเวลา",-1)),(0,a.Lk)("div",H,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=e=>o.setDateRange("week")),class:(0,n.C4)(["text-xs py-1.5 px-2 rounded border transition-all duration-200 date-filter-button",o.isDateRangeActive("week")?"bg-blue-500 text-white border-blue-500 active":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"])},t[41]||(t[41]=[(0,a.Lk)("i",{class:"fas fa-calendar-week mr-1"},null,-1),(0,a.eW)(" 1W ")]),2),(0,a.Lk)("button",{onClick:t[1]||(t[1]=e=>o.setDateRange("month")),class:(0,n.C4)(["text-xs py-1.5 px-2 rounded border transition-all duration-200 date-filter-button",o.isDateRangeActive("month")?"bg-blue-500 text-white border-blue-500 active":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"])},t[42]||(t[42]=[(0,a.Lk)("i",{class:"fas fa-calendar-alt mr-1"},null,-1),(0,a.eW)(" 1M ")]),2),(0,a.Lk)("button",{onClick:t[2]||(t[2]=e=>o.setDateRange("quarter")),class:(0,n.C4)(["text-xs py-1.5 px-2 rounded border transition-all duration-200 date-filter-button",o.isDateRangeActive("quarter")?"bg-blue-500 text-white border-blue-500 active":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"])},t[43]||(t[43]=[(0,a.Lk)("i",{class:"fas fa-calendar mr-1"},null,-1),(0,a.eW)(" 3M ")]),2),(0,a.Lk)("button",{onClick:t[3]||(t[3]=e=>o.setDateRange("year")),class:(0,n.C4)(["text-xs py-1.5 px-2 rounded border transition-all duration-200 date-filter-button",o.isDateRangeActive("year")?"bg-blue-500 text-white border-blue-500 active":"bg-white text-gray-700 border-gray-300 hover:bg-blue-50"])},t[44]||(t[44]=[(0,a.Lk)("i",{class:"fas fa-calendar-check mr-1"},null,-1),(0,a.eW)(" 1Y ")]),2)])]),(0,a.Lk)("div",V,[(0,a.Lk)("div",null,[t[46]||(t[46]=(0,a.Lk)("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"วันที่เริ่มต้น",-1)),(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=e=>l.startDate=e),onChange:t[5]||(t[5]=e=>l.selectedDateRange="custom"),class:"w-full text-xs py-1.5 px-2 rounded border border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"},null,544),[[c.Jo,l.startDate]])]),(0,a.Lk)("div",null,[t[47]||(t[47]=(0,a.Lk)("label",{class:"block text-xs font-medium text-gray-600 mb-1"},"วันที่สิ้นสุด",-1)),(0,a.bo)((0,a.Lk)("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=e=>l.endDate=e),onChange:t[7]||(t[7]=e=>l.selectedDateRange="custom"),class:"w-full text-xs py-1.5 px-2 rounded border border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"},null,544),[[c.Jo,l.endDate]])]),(0,a.Lk)("button",{onClick:t[8]||(t[8]=e=>o.getData(l.startDate,l.endDate)),class:"w-full bg-green-500 hover:bg-green-600 text-white text-xs font-medium py-2 px-3 rounded transition duration-200 flex items-center justify-center"},t[48]||(t[48]=[(0,a.Lk)("i",{class:"fas fa-search mr-1.5"},null,-1),(0,a.eW)(" ค้นหา ")]))])],512),[[c.aG,"users"===l.activeTab]]),(0,a.Lk)("div",W,[t[52]||(t[52]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"การดำเนินการด่วน",-1)),(0,a.Lk)("div",K,[(0,a.Lk)("button",{onClick:t[9]||(t[9]=e=>o.getData()),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[50]||(t[50]=[(0,a.Lk)("i",{class:"fas fa-sync-alt text-sm w-4"},null,-1),(0,a.Lk)("span",null,"รีเฟรชข้อมูล",-1)])),(0,a.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>o.exportData&&o.exportData(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[51]||(t[51]=[(0,a.Lk)("i",{class:"fas fa-download text-sm w-4"},null,-1),(0,a.Lk)("span",null,"ส่งออกข้อมูล",-1)]))])]),(0,a.Lk)("div",O,[t[55]||(t[55]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"ประสิทธิภาพ",-1)),(0,a.Lk)("div",Q,[(0,a.Lk)("div",Y,[t[53]||(t[53]=(0,a.Lk)("span",{class:"text-gray-600"},"อัปเดตล่าสุด",-1)),(0,a.Lk)("span",B,(0,n.v_)((new Date).toLocaleTimeString()),1)]),t[54]||(t[54]=(0,a.Lk)("div",{class:"flex items-center justify-between text-xs"},[(0,a.Lk)("span",{class:"text-gray-600"},"สถานะระบบ"),(0,a.Lk)("span",{class:"text-green-600"},"ออนไลน์")],-1))])])])]),(0,a.Lk)("div",q,[(0,a.Lk)("div",z,[(0,a.Lk)("div",G,[t[58]||(t[58]=(0,a.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"แดชบอร์ดหลักสูตร",-1)),(0,a.Lk)("button",{onClick:t[11]||(t[11]=(...e)=>o.toggleMobileSidebar&&o.toggleMobileSidebar(...e)),class:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},t[57]||(t[57]=[(0,a.Lk)("i",{class:"fas fa-bars"},null,-1)]))])]),(0,a.Lk)("div",N,[(0,a.Lk)("div",J,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[12]||(t[12]=e=>l.activeTab=e),class:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},t[59]||(t[59]=[(0,a.Lk)("option",{value:"courses"},"แดชบอร์ดหลักสูตร",-1),(0,a.Lk)("option",{value:"users"},"แดชบอร์ดผู้ใช้งาน",-1)]),512),[[c.u1,l.activeTab]])])]),(0,a.Lk)("div",Z,[(0,a.Lk)("div",ee,[(0,a.Lk)("nav",te,[(0,a.Lk)("button",{onClick:t[13]||(t[13]=e=>l.activeTab="courses"),class:(0,n.C4)(["py-4 px-6 font-medium text-sm transition-colors duration-200","courses"===l.activeTab?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," แดชบอร์ดหลักสูตร ",2),(0,a.Lk)("button",{onClick:t[14]||(t[14]=e=>l.activeTab="users"),class:(0,n.C4)(["py-4 px-6 font-medium text-sm transition-colors duration-200","users"===l.activeTab?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," แดชบอร์ดผู้ใช้งาน ",2)])])]),(0,a.Lk)("div",se,[(0,a.bo)((0,a.Lk)("div",ae,[(0,a.Lk)("div",re,[(0,a.Lk)("div",le,[t[60]||(t[60]=(0,a.Lk)("div",{class:"flex items-center justify-between mb-3"},[(0,a.Lk)("h3",{class:"text-sm font-semibold text-gray-700 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-user-plus text-blue-500 mr-2 text-xs"}),(0,a.eW)(" ลงทะเบียนสูงสุด 5 อันดับ ")]),(0,a.Lk)("span",{class:"text-xs text-gray-500"},"คน")],-1)),(0,a.Lk)("div",oe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.topEnrolledCourses.slice(0,5),((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:"flex justify-between items-center text-sm py-1"},[(0,a.Lk)("div",ie,[(0,a.Lk)("span",ne,(0,n.v_)(t+1)+".",1),(0,a.Lk)("span",ce,(0,n.v_)(e.name),1)]),(0,a.Lk)("span",de,(0,n.v_)(e.enrollCount),1)])))),128))])]),(0,a.Lk)("div",ue,[t[61]||(t[61]=(0,a.Lk)("div",{class:"flex items-center justify-between mb-3"},[(0,a.Lk)("h3",{class:"text-sm font-semibold text-gray-700 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-graduation-cap text-green-500 mr-2 text-xs"}),(0,a.eW)(" อัตราเรียนจบสูงสุด 5 อันดับ ")]),(0,a.Lk)("span",{class:"text-xs text-gray-500"},"%")],-1)),(0,a.Lk)("div",ge,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.topCompletionRateCourses.slice(0,5),((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e._id,class:"flex justify-between items-center text-sm py-1"},[(0,a.Lk)("div",xe,[(0,a.Lk)("span",be,(0,n.v_)(t+1)+".",1),(0,a.Lk)("span",pe,(0,n.v_)(e.name),1)]),(0,a.Lk)("span",me,(0,n.v_)((e.completedCount/e.enrollCount*100).toFixed(2))+"% ",1)])))),128))])])]),(0,a.Lk)("div",he,[(0,a.Lk)("div",ke,[(0,a.Lk)("div",ye,[t[63]||(t[63]=(0,a.Lk)("h2",{class:"text-xl font-bold text-gray-800"},"รายชื่อหลักสูตรทั้งหมด",-1)),(0,a.Lk)("div",fe,[t[62]||(t[62]=(0,a.Lk)("span",{class:"text-sm text-gray-600"},"แสดง:",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[15]||(t[15]=e=>l.coursesPerPage=e),onChange:t[16]||(t[16]=e=>o.changeCoursePageSize(l.coursesPerPage)),class:"text-sm border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 py-1 px-2"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.itemsPerPageOptions,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,ve)))),128))],544),[[c.u1,l.coursesPerPage]])])])]),(0,a.Lk)("div",Le,[l.loading?((0,a.uX)(),(0,a.CE)("div",Ce,t[64]||(t[64]=[(0,a.Lk)("div",{class:"text-center"},[(0,a.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.Lk)("p",{class:"mt-4 text-gray-600"},"กำลังโหลดข้อมูล...")],-1)]))):0===l.items.length?((0,a.uX)(),(0,a.CE)("div",we,t[65]||(t[65]=[(0,a.Lk)("div",{class:"text-center text-gray-500"},[(0,a.Lk)("i",{class:"fas fa-inbox text-4xl mb-4 text-gray-300"}),(0,a.Lk)("p",null,"ไม่พบข้อมูลหลักสูตร")],-1)]))):((0,a.uX)(),(0,a.CE)("div",Pe,[(0,a.Lk)("div",Ue,[(0,a.Lk)("table",_e,[t[69]||(t[69]=(0,a.Lk)("thead",{class:"bg-gray-50 sticky top-0"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"#"),(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ข้อมูลหลักสูตร"),(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},"จำนวนผู้ลงทะเบียน"),(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider text-center"},"จำนวนผู้เรียนจบ")])],-1)),(0,a.Lk)("tbody",De,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.paginatedCourses,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e._id,class:"hover:bg-gray-50 transition-colors duration-200"},[(0,a.Lk)("td",Ee,(0,n.v_)((l.currentCoursePage-1)*l.coursesPerPage+s+1),1),(0,a.Lk)("td",Se,[(0,a.Lk)("div",Xe,[(0,a.Lk)("p",Te,(0,n.v_)(e.name),1),(0,a.Lk)("div",Ae,[(0,a.Lk)("p",$e,[t[66]||(t[66]=(0,a.Lk)("span",{class:"font-medium mr-2"},"ประเภท:",-1)),(0,a.eW)(" "+(0,n.v_)(e.type||"-"),1)]),(0,a.Lk)("p",je,[t[67]||(t[67]=(0,a.Lk)("span",{class:"font-medium mr-2"},"วิทยากร:",-1)),Array.isArray(e.lecturer)?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[e.lecturer.length>0?((0,a.uX)(),(0,a.CE)("span",Me,(0,n.v_)(e.lecturer.map((e=>e.name)).join(", ")),1)):((0,a.uX)(),(0,a.CE)("span",Re,"-"))],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)((0,n.v_)(e.lecturer||"-"),1)],64))]),(0,a.Lk)("p",Fe,[t[68]||(t[68]=(0,a.Lk)("span",{class:"font-medium mr-2"},"หมวดหมู่:",-1)),Array.isArray(e.category)&&e.category.length?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.eW)((0,n.v_)(e.category.join(", ")),1)],64)):((0,a.uX)(),(0,a.CE)(a.FK,{key:1},[(0,a.eW)(" - ")],64))])])])]),(0,a.Lk)("td",Ie,(0,n.v_)(e.enrollCount),1),(0,a.Lk)("td",He,(0,n.v_)(e.completedCount),1)])))),128))])])])]))]),l.items.length>0?((0,a.uX)(),(0,a.CE)("div",Ve,[(0,a.Lk)("div",We,[(0,a.Lk)("div",Ke,(0,n.v_)(o.coursesPaginationInfo),1),o.totalCoursePages>1?((0,a.uX)(),(0,a.CE)("div",Oe,[(0,a.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>o.previousCoursePage&&o.previousCoursePage(...e)),disabled:1===l.currentCoursePage,class:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[70]||(t[70]=[(0,a.Lk)("i",{class:"fas fa-chevron-left mr-1"},null,-1),(0,a.eW)(" ก่อนหน้า ")]),8,Qe),(0,a.Lk)("div",Ye,[o.getVisibleCoursePages()[0]>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[18]||(t[18]=e=>o.goToCoursePage(1)),class:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50"}," 1 ")):(0,a.Q3)("",!0),o.getVisibleCoursePages()[0]>2?((0,a.uX)(),(0,a.CE)("span",Be,"...")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.getVisibleCoursePages(),(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>o.goToCoursePage(e),class:(0,n.C4)(["px-3 py-1 text-sm border rounded-md",l.currentCoursePage===e?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"])},(0,n.v_)(e),11,qe)))),128)),o.getVisibleCoursePages()[o.getVisibleCoursePages().length-1]<o.totalCoursePages-1?((0,a.uX)(),(0,a.CE)("span",ze,"...")):(0,a.Q3)("",!0),o.getVisibleCoursePages()[o.getVisibleCoursePages().length-1]<o.totalCoursePages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[19]||(t[19]=e=>o.goToCoursePage(o.totalCoursePages)),class:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50"},(0,n.v_)(o.totalCoursePages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[20]||(t[20]=(...e)=>o.nextCoursePage&&o.nextCoursePage(...e)),disabled:l.currentCoursePage===o.totalCoursePages,class:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[71]||(t[71]=[(0,a.eW)(" ถัดไป "),(0,a.Lk)("i",{class:"fas fa-chevron-right ml-1"},null,-1)]),8,Ge)])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)])],512),[[c.aG,"courses"===l.activeTab]]),(0,a.bo)((0,a.Lk)("div",Ne,[(0,a.Lk)("div",Je,[(0,a.Lk)("div",Ze,[t[72]||(t[72]=(0,a.Lk)("div",{class:"flex items-center justify-between mb-3"},[(0,a.Lk)("h3",{class:"text-sm font-semibold text-gray-700 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-user-plus text-blue-500 mr-2 text-xs"}),(0,a.eW)(" ลงทะเบียนสูงสุด 5 อันดับ ")]),(0,a.Lk)("span",{class:"text-xs text-gray-500"},"คน")],-1)),(0,a.Lk)("div",et,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.topUsers.slice(0,5),((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e.user._id,class:"flex justify-between items-center text-sm py-1"},[(0,a.Lk)("div",tt,[(0,a.Lk)("span",st,(0,n.v_)(t+1)+".",1),(0,a.Lk)("span",at,(0,n.v_)(e.user.firstname)+" "+(0,n.v_)(e.user.lastname),1)]),(0,a.Lk)("span",rt,(0,n.v_)(e.enrollCount),1)])))),128))])]),(0,a.Lk)("div",lt,[t[73]||(t[73]=(0,a.Lk)("div",{class:"flex items-center justify-between mb-3"},[(0,a.Lk)("h3",{class:"text-sm font-semibold text-gray-700 flex items-center"},[(0,a.Lk)("i",{class:"fas fa-graduation-cap text-green-500 mr-2 text-xs"}),(0,a.eW)(" เรียนจบสูงสุด 5 อันดับ ")]),(0,a.Lk)("span",{class:"text-xs text-gray-500"},"คอร์ส")],-1)),(0,a.Lk)("div",ot,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.topUsers.slice(0,5),((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:e.user._id,class:"flex justify-between items-center text-sm py-1"},[(0,a.Lk)("div",it,[(0,a.Lk)("span",nt,(0,n.v_)(t+1)+".",1),(0,a.Lk)("span",ct,(0,n.v_)(e.user.firstname)+" "+(0,n.v_)(e.user.lastname),1)]),(0,a.Lk)("span",dt,(0,n.v_)(e.completedCount),1)])))),128))])])]),(0,a.Lk)("div",ut,[(0,a.Lk)("div",gt,[(0,a.Lk)("div",xt,[t[75]||(t[75]=(0,a.Lk)("h2",{class:"text-xl font-bold text-gray-800"},"ตารางแสดงข้อมูลผู้ใช้ทั้งหมด",-1)),(0,a.Lk)("div",bt,[t[74]||(t[74]=(0,a.Lk)("span",{class:"text-sm text-gray-600"},"แสดง:",-1)),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[21]||(t[21]=e=>l.usersPerPage=e),onChange:t[22]||(t[22]=e=>o.changeUserPageSize(l.usersPerPage)),class:"text-sm border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 py-1 px-2"},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.itemsPerPageOptions,(e=>((0,a.uX)(),(0,a.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label),9,pt)))),128))],544),[[c.u1,l.usersPerPage]])])])]),(0,a.Lk)("div",mt,[l.topUsers.length?((0,a.uX)(),(0,a.CE)("div",kt,[(0,a.Lk)("div",yt,[(0,a.Lk)("table",ft,[t[78]||(t[78]=(0,a.Lk)("thead",{class:"bg-gray-50 sticky top-0"},[(0,a.Lk)("tr",null,[(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"#"),(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ชื่อ"),(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"นามสกุล"),(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"อีเมล"),(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"จำนวนการลงทะเบียน"),(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"จำนวนคอร์สที่เรียนจบ"),(0,a.Lk)("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"อัตราการเรียนจบ"),(0,a.Lk)("th",{class:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"ตรวจสอบแล้ว")])],-1)),(0,a.Lk)("tbody",vt,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.paginatedUsers,((e,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.user._id,class:"hover:bg-gray-50 transition-colors duration-200"},[(0,a.Lk)("td",Lt,(0,n.v_)((l.currentUserPage-1)*l.usersPerPage+s+1),1),(0,a.Lk)("td",Ct,(0,n.v_)(e.user.firstname||"-"),1),(0,a.Lk)("td",wt,(0,n.v_)(e.user.lastname||"-"),1),(0,a.Lk)("td",Pt,(0,n.v_)(e.user.email||"-"),1),(0,a.Lk)("td",Ut,(0,n.v_)(e.enrollCount),1),(0,a.Lk)("td",_t,(0,n.v_)(e.completedCount),1),(0,a.Lk)("td",{class:(0,n.C4)(["px-6 py-4 whitespace-nowrap text-sm font-medium",o.getCompletionRateColor(e.completedCount,e.enrollCount)])},(0,n.v_)(o.calculateCompletionRate(e.completedCount,e.enrollCount))+"% ",3),(0,a.Lk)("td",Dt,[(0,a.Lk)("div",Et,[(0,a.Lk)("input",{type:"checkbox",id:`check-${e.user._id}`,checked:e.checked?.status||!1,onChange:t=>o.updateUserCheckedStatus(e.user._id,t.target.checked),disabled:l.checkingUsers.includes(e.user._id),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200 disabled:opacity-50"},null,40,St),(0,a.Lk)("label",{for:`check-${e.user._id}`,class:"sr-only"},"ตรวจสอบผู้ใช้ "+(0,n.v_)(e.user.firstname)+" "+(0,n.v_)(e.user.lastname),9,Xt),l.checkingUsers.includes(e.user._id)?((0,a.uX)(),(0,a.CE)("div",Tt,t[77]||(t[77]=[(0,a.Lk)("i",{class:"fas fa-spinner fa-spin text-blue-500 text-xs"},null,-1)]))):e.checked?.status&&e.checked?.checkedAt?((0,a.uX)(),(0,a.CE)("div",At,(0,n.v_)(o.formatCheckedDate(e.checked.checkedAt)),1)):(0,a.Q3)("",!0)])])])))),128))])])])])):((0,a.uX)(),(0,a.CE)("div",ht,t[76]||(t[76]=[(0,a.Lk)("div",{class:"text-center text-gray-500"},[(0,a.Lk)("i",{class:"fas fa-users text-4xl mb-4 text-gray-300"}),(0,a.Lk)("p",null,"ไม่พบข้อมูลผู้ใช้")],-1)])))]),l.topUsers.length>0?((0,a.uX)(),(0,a.CE)("div",$t,[(0,a.Lk)("div",jt,[(0,a.Lk)("div",Mt,(0,n.v_)(o.usersPaginationInfo),1),o.totalUserPages>1?((0,a.uX)(),(0,a.CE)("div",Rt,[(0,a.Lk)("button",{onClick:t[23]||(t[23]=(...e)=>o.previousUserPage&&o.previousUserPage(...e)),disabled:1===l.currentUserPage,class:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[79]||(t[79]=[(0,a.Lk)("i",{class:"fas fa-chevron-left mr-1"},null,-1),(0,a.eW)(" ก่อนหน้า ")]),8,Ft),(0,a.Lk)("div",It,[o.getVisibleUserPages()[0]>1?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[24]||(t[24]=e=>o.goToUserPage(1)),class:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50"}," 1 ")):(0,a.Q3)("",!0),o.getVisibleUserPages()[0]>2?((0,a.uX)(),(0,a.CE)("span",Ht,"...")):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.getVisibleUserPages(),(e=>((0,a.uX)(),(0,a.CE)("button",{key:e,onClick:t=>o.goToUserPage(e),class:(0,n.C4)(["px-3 py-1 text-sm border rounded-md",l.currentUserPage===e?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"])},(0,n.v_)(e),11,Vt)))),128)),o.getVisibleUserPages()[o.getVisibleUserPages().length-1]<o.totalUserPages-1?((0,a.uX)(),(0,a.CE)("span",Wt,"...")):(0,a.Q3)("",!0),o.getVisibleUserPages()[o.getVisibleUserPages().length-1]<o.totalUserPages?((0,a.uX)(),(0,a.CE)("button",{key:3,onClick:t[25]||(t[25]=e=>o.goToUserPage(o.totalUserPages)),class:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50"},(0,n.v_)(o.totalUserPages),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>o.nextUserPage&&o.nextUserPage(...e)),disabled:l.currentUserPage===o.totalUserPages,class:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},t[80]||(t[80]=[(0,a.eW)(" ถัดไป "),(0,a.Lk)("i",{class:"fas fa-chevron-right ml-1"},null,-1)]),8,Kt)])):(0,a.Q3)("",!0)])])):(0,a.Q3)("",!0)])],512),[[c.aG,"users"===l.activeTab]])])]),l.showMobileSidebar?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t[33]||(t[33]=(...e)=>o.toggleMobileSidebar&&o.toggleMobileSidebar(...e))},[(0,a.Lk)("div",{class:"w-80 h-full bg-white transform transition-transform duration-300",onClick:t[32]||(t[32]=(0,c.D$)((()=>{}),["stop"]))},[(0,a.Lk)("div",Ot,[(0,a.Lk)("div",Qt,[t[82]||(t[82]=(0,a.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"แดชบอร์ดหลักสูตร",-1)),(0,a.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>o.toggleMobileSidebar&&o.toggleMobileSidebar(...e)),class:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},t[81]||(t[81]=[(0,a.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,a.bo)((0,a.Lk)("div",Yt,[t[87]||(t[87]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"สถิติรวม",-1)),(0,a.Lk)("div",Bt,[(0,a.Lk)("div",qt,[(0,a.Lk)("div",zt,[(0,a.Lk)("div",Gt,(0,n.v_)(l.totalCourses),1),t[83]||(t[83]=(0,a.Lk)("div",{class:"text-xs text-gray-600"},"หลักสูตร",-1))])]),(0,a.Lk)("div",Nt,[(0,a.Lk)("div",Jt,[(0,a.Lk)("div",Zt,(0,n.v_)(l.totalEnrollments),1),t[84]||(t[84]=(0,a.Lk)("div",{class:"text-xs text-gray-600"},"ลงทะเบียน",-1))])]),(0,a.Lk)("div",es,[(0,a.Lk)("div",ts,[(0,a.Lk)("div",ss,(0,n.v_)(l.totalCompletions),1),t[85]||(t[85]=(0,a.Lk)("div",{class:"text-xs text-gray-600"},"เรียนจบ",-1))])]),(0,a.Lk)("div",as,[(0,a.Lk)("div",rs,[(0,a.Lk)("div",ls,(0,n.v_)(l.averageCompletionRate.toFixed(2))+"%",1),t[86]||(t[86]=(0,a.Lk)("div",{class:"text-xs text-gray-600"},"อัตราจบ",-1))])])])],512),[[c.aG,"courses"===l.activeTab]]),(0,a.Lk)("div",os,[t[90]||(t[90]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"เมนู",-1)),(0,a.Lk)("nav",is,[(0,a.Lk)("button",{onClick:t[28]||(t[28]=e=>o.selectTabAndCloseMobile("courses")),class:(0,n.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors duration-200",{"bg-blue-100 text-blue-700 font-medium":"courses"===l.activeTab,"text-gray-600 hover:bg-gray-100 hover:text-gray-900":"courses"!==l.activeTab}])},t[88]||(t[88]=[(0,a.Lk)("i",{class:"fas fa-graduation-cap text-sm w-4"},null,-1),(0,a.Lk)("span",{class:"flex-1 text-left"},"แดชบอร์ดหลักสูตร",-1)]),2),(0,a.Lk)("button",{onClick:t[29]||(t[29]=e=>o.selectTabAndCloseMobile("users")),class:(0,n.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors duration-200",{"bg-blue-100 text-blue-700 font-medium":"users"===l.activeTab,"text-gray-600 hover:bg-gray-100 hover:text-gray-900":"users"!==l.activeTab}])},t[89]||(t[89]=[(0,a.Lk)("i",{class:"fas fa-users text-sm w-4"},null,-1),(0,a.Lk)("span",{class:"flex-1 text-left"},"แดชบอร์ดผู้ใช้งาน",-1)]),2)])]),(0,a.Lk)("div",ns,[t[93]||(t[93]=(0,a.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"การดำเนินการ",-1)),(0,a.Lk)("div",cs,[(0,a.Lk)("button",{onClick:t[30]||(t[30]=e=>{o.getData(),o.toggleMobileSidebar()}),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[91]||(t[91]=[(0,a.Lk)("i",{class:"fas fa-sync-alt text-sm w-4"},null,-1),(0,a.Lk)("span",null,"รีเฟรชข้อมูล",-1)])),(0,a.Lk)("button",{onClick:t[31]||(t[31]=e=>{o.exportData,o.toggleMobileSidebar()}),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[92]||(t[92]=[(0,a.Lk)("i",{class:"fas fa-download text-sm w-4"},null,-1),(0,a.Lk)("span",null,"ส่งออกข้อมูล",-1)]))])])])])])):(0,a.Q3)("",!0)],6)}s(44114),s(98992),s(54520),s(3949),s(8872),s(14603),s(47566),s(98721);var us={name:"EnrollList",props:{headerType:{type:String,default:null,validator:e=>["topbar","breadcrumb","full-admin",null].includes(e)},headerHeight:{type:[Number,String],default:null},customHeight:{type:String,default:null},customClass:{type:String,default:""}},data(){const e=i.A.get("session"),t=(new Date).toISOString().substr(0,10),s=(new Date).getFullYear(),a=`${s}-04-09`;return{activeTab:"courses",items:[],loading:!1,configs:i.A.get("configs"),session:e,totalCourses:0,totalEnrollments:0,totalCompletions:0,averageCompletionRate:0,topEnrolledCourses:[],topCompletionRateCourses:[],topUsers:[],startDate:a,endDate:t,showMobileSidebar:!1,coursesPerPage:10,currentCoursePage:1,usersPerPage:10,currentUserPage:1,itemsPerPageOptions:[{value:10,label:"10 รายการ"},{value:25,label:"25 รายการ"},{value:50,label:"50 รายการ"},{value:100,label:"100 รายการ"},{value:-1,label:"ทั้งหมด"}],selectedDateRange:"custom",checkingUsers:[]}},computed:{totalCoursePages(){return-1===this.coursesPerPage?1:Math.ceil(this.items.length/this.coursesPerPage)},paginatedCourses(){if(-1===this.coursesPerPage)return this.items;const e=(this.currentCoursePage-1)*this.coursesPerPage,t=e+this.coursesPerPage;return this.items.slice(e,t)},coursesPaginationInfo(){if(-1===this.coursesPerPage)return`แสดง ${this.items.length} รายการจากทั้งหมด ${this.items.length} รายการ`;const e=(this.currentCoursePage-1)*this.coursesPerPage+1,t=Math.min(e+this.coursesPerPage-1,this.items.length);return`แสดง ${e}-${t} จากทั้งหมด ${this.items.length} รายการ`},totalUserPages(){return-1===this.usersPerPage?1:Math.ceil(this.topUsers.length/this.usersPerPage)},paginatedUsers(){if(-1===this.usersPerPage)return this.topUsers;const e=(this.currentUserPage-1)*this.usersPerPage,t=e+this.usersPerPage;return this.topUsers.slice(e,t)},usersPaginationInfo(){if(-1===this.usersPerPage)return`แสดง ${this.topUsers.length} รายการจากทั้งหมด ${this.topUsers.length} รายการ`;const e=(this.currentUserPage-1)*this.usersPerPage+1,t=Math.min(e+this.usersPerPage-1,this.topUsers.length);return`แสดง ${e}-${t} จากทั้งหมด ${this.topUsers.length} รายการ`}},methods:{async getData(){try{this.loading=!0;const e=new Date(this.startDate),t=new Date(this.endDate),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59)),{data:r,status:l}=await this.$Request.POST("dashboard",{startUTC:s.toISOString(),endUTC:a.toISOString(),unit:"6425be9928ebd01be519d7bd"},this.configs.key);200===l&&r.status&&(Array.isArray(r.data.course)&&(this.items=r.data.course,this.calculateStatistics(),this.calculateTopCourses()),Array.isArray(r.data.user)&&(this.topUsers=r.data.user))}catch(e){console.error("getData error",e)}finally{this.loading=!1}},calculateStatistics(){this.totalCourses=this.items.length,this.totalEnrollments=this.items.reduce(((e,t)=>e+t.enrollCount),0),this.totalCompletions=this.items.reduce(((e,t)=>e+t.completedCount),0),this.averageCompletionRate=this.totalCompletions/this.totalEnrollments*100},calculateTopCourses(){this.topEnrolledCourses=[...this.items].sort(((e,t)=>t.enrollCount-e.enrollCount)).slice(0,5),this.topCompletionRateCourses=[...this.items].filter((e=>e.enrollCount>0)).sort(((e,t)=>t.completedCount/t.enrollCount-e.completedCount/e.enrollCount)).slice(0,5)},calculateCompletionRate(e,t){return t?(e/t*100).toFixed(2):0},getCompletionRateColor(e,t){const s=e/t*100;return s>=80?"text-green-600":s>=50?"text-yellow-600":"text-red-600"},toggleMobileSidebar(){this.showMobileSidebar=!this.showMobileSidebar},selectTabAndCloseMobile(e){this.activeTab=e,this.toggleMobileSidebar()},exportData(){"courses"===this.activeTab?this.exportCoursesData():"users"===this.activeTab&&this.exportUsersData()},exportCoursesData(){try{const e=["ลำดับ","ชื่อหลักสูตร","ประเภท","วิทยากร","หมวดหมู่","จำนวนผู้ลงทะเบียน","จำนวนผู้เรียนจบ","อัตราการเรียนจบ (%)"],t=this.items.map(((e,t)=>{const s=e.enrollCount>0?(e.completedCount/e.enrollCount*100).toFixed(2):"0.00",a=Array.isArray(e.lecturer)?e.lecturer.map((e=>e.name)).join(", "):e.lecturer||"-",r=Array.isArray(e.category)&&e.category.length?e.category.join(", "):"-";return[t+1,`"${e.name}"`,`"${e.type||"-"}"`,`"${a}"`,`"${r}"`,e.enrollCount,e.completedCount,s]})),s=[e,...t],a=s.map((e=>e.join(","))).join("\n"),r="\ufeff",l=r+a,o=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),n=URL.createObjectURL(o);i.setAttribute("href",n),i.setAttribute("download",`รายงานหลักสูตร_${this.getCurrentDateString()}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),console.log("ส่งออกข้อมูลหลักสูตรสำเร็จ")}catch(e){console.error("เกิดข้อผิดพลาดในการส่งออกข้อมูลหลักสูตร:",e)}},exportUsersData(){try{const e=["ลำดับ","ชื่อ","นามสกุล","อีเมล","เบอร์โทรศัพท์","จำนวนการลงทะเบียน","จำนวนคอร์สที่เรียนจบ","อัตราการเรียนจบ (%)","สถานะตรวจสอบ","วันที่ตรวจสอบ"],t=this.topUsers.map(((e,t)=>{const s=e.enrollCount>0?(e.completedCount/e.enrollCount*100).toFixed(2):"0.00",a=e.checked?.status?"ตรวจสอบแล้ว":"ยังไม่ตรวจสอบ",r=e.checked?.status&&e.checked?.checkedAt?this.formatCheckedDate(e.checked.checkedAt):"-";return[t+1,`"${e.user.firstname||"-"}"`,`"${e.user.lastname||"-"}"`,`"${e.user.email||"-"}"`,`"${e.user.phone||"-"}"`,e.enrollCount,e.completedCount,s,`"${a}"`,`"${r}"`]})),s=[e,...t],a=s.map((e=>e.join(","))).join("\n"),r="\ufeff",l=r+a,o=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),n=URL.createObjectURL(o);i.setAttribute("href",n),i.setAttribute("download",`รายงานผู้ใช้งาน_${this.getCurrentDateString()}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),console.log("ส่งออกข้อมูลผู้ใช้งานสำเร็จ")}catch(e){console.error("เกิดข้อผิดพลาดในการส่งออกข้อมูลผู้ใช้งาน:",e)}},getCurrentDateString(){const e=new Date,t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),l=String(e.getMinutes()).padStart(2,"0");return`${t}${s}${a}_${r}${l}`},changeCoursePageSize(e){this.coursesPerPage=e,this.currentCoursePage=1},goToCoursePage(e){e>=1&&e<=this.totalCoursePages&&(this.currentCoursePage=e)},previousCoursePage(){this.currentCoursePage>1&&this.currentCoursePage--},nextCoursePage(){this.currentCoursePage<this.totalCoursePages&&this.currentCoursePage++},changeUserPageSize(e){this.usersPerPage=e,this.currentUserPage=1},goToUserPage(e){e>=1&&e<=this.totalUserPages&&(this.currentUserPage=e)},previousUserPage(){this.currentUserPage>1&&this.currentUserPage--},nextUserPage(){this.currentUserPage<this.totalUserPages&&this.currentUserPage++},getVisibleCoursePages(){const e=this.currentCoursePage,t=this.totalCoursePages,s=2;let a=[];for(let r=Math.max(1,e-s);r<=Math.min(t,e+s);r++)a.push(r);return a},getVisibleUserPages(){const e=this.currentUserPage,t=this.totalUserPages,s=2;let a=[];for(let r=Math.max(1,e-s);r<=Math.min(t,e+s);r++)a.push(r);return a},calculateHeaderHeight(){if(this.customHeight||this.headerHeight){if(this.headerHeight){const e="number"===typeof this.headerHeight?`${this.headerHeight}px`:this.headerHeight;document.documentElement.style.setProperty("--header-height",e)}return}let e=0;const t=["header",".header",".navbar",".topbar",".breadcrumb",".access-bar",'[class*="header"]','[class*="navbar"]','[class*="topbar"]','[role="banner"]'];if(t.forEach((t=>{const s=document.querySelectorAll(t);s.forEach((t=>{this.isElementAbove(t)&&(e+=t.offsetHeight)}))})),0===e)switch(this.headerType){case"topbar":e=120;break;case"breadcrumb":e=140;break;case"full-admin":e=160;break;default:e=window.innerWidth<=768?56:80}e+=8,document.documentElement.style.setProperty("--header-height",`${e}px`),console.log(`Dashboard Component: Calculated header height = ${e}px`)},isElementAbove(e){const t=this.$el;if(!t)return!1;const s=e.getBoundingClientRect(),a=t.getBoundingClientRect();return s.bottom<=a.top},setDateRange(e){const t=new Date;let s,a;switch(e){case"week":s=new Date(t.getFullYear(),t.getMonth(),t.getDate()-7),a=t;break;case"month":s=new Date(t.getFullYear(),t.getMonth()-1,t.getDate()),a=t;break;case"quarter":s=new Date(t.getFullYear(),t.getMonth()-3,t.getDate()),a=t;break;case"year":s=new Date(t.getFullYear()-1,t.getMonth(),t.getDate()),a=t;break;default:return}this.startDate=s.toISOString().substr(0,10),this.endDate=a.toISOString().substr(0,10),this.selectedDateRange=e,this.getData()},isDateRangeActive(e){return this.selectedDateRange===e},async updateUserCheckedStatus(e,t){try{this.checkingUsers.push(e);const{data:s,status:a}=await this.$Request.POST("dashboard-checked",{userid:e,status:t},this.configs.key);if(200!==a||!s.status)throw new Error("Failed to update checked status");{const s=this.topUsers.findIndex((t=>t.user._id===e));-1!==s&&(this.topUsers[s].checked={status:t,checkedAt:t?(new Date).toISOString():null}),console.log(t?"ทำเครื่องหมายตรวจสอบแล้ว":"ยกเลิกเครื่องหมายตรวจสอบแล้ว")}}catch(s){console.error("Error updating checked status:",s),console.error("เกิดข้อผิดพลาดในการอัปเดตสถานะ");const a=this.topUsers.findIndex((t=>t.user._id===e));-1!==a&&(this.topUsers[a].checked?this.topUsers[a].checked.status=!t:this.topUsers[a].checked={status:!t,checkedAt:null})}finally{const t=this.checkingUsers.indexOf(e);t>-1&&this.checkingUsers.splice(t,1)}},formatCheckedDate(e){const t=new Date(e),s={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Bangkok"};return t.toLocaleDateString("th-TH",s)}},mounted(){this.getData(),this.calculateHeaderHeight(),window.addEventListener("resize",this.calculateHeaderHeight)},beforeUnmount(){window.removeEventListener("resize",this.calculateHeaderHeight)}},gs=s(64621);const xs=(0,gs.A)(us,[["render",ds],["__scopeId","data-v-87f626fc"]]);var bs=xs,ps=s(22415),ms={name:"Lesson Detail",components:{Backend:bs,Frontend:ps.A},data(){return{session:i.A.get("session")}},setup(){const e=(0,o.lq)(),t=e.meta.title;(0,l.K7)(t)},computed:{componentName(){return"backend"===this.session.interface?"Backend":"frontend"===this.session.interface?"Frontend":"Backend"}}};const hs=(0,gs.A)(ms,[["render",r]]);var ks=hs}}]);
//# sourceMappingURL=8693.b10feb45.js.map