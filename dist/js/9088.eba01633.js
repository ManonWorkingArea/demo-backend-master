"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[9088],{9088:function(e,t,s){s.r(t),s.d(t,{default:function(){return B}});var n=s(20641);function o(e,t,s,o,a,i){const l=(0,n.g2)("Authen"),r=(0,n.g2)("Dashboard");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(l),this.login?((0,n.uX)(),(0,n.Wv)(r,{key:0})):(0,n.Q3)("",!0)],64)}var a=s(52968),i=s(75220),l=(s(44114),s(90033));const r={key:0,class:"text-center"},c={key:2,class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5 border-t"},u={class:"mt-8"},d={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},g={class:"mt-8 flex flex-col"},m={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},p={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},f={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},h={class:"p-4 bg-white"},b={class:"text-sm text-gray-400"},x={class:"flex items-center justify-between mt-4"},y={class:"flex items-center"},k={class:"ml-0"},v={class:"text-sm font-medium text-gray-900"},A={class:"text-sm font-medium text-gray-500"},w={class:"flex items-center"},L={class:"bg-gray-100 border-t-2 border-gray-200 py-2 px-4 flex justify-between items-center"},C=["onClick"],_={href:"#",class:"text-gray-900 hover:text-gray-500 text-md font-medium"},E={href:"/form/new",class:"bg-white p-10 rounded-lg shadow-md overflow-hidden flex flex-col items-center justify-center cursor-pointer p-10"},X={class:"w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center hover:opacity-70"};function F(e,t,s,o,a,i){const F=(0,n.g2)("Loader"),T=(0,n.g2)("Subhead"),P=(0,n.g2)("router-link"),N=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)(n.FK,null,[a.loading_sources?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",r,[(0,n.bF)(F)])),a.loading_sources?((0,n.uX)(),(0,n.Wv)(T,{key:1,navigation:[{name:"เพิ่ม Application",link:"/form/new",style:"plus",class:"primary-btn",visible:!0,type:"button"},{name:"จัดการเมนู",link:"/form/menu",style:"list",class:"primary-btn",visible:!0,type:"button"}]})):(0,n.Q3)("",!0),a.loading_sources?((0,n.uX)(),(0,n.CE)("div",c,[(0,n.Lk)("div",u,[(0,n.Lk)("div",d,[(0,n.Lk)("div",g,[(0,n.Lk)("div",m,[(0,n.Lk)("div",p,[(0,n.Lk)("div",f,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.listItems,(s=>((0,n.uX)(),(0,n.CE)("div",{key:s._id,class:"relative overflow-hidden rounded-lg shadow-md"},[t[5]||(t[5]=(0,n.Lk)("img",{class:"w-full h-48 object-cover",src:"https://picsum.photos/seed/picsum/200/300",alt:"Placeholder image"},null,-1)),(0,n.Lk)("div",h,[(0,n.bF)(P,{to:"/cms/read/"+s.slug,class:"font-bold text-gray-600 hover:underline"},{default:(0,n.k6)((()=>[(0,n.eW)((0,l.v_)(s.title),1)])),_:2},1032,["to"]),(0,n.Lk)("p",b,(0,l.v_)(s.slug),1),t[1]||(t[1]=(0,n.Lk)("p",{class:"text-sm text-gray-600 mt-4 leading-snug"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris.",-1)),(0,n.Lk)("div",x,[(0,n.Lk)("div",y,[(0,n.Lk)("div",k,[(0,n.Lk)("p",v,(0,l.v_)(s.type),1),(0,n.Lk)("p",A,(0,l.v_)(i.formatThaidate(s.createdAt)),1)])]),(0,n.Lk)("div",w,[(0,n.bF)(N,{icon:["fas","thumbs-up"],class:"text-black mt-[3px] mr-2 text-md"}),t[0]||(t[0]=(0,n.Lk)("p",{class:"ml-2 text-sm text-gray-500"},"12",-1))])])]),(0,n.Lk)("div",L,["blog"===s.display?((0,n.uX)(),(0,n.CE)("a",{key:0,href:"javascript:void(0);",onClick:t=>e.$router.push("/asset/admin/"+s._id),class:"text-gray-900 hover:text-gray-500 text-md font-medium"},[(0,n.bF)(N,{icon:["fas","square-plus"],class:"text-black mt-[3px] mr-2 text-md"}),t[2]||(t[2]=(0,n.Lk)("span",null,"บทความ",-1))],8,C)):(0,n.Q3)("",!0),(0,n.Lk)("a",_,[(0,n.bF)(N,{icon:["fas","trash-can"],class:"text-black mt-[3px] mr-2 text-md"}),t[3]||(t[3]=(0,n.Lk)("span",null,"ลบ",-1))]),(0,n.bF)(P,{to:"/cms/edit/"+s._id,class:"text-gray-900 hover:text-gray-500 text-md font-medium"},{default:(0,n.k6)((()=>[(0,n.bF)(N,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),t[4]||(t[4]=(0,n.Lk)("span",null,"แก้ไข",-1))])),_:2},1032,["to"])])])))),128)),(0,n.Lk)("a",E,[(0,n.Lk)("div",X,[(0,n.bF)(N,{icon:["fas","plus"],class:"text-3xl"})]),t[6]||(t[6]=(0,n.Lk)("p",{class:"text-gray-500 mt-2 text-center"},"Add New Application",-1))])])])])])])])])):(0,n.Q3)("",!0)],64)}var T=s(59911),P=s.n(T),N=s(75435),j=s(87814),K=s(40475),$=s(9964),q={inject:["apiServer"],data(){return{accessToken:K.A.get("session","token"),configs:K.A.get("configs"),session:K.A.get("session"),listItems:[],loading_sources:!0}},components:{Loader:N.A,Subhead:j.A},methods:{formatThaidate(e){return $.A.toThaiDatetime(e,"short")},async getData(){if(K.A.get("session","login"))try{this.loading_sources=!1;const e=await fetch("https://gateway.cloudrestfulapi.com/api/application/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{owner:this.session.current._id}]}]})}),t=await e.json();console.log(t),this.listItems=t,this.loading_sources=!0}catch(e){console.log(e)}},async deleteData(e){if(K.A.get("session","login"))try{this.loading_sources=!1,console.log("id",e);const t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/application/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}});console.log(await t),this.loading_sources=!0,await this.getData()}catch(t){console.log(t)}},updated(){P().replace()}},async mounted(){try{await this.getData()}catch(e){console.log(Error)}},setup(){}},D=s(64621);const S=(0,D.A)(q,[["render",F]]);var I=S,Q=s(74284),U={name:"Home",components:{Dashboard:I,Authen:Q.A},data(){return{login:K.A.get("session","login")}},methods:{},mounted(){},setup(){const e=(0,i.lq)(),t=e.meta.title;(0,a.K7)(t),console.log("Dashboard")}};const W=(0,D.A)(U,[["render",o]]);var B=W},87814:function(e,t,s){s.d(t,{A:function(){return F}});var n=s(20641),o=s(90033),a=s(53751);const i={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},l={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},r={class:"min-w-0 flex-1"},c={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},u={key:0,class:"text-sm text-gray-500"},d={class:"mt-5 flex xl:mt-0 xl:ml-4"},g={class:"flex items-center space-x-2"},m={class:"text-sm text-gray-400"},p=["onUpdate:modelValue","placeholder","onChange"],f={value:"",disabled:""},h=["value"],b=["onClick"],x={class:"text-sm hidden sm:inline-block ml-1"},y=["onClick"],k={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,s,v,A,w){const L=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)("header",i,[(0,n.Lk)("div",l,[(0,n.Lk)("div",r,[(0,n.Lk)("h1",c,[(0,n.bF)(L,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,n.eW)(" "+(0,o.v_)(s.pageTitle?s.pageTitle:this.PageName),1)]),s.subhead?((0,n.uX)(),(0,n.CE)("p",u,(0,o.v_)(s.subhead),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",d,[(0,n.Lk)("div",g,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.navigation,((t,s)=>((0,n.uX)(),(0,n.CE)(n.FK,{key:s},["select"===t.type?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.Lk)("label",m,(0,o.v_)(t.placeholder),1),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:s=>e.$emit("toggleStatus",t.value)},[(0,n.Lk)("option",f,"-- "+(0,o.v_)(t.placeholder)+" --",1),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.options,((e,t)=>((0,n.uX)(),(0,n.CE)("option",{key:t,value:e.value},(0,o.v_)(e.name),9,h)))),128))],40,p),[[a.u1,t.value]])],64)):"call-function"===t.type?((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[!1!==t.visible?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:s=>e.$emit(t.function),type:"button",class:(0,o.C4)(w.getClasses(t.class))},[(0,n.bF)(L,{icon:["fas",`${t.style}`],class:(0,o.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,n.Lk)("span",x,(0,o.v_)(t.name),1)],10,b)):(0,n.Q3)("",!0)],64)):((0,n.uX)(),(0,n.CE)(n.FK,{key:2},[!1!==t.visible?((0,n.uX)(),(0,n.CE)("button",{key:0,onClick:e=>w.handleNavigationClick(t),type:"button",class:(0,o.C4)(w.getClasses(t.class))},[(0,n.bF)(L,{icon:["fas",`${t.style}`],class:(0,o.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,n.Lk)("span",k,(0,o.v_)(t.name),1)],10,y)):(0,n.Q3)("",!0)],64))],64)))),128))])])])])}s(44114);var A=s(75220),w=s(52968),L=s(23264),C=s(93426),_={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,A.lq)();return console.log("Translate",(0,C.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,C.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,w.K7)((0,C.iX)())},methods:{getClasses(e){const t=(0,L.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},E=s(64621);const X=(0,E.A)(_,[["render",v]]);var F=X},74284:function(e,t,s){s.d(t,{A:function(){return d}});var n=s(20641);function o(e,t,s,o,a,i){return(0,n.uX)(),(0,n.CE)("div")}var a=s(75220),i=s(63084),l=s(40475),r={name:"Authen",data(){return{configs:l.A.get("configs"),session:l.A.get("session")}},created(){i.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const e=(0,a.lq)(),t=e.meta.auth,s=e.name,n=l.A.get("session");let o=n.token,r=n.login,c=n.current;i.A.log("hasLogin",r),i.A.log("Page -> Auth:",t),i.A.log("User -> Token:",o),i.A.log("User -> Login:",r),"frontend"===this.session.interface?i.A.log("Front-End"):"backend"===this.session.interface&&(i.A.log("Back-End"),r?("Login"==s||void 0==c?(i.A.log("Not Login Again"),this.$router.replace({path:"/"})):(i.A.log("Has School Active"),t?(i.A.log("This page is : Authen Request"),""===o||null===o||void 0==o?i.A.log("Your Cannot Access"):i.A.log("Your Can Access")):i.A.log("This page is : No Authen Request")),i.A.log("Login")):(i.A.log("Not Login"),"Login"!=s?(window.location.href="/member/login",i.A.log("Not Login Page",s)):i.A.log("Login Page",s)))}},setup(){}},c=s(64621);const u=(0,c.A)(r,[["render",o]]);var d=u},23264:function(e,t,s){function n(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}s.d(t,{c:function(){return n}})}}]);
//# sourceMappingURL=9088.eba01633.js.map