"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[9156],{4019:function(e,t,s){s.r(t),s.d(t,{default:function(){return ae}});var o=s(20641);function i(e,t,s,i,a,n){const l=(0,o.g2)("Detail",!0);return this.login?((0,o.uX)(),(0,o.Wv)(l,{key:0})):(0,o.Q3)("",!0)}var a=s(52968),n=s(75220),l=(s(44114),s(90033));const r={key:1,class:"text-center"},c={key:2},d={class:"mx-auto max-w-3xl px-4 mt-5 sm:px-6 md:flex md:items-center md:justify-between md:space-x-5 lg:max-w-7xl lg:px-8"},u={class:"flex items-center space-x-5"},g={class:"text-2xl font-bold text-gray-900"},p={class:"justify-stretch mt-6 flex flex-col-reverse space-y-4 space-y-reverse sm:flex-row-reverse sm:justify-end sm:space-y-0 sm:space-x-3 sm:space-x-reverse md:mt-0 md:flex-row md:space-x-3"},m={class:"mx-auto mt-8 grid max-w-3xl grid-cols-1 gap-6 sm:px-6 lg:max-w-7xl lg:grid-flow-col-dense lg:grid-cols-1"},h={class:"space-y-6 lg:col-span-2 lg:col-start-1"},f={"aria-labelledby":"notes-title"},b={class:"bg-white shadow sm:overflow-hidden sm:rounded-lg"},x={class:"divide-y divide-gray-200"},k={class:"px-4 py-5 sm:px-6 relative"},y={id:"notes-title",class:"text-lg font-bold text-gray-900"},w={class:"font-bold text-indigo-300"},v={class:"font-bold text-indigo-300"},F={class:"font-bold text-indigo-300"},L={class:"absolute top-4 right-4 ml-3 inline-flex items-center"},C={class:"px-4 py-6 sm:px-6"},D=["innerHTML"],T={"aria-labelledby":"notes-title"},A={class:"bg-white shadow sm:overflow-hidden sm:rounded-lg"},_={class:"divide-y divide-gray-200"},B={class:"px-4 py-5 sm:px-6 relative"},W={class:"pl-5 pr-5 pb-5"},O={class:""},E={class:"contents text-base font-medium text-gray-900"},M={class:"float-left"},j=["innerHTML"],q={class:"mt-2 space-x-2 text-sm float-left"},I=["onClick"],X=["onClick"],Q=["onClick"],R={class:"mt-4 w-full float-left p-3 relative"},$=["id","name"],z=["id","name"],S=["for"],K=["onClick"];function G(e,t,s,i,a,n){const G=(0,o.g2)("FileBrowser"),H=(0,o.g2)("Loader"),Y=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[a.FileBrowserOpen?((0,o.uX)(),(0,o.Wv)(G,{key:0,isWindowsOpen:!0,allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:n.changeFileTrigger,onSelectFileTrigger:n.selectFileTrigger},null,8,["onFileBrowserTrigger","onSelectFileTrigger"])):(0,o.Q3)("",!0),a.loading_sources?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(H)])),a.loading_sources?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",d,[(0,o.Lk)("div",u,[(0,o.Lk)("div",null,[(0,o.Lk)("h1",g,(0,l.v_)(a.courseData.name),1),t[4]||(t[4]=(0,o.Fv)('<p class="text-sm font-medium text-gray-500"> หมวดหมู่ <a href="#" class="text-indigo-400">การตลาด</a><span class="font-medium text-gray-200">|</span> การแสดงผล <a href="#" class="text-indigo-400">บุฟเฟต์</a><span class="font-medium text-gray-200">|</span> ประเภท <a href="#" class="text-indigo-400">เรียนออนไลน์</a></p>',1))])]),(0,o.Lk)("div",p,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/lesson/detail/"+this.parentID)),type:"button",class:"inline-flex items-center justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-100"},[(0,o.bF)(Y,{icon:["fas","chevron-left"],class:"text-black text-[12px] mr-2"}),t[5]||(t[5]=(0,o.eW)(" ย้อนกลับ "))])])]),(0,o.Lk)("div",m,[(0,o.Lk)("div",h,[(0,o.Lk)("section",f,[(0,o.Lk)("div",b,[(0,o.Lk)("div",x,[(0,o.Lk)("div",k,[(0,o.Lk)("h2",y,(0,l.v_)(a.examData.name),1),(0,o.Lk)("span",null,[t[6]||(t[6]=(0,o.eW)("ข้อสอบ : ")),(0,o.Lk)("span",w,(0,l.v_)(a.examData.total),1),t[7]||(t[7]=(0,o.eW)(" ข้อ"))]),t[12]||(t[12]=(0,o.Lk)("span",{class:"font-medium text-gray-200"},"|",-1)),(0,o.Lk)("span",null,[t[8]||(t[8]=(0,o.eW)("เวลาสอบ : ")),(0,o.Lk)("span",v,(0,l.v_)(a.examData.timer),1),t[9]||(t[9]=(0,o.eW)(" นาที"))]),t[13]||(t[13]=(0,o.Lk)("span",{class:"font-medium text-gray-200"},"|",-1)),(0,o.Lk)("span",null,[t[10]||(t[10]=(0,o.eW)("ประเภท : ")),(0,o.Lk)("span",F,(0,l.v_)(a.examData.type),1)]),(0,o.Lk)("div",L,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$router.push("/lesson/exam/edit/"+this.dataItem)),type:"button",class:"mr-3 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-100"},[(0,o.bF)(Y,{icon:["fas","edit"],class:"text-black pr-3"}),t[11]||(t[11]=(0,o.eW)(" แก้ไขข้อมูล "))]),(0,o.Lk)("button",{onClick:t[2]||(t[2]=t=>e.deleteExam(this.dataItem)),type:"button",class:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-100"},[(0,o.bF)(Y,{icon:["fas","trash"],class:"text-black"})])])]),(0,o.Lk)("div",C,[(0,o.Lk)("div",{innerHTML:a.examData.description},null,8,D)])])])]),(0,o.Lk)("section",T,[(0,o.Lk)("div",A,[(0,o.Lk)("div",_,[(0,o.Lk)("div",B,[t[15]||(t[15]=(0,o.Lk)("h2",{id:"notes-title",class:"text-lg font-bold text-gray-900"},"ข้อสอบทั้งหมด",-1)),(0,o.Lk)("button",{onClick:t[3]||(t[3]=t=>e.$router.push("/lesson/question/add/"+this.dataItem+"/"+this.count)),type:"button",class:"absolute top-4 right-4 ml-3 inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(Y,{icon:["fas","square-plus"],class:"text-gray-200 pr-3"}),t[14]||(t[14]=(0,o.eW)(" เพิ่มข้อสอบ "))])]),(0,o.Lk)("div",W,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.questionData,(s=>((0,o.uX)(),(0,o.CE)("div",{key:s.id,class:"border-b-[1px] border-dashed pb-4 pt-4"},[(0,o.Lk)("fieldset",O,[(0,o.Lk)("legend",E,[(0,o.Lk)("div",M,(0,l.v_)(s.order+1)+".",1),(0,o.Lk)("div",{innerHTML:s.detail},null,8,j)]),(0,o.Lk)("div",q,[(0,o.Lk)("button",{onClick:t=>e.$router.push("/lesson/question/answer/"+a.examData.id+"/"+s.id),type:"button",class:"font-medium text-white bg-black pl-3 pr-3 pt-1 pb-1 rounded hover:bg-indigo-700"},[(0,o.bF)(Y,{icon:["fas","square-check"],class:"text-white"}),t[16]||(t[16]=(0,o.eW)(" แก้ไขคำตอบ"))],8,I),(0,o.Lk)("button",{onClick:t=>e.$router.push("/lesson/question/edit/"+a.examData.id+"/"+s.id),type:"button",class:"font-medium text-white bg-black pl-3 pr-3 pt-1 pb-1 rounded hover:bg-indigo-700"},[(0,o.bF)(Y,{icon:["fas","pencil"],class:"text-white"}),t[17]||(t[17]=(0,o.eW)(" แก้ไขโจทย์"))],8,X),(0,o.Lk)("button",{onClick:e=>n.deleteQuestion(a.examData.id,s.id),type:"button",class:"font-medium text-white bg-black pl-3 pr-3 pt-1 pb-1 rounded hover:bg-indigo-700"},[(0,o.bF)(Y,{icon:["fas","trash"],class:"text-white"}),t[18]||(t[18]=(0,o.eW)(" ลบโจทย์"))],8,Q)]),(0,o.Lk)("div",R,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(this.sort(s.answers),(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:"flex items-center pb-2"},[e.isTrueAnswer?((0,o.uX)(),(0,o.CE)("input",{key:0,id:e.id,name:s.id,type:"radio",checked:"",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:"",readonly:""},null,8,$)):(0,o.Q3)("",!0),e.isTrueAnswer?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("input",{key:1,id:e.id,name:s.id,type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:"",readonly:""},null,8,z)),(0,o.Lk)("label",{for:e.id,class:"ml-3 block text-base font-medium text-gray-700"},(0,l.v_)(e.detail),9,S)])))),128)),(0,o.Lk)("label",{for:"desktop-user-photo",class:"absolute inset-0 flex rounded-md h-full w-full items-center justify-center bg-black bg-opacity-50 text-sm font-medium text-white opacity-0 focus-within:opacity-100 hover:opacity-100 cursor-pointer",onClick:t=>e.$router.push("/lesson/question/answer/"+a.examData.id+"/"+s.id)},[(0,o.Lk)("span",null,[(0,o.bF)(Y,{icon:["fas","pencil"],class:""}),t[19]||(t[19]=(0,o.eW)(" แก้ไขคำตอบ"))])],8,K)])])])))),128))])])])])])])])):(0,o.Q3)("",!0)],64)}var H=s(59911),Y=s.n(H),P=s(75435),J=s(40687),N=s(40475),U=s(95093),V=s.n(U);V()().format();var Z={data(){const e=N.A.get("session");return{courseData:[],examData:[],schoolAdmin:[],questionData:[],parentID:"",dataItem:this.$route.params.id,accessToken:e.token,login:e.login,master:e.master,selectCourseCover:"",cover:"",count:"",loading_sources:!0,FileBrowserOpen:!1,readMoreActivated:!1,longText:"",endpoint:""}},components:{Loader:P.A,FileBrowser:J.A},methods:{dateTime(e){return V()(e).format("DD/MM/YYYY hh:mm:ss")},activateReadMore(){this.readMoreActivated=!0},unActivateReadMore(){this.readMoreActivated=!1},async getData(){if(N.A.get("session","login"))try{this.loading_sources=!1;const e=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/exams/"+this.dataItem,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}}),t=await e.json();if(console.log(t),t.success){this.examData=t.data,this.parentID=t.data.courseId;const e=await this.getCourseData(this.parentID),s=await this.getQuestionData();this.questionData=s.data.questionInfo,this.questionData.sort((function(e,t){return e.order<t.order?-1:1})),this.count=this.questionData.length,console.log("questionData",this.questionData),console.log("courseReturn",e),e.success&&(this.courseData=e.data,this.loading_sources=!0)}}catch(e){console.log(e)}},async getCourseData(e){if(N.A.get("session","login"))try{this.loading_sources=!1;const t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/"+this.endpoint+"/"+e,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}});return await t.json()}catch(t){console.log(t)}},async getQuestionData(){if(N.A.get("session","login"))try{this.loading_sources=!1;const e=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/exams/getFullExam/"+this.dataItem+"/false/100",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}});return await e.json()}catch(e){console.log(e)}},changeFileTrigger(e){this.FileBrowserOpen=e},selectFileTrigger(e){void 0!=e&&(this.selectCourseCover=e,console.log("selectFileReturnFunction",e),this.updataCover(e))},async deleteQuestion(e,t){if(N.A.get("session","login"))try{console.log("exam",e),console.log("question",t),this.$swal({title:"ต้องการลบข้อมูลนี้ ?",text:"หลังจากลบแล้วจะไม่สามารถกู้คืนข้อมูลนี้ได้อีก !",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"ตกลง ลบเลย",cancelButtonText:"ยกเลิก",closeOnConfirm:!1,closeOnCancel:!1}).then((s=>{s.isConfirmed?(console.log("Delete"),this.confirmDeleteQuestion(e,t)):console.log("Cancel")}))}catch(s){console.log(s)}},async confirmDeleteQuestion(e,t){if(N.A.get("session","login"))try{const s=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/exams/questions/"+e+"/"+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}}),o=await s.json();o.success&&location.reload()}catch(s){console.log(s)}},OpenFileBrowser(){this.FileBrowserOpen=!0},updated(){Y().replace()},sort(e){return e.sort(((e,t)=>e.order-t.order))}},async mounted(){try{this.master?this.endpoint="mcourses":this.endpoint="courses",await this.getData()}catch(e){console.log(Error)}},setup(){}},ee=s(64621);const te=(0,ee.A)(Z,[["render",G]]);var se=te,oe={name:"PlayerDetail",components:{Detail:se},data(){return{login:N.A.get("session","login")}},methods:{},setup(){const e=(0,n.lq)(),t=e.meta.title;(0,a.K7)(t)}};const ie=(0,ee.A)(oe,[["render",i]]);var ae=ie},40687:function(e,t,s){s.d(t,{A:function(){return f}});var o=s(20641),i=s(50953),a=s(90033),n=s(94232),l=s(10797),r=s(55372);const c={key:0,class:"fixed inset-0 overflow-y-auto"},d={class:"flex min-h-full items-center justify-center p-4 text-center"},u={class:"font-medium"},g={class:"bg-black w-8 h-8 right-2 top-2 leading-8 hover:bg-gray-500"},p={props:["isWindowsOpen","allowFileType","callbackFunction"],data(){return console.log("FileBrowser props:",this.isWindowsOpen,this.allowFileType,this.callbackFunction),{SessionList:[],loading_sources:!0,activeBlock:!1,schoolId:"",isOpen:this.isWindowsOpen,isAllow:this.allowFileType,isCallback:this.callbackFunction,mode:"popup"}},components:{FileManager:r.A},watch:{isWindowsOpen(e){console.log("isWindowsOpen changed to:",e),this.isOpen=e}},methods:{selectFileTrigger(e){this.selectFileTrigger=e,this.closeModal(),this.selectFile(e)},closeModal(){this.isOpen=!1,this.$emit("fileBrowserTrigger",!1)},selectFile(e){this.$emit("fileBrowserCallback",e)}},async mounted(){console.log("FileBrowser mounted with isOpen:",this.isOpen,"isWindowsOpen:",this.isWindowsOpen)},setup(){}};var m=Object.assign(p,{__name:"FileBrowser",setup(e){return(t,s)=>{const p=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.Wv)((0,i.R1)(n.O),{appear:"",show:t.isOpen,as:"template"},{default:(0,o.k6)((()=>[(0,o.bF)((0,i.R1)(l.lG),{as:"div",onClose:t.closeModal,class:"relative z-10"},{default:(0,o.k6)((()=>[(0,o.bF)((0,i.R1)(n._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,o.k6)((()=>s[1]||(s[1]=[(0,o.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)]))),_:1}),t.loading_sources?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",d,[(0,o.bF)((0,i.R1)(n._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:(0,o.k6)((()=>[(0,o.bF)((0,i.R1)(l.Lj),{class:(0,a.C4)(["w-[60rem] z-40 transform overflow-hidden bg-white p-3 text-left align-middle shadow-xl transition-all blocking relative",[t.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},{default:(0,o.k6)((()=>[(0,o.bF)((0,i.R1)(l.L3),{as:"h3",class:"text-lg pb-2 font-bold leading-6 text-gray-900 border-b"},{default:(0,o.k6)((()=>[s[3]||(s[3]=(0,o.eW)("เลือกไฟล์ (Select File) ")),(0,o.Lk)("p",u,[s[2]||(s[2]=(0,o.eW)("อนุญาติเฉพาะไฟล์ ")),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.allowFileType,(e=>((0,o.uX)(),(0,o.CE)("span",{key:e.code,class:"text-xs font-medium bg-indigo-600 pl-2 pr-2 pt-1 mr-1 rounded text-white"},(0,a.v_)(e),1)))),128))]),(0,o.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>t.closeModal&&t.closeModal(...e)),type:"button",class:"z-50 absolute top-2 right-2"},[(0,o.Lk)("div",g,[(0,o.bF)(p,{icon:["fas","times"],class:"text-white mt-[7px] font-sm"})])])])),_:1}),(0,o.Lk)("div",null,[(0,o.bF)(r.A,{onSelectFileTrigger:t.selectFileTrigger,Mode:t.mode,AllowFile:t.isAllow,CallbackFunc:t.isCallback},null,8,["onSelectFileTrigger","Mode","AllowFile","CallbackFunc"])])])),_:1},8,["class"])])),_:1})])])):(0,o.Q3)("",!0)])),_:1},8,["onClose"])])),_:1},8,["show"])}}});const h=m;var f=h}}]);
//# sourceMappingURL=9156.bbe3e59e.js.map