"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[9183],{40687:function(e,t,n){n.d(t,{A:function(){return f}});var i=n(20641),a=n(50953),o=n(90033),s=n(94232),l=n(10797),r=n(55372);const d={key:0,class:"fixed inset-0 overflow-y-auto"},c={class:"flex min-h-full items-center justify-center p-4 text-center"},u={class:"font-medium"},p={class:"bg-black w-8 h-8 right-2 top-2 leading-8 hover:bg-gray-500"},h={props:["isWindowsOpen","allowFileType","callbackFunction"],data(){return console.log("FileBrowser props:",this.isWindowsOpen,this.allowFileType,this.callbackFunction),{SessionList:[],loading_sources:!0,activeBlock:!1,schoolId:"",isOpen:this.isWindowsOpen,isAllow:this.allowFileType,isCallback:this.callbackFunction,mode:"popup"}},components:{FileManager:r.A},watch:{isWindowsOpen(e){console.log("isWindowsOpen changed to:",e),this.isOpen=e}},methods:{selectFileTrigger(e){this.selectFileTrigger=e,this.closeModal(),this.selectFile(e)},closeModal(){this.isOpen=!1,this.$emit("fileBrowserTrigger",!1)},selectFile(e){this.$emit("fileBrowserCallback",e)}},async mounted(){console.log("FileBrowser mounted with isOpen:",this.isOpen,"isWindowsOpen:",this.isWindowsOpen)},setup(){}};var g=Object.assign(h,{__name:"FileBrowser",setup(e){return(t,n)=>{const h=(0,i.g2)("font-awesome-icon");return(0,i.uX)(),(0,i.Wv)((0,a.R1)(s.O),{appear:"",show:t.isOpen,as:"template"},{default:(0,i.k6)((()=>[(0,i.bF)((0,a.R1)(l.lG),{as:"div",onClose:t.closeModal,class:"relative z-10"},{default:(0,i.k6)((()=>[(0,i.bF)((0,a.R1)(s._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,i.k6)((()=>n[1]||(n[1]=[(0,i.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)]))),_:1}),t.loading_sources?((0,i.uX)(),(0,i.CE)("div",d,[(0,i.Lk)("div",c,[(0,i.bF)((0,a.R1)(s._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:(0,i.k6)((()=>[(0,i.bF)((0,a.R1)(l.Lj),{class:(0,o.C4)(["w-[60rem] z-40 transform overflow-hidden bg-white p-3 text-left align-middle shadow-xl transition-all blocking relative",[t.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},{default:(0,i.k6)((()=>[(0,i.bF)((0,a.R1)(l.L3),{as:"h3",class:"text-lg pb-2 font-bold leading-6 text-gray-900 border-b"},{default:(0,i.k6)((()=>[n[3]||(n[3]=(0,i.eW)("เลือกไฟล์ (Select File) ")),(0,i.Lk)("p",u,[n[2]||(n[2]=(0,i.eW)("อนุญาติเฉพาะไฟล์ ")),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.allowFileType,(e=>((0,i.uX)(),(0,i.CE)("span",{key:e.code,class:"text-xs font-medium bg-indigo-600 pl-2 pr-2 pt-1 mr-1 rounded text-white"},(0,o.v_)(e),1)))),128))]),(0,i.Lk)("button",{onClick:n[0]||(n[0]=(...e)=>t.closeModal&&t.closeModal(...e)),type:"button",class:"z-50 absolute top-2 right-2"},[(0,i.Lk)("div",p,[(0,i.bF)(h,{icon:["fas","times"],class:"text-white mt-[7px] font-sm"})])])])),_:1}),(0,i.Lk)("div",null,[(0,i.bF)(r.A,{onSelectFileTrigger:t.selectFileTrigger,Mode:t.mode,AllowFile:t.isAllow,CallbackFunc:t.isCallback},null,8,["onSelectFileTrigger","Mode","AllowFile","CallbackFunc"])])])),_:1},8,["class"])])),_:1})])])):(0,i.Q3)("",!0)])),_:1},8,["onClose"])])),_:1},8,["show"])}}});const v=g;var f=v},78181:function(e,t,n){n.d(t,{A:function(){return A}});var i=n(20641),a=n(90033),o=n(53751);"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self&&self;function s(e,t,n){return n={path:t,exports:{},require:function(e,t){return l(e,void 0===t||null===t?n.path:t)}},e(n,n.exports),n.exports}function l(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var r=s((function(e,t){!function(t,n){e.exports=n()}(0,(function(){var e="__v-click-outside",t="undefined"!=typeof window,n="undefined"!=typeof navigator,i=t&&("ontouchstart"in window||n&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],a=function(e){var t=e.event,n=e.handler;(0,e.middleware)(t)&&n(t)},o=function(t,n){var o=function(e){var t="function"==typeof e;if(!t&&"object"!=typeof e)throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||function(e){return e},events:e.events||i,isActive:!(!1===e.isActive),detectIframe:!(!1===e.detectIframe),capture:Boolean(e.capture)}}(n.value),s=o.handler,l=o.middleware,r=o.detectIframe,d=o.capture;if(o.isActive){if(t[e]=o.events.map((function(e){return{event:e,srcTarget:document.documentElement,handler:function(e){return function(e){var t=e.el,n=e.event,i=e.handler,o=e.middleware,s=n.path||n.composedPath&&n.composedPath();(s?s.indexOf(t)<0:!t.contains(n.target))&&a({event:n,handler:i,middleware:o})}({el:t,event:e,handler:s,middleware:l})},capture:d}})),r){var c={event:"blur",srcTarget:window,handler:function(e){return function(e){var t=e.el,n=e.event,i=e.handler,o=e.middleware;setTimeout((function(){var e=document.activeElement;e&&"IFRAME"===e.tagName&&!t.contains(e)&&a({event:n,handler:i,middleware:o})}),0)}({el:t,event:e,handler:s,middleware:l})},capture:d};t[e]=[].concat(t[e],[c])}t[e].forEach((function(n){var i=n.event,a=n.srcTarget,o=n.handler;return setTimeout((function(){t[e]&&a.addEventListener(i,o,d)}),0)}))}},s=function(t){(t[e]||[]).forEach((function(e){return e.srcTarget.removeEventListener(e.event,e.handler,e.capture)})),delete t[e]},l=t?{beforeMount:o,updated:function(e,t){var n=t.value,i=t.oldValue;JSON.stringify(n)!==JSON.stringify(i)&&(s(e),o(e,{value:n}))},unmounted:s}:{};return{install:function(e){e.directive("click-outside",l)},directive:l}}))})),d=r;const c={class:"v3ti-loader-wrapper"},u=(0,i.Lk)("div",{class:"v3ti-loader"},null,-1),p=(0,i.Lk)("span",null,"Loading",-1),h=[u,p];function g(e,t){return(0,i.uX)(),(0,i.CE)("div",c,h)}function v(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}var f=".v3ti-loader-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #112B3C;\n}\n.v3ti-loader-wrapper .v3ti-loader {\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  display: inline-block;\n  border-top: 2px solid #112B3C;\n  border-right: 2px solid transparent;\n  box-sizing: border-box;\n  animation: rotation 0.8s linear infinite;\n  margin-right: 8px;\n}\n@keyframes rotation {\n0% {\n    transform: rotate(0deg);\n}\n100% {\n    transform: rotate(360deg);\n}\n}";v(f);const m={};m.render=g;var w=m,x={name:"Vue3TagsInput",emits:["update:modelValue","update:tags","on-limit","on-tags-changed","on-remove","on-error","on-focus","on-blur","on-select","on-select-duplicate-tag","on-new-tag"],props:{readOnly:{type:Boolean,default:!1},modelValue:{type:String,default:""},validate:{type:[String,Function,Object],default:""},addTagOnKeys:{type:Array,default:function(){return[13,",",32]}},placeholder:{type:String,default:""},tags:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},limit:{type:Number,default:-1},allowDuplicates:{type:Boolean,default:!1},addTagOnBlur:{type:Boolean,default:!1},selectItems:{type:Array,default:()=>[]},select:{type:Boolean,default:!1},duplicateSelectItem:{type:Boolean,default:!0},uniqueSelectField:{type:String,default:"id"},addTagOnKeysWhenSelect:{type:Boolean,default:!1},isShowNoData:{type:Boolean,default:!0}},components:{Loading:w},directives:{clickOutside:d.directive},data(){return{isInputActive:!1,isError:!1,newTag:"",innerTags:[],multiple:!1}},computed:{isLimit(){const e=this.limit>0&&Number(this.limit)===this.innerTags.length;return e&&this.$emit("on-limit"),e},selectedItemsIds(){return this.duplicateSelectItem?[]:this.tags.map((e=>e[this.uniqueSelectField]||""))}},watch:{error(){this.isError=this.error},modelValue:{immediate:!0,handler(e){this.newTag=e}},tags:{deep:!0,immediate:!0,handler(e){this.innerTags=[...e]}}},methods:{isShot(e){return!!this.$slots[e]},makeItNormal(e){this.$emit("update:modelValue",e.target.value),this.$refs.inputTag.className="v3ti-new-tag",this.$refs.inputTag.style.textDecoration="none"},resetData(){this.innerTags=[]},resetInputValue(){this.newTag="",this.$emit("update:modelValue","")},setPosition(){const e=this.$refs.inputBox,t=this.$refs.contextMenu;if(e&&t){t.style.display="block";const n=e.clientHeight||32,i=3;t.style.top=n+i+"px"}},closeContextMenu(){this.$refs.contextMenu&&(this.$refs.contextMenu.style={display:"none"})},handleSelect(e){if(this.isShowCheckmark(e)){const t=this.tags.filter((t=>e.id!==t.id));this.$emit("update:tags",t),this.$emit("on-select-duplicate-tag",e),this.resetInputValue()}else this.$emit("on-select",e);this.$nextTick((()=>{this.closeContextMenu()}))},isShowCheckmark(e){return!this.duplicateSelectItem&&this.selectedItemsIds.includes(e[this.uniqueSelectField])},focusNewTag(){this.select&&!this.disabled&&this.setPosition(),!this.readOnly&&this.$el.querySelector(".v3ti-new-tag")&&this.$el.querySelector(".v3ti-new-tag").focus()},handleInputFocus(e){this.isInputActive=!0,this.$emit("on-focus",e)},handleInputBlur(e){this.isInputActive=!1,this.addNew(e),this.$emit("on-blur",e)},addNew(e){if(this.select&&!this.addTagOnKeysWhenSelect)return;const t=!e||(-1!==this.addTagOnKeys.indexOf(e.keyCode)||-1!==this.addTagOnKeys.indexOf(e.key)),n=e&&"blur"!==e.type;(t||!n&&this.addTagOnBlur)&&!this.isLimit&&(this.newTag&&(this.allowDuplicates||-1===this.innerTags.indexOf(this.newTag))&&this.validateIfNeeded(this.newTag)?(this.innerTags.push(this.newTag),this.addTagOnKeysWhenSelect&&(this.$emit("on-new-tag",this.newTag),this.updatePositionContextMenu()),this.resetInputValue(),this.tagChange(),e&&e.preventDefault()):(this.validateIfNeeded(this.newTag)?this.makeItError(!0):this.makeItError(!1),e&&e.preventDefault()))},updatePositionContextMenu(){this.$nextTick((()=>{this.setPosition()}))},makeItError(e){""!==this.newTag&&(this.$refs.inputTag.className="v3ti-new-tag v3ti-new-tag--error",this.$refs.inputTag.style.textDecoration="underline",this.$emit("on-error",e))},validateIfNeeded(e){return""===this.validate||void 0===this.validate||("function"!==typeof this.validate||this.validate(e))},removeLastTag(){this.newTag||(this.innerTags.pop(),this.tagChange(),this.updatePositionContextMenu())},remove(e){this.innerTags.splice(e,1),this.tagChange(),this.$emit("on-remove",e),this.updatePositionContextMenu()},tagChange(){this.$emit("on-tags-changed",this.innerTags)}}};const y={key:1,class:"v3ti-tag-content"},k=["onClick"],b=["placeholder","disabled"],T={key:0,class:"v3ti-loading"},C={key:1,class:"v3ti-no-data"},F={key:1},I={key:2},S=["onClick"],O={class:"v3ti-context-item--label"},E={key:0,class:"v3ti-icon-selected-tag",width:"44",height:"44",viewBox:"0 0 24 24","stroke-width":"1.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},$=(0,i.Lk)("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),B=(0,i.Lk)("path",{d:"M5 12l5 5l10 -10"},null,-1),N=[$,B];function L(e,t,n,s,l,r){const d=(0,i.g2)("Loading"),c=(0,i.gN)("click-outside");return(0,i.bo)(((0,i.uX)(),(0,i.CE)("div",{onClick:t[6]||(t[6]=e=>r.focusNewTag()),class:(0,a.C4)([{"v3ti--focus":l.isInputActive,"v3ti--error":l.isError},"v3ti"])},[(0,i.Lk)("div",{class:(0,a.C4)(["v3ti-content",{"v3ti-content--select":n.select}]),ref:"inputBox"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.innerTags,((t,s)=>((0,i.uX)(),(0,i.CE)("span",{key:s,class:"v3ti-tag"},[r.isShot("item")?(0,i.RG)(e.$slots,"item",(0,a._B)((0,i.v6)({key:0},{name:t,index:s,tag:t}))):((0,i.uX)(),(0,i.CE)("span",y,(0,a.v_)(t),1)),n.readOnly?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("a",{key:2,onClick:(0,o.D$)((e=>r.remove(s)),["prevent","stop"]),class:"v3ti-remove-tag"},null,8,k))])))),128)),(0,i.bo)((0,i.Lk)("input",{ref:"inputTag",placeholder:n.placeholder,"onUpdate:modelValue":t[0]||(t[0]=e=>l.newTag=e),onKeydown:[t[1]||(t[1]=(0,o.jR)((0,o.D$)((function(){return r.removeLastTag&&r.removeLastTag(...arguments)}),["stop"]),["delete"])),t[2]||(t[2]=function(){return r.addNew&&r.addNew(...arguments)})],onBlur:t[3]||(t[3]=function(){return r.handleInputBlur&&r.handleInputBlur(...arguments)}),onFocus:t[4]||(t[4]=function(){return r.handleInputFocus&&r.handleInputFocus(...arguments)}),onInput:t[5]||(t[5]=function(){return r.makeItNormal&&r.makeItNormal(...arguments)}),class:"v3ti-new-tag",disabled:n.readOnly},null,40,b),[[o.Jo,l.newTag]])],2),n.select?((0,i.uX)(),(0,i.CE)("section",{key:0,class:(0,a.C4)(["v3ti-context-menu",{"v3ti-context-menu-no-data":!n.isShowNoData&&0===n.selectItems.length}]),ref:"contextMenu"},[n.loading?((0,i.uX)(),(0,i.CE)("div",T,[r.isShot("loading")?(0,i.RG)(e.$slots,"default",{key:0}):((0,i.uX)(),(0,i.Wv)(d,{key:1}))])):(0,i.Q3)("",!0),!n.loading&&0===n.selectItems.length&&n.isShowNoData?((0,i.uX)(),(0,i.CE)("div",C,[r.isShot("no-data")?(0,i.RG)(e.$slots,"no-data",{key:0}):((0,i.uX)(),(0,i.CE)("span",F," No data "))])):(0,i.Q3)("",!0),!n.loading&&n.selectItems.length>0?((0,i.uX)(),(0,i.CE)("div",I,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.selectItems,((t,n)=>((0,i.uX)(),(0,i.CE)("div",{key:n,class:(0,a.C4)(["v3ti-context-item",{"v3ti-context-item--active":r.isShowCheckmark(t)}]),onClick:(0,o.D$)((e=>r.handleSelect(t,n)),["stop"])},[(0,i.Lk)("div",O,[(0,i.RG)(e.$slots,"select-item",(0,a._B)((0,i.Ng)(t)))]),r.isShowCheckmark(t)?((0,i.uX)(),(0,i.CE)("svg",E,N)):(0,i.Q3)("",!0)],10,S)))),128))])):(0,i.Q3)("",!0)],2)):(0,i.Q3)("",!0)],2)),[[c,r.closeContextMenu]])}var M='.v3ti {\n  border-radius: 5px;\n  min-height: 32px;\n  line-height: 1.4;\n  background-color: #fff;\n  border: 1px solid #9ca3af;\n  cursor: text;\n  text-align: left;\n  -webkit-appearance: textfield;\n  display: flex;\n  flex-wrap: wrap;\n  position: relative;\n}\n.v3ti .v3ti-icon-selected-tag {\n  stroke: #19be6b;\n  width: 1rem;\n  height: 1rem;\n  margin-left: 4px;\n}\n.v3ti--focus {\n  outline: 0;\n  border-color: #000000;\n  box-shadow: 0 0 0 1px #000000;\n}\n.v3ti--error {\n  border-color: #F56C6C;\n}\n.v3ti .v3ti-no-data {\n  color: #d8d8d8;\n  text-align: center;\n  padding: 4px 7px;\n}\n.v3ti .v3ti-loading {\n  padding: 4px 7px;\n  text-align: center;\n}\n.v3ti .v3ti-context-menu {\n  max-height: 150px;\n  min-width: 150px;\n  overflow: auto;\n  display: none;\n  outline: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  margin: 0;\n  padding: 5px 0;\n  background: #ffffff;\n  z-index: 1050;\n  color: #475569;\n  box-shadow: 0 3px 8px 2px rgba(0, 0, 0, 0.1);\n  border-radius: 0 0 6px 6px;\n}\n.v3ti .v3ti-context-menu .v3ti-context-item {\n  padding: 4px 7px;\n  display: flex;\n  align-items: center;\n}\n.v3ti .v3ti-context-menu .v3ti-context-item:hover {\n  background: #e8e8e8;\n  cursor: pointer;\n}\n.v3ti .v3ti-context-menu .v3ti-context-item--label {\n  flex: 1;\n  min-width: 1px;\n}\n.v3ti .v3ti-context-menu .v3ti-context-item--active {\n  color: #317CAF;\n}\n.v3ti .v3ti-context-menu-no-data {\n  padding: 0;\n}\n.v3ti .v3ti-content {\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n}\n.v3ti .v3ti-content--select {\n  padding-right: 30px;\n}\n.v3ti .v3ti-tag {\n  display: flex;\n  font-weight: 400;\n  margin: 3px;\n  padding: 0 5px;\n  background: #317CAF;\n  color: #ffffff;\n  height: 27px;\n  border-radius: 5px;\n  align-items: center;\n  max-width: calc(100% - 16px);\n}\n.v3ti .v3ti-tag .v3ti-tag-content {\n  flex: 1;\n  min-width: 1px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.v3ti .v3ti-tag .v3ti-remove-tag {\n  color: #ffffff;\n  transition: opacity 0.3s ease;\n  opacity: 0.5;\n  cursor: pointer;\n  padding: 0 5px 0 7px;\n}\n.v3ti .v3ti-tag .v3ti-remove-tag::before {\n  content: "x";\n}\n.v3ti .v3ti-tag .v3ti-remove-tag:hover {\n  opacity: 1;\n}\n.v3ti .v3ti-new-tag {\n  background: transparent;\n  border: 0;\n  font-weight: 400;\n  margin: 3px;\n  outline: none;\n  padding: 0 4px;\n  flex: 1;\n  min-width: 60px;\n  height: 27px;\n}\n.v3ti .v3ti-new-tag--error {\n  color: #F56C6C;\n}';v(M),x.render=L;var A=(()=>{const e=x;return e.install=t=>{t.component("Vue3TagsInput",e)},e})()}}]);
//# sourceMappingURL=9183.c116e185.js.map