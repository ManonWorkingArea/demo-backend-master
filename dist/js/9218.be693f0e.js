"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[9218],{59218:function(e,t,s){s.r(t),s.d(t,{default:function(){return B}});var n=s(20641);function o(e,t,s,o,a,i){const l=(0,n.g2)("Authen"),c=(0,n.g2)("Dashboard");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(l),this.login?((0,n.uX)(),(0,n.Wv)(c,{key:0})):(0,n.Q3)("",!0)],64)}var a=s(52968),i=s(75220),l=(s(44114),s(90033));const c={key:0,class:"text-center"},r={key:2,class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5 border-t"},d={class:"mt-8"},g={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},u={class:"mt-8 flex flex-col"},m={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},h={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},f={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"},p=["src"],x={class:"p-4"},k=["href"],b={class:"text-sm text-gray-400"},v={class:"bg-gray-100 border-t-2 border-gray-200 py-2 px-4 flex justify-between items-center"},y=["onClick"],L=["onClick"],A={href:"#",class:"text-gray-900 hover:text-gray-500 text-md font-medium"},w={href:"/bqclp_website/add",class:"bg-white p-10 rounded-lg shadow-md overflow-hidden flex flex-col items-center justify-center cursor-pointer p-10"},_={class:"w-12 h-12 rounded-full bg-blue-500 text-white flex items-center justify-center hover:opacity-70"};function C(e,t,s,o,a,i){const C=(0,n.g2)("Loader"),P=(0,n.g2)("breadcrumbs"),E=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)(n.FK,null,[a.loading_sources?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)(C)])),a.loading_sources?((0,n.uX)(),(0,n.Wv)(P,{key:1,navigation:[{name:"เพิ่ม Website",link:"/bqclp_website/add",style:"plus"}]})):(0,n.Q3)("",!0),a.loading_sources?((0,n.uX)(),(0,n.CE)("div",r,[(0,n.Lk)("div",d,[(0,n.Lk)("div",g,[(0,n.Lk)("div",u,[(0,n.Lk)("div",m,[(0,n.Lk)("div",h,[(0,n.Lk)("div",f,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.listItems,(s=>((0,n.uX)(),(0,n.CE)("div",{key:s._id,class:"bg-white rounded-lg shadow-md overflow-hidden"},[(0,n.Lk)("img",{class:"w-full h-48 object-cover",src:s.loginBg?s.loginBg:"https://picsum.photos/seed/picsum/200/300",alt:"Placeholder image"},null,8,p),(0,n.Lk)("div",x,[(0,n.Lk)("a",{href:"/bqclp_website/detail/"+s._id,class:"font-bold text-gray-600 hover:underline"},(0,l.v_)(s.siteName),9,k),(0,n.Lk)("p",b,[(0,n.bF)(E,{icon:["fas","globe"],class:"text-black mt-[3px] mr-1 text-md"}),(0,n.eW)(" "+(0,l.v_)(s.hostname),1)])]),(0,n.Lk)("div",v,[(0,n.Lk)("a",{href:"javascript:void(0);",onClick:t=>e.$router.push("/bqclp_website/edit/"+s._id),class:"text-gray-900 hover:text-gray-500 text-md font-medium"},[(0,n.bF)(E,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),t[0]||(t[0]=(0,n.Lk)("span",null,"แก้ไข",-1))],8,y),(0,n.Lk)("a",{href:"javascript:void(0);",onClick:t=>e.$router.push("/bqclp_website/admin/"+s._id),class:"text-gray-900 hover:text-gray-500 text-md font-medium"},[(0,n.bF)(E,{icon:["fas","user-tie"],class:"text-black mt-[3px] mr-2 text-md"}),t[1]||(t[1]=(0,n.Lk)("span",null,"ผู้ดูแล",-1))],8,L),(0,n.Lk)("a",A,[(0,n.bF)(E,{icon:["fas","trash-can"],class:"text-black mt-[3px] mr-2 text-md"}),t[2]||(t[2]=(0,n.Lk)("span",null,"ลบ",-1))])])])))),128)),(0,n.Lk)("a",w,[(0,n.Lk)("div",_,[(0,n.bF)(E,{icon:["fas","plus"],class:"text-3xl"})]),t[3]||(t[3]=(0,n.Lk)("p",{class:"text-gray-500 mt-2 text-center"},"Add Website",-1))])])])])])])])])):(0,n.Q3)("",!0)],64)}var P=s(59911),E=s.n(P),F=s(75435),X=s(36406),q=s(40475),j={inject:["apiServer"],data(){return{accessToken:q.A.get("session","token"),configs:q.A.get("configs"),listItems:[],loading_sources:!0}},components:{Loader:F.A,Breadcrumbs:X.A},methods:{async getData(){if(q.A.get("session","login"))try{this.loading_sources=!1;const e=await fetch("https://gateway.cloudrestfulapi.com/api/hostname/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{siteType:"unit"},{parent:this.configs.siteID}]}]})}),t=await e.json();console.log(t),this.listItems=t,this.loading_sources=!0}catch(e){console.log(e)}},async deleteData(e){if(q.A.get("session","login"))try{this.loading_sources=!1,console.log("id",e);const t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/schools/"+e,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}});console.log(await t),this.loading_sources=!0,await this.getData()}catch(t){console.log(t)}},updated(){E().replace()}},async mounted(){try{await this.getData()}catch(e){console.log(Error)}},setup(){}},N=s(64621);const T=(0,N.A)(j,[["render",C]]);var D=T,$=s(74284),I={name:"Home",components:{Dashboard:D,Authen:$.A},data(){return{login:q.A.get("session","login")}},methods:{},mounted(){},setup(){const e=(0,i.lq)(),t=e.meta.title;(0,a.K7)(t),console.log("Dashboard")}};const W=(0,N.A)(I,[["render",o]]);var B=W},36406:function(e,t,s){s.d(t,{A:function(){return P}});s(44114);var n=s(20641),o=s(90033);const a={class:"flex-1 bg-white"},i={class:"pt-4"},l={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},c={class:"hidden sm:flex","aria-label":"Breadcrumb"},r={role:"list",class:"flex items-center space-x-4"},d={class:"flex"},g={href:"/",class:"text-sm font-medium text-gray-500 hover:text-gray-700"},u={key:0},m={class:"flex items-center"},h=["href"],f={class:"flex items-center"},p={class:"ml-4 text-sm font-medium text-gray-400"},x={class:"mt-2 md:flex md:items-center md:justify-between pb-3"},k={class:"min-w-0 flex-1"},b={class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-2xl sm:tracking-tight"},v={class:"mt-4 flex flex-shrink-0 md:mt-0 md:ml-4"},y=["onClick"];function L(e,t,s,L,A,w){const _=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.Lk)("div",i,[(0,n.Lk)("div",l,[(0,n.Lk)("div",null,[(0,n.Lk)("div",null,[(0,n.Lk)("nav",c,[(0,n.Lk)("ol",r,[(0,n.Lk)("li",null,[(0,n.Lk)("div",d,[(0,n.Lk)("a",g,[(0,n.bF)(_,{icon:["fas","home"]})])])]),e.$route.matched.length>1?((0,n.uX)(),(0,n.CE)("li",u,[(0,n.Lk)("div",m,[(0,n.bF)(_,{icon:["fas","chevron-right"],class:"text-gray-200"}),(0,n.Lk)("a",{href:"/"+this.ParentPage,class:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700"},(0,o.v_)(this.ParentName),9,h)])])):(0,n.Q3)("",!0),(0,n.Lk)("li",null,[(0,n.Lk)("div",f,[(0,n.bF)(_,{icon:["fas","chevron-right"],class:"text-gray-200"}),(0,n.Lk)("span",p,(0,o.v_)(this.PageName),1)])])])])]),(0,n.Lk)("div",x,[(0,n.Lk)("div",k,[(0,n.Lk)("h2",b,[(0,n.bF)(_,{icon:["fas",`${this.PageIcon}`],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,n.eW)(" "+(0,o.v_)(this.PageName),1)])]),(0,n.Lk)("div",v,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.navigation,((t,s)=>((0,n.uX)(),(0,n.CE)("button",{key:s,onClick:s=>e.$router.push(t.link),type:"button",class:"ml-3 inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,n.bF)(_,{icon:["fas",`${t.style}`],class:"text-gray-200 mr-2"},null,8,["icon"]),(0,n.eW)(" "+(0,o.v_)(t.name),1)],8,y)))),128))])])])])])])}var A=s(75220),w={data(){const e=(0,A.lq)();return{PageName:e.meta.title,PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},components:{},props:{navigation:{type:Array,default:()=>[]}}},_=s(64621);const C=(0,_.A)(w,[["render",L]]);var P=C},74284:function(e,t,s){s.d(t,{A:function(){return g}});var n=s(20641);function o(e,t,s,o,a,i){return(0,n.uX)(),(0,n.CE)("div")}var a=s(75220),i=s(63084),l=s(40475),c={name:"Authen",data(){return{configs:l.A.get("configs"),session:l.A.get("session")}},created(){i.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const e=(0,a.lq)(),t=e.meta.auth,s=e.name,n=l.A.get("session");let o=n.token,c=n.login,r=n.current;i.A.log("hasLogin",c),i.A.log("Page -> Auth:",t),i.A.log("User -> Token:",o),i.A.log("User -> Login:",c),"frontend"===this.session.interface?i.A.log("Front-End"):"backend"===this.session.interface&&(i.A.log("Back-End"),c?("Login"==s||void 0==r?(i.A.log("Not Login Again"),this.$router.replace({path:"/"})):(i.A.log("Has School Active"),t?(i.A.log("This page is : Authen Request"),""===o||null===o||void 0==o?i.A.log("Your Cannot Access"):i.A.log("Your Can Access")):i.A.log("This page is : No Authen Request")),i.A.log("Login")):(i.A.log("Not Login"),"Login"!=s?(window.location.href="/member/login",i.A.log("Not Login Page",s)):i.A.log("Login Page",s)))}},setup(){}},r=s(64621);const d=(0,r.A)(c,[["render",o]]);var g=d}}]);
//# sourceMappingURL=9218.be693f0e.js.map