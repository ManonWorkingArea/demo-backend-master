"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[9232],{99232:function(t,e,s){s.r(e),s.d(e,{default:function(){return at}});var o=s(20641);function a(t,e,s,a,n,i){const l=(0,o.g2)("Authen"),r=(0,o.g2)("fileImport");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),this.login?((0,o.uX)(),(0,o.Wv)(r,{key:0})):(0,o.Q3)("",!0)],64)}var n=s(52968),i=s(75220),l=(s(44114),s(90033));const r={key:0,class:"text-center"},c={key:1,class:"flex-1 bg-white"},d={class:"pt-8"},g={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},m={class:"sm:hidden","aria-label":"Back"},u={href:"#",class:"flex items-center text-sm font-medium text-gray-500 hover:text-gray-700"},p={class:"hidden sm:flex","aria-label":"Breadcrumb"},x={role:"list",class:"flex items-center space-x-4"},h={class:"flex"},f={href:"/",class:"text-sm font-medium text-gray-500 hover:text-gray-700"},y={class:"flex items-center"},k=["href"],b={class:"flex items-center"},L={class:"ml-4 text-sm font-medium text-gray-400"},v={class:"mt-2 md:flex md:items-center md:justify-between pb-5"},w={class:"min-w-0 flex-1"},A={class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight"},C={class:"mt-4 flex flex-shrink-0 md:mt-0 md:ml-4"},_={key:2,class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5 border-t"},P={class:"mt-8"},E={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},F={class:"mt-8 flex flex-col"},T={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},I={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},N={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},X={class:"min-w-full divide-y divide-gray-300"},j={class:"divide-y divide-gray-200 bg-white"},q={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},B={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},D=["href"],S={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},K={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},Q={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},W={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},$={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-md font-medium sm:pr-6"},z=["onClick"],R={type:"button",class:"mr-2 inline-flex justify-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},U=["onClick"];function Y(t,e,s,a,n,i){const Y=(0,o.g2)("Loader"),G=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[n.loading_sources?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(Y)])),n.loading_sources?((0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",d,[(0,o.Lk)("div",g,[(0,o.Lk)("div",null,[(0,o.Lk)("div",null,[(0,o.Lk)("nav",m,[(0,o.Lk)("a",u,[(0,o.bF)(G,{icon:["fas","chevron-left"],class:"text-gray-200 mr-2"}),e[1]||(e[1]=(0,o.eW)(" Back "))])]),(0,o.Lk)("nav",p,[(0,o.Lk)("ol",x,[(0,o.Lk)("li",null,[(0,o.Lk)("div",h,[(0,o.Lk)("a",f,[(0,o.bF)(G,{icon:["fas","home"]})])])]),(0,o.Lk)("li",null,[(0,o.Lk)("div",y,[(0,o.bF)(G,{icon:["fas","chevron-right"],class:"text-gray-200"}),(0,o.Lk)("a",{href:"/"+n.ParentPage,class:"ml-4 text-sm font-medium text-gray-500 hover:text-gray-700"},(0,l.v_)(n.ParentName),9,k)])]),(0,o.Lk)("li",null,[(0,o.Lk)("div",b,[(0,o.bF)(G,{icon:["fas","chevron-right"],class:"text-gray-200"}),(0,o.Lk)("span",L,(0,l.v_)(n.PageName),1)])])])])]),(0,o.Lk)("div",v,[(0,o.Lk)("div",w,[(0,o.Lk)("h2",A,[(0,o.bF)(G,{icon:["fas",n.PageIcon],class:"text-gray-500 text-[24px]"},null,8,["icon"]),(0,o.eW)(" "+(0,l.v_)(n.PageName),1)])]),(0,o.Lk)("div",C,[(0,o.Lk)("button",{onClick:e[0]||(e[0]=e=>t.$router.push("/school/add")),type:"button",class:"ml-3 inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(G,{icon:["fas","plus"],class:"text-gray-200 mr-2"}),e[2]||(e[2]=(0,o.eW)(" เพิ่มโรงเรียน"))])])])])])])])):(0,o.Q3)("",!0),n.loading_sources?((0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("div",P,[(0,o.Lk)("div",E,[(0,o.Lk)("div",F,[(0,o.Lk)("div",T,[(0,o.Lk)("div",I,[(0,o.Lk)("div",N,[(0,o.Lk)("table",X,[e[6]||(e[6]=(0,o.Lk)("thead",{class:"bg-gray-50"},[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"#"),(0,o.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"ชื่อ"),(0,o.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"รหัส"),(0,o.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"เว็บไซต์"),(0,o.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"โทร"),(0,o.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"ผู้ดูแล"),(0,o.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"หลักสูตร")])],-1)),(0,o.Lk)("tbody",j,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.listItems.data,((s,a)=>((0,o.uX)(),(0,o.CE)("tr",{key:s.code},[(0,o.Lk)("td",q,(0,l.v_)(a+1+n.listItems.index),1),(0,o.Lk)("td",B,[(0,o.Lk)("a",{href:"/school/detail/"+s.id,class:"text-gray-500 hover:text-indigo-900"},(0,l.v_)(s.name),9,D)]),(0,o.Lk)("td",S,(0,l.v_)(s.code),1),(0,o.Lk)("td",K,(0,l.v_)(s.website),1),(0,o.Lk)("td",Q,(0,l.v_)(s.phone),1),(0,o.Lk)("td",W,(0,l.v_)(s.id),1),(0,o.Lk)("td",$,[(0,o.Lk)("button",{onClick:e=>t.$router.push("/school/edit/"+s.id),type:"button",class:"mr-2 inline-flex justify-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,o.bF)(G,{icon:["fas","square-pen"],class:"text-black mt-[3px] mr-2 text-md"}),e[3]||(e[3]=(0,o.Lk)("span",null,"แก้ไข",-1))],8,z),(0,o.Lk)("button",R,[(0,o.bF)(G,{icon:["fas","user-tie"],class:"text-black mt-[3px] mr-2 text-md"}),e[4]||(e[4]=(0,o.Lk)("span",null,"ผู้ดูแล",-1))]),(0,o.Lk)("button",{onClick:t=>i.deleteData(s.id),type:"button",class:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2"},[(0,o.bF)(G,{icon:["fas","trash-can"],class:"text-black mt-[3px] mr-2 text-md"}),e[5]||(e[5]=(0,o.Lk)("span",null,"ลบ",-1))],8,U)])])))),128))])])])])])])])])])):(0,o.Q3)("",!0)],64)}var G=s(59911),H=s.n(G),J=s(75435),M=s(40475),O={inject:["apiServer"],data(){const t=(0,i.lq)();return{PageName:t.meta.title,PageIcon:t.meta.icon,PagePath:t.meta.path,ParentName:t.meta.parent,ParentPage:t.meta.page,accessToken:M.A.get("session","token"),listItems:[],loading_sources:!0,pages:0,current:0,total:0,next:!0,prev:!1}},components:{Loader:J.A},methods:{async getData(){if(M.A.get("session","login"))try{this.loading_sources=!1;const t=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/transactions/",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}}),e=await t.json();console.log(e),this.listItems=e,this.loading_sources=!0,this.pages=e.pages,this.current=e.currentPage,this.total=e.totalCount,this.next=e.nextState,this.prev=e.preState}catch(t){console.log(t)}},async deleteData(t){if(M.A.get("session","login"))try{this.loading_sources=!1,console.log("id",t);const e=await fetch("https://asia-southeast2-elearning-6871c.cloudfunctions.net/transactions/"+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.accessToken}});console.log(await e),this.loading_sources=!0,await this.getData()}catch(e){console.log(e)}},updated(){H().replace()}},async mounted(){try{await this.getData()}catch(t){console.log(Error)}},setup(){}},V=s(64621);const Z=(0,V.A)(O,[["render",Y]]);var tt=Z,et=s(74284),st={name:"TransactionSingle",components:{fileImport:tt,Authen:et.A},data(){return{login:M.A.get("session","login")}},methods:{},mounted(){},setup(){const t=(0,i.lq)(),e=t.meta.title;(0,n.K7)(e)}};const ot=(0,V.A)(st,[["render",a]]);var at=ot},74284:function(t,e,s){s.d(e,{A:function(){return g}});var o=s(20641);function a(t,e,s,a,n,i){return(0,o.uX)(),(0,o.CE)("div")}var n=s(75220),i=s(63084),l=s(40475),r={name:"Authen",data(){return{configs:l.A.get("configs"),session:l.A.get("session")}},created(){i.A.option(this.$route)},computed:{},components:{},mounted(){this.checkAuth()},updated(){},methods:{async checkAuth(){const t=(0,n.lq)(),e=t.meta.auth,s=t.name,o=l.A.get("session");let a=o.token,r=o.login,c=o.current;i.A.log("hasLogin",r),i.A.log("Page -> Auth:",e),i.A.log("User -> Token:",a),i.A.log("User -> Login:",r),"frontend"===this.session.interface?i.A.log("Front-End"):"backend"===this.session.interface&&(i.A.log("Back-End"),r?("Login"==s||void 0==c?(i.A.log("Not Login Again"),this.$router.replace({path:"/"})):(i.A.log("Has School Active"),e?(i.A.log("This page is : Authen Request"),""===a||null===a||void 0==a?i.A.log("Your Cannot Access"):i.A.log("Your Can Access")):i.A.log("This page is : No Authen Request")),i.A.log("Login")):(i.A.log("Not Login"),"Login"!=s?(window.location.href="/member/login",i.A.log("Not Login Page",s)):i.A.log("Login Page",s)))}},setup(){}},c=s(64621);const d=(0,c.A)(r,[["render",a]]);var g=d}}]);
//# sourceMappingURL=9232.17aa388c.js.map