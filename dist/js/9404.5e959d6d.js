"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[9404],{29404:function(e,t,a){a.r(t),a.d(t,{default:function(){return Y}});var s=a(20641);function n(e,t,a,n,o,l){return(0,s.uX)(),(0,s.Wv)((0,s.$y)(l.componentName))}var o=a(52968),l=a(75220),i=a(40475),r=a(53751),c=a(90033);const d={key:0,class:"text-center"},u={key:1},g={class:"flex-1 pb-8 bg-gray-100 pt-2 pb-5 border-t"},m={class:"mt-8"},p={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},h={class:"mt-8 flex flex-col"},b={class:"-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8"},f={class:"inline-block min-w-full py-2 align-middle md:px-6 lg:px-8"},y={class:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg"},x={class:"relative"},k={class:"flex flex-col items-left"},v={key:0,class:"text-left mt-2 text-gray-500"},w={class:"text-black font-semibold"},L={key:1,class:"text-left mt-2"},C={class:"w-full divide-y divide-gray-300"},P={class:"divide-y divide-gray-200 bg-white"},I=["onClick"],_={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6"},E={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},X={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},N={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},F={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},A={colspan:"5"},q={class:"grid grid-cols-4 gap-2 p-3"},S={class:"col-span-2"},$={class:"px-4 py-2 text-sm font-medium text-white bg-green-500 rounded hover:bg-green-600 focus:outline-none focus:bg-green-600 mr-3"},Q={class:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded hover:bg-blue-600 focus:outline-none focus:bg-blue-600 mr-3"},T={class:"px-4 py-2 text-sm font-medium text-white bg-gray-500 rounded hover:bg-gray-600 focus:outline-none focus:bg-gray-600"},M={class:"grid grid-cols-4 gap-2 p-3"},W={class:"col-span-4"};function K(e,t,a,n,o,l){const i=(0,s.g2)("Loader"),K=(0,s.g2)("Subhead"),R=(0,s.g2)("font-awesome-icon"),B=(0,s.g2)("Pagination");return(0,s.uX)(),(0,s.CE)(s.FK,null,[o.loading_sources?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(i)])),o.loading_sources?((0,s.uX)(),(0,s.CE)("div",u,[(0,s.bF)(K,{navigation:[{name:"ย้อนกลับ",link:"/cms/content",style:"chevron-left",class:"default-btn",visible:!0,type:"button"}]}),(0,s.Lk)("div",g,[(0,s.Lk)("div",m,[(0,s.Lk)("div",p,[(0,s.Lk)("div",h,[(0,s.Lk)("div",b,[(0,s.Lk)("div",f,[(0,s.Lk)("div",y,[(0,s.Lk)("div",x,[o.showingOverlay?((0,s.uX)(),(0,s.CE)("div",{key:0,class:"fixed top-0 left-0 w-full h-full bg-white bg-opacity-75 backdrop-filter backdrop-blur-lg flex items-center justify-center",onClick:t[2]||(t[2]=(...t)=>e.hideOverlay&&e.hideOverlay(...t)),style:{"z-index":"9999"}},[(0,s.Lk)("div",k,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"px-4 py-2 rounded-lg bg-white w-80 focus:outline-none",placeholder:"พิมพ์ข้อความที่ต้องการค้นหา...","onUpdate:modelValue":t[0]||(t[0]=e=>o.searchQuery=e),onClick:t[1]||(t[1]=(0,r.D$)((()=>{}),["stop"]))},null,512),[[r.Jo,o.searchQuery]]),o.listItems.length>0?((0,s.uX)(),(0,s.CE)("div",v,[t[3]||(t[3]=(0,s.eW)(" ผลการค้นหา ")),(0,s.Lk)("span",w,(0,c.v_)(o.listItems.length),1),t[4]||(t[4]=(0,s.eW)(" รายการ(s) "))])):((0,s.uX)(),(0,s.CE)("div",L," ไม่พบข้อมูล "))])])):(0,s.Q3)("",!0)]),(0,s.Lk)("table",C,[t[11]||(t[11]=(0,s.Lk)("thead",{class:"bg-gray-50"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6"},"#"),(0,s.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"เลขที่คำขอ"),(0,s.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"ต.ย./รายการฯ"),(0,s.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"วันที่สร้าง"),(0,s.Lk)("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},"สถานะ")])],-1)),(0,s.Lk)("tbody",P,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.listItems,((e,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},[(0,s.Lk)("tr",{onClick:e=>l.toggleAccordion(a),class:"cursor-pointer hover:bg-gray-100"},[(0,s.Lk)("td",_,(0,c.v_)((o.currentPage-1)*o.limitItem+a+1),1),(0,s.Lk)("td",E,(0,c.v_)(e.req_no),1),(0,s.Lk)("td",X,(0,c.v_)(e.total_test)+" / "+(0,c.v_)(e.TotalItem),1),(0,s.Lk)("td",N,(0,c.v_)(e.CreateDate),1),(0,s.Lk)("td",F,(0,c.v_)(e.ReqStatus),1)],8,I),(0,s.bo)((0,s.Lk)("tr",null,[(0,s.Lk)("td",A,[(0,s.Lk)("div",q,[(0,s.Lk)("div",S,[t[5]||(t[5]=(0,s.Lk)("div",{class:"font-semibold"}," กิจกรรม:",-1)),(0,s.Lk)("div",null,(0,c.v_)(e.ActivityName),1)]),(0,s.Lk)("div",null,[t[6]||(t[6]=(0,s.Lk)("div",{class:"font-semibold"}," ชนิดตัวอย่าง:",-1)),(0,s.Lk)("div",null,(0,c.v_)(e.SampleName),1)]),(0,s.Lk)("div",null,[(0,s.Lk)("button",$,[(0,s.bF)(R,{icon:["fas","file"]}),t[7]||(t[7]=(0,s.eW)(" คำขอ"))]),(0,s.Lk)("button",Q,[(0,s.bF)(R,{icon:["fas","pencil-alt"]}),t[8]||(t[8]=(0,s.eW)(" ตัวอย่าง"))]),(0,s.Lk)("button",T,[(0,s.bF)(R,{icon:["fas","trash"]}),t[9]||(t[9]=(0,s.eW)(" ลบ"))])])]),(0,s.Lk)("div",M,[(0,s.Lk)("div",W,[t[10]||(t[10]=(0,s.Lk)("div",{class:"font-semibold"},"รายการตรวจ :",-1)),(0,s.Lk)("div",null,(0,c.v_)(e.AllItemName),1)])])])],512),[[r.aG,o.expandedRowIndex===a]])],64)))),128))])])]),(0,s.bF)(B,{"current-page":o.currentPage,"total-items":o.totalItems,"total-pages":o.totalPages,"limit-items":o.limitItem,onPageChanged:e.handlePageChanged},null,8,["current-page","total-items","total-pages","limit-items","onPageChanged"])])])])])])])])):(0,s.Q3)("",!0)],64)}var R=a(59911),B=a.n(R),j=a(75435),O=a(87814),U=a(38558),D={data(){const e=(0,l.lq)(),t=i.A.get("session");return{PageName:e.meta.title,PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page,school:t.current.id,login:t.login,listItems:[],categoryData:[],loading_sources:!0,pages:0,current:0,total:0,next:!0,prev:!1,MasterText:t.MasterText,endpoint:"",master:t.master,accessToken:i.A.get("session","token"),configs:i.A.get("configs"),session:i.A.get("session"),bqclp:i.A.get("bqclp"),limitItem:30,currentPage:1,totalPages:0,totalItems:0,loading:!1,showingOverlay:!1,searchQuery:"",statusFilter:"all",expandedRowIndex:null}},components:{Loader:j.A,Subhead:O.A,Pagination:U.A},methods:{toggleAccordion(e){this.expandedRowIndex===e?this.expandedRowIndex=null:this.expandedRowIndex=e},async getRequest(){const e="https://sea-turtle-app-hit8g.ondigitalocean.app/query";let t=1,a="test_inet_SelectReq "+t+", ";a+="'"+this.bqclp.uss_id+"', Null, Null, Null, Null";const s={StrSql:a};try{const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error("Request failed with status "+t.status);{const e=await t.json();this.listItems=e.data,console.log(e)}}catch(n){console.error("Error fetching data:",n)}},updated(){B().replace()}},async mounted(){try{await this.getRequest()}catch(e){console.log(Error)}},setup(){}},V=a(64621);const J=(0,V.A)(D,[["render",K]]);var z=J,G={name:"Page Index",components:{Backend:z,Frontend:z},data(){return{session:i.A.get("session")}},setup(){const e=(0,l.lq)(),t=e.meta.title;(0,o.K7)(t)},computed:{componentName(){return"backend"===this.session.interface?"Backend":"frontend"===this.session.interface?"Frontend":(console.error("Invalid interface:",this.session.interface),null)}}};const H=(0,V.A)(G,[["render",n]]);var Y=H},87814:function(e,t,a){a.d(t,{A:function(){return X}});var s=a(20641),n=a(90033),o=a(53751);const l={class:"py-2 bg-white border-l border-r border-b border-1 border-gray-200"},i={class:"mx-auto px-2 sm:px-6 lg:px-6 xl:flex xl:items-center xl:justify-between"},r={class:"min-w-0 flex-1"},c={class:"mt-1 text-[18px] font-semibold leading-8 text-gray-700"},d={key:0,class:"text-sm text-gray-500"},u={class:"mt-5 flex xl:mt-0 xl:ml-4"},g={class:"flex items-center space-x-2"},m={class:"text-sm text-gray-400"},p=["onUpdate:modelValue","placeholder","onChange"],h={value:"",disabled:""},b=["value"],f=["onClick"],y={class:"text-sm hidden sm:inline-block ml-1"},x=["onClick"],k={class:"text-sm hidden sm:inline-block ml-1"};function v(e,t,a,v,w,L){const C=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("header",l,[(0,s.Lk)("div",i,[(0,s.Lk)("div",r,[(0,s.Lk)("h1",c,[(0,s.bF)(C,{icon:["fas",this.PageIcon],class:"text-gray-500 text-[18px]"},null,8,["icon"]),(0,s.eW)(" "+(0,n.v_)(a.pageTitle?a.pageTitle:this.PageName),1)]),a.subhead?((0,s.uX)(),(0,s.CE)("p",d,(0,n.v_)(a.subhead),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",u,[(0,s.Lk)("div",g,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.navigation,((t,a)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:a},["select"===t.type?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("label",m,(0,n.v_)(t.placeholder),1),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e=>t.value=e,class:"block w-36 py-2 px-3 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-md",placeholder:t.placeholder,onChange:a=>e.$emit("toggleStatus",t.value)},[(0,s.Lk)("option",h,"-- "+(0,n.v_)(t.placeholder)+" --",1),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.options,((e,t)=>((0,s.uX)(),(0,s.CE)("option",{key:t,value:e.value},(0,n.v_)(e.name),9,b)))),128))],40,p),[[o.u1,t.value]])],64)):"call-function"===t.type?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[!1!==t.visible?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:a=>e.$emit(t.function),type:"button",class:(0,n.C4)(L.getClasses(t.class))},[(0,s.bF)(C,{icon:["fas",`${t.style}`],class:(0,n.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,s.Lk)("span",y,(0,n.v_)(t.name),1)],10,f)):(0,s.Q3)("",!0)],64)):((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[!1!==t.visible?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:e=>L.handleNavigationClick(t),type:"button",class:(0,n.C4)(L.getClasses(t.class))},[(0,s.bF)(C,{icon:["fas",`${t.style}`],class:(0,n.C4)({"text-gray-500 mr-2":"icon-btn"===t.class,"text-white":"primary-btn"===t.class})},null,8,["icon","class"]),(0,s.Lk)("span",k,(0,n.v_)(t.name),1)],10,x)):(0,s.Q3)("",!0)],64))],64)))),128))])])])])}a(44114);var w=a(75220),L=a(52968),C=a(23264),P=a(93426),I={props:{navigation:{type:Array,default:()=>[]},pageTitle:{type:String,default:()=>null},subhead:{type:String,default:()=>null}},data(){const e=(0,w.lq)();return console.log("Translate",(0,P.Tl)("router-"+e.meta.parent+"-"+e.meta.key)),{PageName:(0,P.iX)(),PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page}},setup(){(0,L.K7)((0,P.iX)())},methods:{getClasses(e){const t=(0,C.c)(e);return`${t}`},handleNavigationClick(e){e.function?this.$emit(e.eventName||e.function):this.$router.push(e.link)}}},_=a(64621);const E=(0,_.A)(I,[["render",v]]);var X=E},38558:function(e,t,a){a.d(t,{A:function(){return X}});var s=a(20641),n=a(90033);const o={class:"flex flex-col justify-center items-center h-full"},l={key:0,class:"flex flex-wrap justify-center"},i=["disabled"],r={key:0,class:"font-medium"},c=["disabled"],d=["onClick","disabled"],u={key:1,class:"font-medium"},g=["disabled"],m=["disabled"],p={key:1,class:"text-sm text-gray-400 text-center"},h={class:"font-medium"},b={class:"text-gray-600"},f={class:"font-medium"},y={class:"text-gray-600"},x={class:"font-medium"},k={class:"text-gray-600"},v={class:"font-medium"},w={class:"text-gray-600"};function L(e,t,a,L,C,P){const I=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.CE)("div",o,["nav"===a.displayMode||"full"===a.displayMode?((0,s.uX)(),(0,s.CE)("ul",l,[(0,s.Lk)("li",{class:(0,n.C4)({"opacity-50 cursor-not-allowed":1===C.activePage})},[(0,s.Lk)("button",{onClick:t[0]||(t[0]=e=>P.handleButtonClick(C.activePage-1)),disabled:a.dataLoading||C.buttonClicked,class:"block px-2 py-2 rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[(0,s.bF)(I,{icon:["fas","chevron-left"],class:"text-gray-700 pl-1 pr-1 text-md"})],8,i)],2),C.activePage>2?((0,s.uX)(),(0,s.CE)("li",r,[(0,s.Lk)("button",{onClick:t[1]||(t[1]=e=>P.handleButtonClick(1)),disabled:a.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"}," หน้าแรก ",8,c)])):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(P.pages,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e,class:(0,n.C4)([{"bg-indigo-100 ml-1 mr-1 rounded-md border-indigo-500 text-indigo-600 font-semibold":C.activePage===e},"font-medium"])},[(0,s.Lk)("button",{onClick:t=>P.handleButtonClick(e),disabled:a.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"},(0,n.v_)(e.toString().padStart(2,"0")),9,d)],2)))),128)),C.activePage<a.totalPages-1?((0,s.uX)(),(0,s.CE)("li",u,[(0,s.Lk)("button",{onClick:t[2]||(t[2]=e=>P.handleButtonClick(a.totalPages)),disabled:a.dataLoading||C.buttonClicked,class:"block px-2 py-2 ml-1 mr-1 text-sm text-gray-700 rounded-md hover:bg-indigo-100"}," หน้าสุดท้าย ",8,g)])):(0,s.Q3)("",!0),(0,s.Lk)("li",{class:(0,n.C4)({"opacity-50 cursor-not-allowed":C.activePage===a.totalPages})},[(0,s.Lk)("button",{onClick:t[3]||(t[3]=e=>P.handleButtonClick(C.activePage+1)),disabled:a.dataLoading||C.buttonClicked,class:"block px-2 py-2 rounded-md border border-gray-300 bg-white px-2 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50"},[(0,s.bF)(I,{icon:["fas","chevron-right"],class:"text-gray-700 pl-1 pr-1 text-md"})],8,m)],2)])):(0,s.Q3)("",!0),"summary"===a.displayMode||"full"===a.displayMode?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.eW)((0,n.v_)(P.translate("paging-display"))+" ",1),(0,s.Lk)("span",h,[(0,s.Lk)("span",b,(0,n.v_)(P.startItem),1)]),(0,s.eW)(" "+(0,n.v_)(P.translate("paging-to"))+" ",1),(0,s.Lk)("span",f,[(0,s.Lk)("span",y,(0,n.v_)(P.endItem),1)]),t[4]||(t[4]=(0,s.eW)(" / ")),(0,s.Lk)("span",x,[(0,s.Lk)("span",k,(0,n.v_)(P.formatNumber(a.totalPages)),1)]),(0,s.eW)(" "+(0,n.v_)(P.translate("paging-page"))+" | "+(0,n.v_)(P.translate("paging-from"))+" ",1),(0,s.Lk)("span",v,[(0,s.Lk)("span",w,(0,n.v_)(P.formatNumber(a.totalItems)),1)]),(0,s.eW)(" "+(0,n.v_)(P.translate("paging-item")),1)])):(0,s.Q3)("",!0)])}a(44114),a(14603),a(47566),a(98721);var C=a(9964),P=a(93426),I={props:{currentPage:{type:Number,required:!0},dataLoading:{type:Boolean,required:!0},displayMode:{type:String,required:!0,default:"full"},totalPages:{type:Number,required:!0},totalItems:{type:Number,required:!0},limitItems:{type:Number,required:!0}},data(){return{activePage:this.currentPage,buttonClicked:!1}},computed:{pages(){if(window.innerWidth>=600){const e=Math.max(this.activePage-2,1),t=Math.min(this.activePage+2,this.totalPages);let a=[];for(let s=e;s<=t;s++)a.push(s);return a}{let e=Math.max(this.activePage-1,1),t=Math.min(e+2,this.totalPages);t-e<2&&(e=Math.max(t-2,1));let a=[];for(let s=e;s<=t;s++)a.push(s);return a}},startItem(){return(this.activePage-1)*this.limitItems+1},endItem(){return Math.min(this.activePage*this.limitItems,this.totalItems)}},methods:{translate:P.Tl,formatNumber(e){return C.A.formatNumber(e,"short")},goToPage(e){if(e<1||e>this.totalPages)return;const t=new URLSearchParams(window.location.search),a=t.get("searchQuery");let s="";e>1&&a?s=`?page=${e}&searchQuery=${a}`:e>1?s=`?page=${e}`:a&&(s=`?searchQuery=${a}`);const n=`${window.location.pathname}${s||""}`;window.history.pushState({path:n},"",n),this.activePage=e,this.$emit("page-changed",e)},handleButtonClick(e){this.buttonClicked||(this.buttonClicked=!0,this.goToPage(e),setTimeout((()=>{this.buttonClicked=!1}),1e3))}},watch:{currentPage(e){this.activePage=e},activePage(e){this.$emit("page-changed",e)},$route(){}},created(){const e=new URLSearchParams(window.location.search),t=e.get("page");if(t){const e=parseInt(t);isNaN(e)||this.goToPage(e)}}},_=a(64621);const E=(0,_.A)(I,[["render",L]]);var X=E},23264:function(e,t,a){function s(e){switch(e){case"input-plaintext":return"pl-0 focus:outline-none focus:ring-0 shadow-none border-0";case"primary-btn":return"px-4 py-2 text-white bg-blue-600 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"icon-btn":return"px-4 py-2 text-gray-700 bg-transparent hover:bg-transparent hover:text-gray-800";case"default-btn":return"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"danger-btn":return"px-4 py-2 text-white bg-red-600 rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 focus:ring-offset-gray-50";case"success-btn":return"px-4 py-2 text-white bg-green-600 rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 focus:ring-offset-gray-50";default:return""}}a.d(t,{c:function(){return s}})}}]);
//# sourceMappingURL=9404.5e959d6d.js.map