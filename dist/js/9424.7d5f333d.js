"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[9424],{59424:function(e,t,s){s.r(t),s.d(t,{default:function(){return Y}});var o=s(20641);function n(e,t,s,n,a,i){const r=(0,o.g2)("Add");return this.login?((0,o.uX)(),(0,o.Wv)(r,{key:0})):(0,o.Q3)("",!0)}var a=s(52968),i=s(75220),r=(s(44114),s(90033)),l=s(53751);const c={class:"py-2 border-gray-800"},d={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 xl:flex xl:items-center xl:justify-between"},u={class:"min-w-0 flex-1"},g={class:"mt-2 text-xl font-bold leading-7 text-gray-700 sm:truncate sm:text-1xl sm:tracking-tight"},m={class:"mt-5 flex xl:mt-0 xl:ml-4"},h={class:"hidden sm:block"},p={class:"flex-1 bg-gray-100 pt-2 pb-5 border-t"},f={class:"mt-8"},y={class:"mx-auto max-w-7xl px-6 sm:px-6 lg:px-6"},x={class:"space-y-6 sm:px-6 lg:col-span-9 lg:px-0"},k={"aria-labelledby":"payment-details-heading"},w={class:"divide-y divide-gray-200 overflow-hidden rounded-lg bg-white shadow mb-8"},b={class:"px-4 py-5 sm:p-6"},v=["innerHTML"],L={class:"divide-y divide-gray-200 overflow-hidden rounded-lg bg-white shadow mb-8"},C={class:"px-4 py-5 sm:px-6 relative"},D={id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},A={class:"absolute top-3 right-3"},_={class:"px-4 py-5 sm:p-6"},q={class:"col-span-4 sm:col-span-2 pb-4 border-dashed border-[1px] p-4 mb-3"},T=["onSubmit"],j={class:"mt-1 flex rounded-md shadow-sm"},I={class:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},B={key:0,class:"flex items-center"},P=["id","value"],E=["for"],S={key:1,class:"flex items-center"},$=["id","value"],O=["for"],F=["onUpdate:modelValue","name","id","autocomplete"],N={class:"mt-3"},W={class:"flex items-center"},X=["onClick"],J=["onClick"],U={class:"bg-gray-50 px-4 py-4 sm:px-6 text-right"};function H(e,t,s,n,a,i){const H=(0,o.g2)("font-awesome-icon");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("header",c,[(0,o.Lk)("div",d,[(0,o.Lk)("div",u,[(0,o.Lk)("h1",g,[(0,o.bF)(H,{icon:["fas",a.PageIcon],class:"text-gray-500 text-[24px]"},null,8,["icon"]),(0,o.eW)(" "+(0,r.v_)(a.PageName),1)])]),(0,o.Lk)("div",m,[(0,o.Lk)("span",h,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/lesson/exam/detail/"+this.examID)),type:"button",class:"ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-gray-50"},[(0,o.bF)(H,{icon:["fas","chevron-left"],class:"text-black text-[12px] mr-2"}),t[6]||(t[6]=(0,o.eW)(" ย้อนกลับ "))])])])])]),(0,o.Lk)("div",p,[(0,o.Lk)("div",f,[(0,o.Lk)("div",y,[(0,o.Lk)("div",x,[(0,o.Lk)("section",k,[(0,o.Lk)("div",w,[t[7]||(t[7]=(0,o.Lk)("div",{class:"px-4 py-5 sm:px-6"},[(0,o.Lk)("h2",{id:"payment-details-heading",class:"text-lg font-bold leading-6 text-gray-900"},"โจทย์"),(0,o.Lk)("p",{class:"mt-1 text-sm text-gray-500"},"เพิ่มคำตอบด้วยการกดปุ่ม เพิ่มตัวเลือก กรอกคำตอบและบันทึกข้อมูล")],-1)),(0,o.Lk)("div",b,[(0,o.Lk)("div",{innerHTML:a.qustionData.detail},null,8,v)])])]),(0,o.Lk)("section",{"aria-labelledby":"payment-details-heading",class:(0,r.C4)(["relative pt-4",[a.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,o.Lk)("div",L,[(0,o.Lk)("div",C,[(0,o.Lk)("h2",D,"คำตอบ : "+(0,r.v_)(a.answerCounter),1),(0,o.Lk)("span",A,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.addAnswerData&&i.addAnswerData(...e)),type:"button",class:"ml-3 inline-flex items-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(H,{icon:["fas","square-plus"],class:"text-gray-200 pr-3"}),t[8]||(t[8]=(0,o.eW)(" เพิ่มคำตอบ "))])])]),(0,o.Lk)("div",_,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.answerList,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e._id,class:"col-span-4 sm:col-span-6"},[(0,o.Lk)("div",q,[(0,o.Lk)("form",{onSubmit:(0,l.D$)((t=>i.updateAnswerData(e._id)),["prevent"])},[(0,o.Lk)("div",j,[(0,o.Lk)("span",I,[e._id===this.qustionData.correct?((0,o.uX)(),(0,o.CE)("div",B,[(0,o.Lk)("input",{id:e._id,name:"isTrueAnswer",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",value:e._id,onChange:t[2]||(t[2]=e=>i.onChange(e)),checked:""},null,40,P),(0,o.Lk)("label",{for:e._id,class:"ml-3 block text-sm font-medium text-gray-700"},"คำตอบที่ถูก",8,E)])):((0,o.uX)(),(0,o.CE)("div",S,[(0,o.Lk)("input",{id:e._id,name:"isTrueAnswer",type:"radio",class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",value:e._id,onChange:t[3]||(t[3]=e=>i.onChange(e))},null,40,$),(0,o.Lk)("label",{for:e._id,class:"ml-3 block text-sm font-medium text-gray-700"},"คำตอบที่ถูก",8,O)]))]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t=>a.values[e._id]=t,type:"text",name:e._id,id:e._id,autocomplete:e._id,class:"block w-full min-w-0 flex-1 rounded-none rounded-r-md border-gray-300 py-2 px-3 shadow-sm focus:border-gray-900 focus:outline-none focus:ring-gray-900 sm:text-sm"},null,8,F),[[l.Jo,a.values[e._id]]])]),(0,o.Lk)("div",N,[(0,o.Lk)("div",W,[(0,o.Lk)("button",{onClick:t=>i.updateAnswerData(e._id),type:"button",class:"ml-2 mr-2 rounded-md border border-transparent bg-indigo-600 px-2 py-1 text-xs font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(H,{icon:["fas","save"],class:"text-gray-200 pr-2"}),t[9]||(t[9]=(0,o.eW)(" บันทึก "))],8,X),(0,o.Lk)("button",{onClick:t=>i.deleteAnswer(this.examID,this.questionID,e._id),type:"button",class:"rounded-md border border-transparent bg-gray-800 px-2 py-1 text-xs font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(H,{icon:["fas","trash"],class:"text-gray-200 pr-2"}),t[10]||(t[10]=(0,o.eW)(" ลบ "))],8,J)])])],40,T)])])))),128))]),(0,o.Lk)("div",U,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=t=>e.$router.push("/lesson/exam/detail/"+this.examID)),type:"button",class:"inline-flex items-center rounded-md border border-gray-300 bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"}," ยกเลิก "),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>i.saveAllAnswer&&i.saveAllAnswer(...e)),type:"button",class:"ml-3 inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[(0,o.bF)(H,{icon:["fas","save"],class:"pr-2 pl-2"}),t[11]||(t[11]=(0,o.eW)("บันทึกข้อมูล "))])])])],2)])])])])],64)}s(98992),s(3949);var K=s(40475),M={name:"ContactUs",inject:["apiServer"],data(){const e=(0,i.lq)();return console.log("exam",this.$route.params.exam),console.log("question",this.$route.params.question),{configs:K.A.get("configs"),PageName:e.meta.title,PageIcon:e.meta.icon,PagePath:e.meta.path,ParentName:e.meta.parent,ParentPage:e.meta.page,accessSession:[],exam:this.$route.params.id,activeBlock:!1,schoolData:[],qustionData:[],answerList:[],values:{},loading_sources:!0,answerCounter:"",dataItem:this.$route.params.id,examID:this.$route.params.exam,questionID:this.$route.params.question,accessToken:K.A.get("session","token"),login:K.A.get("session","login")}},components:{},methods:{sort(){this.answerList=this.answerList.sort(((e,t)=>e.order-t.order))},async getData(){if(this.login)try{this.loading_sources=!1;const t=await fetch("https://gateway.cloudrestfulapi.com/api/questions/"+this.questionID,{method:"GET",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}}),s=await t.json(),o=await fetch("https://gateway.cloudrestfulapi.com/api/answer/query",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({method:"find",args:[{$and:[{questionID:this.questionID}]}]})}),n=await o.json();if(200===o.status){for(var e of(this.answerList=n,this.answerCounter=s.length,this.qustionData=s,Object.keys(this.answerList)))console.log(e+" -> "+this.answerList[e]._id),this.values[this.answerList[e]._id]=this.answerList[e].detail;console.log(this.answerList),this.sort(),this.loading_sources=!0}}catch(t){console.log(t)}},async addAnswerData(){if(this.login)try{this.activeBlock=!0;const e=await fetch("https://gateway.cloudrestfulapi.com/api/answer/",{method:"POST",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{questionID:this.questionID,order:("0"+this.answerCounter++).slice(-2)},options:{}})}),t=await e.json();if(200===e.status){console.log(t);const e=await this.getData();console.log(e),this.activeBlock=!1}}catch(e){console.log(e)}},async saveAllAnswer(){if(this.login)try{this.answerList.forEach((e=>{console.log("Answer",e._id),console.log(e._id+" -> "+this.values[e._id]),this.updateAnswerData(e._id)}))}catch(e){console.log(e)}},async updateAnswerData(e){if(this.login)try{this.activeBlock=!0;const t=await fetch("https://gateway.cloudrestfulapi.com/api/answer/"+e,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{detail:this.values[e]},options:{}})}),s=await t.json();200===t.status&&(this.activeBlock=!1),console.log(s)}catch(t){console.log(t)}},async correctAnswerData(e){if(this.login)try{this.activeBlock=!0;const t=await fetch("https://gateway.cloudrestfulapi.com/api/questions/"+this.questionID,{method:"PUT",headers:{"Content-Type":"application/json","client-token-key":this.configs.key},body:JSON.stringify({data:{correct:e},options:{}})}),s=await t.json();200===t.status&&(this.activeBlock=!1),console.log(s)}catch(t){console.log(t)}},async deleteAnswer(e,t,s){if(this.login)try{console.log("exam",e),console.log("question",t),console.log("answer",s),this.$swal({title:"ต้องการลบข้อมูลนี้ ?",text:"หลังจากลบแล้วจะไม่สามารถกู้คืนข้อมูลนี้ได้อีก !",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"ตกลง ลบเลย",cancelButtonText:"ยกเลิก",closeOnConfirm:!1,closeOnCancel:!1}).then((o=>{o.isConfirmed?(console.log("Delete"),this.confirmDeleteAnswer(e,t,s)):console.log("Cancel")}))}catch(o){console.log(o)}},async confirmDeleteAnswer(e,t,s){if(this.login)try{const e=await fetch("https://gateway.cloudrestfulapi.com/api/answer/"+s,{method:"DELETE",headers:{"Content-Type":"application/json","client-token-key":this.configs.key}});if(await e.json(),200===e.status){const e=await this.getData();console.log("answerReturn",e)}}catch(o){console.log(o)}},onChange(e){var t=e.target.value;console.log(t),this.correctAnswerData(t)}},setup(){},async mounted(){try{await this.getData();const e=K.A.get("session");this.accessSession=e.current._id}catch(e){console.log(Error)}}},V=s(64621);const G=(0,V.A)(M,[["render",H]]);var Q=G,R={name:"Home",components:{Add:Q},data(){return{login:K.A.get("session","login")}},methods:{},setup(){const e=(0,i.lq)(),t=e.meta.title;(0,a.K7)(t)}};const z=(0,V.A)(R,[["render",n]]);var Y=z}}]);
//# sourceMappingURL=9424.7d5f333d.js.map