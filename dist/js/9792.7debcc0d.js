"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[9792],{97435:function(e,s,t){t.d(s,{A:function(){return C}});var o=t(20641),i=t(90033),n=t(53751);const r={class:"bg-gray-50"},a={class:"flex min-h-full flex-col justify-center py-12 sm:px-6 lg:px-8"},l={class:"sm:mx-auto sm:w-full sm:max-w-lg"},d=["src"],c={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},u={class:"mt-2"},m={class:"mt-2 relative"},g=["type"],p={class:"flex items-center justify-between"},f={class:"text-sm"},b={key:0,class:"col-span-2"},h={class:"items-center px-3 py-1 rounded-md bg-red-100 text-sm text-black pb-5 mb-5"},x={class:"w-full"};function y(e,s,t,y,k,w){const v=(0,o.g2)("font-awesome-icon"),L=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("div",a,[(0,o.Lk)("div",l,[this.showModal?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("img",{key:0,class:"mx-auto h-24 w-auto",src:this.config.siteLogo,alt:"Your Company"},null,8,d)),s[4]||(s[4]=(0,o.Lk)("h2",{class:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900"},"เข้าสู่ระบบฝึกอบรม (HR)",-1)),s[5]||(s[5]=(0,o.Lk)("p",{class:"mt-2 text-center text-base text-gray-600"}," ใช้บัญชีสำหรับ K2 ในการล็อคอิน ",-1))]),(0,o.Lk)("div",c,[(0,o.Lk)("div",{class:(0,i.C4)(["bg-white px-4 py-8 shadow sm:rounded-lg sm:px-10 relative",[k.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},[(0,o.Lk)("form",{class:"space-y-6",onSubmit:s[3]||(s[3]=(0,n.D$)(((...e)=>w.login&&w.login(...e)),["prevent"]))},[(0,o.Lk)("div",null,[s[6]||(s[6]=(0,o.Lk)("label",{for:"email",class:"block text-md font-semibold leading-6 text-gray-900"},"ชื่อผู้ใช้ในระบบ K2",-1)),(0,o.Lk)("div",u,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>k.username=e),id:"username",name:"username",type:"text",autocomplete:"username",required:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[n.Jo,k.username]])])]),(0,o.Lk)("div",null,[s[7]||(s[7]=(0,o.Lk)("label",{for:"password",class:"block text-md font-semibold leading-6 text-gray-900"},"รหัสผ่าน",-1)),(0,o.Lk)("div",m,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>k.password=e),id:"password",name:"password",type:k.passwordVisible?"text":"password",autocomplete:"current-password",required:"",class:"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,8,g),[[n.hp,k.password]]),(0,o.Lk)("button",{type:"button",class:"absolute inset-y-0 right-0 flex items-center bg-white hover:bg-gray-100 text-gray-800 font-semibold py-2 px-2 border border-gray-400 rounded shadow m-1",onClick:s[2]||(s[2]=(...e)=>w.togglePasswordVisibility&&w.togglePasswordVisibility(...e))},[(0,o.bF)(v,{icon:k.passwordVisible?["fas","eye-slash"]:["fas","eye"],class:"text-black hover:text-gray-600 text-xs"},null,8,["icon"])])])]),(0,o.Lk)("div",p,[s[9]||(s[9]=(0,o.Lk)("div",{class:"flex items-center"},[(0,o.Lk)("input",{id:"remember-me",name:"remember-me",type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-600"}),(0,o.Lk)("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"},"จำฉันไว้")],-1)),(0,o.Lk)("div",f,[(0,o.bF)(L,{to:"/user/forgot",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:(0,o.k6)((()=>s[8]||(s[8]=[(0,o.eW)(" ลืมรหัสผ่าน ")]))),_:1})])]),(0,o.Lk)("div",null,[this.errorStage?((0,o.uX)(),(0,o.CE)("div",b,[(0,o.Lk)("div",h,[s[10]||(s[10]=(0,o.Lk)("div",{class:"font-semibold pt-3 pb-3"},"เกิดข้อผิดพลาด",-1)),(0,o.Lk)("div",x,(0,i.v_)(this.errorMessage),1)])])):(0,o.Q3)("",!0),s[11]||(s[11]=(0,o.Lk)("button",{type:"submit",class:"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-4 text-md font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"เข้าสู่ระบบ",-1))])],32)],2)])])])}var k=t(40475),w={name:"Login",components:{},props:{showModal:{type:Boolean,default:!1}},data(){return{config:k.A.get("configs"),username:"",password:"",errorStage:!1,errorMessage:"",activeBlock:!1,passwordVisible:!1}},methods:{togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible},async login(){try{this.activeBlock=!0,this.errorStage=!1;const e=await fetch("https://faas-sgp1-18bc02ac.doserverless.co/api/v1/web/fn-34d16f42-4718-42b0-814e-08d23fecd2ce/default/login-fti-employee",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})}),s=await e.json();if(console.log("getLogin",s),200===s.status){let e=[],t="";const o={active:!0,token:s.user._id,refresh:"",login:!0,userID:s.user._id,user:s.user,loader:!1,role:s.user.role,nav:"normal-nav",layout:"frontend-layout",current:t,list:e,enroll:s.enroll,mode:s.mode};k.A.update("session",o),console.log("session",o),this.showModal?window.location.reload():this.$swal({toast:!0,position:"bottom-end",showConfirmButton:!1,timer:1e3,icon:"success",title:"แจ้งเตือน",text:"เข้าสู่ระบบเรียบร้อยแล้ว"}).then((()=>{window.location.href="/user/employee"}))}else this.errorStage=!0,this.errorMessage=s;this.activeBlock=!1}catch(e){console.log(e)}}}},v=t(64621);const L=(0,v.A)(w,[["render",y]]);var C=L},59792:function(e,s,t){t.r(s),t.d(s,{default:function(){return m}});var o=t(20641);function i(e,s,t,i,n,r){return(0,o.uX)(),(0,o.Wv)((0,o.$y)(r.componentName))}var n=t(52968),r=t(75220),a=t(40475),l=t(97435),d={name:"Lesson Detail",components:{Frontend:l.A},data(){return{session:a.A.get("session")}},setup(){const e=(0,r.lq)(),s=e.meta.title;(0,n.K7)(s)},computed:{componentName(){return"Frontend"}}},c=t(64621);const u=(0,c.A)(d,[["render",i]]);var m=u}}]);
//# sourceMappingURL=9792.7debcc0d.js.map