"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[9907],{69907:function(e,t,s){s.r(t),s.d(t,{default:function(){return tt}});var l=s(20641);function a(e,t,s,a,i,o){const n=(0,l.g2)("List");return this.login?((0,l.uX)(),(0,l.Wv)(n,{key:0})):(0,l.Q3)("",!0)}var i=s(52968),o=s(75220),n=s(90033),r=s(53751);const d={class:"min-h-screen bg-gray-50 flex"},c={class:"hidden lg:flex lg:w-64 lg:flex-col"},u={class:"flex flex-col flex-grow bg-white border-r border-gray-200"},g={class:"flex items-center justify-between px-4 py-4 border-b border-gray-200"},f={class:"px-4 py-4 border-b border-gray-200"},b={class:"space-y-2"},x={class:"flex items-center justify-between p-2 bg-blue-50 rounded-lg stats-card"},k={class:"text-sm font-semibold text-blue-600"},p={class:"flex items-center justify-between p-2 bg-green-50 rounded-lg stats-card"},h={class:"text-sm font-semibold text-green-600"},m={class:"flex items-center justify-between p-2 bg-yellow-50 rounded-lg stats-card"},y={class:"text-sm font-semibold text-yellow-600"},v={class:"flex items-center justify-between p-2 bg-purple-50 rounded-lg stats-card"},L={class:"text-sm font-semibold text-purple-600"},w={class:"px-4 py-4 border-b border-gray-200"},C={class:"space-y-1"},N=["onClick"],_={class:"flex-1 text-left"},F={class:"px-4 py-4 border-b border-gray-200"},E={class:"space-y-2"},M={class:"mt-auto px-4 py-4"},D={class:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg"},I={class:"flex-1 min-w-0"},X={class:"text-sm font-medium text-gray-900 truncate"},S={class:"flex-1 flex flex-col min-w-0"},j={class:"lg:hidden bg-white border-b border-gray-200 px-4 py-3"},A={class:"flex items-center justify-between"},T={class:"bg-white border-b border-gray-200 px-4 py-3"},U={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-3"},Q={class:"flex-1 max-w-md"},$={class:"relative"},P={class:"lg:hidden bg-white border-b border-gray-200"},K={class:"px-4 py-2"},R=["value"],z={class:"flex-1 p-4 overflow-hidden"},V={key:0,class:"h-full"},W={class:"mb-4 flex items-center justify-between"},J={class:"flex items-center gap-2"},q={class:"text-lg font-semibold text-gray-900"},H={class:"px-2 py-1 bg-gray-100 text-gray-600 text-sm rounded-full"},O={class:"flex items-center gap-2"},B={class:"h-full overflow-y-auto"},G={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},Y=["onClick"],Z={class:"flex items-start justify-between mb-2"},ee={class:"font-semibold text-gray-900 text-sm truncate flex-1"},te=["onClick"],se={class:"text-gray-600 text-xs mb-3 line-clamp-3"},le={class:"flex items-center justify-between text-xs text-gray-500"},ae={class:"flex items-center gap-1"},ie={class:"flex items-center gap-2"},oe=["onClick"],ne=["onClick"],re={key:1,class:"space-y-2"},de=["onClick"],ce={class:"flex items-start gap-3"},ue={class:"flex-1 min-w-0"},ge={class:"flex items-start justify-between gap-3"},fe={class:"flex-1 min-w-0"},be={class:"font-semibold text-gray-900 text-sm truncate"},xe={class:"text-gray-600 text-xs mt-1 line-clamp-2"},ke={class:"flex items-center gap-2 flex-shrink-0"},pe={class:"text-xs text-gray-500"},he=["onClick"],me=["onClick"],ye=["onClick"],ve={key:2,class:"text-center py-12"},Le={key:1,class:"h-full flex flex-col"},we={class:"bg-white border border-gray-200 rounded-lg flex-1 flex flex-col"},Ce={class:"border-b border-gray-200 p-4 flex-shrink-0"},Ne={class:"flex items-center justify-between"},_e={class:"flex items-center gap-3"},Fe={class:"flex items-center gap-2"},Ee={class:"flex items-center gap-1"},Me=["onClick"],De={class:"flex-1 p-4"},Ie={class:"flex flex-col h-full"},Xe={class:"flex items-center justify-between px-4 py-4 border-b border-gray-200"},Se={class:"px-4 py-4 border-b border-gray-200"},je={class:"space-y-2"},Ae={class:"flex items-center justify-between p-2 bg-blue-50 rounded-lg stats-card"},Te={class:"text-sm font-semibold text-blue-600"},Ue={class:"flex items-center justify-between p-2 bg-green-50 rounded-lg stats-card"},Qe={class:"text-sm font-semibold text-green-600"},$e={class:"flex items-center justify-between p-2 bg-yellow-50 rounded-lg stats-card"},Pe={class:"text-sm font-semibold text-yellow-600"},Ke={class:"px-4 py-4 border-b border-gray-200"},Re={class:"space-y-1"},ze=["onClick"],Ve={class:"flex-1 text-left"};function We(e,t,s,a,i,o){return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",c,[(0,l.Lk)("div",u,[(0,l.Lk)("div",g,[t[21]||(t[21]=(0,l.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"ระบบโน้ต",-1)),(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.startAddingNote&&o.startAddingNote(...e)),class:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors duration-200",title:"เพิ่มโน้ตใหม่"},t[20]||(t[20]=[(0,l.Lk)("i",{class:"fas fa-plus text-sm"},null,-1)]))]),(0,l.Lk)("div",f,[t[26]||(t[26]=(0,l.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"สถิติรวม",-1)),(0,l.Lk)("div",b,[(0,l.Lk)("div",x,[t[22]||(t[22]=(0,l.Lk)("div",{class:"flex items-center gap-2"},[(0,l.Lk)("div",{class:"w-2 h-2 bg-blue-500 rounded-full"}),(0,l.Lk)("span",{class:"text-sm text-gray-700"},"โน้ตทั้งหมด")],-1)),(0,l.Lk)("span",k,(0,n.v_)(i.notes.length),1)]),(0,l.Lk)("div",p,[t[23]||(t[23]=(0,l.Lk)("div",{class:"flex items-center gap-2"},[(0,l.Lk)("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),(0,l.Lk)("span",{class:"text-sm text-gray-700"},"วันนี้")],-1)),(0,l.Lk)("span",h,(0,n.v_)(o.todayNotes),1)]),(0,l.Lk)("div",m,[t[24]||(t[24]=(0,l.Lk)("div",{class:"flex items-center gap-2"},[(0,l.Lk)("div",{class:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,l.Lk)("span",{class:"text-sm text-gray-700"},"สัปดาห์นี้")],-1)),(0,l.Lk)("span",y,(0,n.v_)(o.weekNotes),1)]),(0,l.Lk)("div",v,[t[25]||(t[25]=(0,l.Lk)("div",{class:"flex items-center gap-2"},[(0,l.Lk)("div",{class:"w-2 h-2 bg-purple-500 rounded-full"}),(0,l.Lk)("span",{class:"text-sm text-gray-700"},"ปักหมุด")],-1)),(0,l.Lk)("span",L,(0,n.v_)(o.pinnedNotes),1)])])]),(0,l.Lk)("div",w,[t[27]||(t[27]=(0,l.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"เมนู",-1)),(0,l.Lk)("nav",C,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.sidebarMenuItems,(e=>((0,l.uX)(),(0,l.CE)("button",{key:e.value,onClick:t=>o.selectFilter(e.value),class:(0,n.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors duration-200 sidebar-menu-item",{"bg-blue-100 text-blue-700 font-medium active":i.selectedFilter===e.value,"text-gray-600 hover:bg-gray-100 hover:text-gray-900":i.selectedFilter!==e.value}])},[(0,l.Lk)("i",{class:(0,n.C4)([e.icon,"text-sm w-4"])},null,2),(0,l.Lk)("span",_,(0,n.v_)(e.label),1),o.getFilterCount(e.value)>0?((0,l.uX)(),(0,l.CE)("span",{key:0,class:(0,n.C4)(["px-2 py-1 text-xs rounded-full status-badge",{"bg-blue-200 text-blue-800":i.selectedFilter===e.value,"bg-gray-200 text-gray-600":i.selectedFilter!==e.value}])},(0,n.v_)(o.getFilterCount(e.value)),3)):(0,l.Q3)("",!0)],10,N)))),128))])]),(0,l.Lk)("div",F,[t[30]||(t[30]=(0,l.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"การดำเนินการ",-1)),(0,l.Lk)("div",E,[(0,l.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.startAddingNote&&o.startAddingNote(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[28]||(t[28]=[(0,l.Lk)("i",{class:"fas fa-plus text-sm w-4"},null,-1),(0,l.Lk)("span",null,"เพิ่มโน้ตใหม่",-1)])),(0,l.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.refreshNotes&&o.refreshNotes(...e)),class:"w-full flex items-center gap-3 px-3 py-2 text-sm text-gray-600 hover:bg-gray-100 hover:text-gray-900 rounded-lg transition-colors duration-200"},t[29]||(t[29]=[(0,l.Lk)("i",{class:"fas fa-sync-alt text-sm w-4"},null,-1),(0,l.Lk)("span",null,"รีเฟรช",-1)]))])]),(0,l.Lk)("div",M,[(0,l.Lk)("div",D,[t[32]||(t[32]=(0,l.Lk)("div",{class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center"},[(0,l.Lk)("i",{class:"fas fa-user text-white text-sm"})],-1)),(0,l.Lk)("div",I,[(0,l.Lk)("p",X,(0,n.v_)(i.session?.current?.name||"ผู้ใช้"),1),t[31]||(t[31]=(0,l.Lk)("p",{class:"text-xs text-gray-500"},"ผู้ดูแลระบบ",-1))])])])])]),(0,l.Lk)("div",S,[(0,l.Lk)("div",j,[(0,l.Lk)("div",A,[t[34]||(t[34]=(0,l.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"ระบบโน้ต",-1)),(0,l.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>o.toggleMobileSidebar&&o.toggleMobileSidebar(...e)),class:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},t[33]||(t[33]=[(0,l.Lk)("i",{class:"fas fa-bars"},null,-1)]))])]),(0,l.Lk)("div",T,[(0,l.Lk)("div",U,[(0,l.Lk)("div",Q,[(0,l.Lk)("div",$,[t[35]||(t[35]=(0,l.Lk)("i",{class:"fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"},null,-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>i.searchQuery=e),onInput:t[5]||(t[5]=(...e)=>o.filterNotes&&o.filterNotes(...e)),placeholder:"ค้นหาโน้ต...",class:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"},null,544),[[r.Jo,i.searchQuery]])])]),(0,l.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>o.startAddingNote&&o.startAddingNote(...e)),class:"lg:hidden bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-lg transition-colors duration-200 text-sm flex items-center gap-2"},t[36]||(t[36]=[(0,l.Lk)("i",{class:"fas fa-plus text-xs"},null,-1),(0,l.eW)(" เพิ่มโน้ต ")]))])]),(0,l.Lk)("div",P,[(0,l.Lk)("div",K,[(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.selectedFilter=e),onChange:t[8]||(t[8]=e=>o.selectFilter(i.selectedFilter)),class:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.sidebarMenuItems,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.value,value:e.value},(0,n.v_)(e.label)+" ("+(0,n.v_)(o.getFilterCount(e.value))+") ",9,R)))),128))],544),[[r.u1,i.selectedFilter]])])]),(0,l.Lk)("div",z,[i.editingNote?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",V,[(0,l.Lk)("div",W,[(0,l.Lk)("div",J,[(0,l.Lk)("h2",q,(0,n.v_)(o.getFilterLabel(i.selectedFilter)),1),(0,l.Lk)("span",H,(0,n.v_)(i.filteredNotes.length)+" รายการ ",1)]),(0,l.Lk)("div",O,[(0,l.Lk)("button",{onClick:t[9]||(t[9]=e=>i.viewMode="grid"),class:(0,n.C4)(["p-2 rounded-lg transition-colors","grid"===i.viewMode?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"])},t[37]||(t[37]=[(0,l.Lk)("i",{class:"fas fa-th text-sm"},null,-1)]),2),(0,l.Lk)("button",{onClick:t[10]||(t[10]=e=>i.viewMode="list"),class:(0,n.C4)(["p-2 rounded-lg transition-colors","list"===i.viewMode?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"])},t[38]||(t[38]=[(0,l.Lk)("i",{class:"fas fa-list text-sm"},null,-1)]),2)])]),(0,l.Lk)("div",B,["grid"===i.viewMode?((0,l.uX)(),(0,l.CE)("div",G,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.filteredNotes,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e._id,class:"bg-white border border-gray-200 rounded-lg p-4 cursor-pointer note-card transition-all duration-200",style:(0,n.Tr)({borderLeftColor:e.color||"#3b82f6",borderLeftWidth:"4px"}),onClick:t=>o.startEditingNote(e)},[(0,l.Lk)("div",Z,[(0,l.Lk)("h3",ee,(0,n.v_)(e.title||"ไม่มีชื่อ"),1),(0,l.Lk)("button",{onClick:(0,r.D$)((t=>o.pinNote(e)),["stop"]),class:"ml-2"},[(0,l.Lk)("i",{class:(0,n.C4)([e.pinned?"fas fa-thumbtack text-blue-600":"fas fa-thumbtack text-gray-300","text-sm"])},null,2)],8,te)]),(0,l.Lk)("p",se,(0,n.v_)(e.content),1),(0,l.Lk)("div",le,[(0,l.Lk)("span",ae,[t[39]||(t[39]=(0,l.Lk)("i",{class:"fas fa-calendar-alt"},null,-1)),(0,l.eW)(" "+(0,n.v_)(e.date),1)]),(0,l.Lk)("div",ie,[(0,l.Lk)("button",{onClick:(0,r.D$)((t=>o.shareNote(e)),["stop"]),class:"hover:text-blue-600 transition-colors"},t[40]||(t[40]=[(0,l.Lk)("i",{class:"fas fa-share"},null,-1)]),8,oe),(0,l.Lk)("button",{onClick:(0,r.D$)((t=>o.deleteNote(e._id)),["stop"]),class:"hover:text-red-600 transition-colors"},t[41]||(t[41]=[(0,l.Lk)("i",{class:"fas fa-trash"},null,-1)]),8,ne)])])],12,Y)))),128))])):(0,l.Q3)("",!0),"list"===i.viewMode?((0,l.uX)(),(0,l.CE)("div",re,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.filteredNotes,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e._id,class:"bg-white border border-gray-200 rounded-lg p-4 cursor-pointer note-card transition-all duration-200",onClick:t=>o.startEditingNote(e)},[(0,l.Lk)("div",ce,[(0,l.Lk)("div",{class:"w-1 h-12 rounded-full flex-shrink-0",style:(0,n.Tr)({backgroundColor:e.color||"#3b82f6"})},null,4),(0,l.Lk)("div",ue,[(0,l.Lk)("div",ge,[(0,l.Lk)("div",fe,[(0,l.Lk)("h3",be,(0,n.v_)(e.title||"ไม่มีชื่อ"),1),(0,l.Lk)("p",xe,(0,n.v_)(e.content),1)]),(0,l.Lk)("div",ke,[(0,l.Lk)("span",pe,(0,n.v_)(e.date),1),(0,l.Lk)("button",{onClick:(0,r.D$)((t=>o.pinNote(e)),["stop"])},[(0,l.Lk)("i",{class:(0,n.C4)([e.pinned?"fas fa-thumbtack text-blue-600":"fas fa-thumbtack text-gray-300","text-sm"])},null,2)],8,he),(0,l.Lk)("button",{onClick:(0,r.D$)((t=>o.shareNote(e)),["stop"]),class:"text-gray-400 hover:text-blue-600 transition-colors"},t[42]||(t[42]=[(0,l.Lk)("i",{class:"fas fa-share text-sm"},null,-1)]),8,me),(0,l.Lk)("button",{onClick:(0,r.D$)((t=>o.deleteNote(e._id)),["stop"]),class:"text-gray-400 hover:text-red-600 transition-colors"},t[43]||(t[43]=[(0,l.Lk)("i",{class:"fas fa-trash text-sm"},null,-1)]),8,ye)])])])])],8,de)))),128))])):(0,l.Q3)("",!0),0===i.filteredNotes.length?((0,l.uX)(),(0,l.CE)("div",ve,t[44]||(t[44]=[(0,l.Lk)("i",{class:"fas fa-sticky-note text-gray-300 text-4xl mb-4"},null,-1),(0,l.Lk)("p",{class:"text-gray-500"},"ไม่พบโน้ตที่ตรงกับการค้นหา",-1)]))):(0,l.Q3)("",!0)])])),i.editingNote?((0,l.uX)(),(0,l.CE)("div",Le,[(0,l.Lk)("div",we,[(0,l.Lk)("div",Ce,[(0,l.Lk)("div",Ne,[(0,l.Lk)("div",_e,[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>i.editingNote.title=e),placeholder:"ชื่อโน้ต...",class:"text-lg font-semibold text-gray-900 bg-transparent border-none outline-none flex-1"},null,512),[[r.Jo,i.editingNote.title]]),(0,l.Lk)("button",{onClick:t[12]||(t[12]=e=>o.pinNote(i.editingNote))},[(0,l.Lk)("i",{class:(0,n.C4)(i.editingNote.pinned?"fas fa-thumbtack text-blue-600":"fas fa-thumbtack text-gray-300")},null,2)])]),(0,l.Lk)("div",Fe,[(0,l.Lk)("div",Ee,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.noteColors,(e=>((0,l.uX)(),(0,l.CE)("button",{key:e,onClick:t=>i.editingNote.color=e,class:(0,n.C4)(["w-6 h-6 rounded-full border-2 transition-all",i.editingNote.color===e?"border-gray-600 scale-110":"border-gray-300"]),style:(0,n.Tr)({backgroundColor:e})},null,14,Me)))),128))]),(0,l.Lk)("button",{onClick:t[13]||(t[13]=e=>o.saveNoteContent(i.editingNote)),class:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-xs transition-colors"}," บันทึก "),(0,l.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>o.cancelEditing&&o.cancelEditing(...e)),class:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded-lg text-xs transition-colors"}," ยกเลิก ")])])]),(0,l.Lk)("div",De,[(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":t[15]||(t[15]=e=>i.editingNote.content=e),ref:"textarea",placeholder:"เขียนโน้ตของคุณที่นี่...",class:"w-full h-full resize-none border-none outline-none text-sm leading-relaxed",onInput:t[16]||(t[16]=(...e)=>o.autoResizeTextarea&&o.autoResizeTextarea(...e))},null,544),[[r.Jo,i.editingNote.content]])])])])):(0,l.Q3)("",!0)])]),i.showMobileSidebar?((0,l.uX)(),(0,l.CE)("div",{key:0,class:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t[19]||(t[19]=(...e)=>o.toggleMobileSidebar&&o.toggleMobileSidebar(...e))},[(0,l.Lk)("div",{class:"w-64 h-full bg-white transform transition-transform duration-300",onClick:t[18]||(t[18]=(0,r.D$)((()=>{}),["stop"]))},[(0,l.Lk)("div",Ie,[(0,l.Lk)("div",Xe,[t[46]||(t[46]=(0,l.Lk)("h1",{class:"text-lg font-semibold text-gray-900"},"ระบบโน้ต",-1)),(0,l.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>o.toggleMobileSidebar&&o.toggleMobileSidebar(...e)),class:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors"},t[45]||(t[45]=[(0,l.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,l.Lk)("div",Se,[t[50]||(t[50]=(0,l.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"สถิติรวม",-1)),(0,l.Lk)("div",je,[(0,l.Lk)("div",Ae,[t[47]||(t[47]=(0,l.Lk)("div",{class:"flex items-center gap-2"},[(0,l.Lk)("div",{class:"w-2 h-2 bg-blue-500 rounded-full"}),(0,l.Lk)("span",{class:"text-sm text-gray-700"},"โน้ตทั้งหมด")],-1)),(0,l.Lk)("span",Te,(0,n.v_)(i.notes.length),1)]),(0,l.Lk)("div",Ue,[t[48]||(t[48]=(0,l.Lk)("div",{class:"flex items-center gap-2"},[(0,l.Lk)("div",{class:"w-2 h-2 bg-green-500 rounded-full"}),(0,l.Lk)("span",{class:"text-sm text-gray-700"},"วันนี้")],-1)),(0,l.Lk)("span",Qe,(0,n.v_)(o.todayNotes),1)]),(0,l.Lk)("div",$e,[t[49]||(t[49]=(0,l.Lk)("div",{class:"flex items-center gap-2"},[(0,l.Lk)("div",{class:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,l.Lk)("span",{class:"text-sm text-gray-700"},"สัปดาห์นี้")],-1)),(0,l.Lk)("span",Pe,(0,n.v_)(o.weekNotes),1)])])]),(0,l.Lk)("div",Ke,[t[51]||(t[51]=(0,l.Lk)("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"เมนู",-1)),(0,l.Lk)("nav",Re,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(i.sidebarMenuItems,(e=>((0,l.uX)(),(0,l.CE)("button",{key:e.value,onClick:t=>o.selectFilterAndCloseMobile(e.value),class:(0,n.C4)(["w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors duration-200 sidebar-menu-item",{"bg-blue-100 text-blue-700 font-medium active":i.selectedFilter===e.value,"text-gray-600 hover:bg-gray-100 hover:text-gray-900":i.selectedFilter!==e.value}])},[(0,l.Lk)("i",{class:(0,n.C4)([e.icon,"text-sm w-4"])},null,2),(0,l.Lk)("span",Ve,(0,n.v_)(e.label),1),o.getFilterCount(e.value)>0?((0,l.uX)(),(0,l.CE)("span",{key:0,class:(0,n.C4)(["px-2 py-1 text-xs rounded-full status-badge",{"bg-blue-200 text-blue-800":i.selectedFilter===e.value,"bg-gray-200 text-gray-600":i.selectedFilter!==e.value}])},(0,n.v_)(o.getFilterCount(e.value)),3)):(0,l.Q3)("",!0)],10,ze)))),128))])])])])])):(0,l.Q3)("",!0)])}s(44114),s(98992),s(54520),s(72577),s(14603),s(47566),s(98721);var Je=s(40475),qe=s(40471);const He=new qe.A(!1);var Oe={data(){return{loader:!1,title:"Notes",notes:[],filteredNotes:[],editingNote:null,configs:Je.A.get("configs"),session:Je.A.get("session"),viewMode:"grid",searchQuery:"",selectedFilter:"all",showMobileSidebar:!1,sidebarMenuItems:[{value:"all",label:"ทั้งหมด",icon:"fas fa-th-large"},{value:"today",label:"วันนี้",icon:"fas fa-calendar-day"},{value:"week",label:"สัปดาห์นี้",icon:"fas fa-calendar-week"},{value:"pinned",label:"ปักหมุด",icon:"fas fa-thumbtack"}],noteColors:["#3b82f6","#ef4444","#f59e0b","#10b981","#8b5cf6","#ec4899","#6b7280","#ffffff"]}},computed:{todayNotes(){const e=(new Date).toLocaleDateString();return this.notes.filter((t=>t.date===e)).length},weekNotes(){const e=new Date,t=new Date(e.getTime()-6048e5);return this.notes.filter((s=>{const l=new Date(s.date);return l>=t&&l<=e})).length},pinnedNotes(){return this.notes.filter((e=>e.pinned)).length}},methods:{async fetchNotes(){try{const e=await He.POST("notes/query",{method:"find",args:[{$and:[{unit:this.session.current._id}]}]},this.configs.key);200===e.status&&(this.notes=e.data,this.filterNotes())}catch(e){console.error("Error fetching notes:",e)}finally{this.loader=!0,this.checkUrlForItem()}},updateNoteTitle(e){const t=e.content.split("\n");e.title=t[0]||"Untitled Note"},async saveNoteContent(e){this.updateNoteTitle(e),e._id?await this.updateNoteContent(e):await this.addNoteContent(e),this.editingNote=null,this.removeUrlItemParam()},async addNoteContent(e){try{const t=await He.POST("notes/",{data:{title:e.title,content:e.content,date:(new Date).toLocaleDateString(),unit:this.session.current._id,color:e.color,pinned:e.pinned||!1}},this.configs.key);200===t.status&&(e._id=t.data._id,e.date=t.data.date,this.notes.push(e),this.filterNotes())}catch(t){console.error("Error adding note:",t)}},async updateNoteContent(e){try{const t=await He.PUT(`notes/${e._id}`,{data:{title:e.title,content:e.content,color:e.color,pinned:e.pinned||!1}},this.configs.key);200===t.status&&this.fetchNotes()}catch(t){console.error("Error updating note:",t)}},startAddingNote(){this.editingNote={title:"",content:"",date:(new Date).toLocaleDateString(),color:"#3b82f6",pinned:!1,_id:null},this.updateUrlItemParam()},startEditingNote(e){this.updateNoteTitle(e),this.editingNote={...e},this.updateUrlItemParam(e._id)},cancelEditing(){this.editingNote=null,this.removeUrlItemParam()},async deleteNote(e){try{const t=await He.DELETE(`notes/${e}`,{},this.configs.key);200===t.status&&(this.notes=this.notes.filter((t=>t._id!==e)),this.filterNotes())}catch(t){console.error("Error deleting note:",t)}},checkUrlForItem(){const e=new URLSearchParams(window.location.search),t=e.get("item");if(t){const e=this.notes.find((e=>e._id===t));e&&this.startEditingNote(e)}},updateUrlItemParam(e=""){const t=new URL(window.location);e?t.searchParams.set("item",e):t.searchParams.set("item","new"),window.history.pushState({},"",t)},removeUrlItemParam(){const e=new URL(window.location);e.searchParams.delete("item"),window.history.pushState({},"",e),this.fetchNotes()},async pinNote(e){e.pinned=!e.pinned,e._id&&await this.updateNoteContent(e)},shareNote(){},editNote(e){this.startEditingNote(e)},autoResizeTextarea(){const e=this.$refs.textarea;e&&(e.style.height="auto",e.style.height=`${e.scrollHeight}px`)},filterNotes(){let e=this.notes;if(this.searchQuery&&(e=e.filter((e=>e.title?.toLowerCase().includes(this.searchQuery.toLowerCase())||e.content?.toLowerCase().includes(this.searchQuery.toLowerCase())))),"today"===this.selectedFilter){const t=(new Date).toLocaleDateString();e=e.filter((e=>e.date===t))}else if("week"===this.selectedFilter){const t=new Date,s=new Date(t.getTime()-6048e5);e=e.filter((e=>{const l=new Date(e.date);return l>=s&&l<=t}))}else"pinned"===this.selectedFilter&&(e=e.filter((e=>e.pinned)));this.filteredNotes=e},selectFilter(e){this.selectedFilter=e,this.filterNotes()},getFilterCount(e){return"all"===e?this.notes.length:"today"===e?this.todayNotes:"week"===e?this.weekNotes:"pinned"===e?this.pinnedNotes:0},getFilterLabel(e){const t=this.sidebarMenuItems.find((t=>t.value===e));return t?t.label:"ทั้งหมด"},toggleMobileSidebar(){this.showMobileSidebar=!this.showMobileSidebar},selectFilterAndCloseMobile(e){this.selectFilter(e),this.toggleMobileSidebar()},refreshNotes(){this.fetchNotes()}},mounted(){this.fetchNotes(),this.$nextTick((()=>{this.$refs.textarea&&this.autoResizeTextarea()}))}},Be=s(64621);const Ge=(0,Be.A)(Oe,[["render",We],["__scopeId","data-v-196ec4b6"]]);var Ye=Ge,Ze={name:"AdminList",components:{List:Ye},data(){return{login:Je.A.get("session","login")}},methods:{showAlert(){this.$swal("Hello Vue world!!!")}},setup(){const e=(0,o.lq)(),t=e.meta.title;(0,i.K7)(t)}};const et=(0,Be.A)(Ze,[["render",a]]);var tt=et}}]);
//# sourceMappingURL=9907.3fc9bd2e.js.map