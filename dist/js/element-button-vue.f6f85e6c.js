"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[6805],{78287:function(e,t,o){o.r(t),o.d(t,{default:function(){return Re}});var l=o(20641),a=o(90033),s=o(53751);const p={key:0,class:"p-2 border rounded-md shadow-sm"},n={class:"mb-2"},i={class:"block popup-label font-semibold mb-1"},d={key:0,class:"text-xs text-gray-500 ml-1"},r={key:0,class:"text-xs text-blue-600 mt-2"},u={key:1,class:"content-editor overflow-auto bg-white rounded-lg h-full"},c={class:"bg-white border-b border-gray-200 px-6 py-4 sticky top-0 z-10"},m={class:"flex items-center space-x-3"},b={class:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center"},g={class:"px-6 py-4 space-y-6"},x={class:"tabs border-b border-gray-200 flex sticky top-0 bg-white z-10"},y={class:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 mt-4"},k={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},w={class:"section-group"},v={class:"section-group"},f={class:"section-group"},h={class:"section-group"},L={class:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 mt-4"},S={class:"section-group grid grid-cols-1 md:grid-cols-3 gap-4 mt-3 items-end"},C={class:"md:col-span-2 flex items-end"},E=["disabled"],U={class:"section-group mt-5"},I={key:0,class:"flow-steps list-none p-0 text-sm space-y-3"},M={class:"flex items-center justify-between w-full mb-2"},F={class:"font-medium text-gray-700"},V={class:"flex items-center space-x-1.5"},_=["onClick","title"],T=["onClick"],J=["onClick","disabled"],D=["onClick","disabled"],N=["onClick"],X={key:0,class:"mt-3 bg-white p-3 rounded-md border border-gray-200 text-sm space-y-3"},A=["onUpdate:modelValue"],Q={key:0},R=["onUpdate:modelValue"],P={key:1},B=["onUpdate:modelValue"],O={key:2},z=["onUpdate:modelValue"],G={class:"text-xs text-gray-500 mt-0.5"},j={key:3},$=["onUpdate:modelValue"],W=["onUpdate:modelValue"],H={class:"text-xs text-gray-500 mt-0.5"},K={key:4},Y=["onUpdate:modelValue"],q=["onUpdate:modelValue"],Z=["onUpdate:modelValue"],ee=["onUpdate:modelValue"],te=["onUpdate:modelValue"],oe={key:5},le=["onUpdate:modelValue"],ae={class:"text-xs text-gray-500 mt-0.5"},se={key:6},pe=["onUpdate:modelValue"],ne=["onUpdate:modelValue"],ie={key:0},de=["onUpdate:modelValue"],re={key:7},ue=["onUpdate:modelValue"],ce=["onUpdate:modelValue"],me=["onUpdate:modelValue"],be={class:"text-xs text-gray-500 mt-0.5"},ge={key:8},xe=["onUpdate:modelValue"],ye={key:1,class:"text-center text-gray-500 py-4"},ke={class:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 mt-4"},we={class:"section-group grid grid-cols-1 md:grid-cols-3 gap-4 mt-3 items-end"},ve={class:"md:col-span-1 flex items-end"},fe=["disabled"],he={key:0,class:"mt-2"},Le={key:1,class:"mt-2"},Se={key:2,class:"mt-2"},Ce={key:3,class:"mt-2"},Ee={class:"section-group mt-5"},Ue={key:0,class:"mapping-list list-none p-0 text-sm space-y-2"},Ie={class:"font-medium text-gray-800"},Me={class:"text-gray-600 text-xs ml-2"},Fe=["onClick"],Ve={key:1,class:"text-center text-gray-500 py-4"};function _e(e,t,o,_e,Te,Je){const De=(0,l.g2)("font-awesome-icon");return(0,l.uX)(),(0,l.CE)("div",null,["preview"===o.mode?((0,l.uX)(),(0,l.CE)("form",p,[(0,l.Lk)("div",n,[(0,l.Lk)("label",i,[(0,l.eW)((0,a.v_)(Te.localItem.label||"Button"),1),Te.localItem.name?((0,l.uX)(),(0,l.CE)("span",d,"("+(0,a.v_)(Te.localItem.name)+")",1)):(0,l.Q3)("",!0)]),(0,l.Lk)("button",{class:(0,a.C4)(["px-3 py-1.5 text-xs font-medium rounded",Je.buttonStyleClass]),style:(0,a.Tr)({fontSize:Te.localItem.textSize||"text-sm"}),type:"button"},(0,a.v_)(Te.localItem.label||"Preview"),7)]),Te.localItem.flows&&Te.localItem.flows.length>0?((0,l.uX)(),(0,l.CE)("div",r,[(0,l.bF)(De,{icon:["fas","code-fork"],class:"mr-1"}),(0,l.eW)(" Contains "+(0,a.v_)(Te.localItem.flows.length)+" Flow Step(s) ",1)])):(0,l.Q3)("",!0)])):"edit"===o.mode?((0,l.uX)(),(0,l.CE)("div",u,[(0,l.Lk)("div",c,[(0,l.Lk)("div",m,[(0,l.Lk)("div",b,[(0,l.bF)(De,{icon:["fas","mouse-pointer"],class:"h-4 w-4 text-blue-600"})]),t[17]||(t[17]=(0,l.Lk)("div",null,[(0,l.Lk)("h3",{class:"text-lg font-semibold text-gray-900"},"Button Configuration"),(0,l.Lk)("p",{class:"text-sm text-gray-500"},"ตั้งค่าการแสดงผลของปุ่ม")],-1))])]),(0,l.Lk)("div",g,[(0,l.Lk)("div",x,[(0,l.Lk)("button",{class:(0,a.C4)([{"border-b-2 border-blue-500 font-bold text-blue-600":"button"===Te.activeFlowTab,"text-gray-500 hover:text-gray-700":"button"!==Te.activeFlowTab},"px-4 py-2 focus:outline-none"]),onClick:t[0]||(t[0]=e=>Te.activeFlowTab="button")}," Button Config ",2),(0,l.Lk)("button",{class:(0,a.C4)([{"border-b-2 border-blue-500 font-bold text-blue-600":"flow"===Te.activeFlowTab,"text-gray-500 hover:text-gray-700":"flow"!==Te.activeFlowTab},"px-4 py-2 focus:outline-none"]),onClick:t[1]||(t[1]=e=>Te.activeFlowTab="flow")}," Flow Config ",2),(0,l.Lk)("button",{class:(0,a.C4)([{"border-b-2 border-blue-500 font-bold text-blue-600":"mapping"===Te.activeFlowTab,"text-gray-500 hover:text-gray-700":"mapping"!==Te.activeFlowTab},"px-4 py-2 focus:outline-none"]),onClick:t[2]||(t[2]=e=>Te.activeFlowTab="mapping")}," Data Mapping ",2)]),(0,l.bo)((0,l.Lk)("div",y,[(0,l.Lk)("div",k,[(0,l.Lk)("div",w,[t[18]||(t[18]=(0,l.Lk)("label",{class:"block popup-label font-semibold"},"Name (Identifier):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>Te.localItem.name=e),type:"text",class:"popup-input w-full rounded-md border border-gray-300",placeholder:"e.g., submit_form_button"},null,512),[[s.Jo,Te.localItem.name]]),t[19]||(t[19]=(0,l.Lk)("p",{class:"text-xs text-gray-500 mt-1"},"Used internally and for data mapping. Not visible to users.",-1))]),(0,l.Lk)("div",v,[t[20]||(t[20]=(0,l.Lk)("label",{class:"block popup-label font-semibold"},"Label (Visible Text):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>Te.localItem.label=e),type:"text",class:"popup-input w-full rounded-md border border-gray-300",placeholder:"e.g., Click Me"},null,512),[[s.Jo,Te.localItem.label]])]),(0,l.Lk)("div",f,[t[22]||(t[22]=(0,l.Lk)("label",{class:"block popup-label font-semibold"},"Button Style:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>Te.localItem.style=e),class:"popup-select w-full rounded-md border border-gray-300"},t[21]||(t[21]=[(0,l.Fv)('<option value="primary" data-v-0c598528>Primary (Blue)</option><option value="secondary" data-v-0c598528>Secondary (Gray)</option><option value="success" data-v-0c598528>Success (Green)</option><option value="danger" data-v-0c598528>Danger (Red)</option><option value="warning" data-v-0c598528>Warning (Yellow)</option><option value="info" data-v-0c598528>Info (Light Blue)</option><option value="light" data-v-0c598528>Light (White/Gray)</option><option value="dark" data-v-0c598528>Dark (Black/Dark Gray)</option><option value="link" data-v-0c598528>Link Style</option>',9)]),512),[[s.u1,Te.localItem.style]])]),(0,l.Lk)("div",h,[t[24]||(t[24]=(0,l.Lk)("label",{class:"block popup-label font-semibold"},"Button Text Size:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>Te.localItem.textSize=e),class:"popup-select w-full rounded-md border border-gray-300"},t[23]||(t[23]=[(0,l.Fv)('<option value="text-xs" data-v-0c598528>Extra Small</option><option value="text-sm" data-v-0c598528>Small</option><option value="text-base" data-v-0c598528>Base (Default)</option><option value="text-lg" data-v-0c598528>Large</option><option value="text-xl" data-v-0c598528>Extra Large</option>',5)]),512),[[s.u1,Te.localItem.textSize]])])])],512),[[s.aG,"button"===Te.activeFlowTab]]),(0,l.bo)((0,l.Lk)("div",L,[(0,l.RG)(e.$slots,"flow-config",{},(()=>[t[52]||(t[52]=(0,l.Lk)("div",{class:"section-group border-b border-gray-200 pb-3 mb-3"},[(0,l.Lk)("span",{class:"block font-bold text-md"},"Flow Configuration"),(0,l.Lk)("span",{class:"text-gray-500 text-sm"},"Define actions that happen when the button is clicked.")],-1)),(0,l.Lk)("div",S,[(0,l.Lk)("div",null,[t[26]||(t[26]=(0,l.Lk)("label",{class:"popup-label font-semibold"},"Add New Step:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>Te.newStep.type=e),class:"popup-select w-full rounded-md border border-gray-300 mt-1"},t[25]||(t[25]=[(0,l.Fv)('<option disabled value="" data-v-0c598528>Select a Step Type</option><option value="database" data-v-0c598528>Save Data to DB</option><option value="alert" data-v-0c598528>Show Alert</option><option value="modal" data-v-0c598528>Show Modal</option><option value="email" data-v-0c598528>Send Email</option><option value="redirect" data-v-0c598528>Redirect Page</option><option value="delay" data-v-0c598528>Add Delay</option><option value="trigger" data-v-0c598528>Trigger Element Action</option><option value="webhook" data-v-0c598528>Call Webhook</option><option value="script" data-v-0c598528>Run Custom Script</option>',10)]),512),[[s.u1,Te.newStep.type]])]),(0,l.Lk)("div",C,[(0,l.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>Je.addFlowStep&&Je.addFlowStep(...e)),class:"py-2 px-4 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none w-full md:w-auto",disabled:!Te.newStep.type},[(0,l.bF)(De,{icon:["fas","plus"],class:"mr-1.5"}),t[27]||(t[27]=(0,l.eW)(" Add Step "))],8,E)])]),(0,l.Lk)("div",U,[t[51]||(t[51]=(0,l.Lk)("span",{class:"block popup-label font-semibold mb-2"},"Defined Flow Steps:",-1)),Te.localItem.flows&&Te.localItem.flows.length>0?((0,l.uX)(),(0,l.CE)("ul",I,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Te.localItem.flows,((o,p)=>((0,l.uX)(),(0,l.CE)("li",{key:o.id||p,class:"border border-gray-200 rounded-md p-3 bg-gray-50"},[(0,l.Lk)("div",M,[(0,l.Lk)("span",F,(0,a.v_)(p+1)+". "+(0,a.v_)(Je.getHumanFriendlyStepType(o.type)),1),(0,l.Lk)("div",V,[(0,l.Lk)("button",{onClick:e=>Je.toggleFlowStepEdit(p),class:"p-1.5 text-xs bg-gray-200 hover:bg-gray-300 rounded-md focus:outline-none",title:o.isEditing?"Collapse":"Edit"},[(0,l.bF)(De,{icon:["fas",o.isEditing?"chevron-up":"pencil-alt"]},null,8,["icon"])],8,_),(0,l.Lk)("button",{onClick:e=>Je.duplicateFlowStep(p),class:"p-1.5 text-xs bg-blue-100 text-blue-600 hover:bg-blue-200 rounded-md focus:outline-none",title:"Duplicate"},[(0,l.bF)(De,{icon:["fas","clone"]})],8,T),(0,l.Lk)("button",{onClick:e=>Je.moveFlowStep(p,-1),disabled:0===p,class:"p-1.5 text-xs bg-gray-200 hover:bg-gray-300 rounded-md focus:outline-none disabled:opacity-50",title:"Move Up"},[(0,l.bF)(De,{icon:["fas","arrow-up"]})],8,J),(0,l.Lk)("button",{onClick:e=>Je.moveFlowStep(p,1),disabled:p===Te.localItem.flows.length-1,class:"p-1.5 text-xs bg-gray-200 hover:bg-gray-300 rounded-md focus:outline-none disabled:opacity-50",title:"Move Down"},[(0,l.bF)(De,{icon:["fas","arrow-down"]})],8,D),(0,l.Lk)("button",{onClick:e=>Je.removeFlowStep(p),class:"p-1.5 text-xs bg-red-100 text-red-600 hover:bg-red-200 rounded-md focus:outline-none",title:"Remove"},[(0,l.bF)(De,{icon:["fas","trash"]})],8,N)])]),o.isEditing?((0,l.uX)(),(0,l.CE)("div",X,[(0,l.Lk)("div",null,[t[28]||(t[28]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600"},"Step Name/Description (Optional):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.stepName=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"Briefly describe this step"},null,8,A),[[s.Jo,o.options.stepName]])]),"delay"===o.type?((0,l.uX)(),(0,l.CE)("div",Q,[t[29]||(t[29]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600"},"Delay Duration (seconds):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.duration=e,type:"number",class:"popup-input w-full text-xs mt-0.5",placeholder:"e.g., 5",min:"0"},null,8,R),[[s.Jo,o.options.duration,void 0,{number:!0}]])])):(0,l.Q3)("",!0),"database"===o.type?((0,l.uX)(),(0,l.CE)("div",P,[t[30]||(t[30]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600"},"Database Collection:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.collection=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"Enter target collection name"},null,8,B),[[s.Jo,o.options.collection]]),t[31]||(t[31]=(0,l.Lk)("p",{class:"text-xs text-gray-500 mt-0.5"},"Data from mappings will be saved here.",-1))])):(0,l.Q3)("",!0),"alert"===o.type?((0,l.uX)(),(0,l.CE)("div",O,[t[32]||(t[32]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600"},"Alert Text:",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":e=>o.options.text=e,class:"popup-input w-full text-xs mt-0.5",placeholder:"Enter text to display in alert",rows:"2"},null,8,z),[[s.Jo,o.options.text]]),(0,l.Lk)("p",G,"You can use mapped keywords like "+(0,a.v_)(e.keyword)+".",1)])):(0,l.Q3)("",!0),"modal"===o.type?((0,l.uX)(),(0,l.CE)("div",j,[t[33]||(t[33]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600"},"Modal Title:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.title=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"Enter modal title"},null,8,$),[[s.Jo,o.options.title]]),t[34]||(t[34]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600 mt-2"},"Modal Message:",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":e=>o.options.message=e,class:"popup-input w-full text-xs mt-0.5",placeholder:"Enter modal message",rows:"3"},null,8,W),[[s.Jo,o.options.message]]),(0,l.Lk)("p",H,"Use mapped keywords: "+(0,a.v_)(e.keyword)+".",1)])):(0,l.Q3)("",!0),"email"===o.type?((0,l.uX)(),(0,l.CE)("div",K,[t[35]||(t[35]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600"},"Recipient Email Address(es):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.to=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"email@example.com, another@example.com"},null,8,Y),[[s.Jo,o.options.to]]),t[36]||(t[36]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600 mt-2"},"Subject:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.subject=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"Email Subject"},null,8,q),[[s.Jo,o.options.subject]]),t[37]||(t[37]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600 mt-2"},"Email Body (HTML supported):",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":e=>o.options.body=e,class:"popup-input w-full text-xs mt-0.5",placeholder:"Enter email body. Use {{keyword}} for mapped values.",rows:"4"},null,8,Z),[[s.Jo,o.options.body]]),t[38]||(t[38]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600 mt-2"},"Sender Name (Optional):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.senderName=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"Your Site Name"},null,8,ee),[[s.Jo,o.options.senderName]]),t[39]||(t[39]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600 mt-2"},"Sender Email (Optional):",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.senderEmail=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"noreply@yourdomain.com"},null,8,te),[[s.Jo,o.options.senderEmail]])])):(0,l.Q3)("",!0),"redirect"===o.type?((0,l.uX)(),(0,l.CE)("div",oe,[t[40]||(t[40]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600"},"Redirect URL:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.url=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"https://example.com or /page-slug"},null,8,le),[[s.Jo,o.options.url]]),(0,l.Lk)("p",ae,"Can use mapped keywords: "+(0,a.v_)(e.keyword)+".",1)])):(0,l.Q3)("",!0),"trigger"===o.type?((0,l.uX)(),(0,l.CE)("div",se,[t[43]||(t[43]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600"},"Target Element Selector:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.element=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"e.g., #myElement, .my-class"},null,8,pe),[[s.Jo,o.options.element]]),t[44]||(t[44]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600 mt-2"},"Action:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e=>o.options.action=e,class:"popup-select w-full text-xs mt-0.5"},t[41]||(t[41]=[(0,l.Fv)('<option value="addClass" data-v-0c598528>Add CSS Class</option><option value="removeClass" data-v-0c598528>Remove CSS Class</option><option value="toggleClass" data-v-0c598528>Toggle CSS Class</option><option value="show" data-v-0c598528>Show Element (display: block)</option><option value="hide" data-v-0c598528>Hide Element (display: none)</option><option value="toggle" data-v-0c598528>Toggle Element Visibility</option>',6)]),8,ne),[[s.u1,o.options.action]]),"addClass"===o.options.action||"removeClass"===o.options.action||"toggleClass"===o.options.action?((0,l.uX)(),(0,l.CE)("div",ie,[t[42]||(t[42]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600 mt-2"},"CSS Class Name:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.cssClass=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"e.g., is-active, hidden"},null,8,de),[[s.Jo,o.options.cssClass]])])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0),"webhook"===o.type?((0,l.uX)(),(0,l.CE)("div",re,[t[46]||(t[46]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600"},"Webhook URL:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":e=>o.options.url=e,type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"https://api.example.com/hook"},null,8,ue),[[s.Jo,o.options.url]]),t[47]||(t[47]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600 mt-2"},"HTTP Method:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":e=>o.options.method=e,class:"popup-select w-full text-xs mt-0.5"},t[45]||(t[45]=[(0,l.Lk)("option",{value:"POST"},"POST",-1),(0,l.Lk)("option",{value:"GET"},"GET",-1),(0,l.Lk)("option",{value:"PUT"},"PUT",-1),(0,l.Lk)("option",{value:"DELETE"},"DELETE",-1)]),8,ce),[[s.u1,o.options.method]]),t[48]||(t[48]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600 mt-2"},"Payload (JSON, uses mapped data):",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":e=>o.options.payload=e,class:"popup-input w-full text-xs mt-0.5 font-mono",placeholder:'{\n  "value1": "{{mapped_keyword1}}",\n  "value2": "Static Text",\n  "user_id": "{{user.id}}"\n}',rows:"4"},null,8,me),[[s.Jo,o.options.payload]]),(0,l.Lk)("p",be,"Data from mappings will be sent. Use "+(0,a.v_)(e.keyword)+".",1)])):(0,l.Q3)("",!0),"script"===o.type?((0,l.uX)(),(0,l.CE)("div",ge,[t[49]||(t[49]=(0,l.Lk)("label",{class:"block popup-label text-xs font-medium text-gray-600"},"Custom JavaScript (Use with caution):",-1)),(0,l.bo)((0,l.Lk)("textarea",{"onUpdate:modelValue":e=>o.options.scriptContent=e,class:"popup-input w-full text-xs mt-0.5 font-mono",placeholder:"// Access mapped data via data.keyword\n// Example: console.log(data.email_address);\nalert('Hello ' + (data.user_name || 'Guest'));",rows:"5"},null,8,xe),[[s.Jo,o.options.scriptContent]]),t[50]||(t[50]=(0,l.Lk)("p",{class:"text-xs text-red-500 mt-0.5"},"Warning: Incorrect scripts can break functionality. Mapped data is available in a 'data' object (e.g., data.your_keyword).",-1))])):(0,l.Q3)("",!0)])):(0,l.Q3)("",!0)])))),128))])):((0,l.uX)(),(0,l.CE)("div",ye," No flow steps defined yet. Add a step above to get started. "))])]),!0)],512),[[s.aG,"flow"===Te.activeFlowTab]]),(0,l.bo)((0,l.Lk)("div",ke,[(0,l.RG)(e.$slots,"mapping-config",{},(()=>[t[64]||(t[64]=(0,l.Lk)("div",{class:"section-group border-b border-gray-200 pb-3 mb-3"},[(0,l.Lk)("span",{class:"block font-bold text-md"},"Data Mapping"),(0,l.Lk)("span",{class:"text-gray-500 text-sm"},"Map form fields or other data to keywords for use in Flow steps.")],-1)),(0,l.Lk)("div",we,[(0,l.Lk)("div",null,[t[53]||(t[53]=(0,l.Lk)("label",{class:"popup-label font-semibold"},"Keyword:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>Te.newMapping.keyword=e),onInput:t[10]||(t[10]=(...e)=>Je.sanitizeKeyword&&Je.sanitizeKeyword(...e)),type:"text",class:"popup-input w-full rounded-md border border-gray-300 mt-1",placeholder:"e.g., user_email"},null,544),[[s.Jo,Te.newMapping.keyword]]),t[54]||(t[54]=(0,l.Lk)("p",{class:"text-xs text-gray-500 mt-0.5"},"Alphanumeric and underscores only.",-1))]),(0,l.Lk)("div",null,[t[56]||(t[56]=(0,l.Lk)("label",{class:"popup-label font-semibold"},"Value Source:",-1)),(0,l.bo)((0,l.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>Te.newMapping.source=e),class:"popup-select w-full rounded-md border border-gray-300 mt-1"},t[55]||(t[55]=[(0,l.Fv)('<option value="" disabled data-v-0c598528>Select Source</option><option value="form_input" data-v-0c598528>Form Input by Name</option><option value="fixed_value" data-v-0c598528>Fixed Text/Value</option><option value="user_data" data-v-0c598528>User Data (e.g., user.id, user.email)</option><option value="url_param" data-v-0c598528>URL Parameter</option>',5)]),512),[[s.u1,Te.newMapping.source]])]),(0,l.Lk)("div",ve,[(0,l.Lk)("button",{onClick:t[12]||(t[12]=(...e)=>Je.addMapping&&Je.addMapping(...e)),class:"py-2 px-4 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none w-full md:w-auto",disabled:!Te.newMapping.keyword||!Te.newMapping.source},[(0,l.bF)(De,{icon:["fas","plus"],class:"mr-1.5"}),t[57]||(t[57]=(0,l.eW)(" Add Mapping "))],8,fe)])]),"form_input"===Te.newMapping.source?((0,l.uX)(),(0,l.CE)("div",he,[t[58]||(t[58]=(0,l.Lk)("label",{class:"popup-label text-xs font-medium text-gray-600"},"Form Input Name:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>Te.newMapping.sourceIdentifier=e),type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"Enter the 'name' attribute of the form input"},null,512),[[s.Jo,Te.newMapping.sourceIdentifier]])])):(0,l.Q3)("",!0),"fixed_value"===Te.newMapping.source?((0,l.uX)(),(0,l.CE)("div",Le,[t[59]||(t[59]=(0,l.Lk)("label",{class:"popup-label text-xs font-medium text-gray-600"},"Fixed Value:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>Te.newMapping.sourceIdentifier=e),type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"Enter the static value"},null,512),[[s.Jo,Te.newMapping.sourceIdentifier]])])):(0,l.Q3)("",!0),"user_data"===Te.newMapping.source?((0,l.uX)(),(0,l.CE)("div",Se,[t[60]||(t[60]=(0,l.Lk)("label",{class:"popup-label text-xs font-medium text-gray-600"},"User Data Key:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>Te.newMapping.sourceIdentifier=e),type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"e.g., id, email, name.first"},null,512),[[s.Jo,Te.newMapping.sourceIdentifier]]),t[61]||(t[61]=(0,l.Lk)("p",{class:"text-xs text-gray-500 mt-0.5"},"Example: user.id, user.custom_field. See documentation for available keys.",-1))])):(0,l.Q3)("",!0),"url_param"===Te.newMapping.source?((0,l.uX)(),(0,l.CE)("div",Ce,[t[62]||(t[62]=(0,l.Lk)("label",{class:"popup-label text-xs font-medium text-gray-600"},"URL Parameter Name:",-1)),(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>Te.newMapping.sourceIdentifier=e),type:"text",class:"popup-input w-full text-xs mt-0.5",placeholder:"e.g., ref_id from ?ref_id=123"},null,512),[[s.Jo,Te.newMapping.sourceIdentifier]])])):(0,l.Q3)("",!0),(0,l.Lk)("div",Ee,[t[63]||(t[63]=(0,l.Lk)("span",{class:"block popup-label font-semibold mb-2"},"Defined Mappings:",-1)),Te.localItem.mappings&&Te.localItem.mappings.length>0?((0,l.uX)(),(0,l.CE)("ul",Ue,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(Te.localItem.mappings,((e,t)=>((0,l.uX)(),(0,l.CE)("li",{key:e.keyword,class:"border border-gray-200 rounded-md p-3 bg-gray-50 flex justify-between items-center"},[(0,l.Lk)("div",null,[(0,l.Lk)("span",Ie,(0,a.v_)(e.keyword),1),(0,l.Lk)("span",Me," ← "+(0,a.v_)(Je.getHumanFriendlyMappingSource(e.source,e.sourceIdentifier)),1)]),(0,l.Lk)("button",{onClick:e=>Je.removeMapping(t),class:"p-1.5 text-xs bg-red-100 text-red-600 hover:bg-red-200 rounded-md focus:outline-none",title:"Remove Mapping"},[(0,l.bF)(De,{icon:["fas","trash"]})],8,Fe)])))),128))])):((0,l.uX)(),(0,l.CE)("div",Ve," No data mappings defined yet. Add a mapping to use dynamic data in your flows. "))])]),!0)],512),[[s.aG,"mapping"===Te.activeFlowTab]])])])):(0,l.Q3)("",!0)])}o(44114),o(98992),o(81454),o(37550);var Te=o(61273),Je=o(66188),De=o(37107);function Ne(e="step_"){return e+Date.now().toString(36)+Math.random().toString(36).substring(2,7)}De.Yv.add(Je.ii0,Je.ztb,Je.QLR,Je.cNj,Je.w2A,Je.INu,Je.B0C,Je.$3n,Je.yLS);var Xe={name:"ButtonElement",components:{FontAwesomeIcon:Te.gc},props:{item:{type:Object,required:!0},mode:{type:String,required:!0,validator:e=>["edit","preview"].includes(e)}},emits:["update-item"],data(){return{localItem:{},activeFlowTab:"button",newStep:{type:"",options:{}},newMapping:{keyword:"",source:"",sourceIdentifier:""}}},computed:{buttonStyleClass(){const e=this.localItem.style||"primary",t={primary:"bg-blue-500 hover:bg-blue-600 text-white",secondary:"bg-gray-500 hover:bg-gray-600 text-white",success:"bg-green-500 hover:bg-green-600 text-white",danger:"bg-red-500 hover:bg-red-600 text-white",warning:"bg-yellow-400 hover:bg-yellow-500 text-gray-800",info:"bg-sky-500 hover:bg-sky-600 text-white",light:"bg-gray-100 hover:bg-gray-200 text-gray-800 border border-gray-300",dark:"bg-gray-800 hover:bg-gray-900 text-white",link:"text-blue-600 hover:text-blue-700 hover:underline focus:outline-none"};return t[e]||t.primary},stepTypeOptions(){return[{value:"database",label:"Save Data to DB"},{value:"alert",label:"Show Alert"},{value:"modal",label:"Show Modal"}]}},watch:{item:{handler(e){const t={uid:Ne("button_"),type:"button",name:"",label:"Button",style:"primary",textSize:"text-base",flows:[],mappings:[]};this.localItem={...t,...JSON.parse(JSON.stringify(e)),flows:(e.flows||[]).map((e=>({...e,id:e.id||Ne("flow_"),options:e.options||{},isEditing:void 0!==e.isEditing&&e.isEditing}))),mappings:(e.mappings||[]).map((e=>({...e,keyword:e.keyword||Ne("map_")})))}},deep:!0,immediate:!0},localItem:{handler(e){this.$emit("update-item",JSON.parse(JSON.stringify(e)))},deep:!0}},methods:{generateUid:Ne,sanitizeKeyword(){this.newMapping.keyword=this.newMapping.keyword.replace(/[^a-zA-Z0-9_]/g,"").toLowerCase()},getHumanFriendlyStepType(e){const t={database:"Save to Database",alert:"Show Alert Message",modal:"Display Modal Popup",email:"Send Email Notification",redirect:"Redirect Page",delay:"Add Delay/Pause",trigger:"Trigger Element Action",webhook:"Call External Webhook",script:"Run Custom JavaScript"};return t[e]||e.charAt(0).toUpperCase()+e.slice(1)},getHumanFriendlyMappingSource(e,t){const o={form_input:`Form Input: '${t}'`,fixed_value:`Fixed Value: "${t}"`,user_data:`User Data: user.${t}`,url_param:`URL Parameter: '${t}'`};return o[e]||`${e}: ${t}`},addFlowStep(){if(!this.newStep.type)return;const e={stepName:"",duration:5,collection:"",text:"Alert!",title:"Modal Title",message:"Modal Message",to:"",subject:"",body:"",senderName:"",senderEmail:"",url:"",element:"",action:"show",cssClass:"",method:"POST",payload:"{}",scriptContent:'// Custom script here\nconsole.log("Script executed with data:", data);'};this.localItem.flows.push({id:Ne("flow_"),type:this.newStep.type,options:{...e||{},...this.newStep.options||{}},isEditing:!0}),this.newStep={type:"",options:{}}},toggleFlowStepEdit(e){this.localItem.flows[e].isEditing=!this.localItem.flows[e].isEditing},duplicateFlowStep(e){const t=this.localItem.flows[e],o=JSON.parse(JSON.stringify(t));o.id=Ne("flow_"),o.isEditing=!1,this.localItem.flows.splice(e+1,0,o)},moveFlowStep(e,t){const o=e+t;if(o<0||o>=this.localItem.flows.length)return;const[l]=this.localItem.flows.splice(e,1);this.localItem.flows.splice(o,0,l)},removeFlowStep(e){this.localItem.flows.splice(e,1)},addMapping(){this.newMapping.keyword&&this.newMapping.source&&(this.localItem.mappings.some((e=>e.keyword===this.newMapping.keyword))?alert(`Keyword "${this.newMapping.keyword}" already exists. Please use a unique keyword.`):(this.localItem.mappings.push({keyword:this.newMapping.keyword,source:this.newMapping.source,sourceIdentifier:this.newMapping.sourceIdentifier||""}),this.newMapping={keyword:"",source:"",sourceIdentifier:""}))},removeMapping(e){this.localItem.mappings.splice(e,1)}}},Ae=o(64621);const Qe=(0,Ae.A)(Xe,[["render",_e],["__scopeId","data-v-0c598528"]]);var Re=Qe}}]);
//# sourceMappingURL=element-button-vue.f6f85e6c.js.map