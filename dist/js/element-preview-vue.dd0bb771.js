"use strict";(self["webpackChunknode_backend"]=self["webpackChunknode_backend"]||[]).push([[9217],{40687:function(e,l,t){t.d(l,{A:function(){return f}});var s=t(20641),i=t(50953),a=t(90033),o=t(94232),r=t(10797),n=t(55372);const c={key:0,class:"fixed inset-0 overflow-y-auto"},d={class:"flex min-h-full items-center justify-center p-4 text-center"},p={class:"font-medium"},m={class:"bg-black w-8 h-8 right-2 top-2 leading-8 hover:bg-gray-500"},u={props:["isWindowsOpen","allowFileType","callbackFunction"],data(){return console.log("FileBrowser props:",this.isWindowsOpen,this.allowFileType,this.callbackFunction),{SessionList:[],loading_sources:!0,activeBlock:!1,schoolId:"",isOpen:this.isWindowsOpen,isAllow:this.allowFileType,isCallback:this.callbackFunction,mode:"popup"}},components:{FileManager:n.A},watch:{isWindowsOpen(e){console.log("isWindowsOpen changed to:",e),this.isOpen=e}},methods:{selectFileTrigger(e){this.selectFileTrigger=e,this.closeModal(),this.selectFile(e)},closeModal(){this.isOpen=!1,this.$emit("fileBrowserTrigger",!1)},selectFile(e){this.$emit("fileBrowserCallback",e)}},async mounted(){console.log("FileBrowser mounted with isOpen:",this.isOpen,"isWindowsOpen:",this.isWindowsOpen)},setup(){}};var g=Object.assign(u,{__name:"FileBrowser",setup(e){return(l,t)=>{const u=(0,s.g2)("font-awesome-icon");return(0,s.uX)(),(0,s.Wv)((0,i.R1)(o.O),{appear:"",show:l.isOpen,as:"template"},{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(r.lG),{as:"div",onClose:l.closeModal,class:"relative z-10"},{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(o._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,s.k6)((()=>t[1]||(t[1]=[(0,s.Lk)("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1)]))),_:1}),l.loading_sources?((0,s.uX)(),(0,s.CE)("div",c,[(0,s.Lk)("div",d,[(0,s.bF)((0,i.R1)(o._),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(r.Lj),{class:(0,a.C4)(["w-[60rem] z-40 transform overflow-hidden bg-white p-3 text-left align-middle shadow-xl transition-all blocking relative",[l.activeBlock?"isblock":"isunblock"]]),"data-content":"กำลังติดต่อฐานข้อมูล กรุณารอสักครู่....."},{default:(0,s.k6)((()=>[(0,s.bF)((0,i.R1)(r.L3),{as:"h3",class:"text-lg pb-2 font-bold leading-6 text-gray-900 border-b"},{default:(0,s.k6)((()=>[t[3]||(t[3]=(0,s.eW)("เลือกไฟล์ (Select File) ")),(0,s.Lk)("p",p,[t[2]||(t[2]=(0,s.eW)("อนุญาติเฉพาะไฟล์ ")),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.allowFileType,(e=>((0,s.uX)(),(0,s.CE)("span",{key:e.code,class:"text-xs font-medium bg-indigo-600 pl-2 pr-2 pt-1 mr-1 rounded text-white"},(0,a.v_)(e),1)))),128))]),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e)),type:"button",class:"z-50 absolute top-2 right-2"},[(0,s.Lk)("div",m,[(0,s.bF)(u,{icon:["fas","times"],class:"text-white mt-[7px] font-sm"})])])])),_:1}),(0,s.Lk)("div",null,[(0,s.bF)(n.A,{onSelectFileTrigger:l.selectFileTrigger,Mode:l.mode,AllowFile:l.isAllow,CallbackFunc:l.isCallback},null,8,["onSelectFileTrigger","Mode","AllowFile","CallbackFunc"])])])),_:1},8,["class"])])),_:1})])])):(0,s.Q3)("",!0)])),_:1},8,["onClose"])])),_:1},8,["show"])}}});const w=g;var f=w},36607:function(e,l,t){t.r(l),t.d(l,{default:function(){return E}});var s=t(20641),i=t(90033),a=t(53751);const o={key:0,class:"p-2 border rounded-md shadow-sm"},r={class:"flex items-center space-x-2"},n={class:"flex-shrink-0"},c=["src"],d={key:1,class:"w-12 h-12 bg-gray-200 rounded-md flex items-center justify-center text-gray-400"},p={class:"flex-grow min-w-0"},m=["title"],u={class:"text-xs text-gray-500"},g=["title"],w={class:"text-xs text-gray-500"},f={class:"font-semibold"},b={key:0,class:"text-xs text-gray-500"},k={class:"font-semibold"},v={class:"content-editor overflow-auto bg-white rounded-lg h-full"},h={class:"px-6 py-4 space-y-6"},y={class:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 space-y-4"},x={class:"flex"},F={class:"bg-white border border-gray-200 rounded-lg shadow-sm p-4"},L=["src"],I={key:1,class:"text-gray-400 text-sm"},O={class:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 mt-4"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},C={class:"flex space-x-4"},T={class:"inline-flex items-center"},_={class:"inline-flex items-center"},P={key:0},U={class:"inline-flex items-center"};function W(e,l,t,W,S,X){const N=(0,s.g2)("FileBrowser");return(0,s.uX)(),(0,s.CE)("div",null,["preview"===t.mode?((0,s.uX)(),(0,s.CE)("div",o,[(0,s.Lk)("div",r,[(0,s.Lk)("div",n,[S.localItem&&S.localItem.url?((0,s.uX)(),(0,s.CE)("img",{key:0,src:S.localItem.url,alt:"Preview Image",class:"w-12 h-12 object-cover rounded-md bg-gray-200"},null,8,c)):((0,s.uX)(),(0,s.CE)("div",d,l[7]||(l[7]=[(0,s.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[(0,s.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),(0,s.Lk)("div",p,[(0,s.Lk)("p",{class:"text-sm font-medium text-gray-900 truncate",title:S.localItem&&S.localItem.filename?S.localItem.filename:"No filename"},(0,i.v_)(S.localItem&&S.localItem.filename?S.localItem.filename:"No filename"),9,m),(0,s.Lk)("p",u,[l[8]||(l[8]=(0,s.eW)(" File: ")),(0,s.Lk)("span",{class:"font-semibold truncate",title:S.localItem.fileurl},(0,i.v_)(S.localItem.fileurl||"No file selected"),9,g)]),(0,s.Lk)("p",w,[l[9]||(l[9]=(0,s.eW)(" Display: ")),(0,s.Lk)("span",f,(0,i.v_)(S.localItem&&S.localItem.display?"download"===S.localItem.display?"Download":"Preview":"N/A"),1)]),S.localItem&&"preview"===S.localItem.display?((0,s.uX)(),(0,s.CE)("p",b,[l[10]||(l[10]=(0,s.eW)(" Download Allowed: ")),(0,s.Lk)("span",k,(0,i.v_)(S.localItem.canDownload?"Yes":"No"),1)])):(0,s.Q3)("",!0)])])])):(0,s.Q3)("",!0),"edit"===t.mode?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[S.isPreviewImageBrowserOpen?((0,s.uX)(),(0,s.Wv)(N,{key:0,class:"z-[9999]",isWindowsOpen:!0,callbackFunction:"image_preview",allowFileType:["jpg","gif","png","jpeg"],onFileBrowserTrigger:X.changePreviewFileImageTrigger,onFileBrowserCallback:X.selectPreviewFileImageTrigger},null,8,["onFileBrowserTrigger","onFileBrowserCallback"])):(0,s.Q3)("",!0),S.isFileUrlBrowserOpen?((0,s.uX)(),(0,s.Wv)(N,{key:1,class:"z-[9999]",isWindowsOpen:!0,callbackFunction:"preview_fileurl",allowFileType:["pdf"],onFileBrowserTrigger:X.changeFileUrlBrowserTrigger,onFileBrowserCallback:X.selectFileUrlBrowserTrigger},null,8,["onFileBrowserTrigger","onFileBrowserCallback"])):(0,s.Q3)("",!0),(0,s.Lk)("div",v,[l[20]||(l[20]=(0,s.Fv)('<div class="bg-white border-b border-gray-200 px-6 py-4 sticky top-0 z-10" data-v-23766f84><div class="flex items-center space-x-3" data-v-23766f84><div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center" data-v-23766f84><i class="fas fa-file-alt text-blue-600 h-4 w-4" data-v-23766f84></i></div><div data-v-23766f84><h3 class="text-lg font-semibold text-gray-900" data-v-23766f84>Preview File Configuration</h3><p class="text-sm text-gray-500" data-v-23766f84>ตั้งค่าการแสดงผลของไฟล์ตัวอย่าง</p></div></div></div>',1)),(0,s.Lk)("div",h,[(0,s.Lk)("div",y,[(0,s.Lk)("div",null,[l[11]||(l[11]=(0,s.Lk)("label",{class:"popup-label font-semibold mb-1"},"ชื่อไฟล์:",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>S.localItem.filename=e),type:"text",class:"popup-input w-full rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,512),[[a.Jo,S.localItem.filename]])]),(0,s.Lk)("div",null,[l[12]||(l[12]=(0,s.Lk)("label",{class:"popup-label font-semibold mb-1"},"ไฟล์ (URL):",-1)),(0,s.Lk)("div",x,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>S.localItem.fileurl=e),type:"text",class:"popup-input flex-grow rounded-md border border-gray-300 p-2 focus:border-blue-500 focus:ring-2 focus:ring-blue-500"},null,512),[[a.Jo,S.localItem.fileurl]]),(0,s.Lk)("button",{onClick:l[2]||(l[2]=(...e)=>X.triggerOpenFileUrlBrowser&&X.triggerOpenFileUrlBrowser(...e)),class:"ml-2 px-4 py-2 bg-blue-500 text-white rounded-md text-sm"}," Select File ")])])]),(0,s.Lk)("div",F,[l[14]||(l[14]=(0,s.Lk)("label",{class:"popup-label font-semibold mb-1"},"รูปตัวอย่าง (URL):",-1)),(0,s.Lk)("div",{class:"relative w-full h-48 flex items-center justify-center cursor-pointer border border-gray-200 rounded-md overflow-hidden mt-1",onClick:l[3]||(l[3]=(...e)=>X.triggerOpenPreviewImageBrowser&&X.triggerOpenPreviewImageBrowser(...e))},[S.localItem.url?((0,s.uX)(),(0,s.CE)("img",{key:0,src:S.localItem.url,alt:"Selected Image",class:"object-cover w-full h-full"},null,8,L)):((0,s.uX)(),(0,s.CE)("span",I,"ยังไม่ได้เลือกรูป")),l[13]||(l[13]=(0,s.Lk)("div",{class:"absolute inset-0 flex flex-col items-center justify-center opacity-0 hover:opacity-75 bg-black bg-opacity-25 transition-opacity pointer-events-none"},[(0,s.Lk)("span",{class:"text-white text-center p-2 text-sm"},[(0,s.Lk)("i",{class:"fas fa-upload text-white text-lg mr-1"}),(0,s.eW)(" คลิ๊กเพื่อเลือกรูปภาพ ")])],-1))])]),(0,s.Lk)("div",O,[(0,s.Lk)("div",B,[(0,s.Lk)("div",null,[l[17]||(l[17]=(0,s.Lk)("label",{class:"popup-label block mb-1 font-semibold"},"การแสดงผลหลัก:",-1)),(0,s.Lk)("div",C,[(0,s.Lk)("label",T,[(0,s.bo)((0,s.Lk)("input",{type:"radio",value:"download","onUpdate:modelValue":l[4]||(l[4]=e=>S.localItem.display=e),class:"form-radio"},null,512),[[a.XL,S.localItem.display]]),l[15]||(l[15]=(0,s.Lk)("span",{class:"ml-2 text-sm"},"Direct Download",-1))]),(0,s.Lk)("label",_,[(0,s.bo)((0,s.Lk)("input",{type:"radio",value:"preview","onUpdate:modelValue":l[5]||(l[5]=e=>S.localItem.display=e),class:"form-radio"},null,512),[[a.XL,S.localItem.display]]),l[16]||(l[16]=(0,s.Lk)("span",{class:"ml-2 text-sm"},"Preview",-1))])])]),"preview"===S.localItem.display?((0,s.uX)(),(0,s.CE)("div",P,[l[19]||(l[19]=(0,s.Lk)("label",{class:"popup-label block mb-1 font-semibold"},"ตัวเลือกสำหรับ Preview Mode:",-1)),(0,s.Lk)("label",U,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>S.localItem.canDownload=e),type:"checkbox",class:"form-checkbox rounded"},null,512),[[a.lH,S.localItem.canDownload]]),l[18]||(l[18]=(0,s.Lk)("span",{class:"ml-2 text-sm"},"Allow Download from Preview",-1))])])):(0,s.Q3)("",!0)])])])])],64)):(0,s.Q3)("",!0)])}var S=t(40687),X={name:"PreviewElement",components:{FileBrowser:S.A},props:{item:{type:Object,required:!0},mode:{type:String,required:!0}},emits:["update-item"],data(){return{localItem:JSON.parse(JSON.stringify(this.item)),isPreviewImageBrowserOpen:!1,isFileUrlBrowserOpen:!1}},watch:{item:{handler(e){JSON.stringify(e)!==JSON.stringify(this.localItem)&&(this.localItem=JSON.parse(JSON.stringify(e)))},deep:!0},localItem:{handler(e){JSON.stringify(e)!==JSON.stringify(this.item)&&this.$emit("update-item",JSON.parse(JSON.stringify(e)))},deep:!0}},methods:{triggerOpenPreviewImageBrowser(){this.isPreviewImageBrowserOpen=!0},changePreviewFileImageTrigger(e){this.isPreviewImageBrowserOpen=e},selectPreviewFileImageTrigger(e){e&&e.file&&(this.localItem={...this.localItem,url:e.file}),this.isPreviewImageBrowserOpen=!1},triggerOpenFileUrlBrowser(){this.isFileUrlBrowserOpen=!0},changeFileUrlBrowserTrigger(e){this.isFileUrlBrowserOpen=e},selectFileUrlBrowserTrigger(e){e&&e.file&&(this.localItem={...this.localItem,fileurl:e.file}),this.isFileUrlBrowserOpen=!1}}},N=t(64621);const j=(0,N.A)(X,[["render",W],["__scopeId","data-v-23766f84"]]);var E=j}}]);
//# sourceMappingURL=element-preview-vue.dd0bb771.js.map