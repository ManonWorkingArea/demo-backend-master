# üìñ README - Inventory Module Documentation

> **‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Inventory Management**  
> **‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:** ‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤ ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

---

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

### üéØ ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏Å

1. **[INVENTORY_SERVICE_GUIDE.md](./INVENTORY_SERVICE_GUIDE.md)**  
   üì¶ ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô InventoryService API  
   - ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
   - Product Management (CRUD)
   - Stock Location Management
   - Lot Tracking System
   - Stock Movement (‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤/‡∏ï‡∏±‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Å/‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô)
   - Stock Reservation (‡∏à‡∏≠‡∏á‡∏™‡∏ï‡πá‡∏≠‡∏Ñ)
   - Inventory Balance
   - Error Handling

2. **[LOT_TRACKING_GUIDE.md](./LOT_TRACKING_GUIDE.md)**  
   üè∑Ô∏è ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö Lot Tracking  
   - ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Lot
   - ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™ Lot (402-177-152-08883)
   - ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Lot
   - Lot Status & Roll Condition
   - ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß
   - Best Practices

3. **[SCRAP_SAMPLE_GUIDE.md](./SCRAP_SAMPLE_GUIDE.md)**  
   üóëÔ∏è ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∏‡∏î  
   - Stock Location Types (warehouse, scrap, sample, virtual)
   - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ Scrap
   - ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ Sample
   - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∏‡∏î (Defective)
   - ‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
   - Best Practices

---

## üöÄ Quick Start

### ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

```javascript
// 1. Import Service
import { inventoryService } from '@/services/InventoryService'

// 2. ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡∏ú‡πà‡∏≤‡∏ô ERP_CORE
const inventory = window.ERP_CORE.inventory

// 3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
if (inventory.isReady()) {
  console.log('‚úÖ Inventory Service Ready')
}
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô

```javascript
// ‡∏î‡∏∂‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
const products = await inventory.getAllProducts()

// ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Lot ‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
const lots = await inventory.getLotTracking(productId)

// ‡∏à‡∏≠‡∏á‡∏™‡∏ï‡πá‡∏≠‡∏Ñ
const reservation = await inventory.reserveLotStock({
  lot_id: 'lot_xxx',
  reserved_meters: 10,
  customer_name: '‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ABC'
})

// ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ Scrap
const result = await inventory.returnLotStock({
  lot_id: 'lot_xxx',
  return_meters: 5,
  return_location_code: 'SCRAP-01',
  is_scrap_return: true,
  count_in_stock: false
})
```

---

## üìã ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å

### ‚úÖ Product Management
- ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
- Soft Delete (‡πÑ‡∏°‡πà‡∏•‡∏ö‡∏ñ‡∏≤‡∏ß‡∏£)
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ Barcode/SKU
- ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏° Inventory

### ‚úÖ Lot Tracking
- ‡∏™‡∏£‡πâ‡∏≤‡∏á Lot ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏´‡∏±‡∏™ Auto-generate
- ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏™‡∏ï‡πá‡∏≠‡∏Ñ‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏° Lot
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏≠: 402-177-152-08883
- ‡∏î‡∏π Reservation & Scrap breakdown

### ‚úÖ Stock Movement
- ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Goods Receipt)
- ‡∏ï‡∏±‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Ñ (Cut/Issue)
- ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Return)
  - ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á‡∏õ‡∏Å‡∏ï‡∏¥
  - ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ Scrap
  - ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ Sample

### ‚úÖ Stock Reservation
- ‡∏à‡∏≠‡∏á‡∏™‡∏ï‡πá‡∏≠‡∏Ñ‡∏à‡∏≤‡∏Å Lot
- ‡πÅ‡∏¢‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: unpaid, deposit, paid
- Auto-expire (7 ‡∏ß‡∏±‡∏ô)
- ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á
- ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô

### ‚úÖ Stock Location
- 4 ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: warehouse, scrap, sample, virtual
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
- Rack Position Tracking

### ‚úÖ Scrap/Sample Management
- ‡πÅ‡∏¢‡∏Å‡∏Ñ‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢ (‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å)
- ‡πÅ‡∏¢‡∏Å‡∏Ñ‡∏•‡∏±‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å‡∏Ç‡∏≤‡∏¢)
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∏‡∏î
- ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô Scrap Rate

### ‚úÖ Inventory Balance
- ‡∏™‡∏ï‡πá‡∏≠‡∏Ñ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (qty_on_hand)
- ‡∏™‡∏ï‡πá‡∏≠‡∏Ñ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ (qty_available)
- ‡∏™‡∏ï‡πá‡∏≠‡∏Ñ‡∏à‡∏≠‡∏á (qty_reserved)
- ‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢ (scrap_qty)
- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (sample_qty)
- ‡∏ä‡∏≥‡∏£‡∏∏‡∏î (defective_qty)

---

## üóÑÔ∏è Database Collections

### Core Collections

| Collection | ‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå | ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á |
|-----------|----------|--------------|
| `products` | ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ | INVENTORY_SERVICE_GUIDE.md |
| `stock_locations` | ‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ | SCRAP_SAMPLE_GUIDE.md |
| `lot_tracking` | ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° Lot | LOT_TRACKING_GUIDE.md |
| `stock_movements` | Log ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß | INVENTORY_SERVICE_GUIDE.md |
| `lot_reservations` | ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏™‡∏ï‡πá‡∏≠‡∏Ñ | INVENTORY_SERVICE_GUIDE.md |
| `inventory_balance` | ‡∏¢‡∏≠‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Ñ‡∏£‡∏ß‡∏° | INVENTORY_SERVICE_GUIDE.md |
| `stock_returns` | ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ | SCRAP_SAMPLE_GUIDE.md |

---

## üéì Use Cases

### Case 1: ‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á Lot

```javascript
const receiptData = {
  product_id: 'product_xxx',
  sku: 'SKU-2024-001',
  lot_code: '08883',
  quantity: 100,
  weight_kg: 30,
  location_code: 'WH-01',
  supplier_name: '‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ABC',
  received_date: '2024-11-24'
}

const result = await inventory.receiveGoodsWithLotTracking(receiptData)
// ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á: lot_tracking, stock_movements, inventory_balance
```

**‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:** [LOT_TRACKING_GUIDE.md](./LOT_TRACKING_GUIDE.md)

---

### Case 2: ‡∏à‡∏≠‡∏á‡∏™‡∏ï‡πá‡∏≠‡∏Ñ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Quotation

```javascript
const reservationData = {
  lot_id: 'lot_xxx',
  product_id: 'product_xxx',
  reserved_meters: 10.5,
  payment_status: 'unpaid',
  reference_type: 'quotation',
  reference_id: 'quotation_xxx',
  customer_name: '‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó XYZ'
}

const result = await inventory.reserveLotStock(reservationData)
// ‚úÖ ‡∏à‡∏≠‡∏á‡∏™‡∏ï‡πá‡∏≠‡∏Ñ 10.5 ‡πÄ‡∏°‡∏ï‡∏£, ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ 7 ‡∏ß‡∏±‡∏ô
```

**‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:** [INVENTORY_SERVICE_GUIDE.md - Stock Reservation](./INVENTORY_SERVICE_GUIDE.md#stock-reservation)

---

### Case 3: ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ñ‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢

```javascript
const returnData = {
  lot_id: 'lot_xxx',
  return_meters: 5,
  return_type: 'defective',
  reason: '‡∏ú‡πâ‡∏≤‡∏Ç‡∏≤‡∏î ‡πÄ‡∏õ‡∏∑‡πâ‡∏≠‡∏ô‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô',
  
  // ‚úÖ ‡πÄ‡∏Ç‡πâ‡∏≤ Scrap Location
  return_location_code: 'SCRAP-01',
  location_type: 'scrap',
  is_scrap_return: true,
  count_in_stock: false  // ‡πÑ‡∏°‡πà‡∏ô‡∏±‡∏ö‡∏™‡∏ï‡πá‡∏≠‡∏Å
}

const result = await inventory.returnLotStock(returnData)
// ‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢ 5 ‡πÄ‡∏°‡∏ï‡∏£ (‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏ï‡πá‡∏≠‡∏Å)
```

**‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:** [SCRAP_SAMPLE_GUIDE.md](./SCRAP_SAMPLE_GUIDE.md)

---

### Case 4: ‡∏ï‡∏±‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Ñ‡∏à‡∏≤‡∏Å Lot

```javascript
const cutData = {
  lot_id: 'lot_xxx',
  reservation_id: 'reservation_xxx',
  cut_meters: 10.5,
  notes: '‡∏ï‡∏±‡∏î‡∏Ç‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ A'
}

const result = await inventory.cutLotStock(cutData)
// ‚úÖ ‡∏ï‡∏±‡∏î‡∏™‡∏ï‡πá‡∏≠‡∏Ñ 10.5 ‡πÄ‡∏°‡∏ï‡∏£, ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï lot, balance
```

**‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:** [INVENTORY_SERVICE_GUIDE.md - Stock Movement](./INVENTORY_SERVICE_GUIDE.md#stock-movement)

---

## üîç ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤

```javascript
// ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏à‡∏≤‡∏Å Barcode
const result = await inventory.searchProductByBarcode('8859012345678')

// ‡∏î‡∏∂‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
const products = await inventory.getAllProducts()

// ‡∏î‡∏∂‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Inventory
const data = await inventory.getProductWithInventoryData(productId)
```

### ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Lot

```javascript
// ‡∏î‡∏∂‡∏á Lots ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
const lots = await inventory.getLotTracking(productId)

// Filter Lots ‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ
const availableLots = lots.filter(lot => 
  lot.status === 'available' && 
  lot.remaining_meters > lot.reserved_meters
)

// FIFO - ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Lot ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô
const oldestLot = lots
  .filter(lot => lot.status === 'available')
  .sort((a, b) => new Date(a.received_date) - new Date(b.received_date))[0]
```

### ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Movement

```javascript
// ‡∏î‡∏∂‡∏á Movements ‡∏Ç‡∏≠‡∏á Lot
const movements = await inventory.apiRequest.POST('stock_movements/aggregate', {
  pipeline: [
    { $match: { lot_id: lotId } },
    { $sort: { created_at: -1 } }
  ]
}, inventory.clientKey)
```

---

## üìä ‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô

### ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô Stock Summary

```javascript
const balance = await inventory.getInventoryBalance(productId)

console.log({
  qty_on_hand: balance.qty_on_hand,      // ‡∏™‡∏ï‡πá‡∏≠‡∏Ñ‡∏£‡∏ß‡∏°
  qty_available: balance.qty_available,   // ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ
  qty_reserved: balance.qty_reserved,     // ‡∏à‡∏≠‡∏á‡πÑ‡∏ß‡πâ
  scrap_qty: balance.scrap_qty,           // ‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢
  sample_qty: balance.sample_qty,         // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
  defective_qty: balance.defective_qty    // ‡∏ä‡∏≥‡∏£‡∏∏‡∏î
})
```

### ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô Lot Summary

```javascript
const lots = await inventory.getLotTracking(productId)

const summary = lots.reduce((acc, lot) => ({
  total_meters: acc.total_meters + lot.remaining_meters,
  reserved_meters: acc.reserved_meters + lot.reserved_meters,
  scrap_meters: acc.scrap_meters + (lot.scrap_meters || 0),
  sample_meters: acc.sample_meters + (lot.sample_meters || 0)
}), { total_meters: 0, reserved_meters: 0, scrap_meters: 0, sample_meters: 0 })
```

### ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô Scrap Rate

```javascript
const scrapRate = (balance.scrap_qty / balance.qty_on_hand) * 100

if (scrapRate > 5) {
  console.warn(`‚ö†Ô∏è Scrap Rate ‡∏™‡∏π‡∏á: ${scrapRate.toFixed(2)}%`)
}
```

---

## üõ†Ô∏è Developer Tools

### Debug Mode

```javascript
// Enable debug logging
console.log('üîç Debug Info:')
console.log('  Service Ready:', inventory.isReady())
console.log('  Client Key:', inventory.clientKey ? 'Set' : 'Missing')
console.log('  API Request:', typeof inventory.apiRequest)
```

### Validation Helper

```javascript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á Lot
const validateLot = (lot) => {
  const errors = []
  
  if (lot.remaining_meters > lot.original_meters) {
    errors.push('remaining > original')
  }
  
  if (lot.reserved_meters > lot.remaining_meters) {
    errors.push('reserved > remaining')
  }
  
  if (errors.length > 0) {
    console.error('‚ùå Validation Errors:', errors)
    return false
  }
  
  return true
}
```

---

## ‚ö†Ô∏è Common Issues

### Issue 1: Service not initialized
```javascript
Error: InventoryService not initialized

// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:
if (!inventory.isReady()) {
  inventory.initialize(app.config.globalProperties)
}
```

### Issue 2: Client key missing
```javascript
Error: Client key is required

// ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:
console.log('Client Key:', window.ERP_CORE?.clientKey)
```

### Issue 3: Scrap ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ô UI
```javascript
// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:
const lots = await inventory.getLotTracking(productId)
console.log('Scrap data:', lots.map(l => ({
  lot: l.lot_code,
  scrap: l.scrap_meters
})))

// ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ returnLotStock ‡∏™‡πà‡∏á is_scrap_return: true
```

---

## üìù Best Practices

### ‚úÖ ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥

1. ‡πÉ‡∏ä‡πâ FIFO ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Lot
2. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà return/cut stock
3. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Scrap Rate ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥
4. ‡πÉ‡∏ä‡πâ Soft Delete ‡πÅ‡∏ó‡∏ô Hard Delete
5. Validate input ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API

### ‚ùå ‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥

1. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï remaining_meters ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á (‡πÉ‡∏ä‡πâ movement)
2. Hard Delete Lot ‡∏ó‡∏µ‡πà‡∏°‡∏µ transaction
3. ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÉ‡∏´‡πâ reservation ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£
4. ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å location_code ‡πÅ‡∏•‡∏∞ rack_position
5. ‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™ Lot ‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô

---

## üîó ‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

### ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏†‡∏≤‡∏¢‡πÉ‡∏ô
- [INVENTORY_SERVICE_GUIDE.md](./INVENTORY_SERVICE_GUIDE.md) - API Reference
- [LOT_TRACKING_GUIDE.md](./LOT_TRACKING_GUIDE.md) - Lot System
- [SCRAP_SAMPLE_GUIDE.md](./SCRAP_SAMPLE_GUIDE.md) - Scrap/Sample Management

### ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏∑‡πà‡∏ô
- `../QUOTATION_STOCK_RESERVATION_SUMMARY.md` - Quotation Integration
- `../STOCK_RESERVATION_UI_IMPLEMENTATION.md` - UI Implementation
- `../RESERVATION_DEBUG_GUIDE.md` - Debugging Reservations

---

## üìß ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ & ‡∏™‡∏ô‡∏±‡∏ö‡∏™‡∏ô‡∏∏‡∏ô

**ERP Development Team**  
- üìß Email: dev@example.com
- üí¨ Chat: #erp-support
- üìñ Wiki: wiki.example.com/erp

---

## üìÖ Version History

| Version | Date | Changes |
|---------|------|---------|
| 2.0.0 | 2024-11-24 | ‡πÄ‡∏û‡∏¥‡πà‡∏° Scrap/Sample Management, Enhanced Lot Tracking |
| 1.5.0 | 2024-11-01 | ‡πÄ‡∏û‡∏¥‡πà‡∏° Stock Reservation System |
| 1.0.0 | 2024-10-01 | Release ‡πÅ‡∏£‡∏Å - Basic Inventory |

---

**‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:** 24 ‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô 2025  
**‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô:** 2.0
